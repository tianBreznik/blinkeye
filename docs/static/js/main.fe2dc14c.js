/*! For license information please see main.fe2dc14c.js.LICENSE.txt */
(()=>{var e={4111:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{A:()=>T});n(4050);var r=n(5043),o=n(3139),s=n(2985),i=n(2892),c=(n(6139),n(6212)),l=(n(8507),n(9833),n(839)),u=n(3415),h=n(7029),d=n.n(h),p=n(579);const m=.3;let g,y=0,b=0;l.JZ.MediaPipeFaceMesh;const v=await u.H({inputResolution:{width:720,height:500},scale:.8}),x=n(3282);function w(e,t){return Math.random()*(t-e)+e}function k(e,t){function n(e,t,n,a){return Math.sqrt((n-e)*(n-e)+(a-t)*(a-t))}return(n(e[5][0],e[5][1],t[4][0],t[4][1])+n(e[3][0],e[3][1],t[2][0],t[2][1]))/(2*n(e[0][0],e[0][1],e[8][0],e[8][1]))}async function S(e){const t=await v.estimateFaces(e);return t.length>0&&t.forEach((e=>{const t=e.annotations.rightEyeUpper0,n=k(e.annotations.rightEyeLower0,t),a=e.annotations.leftEyeUpper0;k(e.annotations.leftEyeLower0,a)<=m&&n<=m?(console.log("blinked!!!!"),g={shortBlink:!1,longBlink:!1},y+=1):(g={shortBlink:y<=5&&0!==y,longBlink:y>5},y=0)})),g}function I(){const[e,t]=(0,r.useState)(0),[n,a]=(0,r.useState)(5),[l,u]=(0,r.useState)(0),[h,f]=(0,r.useState)([]),[m,g]=(0,r.useState)([]),[y,v]=(0,r.useState)([]),[k,I]=(0,r.useState)([]),[T,C]=(0,r.useState)([]),[E,N]=(0,r.useState)([]),[R,A]=(0,r.useState)("visible"),[_,O]=(0,r.useState)("none"),F=((0,r.useRef)(null),(0,r.useRef)(null));(0,r.useRef)(null);(0,r.useEffect)((()=>{fetch("https://gnews.io/api/v4/top-headlines?category=world&lang=en&country=us&max=50&apikey=48878147a05368955e614dca472e6dc4").then((e=>e.json())).then((e=>f(e.articles))).catch((e=>console.log(e.message)))}),[]);const D={method:"GET",headers:{"X-RapidAPI-Key":"149c13c63amsh5015475dafad941p18992ajsnc6524a1363a9","X-RapidAPI-Host":"vinted3.p.rapidapi.com","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}};async function L(){A("hidden"),setTimeout((()=>{A("visible"),O("block")}),250),O("none");const r=e>=h.length-1?0:e+1;t(r),I([...k,e]);const o=n>=h.length-1?0:n+1;a(o),a([...T,n]);const s=l>=m.length-1?0:l+1;u(s),N([...E,l])}(0,i.Yb)((async()=>{try{const e=await fetch("https://vinted3.p.rapidapi.com/getSearch?country=us&page=1&order=newest_first",D),t=await e.text(),n=JSON.parse(t);g(n)}catch(e){console.error(e)}}),[]);const M=new s.uK("bvWogBDRALOdICcvDhJPS5XVxe50qs7O");function P(){const[t,n]=(0,r.useState)(null),a=x.extract(h[e].description,{language:"english",remove_digits:!0,return_changed_case:!0,return_chained_words:!0,remove_duplicates:!0});return(0,i.Yb)((async()=>{const{data1:e}=await M.search(a[0],{sort:"relevant",lang:"es",limit:10,type:"stickers"});if("undefined"==typeof e){const{data:e}=await M.random({tag:"blink",type:"stickers"});n(e)}else n(e[0])}),[]),t&&(0,p.jsx)(o.TX,{gif:t,width:100,style:{left:20*w(-1,1)+"%",top:35*w(-1,1)+"%"},backgroundColor:"transparent",height:100})}const z=async()=>{if(document.querySelectorAll(".li").length%12==1&&(b+=window.innerHeight/2,window.scrollTo({top:b,behavior:"smooth"})),"undefined"!==typeof F.current&&null!==F.current&&4===F.current.video.readyState){const e=F.current.video,t=F.current.video.videoWidth,n=F.current.video.videoHeight;F.current.video.width=t,F.current.video.height=n;const a=await S(e);if(a)if(a.longBlink)await L();else{if(!a.shortBlink)return;await L()}}};return(async()=>{setInterval((()=>{z()}),100)})(),(0,p.jsxs)("div",{className:"App",children:[(0,p.jsx)(d(),{ref:F,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:720,height:500,display:"none"}}),(0,p.jsxs)("div",{className:"tabloid",children:[(0,p.jsxs)("div",{className:"blink-button",children:[(0,p.jsxs)("button",{className:"blink-img",onClick:()=>L(),children:[(0,p.jsx)("img",{className:"blink yesblink",src:"eyes.gif",alt:"Blinking eye jpg"}),(0,p.jsx)("img",{className:"blink noblink",style:{display:_},src:"eyesopen.jpg",alt:"Blinking eye gif"})]}),(0,p.jsx)("div",{className:"shimmer-shell",children:(0,p.jsx)("p",{className:"shimmer",children:"Click..."})})]}),(0,p.jsxs)("div",{style:{visibility:R},className:"answers",children:[h[e]&&(0,p.jsxs)("div",{className:"li",id:Math.random()>.15?"blink":"",children:[(0,p.jsx)("h2",{className:"newstitle",children:h[e].title}),(0,p.jsx)("p",{className:"newscontent",id:Math.random()>.1?"tired":"",children:h[e].content}),(0,p.jsx)("img",{className:"newsimg",id:Math.random()>.25?"blink":"",style:{left:15*Math.random()+"%",top:40*Math.random()+"%"},src:h[e].image}),(0,p.jsx)("div",{className:"gif",children:(0,p.jsx)(P,{})})]},h[e].publishedAt),Math.random()>.4&&k.length>0&&(0,p.jsx)("div",{className:"li",children:(0,p.jsx)(c.A,{})}),k.length>0&&k.map(((e,t)=>Math.random()>.3?(0,p.jsxs)("div",{className:"li",id:Math.random()>.15?"blink":"",children:[(0,p.jsx)("h2",{className:"newstitle",children:h[e].title}),(0,p.jsx)("p",{className:"newscontent",id:Math.random()>.1?"tired":"",children:h[e].content}),(0,p.jsx)("img",{className:"newsimg",style:{left:15*Math.random()+"%",top:40*Math.random()+"%"},src:h[e].image}),(0,p.jsx)("div",{className:"gif",children:(0,p.jsx)(P,{})})]},h[e].publishedAt):Math.random()>=.4?(0,p.jsxs)("div",{className:"li vinteddiv",children:[(0,p.jsx)("a",{href:m[e].url,children:(0,p.jsx)("img",{src:m[e].image,className:"vintedimg",href:m[e].url})}),(0,p.jsx)("h3",{style:{color:"red",zIndex:"6",marginTop:"-30%"},children:m[e].title}),(0,p.jsx)("h4",{style:{color:"red",textDecoration:"underline",bottom:"0px",marginLeft:"5px",zIndex:"6",marginTop:"20%"},children:m[e].brand}),(0,p.jsx)("button",{href:m[e].url,id:"blink",style:{position:"absolute",height:"30%",width:"100%",outline:"none",borderRadius:"0",borderWidth:"10px",borderTopColor:"#FF4433",borderLeftColor:"#FF4433",borderBottomColor:"#DC143C",borderRightColor:"#DC143C",backgroundColor:"#FF3131",color:"yellow",bottom:"0",right:"0",left:"0",textAlign:"bottom",cursor:"pointer"},children:(0,p.jsxs)("span",{className:"buttonspan",children:["BUY NOW ON VINTED ",m[e].price.amount,m[e].price.currency]})})]},m[e].productId):(0,p.jsx)("div",{className:"li",children:(0,p.jsx)(c.A,{})}))),Math.random()>.4&&k.length>0&&(0,p.jsx)("div",{className:"li",children:(0,p.jsx)(c.A,{})})]})]})]})}const T=I;a()}catch(f){a(f)}}),1)},6212:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(5043),r=(n(2892),n(579));const o=()=>{const[e,t]=(0,a.useState)(null);function n(){for(var e="01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz",a="",r=0;r<5;r++){var o=Math.floor(62*Math.random());a+=e.substring(o,o+1)}var s="https://i.imgur.com/"+a+".jpg",i=new Image;i.onload=function(){161==this.width?n():t(s)},i.src=s}return(0,a.useEffect)((()=>{n()})),(0,r.jsx)("div",{children:(0,r.jsx)("img",{className:"imgurimg",src:e})},e)}},2812:(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{n(5043);var a=n(4391),r=(n(9555),n(4111)),o=n(9031),s=n(579),i=e([r]);r=(i.then?(await i)():i)[0];a.createRoot(document.getElementById("root")).render((0,s.jsx)(r.A,{})),(0,o.A)(),t()}catch(c){t(c)}}))},9031:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:a,getFCP:r,getLCP:o,getTTFB:s}=t;n(e),a(e),r(e),o(e),s(e)}))}},3139:(e,t,n)=>{"use strict";function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{TX:()=>Nr});var r=n(3016),o=n(5043);var s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};Object.create;function i(e,t,n){if(n||2===arguments.length)for(var a,r=0,o=t.length;r<o;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}Object.create;var c=n(7324),l=n.n(c),u="-ms-",h="-moz-",d="-webkit-",p="comm",f="rule",m="decl",g="@import",y="@keyframes",b="@layer",v=Math.abs,x=String.fromCharCode,w=Object.assign;function k(e){return e.trim()}function S(e,t){return(e=t.exec(e))?e[0]:e}function I(e,t,n){return e.replace(t,n)}function T(e,t,n){return e.indexOf(t,n)}function C(e,t){return 0|e.charCodeAt(t)}function E(e,t,n){return e.slice(t,n)}function N(e){return e.length}function R(e){return e.length}function A(e,t){return t.push(e),e}function _(e,t){return e.filter((function(e){return!S(e,t)}))}var O=1,F=1,D=0,L=0,M=0,P="";function z(e,t,n,a,r,o,s,i){return{value:e,root:t,parent:n,type:a,props:r,children:o,line:O,column:F,length:s,return:"",siblings:i}}function B(e,t){return w(z("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function W(e){for(;e.root;)e=B(e.root,{children:[e]});A(e,e.siblings)}function U(){return M=L>0?C(P,--L):0,F--,10===M&&(F=1,O--),M}function V(){return M=L<D?C(P,L++):0,F++,10===M&&(F=1,O++),M}function G(){return C(P,L)}function j(){return L}function H(e,t){return E(P,e,t)}function K(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function q(e){return O=F=1,D=N(P=e),L=0,[]}function Y(e){return P="",e}function X(e){return k(H(L-1,J(91===e?e+2:40===e?e+1:e)))}function Z(e){for(;(M=G())&&M<33;)V();return K(e)>2||K(M)>3?"":" "}function Q(e,t){for(;--t&&V()&&!(M<48||M>102||M>57&&M<65||M>70&&M<97););return H(e,j()+(t<6&&32==G()&&32==V()))}function J(e){for(;V();)switch(M){case e:return L;case 34:case 39:34!==e&&39!==e&&J(M);break;case 40:41===e&&J(e);break;case 92:V()}return L}function $(e,t){for(;V()&&e+M!==57&&(e+M!==84||47!==G()););return"/*"+H(t,L-1)+"*"+x(47===e?e:V())}function ee(e){for(;!K(G());)V();return H(e,L)}function te(e,t){for(var n="",a=0;a<e.length;a++)n+=t(e[a],a,e,t)||"";return n}function ne(e,t,n,a){switch(e.type){case b:if(e.children.length)break;case g:case m:return e.return=e.return||e.value;case p:return"";case y:return e.return=e.value+"{"+te(e.children,a)+"}";case f:if(!N(e.value=e.props.join(",")))return""}return N(n=te(e.children,a))?e.return=e.value+"{"+n+"}":""}function ae(e,t,n){switch(function(e,t){return 45^C(e,0)?(((t<<2^C(e,0))<<2^C(e,1))<<2^C(e,2))<<2^C(e,3):0}(e,t)){case 5103:return d+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return d+e+e;case 4789:return h+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return d+e+h+e+u+e+e;case 5936:switch(C(e,t+11)){case 114:return d+e+u+I(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return d+e+u+I(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return d+e+u+I(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return d+e+u+e+e;case 6165:return d+e+u+"flex-"+e+e;case 5187:return d+e+I(e,/(\w+).+(:[^]+)/,d+"box-$1$2"+u+"flex-$1$2")+e;case 5443:return d+e+u+"flex-item-"+I(e,/flex-|-self/g,"")+(S(e,/flex-|baseline/)?"":u+"grid-row-"+I(e,/flex-|-self/g,""))+e;case 4675:return d+e+u+"flex-line-pack"+I(e,/align-content|flex-|-self/g,"")+e;case 5548:return d+e+u+I(e,"shrink","negative")+e;case 5292:return d+e+u+I(e,"basis","preferred-size")+e;case 6060:return d+"box-"+I(e,"-grow","")+d+e+u+I(e,"grow","positive")+e;case 4554:return d+I(e,/([^-])(transform)/g,"$1"+d+"$2")+e;case 6187:return I(I(I(e,/(zoom-|grab)/,d+"$1"),/(image-set)/,d+"$1"),e,"")+e;case 5495:case 3959:return I(e,/(image-set\([^]*)/,d+"$1$`$1");case 4968:return I(I(e,/(.+:)(flex-)?(.*)/,d+"box-pack:$3"+u+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+d+e+e;case 4200:if(!S(e,/flex-|baseline/))return u+"grid-column-align"+E(e,t)+e;break;case 2592:case 3360:return u+I(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,S(e.props,/grid-\w+-end/)}))?~T(e+(n=n[t].value),"span",0)?e:u+I(e,"-start","")+e+u+"grid-row-span:"+(~T(n,"span",0)?S(n,/\d+/):+S(n,/\d+/)-+S(e,/\d+/))+";":u+I(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return S(e.props,/grid-\w+-start/)}))?e:u+I(I(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return I(e,/(.+)-inline(.+)/,d+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(N(e)-1-t>6)switch(C(e,t+1)){case 109:if(45!==C(e,t+4))break;case 102:return I(e,/(.+:)(.+)-([^]+)/,"$1"+d+"$2-$3$1"+h+(108==C(e,t+3)?"$3":"$2-$3"))+e;case 115:return~T(e,"stretch",0)?ae(I(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return I(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,a,r,o,s,i){return u+n+":"+a+i+(r?u+n+"-span:"+(o?s:+s-+a)+i:"")+e}));case 4949:if(121===C(e,t+6))return I(e,":",":"+d)+e;break;case 6444:switch(C(e,45===C(e,14)?18:11)){case 120:return I(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+d+(45===C(e,14)?"inline-":"")+"box$3$1"+d+"$2$3$1"+u+"$2box$3")+e;case 100:return I(e,":",":"+u)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return I(e,"scroll-","scroll-snap-")+e}return e}function re(e,t,n,a){if(e.length>-1&&!e.return)switch(e.type){case m:return void(e.return=ae(e.value,e.length,n));case y:return te([B(e,{value:I(e.value,"@","@"+d)})],a);case f:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(S(t,a=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":W(B(e,{props:[I(t,/:(read-\w+)/,":"+h+"$1")]})),W(B(e,{props:[t]})),w(e,{props:_(n,a)});break;case"::placeholder":W(B(e,{props:[I(t,/:(plac\w+)/,":"+d+"input-$1")]})),W(B(e,{props:[I(t,/:(plac\w+)/,":"+h+"$1")]})),W(B(e,{props:[I(t,/:(plac\w+)/,u+"input-$1")]})),W(B(e,{props:[t]})),w(e,{props:_(n,a)})}return""}))}}function oe(e){return Y(se("",null,null,null,[""],e=q(e),0,[0],e))}function se(e,t,n,a,r,o,s,i,c){for(var l=0,u=0,h=s,d=0,p=0,f=0,m=1,g=1,y=1,b=0,w="",k=r,S=o,E=a,R=w;g;)switch(f=b,b=V()){case 40:if(108!=f&&58==C(R,h-1)){-1!=T(R+=I(X(b),"&","&\f"),"&\f",v(l?i[l-1]:0))&&(y=-1);break}case 34:case 39:case 91:R+=X(b);break;case 9:case 10:case 13:case 32:R+=Z(f);break;case 92:R+=Q(j()-1,7);continue;case 47:switch(G()){case 42:case 47:A(ce($(V(),j()),t,n,c),c);break;default:R+="/"}break;case 123*m:i[l++]=N(R)*y;case 125*m:case 59:case 0:switch(b){case 0:case 125:g=0;case 59+u:-1==y&&(R=I(R,/\f/g,"")),p>0&&N(R)-h&&A(p>32?le(R+";",a,n,h-1,c):le(I(R," ","")+";",a,n,h-2,c),c);break;case 59:R+=";";default:if(A(E=ie(R,t,n,l,u,r,i,w,k=[],S=[],h,o),o),123===b)if(0===u)se(R,t,E,E,k,o,h,i,S);else switch(99===d&&110===C(R,3)?100:d){case 100:case 108:case 109:case 115:se(e,E,E,a&&A(ie(e,E,E,0,0,r,i,w,r,k=[],h,S),S),r,S,h,i,a?k:S);break;default:se(R,E,E,E,[""],S,0,i,S)}}l=u=p=0,m=y=1,w=R="",h=s;break;case 58:h=1+N(R),p=f;default:if(m<1)if(123==b)--m;else if(125==b&&0==m++&&125==U())continue;switch(R+=x(b),b*m){case 38:y=u>0?1:(R+="\f",-1);break;case 44:i[l++]=(N(R)-1)*y,y=1;break;case 64:45===G()&&(R+=X(V())),d=G(),u=h=N(w=R+=ee(j())),b++;break;case 45:45===f&&2==N(R)&&(m=0)}}return o}function ie(e,t,n,a,r,o,s,i,c,l,u,h){for(var d=r-1,p=0===r?o:[""],m=R(p),g=0,y=0,b=0;g<a;++g)for(var x=0,w=E(e,d+1,d=v(y=s[g])),S=e;x<m;++x)(S=k(y>0?p[x]+" "+w:I(w,/&\f/g,p[x])))&&(c[b++]=S);return z(e,t,n,0===r?f:i,c,l,u,h)}function ce(e,t,n,a){return z(e,t,n,p,x(M),E(e,2,-2),0,a)}function le(e,t,n,a,r){return z(e,t,n,m,E(e,0,a),E(e,a+1,-1),a,r)}const ue={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var he="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GNEWS_KEY:"48878147a05368955e614dca472e6dc4",REACT_APP_VINTED_KEY:"149c13c63amsh5015475dafad941p18992ajsnc6524a1363a9",REACT_APP_GIPHY_KEY:"bvWogBDRALOdICcvDhJPS5XVxe50qs7O",REACT_APP_IMGUR_STR:"01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz"}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GNEWS_KEY:"48878147a05368955e614dca472e6dc4",REACT_APP_VINTED_KEY:"149c13c63amsh5015475dafad941p18992ajsnc6524a1363a9",REACT_APP_GIPHY_KEY:"bvWogBDRALOdICcvDhJPS5XVxe50qs7O",REACT_APP_IMGUR_STR:"01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GNEWS_KEY:"48878147a05368955e614dca472e6dc4",REACT_APP_VINTED_KEY:"149c13c63amsh5015475dafad941p18992ajsnc6524a1363a9",REACT_APP_GIPHY_KEY:"bvWogBDRALOdICcvDhJPS5XVxe50qs7O",REACT_APP_IMGUR_STR:"01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz"}.SC_ATTR)||"data-styled",de="active",pe="data-styled-version",fe="6.1.8",me="/*!sc*/\n",ge="undefined"!=typeof window&&"HTMLElement"in window,ye=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GNEWS_KEY:"48878147a05368955e614dca472e6dc4",REACT_APP_VINTED_KEY:"149c13c63amsh5015475dafad941p18992ajsnc6524a1363a9",REACT_APP_GIPHY_KEY:"bvWogBDRALOdICcvDhJPS5XVxe50qs7O",REACT_APP_IMGUR_STR:"01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GNEWS_KEY:"48878147a05368955e614dca472e6dc4",REACT_APP_VINTED_KEY:"149c13c63amsh5015475dafad941p18992ajsnc6524a1363a9",REACT_APP_GIPHY_KEY:"bvWogBDRALOdICcvDhJPS5XVxe50qs7O",REACT_APP_IMGUR_STR:"01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GNEWS_KEY:"48878147a05368955e614dca472e6dc4",REACT_APP_VINTED_KEY:"149c13c63amsh5015475dafad941p18992ajsnc6524a1363a9",REACT_APP_GIPHY_KEY:"bvWogBDRALOdICcvDhJPS5XVxe50qs7O",REACT_APP_IMGUR_STR:"01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GNEWS_KEY:"48878147a05368955e614dca472e6dc4",REACT_APP_VINTED_KEY:"149c13c63amsh5015475dafad941p18992ajsnc6524a1363a9",REACT_APP_GIPHY_KEY:"bvWogBDRALOdICcvDhJPS5XVxe50qs7O",REACT_APP_IMGUR_STR:"01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GNEWS_KEY:"48878147a05368955e614dca472e6dc4",REACT_APP_VINTED_KEY:"149c13c63amsh5015475dafad941p18992ajsnc6524a1363a9",REACT_APP_GIPHY_KEY:"bvWogBDRALOdICcvDhJPS5XVxe50qs7O",REACT_APP_IMGUR_STR:"01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz"}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GNEWS_KEY:"48878147a05368955e614dca472e6dc4",REACT_APP_VINTED_KEY:"149c13c63amsh5015475dafad941p18992ajsnc6524a1363a9",REACT_APP_GIPHY_KEY:"bvWogBDRALOdICcvDhJPS5XVxe50qs7O",REACT_APP_IMGUR_STR:"01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GNEWS_KEY:"48878147a05368955e614dca472e6dc4",REACT_APP_VINTED_KEY:"149c13c63amsh5015475dafad941p18992ajsnc6524a1363a9",REACT_APP_GIPHY_KEY:"bvWogBDRALOdICcvDhJPS5XVxe50qs7O",REACT_APP_IMGUR_STR:"01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GNEWS_KEY:"48878147a05368955e614dca472e6dc4",REACT_APP_VINTED_KEY:"149c13c63amsh5015475dafad941p18992ajsnc6524a1363a9",REACT_APP_GIPHY_KEY:"bvWogBDRALOdICcvDhJPS5XVxe50qs7O",REACT_APP_IMGUR_STR:"01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GNEWS_KEY:"48878147a05368955e614dca472e6dc4",REACT_APP_VINTED_KEY:"149c13c63amsh5015475dafad941p18992ajsnc6524a1363a9",REACT_APP_GIPHY_KEY:"bvWogBDRALOdICcvDhJPS5XVxe50qs7O",REACT_APP_IMGUR_STR:"01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GNEWS_KEY:"48878147a05368955e614dca472e6dc4",REACT_APP_VINTED_KEY:"149c13c63amsh5015475dafad941p18992ajsnc6524a1363a9",REACT_APP_GIPHY_KEY:"bvWogBDRALOdICcvDhJPS5XVxe50qs7O",REACT_APP_IMGUR_STR:"01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz"}.SC_DISABLE_SPEEDY)),be=(new Set,Object.freeze([])),ve=Object.freeze({});function xe(e,t,n){return void 0===n&&(n=ve),e.theme!==n.theme&&e.theme||t||n.theme}var we=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),ke=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Se=/(^-|-$)/g;function Ie(e){return e.replace(ke,"-").replace(Se,"")}var Te=/(a)(d)/gi,Ce=52,Ee=function(e){return String.fromCharCode(e+(e>25?39:97))};function Ne(e){var t,n="";for(t=Math.abs(e);t>Ce;t=t/Ce|0)n=Ee(t%Ce)+n;return(Ee(t%Ce)+n).replace(Te,"$1-$2")}var Re,Ae=5381,_e=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Oe=function(e){return _e(Ae,e)};function Fe(e){return Ne(Oe(e)>>>0)}function De(e){return e.displayName||e.name||"Component"}function Le(e){return"string"==typeof e&&!0}var Me="function"==typeof Symbol&&Symbol.for,Pe=Me?Symbol.for("react.memo"):60115,ze=Me?Symbol.for("react.forward_ref"):60112,Be={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},We={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Ue={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ve=((Re={})[ze]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Re[Pe]=Ue,Re);function Ge(e){return("type"in(t=e)&&t.type.$$typeof)===Pe?Ue:"$$typeof"in e?Ve[e.$$typeof]:Be;var t}var je=Object.defineProperty,He=Object.getOwnPropertyNames,Ke=Object.getOwnPropertySymbols,qe=Object.getOwnPropertyDescriptor,Ye=Object.getPrototypeOf,Xe=Object.prototype;function Ze(e,t,n){if("string"!=typeof t){if(Xe){var a=Ye(t);a&&a!==Xe&&Ze(e,a,n)}var r=He(t);Ke&&(r=r.concat(Ke(t)));for(var o=Ge(e),s=Ge(t),i=0;i<r.length;++i){var c=r[i];if(!(c in We||n&&n[c]||s&&c in s||o&&c in o)){var l=qe(t,c);try{je(e,c,l)}catch(e){}}}}return e}function Qe(e){return"function"==typeof e}function Je(e){return"object"==typeof e&&"styledComponentId"in e}function $e(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function et(e,t){if(0===e.length)return"";for(var n=e[0],a=1;a<e.length;a++)n+=t?t+e[a]:e[a];return n}function tt(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function nt(e,t,n){if(void 0===n&&(n=!1),!n&&!tt(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var a=0;a<t.length;a++)e[a]=nt(e[a],t[a]);else if(tt(t))for(var a in t)e[a]=nt(e[a],t[a]);return e}function at(e,t){Object.defineProperty(e,"toString",{value:t})}function rt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var ot=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,a=n.length,r=a;e>=r;)if((r<<=1)<0)throw rt(16,"".concat(e));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var o=a;o<r;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(e+1),i=(o=0,t.length);o<i;o++)this.tag.insertRule(s,t[o])&&(this.groupSizes[e]++,s++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),a=n+t;this.groupSizes[e]=0;for(var r=n;r<a;r++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],a=this.indexOfGroup(e),r=a+n,o=a;o<r;o++)t+="".concat(this.tag.getRule(o)).concat(me);return t},e}(),st=new Map,it=new Map,ct=1,lt=function(e){if(st.has(e))return st.get(e);for(;it.has(ct);)ct++;var t=ct++;return st.set(e,t),it.set(t,e),t},ut=function(e,t){ct=t+1,st.set(e,t),it.set(t,e)},ht="style[".concat(he,"][").concat(pe,'="').concat(fe,'"]'),dt=new RegExp("^".concat(he,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),pt=function(e,t,n){for(var a,r=n.split(","),o=0,s=r.length;o<s;o++)(a=r[o])&&e.registerName(t,a)},ft=function(e,t){for(var n,a=(null!==(n=t.textContent)&&void 0!==n?n:"").split(me),r=[],o=0,s=a.length;o<s;o++){var i=a[o].trim();if(i){var c=i.match(dt);if(c){var l=0|parseInt(c[1],10),u=c[2];0!==l&&(ut(u,l),pt(e,u,c[3]),e.getTag().insertRules(l,r)),r.length=0}else r.push(i)}}};function mt(){return n.nc}var gt=function(e){var t=document.head,n=e||t,a=document.createElement("style"),r=function(e){var t=Array.from(e.querySelectorAll("style[".concat(he,"]")));return t[t.length-1]}(n),o=void 0!==r?r.nextSibling:null;a.setAttribute(he,de),a.setAttribute(pe,fe);var s=mt();return s&&a.setAttribute("nonce",s),n.insertBefore(a,o),a},yt=function(){function e(e){this.element=gt(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,a=t.length;n<a;n++){var r=t[n];if(r.ownerNode===e)return r}throw rt(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),bt=function(){function e(e){this.element=gt(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),vt=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),xt=ge,wt={isServer:!ge,useCSSOMInjection:!ye},kt=function(){function e(e,t,n){void 0===e&&(e=ve),void 0===t&&(t={});var a=this;this.options=s(s({},wt),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&ge&&xt&&(xt=!1,function(e){for(var t=document.querySelectorAll(ht),n=0,a=t.length;n<a;n++){var r=t[n];r&&r.getAttribute(he)!==de&&(ft(e,r),r.parentNode&&r.parentNode.removeChild(r))}}(this)),at(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,a="",r=function(n){var r=function(e){return it.get(e)}(n);if(void 0===r)return"continue";var o=e.names.get(r),s=t.getGroup(n);if(void 0===o||0===s.length)return"continue";var i="".concat(he,".g").concat(n,'[id="').concat(r,'"]'),c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+="".concat(e,","))})),a+="".concat(s).concat(i,'{content:"').concat(c,'"}').concat(me)},o=0;o<n;o++)r(o);return a}(a)}))}return e.registerId=function(e){return lt(e)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(s(s({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new vt(n):t?new yt(n):new bt(n)}(this.options),new ot(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(lt(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(lt(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(lt(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),St=/&/g,It=/^\s*\/\/.*$/gm;function Tt(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Tt(e.children,t)),e}))}function Ct(e){var t,n,a,r=void 0===e?ve:e,o=r.options,s=void 0===o?ve:o,i=r.plugins,c=void 0===i?be:i,l=function(e,a,r){return r.startsWith(n)&&r.endsWith(n)&&r.replaceAll(n,"").length>0?".".concat(t):e},u=c.slice();u.push((function(e){e.type===f&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(St,n).replace(a,l))})),s.prefix&&u.push(re),u.push(ne);var h=function(e,r,o,i){void 0===r&&(r=""),void 0===o&&(o=""),void 0===i&&(i="&"),t=i,n=r,a=new RegExp("\\".concat(n,"\\b"),"g");var c=e.replace(It,""),l=oe(o||r?"".concat(o," ").concat(r," { ").concat(c," }"):c);s.namespace&&(l=Tt(l,s.namespace));var h,d=[];return te(l,function(e){var t=R(e);return function(n,a,r,o){for(var s="",i=0;i<t;i++)s+=e[i](n,a,r,o)||"";return s}}(u.concat((h=function(e){return d.push(e)},function(e){e.root||(e=e.return)&&h(e)})))),d};return h.hash=c.length?c.reduce((function(e,t){return t.name||rt(15),_e(e,t.name)}),Ae).toString():"",h}var Et=new kt,Nt=Ct(),Rt=o.createContext({shouldForwardProp:void 0,styleSheet:Et,stylis:Nt}),At=(Rt.Consumer,o.createContext(void 0));function _t(){return(0,o.useContext)(Rt)}function Ot(e){var t=(0,o.useState)(e.stylisPlugins),n=t[0],a=t[1],r=_t().styleSheet,s=(0,o.useMemo)((function(){var t=r;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,r]),i=(0,o.useMemo)((function(){return Ct({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:n})}),[e.enableVendorPrefixes,e.namespace,n]);(0,o.useEffect)((function(){l()(n,e.stylisPlugins)||a(e.stylisPlugins)}),[e.stylisPlugins]);var c=(0,o.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:s,stylis:i}}),[e.shouldForwardProp,s,i]);return o.createElement(Rt.Provider,{value:c},o.createElement(At.Provider,{value:i},e.children))}var Ft=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Nt);var a=n.name+t.hash;e.hasNameForId(n.id,a)||e.insertRules(n.id,a,t(n.rules,a,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,at(this,(function(){throw rt(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=Nt),this.name+e.hash},e}(),Dt=function(e){return e>="A"&&e<="Z"};function Lt(e){for(var t="",n=0;n<e.length;n++){var a=e[n];if(1===n&&"-"===a&&"-"===e[0])return e;Dt(a)?t+="-"+a.toLowerCase():t+=a}return t.startsWith("ms-")?"-"+t:t}var Mt=function(e){return null==e||!1===e||""===e},Pt=function(e){var t,n,a=[];for(var r in e){var o=e[r];e.hasOwnProperty(r)&&!Mt(o)&&(Array.isArray(o)&&o.isCss||Qe(o)?a.push("".concat(Lt(r),":"),o,";"):tt(o)?a.push.apply(a,i(i(["".concat(r," {")],Pt(o),!1),["}"],!1)):a.push("".concat(Lt(r),": ").concat((t=r,null==(n=o)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in ue||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return a};function zt(e,t,n,a){return Mt(e)?[]:Je(e)?[".".concat(e.styledComponentId)]:Qe(e)?!Qe(r=e)||r.prototype&&r.prototype.isReactComponent||!t?[e]:zt(e(t),t,n,a):e instanceof Ft?n?(e.inject(n,a),[e.getName(a)]):[e]:tt(e)?Pt(e):Array.isArray(e)?Array.prototype.concat.apply(be,e.map((function(e){return zt(e,t,n,a)}))):[e.toString()];var r}function Bt(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Qe(n)&&!Je(n))return!1}return!0}var Wt=Oe(fe),Ut=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Bt(e),this.componentId=t,this.baseHash=_e(Wt,t),this.baseStyle=n,kt.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var a=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))a=$e(a,this.staticRulesId);else{var r=et(zt(this.rules,e,t,n)),o=Ne(_e(this.baseHash,r)>>>0);if(!t.hasNameForId(this.componentId,o)){var s=n(r,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,s)}a=$e(a,o),this.staticRulesId=o}else{for(var i=_e(this.baseHash,n.hash),c="",l=0;l<this.rules.length;l++){var u=this.rules[l];if("string"==typeof u)c+=u;else if(u){var h=et(zt(u,e,t,n));i=_e(i,h+l),c+=h}}if(c){var d=Ne(i>>>0);t.hasNameForId(this.componentId,d)||t.insertRules(this.componentId,d,n(c,".".concat(d),void 0,this.componentId)),a=$e(a,d)}}return a},e}(),Vt=o.createContext(void 0);Vt.Consumer;var Gt={};new Set;function jt(e,t,n){var a=Je(e),r=e,i=!Le(e),c=t.attrs,l=void 0===c?be:c,u=t.componentId,h=void 0===u?function(e,t){var n="string"!=typeof e?"sc":Ie(e);Gt[n]=(Gt[n]||0)+1;var a="".concat(n,"-").concat(Fe(fe+n+Gt[n]));return t?"".concat(t,"-").concat(a):a}(t.displayName,t.parentComponentId):u,d=t.displayName,p=void 0===d?function(e){return Le(e)?"styled.".concat(e):"Styled(".concat(De(e),")")}(e):d,f=t.displayName&&t.componentId?"".concat(Ie(t.displayName),"-").concat(t.componentId):t.componentId||h,m=a&&r.attrs?r.attrs.concat(l).filter(Boolean):l,g=t.shouldForwardProp;if(a&&r.shouldForwardProp){var y=r.shouldForwardProp;if(t.shouldForwardProp){var b=t.shouldForwardProp;g=function(e,t){return y(e,t)&&b(e,t)}}else g=y}var v=new Ut(n,f,a?r.componentStyle:void 0);function x(e,t){return function(e,t,n){var a=e.attrs,r=e.componentStyle,i=e.defaultProps,c=e.foldedComponentIds,l=e.styledComponentId,u=e.target,h=o.useContext(Vt),d=_t(),p=e.shouldForwardProp||d.shouldForwardProp,f=xe(t,h,i)||ve,m=function(e,t,n){for(var a,r=s(s({},t),{className:void 0,theme:n}),o=0;o<e.length;o+=1){var i=Qe(a=e[o])?a(r):a;for(var c in i)r[c]="className"===c?$e(r[c],i[c]):"style"===c?s(s({},r[c]),i[c]):i[c]}return t.className&&(r.className=$e(r.className,t.className)),r}(a,t,f),g=m.as||u,y={};for(var b in m)void 0===m[b]||"$"===b[0]||"as"===b||"theme"===b&&m.theme===f||("forwardedAs"===b?y.as=m.forwardedAs:p&&!p(b,g)||(y[b]=m[b]));var v=function(e,t){var n=_t();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(r,m),x=$e(c,l);return v&&(x+=" "+v),m.className&&(x+=" "+m.className),y[Le(g)&&!we.has(g)?"class":"className"]=x,y.ref=n,(0,o.createElement)(g,y)}(w,e,t)}x.displayName=p;var w=o.forwardRef(x);return w.attrs=m,w.componentStyle=v,w.displayName=p,w.shouldForwardProp=g,w.foldedComponentIds=a?$e(r.foldedComponentIds,r.styledComponentId):"",w.styledComponentId=f,w.target=a?r.target:e,Object.defineProperty(w,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=a?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var a=0,r=t;a<r.length;a++)nt(e,r[a],!0);return e}({},r.defaultProps,e):e}}),at(w,(function(){return".".concat(w.styledComponentId)})),i&&Ze(w,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),w}function Ht(e,t){for(var n=[e[0]],a=0,r=t.length;a<r;a+=1)n.push(t[a],e[a+1]);return n}var Kt=function(e){return Object.assign(e,{isCss:!0})};function qt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Qe(e)||tt(e))return Kt(zt(Ht(be,i([e],t,!0))));var a=e;return 0===t.length&&1===a.length&&"string"==typeof a[0]?zt(a):Kt(zt(Ht(a,t)))}function Yt(e,t,n){if(void 0===n&&(n=ve),!t)throw rt(1,t);var a=function(a){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return e(t,n,qt.apply(void 0,i([a],r,!1)))};return a.attrs=function(a){return Yt(e,t,s(s({},n),{attrs:Array.prototype.concat(n.attrs,a).filter(Boolean)}))},a.withConfig=function(a){return Yt(e,t,s(s({},n),a))},a}var Xt=function(e){return Yt(jt,e)},Zt=Xt;we.forEach((function(e){Zt[e]=Xt(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Bt(e),kt.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,a){var r=a(et(zt(this.rules,t,n,a)),""),o=this.componentId+e;n.insertRules(o,o,r)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,a){e>2&&kt.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,a)}}();function Qt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=et(qt.apply(void 0,i([e],t,!1))),r=Fe(a);return new Ft(r,a)}(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=mt(),a=et([n&&'nonce="'.concat(n,'"'),"".concat(he,'="true"'),"".concat(pe,'="').concat(fe,'"')].filter(Boolean)," ");return"<style ".concat(a,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw rt(2);return e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)throw rt(2);var n=((t={})[he]="",t[pe]=fe,t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),a=mt();return a&&(n.nonce=a),[o.createElement("style",s({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new kt({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw rt(2);return o.createElement(Ot,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw rt(3)}})(),"__sc-".concat(he,"__");var Jt="#121212",$t="#212121",en="#4a4a4a",tn="#a6a6a6",nn="#ffffff",an="#00ccff",rn="#00ff99",on="#9933ff",sn="#ff6666",cn="#fff35c",ln="#6157ff",un=n(2985);function hn(e,t,n,a){var r,o=!1,s=0;function i(){r&&clearTimeout(r)}function c(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];var h=this,d=Date.now()-s;function p(){s=Date.now(),n.apply(h,l)}o||(a&&!r&&p(),i(),void 0===a&&d>e?p():!0!==t&&(r=setTimeout(a?function(){r=void 0}:p,void 0===a?e-d:e)))}return"boolean"!==typeof t&&(a=n,n=t,t=void 0),c.cancel=function(){i(),o=!0},c}function dn(e,t,n){return void 0===n?hn(e,t,!1):hn(e,n,!1!==t)}n(9020);var pn,fn=Object.defineProperty,mn=Object.getOwnPropertySymbols,gn=Object.prototype.hasOwnProperty,yn=Object.prototype.propertyIsEnumerable,bn=(e,t,n)=>t in e?fn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vn=(e,t)=>{for(var n in t||(t={}))gn.call(t,n)&&bn(e,n,t[n]);if(mn)for(var n of mn(t))yn.call(t,n)&&bn(e,n,t[n]);return e},xn=(e,t,n)=>{const a=(0,r.Up)(e,[n]),o=(0,r.Up)(t,[n]);return a[n]&&o[n]?vn(vn(vn({},e),t),{[n]:a[n]+", "+o[n]}):vn(vn({},e),t)},wn=("undefined"!==typeof window?window:global)||{},kn=(null==(pn=wn)?void 0:pn.GIPHY_PINGBACK_URL)||"https://pingback.giphy.com",Sn="".concat(kn,"/v2/pingback?apikey=l0HlIwPWyBBUDAUgM"),In=[];wn.giphyRandomId=(0,r.t0)();var Tn="";function Cn(){const e=[...In];In=[],(e=>{const t=(0,r.D6)();null==t||t.set("Content-Type","application/json"),r.Vy.debug("Pingback session",e),e.length?fetch(Sn,{method:"POST",body:JSON.stringify({events:e}),headers:t}).catch((e=>{r.Vy.warn("pingbacks failing to post ".concat(e))})):new Promise((e=>e()))})(e)}var En,Nn,Rn=dn(1e3,Cn);null==(Nn=(En=wn).addEventListener)||Nn.call(En,"beforeunload",Cn);var An,_n,On,Fn,Dn,Ln,Mn,Pn,zn,Bn,Wn,Un,Vn,Gn,jn,Hn,Kn,qn,Yn,Xn,Zn,Qn,Jn,$n,ea,ta,na,aa,ra,oa,sa,ia,ca,la,ua,ha,da,pa,fa,ma,ga,ya,ba,va,xa,wa,ka,Sa,Ia,Ta,Ca,Ea,Na,Ra,Aa,_a,Oa,Fa,Da,La,Ma=e=>{let{userId:t,eventType:n,actionType:a,attributes:o,queueEvents:s=!0,analyticsResponsePayload:i}=e;Tn=t?String(t):Tn;const c={ts:Date.now(),attributes:o,action_type:a,user_id:(0,r.t0)(),analytics_response_payload:i};Tn&&(c.logged_in_user_id=Tn),c.analytics_response_payload&&(c.analytics_response_payload="".concat(c.analytics_response_payload).concat(r.Vy.ENABLED?"&mode=verification":"")),n&&(c.event_type=n),In.push(c),s?Rn():Cn()},Pa=n(3932),za=n(1505),Ba=n(7589),Wa=n(174),Ua=n(9963),Va=n(937),Ga=Object.defineProperty,ja=Object.defineProperties,Ha=Object.getOwnPropertyDescriptors,Ka=Object.getOwnPropertySymbols,qa=Object.prototype.hasOwnProperty,Ya=Object.prototype.propertyIsEnumerable,Xa=(e,t,n)=>t in e?Ga(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Za=(e,t)=>{for(var n in t||(t={}))qa.call(t,n)&&Xa(e,n,t[n]);if(Ka)for(var n of Ka(t))Ya.call(t,n)&&Xa(e,n,t[n]);return e},Qa=(e,t)=>ja(e,Ha(t)),Ja=(e,t,n)=>new Promise(((a,r)=>{var o=e=>{try{i(n.next(e))}catch(t){r(t)}},s=e=>{try{i(n.throw(e))}catch(t){r(t)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,s);i((n=n.apply(e,t)).next())})),$a=Zt.img(An||(An=a(["\n    object-fit: cover;\n    width: 32px;\n    height: 32px;\n    margin-right: 8px;\n"]))),er=e=>{let{user:t,className:n=""}=e;const a=(0,o.useRef)(Math.floor(5*Math.random())+1),r=t.avatar_url?(e=>{var t,n;if(!e)return"";const a=null==(n=null==(t=null==e?void 0:e.split("."))?void 0:t.pop())?void 0:n.toLowerCase();return e.replace(".".concat(a),"/80h.".concat(a))})(t.avatar_url):"https://media.giphy.com/avatars/default".concat(a.current,".gif");return o.createElement($a,{src:r,className:n})},tr=e=>{let{className:t="",size:n=17,fill:a="#15CDFF"}=e;return o.createElement("svg",{className:[tr.className,t].join(" "),height:n,width:"19px",viewBox:"0 0 19 17"},o.createElement("path",{className:tr.checkMarkClassName,d:"M9.32727273,9.44126709 L9.32727273,3.03016561 L6.55027155,3.03016561 L6.55027155,10.8150746 L6.55027155,12.188882 L12.1042739,12.188882 L12.1042739,9.44126709 L9.32727273,9.44126709 Z",fill:Jt,transform:"translate(9.327273, 7.609524) scale(-1, 1) rotate(-45.000000) translate(-9.327273, -7.609524) "}),o.createElement("g",{transform:"translate(-532.000000, -466.000000)",fill:a},o.createElement("g",{transform:"translate(141.000000, 235.000000)"},o.createElement("g",{transform:"translate(264.000000, 0.000000)"},o.createElement("g",{transform:"translate(10.000000, 224.000000)"},o.createElement("g",{transform:"translate(114.000000, 2.500000)"},o.createElement("path",{d:"M15.112432,4.80769231 L16.8814194,6.87556817 L19.4157673,7.90116318 L19.6184416,10.6028916 L21.0594951,12.9065042 L19.6184416,15.2101168 L19.4157673,17.9118452 L16.8814194,18.9374402 L15.112432,21.0053161 L12.4528245,20.3611511 L9.79321699,21.0053161 L8.02422954,18.9374402 L5.48988167,17.9118452 L5.28720734,15.2101168 L3.84615385,12.9065042 L5.28720734,10.6028916 L5.48988167,7.90116318 L8.02422954,6.87556817 L9.79321699,4.80769231 L12.4528245,5.4518573 L15.112432,4.80769231 Z M17.8163503,10.8991009 L15.9282384,9.01098901 L11.5681538,13.3696923 L9.68115218,11.4818515 L7.81302031,13.3499833 L9.7011322,15.2380952 L11.5892441,17.1262071 L17.8163503,10.8991009 Z"})))))))};tr.className="giphy-verified-badge",tr.checkMarkClassName="giphy-verified-checkmark";var nr=tr,ar=Zt.div(_n||(_n=a(["\n    color: white;\n    font-size: 16px;\n    font-weight: 700;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    -webkit-font-smoothing: antialiased;\n"]))),rr=Zt(nr)(On||(On=a(["\n    margin-left: 4px;\n    flex-shrink: 0;\n"]))),or=Zt.div(Fn||(Fn=a(["\n    display: flex;\n    align-items: center;\n    min-width: 0;\n"]))),sr=e=>{let{user:t}=e;const{display_name:n,username:a}=t;return o.createElement(or,null,o.createElement(ar,null,n||"@".concat(a)),t.is_verified?o.createElement(rr,{size:14}):null)},ir=Zt.div(Dn||(Dn=a(["\n    display: flex;\n    align-items: center;\n    font-family: interface, helvetica, arial;\n"]))),cr=Zt(er)(Ln||(Ln=a(["\n    flex-shrink: 0;\n"]))),lr=e=>{let{gif:t,className:n,onClick:a}=e;const{user:r}=t;return(null==r?void 0:r.username)||(null==r?void 0:r.display_name)?o.createElement(ir,{className:[lr.className,n].join(" "),onClick:e=>{if(e.preventDefault(),e.stopPropagation(),a)a(t);else{const e=r.profile_url;e&&window.open(e,"_blank")}}},o.createElement(cr,{user:r}),o.createElement(sr,{user:t.user})):null};lr.className="giphy-attribution";var ur=lr,hr=Zt.div(Mn||(Mn=a(["\n    background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));\n    cursor: default;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: 75px;\n    pointer-events: none;\n"]))),dr=Zt(ur)(Pn||(Pn=a(["\n    position: absolute;\n    bottom: 10px;\n    left: 10px;\n    right: 10px;\n"]))),pr=Zt.div(zn||(zn=a(["\n    transition: opacity 150ms ease-in;\n"]))),fr=e=>{let{gif:t,isHovered:n,onClick:a}=e;const r=(0,o.useRef)(n);return n&&(r.current=!0),t.user&&r.current?o.createElement(pr,{style:{opacity:n?1:0}},o.createElement(hr,null),o.createElement(dr,{gif:t,onClick:a})):null},mr=e=>{let{children:t,className:n,onVisibleChange:a,config:r}=e;const s=(0,o.useRef)(null);return(0,o.useEffect)((()=>{let e;return s.current&&(e=new IntersectionObserver((e=>{let[t]=e;a&&a(t.isIntersecting)}),r),e.observe(s.current)),()=>null==e?void 0:e.disconnect()}),[a,s,r]),o.createElement("div",{ref:s,className:n},t)},gr=e=>function(t,n,a){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.analytics_response_payload&&Ma({analyticsResponsePayload:t.analytics_response_payload,userId:n,actionType:e,attributes:Za({position:JSON.stringify((0,r.Sj)(a))},o)})},yr=gr("CLICK"),br=gr("HOVER"),vr=(0,o.createContext)({}),xr=e=>{let{attributes:t,children:n}=e;const{attributes:a={}}=(0,o.useContext)(vr);return o.createElement(vr.Provider,{value:{attributes:xn(a,t,"layout_type")}},n)},wr=Zt.div(Bn||(Bn=a(["\n    position: relative;\n    display: block;\n    picture {\n        display: block;\n        width: 100%;\n        height: 100%;\n    }\n    img {\n        display: block;\n    }\n    ."," {\n        g {\n            fill: white;\n        }\n    }\n    ."," {\n        opacity: 0;\n    }\n"])),nr.className,nr.checkMarkClassName),kr=[an,rn,on,sn,cn],Sr="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Ir=!("undefined"===typeof window||!window.document||!window.document.createElement),Tr=()=>{},Cr=e=>{let{children:t}=e;const[n,a]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{a(!0)}),[]),n?o.createElement(o.Fragment,null,t):null},Er=e=>{let{gif:t,width:n,percentWidth:a,height:s,onGifRightClick:i=Tr,className:c="",onGifClick:l=Tr,onGifKeyPress:u=Tr,onGifSeen:h=Tr,onGifVisible:d=Tr,user:p={},backgroundColor:f,overlay:m,hideAttribution:g=!1,noLink:y=!1,borderRadius:b=4,style:v,tabIndex:x,fetchPriority:w}=e;const[k,S]=(0,o.useState)(!1),[I,T]=(0,o.useState)(!1),[C,E]=(0,o.useState)(!Ir),[N,R]=(0,o.useState)(""),A=(0,o.useRef)(kr[Math.round(Math.random()*(kr.length-1))]),_=(0,o.useRef)(null),O=(0,o.useRef)(null),F=(0,o.useRef)(),D=(0,o.useRef)(),L=(0,o.useRef)(),M=(0,o.useRef)(Tr),{attributes:P}=(0,o.useContext)(vr);let z=m;z||g||(z=fr);M.current=e=>{S(!0),r.Vy.debug("GIF ".concat(t.id," seen. ").concat(t.title)),function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.analytics_response_payload&&Ma({analyticsResponsePayload:e.analytics_response_payload,userId:t,actionType:"SEEN",attributes:Za({position:JSON.stringify(n)},a)})}(t,null==p?void 0:p.id,e.boundingClientRect,P),null==h||h(t,e.boundingClientRect),D.current&&D.current.disconnect()};const B=()=>{D.current||(D.current=new IntersectionObserver((e=>{let[t]=e;t.isIntersecting&&M.current(t)}),{threshold:[.99]})),!k&&_.current&&D.current&&D.current.observe(_.current)};(0,o.useEffect)((()=>{var e,n;(null==(e=O.current)?void 0:e.complete)&&(B(),d(t)),null==(n=D.current)||n.disconnect(),S(!1)}),[t.id]),(0,o.useEffect)((()=>(F.current=new IntersectionObserver((e=>{let[t]=e;const{isIntersecting:n}=t;E(n),!n&&D.current&&D.current.disconnect()})),F.current.observe(_.current),()=>{F.current&&F.current.disconnect(),D.current&&D.current.disconnect(),L.current&&clearTimeout(L.current)})),[]);const W=s||(0,r._2)(t,n);let U;if(a){const e=Math.round(W/n*100);U="".concat(e,"%")}const V=(0,r.th)(t.images,n,W),G=t.images[V.renditionName],j=f||(t.is_sticker?"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4AQMAAACSSKldAAAABlBMVEUhIiIWFhYoSqvJAAAAGElEQVQY02MAAv7///8PWxqIPwDZw5UGABtgwz2xhFKxAAAAAElFTkSuQmCC') 0 0":A.current),H=b?"hidden":"unset";return o.createElement(wr,{as:y?"div":"a",href:y?void 0:t.url,"data-giphy-id":t.id,"data-giphy-is-sticker":t.is_sticker,style:Za({width:a||n,height:U||W,overflow:H,borderRadius:b},v),className:[Er.className,c].join(" "),onMouseOver:e=>{clearTimeout(L.current),e.persist(),T(!0),L.current=window.setTimeout((()=>{br(t,null==p?void 0:p.id,e.target,P)}),200)},onMouseLeave:()=>{clearTimeout(L.current),T(!1)},onClick:e=>{yr(t,null==p?void 0:p.id,e.target,P),l(t,e)},onContextMenu:e=>i(t,e),onKeyPress:e=>{u(t,e)},tabIndex:x,ref:_},o.createElement("picture",null,o.createElement("source",{type:"image/webp",srcSet:C?G.webp:Sr,suppressHydrationWarning:!0}),o.createElement("img",{ref:O,suppressHydrationWarning:!0,fetchPriority:w,className:[Er.imgClassName,N].join(" "),src:C?G.url:Sr,style:{background:j},width:"100%",height:"100%",alt:(0,r.lm)(t),onLoad:C?e=>{B(),d(t,e),R(Er.imgLoadedClassName)}:()=>{}})),z&&o.createElement(Cr,null,C&&o.createElement(z,{gif:t,isHovered:I,width:n,height:W})))};Er.className="giphy-gif",Er.imgClassName="giphy-gif-img",Er.imgLoadedClassName="giphy-img-loaded";var Nr=Er,Rr=Zt.div(Wn||(Wn=a(["\n    -webkit-overflow-scrolling: touch;\n    overflow-x: auto;\n    overflow-y: hidden;\n    white-space: nowrap;\n    position: relative;\n"]))),Ar=Zt(Nr)(Un||(Un=a(["\n    position: relative;\n    display: inline-block;\n    list-style: none;\n    margin-left: ","px;\n    /* make sure gifs are fully visible with a scrollbar */\n    margin-bottom: 1px;\n\n    &:first-of-type {\n        margin-left: 0;\n    }\n    ."," {\n        position: absolute;\n        top: 0;\n        left: 0;\n    }\n"])),(e=>e.$ml),Nr.imgClassName),_r=Zt(mr)(Vn||(Vn=a(["\n    display: inline-block;\n"]))),Or=Zt.div(Gn||(Gn=a(["\n    width: 30px;\n    display: inline-block;\n    opacity: ",";\n    height: ","px;\n"])),(e=>e.$isFirstLoad?0:1),(e=>e.$height)),Fr=Object.freeze({gutter:6,user:{},initialGifs:[]}),Dr=Object.freeze({isFetching:!1,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),Lr=class e extends o.PureComponent{constructor(){super(...arguments),this.state=Qa(Za({},Dr),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=(0,un.Oo)(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=dn(100,(()=>Ja(this,null,(function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:t,gifs:n}=this.state;if(!e&&t){let e;this.setState({isFetching:!0});try{e=yield this.paginator()}catch(a){this.setState({isFetching:!1})}if(e)if(n.length===e.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:e,isFetching:!1});const{onGifsFetched:t}=this.props;t&&t(e),this.onFetch()}}}))))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:t,onGifRightClick:n,gifHeight:a,gifWidth:s,gutter:i,className:c=e.className,onGifSeen:l,onGifClick:u,onGifKeyPress:h,user:d,overlay:p,hideAttribution:f,noLink:m,noResultsMessage:g,backgroundColor:y,borderRadius:b,tabIndex:v=0,loaderConfig:x,fetchPriority:w}=this.props,{gifs:k,isDoneFetching:S}=this.state,I=!S,T=0===k.length;return o.createElement(xr,{attributes:{layout_type:"CAROUSEL"}},o.createElement(Rr,{className:c},k.map((e=>o.createElement(Ar,{gif:e,key:e.id,tabIndex:v,width:s||(0,r.Vs)(e,a),height:a,onGifClick:u,onGifKeyPress:h,onGifSeen:l,onGifVisible:t,onGifRightClick:n,user:d,$ml:i,overlay:p,hideAttribution:f,noLink:m,borderRadius:b,backgroundColor:y,fetchPriority:w}))),!I&&0===k.length&&g,I&&o.createElement(_r,{onVisibleChange:this.onLoaderVisible,config:x},o.createElement(Or,{$isFirstLoad:T,$height:a}))))}};Lr.className="giphy-carousel",Lr.defaultProps=Fr;var Mr=Zt.div(jn||(jn=a(["\n    color: ",";\n    display: flex;\n    justify-content: center;\n    margin: 30px 0;\n    font-family: interface, Helvetica Neue, helvetica, sans-serif;\n    font-size: 16px;\n    font-weight: 600;\n    a {\n        color: ",";\n        cursor: pointer;\n        &:hover {\n            color: white;\n        }\n    }\n"])),tn,an),Pr=e=>{let{onClick:t}=e;return o.createElement(Mr,null,"Error loading GIFs.\xa0",o.createElement("a",{onClick:t},"Try again?"))},zr="#2e2e2e",Br=en,Wr=Zt.div(Hn||(Hn=a(["\n    align-items: center;\n    background-color: ",";\n    border-radius: 16px;\n    display: flex;\n    max-width: fit-content;\n    overflow: hidden;\n    padding: 4px 5px 5px 6px;\n"])),(e=>{let{$backgroundColor:t}=e;return t})),Ur=Zt.div(Kn||(Kn=a(["\n    overflow-x: auto;\n    overflow-y: hidden;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n"]))),Vr=Zt.div(qn||(qn=a(["\n    display: inline-flex;\n    justify-content: space-between;\n    overflow: hidden;\n    white-space: nowrap;\n    width: ",";\n"])),(e=>{let{$width:t}=e;return"".concat(t,"px")})),Gr=Zt.div(Yn||(Yn=a(["\n    background-color: ",";\n    box-sizing: border-box;\n    height: ",";\n    margin: ",";\n    width: 2px;\n"])),(e=>{let{$color:t}=e;return t}),(e=>{let{$gifHeight:t}=e;return"".concat(Math.round(.75*t),"px")}),(e=>{let{$gutter:t}=e;return"0 ".concat(t,"px")})),jr=Zt(Nr)(Xn||(Xn=a(["\n    display: inline-block;\n    flex-shrink: 0;\n    list-style: none;\n    /* make sure gifs are fully visible with a scrollbar */\n    margin-bottom: 1px;\n    position: relative;\n\n    ."," {\n        position: absolute;\n        top: 0;\n        left: 0;\n    }\n"])),Nr.imgClassName);function Hr(e){var t;const n=e,{backgroundColor:a=zr,className:s,dividerColor:i=Br,fetchVariations:c,gif:l,gifHeight:u,GifProps:h={},gifWidth:d,gutter:p=6,hideAttribution:f,loader:m,noLink:g,onGifClick:y,onGifKeyPress:b,onGifRightClick:v,onGifSeen:x,onGifVisible:w,onVariationsFetched:k,overlay:S,tabIndex:I=0,user:T}=n,C=((e,t)=>{var n={};for(var a in e)qa.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&Ka)for(var a of Ka(e))t.indexOf(a)<0&&Ya.call(e,a)&&(n[a]=e[a]);return n})(n,["backgroundColor","className","dividerColor","fetchVariations","gif","gifHeight","GifProps","gifWidth","gutter","hideAttribution","loader","noLink","onGifClick","onGifKeyPress","onGifRightClick","onGifSeen","onGifVisible","onVariationsFetched","overlay","tabIndex","user"]),E=null!=(t=l.variation_count)?t:0,N=d||(0,r.Vs)(l,u),R=E*N+Math.max(0,E-1)*p,A=(0,za.A)(c),_=(0,za.A)(k),[O,F]=(0,Pa.A)((()=>Ja(this,null,(function*(){var e;const t=yield A.current(l.id),n=null!=(e=null==t?void 0:t.data)?e:[];return _.current&&_.current(n),n}))),[l],{loading:!0,value:[]});(0,o.useEffect)((()=>{F()}),[F]);const D=Za({backgroundColor:"transparent",height:u,hideAttribution:f,noLink:g,onGifClick:y,onGifKeyPress:b,onGifRightClick:v,onGifSeen:x,onGifVisible:w,overlay:S,tabIndex:I,user:T,width:N},h);return o.createElement(Wr,Za({$backgroundColor:a,className:[Hr.className,s].join(" ")},C),o.createElement(jr,Qa(Za({},D),{gif:l})),E?o.createElement(Gr,{className:Hr.dividerClassName,$color:i,$gifHeight:u,$gutter:p}):null,o.createElement(Ur,{className:Hr.variationsViewportClassName},o.createElement(Vr,{className:Hr.variationsContainerClassName,$width:R},(()=>{var e;return O.loading?m?o.createElement(m,{className:Hr.loaderClassName}):null:O.error?o.createElement(Pr,{onClick:F}):o.createElement(o.Fragment,null,(null!=(e=O.value)?e:[]).map((e=>o.createElement(jr,Qa(Za({},D),{key:e.id,gif:e})))))})())))}Hr.className="giphy-emoji-variations-list",Hr.dividerClassName="giphy-emoji-variations-divider",Hr.loaderClassName="giphy-emoji-variations-loader",Hr.variationsViewportClassName="giphy-emoji-variations-viewport",Hr.variationsContainerClassName="giphy-emoji-variations-container";var Kr=Qt(Zn||(Zn=a(["\n     to {\n    transform: scale(1.75) translateY(-20px);\n  }\n"]))),qr=Zt.div(Qn||(Qn=a(["\n    display: flex;\n    align-items: center;\n    height: ","px;\n    padding-top: 15px;\n    margin: 0 auto;\n    text-align: center;\n    justify-content: center;\n    animation: pulse 0.8s ease-in-out 0s infinite alternate backwards;\n"])),37),Yr=Zt.div(Jn||(Jn=a(["\n    display: inline-block;\n    height: 10px;\n    width: 10px;\n    margin: ","px 10px 10px 10px;\n    position: relative;\n    box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.3);\n    animation: "," cubic-bezier(0.455, 0.03, 0.515, 0.955) 0.75s infinite alternate;\n    background: ",";\n    animation-delay: ",";\n"])),37,Kr,(e=>e.$color),(e=>e.$delay)),Xr=e=>{let{className:t=""}=e;return o.createElement(qr,{className:t},o.createElement(Yr,{$color:rn,$delay:"0"}),o.createElement(Yr,{$color:an,$delay:".1s"}),o.createElement(Yr,{$color:on,$delay:".2s"}),o.createElement(Yr,{$color:sn,$delay:".3s"}),o.createElement(Yr,{$color:cn,$delay:".4s"}))};var Zr=(0,o.memo)((e=>{let{columns:t,gutter:n,useTransform:a=!0,itemWidth:r,itemHeights:s,children:i,columnOffsets:c=[]}=e;const l={};return o.createElement("div",{style:l},function(){let e;const u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.apply(null,Array(e)).map(((e,n)=>t[n]||0))}(t,c),h=o.Children.map(i,((t,i)=>{const c={position:"absolute"};e=u.indexOf(Math.min.apply(Math,u));const l="".concat(u[e],"px"),h="".concat(e*r+e*n,"px");a?c.transform="translate3d(".concat(h,", ").concat(l,", 0)"):(c.top=l,c.left=h);const d=s[i];return d&&(u[e]+=d+n),o.cloneElement(t,{style:c})}));return l.position="relative",l.width="".concat(t*r+(t-1)*n,"px"),l.height="".concat(Math.max.apply(Math,u)-n,"px"),h}())})),Qr=Zt.div($n||($n=a(["\n    opacity: ",";\n"])),(e=>e.$isFirstLoad?0:1)),Jr=Object.freeze({gutter:6,user:{},initialGifs:[]}),$r=Object.freeze({isFetching:!1,isError:!1,gifWidth:0,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),eo=class e extends o.PureComponent{constructor(){super(...arguments),this.state=Qa(Za({},$r),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=(0,un.Oo)(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=dn(e.fetchDebounce,(()=>Ja(this,null,(function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:t,gifs:n}=this.state,a=n.length;if(!e&&t){let e;this.setState({isFetching:!0,isError:!1});try{if(e=yield this.paginator(),this.unmounted)return}catch(r){if(this.unmounted)return;this.setState({isFetching:!1,isError:!0});const{onGifsFetchError:e}=this.props;e&&e(r)}if(e)if(a===e.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:e,isFetching:!1});const{onGifsFetched:t}=this.props;t&&t(e),this.onFetch()}}}))))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:t,onGifRightClick:n,className:a=e.className,onGifSeen:s,onGifClick:i,onGifKeyPress:c,user:l,overlay:u,hideAttribution:h,noLink:d,borderRadius:p,noResultsMessage:f,columns:m,width:g,gutter:y,useTransform:b,columnOffsets:v,backgroundColor:x,loaderConfig:w,tabIndex:k=0,layoutType:S="GRID",loader:I=Xr,fetchPriority:T}=this.props,{gifWidth:C,gifs:E,isError:N,isDoneFetching:R}=this.state,A=!R,_=0===E.length,O=E.map((e=>(0,r._2)(e,C)));return o.createElement(xr,{attributes:{layout_type:S}},o.createElement("div",{className:a,style:{width:g}},o.createElement(Zr,{itemHeights:O,useTransform:b,itemWidth:C,columns:m,gutter:y,columnOffsets:v},E.map((e=>o.createElement(Nr,{gif:e,tabIndex:k,key:e.id,width:C,onGifClick:i,onGifKeyPress:c,onGifSeen:s,onGifVisible:t,onGifRightClick:n,user:l,overlay:u,backgroundColor:x,hideAttribution:h,noLink:d,borderRadius:p,fetchPriority:T})))),!A&&0===E.length&&f,N?o.createElement(Pr,{onClick:this.onFetch}):A&&o.createElement(mr,{onVisibleChange:this.onLoaderVisible,config:w},o.createElement(Qr,{$isFirstLoad:_},o.createElement(I,{className:e.loaderClassName})))))}};eo.className="giphy-grid",eo.loaderClassName="loader",eo.fetchDebounce=250,eo.defaultProps=Jr,eo.getDerivedStateFromProps=(e,t)=>{let{columns:n,gutter:a,width:r}=e;const o=a*(n-1),s=Math.floor((r-o)/n);return t.gifWidth!==s?{gifWidth:s}:null};var to="--searchbar-height",no="--searchbar-bg-color",ao="--searchbar-bg-color-2",ro="--searchbar-fg-color",oo="--searchbar-cancel-button-display",so=(Zt.div(ea||(ea=a(["\n    ",": ","px;\n    @media (",") {\n        ",": ","px;\n    }\n    ",": ",";\n    ",": ",";\n    ",": ",";\n    ","\n    ",": ",";\n"])),to,(e=>e.$searchbarHeight||42),(e=>e.$mobileMediaQuery),to,(e=>e.$mobileSearchbarHeight||35),no,nn,ao,nn,ro,Jt,(e=>e.$darkMode&&qt(ta||(ta=a(["\n            ",": ",";\n            ",": ",";\n            ",": ",";\n        "])),ro,nn,no,Jt,ao,en)),oo,(e=>e.$hideCancelButton?"none":"block")),(0,o.createContext)({})),io=(0,o.createContext)({}),co=Zt.svg(na||(na=a(["\n    position: relative;\n    right: 10px;\n    margin-left: 5px;\n    cursor: pointer;\n    display: var(",");\n"])),oo),lo=e=>{let{width:t=17,height:n=17,setCleared:a}=e;const{term:r,setActiveChannel:s,activeChannel:i}=(0,o.useContext)(so);return r||i?o.createElement(co,{className:lo.className,width:t,height:n,viewBox:"0 0 17 17",version:"1.1",xmlns:"http://www.w3.org/2000/svg",onClick:e=>{e.stopPropagation(),e.preventDefault(),a(!0),s(void 0)}},o.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",opacity:"0.582730817"},o.createElement("g",{transform:"translate(-300.000000, -150.000000)",fill:"#8E8E93",fillRule:"nonzero"},o.createElement("g",{transform:"translate(0.000000, 135.000000)"},o.createElement("g",null,o.createElement("g",null,o.createElement("g",{transform:"translate(11.000000, 13.000000)"},o.createElement("g",{transform:"translate(289.000000, 2.000000)"},o.createElement("path",{d:"M8.5,0 C3.805875,0 0,3.805875 0,8.5 C0,13.194125 3.805875,17 8.5,17 C13.194125,17 17,13.194125 17,8.5 C17,3.805875 13.194125,0 8.5,0 Z M9.50158333,8.5 C9.50158333,8.5 11.7250417,10.7234583 11.834125,10.8325417 C12.1110833,11.1095 12.1110833,11.557875 11.834125,11.834125 C11.5571667,12.1110833 11.1087917,12.1110833 10.8325417,11.834125 C10.7234583,11.72575 8.5,9.50158333 8.5,9.50158333 C8.5,9.50158333 6.27654167,11.7250417 6.16745833,11.834125 C5.8905,12.1110833 5.442125,12.1110833 5.165875,11.834125 C4.88891667,11.5571667 4.88891667,11.1087917 5.165875,10.8325417 C5.27425,10.7234583 7.49841667,8.5 7.49841667,8.5 C7.49841667,8.5 5.27495833,6.27654167 5.165875,6.16745833 C4.88891667,5.8905 4.88891667,5.442125 5.165875,5.165875 C5.44283333,4.88891667 5.89120833,4.88891667 6.16745833,5.165875 C6.27654167,5.27425 8.5,7.49841667 8.5,7.49841667 C8.5,7.49841667 10.7234583,5.27495833 10.8325417,5.165875 C11.1095,4.88891667 11.557875,4.88891667 11.834125,5.165875 C12.1110833,5.44283333 12.1110833,5.89120833 11.834125,6.16745833 C11.72575,6.27654167 9.50158333,8.5 9.50158333,8.5 Z",opacity:"0.75"}))))))))):null};lo.className="giphy-search-bar-cancel";var uo=lo,ho="calc(var(".concat(to,") - ").concat(12,"px)"),po=Qt(aa||(aa=a(["\nto {\n    width: ",";\n}\n"])),ho),fo=Zt(er)(ra||(ra=a(["\n    height: ",";\n    margin: 0;\n    width: 0;\n    animation: "," 100ms ease-in-out forwards;\n"])),ho,po),mo=Zt.div(oa||(oa=a(["\n    background: var(",");\n    display: flex;\n    align-items: center;\n    padding-left: ","px;\n"])),ao,6),go=Zt.div(sa||(sa=a(["\n    background: ",";\n    display: flex;\n    padding: 0 4px;\n    color: ",";\n    font-family: interface, Helvetica Neue, helvetica, sans-serif;\n    font-weight: 600;\n    font-size: 12px;\n    align-items: center;\n    height: ",";\n    @media (max-width: 480px) {\n        display: none;\n    }\n"])),"#ececec","#3e3e3e",ho),yo=e=>{let{className:t=""}=e;const{activeChannel:n}=(0,o.useContext)(so);return n?o.createElement(mo,{className:t},o.createElement(fo,{user:n.user}),o.createElement(go,{key:n.id},o.createElement("div",null,"@",n.user.username),n.user.is_verified&&o.createElement(nr,{size:14}))):null},bo=e=>{let{className:t=""}=e;return o.createElement("svg",{viewBox:"0 0 30 30",version:"1.1",className:t},o.createElement("defs",null,o.createElement("path",{d:"M11.5482521,20.4090671 L4.24727698,28.2009189 C3.68084207,28.8054377 2.73159653,28.8363108 2.12707771,28.2698759 C1.5225589,27.703441 1.4916858,26.7541954 2.0581207,26.1496766 L9.40599838,18.3077689 C7.95982241,16.4371424 7.0978836,14.0789715 7.0978836,11.5181818 C7.0978836,5.44914339 11.9392549,0.518181818 17.9252787,0.518181818 C23.9113026,0.518181818 28.7526738,5.44914339 28.7526738,11.5181818 C28.7526738,17.5872202 23.9113026,22.5181818 17.9252787,22.5181818 C15.539851,22.5181818 13.3361963,21.7351359 11.5482521,20.4090671 Z M17.9252787,19.5181818 C22.242011,19.5181818 25.7526738,15.9425536 25.7526738,11.5181818 C25.7526738,7.09381 22.242011,3.51818182 17.9252787,3.51818182 C13.6085464,3.51818182 10.0978836,7.09381 10.0978836,11.5181818 C10.0978836,15.9425536 13.6085464,19.5181818 17.9252787,19.5181818 Z",id:"giphy-search-icon-path-1"})),o.createElement("g",{id:"search",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"icons/search"},o.createElement("mask",{id:"giphy-search-icon-mask-2",fill:"white"},o.createElement("use",{xlinkHref:"#giphy-search-icon-path-1"})),o.createElement("use",{id:"Mask",fill:"#FFFFFF",fillRule:"nonzero",xlinkHref:"#giphy-search-icon-path-1"}),o.createElement("g",{mask:"url(#giphy-search-icon-mask-2)"},o.createElement("g",{transform:"translate(0.250000, 0.250000)"},o.createElement("g",null))))))},vo="#E646B6",xo="#FF6666",wo="cubic-bezier(0.920, 0.240, 0.185, 0.730)",ko=Qt(ia||(ia=a(["\n    0% {\n      transform: rotate(34deg) translate(-10px, 80px);\n    };\n    \n    100% {\n      transform: rotate(34deg) translate(-10px, -20px);\n    }\n"]))),So=Qt(ca||(ca=a(["\n    0% { \n      transform: translate(0px, 0px);\n      opacity: 0;\n    }\n    50% {\n      opacity: 1;\n    }\n    100% {\n      transform: translate(10px, -17px);\n      opacity: 0;\n    }\n"]))),Io=Qt(la||(la=a(["\n    0% {\n      opacity: 0;\n      transform: translateX(-400%);\n    }\n    50% {\n      opacity: 1;\n    }\n    100% {\n      opacity: 0;\n      transform: translateX(0);\n    }\n"]))),To=Zt.div(ua||(ua=a(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    cursor: pointer;\n    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n        display: none;\n    }\n    height: var(",");\n    width: var(",");\n"])),to,to),Co=Zt.div(ha||(ha=a(["\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    background: linear-gradient(45deg, "," 0%, "," 100%);\n    border-radius: 0 4px 4px 0;\n    overflow: hidden;\n    &:before {\n        animation: "," "," linear 0s infinite;\n        background-image: linear-gradient(45deg, "," 0%, "," 50%, "," 100%);\n        background-size: 400%;\n        background-position: 0% 100%;\n        content: '';\n        position: absolute;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        width: 400%;\n    }\n"])),vo,xo,Io,"2s",vo,xo,vo),Eo=Zt.div(da||(da=a(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    overflow: hidden;\n    &::after {\n        content: '+';\n        color: white;\n        font-family: 'SS Standard';\n        font-size: 8px;\n        position: absolute;\n        top: 65%;\n        left: 66%;\n        animation: "," 1s "," 0s 1 forwards;\n    }\n"])),So,wo),No=Zt.div(pa||(pa=a(["\n    position: absolute;\n    width: 200%;\n    height: 20px;\n    background: rgba(255, 255, 255, 0.5);\n    transform: rotate(34deg) translate(-10px, -20px);\n    animation: "," 1s "," 0s 1;\n    filter: blur(1px);\n"])),ko,wo),Ro=Zt(bo)(fa||(fa=a(["\n    z-index: 1;\n    display: flex;\n    width: 50%;\n    height: 50%;\n"]))),Ao=e=>{let{onClick:t}=e;const{isFetching:n}=(0,o.useContext)(so),a=(0,Wa.A)(n,1e3);return o.createElement(To,{onClick:()=>null==t?void 0:t()},o.createElement(Co,{suppressHydrationWarning:!0}),o.createElement(Ro,null),a&&o.createElement(Eo,{suppressHydrationWarning:!0},o.createElement(No,{suppressHydrationWarning:!0})))};var _o=500,Oo=Zt.div(ma||(ma=a(["\n    display: flex;\n    background: white;\n    align-items: center;\n    border-radius: 4px;\n    height: var(",");\n    background: var(",");\n"])),to,ao),Fo=Zt.input(ga||(ga=a(["\n    background: inherit;\n    box-sizing: border-box;\n    border: 0;\n    appearance: none;\n    font-weight: normal;\n    font-family: interface, Helvetica Neue, helvetica, sans-serif;\n    outline: 0;\n    font-size: 15px;\n    padding: 0 10px;\n    border-radius: 0;\n    text-overflow: ellipsis;\n    color: var(",");\n    &::placeholder {\n        color: ",";\n    }\n    min-width: 150px;\n    flex: 1;\n    ","\n"])),ro,tn,(e=>e.$isUsernameSearch&&qt(ya||(ya=a(["\n            color: ",";\n        "])),ln))),Do=e=>{let{className:t,placeholder:n="Search GIPHY",clear:a=!1,autoFocus:r,searchDebounce:s=_o,onEnter:i}=e;const{activeChannel:c,setActiveChannel:l,term:u,setChannels:h}=(0,o.useContext)(so),{setIsFocused:d,_inputValOverride:p,_setSearch:f}=(0,o.useContext)(io),[m,g]=(0,o.useState)(u);(0,Ba.A)((()=>f(m)),s,[m]);const y=(0,o.useRef)(null),b=function(e){const t=(0,o.useRef)(e);return(0,o.useEffect)((()=>{t.current=e})),t.current}(c),[v,x]=(0,o.useState)(a);(0,o.useEffect)((()=>{var e;r&&(null==(e=y.current)||e.focus())}),[r]),(0,o.useEffect)((()=>{var e;c&&!b&&(null==(e=y.current)||e.focus(),g(" "===m?"":m.replace(/@?\w*\s?/,"")))}),[m,c,b]),(0,o.useEffect)((()=>{x(a)}),[a]),(0,o.useEffect)((()=>{g(p)}),[p,g]);return o.createElement(Oo,{className:[Do.className,t].join(" ")},o.createElement(yo,null),o.createElement(Fo,{$isUsernameSearch:0===u.indexOf("@"),onChange:e=>{let{target:{value:t}}=e;v&&""===t||(x(!1),g(t))},onFocus:()=>{d(!0)},onBlur:()=>{d(!1)},value:v?"":m,placeholder:c?"Search ".concat(c.display_name):n,autoCapitalize:"off",autoCorrect:"off",autoComplete:"off",ref:y,onKeyUp:e=>{switch(e.keyCode||e.key){case 27:case"Escape":l(void 0),h([]);break;case 13:case"Enter":null==i||i(m)}},onKeyDown:e=>{switch(e.keyCode||e.key){case 8:case"Backspace":""===m&&(l(void 0),h([]))}}}),o.createElement(uo,{setCleared:()=>g("")}),o.createElement(Ao,{onClick:()=>null==i?void 0:i(m)}))};Do.className="giphy-search-bar";var Lo=e=>{let{size:t=18,className:n}=e;return o.createElement("svg",{width:t,height:t,viewBox:"0 0 18 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:n},o.createElement("g",{id:"trending",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.createElement("g",null,o.createElement("rect",{id:"Rectangle",stroke:"#979797",fill:"#D8D8D8",opacity:"0",x:"0.5",y:"0.5",width:"17",height:"17"}),o.createElement("path",{d:"M12.6093329,3.12057664 L15.156896,3.12057664 L9.64199318,9.04253019 L6.88133868,6.8175119 C6.7544587,6.67603813 6.56616874,6.60087259 6.38404017,6.61897279 C6.2490402,6.63288422 6.11891631,6.69661171 6.02063992,6.79697337 C2.21226835,10.5943119 0.308082561,12.4929812 0.308082561,12.4929812 C0.308082561,12.4929812 0.527106106,12.8074292 0.710953088,13.0215425 C0.833517743,13.1642848 0.975497751,13.3098497 1.13689311,13.4582373 L6.47329888,8.13191205 L9.16381134,10.2953038 C9.40800276,10.5710787 9.68933701,10.7021044 10.019278,10.4570223 L16.0239805,4.04474473 C16.0239805,5.87956383 16.0239805,6.79697337 16.0239805,6.79697337 C16.0239805,6.79697337 16.4320205,6.79697337 17.2481004,6.79697337 L17.2481004,1.80604505 C14.1555887,1.80604505 12.6093329,1.80604505 12.6093329,1.80604505 C12.6093329,1.80604505 12.6093329,2.24422225 12.6093329,3.12057664 Z",id:"Shape",stroke:"#00CCFF",strokeWidth:"0.4",fill:"#00CCFF",fillRule:"nonzero",transform:"translate(8.778091, 7.632141) rotate(-2.000000) translate(-8.778091, -7.632141) "}))))},Mo=Zt.div(ba||(ba=a(["\n    background: ",";\n    display: flex;\n    padding-right: 4px;\n    align-items: center;\n    margin-right: ","px;\n    cursor: pointer;\n"])),$t,9),Po=Zt.div(va||(va=a(["\n    background: ",";\n    display: flex;\n    padding: 14px;\n    align-items: center;\n    margin-right: ","px;\n    white-space: nowrap;\n    cursor: pointer;\n    font-style: italic;\n    border-radius: 20px;\n"])),$t,9),zo=Zt(er)(xa||(xa=a(["\n    height: var(",");\n    width: var(",");\n"])),to,to),Bo=Zt(Lo)(wa||(wa=a(["\n    margin-right: 2px;\n"]))),Wo=e=>{let{channel:t}=e;const{setActiveChannel:n}=(0,o.useContext)(so);return o.createElement(Mo,{key:t.id,onClick:()=>n(t)},o.createElement(zo,{user:t.user}),o.createElement("div",null,"@",t.user.username),t.user.is_verified&&o.createElement(nr,{size:14}))},Uo=e=>{let{trendingSearch:t}=e;const{setSearch:n}=(0,o.useContext)(so);return o.createElement(Po,{key:t,onClick:()=>n(t)},o.createElement(Bo,{size:16}),t)},Vo=Zt.div(ka||(ka=a(["\n    display: flex;\n    color: white;\n    flex-direction: row;\n    font-family: 'interface';\n    font-weight: 600;\n    font-size: 14px;\n    -webkit-overflow-scrolling: touch;\n    overflow-x: auto;\n    overflow-y: hidden;\n    padding-bottom: 10px;\n    height: var(",");\n"])),to),Go=()=>{const{trendingSearches:e,currentChannels:t}=(0,o.useContext)(so);return o.createElement(Vo,{className:Go.className},t.length>0?t.map((e=>o.createElement(Wo,{key:e.id,channel:e}))):e.map((e=>o.createElement(Uo,{key:e,trendingSearch:e}))))};Go.className="giphy-suggestion-bar";var jo=e=>{let{onClick:t}=e;return o.createElement("svg",{width:"66px",height:"13px",viewBox:"0 0 66 13",onClick:t},o.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},o.createElement("g",{transform:"translate(-1060.000000, -462.000000)",fill:"#FFFFFF",fillRule:"nonzero"},o.createElement("g",{transform:"translate(931.000000, 286.375671)"},o.createElement("g",{transform:"translate(86.000000, 136.124329)"},o.createElement("path",{d:"M47.968,49.1962322 C49.588,49.1962322 51.052,48.6202322 51.58,47.5522322 L51.58,43.8202322 L47.476,43.8202322 L47.476,45.6802322 L49.6,45.6802322 L49.6,46.7602322 C49.12,47.1082322 48.424,47.1922322 47.98,47.1922322 C46.288,47.1922322 45.724,45.8602322 45.724,44.7802322 C45.724,43.1362322 46.612,42.3202322 47.98,42.3202322 C48.544,42.3202322 49.288,42.4762322 49.9,43.0522322 L51.28,41.6842322 C50.176,40.5682322 49.144,40.3282322 47.98,40.3282322 C44.824,40.3282322 43.384,42.5842322 43.384,44.7802322 C43.384,46.9762322 44.644,49.1962322 47.968,49.1962322 Z M54.928,48.9682322 L54.928,40.5682322 L52.564,40.5682322 L52.564,48.9682322 L54.928,48.9682322 Z M58.648,48.9682322 L58.648,46.7002322 L60.352,46.7002322 C62.596,46.6762322 63.724,45.3442322 63.724,43.6282322 C63.724,41.9842322 62.608,40.5682322 60.352,40.5682322 L56.272,40.5682322 L56.272,48.9682322 L58.648,48.9682322 Z M60.352,44.6962322 L58.648,44.6962322 L58.648,42.6082322 L60.352,42.6082322 C61,42.6082322 61.348,43.1122322 61.348,43.6642322 C61.348,44.2162322 61.012,44.6962322 60.352,44.6962322 Z M66.796,48.9802322 L66.796,45.8002322 L69.82,45.8002322 L69.82,48.9802322 L72.172,48.9802322 L72.172,40.5802322 L69.82,40.5802322 L69.82,43.7722322 L66.796,43.7722322 L66.796,40.5802322 L64.42,40.5802322 L64.42,48.9802322 L66.796,48.9802322 Z M78.16,48.9682322 L78.16,45.6202322 L81.496,40.6762322 L81.496,40.5682322 L78.82,40.5682322 L77.008,43.4482322 L75.268,40.5682322 L72.592,40.5682322 L72.592,40.6642322 L75.784,45.6202322 L75.784,48.9682322 L78.16,48.9682322 Z M87.796,49.1362322 C88.972,49.1362322 90.088,48.7402322 90.952,47.8882322 L90.028,46.9642322 C89.44,47.5522322 88.576,47.8762322 87.796,47.8762322 C85.624,47.8762322 84.712,46.3522322 84.7,44.8162322 C84.688,43.2682322 85.66,41.6962322 87.796,41.6962322 C88.576,41.6962322 89.368,41.9722322 89.968,42.5602322 L90.868,41.6962322 C90.016,40.8442322 88.924,40.4242322 87.796,40.4242322 C84.796,40.4242322 83.356,42.6202322 83.3679256,44.8282322 C83.38,47.0362322 84.748,49.1362322 87.796,49.1362322 Z M93.028,48.9682322 L93.028,40.5802322 L91.792,40.5802322 L91.792,48.9682322 L93.028,48.9682322 Z M94.252,41.3122322 C94.252,42.3322322 95.788,42.3322322 95.788,41.3122322 C95.788,40.3042322 94.252,40.3042322 94.252,41.3122322 Z M95.632,48.9682322 L95.632,43.0282322 L94.396,43.0282322 L94.396,48.9682322 L95.632,48.9682322 Z M98.188,51.7162322 L98.188,48.1042322 C98.632,48.8362322 99.556,49.1002322 100.276,49.1002322 C102.112,49.1002322 103.264,47.8042322 103.264,46.0162322 C103.264,44.2282322 102.04,42.9442322 100.276,42.9322322 C99.484,42.9322322 98.644,43.2922322 98.188,44.0122322 L98.116,43.0522322 L96.952,43.0522322 L96.952,51.7162322 L98.188,51.7162322 Z M100.156,47.9002322 C99.076,47.9002322 98.296,47.0722322 98.296,46.0162322 C98.296,44.9602322 99.016,44.1322322 100.156,44.1322322 C101.284,44.1322322 102.028,44.9002322 102.028,46.0162322 C102.028,47.1202322 101.236,47.9002322 100.156,47.9002322 Z M106.456,49.1482322 C107.992,49.1482322 108.964,48.3802322 108.976,47.2762322 C108.988,45.7522322 107.56,45.5122322 106.468,45.4162322 C105.712,45.3442322 105.196,45.1522322 105.184,44.6602322 C105.184,44.1922322 105.688,43.9402322 106.444,43.9522322 C107.032,43.9522322 107.536,44.0722322 108.004,44.5042322 L108.7,43.6882322 C108.04,43.1002322 107.332,42.8962322 106.42,42.8962322 C105.316,42.8962322 103.96,43.3882322 103.96,44.6962322 C103.972,46.0042322 105.256,46.3642322 106.372,46.4722322 C107.248,46.5562322 107.752,46.7602322 107.74,47.2882322 C107.728,47.8402322 107.068,48.0562322 106.48,48.0562322 C105.784,48.0442322 104.956,47.7922322 104.404,47.1802322 L103.756,48.0562322 C104.536,48.9322322 105.496,49.1482322 106.456,49.1482322 Z",id:"GIPHYClips"}))))))},Ho=Zt.div(Sa||(Sa=a(["\n    display: flex;\n    align-items: center;\n    font-family: interface, helvetica, arial;\n    cursor: pointer;\n"]))),Ko=Zt(er)(Ia||(Ia=a(["\n    flex-shrink: 0;\n"]))),qo=Zt.div(Ta||(Ta=a(["\n    display: flex;\n    flex-direction: column;\n"]))),Yo=e=>{let{gif:t,className:n,onClick:a}=e;const{user:r}=t;return(null==r?void 0:r.username)||(null==r?void 0:r.display_name)?o.createElement(Ho,{className:[Yo.className,n].join(" "),onClick:e=>{if(e.preventDefault(),e.stopPropagation(),a)a(t);else{const e=r.profile_url;e&&window.open(e,"_blank")}}},o.createElement(Ko,{user:r}),o.createElement(qo,null,o.createElement(jo,{onClick:e=>{e.preventDefault(),e.stopPropagation(),a?a(t):t.url&&window.open(t.url,"_blank")}}),o.createElement(sr,{user:r}))):null};Yo.className="giphy-attribution";var Xo=Yo,Zo=25,Qo=e=>{let{size:t=Zo,onClick:n=(()=>{})}=e;return o.createElement("svg",{width:t,height:t,viewBox:"0 0 26 23",onClick:n},o.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},o.createElement("g",{transform:"translate(1.000000, 0.000000)",fill:"#FFF",fillRule:"nonzero"},o.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 -1.77635684e-15,15.3405244 L-1.77635684e-15,7.45058441 C-1.77635684e-15,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z"}),o.createElement("path",{d:"M15.7579491,16.0914044 L14.6798891,13.6594044 C15.5739159,13.2635547 16.1503537,12.3776671 16.1501091,11.3999244 C16.150386,10.4242626 15.5763999,9.53983269 14.6852091,9.14272441 L15.7697291,6.71376441 C17.6193585,7.53872062 18.810518,9.37466359 18.8101092,11.3999244 C18.8105521,13.4298903 17.6139475,15.2691931 15.7579491,16.0914044 L15.7579491,16.0914044 Z"}),o.createElement("path",{d:"M18.3647491,20.2619044 L17.2863091,17.8299044 C19.8302925,16.7031661 21.4705725,14.1822599 21.4701091,11.3999244 C21.4701091,8.59818441 19.8167291,6.09892441 17.3022691,4.97678441 L18.3864091,2.54782441 C21.8804724,4.10607079 24.1307363,7.57414217 24.1301093,11.3999244 C24.1308375,15.2343934 21.8705556,18.7086904 18.3647491,20.2619044 Z"}))))},Jo=e=>{let{size:t=Zo,onClick:n=(()=>{})}=e;return o.createElement("svg",{onClick:n,height:t,width:t,viewBox:"0 0 26 23",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"Group",transform:"translate(1.000000, 0.000000)",fill:"#FFFFFF",fillRule:"nonzero"},o.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 0,15.3405244 L0,7.45058441 C0,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z",id:"Path"})),o.createElement("g",{id:"Group",transform:"translate(14.887009, 6.947630)",fill:"#FFFFFF",fillRule:"nonzero"},o.createElement("path",{d:"M7.88199149,6.27905236 C7.94693088,6.35707599 7.94693088,6.47033309 7.88199149,6.54835671 L6.54835671,7.88199149 C6.47033309,7.94693088 6.35707599,7.94693088 6.27905236,7.88199149 L3.96534802,5.56828715 L1.65164367,7.88199149 C1.57362004,7.94693088 1.46036294,7.94693088 1.38233932,7.88199149 L0.0487045381,6.54835671 C-0.016234846,6.47033309 -0.016234846,6.35707599 0.0487045381,6.27905236 L2.36240889,3.96534802 L0.0487045381,1.65164367 C-0.016234846,1.57362004 -0.016234846,1.46036294 0.0487045381,1.38233932 L1.38233932,0.0487045381 C1.46036294,-0.016234846 1.57362004,-0.016234846 1.65164367,0.0487045381 L3.96534802,2.36240889 L6.27905236,0.0487045381 C6.35707599,-0.016234846 6.47033309,-0.016234846 6.54835671,0.0487045381 L7.88199149,1.38233932 C7.94693088,1.46036294 7.94693088,1.57362004 7.88199149,1.65164367 L5.56828715,3.96534802 L7.88199149,6.27905236 Z",id:"Shape"}))))},$o=Zt.div(Ca||(Ca=a(["\n    background: ",";\n    height: ","px;\n    position: absolute;\n    width: 5px;\n    bottom: 0;\n    left: 0;\n    opacity: 0.95;\n"])),nn,(e=>e.$barHeight)),es=e=>{let{videoEl:t}=e;(0,Va.A)(2147483647,100);const n=(null==t?void 0:t.currentTime)||0,a=(null==t?void 0:t.duration)||0,r=n/a;let s=Math.round(100*r),i=5;return(null==t?void 0:t.height)<200?i=3:(null==t?void 0:t.height)<300&&(i=4),s=a<10&&s>98?100:s,o.createElement($o,{style:{width:"".concat(s,"%")},$barHeight:i,className:"hide-in-percy"})},ts=[.25,.5,.75],ns="giphy-video",as=1,rs=e=>{let{muted:t,ccEnabled:n=!1,ccLanguage:a="en",loop:s=!0,onStateChange:i,onTimeUpdate:c,onCanPlay:l,onFirstPlay:u,onWaiting:h,onMuted:d,onError:p,onEnded:f,onLoop:m,onQuartile:g,onEndFullscreen:y,setVideoEl:b,gif:v,width:x,height:w,volume:k=.7,className:S=ns}=e;var I,T,C;const E=w||(0,r._2)(v,x),[N,R]=(0,o.useState)((0,r.sr)(v.video,x,E)),A=(0,o.useRef)(0);N||console.warn("GiphyJS No video content for id: ".concat(v.id));const _=(0,o.useRef)(Date.now()),O=(0,o.useRef)(!1),F=(0,o.useRef)(0),D=(0,o.useRef)(0),L=(0,o.useRef)(new Set);(0,o.useEffect)((()=>{_.current=Date.now(),O.current=!1,F.current=1,D.current=0,L.current=new Set}),[v.id]);const M=(0,o.useRef)(null);(0,o.useEffect)((()=>{const e=(0,r.sr)(v.video,x,E);M.current&&(null==N?void 0:N.url)&&e.url!==N.url&&(-1!==N.url.indexOf(String(v.id))&&(A.current=M.current.currentTime),R(e))}),[x,w,v.video,E,null==N?void 0:N.url,v.id]),(0,o.useEffect)((()=>{M.current&&(null==N?void 0:N.url)&&A.current&&(M.current.currentTime=A.current,A.current=0)}),[null==N?void 0:N.url,A]);const P=(0,o.useCallback)((()=>{var e;const t=M.current,n=null==(e=null==t?void 0:t.error)?void 0:e.code;if(n&&(null==t?void 0:t.src)){const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(e){case 1:return"Aborted. The fetching process for the media resource was aborted by the user agent at the user's request.";case 2:return"Network Error. A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"Decode Error. An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return'Can not play a video of type "'.concat(t.split(".").pop(),'" on this platform.');default:return""}}(n,null==t?void 0:t.src);console.error(e),null==p||p(n)}}),[p]),z=(0,o.useCallback)((()=>{null==i||i("playing"),O.current||(O.current=!0,v.analytics_response_payload&&Ma({actionType:"START",analyticsResponsePayload:v.analytics_response_payload}),null==u||u(Date.now()-_.current))}),[u,i,v]),B=(0,o.useCallback)((()=>null==i?void 0:i("paused")),[i]),W=(0,o.useCallback)((()=>{const e=M.current;if(e){const t=e.currentTime;ts.some((n=>!!((e,t,n,a,r)=>{const o=r+e;return!a.has(o)&&n>0&&t>n*e&&(a.add(o),!0)})(n,t,e.duration,L.current,F.current)&&(null==g||g(n),!0))),null==c||c(t||0)}}),[g,c]),U=(0,o.useCallback)((()=>null==l?void 0:l()),[l]),V=(0,o.useCallback)((()=>{const e=M.current;0!==(null==e?void 0:e.currentTime)&&(null==e?void 0:e.networkState)!==as&&(null==h||h(++D.current))}),[h]),G=(0,o.useCallback)((()=>{O.current&&(s&&M.current&&M.current.play(),null==m||m(F.current),F.current=F.current+1,null==f||f())}),[f,s,m]),j=(0,o.useCallback)((()=>null==y?void 0:y()),[y]),H=(0,o.useCallback)((e=>Ja(void 0,null,(function*(){if(e){const n=e.play();if(void 0!==n)try{yield n,null==d||d(!1)}catch(t){e.muted=!0,null==d||d(!0),e.play()}}}))),[d]);(0,o.useEffect)((()=>{const e=M.current;e&&(H(e),null==b||b(e),isNaN(k)||(e.volume=k))}),[]),(0,o.useEffect)((()=>{const e=M.current;return e&&(e.addEventListener("play",z),e.addEventListener("pause",B),e.addEventListener("error",P),e.addEventListener("timeupdate",W),e.addEventListener("canplay",U),e.addEventListener("ended",G),e.addEventListener("waiting",V),e.addEventListener("webkitendfullscreen",j)),()=>{e&&(e.removeEventListener("play",z),e.removeEventListener("pause",B),e.removeEventListener("error",P),e.removeEventListener("timeupdate",W),e.removeEventListener("canplay",U),e.removeEventListener("ended",G),e.removeEventListener("waiting",V),e.removeEventListener("webkitendfullscreen",j))}}),[z,B,P,W,U,G,V,j]);const K=null==(C=null==(T=null==(I=v.video)?void 0:I.captions)?void 0:T[a])?void 0:C.vtt;return(null==N?void 0:N.url)?o.createElement("video",{crossOrigin:"anonymous",draggable:!0,className:S,width:x,height:E,muted:t,autoPlay:!0,playsInline:!0,ref:M,src:null==N?void 0:N.url,"data-giphy-id":v.id},n&&K&&o.createElement("track",{label:"English",kind:"subtitles",srcLang:a,src:K,default:!0})):null};rs.className=ns;var os=rs,ss=Zt.div(Ea||(Ea=a(["\n    position: relative;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: black;\n    font-family: interface, helvetica, arial;\n    -webkit-font-smoothing: antialiased;\n"]))),is=Zt.div(Na||(Na=a(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    cursor: pointer;\n"]))),cs=Zt.div(Ra||(Ra=a(["\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    left: 10px;\n    bottom: 0;\n    display: flex;\n    justify-content: space-between;\n    opacity: ",";\n    transition: opacity ease-out 250ms;\n    align-items: flex-start;\n"])),(e=>e.$isHovered?1:0)),ls=Zt.div(Aa||(Aa=a(["\n    font-size: 22px;\n    color: white;\n    margin-bottom: 5px;\n    font-weight: bold;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n    user-select: none;\n    cursor: pointer;\n"]))),us=Zt.div(_a||(_a=a(["\n    position: relative;\n    min-width: 0;\n"]))),hs=Zt.div(Oa||(Oa=a(["\n    &:before {\n        background: linear-gradient(rgba(18, 18, 18, 0.6), rgba(0, 0, 0, 0));\n        content: '';\n        height: ","px;\n        left: 0;\n        pointer-events: none;\n        position: absolute;\n        top: 0;\n        width: 100%;\n    }\n    &:after {\n        background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));\n        content: '';\n        height: ","px;\n        left: 0;\n        pointer-events: none;\n        position: absolute;\n        bottom: 0;\n        width: 100%;\n    }\n"])),(e=>e.$isLargePlayer?125:75),(e=>e.$isLargePlayer?125:75)),ds=e=>{const{width:t,hideMute:n,hideAttribution:a,hideProgressBar:s,className:i,persistentControls:c,gif:l,overlay:u}=e,[h,d]=(0,o.useState)(!1),[p,f]=(0,o.useState)(null),[m,g]=(0,o.useState)(e.muted),[y,b]=(0,o.useState)(!1),{setVideoEl:v,onMuted:x,onUserMuted:w}=e,k=e.height||(0,r._2)(l,t),[,S,I]=(0,Ua.default)((()=>{d(!1)}),4e3),T=(0,o.useCallback)((e=>{null==x||x(e),b(e)}),[b,x]),C=(0,o.useCallback)((e=>{null==v||v(e),f(e)}),[v,f]);(0,o.useEffect)((()=>{g(e.muted)}),[e.muted]);const E=c||h,N=k>=300;return(0,o.useEffect)((()=>(E?I():S(),()=>S())),[E,S,I]),o.createElement(ss,{className:i,style:{width:t,height:k},onMouseOver:()=>d(!0),onMouseLeave:()=>d(!1),onMouseMove:()=>{d(!0),I()},onClick:e=>{null==w||w(!(m||y)),null==p||p.play(),e.preventDefault(),y?(b(!1),g(!1)):g(!m)}},o.createElement(os,Qa(Za({},e),{onMuted:T,setVideoEl:C,muted:m})),E&&o.createElement(hs,{$isLargePlayer:N}),o.createElement(cs,{$isHovered:E},o.createElement(us,null,N&&o.createElement(ls,{onClick:e=>{e.preventDefault(),e.stopPropagation(),window.open(l.url,"_blank")}},l.title),p&&!a?o.createElement(Xo,{gif:l}):null),!n&&o.createElement(is,null,m||y?o.createElement(Jo,null):o.createElement(Qo,null))),E&&!s&&p?o.createElement(es,{videoEl:p}):null,u&&o.createElement(u,{gif:l,isHovered:h,width:t,height:k}))},ps=e=>(e.overlay&&!e.controls&&console.warn("".concat(r.Vy.PREFIX,": Overlays only work when controls are enabled")),e.controls?o.createElement(ds,Za({},e)):o.createElement(os,Za({},e))),fs=Zt.div(Fa||(Fa=a(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    height: 100%;\n    width: 100%;\n"]))),ms=Zt(ps)(Da||(Da=a(["\n    height: 100%;\n    display: inline-block;\n    object-fit: fill;\n    pointer-events: none;\n    background: rgb(0, 0, 0, 0);\n"]))),gs=Zt.div(La||(La=a(["\n    position: absolute;\n    top: 6px;\n    right: 6px;\n    cursor: pointer;\n    opacity: ",";\n    transition: opacity ease-out 800ms;\n"])),(e=>e.$isHovered?1:.8)),ys="giphy-video-overlay-button",bs=e=>{let{muted:t,toggleMute:n,mutedByBrowser:a,isHovered:r}=e;return o.createElement(gs,{className:ys,onClick:e=>{e.preventDefault(),e.stopPropagation(),n()},$isHovered:r},t||a||!r?o.createElement(Jo,null):o.createElement(Qo,null))},vs=e=>{let{gif:t,isHovered:n,hideMuteButton:a,width:r,height:s,className:i,muted:c=!1,onUserMuted:l}=e;const[u,h]=(0,o.useState)(c),[d,p]=(0,o.useState)(!1),f=(0,o.useRef)(u);(0,o.useEffect)((()=>{h(c)}),[c,h]),(0,o.useEffect)((()=>{document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?(f.current=u,h(!0)):h(f.current)}))}),[u,h]);const m={toggleMute:()=>{d?(p(!1),h(!1)):(null==l||l(!u),h(!u))},muted:u,mutedByBrowser:d};return o.createElement(fs,{className:i},n&&o.createElement(ms,{gif:t,key:t.id,loop:!0,controls:!0,hideAttribution:!0,hideMute:!0,persistentControls:!0,muted:u,width:r,height:s,onMuted:p}),!a&&o.createElement(bs,Qa(Za({},m),{isHovered:n})))};vs.imgClassName=ys;(0,r.SU)("X-GIPHY-SDK-NAME","ReactSDK")},7087:function(e,t,n){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var r=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var a=e[t];if(a&&a.Math==Math)return a}throw Error("Cannot find global object")}(this);function o(e,t){if(t)e:{var n=r;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in n))break e;n=n[s]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&a(n,e,{configurable:!0,writable:!0,value:t})}}function s(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function i(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function c(e){if(!(e instanceof Array)){e=i(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}o("Symbol",(function(e){function t(e,t){this.g=e,a(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(a){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(a||"")+"_"+r++,a)}})),o("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<n.length;o++){var i=r[n[o]];"function"===typeof i&&"function"!=typeof i.prototype[e]&&a(i.prototype,e,{configurable:!0,writable:!0,value:function(){return s(t(this))}})}return e}));var l,u="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)l=Object.setPrototypeOf;else{var h;e:{var d={};try{d.__proto__={a:!0},h=d.a;break e}catch(yt){}h=!1}l=h?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var p=l;function f(e,t){if(e.prototype=u(t.prototype),e.prototype.constructor=e,p)p(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var a=Object.getOwnPropertyDescriptor(t,n);a&&Object.defineProperty(e,n,a)}else e[n]=t[n];e.ea=t.prototype}function m(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function g(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function y(e,t){e.j={U:t,V:!0},e.g=e.m||e.s}function b(e,t,n){return e.g=n,{value:t}}function v(e){this.g=new m,this.h=e}function x(e,t,n,a){try{var r=t.call(e.g.i,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.l=!1,r;var o=r.value}catch(s){return e.g.i=null,y(e.g,s),w(e)}return e.g.i=null,a.call(e.g,o),w(e)}function w(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,y(e.g,n)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.V)throw t.U;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function k(e){this.next=function(t){return g(e.g),e.g.i?t=x(e,e.g.i.next,t,e.g.o):(e.g.o(t),t=w(e)),t},this.throw=function(t){return g(e.g),e.g.i?t=x(e,e.g.i.throw,t,e.g.o):(y(e.g,t),t=w(e)),t},this.return=function(t){return function(e,t){g(e.g);var n=e.g.i;return n?x(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),w(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function S(e,t){return t=new k(new v(t)),p&&e.prototype&&p(t,e.prototype),t}m.prototype.o=function(e){this.h=e},m.prototype.return=function(e){this.j={return:e},this.g=this.s};var I="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var a=arguments[n];if(a)for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};o("Object.assign",(function(e){return e||I})),o("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.g=null}function a(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var o=r.setTimeout;n.prototype.i=function(e){o(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(a){this.j(a)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(a){n||(n=!0,e.call(t,a))}}var t=this,n=!1;return{resolve:e(this.C),reject:e(this.l)}},t.prototype.C=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.F(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.m(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(n){return void this.l(n)}"function"==typeof t?this.G(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.D(),this.A()},t.prototype.D=function(){var e=this;o((function(){if(e.B()){var t=r.console;"undefined"!==typeof t&&t.error(e.i)}}),1)},t.prototype.B=function(){if(this.o)return!1;var e=r.CustomEvent,t=r.Event,n=r.dispatchEvent;return"undefined"===typeof n||("function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=r.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.A=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)s.h(this.g[e]);this.g=null}};var s=new n;return t.prototype.F=function(e){var t=this.j();e.J(t.resolve,t.reject)},t.prototype.G=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(a){n.reject(a)}},t.prototype.then=function(e,n){function a(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(n){o(n)}}:t}var r,o,s=new t((function(e,t){r=e,o=t}));return this.J(a(e,r),a(n,o)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.J=function(e,t){function n(){switch(a.h){case 1:e(a.i);break;case 2:t(a.i);break;default:throw Error("Unexpected state: "+a.h)}}var a=this;null==this.g?s.h(n):this.g.push(n),this.o=!0},t.resolve=a,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=i(e),o=r.next();!o.done;o=r.next())a(o.value).J(t,n)}))},t.all=function(e){var n=i(e),r=n.next();return r.done?a([]):new t((function(e,t){function o(t){return function(n){s[t]=n,0==--i&&e(s)}}var s=[],i=0;do{s.push(void 0),i++,a(r.value).J(o(s.length-1),t),r=n.next()}while(!r.done)}))},t})),o("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}})),o("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var a=n.length;for(0>(t=t||0)&&(t=Math.max(t+a,0));t<a;t++){var r=n[t];if(r===e||Object.is(r,e))return!0}return!1}})),o("String.prototype.includes",(function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}})),o("Array.prototype.keys",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,a=!1,r={next:function(){if(!a&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return a=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e){return e}))}}));var T=this||self;function C(e,t){e=e.split(".");var n,a=T;e[0]in a||"undefined"==typeof a.execScript||a.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?a=a[n]&&a[n]!==Object.prototype[n]?a[n]:a[n]={}:a[n]=t}function E(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var N,R,A="undefined"!==typeof TextDecoder,_="undefined"!==typeof TextEncoder;function O(e){if(_)e=(R||(R=new TextEncoder)).encode(e);else{var t=void 0;t=void 0!==t&&t;for(var n=0,a=new Uint8Array(3*e.length),r=0;r<e.length;r++){var o=e.charCodeAt(r);if(128>o)a[n++]=o;else{if(2048>o)a[n++]=o>>6|192;else{if(55296<=o&&57343>=o){if(56319>=o&&r<e.length){var s=e.charCodeAt(++r);if(56320<=s&&57343>=s){o=1024*(o-55296)+s-56320+65536,a[n++]=o>>18|240,a[n++]=o>>12&63|128,a[n++]=o>>6&63|128,a[n++]=63&o|128;continue}r--}if(t)throw Error("Found an unpaired surrogate");o=65533}a[n++]=o>>12|224,a[n++]=o>>6&63|128}a[n++]=63&o|128}}e=a.subarray(0,n)}return e}var F={},D=null;function L(e,t){void 0===t&&(t=0),P(),t=F[t];for(var n=Array(Math.floor(e.length/3)),a=t[64]||"",r=0,o=0;r<e.length-2;r+=3){var s=e[r],i=e[r+1],c=e[r+2],l=t[s>>2];s=t[(3&s)<<4|i>>4],i=t[(15&i)<<2|c>>6],c=t[63&c],n[o++]=l+s+i+c}switch(l=0,c=a,e.length-r){case 2:c=t[(15&(l=e[r+1]))<<2]||a;case 1:e=e[r],n[o]=t[e>>2]+t[(3&e)<<4|l>>4]+c+a}return n.join("")}function M(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var a=new Uint8Array(n),r=0;return function(e,t){function n(t){for(;a<e.length;){var n=e.charAt(a++),r=D[n];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}P();for(var a=0;;){var r=n(-1),o=n(0),s=n(64),i=n(64);if(64===i&&-1===r)break;t(r<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=i&&t(s<<6&192|i))}}(e,(function(e){a[r++]=e})),a.subarray(0,r)}function P(){if(!D){D={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var a=e.concat(t[n].split(""));F[n]=a;for(var r=0;r<a.length;r++){var o=a[r];void 0===D[o]&&(D[o]=r)}}}}var z,B="function"===typeof Uint8Array.prototype.slice;function W(e,t,n){return t===n?z||(z=new Uint8Array(0)):B?e.slice(t,n):new Uint8Array(e.subarray(t,n))}var U=0;function V(e,t){t=void 0!==(t=void 0===t?{}:t).v&&t.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=t,e&&G(this,e)}function G(e,t){t=t.constructor===Uint8Array?t:t.constructor===ArrayBuffer||t.constructor===Array?new Uint8Array(t):t.constructor===String?M(t):t instanceof Uint8Array?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e.h=t,e.l=0,e.j=e.h.length,e.g=e.l}function j(e){for(var t=128,n=0,a=0,r=0;4>r&&128<=t;r++)n|=(127&(t=e.h[e.g++]))<<7*r;if(128<=t&&(n|=(127&(t=e.h[e.g++]))<<28,a|=(127&t)>>4),128<=t)for(r=0;5>r&&128<=t;r++)a|=(127&(t=e.h[e.g++]))<<7*r+3;if(128>t)return e=n>>>0,(a=2147483648&(t=a>>>0))&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0)),e=4294967296*t+(e>>>0),a?-e:e;e.m=!0}V.prototype.reset=function(){this.g=this.l},V.prototype.i=function(){var e=this.h,t=e[this.g],n=127&t;return 128>t?(this.g+=1,n):(n|=(127&(t=e[this.g+1]))<<7,128>t?(this.g+=2,n):(n|=(127&(t=e[this.g+2]))<<14,128>t?(this.g+=3,n):(n|=(127&(t=e[this.g+3]))<<21,128>t?(this.g+=4,n):(n|=(15&(t=e[this.g+4]))<<28,128>t?(this.g+=5,n>>>0):(this.g+=5,128<=e[this.g++]&&128<=e[this.g++]&&128<=e[this.g++]&&128<=e[this.g++]&&this.g++,n)))))},V.prototype.o=function(){var e=this.h[this.g],t=this.h[this.g+1],n=this.h[this.g+2],a=this.h[this.g+3];return this.g+=4,e=2*((n=(e|t<<8|n<<16|a<<24)>>>0)>>31)+1,t=n>>>23&255,n&=8388607,255==t?n?NaN:1/0*e:0==t?e*Math.pow(2,-149)*n:e*Math.pow(2,t-150)*(n+Math.pow(2,23))};var H=[];function K(){this.g=new Uint8Array(64),this.h=0}function q(e,t){for(;127<t;)e.push(127&t|128),t>>>=7;e.push(t)}function Y(e){var t={},n=void 0!==t.N&&t.N;this.o={v:void 0!==t.v&&t.v},this.N=n,t=this.o,H.length?(n=H.pop(),t&&(n.v=t.v),e&&G(n,e),e=n):e=new V(e,t),this.g=e,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}function X(e){var t=e.g;if((t=t.g==t.j)||(t=e.j)||(t=(t=e.g).m||0>t.g||t.g>t.j),t)return!1;e.m=e.g.g;var n=7&(t=e.g.i());return 0!=n&&5!=n&&1!=n&&2!=n&&3!=n&&4!=n?(e.j=!0,!1):(e.i=t,e.l=t>>>3,e.h=n,!0)}function Z(e){switch(e.h){case 0:if(0!=e.h)Z(e);else{for(e=e.g;128&e.h[e.g];)e.g++;e.g++}break;case 1:1!=e.h?Z(e):(e=e.g).g+=8;break;case 2:if(2!=e.h)Z(e);else{var t=e.g.i();(e=e.g).g+=t}break;case 5:5!=e.h?Z(e):(e=e.g).g+=4;break;case 3:for(t=e.l;;){if(!X(e)){e.j=!0;break}if(4==e.h){e.l!=t&&(e.j=!0);break}Z(e)}break;default:e.j=!0}}function Q(e,t,n){var a=e.g.j,r=e.g.i(),o=e.g.g+r;if(e.g.j=o,n(t,e),0!==(n=o-e.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+r+" bytes, instead read "+(r-n)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.g.g=o,e.g.j=a,t}function J(e){return e.g.o()}function $(e){var t,n=e.g.i(),a=(e=e.g).g;if(e.g+=n,e=e.h,A)(t=N)||(t=N=new TextDecoder("utf-8",{fatal:!1})),t=t.decode(e.subarray(a,a+n));else{n=a+n;for(var r,o,s,i=[],c=null;a<n;)128>(r=e[a++])?i.push(r):224>r?a>=n?i.push(65533):(o=e[a++],194>r||128!==(192&o)?(a--,i.push(65533)):i.push((31&r)<<6|63&o)):240>r?a>=n-1?i.push(65533):128!==(192&(o=e[a++]))||224===r&&160>o||237===r&&160<=o||128!==(192&(t=e[a++]))?(a--,i.push(65533)):i.push((15&r)<<12|(63&o)<<6|63&t):244>=r?a>=n-2?i.push(65533):128!==(192&(o=e[a++]))||0!==o-144+(r<<28)>>30||128!==(192&(t=e[a++]))||128!==(192&(s=e[a++]))?(a--,i.push(65533)):(r=(7&r)<<18|(63&o)<<12|(63&t)<<6|63&s,r-=65536,i.push(55296+(r>>10&1023),56320+(1023&r))):i.push(65533),8192<=i.length&&(c=E(c,i),i.length=0);t=E(c,i)}return t}function ee(e,t,n){var a=e.g.i();for(a=e.g.g+a;e.g.g<a;)n.push(t.call(e.g))}function te(e,t){2==e.h?ee(e,V.prototype.o,t):t.push(J(e))}function ne(){this.h=[],this.i=0,this.g=new K}function ae(e,t){0!==t.length&&(e.h.push(t),e.i+=t.length)}function re(e){var t=e.i+e.g.length();if(0===t)return new Uint8Array(0);t=new Uint8Array(t);for(var n=e.h,a=n.length,r=0,o=0;o<a;o++){var s=n[o];0!==s.length&&(t.set(s,r),r+=s.length)}return 0!==(a=(n=e.g).h)&&(t.set(n.g.subarray(0,a),r),n.h=0),e.h=[t],t}function oe(e,t,n){if(null!=n){q(e.g,8*t+5),e=e.g;var a=n;0===(a=(n=0>a?1:0)?-a:a)?0<1/a?U=0:(0,U=2147483648):isNaN(a)?(0,U=2147483647):34028234663852886e22<a?(0,U=(n<<31|2139095040)>>>0):11754943508222875e-54>a?(a=Math.round(a/Math.pow(2,-149)),0,U=(n<<31|a)>>>0):(t=Math.floor(Math.log(a)/Math.LN2),a*=Math.pow(2,-t),16777216<=(a=Math.round(8388608*a))&&++t,0,U=(n<<31|t+127<<23|8388607&a)>>>0),n=U,e.push(n>>>0&255),e.push(n>>>8&255),e.push(n>>>16&255),e.push(n>>>24&255)}}K.prototype.push=function(e){if(!(this.h+1<this.g.length)){var t=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(t)}this.g[this.h++]=e},K.prototype.length=function(){return this.h},K.prototype.end=function(){var e=this.g,t=this.h;return this.h=0,W(e,0,t)},Y.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};var se="function"===typeof Uint8Array;function ie(e,t,n){if(null!=e)return"object"===typeof e?se&&e instanceof Uint8Array?n(e):ce(e,t,n):t(e)}function ce(e,t,n){if(Array.isArray(e)){for(var a=Array(e.length),r=0;r<e.length;r++)a[r]=ie(e[r],t,n);return Array.isArray(e)&&e.W&&de(a),a}for(r in a={},e)a[r]=ie(e[r],t,n);return a}function le(e){return"number"===typeof e?isFinite(e)?e:String(e):e}var ue,he={W:{value:!0,configurable:!0}};function de(e){return Array.isArray(e)&&!Object.isFrozen(e)&&Object.defineProperties(e,he),e}function pe(e,t,n){var a=ue;if(ue=null,e||(e=a),a=this.constructor.ca,e||(e=a?[a]:[]),this.j=a?0:-1,this.m=this.g=null,this.h=e,e=(a=this.h.length)-1,!a||(null===(a=this.h[e])||"object"!=typeof a||Array.isArray(a)||se&&a instanceof Uint8Array)?void 0!==t&&-1<t?(this.l=Math.max(t,e+1-this.j),this.i=null):this.l=Number.MAX_VALUE:(this.l=e-this.j,this.i=a),n)for(t=0;t<n.length;t++)(e=n[t])<this.l?(e+=this.j,(a=this.h[e])?de(a):this.h[e]=fe):(me(this),(a=this.i[e])?de(a):this.i[e]=fe)}var fe=Object.freeze(de([]));function me(e){var t=e.l+e.j;e.h[t]||(e.i=e.h[t]={})}function ge(e,t,n){return-1===t?null:void 0!==n&&n||t>=e.l?e.i?e.i[t]:void 0:e.h[t+e.j]}function ye(e,t){var n=void 0!==n&&n,a=ge(e,t,n);return null==a&&(a=fe),a===fe&&we(e,t,a=de([]),n),a}function be(e){var t=ye(e,3);if(e.m||(e.m={}),!e.m[3]){for(var n=0;n<t.length;n++)t[n]=+t[n];e.m[3]=!0}return t}function ve(e,t,n){return null==(e=ge(e,t))?n:e}function xe(e,t,n){return null==(e=null==(e=ge(e,t))?e:+e)?void 0===n?0:n:e}function we(e,t,n,a){void 0!==a&&a||t>=e.l?(me(e),e.i[t]=n):e.h[t+e.j]=n}function ke(e,t,n){if(-1===n)return null;if(e.g||(e.g={}),!e.g[n]){var a=ge(e,n,!1);a&&(e.g[n]=new t(a))}return e.g[n]}function Se(e,t){e.g||(e.g={});var n=e.g[1];if(!n){var a=ye(e,1);n=[];for(var r=0;r<a.length;r++)n[r]=new t(a[r]);e.g[1]=n}return n}function Ie(e,t,n){var a=void 0!==a&&a;e.g||(e.g={});var r=n?Ce(n,!1):n;e.g[t]=n,we(e,t,r,a)}function Te(e,t,n,a){var r=Se(e,n);t=t||new n,e=ye(e,1),void 0!=a?(r.splice(a,0,t),e.splice(a,0,Ce(t,!1))):(r.push(t),e.push(Ce(t,!1)))}function Ce(e,t){if(e.g)for(var n in e.g){var a=e.g[n];if(Array.isArray(a))for(var r=0;r<a.length;r++)a[r]&&Ce(a[r],t);else a&&Ce(a,t)}return e.h}function Ee(e,t){if(e=e.o){ae(t,t.g.end());for(var n=0;n<e.length;n++)ae(t,e[n])}}function Ne(e,t){if(4==t.h)return!1;var n=t.m;return Z(t),t.N||(t=W(t.g.h,n,t.g.g),(n=e.o)?n.push(t):e.o=[t]),!0}function Re(e){pe.call(this,e,-1,_e)}function Ae(e,t){for(;X(t);)switch(t.i){case 8:var n=t.g.i();we(e,1,n);break;case 16:we(e,2,n=t.g.i());break;case 29:case 26:te(t,e.getPackedDataList());break;case 32:we(e,4,n=j(t.g));break;default:if(!Ne(e,t))return e}return e}pe.prototype.toJSON=function(){return ce(Ce(this,!1),le,L)},pe.prototype.toString=function(){return Ce(this,!1).toString()},f(Re,pe),Re.prototype.getRows=function(){return ge(this,1)},Re.prototype.getCols=function(){return ge(this,2)},Re.prototype.getPackedDataList=function(){return be(this)},Re.prototype.getLayout=function(){return ve(this,4,0)};var _e=[3];function Oe(e,t){var n=void 0;return new(n||(n=Promise))((function(a,r){function o(e){try{i(t.next(e))}catch(n){r(n)}}function s(e){try{i(t.throw(e))}catch(n){r(n)}}function i(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,s)}i((t=t.apply(e,void 0)).next())}))}function Fe(e){pe.call(this,e)}function De(e,t){for(;X(t);)switch(t.i){case 8:var n=t.g.i();we(e,1,n);break;case 21:we(e,2,n=J(t));break;case 26:we(e,3,n=$(t));break;case 34:we(e,4,n=$(t));break;default:if(!Ne(e,t))return e}return e}function Le(e){pe.call(this,e,-1,Me)}f(Fe,pe),f(Le,pe),Le.prototype.addClassification=function(e,t){return Te(this,e,Fe,t),this};var Me=[1];function Pe(e){pe.call(this,e)}function ze(e,t){for(;X(t);)switch(t.i){case 13:var n=J(t);we(e,1,n);break;case 21:we(e,2,n=J(t));break;case 29:we(e,3,n=J(t));break;case 37:we(e,4,n=J(t));break;case 45:we(e,5,n=J(t));break;default:if(!Ne(e,t))return e}return e}function Be(e){pe.call(this,e,-1,Ue)}function We(e){e:{var t=new Be;for(e=new Y(e);X(e);)if(10===e.i){Te(t,Q(e,new Pe,ze),Pe,void 0)}else if(!Ne(t,e))break e}return t}f(Pe,pe),f(Be,pe);var Ue=[1];function Ve(e){pe.call(this,e)}function Ge(e){pe.call(this,e,-1,He)}function je(e,t){for(;X(t);)switch(t.i){case 8:var n=j(t.g);we(e,1,n);break;case 16:we(e,2,n=j(t.g));break;case 29:case 26:te(t,e.getVertexBufferList());break;case 32:case 34:n=t;var a=e.getIndexBufferList();2==n.h?ee(n,V.prototype.i,a):a.push(n.g.i());break;default:if(!Ne(e,t))return e}return e}f(Ve,pe),f(Ge,pe),Ge.prototype.getVertexType=function(){return ve(this,1,0)},Ge.prototype.getPrimitiveType=function(){return ve(this,2,0)},Ge.prototype.getVertexBufferList=function(){return be(this)},Ge.prototype.getIndexBufferList=function(){return ye(this,4)};var He=[3,4];function Ke(e){pe.call(this,e)}function qe(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function Ye(e){return Se(e,Fe).map((function(e){return{index:ve(e,1,0),Y:xe(e,2),label:null!=ge(e,3)?ve(e,3,""):void 0,displayName:null!=ge(e,4)?ve(e,4,""):void 0}}))}function Xe(e){return{x:xe(e,1),y:xe(e,2),z:xe(e,3),visibility:null!=ge(e,4)?xe(e,4):void 0}}function Ze(e,t){this.h=e,this.g=t,this.l=0}function Qe(e,t,n){return function(e,t){var n=e.g;if(void 0===e.m){var a=qe(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),r=qe(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=n.createProgram();if(n.attachShader(o,a),n.attachShader(o,r),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(o));a=e.m=o,n.useProgram(a),r=n.getUniformLocation(a,"sampler0"),e.j={I:n.getAttribLocation(a,"aVertex"),H:n.getAttribLocation(a,"aTex"),da:r},e.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.enableVertexAttribArray(e.j.I),n.vertexAttribPointer(e.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.enableVertexAttribArray(e.j.H),n.vertexAttribPointer(e.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(r,0)}a=e.j,n.useProgram(e.m),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.h.bindTexture2d(t.glName),n.enableVertexAttribArray(a.I),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.vertexAttribPointer(a.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(a.H),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.vertexAttribPointer(a.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(a.I),n.disableVertexAttribArray(a.H),n.bindBuffer(n.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"===typeof e.g.canvas.transferToImageBitmap?Promise.resolve(e.g.canvas.transferToImageBitmap()):n?Promise.resolve(e.g.canvas):"function"===typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise((function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)})))}function Je(e){this.g=e}f(Ke,pe),Ke.prototype.getMesh=function(){return ke(this,Ge,1)},Ke.prototype.getPoseTransformMatrix=function(){return ke(this,Re,2)};var $e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function et(e,t){return t+e}function tt(e,t){window[e]=t}function nt(e){if(this.g=e,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=e&&e.locateFile||et,"object"===typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"===typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=t,e.options)for(var n=(t=i(Object.keys(e.options))).next();!n.done;n=t.next()){n=n.value;var a=e.options[n].default;void 0!==a&&(this.j[n]="function"===typeof a?a():a)}}function at(e){return Oe(e,(function e(){var t,n,a,r,o,s,i,l,u,h,d,p=this;return S(e,(function(e){switch(e.g){case 1:return t=p,p.R?(n=function(e,t){return void 0===e.g.files?[]:"function"===typeof e.g.files?e.g.files(t):e.g.files}(p,p.j),b(e,function(){return Oe(this,(function e(){return S(e,(function(e){switch(e.g){case 1:return e.m=2,b(e,WebAssembly.instantiate($e),4);case 4:e.g=3,e.m=0;break;case 2:return e.m=0,e.j=null,e.return(!1);case 3:return e.return(!0)}}))}))}(),2)):e.return();case 2:if(a=e.h,"object"===typeof window)return tt("createMediapipeSolutionsWasm",{locateFile:p.locateFile}),tt("createMediapipeSolutionsPackedAssets",{locateFile:p.locateFile}),s=n.filter((function(e){return void 0!==e.data})),i=n.filter((function(e){return void 0===e.data})),l=Promise.all(s.map((function(e){var n=rt(t,e.url);if(void 0!==e.path){var a=e.path;n=n.then((function(e){return t.overrideFile(a,e),Promise.resolve(e)}))}return n}))),u=Promise.all(i.map((function(e){return void 0===e.simd||e.simd&&a||!e.simd&&!a?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise((function(e){t.addEventListener("load",(function(){e()}),!1),t.addEventListener("error",(function(){e()}),!1),document.body.appendChild(t)}))}(t.locateFile(e.url,t.S)):Promise.resolve()}))).then((function(){return Oe(t,(function e(){var t,n,a=this;return S(e,(function(e){if(1==e.g)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,b(e,t(n),2);a.h=e.h,e.g=0}))}))})),h=Oe(t,(function e(){var t=this;return S(e,(function(e){return t.g.graph&&t.g.graph.url?e=b(e,rt(t,t.g.graph.url),0):(e.g=0,e=void 0),e}))})),b(e,Promise.all([u,l,h]),7);if("function"!==typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return r=n.filter((function(e){return void 0===e.simd||e.simd&&a||!e.simd&&!a})).map((function(e){return t.locateFile(e.url,t.S)})),importScripts.apply(null,c(r)),b(e,createMediapipeSolutionsWasm(Module),6);case 6:p.h=e.h,p.l=new OffscreenCanvas(1,1),p.h.canvas=p.l,o=p.h.GL.createContext(p.l,{antialias:!1,alpha:!1,ba:"undefined"!==typeof WebGL2RenderingContext?2:1}),p.h.GL.makeContextCurrent(o),e.g=4;break;case 7:if(p.l=document.createElement("canvas"),!(d=p.l.getContext("webgl2",{}))&&!(d=p.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),e.return();p.D=d,p.h.canvas=p.l,p.h.createContext(p.l,!0,!0,{});case 4:p.i=new p.h.SolutionWasm,p.R=!1,e.g=0}}))}))}function rt(e,t){return Oe(e,(function e(){var n,a,r=this;return S(e,(function(e){return t in r.F?e.return(r.F[t]):(n=r.locateFile(t,""),a=fetch(n).then((function(e){return e.arrayBuffer()})),r.F[t]=a,e.return(a))}))}))}function ot(e,t,n){return Oe(e,(function e(){var a,r,o,s,c,l,u,h,d,p,f,m,g,y,v=this;return S(e,(function(e){switch(e.g){case 1:if(!n)return e.return(t);for(a={},r=0,o=i(Object.keys(n)),s=o.next();!s.done;s=o.next())c=s.value,"string"!==typeof(l=n[c])&&"texture"===l.type&&void 0!==t[l.stream]&&++r;1<r&&(v.G=!1),u=i(Object.keys(n)),s=u.next();case 2:if(s.done){e.g=4;break}if(h=s.value,"string"===typeof(d=n[h]))return g=a,y=h,b(e,function(e,t,n){return Oe(e,(function e(){var a,r=this;return S(e,(function(e){return"number"===typeof n||n instanceof Uint8Array||n instanceof r.h.Uint8BlobList?e.return(n):n instanceof r.h.Texture2dDataOut?((a=r.s[t])||(a=new Ze(r.h,r.D),r.s[t]=a),e.return(Qe(a,n,r.G))):e.return(void 0)}))}))}(v,h,t[d]),14);if(p=t[d.stream],"detection_list"===d.type){if(p){for(var x=p.getRectList(),w=p.getLandmarksList(),k=p.getClassificationsList(),I=[],T=0;T<x.size();++T){var C=x.get(T);e:{var E=new Ve;for(C=new Y(C);X(C);)switch(C.i){case 13:var N=J(C);we(E,1,N);break;case 21:we(E,2,N=J(C));break;case 29:we(E,3,N=J(C));break;case 37:we(E,4,N=J(C));break;case 45:we(E,5,N=J(C));break;case 48:we(E,6,N=j(C.g));break;default:if(!Ne(E,C))break e}}E={Z:xe(E,1),$:xe(E,2),height:xe(E,3),width:xe(E,4),rotation:xe(E,5,0),X:ve(E,6,0)},C=Se(We(w.get(T)),Pe).map(Xe);var R=k.get(T);e:for(N=new Le,R=new Y(R);X(R);)if(10===R.i)N.addClassification(Q(R,new Fe,De));else if(!Ne(N,R))break e;E={T:E,O:C,M:Ye(N)},I.push(E)}x=I}else x=[];a[h]=x,e.g=7;break}if("proto_list"===d.type){if(p){for(x=Array(p.size()),w=0;w<p.size();w++)x[w]=p.get(w);p.delete()}else x=[];a[h]=x,e.g=7;break}if(void 0===p){e.g=3;break}if("float_list"===d.type){a[h]=p,e.g=7;break}if("proto"===d.type){a[h]=p,e.g=7;break}if("texture"!==d.type)throw Error("Unknown output config type: '"+d.type+"'");return(f=v.s[h])||(f=new Ze(v.h,v.D),v.s[h]=f),b(e,Qe(f,p,v.G),13);case 13:m=e.h,a[h]=m;case 7:d.transform&&a[h]&&(a[h]=d.transform(a[h])),e.g=3;break;case 14:g[y]=e.h;case 3:s=u.next(),e.g=2;break;case 4:return e.return(a)}}))}))}function st(e,t){for(var n=t.name||"$",a=[].concat(c(t.wants)),r=new e.h.StringList,o=i(t.wants),s=o.next();!s.done;s=o.next())r.push_back(s.value);o=e.h.PacketListener.implement({onResults:function(r){for(var o={},s=0;s<t.wants.length;++s)o[a[s]]=r.get(s);var i=e.listeners[n];i&&(e.C=ot(e,o,t.outs).then((function(n){n=i(n);for(var r=0;r<t.wants.length;++r){var s=o[a[r]];"object"===typeof s&&s.hasOwnProperty&&s.hasOwnProperty("delete")&&s.delete()}n&&(e.C=n)})))}}),e.i.attachMultiListener(r,o),r.delete()}function it(e){e=function(e){e:{var t=new Ke;for(e=new Y(e);X(e);)switch(e.i){case 10:var n=Q(e,new Ge,je);Ie(t,1,n);break;case 18:Ie(t,2,n=Q(e,new Re,Ae));break;default:if(!Ne(t,e))break e}}return t}(e);var t=e.getMesh();if(!t)return e;var n=new Float32Array(t.getVertexBufferList());t.getVertexBufferList=function(){return n};var a=new Uint32Array(t.getIndexBufferList());return t.getIndexBufferList=function(){return a},e}(e=nt.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){return Oe(this,(function e(){var t=this;return S(e,(function(e){t.i&&(t.i.reset(),t.m={},t.s={}),e.g=0}))}))},e.setOptions=function(e,t){var n=this;if(t=t||this.g.options){for(var a=[],r=[],o={},s=i(Object.keys(e)),c=s.next();!c.done;o={K:o.K,L:o.L},c=s.next()){var l=c.value;l in this.j&&this.j[l]===e[l]||(this.j[l]=e[l],void 0!==(c=t[l])&&(c.onChange&&(o.K=c.onChange,o.L=e[l],a.push(function(e){return function(){return Oe(n,(function t(){var n=this;return S(t,(function(t){if(1==t.g)return b(t,e.K(e.L),2);!0===t.h&&(n.o=!0),t.g=0}))}))}}(o))),c.graphOptionXref&&(l={valueNumber:1===c.type?e[l]:0,valueBoolean:0===c.type&&e[l],valueString:2===c.type?e[l]:""},c=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),c.graphOptionXref),l),r.push(c))))}0===a.length&&0===r.length||(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(r),this.u=(void 0===this.u?[]:this.u).concat(a))}},e.initialize=function(){return Oe(this,(function e(){var t=this;return S(e,(function(e){return 1==e.g?b(e,at(t),2):3!=e.g?b(e,Oe(t,(function e(){var t,n,a,r,o,s,c,l,u=this;return S(e,(function(e){if(1==e.g)return u.g.graph&&u.g.graph.url&&u.P===u.g.graph.url?e.return():(u.o=!0,u.g.graph&&u.g.graph.url?(u.P=u.g.graph.url,b(e,rt(u,u.g.graph.url),3)):void(e.g=2));for(2!=e.g&&(t=e.h,u.i.loadGraph(t)),n=i(Object.keys(u.B)),a=n.next();!a.done;a=n.next())r=a.value,u.i.overrideFile(r,u.B[r]);if(u.B={},u.g.listeners)for(o=i(u.g.listeners),s=o.next();!s.done;s=o.next())c=s.value,st(u,c);l=u.j,u.j={},u.setOptions(l),e.g=0}))})),3):b(e,function(e){return Oe(e,(function e(){var t,n,a,r,o,s,c=this;return S(e,(function(e){switch(e.g){case 1:if(!c.o)return e.return();if(!c.u){e.g=2;break}t=i(c.u),n=t.next();case 3:if(n.done){e.g=5;break}return b(e,(0,n.value)(),4);case 4:n=t.next(),e.g=3;break;case 5:c.u=void 0;case 2:if(c.A){for(a=new c.h.GraphOptionChangeRequestList,r=i(c.A),o=r.next();!o.done;o=r.next())s=o.value,a.push_back(s);c.i.changeOptions(a),a.delete(),c.A=void 0}c.o=!1,e.g=0}}))}))}(t),0)}))}))},e.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.B[e]=t},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(e,t){return Oe(this,(function n(){var a,r,o,s,c,l,u,h,d,p=this;return S(n,(function(n){switch(n.g){case 1:return p.g.inputs?(a=1e3*(void 0===t||null===t?performance.now():t),b(n,p.C,2)):n.return();case 2:return b(n,p.initialize(),3);case 3:for(r=new p.h.PacketDataList,o=i(Object.keys(e)),s=o.next();!s.done;s=o.next())if(c=s.value,l=p.g.inputs[c]){e:{var f=p,m=e[c];switch(l.type){case"video":var g=f.m[l.stream];if(g||(g=new Ze(f.h,f.D),f.m[l.stream]=g),0===(f=g).l&&(f.l=f.h.createTexture()),"undefined"!==typeof HTMLVideoElement&&m instanceof HTMLVideoElement){var y=m.videoWidth;g=m.videoHeight}else"undefined"!==typeof HTMLImageElement&&m instanceof HTMLImageElement?(y=m.naturalWidth,g=m.naturalHeight):(y=m.width,g=m.height);g={glName:f.l,width:y,height:g},(y=f.g).canvas.width=g.width,y.canvas.height=g.height,y.activeTexture(y.TEXTURE0),f.h.bindTexture2d(f.l),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,m),f.h.bindTexture2d(0),f=g;break e;case"detections":for((g=f.m[l.stream])||(g=new Je(f.h),f.m[l.stream]=g),(f=g).data||(f.data=new f.g.DetectionListData),f.data.reset(m.length),g=0;g<m.length;++g){y=m[g];var v=f.data,x=v.setBoundingBox,w=g,k=y.T,S=new Ve;we(S,1,k.Z),we(S,2,k.$),we(S,3,k.height),we(S,4,k.width),we(S,5,k.rotation),we(S,6,k.X);var I=k=new ne;oe(I,1,ge(S,1)),oe(I,2,ge(S,2)),oe(I,3,ge(S,3)),oe(I,4,ge(S,4)),oe(I,5,ge(S,5));var T=ge(S,6);if(null!=T&&null!=T){q(I.g,48);var C=I.g,E=T;T=0>E;var N=(E=Math.abs(E))>>>0;for(E=Math.floor((E-N)/4294967296),E>>>=0,T&&(E=~E>>>0,4294967295<(N=1+(~N>>>0))&&(N=0,4294967295<++E&&(E=0))),T=U=N,N=E;0<N||127<T;)C.push(127&T|128),T=(T>>>7|N<<25)>>>0,N>>>=7;C.push(T)}if(Ee(S,I),k=re(k),x.call(v,w,k),y.O)for(v=0;v<y.O.length;++v)I=!!(S=y.O[v]).visibility,w=(x=f.data).addNormalizedLandmark,k=g,S=Object.assign(Object.assign({},S),{visibility:I?S.visibility:0}),we(I=new Pe,1,S.x),we(I,2,S.y),we(I,3,S.z),S.visibility&&we(I,4,S.visibility),oe(C=S=new ne,1,ge(I,1)),oe(C,2,ge(I,2)),oe(C,3,ge(I,3)),oe(C,4,ge(I,4)),oe(C,5,ge(I,5)),Ee(I,C),S=re(S),w.call(x,k,S);if(y.M)for(v=0;v<y.M.length;++v){if(w=(x=f.data).addClassification,k=g,S=y.M[v],we(I=new Fe,2,S.Y),S.index&&we(I,1,S.index),S.label&&we(I,3,S.label),S.displayName&&we(I,4,S.displayName),C=S=new ne,null!=(N=ge(I,1))&&null!=N)if(q(C.g,8),T=C.g,0<=N)q(T,N);else{for(E=0;9>E;E++)T.push(127&N|128),N>>=7;T.push(1)}oe(C,2,ge(I,2)),null!=(T=ge(I,3))&&(T=O(T),q(C.g,26),q(C.g,T.length),ae(C,C.g.end()),ae(C,T)),null!=(T=ge(I,4))&&(T=O(T),q(C.g,34),q(C.g,T.length),ae(C,C.g.end()),ae(C,T)),Ee(I,C),S=re(S),w.call(x,k,S)}}f=f.data;break e;default:f={}}}switch(u=f,h=l.stream,l.type){case"video":r.pushTexture2d(Object.assign(Object.assign({},u),{stream:h,timestamp:a}));break;case"detections":(d=u).stream=h,d.timestamp=a,r.pushDetectionList(d);break;default:throw Error("Unknown input config type: '"+l.type+"'")}}return p.i.send(r),b(n,p.C,4);case 4:r.delete(),n.g=0}}))}))},e.onResults=function(e,t){this.listeners[t||"$"]=e},C("Solution",nt),C("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});var ct={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(e){return e.map(it)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(e){return e.map((function(e){return Se(We(e),Pe).map(Xe)}))}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},lt=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],ut=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],ht=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],dt=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],pt=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],ft=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],mt=[].concat(c(lt),c(ut),c(ht),c(dt),c(pt),c(ft));function gt(e){e=e||{},e=Object.assign(Object.assign({},ct),e),this.g=new nt(e)}(e=gt.prototype).close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(e){this.g.onResults(e)},e.initialize=function(){return Oe(this,(function e(){var t=this;return S(e,(function(e){return b(e,t.g.initialize(),0)}))}))},e.reset=function(){this.g.reset()},e.send=function(e){return Oe(this,(function t(){var n=this;return S(t,(function(t){return b(t,n.g.send(e),0)}))}))},e.setOptions=function(e){this.g.setOptions(e)},C("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),C("FaceMesh",gt),C("FACEMESH_LIPS",lt),C("FACEMESH_LEFT_EYE",ut),C("FACEMESH_LEFT_EYEBROW",ht),C("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),C("FACEMESH_RIGHT_EYE",dt),C("FACEMESH_RIGHT_EYEBROW",pt),C("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),C("FACEMESH_FACE_OVAL",ft),C("FACEMESH_CONTOURS",mt),C("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),C("matrixDataToMatrix",(function(e){for(var t=e.getCols(),n=e.getRows(),a=e.getPackedDataList(),r=[],o=0;o<n;o++)r.push(Array(t));for(o=0;o<n;o++)for(var s=0;s<t;s++){var i=1===e.getLayout()?o*t+s:s*n+o;r[o][s]=a[i]}return r})),C("VERSION","0.4.1633559619")}).call(this)},839:(e,t,n)=>{"use strict";n.d(t,{JZ:()=>ee});var a=n(7087),r=n(1012),o=(n(1585),function(){return o=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)});function s(e,t,n,a){return new(n||(n=Promise))((function(r,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function i(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}c((a=a.apply(e,t||[])).next())}))}function i(e,t){var n,a,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,a=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}function c(e){var t=e.map((function(e){return e[0]}));return t.push(e[e.length-1][1]),t}var l={lips:c([[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]]),leftEye:c([[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]]),leftEyebrow:c([[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]]),leftIris:c([[474,475],[475,476],[476,477],[477,474]]),rightEye:c([[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]]),rightEyebrow:c([[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]]),rightIris:c([[469,470],[470,471],[471,472],[472,469]]),faceOval:c([[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]])},u=[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]],h=Object.entries(l).map((function(e){var t=e[0];return e[1].map((function(e){return[e,t]}))})).flat(),d=new Map(h);function p(e){for(var t={locationData:{relativeKeypoints:[]}},n=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,s=0;s<e.length;++s){var i=e[s];n=Math.min(n,i.x),a=Math.max(a,i.x),r=Math.min(r,i.y),o=Math.max(o,i.y),t.locationData.relativeKeypoints.push({x:i.x,y:i.y})}return t.locationData.relativeBoundingBox={xMin:n,yMin:r,xMax:a,yMax:o,width:a-n,height:o-r},t}!function(){function e(e){var t=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceMeshSolution=new a.FaceMesh({locateFile:function(t,n){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+t:n+"/"+t}}),this.faceMeshSolution.setOptions({refineLandmarks:e.refineLandmarks,selfieMode:this.selfieMode,maxNumFaces:e.maxFaces}),this.faceMeshSolution.onResults((function(e){if(t.height=e.image.height,t.width=e.image.width,t.faces=[],null!==e.multiFaceLandmarks)for(var n=e.multiFaceLandmarks,a=0;a<n.length;a++){var r=t.translateOutput(n[a]);t.faces.push({keypoints:r,box:p(r).locationData.relativeBoundingBox})}}))}e.prototype.translateOutput=function(e){var t=this;return e.map((function(e,n){var a={x:e.x*t.width,y:e.y*t.height,z:e.z*t.width},r=d.get(n);return null!=r&&(a.name=r),a}))},e.prototype.estimateFaces=function(e,t){return s(this,void 0,void 0,(function(){var n,a;return i(this,(function(o){switch(o.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.faceMeshSolution.setOptions({selfieMode:this.selfieMode})),e instanceof r.qYS?(a=ImageData.bind,[4,r.TaL.toPixels(e)]):[3,2];case 1:return n=new(a.apply(ImageData,[void 0,o.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:n=e,o.label=3;case 3:return e=n,[4,this.faceMeshSolution.send({image:e})];case 4:return o.sent(),[2,this.faces]}}))}))},e.prototype.dispose=function(){this.faceMeshSolution.close()},e.prototype.reset=function(){this.faceMeshSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},e.prototype.initialize=function(){return this.faceMeshSolution.initialize()}}();var f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{},m={};(function(){var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},a=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof f&&f];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,t){if(t)e:{var r=a;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in r))break e;r=r[s]}(t=t(o=r[e=e[e.length-1]]))!=o&&null!=t&&n(r,e,{configurable:!0,writable:!0,value:t})}}function o(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function s(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function i(e){if(!(e instanceof Array)){e=s(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}r("Symbol",(function(e){function t(e,t){this.g=e,n(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var a="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(n){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(a+(n||"")+"_"+r++,n)}})),r("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var r="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),s=0;s<r.length;s++){var i=a[r[s]];"function"==typeof i&&"function"!=typeof i.prototype[e]&&n(i.prototype,e,{configurable:!0,writable:!0,value:function(){return o(t(this))}})}return e}));var c,l="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var u;e:{var h={};try{h.__proto__={a:!0},u=h.a;break e}catch(e){}u=!1}c=u?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var d=c;function p(e,t){if(e.prototype=l(t.prototype),e.prototype.constructor=e,d)d(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var a=Object.getOwnPropertyDescriptor(t,n);a&&Object.defineProperty(e,n,a)}else e[n]=t[n];e.na=t.prototype}function m(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function g(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function y(e,t){e.j={da:t,ea:!0},e.g=e.o||e.u}function b(e,t,n){return e.g=n,{value:t}}function v(e){this.g=new m,this.h=e}function x(e,t,n,a){try{var r=t.call(e.g.i,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.l=!1,r;var o=r.value}catch(t){return e.g.i=null,y(e.g,t),w(e)}return e.g.i=null,a.call(e.g,o),w(e)}function w(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,y(e.g,t)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.ea)throw t.da;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function k(e){this.next=function(t){return g(e.g),e.g.i?t=x(e,e.g.i.next,t,e.g.s):(e.g.s(t),t=w(e)),t},this.throw=function(t){return g(e.g),e.g.i?t=x(e,e.g.i.throw,t,e.g.s):(y(e.g,t),t=w(e)),t},this.return=function(t){return function(e,t){g(e.g);var n=e.g.i;return n?x(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),w(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function S(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(a,r){!function e(o){o.done?a(o.value):Promise.resolve(o.value).then(t,n).then(e,r)}(e.next())}))}(new k(new v(e)))}m.prototype.s=function(e){this.h=e},m.prototype.return=function(e){this.j={return:e},this.g=this.u},r("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.s=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var o=a.setTimeout;n.prototype.i=function(e){o(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(a){n||(n=!0,e.call(t,a))}}var t=this,n=!1;return{resolve:e(this.D),reject:e(this.l)}},t.prototype.D=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.A(e):this.o(e)}},t.prototype.A=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.I(t,e):this.o(e)},t.prototype.l=function(e){this.u(2,e)},t.prototype.o=function(e){this.u(1,e)},t.prototype.u=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.B()},t.prototype.G=function(){var e=this;o((function(){if(e.C()){var t=a.console;void 0!==t&&t.error(e.i)}}),1)},t.prototype.C=function(){if(this.s)return!1;var e=a.CustomEvent,t=a.Event,n=a.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=a.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.B=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)i.h(this.g[e]);this.g=null}};var i=new n;return t.prototype.H=function(e){var t=this.j();e.M(t.resolve,t.reject)},t.prototype.I=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function a(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){o(e)}}:t}var r,o,s=new t((function(e,t){r=e,o=t}));return this.M(a(e,r),a(n,o)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.M=function(e,t){function n(){switch(a.h){case 1:e(a.i);break;case 2:t(a.i);break;default:throw Error("Unexpected state: "+a.h)}}var a=this;null==this.g?i.h(n):this.g.push(n),this.s=!0},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var a=s(e),o=a.next();!o.done;o=a.next())r(o.value).M(t,n)}))},t.all=function(e){var n=s(e),a=n.next();return a.done?r([]):new t((function(e,t){function o(t){return function(n){s[t]=n,0==--i&&e(s)}}var s=[],i=0;do{s.push(void 0),i++,r(a.value).M(o(s.length-1),t),a=n.next()}while(!a.done)}))},t}));var I="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var a=arguments[n];if(a)for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};r("Object.assign",(function(e){return e||I})),r("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),r("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var a=n.length;for(0>(t=t||0)&&(t=Math.max(t+a,0));t<a;t++){var r=n[t];if(r===e||Object.is(r,e))return!0}return!1}})),r("String.prototype.includes",(function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}})),r("Array.prototype.keys",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,a=!1,r={next:function(){if(!a&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return a=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e){return e}))}}));var T=this||self;function C(e,t){e=e.split(".");var n,a=T;e[0]in a||void 0===a.execScript||a.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?a=a[n]&&a[n]!==Object.prototype[n]?a[n]:a[n]={}:a[n]=t}function E(){throw Error("Invalid UTF8")}function N(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var R,A,_="undefined"!=typeof TextDecoder,O="undefined"!=typeof TextEncoder,F={},D=null;function L(e){var t;void 0===t&&(t=0),P(),t=F[t];for(var n=Array(Math.floor(e.length/3)),a=t[64]||"",r=0,o=0;r<e.length-2;r+=3){var s=e[r],i=e[r+1],c=e[r+2],l=t[s>>2];s=t[(3&s)<<4|i>>4],i=t[(15&i)<<2|c>>6],c=t[63&c],n[o++]=l+s+i+c}switch(l=0,c=a,e.length-r){case 2:c=t[(15&(l=e[r+1]))<<2]||a;case 1:e=e[r],n[o]=t[e>>2]+t[(3&e)<<4|l>>4]+c+a}return n.join("")}function M(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var a=new Uint8Array(n),r=0;return function(e,t){function n(t){for(;a<e.length;){var n=e.charAt(a++),r=D[n];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}P();for(var a=0;;){var r=n(-1),o=n(0),s=n(64),i=n(64);if(64===i&&-1===r)break;t(r<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=i&&t(s<<6&192|i))}}(e,(function(e){a[r++]=e})),r!==n?a.subarray(0,r):a}function P(){if(!D){D={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var a=e.concat(t[n].split(""));F[n]=a;for(var r=0;r<a.length;r++){var o=a[r];void 0===D[o]&&(D[o]=r)}}}}var z,B="function"==typeof Uint8Array;function W(e){return B&&null!=e&&e instanceof Uint8Array}function U(e){if(this.L=e,null!==e&&0===e.length)throw Error("ByteString should be constructed with non-empty values")}var V="function"==typeof Uint8Array.prototype.slice,G=0;function j(e,t){return Error("Invalid wire type: "+e+" (at position "+t+")")}function H(){return Error("Failed to read varint, encoding is invalid.")}function K(e,t){t=void 0!==(t=void 0===t?{}:t).v&&t.v,this.h=null,this.g=this.i=this.j=0,this.v=t,e&&q(this,e)}function q(e,t){e.h=function(e,t){if(e.constructor===Uint8Array)return e;if(e.constructor===ArrayBuffer)return new Uint8Array(e);if(e.constructor===Array)return new Uint8Array(e);if(e.constructor===String)return M(e);if(e.constructor===U)return!t&&(t=e.L)&&t.constructor===Uint8Array?t:(t=null==(t=e.L)||W(t)?t:"string"==typeof t?M(t):null,(e=e.L=t)?new Uint8Array(e):z||(z=new Uint8Array(0)));if(e instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(t,e.v),e.j=0,e.i=e.h.length,e.g=e.j}function Y(e){if(e.g>e.i)throw Error("Tried to read past the end of the data "+e.g+" > "+e.i)}function X(e){var t=e.h,n=t[e.g],a=127&n;if(128>n)return e.g+=1,Y(e),a;if(a|=(127&(n=t[e.g+1]))<<7,128>n)return e.g+=2,Y(e),a;if(a|=(127&(n=t[e.g+2]))<<14,128>n)return e.g+=3,Y(e),a;if(a|=(127&(n=t[e.g+3]))<<21,128>n)return e.g+=4,Y(e),a;if(n=t[e.g+4],e.g+=5,a|=(15&n)<<28,128>n)return Y(e),a;if(128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++])throw H();return Y(e),a}K.prototype.reset=function(){this.g=this.j};var Z=[];function Q(){this.g=[]}function J(e,t){for(;127<t;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function $(e){var t={},n=void 0!==t.W&&t.W;this.l={v:void 0!==t.v&&t.v},this.W=n,t=this.l,Z.length?(n=Z.pop(),t&&(n.v=t.v),e&&q(n,e),e=n):e=new K(e,t),this.g=e,this.j=this.g.g,this.h=this.i=-1}function ee(e){var t=e.g;if(t.g==t.i)return!1;e.j=e.g.g;var n=X(e.g)>>>0;if(t=n>>>3,!(0<=(n&=7)&&5>=n))throw j(n,e.j);if(1>t)throw Error("Invalid field number: "+t+" (at position "+e.j+")");return e.i=t,e.h=n,!0}function te(e){switch(e.h){case 0:if(0!=e.h)te(e);else e:{for(var t=(e=e.g).g,n=t+10;t<n;)if(0==(128&e.h[t++])){e.g=t,Y(e);break e}throw H()}break;case 1:(e=e.g).g+=8,Y(e);break;case 2:2!=e.h?te(e):(t=X(e.g)>>>0,(e=e.g).g+=t,Y(e));break;case 5:(e=e.g).g+=4,Y(e);break;case 3:for(t=e.i;;){if(!ee(e))throw Error("Unmatched start-group tag: stream EOF");if(4==e.h){if(e.i!=t)throw Error("Unmatched end-group tag");break}te(e)}break;default:throw j(e.h,e.j)}}Q.prototype.length=function(){return this.g.length},Q.prototype.end=function(){var e=this.g;return this.g=[],e},$.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};var ne=[];function ae(){this.i=[],this.h=0,this.g=new Q}function re(e,t){0!==t.length&&(e.i.push(t),e.h+=t.length)}var oe="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol(void 0):void 0;function se(e,t){Object.isFrozen(e)||(oe?e[oe]|=t:void 0!==e.N?e.N|=t:Object.defineProperties(e,{N:{value:t,configurable:!0,writable:!0,enumerable:!1}}))}function ie(e){var t;return null==(t=oe?e[oe]:e.N)?0:t}function ce(e){return se(e,1),e}function le(e){return!!Array.isArray(e)&&!!(2&ie(e))}function ue(e){if(!Array.isArray(e))throw Error("cannot mark non-array as immutable");se(e,2)}function he(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)&&e.constructor===Object}var de=Object.freeze(ce([]));function pe(e){if(le(e.m))throw Error("Cannot mutate an immutable Message")}var fe,me="undefined"!=typeof Symbol&&void 0!==Symbol.hasInstance;function ge(e){return{value:e,configurable:!1,writable:!1,enumerable:!1}}function ye(e,t,n){return-1===t?null:t>=e.i?e.g?e.g[t]:void 0:void 0!==n&&n&&e.g&&null!=(n=e.g[t])?n:e.m[t+e.h]}function be(e,t,n,a){a=void 0!==a&&a,pe(e),t<e.i&&!a?e.m[t+e.h]=n:(e.g||(e.g=e.m[e.i+e.h]={}))[t]=n}function ve(e,t,n,a){n=void 0===n||n;var r=ye(e,t,a=void 0!==a&&a);return null==r&&(r=de),le(e.m)?n&&(ue(r),Object.freeze(r)):(r===de||le(r))&&be(e,t,r=ce(r.slice()),a),r}function xe(e,t,n){return null==(e=null==(e=ye(e,t))?e:+e)?void 0===n?0:n:e}function we(e,t,n,a){e.j||(e.j={});var r=le(e.m),o=e.j[n];if(!o){a=ve(e,n,!0,void 0!==a&&a),o=[],r=r||le(a);for(var s=0;s<a.length;s++)o[s]=new t(a[s]),r&&ue(o[s].m);r&&(ue(o),Object.freeze(o)),e.j[n]=o}return o}function ke(e,t,n,a,r){var o=void 0!==o&&o;return pe(e),o=we(e,n,t,o),n=a||new n,e=ve(e,t),null!=r?(o.splice(r,0,n),e.splice(r,0,n.m)):(o.push(n),e.push(n.m)),n}function Se(e,t){return null==(e=ye(e,t))?0:e}function Ie(e,t){return null==(e=ye(e,t))?"":e}function Te(e){return Ee(e,void 0===Ne?Re:Ne)}function Ce(e,t){if(null!=e){if(Array.isArray(e))e=Ee(e,t);else if(he(e)){var n,a={};for(n in e)a[n]=Ce(e[n],t);e=a}else e=t(e);return e}}function Ee(e,t){for(var n=e.slice(),a=0;a<n.length;a++)n[a]=Ce(n[a],t);return Array.isArray(e)&&1&ie(e)&&ce(n),n}function Ne(e){return e&&"object"==typeof e&&e.toJSON?e.toJSON():(e=function(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"object":if(e&&!Array.isArray(e)){if(W(e))return L(e);if(e instanceof U){var t=e.L;return t=null==t||"string"==typeof t?t:B&&t instanceof Uint8Array?L(t):null,(e.L=t)||""}}}return e}(e),Array.isArray(e)?Te(e):e)}function Re(e){return W(e)?new Uint8Array(e):e}function Ae(e,t,n){e||(e=fe),fe=null;var a=this.constructor.h;if(e||(e=a?[a]:[]),this.h=(a?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=e,e=(a=this.m.length)-1,a&&he(a=this.m[e])?(this.i=e-this.h,this.g=a):void 0!==t&&-1<t?(this.i=Math.max(t,e+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE,n)for(t=0;t<n.length;t++)if((e=n[t])<this.i)e+=this.h,(a=this.m[e])?Array.isArray(a)&&ce(a):this.m[e]=de;else{var r=(a=this.g||(this.g=this.m[this.i+this.h]={}))[e];r?Array.isArray(r)&&ce(r):a[e]=de}}function _e(){Ae.apply(this,arguments)}if(Ae.prototype.toJSON=function(){return Te(this.m)},Ae.prototype.toString=function(){return this.m.toString()},p(_e,Ae),me){var Oe={};Object.defineProperties(_e,(Oe[Symbol.hasInstance]=ge((function(){throw Error("Cannot perform instanceof checks for MutableMessage")})),Oe))}function Fe(e,t,n){if(n){var a,r={};for(a in n){var o=n[a],s=o.ha;s||(r.F=o.la||o.fa.P,o.aa?(r.U=We(o.aa),s=function(e){return function(t,n,a){return e.F(t,n,a,e.U)}}(r)):o.ca?(r.T=Ue(o.X.g,o.ca),s=function(e){return function(t,n,a){return e.F(t,n,a,e.T)}}(r)):s=r.F,o.ha=s),s(t,e,o.X),r={F:r.F,U:r.U,T:r.T}}}!function(e,t){if(t=t.ba){re(e,e.g.end());for(var n=0;n<t.length;n++)re(e,t[n])}}(t,e)}var De=Symbol();function Le(e,t,n){return e[De]||(e[De]=function(e,a){return t(e,a,n)})}function Me(e){var t=e[De];if(!t){var n=$e(e);t=function(e,t){return et(e,t,n)},e[De]=t}return t}function Pe(e){var t=function(e){var t=e.aa;return t?Me(t):(t=e.ka)?Le(e.X.g,t,e.ca):void 0}(e),n=e.X,a=e.fa.O;return t?function(e,r){return a(e,r,n,t)}:function(e,t){return a(e,t,n)}}function ze(e,t,n,a,r,o){var s=0;for((e=e()).length&&"number"!=typeof e[0]&&(n(t,e[0]),s++);s<e.length;){n=e[s++];for(var i=s+1;i<e.length&&"number"!=typeof e[i];)i++;var c=e[s++];switch(i-=s){case 0:a(t,n,c);break;case 1:a(t,n,c,e[s++]);break;case 2:r(t,n,c,e[s++],e[s++]);break;case 3:i=e[s++];var l=e[s++],u=e[s++];Array.isArray(u)?r(t,n,c,i,l,u):o(t,n,c,i,l,u);break;case 4:o(t,n,c,e[s++],e[s++],e[s++],e[s++]);break;default:throw Error("unexpected number of binary field arguments: "+i)}}return t}var Be=Symbol();function We(e){var t=e[Be];if(!t){var n=qe(e);t=function(e,t){return nt(e,t,n)},e[Be]=t}return t}function Ue(e,t){var n=e[Be];return n||(n=function(e,n){return Fe(e,n,t)},e[Be]=n),n}var Ve=Symbol();function Ge(e,t){e.push(t)}function je(e,t,n){e.push(t,n.P)}function He(e,t,n,a,r){var o=We(r),s=n.P;e.push(t,(function(e,t,n){return s(e,t,n,a,o)}))}function Ke(e,t,n,a,r,o){var s=Ue(a,o),i=n.P;e.push(t,(function(e,t,n){return i(e,t,n,a,s)}))}function qe(e){return e[Ve]||ze(e,e[Ve]=[],Ge,je,He,Ke)}var Ye=Symbol();function Xe(e,t){e[0]=t}function Ze(e,t,n,a){var r=n.O;e[t]=a?function(e,t,n){return r(e,t,n,a)}:r}function Qe(e,t,n,a,r,o){var s=n.O,i=Me(r);e[t]=function(e,t,n){return s(e,t,n,a,i,o)}}function Je(e,t,n,a,r,o,s){var i=n.O,c=Le(a,r,o);e[t]=function(e,t,n){return i(e,t,n,a,c,s)}}function $e(e){return e[Ye]||ze(e,e[Ye]={},Xe,Ze,Qe,Je)}function et(e,t,n){for(;ee(t)&&4!=t.h;){var a=t.i,r=n[a];if(!r){var o=n[0];o&&(o=o[a])&&(r=n[a]=Pe(o))}if(!(r&&r(t,e,a)||(r=t,a=e,o=r.j,te(r),r.W))){var s=r.g.h;r=o===(r=r.g.g)?z||(z=new Uint8Array(0)):V?s.slice(o,r):new Uint8Array(s.subarray(o,r)),(o=a.ba)?o.push(r):a.ba=[r]}}return e}function tt(e,t,n){if(ne.length){var a=ne.pop();e&&(q(a.g,e),a.i=-1,a.h=-1),e=a}else e=new $(e);try{return et(new t,e,$e(n))}finally{(t=e.g).h=null,t.j=0,t.i=0,t.g=0,t.v=!1,e.i=-1,e.h=-1,100>ne.length&&ne.push(e)}}function nt(e,t,n){for(var a=n.length,r=1==a%2,o=r?1:0;o<a;o+=2)(0,n[o+1])(t,e,n[o]);Fe(e,t,r?n[0]:void 0)}function at(e,t){var n=new ae;nt(e,n,qe(t)),re(n,n.g.end()),e=new Uint8Array(n.h);for(var a=(t=n.i).length,r=0,o=0;o<a;o++){var s=t[o];e.set(s,r),r+=s.length}return n.i=[e],e}function rt(e,t){return{O:e,P:t}}var ot=rt((function(e,t,n){if(5!==e.h)return!1;var a=(e=e.g).h[e.g],r=e.h[e.g+1],o=e.h[e.g+2],s=e.h[e.g+3];return e.g+=4,Y(e),e=2*((r=(a|r<<8|o<<16|s<<24)>>>0)>>31)+1,a=r>>>23&255,r&=8388607,be(t,n,255==a?r?NaN:1/0*e:0==a?e*Math.pow(2,-149)*r:e*Math.pow(2,a-150)*(r+Math.pow(2,23))),!0}),(function(e,t,n){if(null!=(t=ye(t,n))){J(e.g,8*n+5),e=e.g;var a=t;0===(a=(n=0>a?1:0)?-a:a)?G=0<1/a?0:2147483648:isNaN(a)?G=2147483647:34028234663852886e22<a?G=(n<<31|2139095040)>>>0:11754943508222875e-54>a?(a=Math.round(a/Math.pow(2,-149)),G=(n<<31|a)>>>0):(t=Math.floor(Math.log(a)/Math.LN2),a*=Math.pow(2,-t),16777216<=(a=Math.round(8388608*a))&&++t,G=(n<<31|t+127<<23|8388607&a)>>>0),n=G,e.g.push(n>>>0&255),e.g.push(n>>>8&255),e.g.push(n>>>16&255),e.g.push(n>>>24&255)}})),st=rt((function(e,t,n){if(0!==e.h)return!1;for(var a=e.g,r=128,o=0,s=e=0;4>s&&128<=r;s++)r=a.h[a.g++],Y(a),o|=(127&r)<<7*s;if(128<=r&&(r=a.h[a.g++],Y(a),o|=(127&r)<<28,e|=(127&r)>>4),128<=r)for(s=0;5>s&&128<=r;s++)r=a.h[a.g++],Y(a),e|=(127&r)<<7*s+3;if(!(128>r))throw H();return a=o>>>0,(e=2147483648&(r=e>>>0))&&(r=~r>>>0,0==(a=1+~a>>>0)&&(r=r+1>>>0)),a=4294967296*r+(a>>>0),be(t,n,e?-a:a),!0}),(function(e,t,n){if(null!=(t=ye(t,n))&&null!=t){J(e.g,8*n),e=e.g;var a=t;for(n=0>a,t=(a=Math.abs(a))>>>0,a=Math.floor((a-t)/4294967296),a>>>=0,n&&(a=~a>>>0,4294967295<(t=1+(~t>>>0))&&(t=0,4294967295<++a&&(a=0))),n=G=t,t=a;0<t||127<n;)e.g.push(127&n|128),n=(n>>>7|t<<25)>>>0,t>>>=7;e.g.push(n)}})),it=rt((function(e,t,n){return 0===e.h&&(be(t,n,X(e.g)),!0)}),(function(e,t,n){if(null!=(t=ye(t,n))&&null!=t)if(J(e.g,8*n),e=e.g,0<=(n=t))J(e,n);else{for(t=0;9>t;t++)e.g.push(127&n|128),n>>=7;e.g.push(1)}})),ct=rt((function(e,t,n){if(2!==e.h)return!1;var a,r=X(e.g)>>>0,o=(e=e.g).g;if(e.g+=r,Y(e),e=e.h,_)(a=R)||(a=R=new TextDecoder("utf-8",{fatal:!0})),a=a.decode(e.subarray(o,o+r));else{r=o+r;for(var s,i,c,l=[],u=null;o<r;)128>(s=e[o++])?l.push(s):224>s?o>=r?E():(i=e[o++],194>s||128!=(192&i)?(o--,E()):l.push((31&s)<<6|63&i)):240>s?o>=r-1?E():128!=(192&(i=e[o++]))||224===s&&160>i||237===s&&160<=i||128!=(192&(a=e[o++]))?(o--,E()):l.push((15&s)<<12|(63&i)<<6|63&a):244>=s?o>=r-2?E():128!=(192&(i=e[o++]))||0!=i-144+(s<<28)>>30||128!=(192&(a=e[o++]))||128!=(192&(c=e[o++]))?(o--,E()):(s=(7&s)<<18|(63&i)<<12|(63&a)<<6|63&c,s-=65536,l.push(55296+(s>>10&1023),56320+(1023&s))):E(),8192<=l.length&&(u=N(u,l),l.length=0);a=N(u,l)}return be(t,n,a),!0}),(function(e,t,n){if(null!=(t=ye(t,n))){var a=!1;if(a=void 0!==a&&a,O){if(a&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(t))throw Error("Found an unpaired surrogate");t=(A||(A=new TextEncoder)).encode(t)}else{for(var r=0,o=new Uint8Array(3*t.length),s=0;s<t.length;s++){var i=t.charCodeAt(s);if(128>i)o[r++]=i;else{if(2048>i)o[r++]=i>>6|192;else{if(55296<=i&&57343>=i){if(56319>=i&&s<t.length){var c=t.charCodeAt(++s);if(56320<=c&&57343>=c){i=1024*(i-55296)+c-56320+65536,o[r++]=i>>18|240,o[r++]=i>>12&63|128,o[r++]=i>>6&63|128,o[r++]=63&i|128;continue}s--}if(a)throw Error("Found an unpaired surrogate");i=65533}o[r++]=i>>12|224,o[r++]=i>>6&63|128}o[r++]=63&i|128}}t=o.subarray(0,r)}J(e.g,8*n+2),J(e.g,t.length),re(e,e.g.end()),re(e,t)}})),lt=rt((function(e,t,n,a,r){if(2!==e.h)return!1;t=ke(t,n,a),n=e.g.i,a=X(e.g)>>>0;var o=e.g.g+a,s=o-n;if(0>=s&&(e.g.i=o,r(t,e),s=o-e.g.g),s)throw Error("Message parsing ended unexpectedly. Expected to read "+a+" bytes, instead read "+(a-s)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.g.g=o,e.g.i=n,!0}),(function(e,t,n,a,r){if(null!=(t=we(t,a,n)))for(a=0;a<t.length;a++){var o=e;J(o.g,8*n+2);var s=o.g.end();re(o,s),s.push(o.h),o=s,r(t[a],e),s=e;var i=o.pop();for(i=s.h+s.g.length()-i;127<i;)o.push(127&i|128),i>>>=7,s.h++;o.push(i),s.h++}}));function ut(){_e.apply(this,arguments)}if(p(ut,_e),me){var ht={};Object.defineProperties(ut,(ht[Symbol.hasInstance]=ge(Object[Symbol.hasInstance]),ht))}function dt(e){ut.call(this,e)}function pt(){return[1,it,2,ot,3,ct,4,ct]}function ft(e){ut.call(this,e,-1,gt)}function mt(){return[1,lt,dt,pt]}p(dt,ut),p(ft,ut),ft.prototype.addClassification=function(e,t){return ke(this,1,dt,e,t),this};var gt=[1];function yt(e){ut.call(this,e)}function bt(){return[1,ot,2,ot,3,ot,4,ot,5,ot]}function vt(e){ut.call(this,e,-1,wt)}function xt(){return[1,lt,yt,bt]}p(yt,ut),p(vt,ut);var wt=[1];function kt(e){ut.call(this,e)}function St(){return[1,ot,2,ot,3,ot,4,ot,5,ot,6,st]}p(kt,ut);var It=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Tt=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Ct=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Et=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Nt=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],Rt=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],At=[].concat(i(It),i(Tt),i(Ct),i(Et),i(Nt),i(Rt));function _t(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function Ot(e){return we(e,dt,1).map((function(e){return{index:Se(e,1),ga:xe(e,2),label:null!=ye(e,3)?Ie(e,3):void 0,displayName:null!=ye(e,4)?Ie(e,4):void 0}}))}function Ft(e){return{x:xe(e,1),y:xe(e,2),z:xe(e,3),visibility:null!=ye(e,4)?xe(e,4):void 0}}function Dt(e,t){this.h=e,this.g=t,this.l=0}function Lt(e,t,n){return function(e,t){var n=e.g;if(void 0===e.o){var a=_t(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),r=_t(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=n.createProgram();if(n.attachShader(o,a),n.attachShader(o,r),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(o));a=e.o=o,n.useProgram(a),r=n.getUniformLocation(a,"sampler0"),e.j={K:n.getAttribLocation(a,"aVertex"),J:n.getAttribLocation(a,"aTex"),ma:r},e.u=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.u),n.enableVertexAttribArray(e.j.K),n.vertexAttribPointer(e.j.K,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.enableVertexAttribArray(e.j.J),n.vertexAttribPointer(e.j.J,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(r,0)}a=e.j,n.useProgram(e.o),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.h.bindTexture2d(t.glName),n.enableVertexAttribArray(a.K),n.bindBuffer(n.ARRAY_BUFFER,e.u),n.vertexAttribPointer(a.K,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(a.J),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.vertexAttribPointer(a.J,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(a.K),n.disableVertexAttribArray(a.J),n.bindBuffer(n.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"==typeof e.g.canvas.transferToImageBitmap?Promise.resolve(e.g.canvas.transferToImageBitmap()):n?Promise.resolve(e.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise((function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)})))}function Mt(e){this.g=e}var Pt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function zt(e,t){return t+e}function Bt(e,t){window[e]=t}function Wt(e){if(this.g=e,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=e&&e.locateFile||zt,"object"==typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.$=t,e.options)for(var n=(t=s(Object.keys(e.options))).next();!n.done;n=t.next()){n=n.value;var a=e.options[n].default;void 0!==a&&(this.j[n]="function"==typeof a?a():a)}}function Ut(e,t){var n,a;return S((function(r){return t in e.H?r.return(e.H[t]):(n=e.locateFile(t,""),a=fetch(n).then((function(e){return e.arrayBuffer()})),e.H[t]=a,r.return(a))}))}function Vt(e,t,n){var a,r,o,i,c,l,u,h,d,p,f,m,g,y;return S((function(v){switch(v.g){case 1:if(!n)return v.return(t);for(a={},r=0,o=s(Object.keys(n)),i=o.next();!i.done;i=o.next())c=i.value,"string"!=typeof(l=n[c])&&"texture"===l.type&&void 0!==t[l.stream]&&++r;1<r&&(e.I=!1),u=s(Object.keys(n)),i=u.next();case 2:if(i.done){v.g=4;break}if(h=i.value,"string"==typeof(d=n[h]))return g=a,y=h,b(v,function(e,t,n){var a;return S((function(r){return"number"==typeof n||n instanceof Uint8Array||n instanceof e.h.Uint8BlobList?r.return(n):n instanceof e.h.Texture2dDataOut?((a=e.u[t])||(a=new Dt(e.h,e.G),e.u[t]=a),r.return(Lt(a,n,e.I))):r.return(void 0)}))}(e,h,t[d]),14);if(p=t[d.stream],"detection_list"===d.type){if(p){for(var x=p.getRectList(),w=p.getLandmarksList(),k=p.getClassificationsList(),I=[],T=0;T<x.size();++T){var C=tt(x.get(T),kt,St);C={boundingBox:{xCenter:xe(C,1),yCenter:xe(C,2),height:xe(C,3),width:xe(C,4),rotation:xe(C,5,0),rectId:Se(C,6)},landmarks:we(tt(w.get(T),vt,xt),yt,1).map(Ft),V:Ot(tt(k.get(T),ft,mt))},I.push(C)}x=I}else x=[];a[h]=x,v.g=7;break}if("proto_list"===d.type){if(p){for(x=Array(p.size()),w=0;w<p.size();w++)x[w]=p.get(w);p.delete()}else x=[];a[h]=x,v.g=7;break}if(void 0===p){v.g=3;break}if("float_list"===d.type){a[h]=p,v.g=7;break}if("proto"===d.type){a[h]=p,v.g=7;break}if("texture"!==d.type)throw Error("Unknown output config type: '"+d.type+"'");return(f=e.u[h])||(f=new Dt(e.h,e.G),e.u[h]=f),b(v,Lt(f,p,e.I),13);case 13:m=v.h,a[h]=m;case 7:d.transform&&a[h]&&(a[h]=d.transform(a[h])),v.g=3;break;case 14:g[y]=v.h;case 3:i=u.next(),v.g=2;break;case 4:return v.return(a)}}))}function Gt(e,t){for(var n=t.name||"$",a=[].concat(i(t.wants)),r=new e.h.StringList,o=s(t.wants),c=o.next();!c.done;c=o.next())r.push_back(c.value);o=e.h.PacketListener.implement({onResults:function(r){for(var o={},s=0;s<t.wants.length;++s)o[a[s]]=r.get(s);var i=e.listeners[n];i&&(e.D=Vt(e,o,t.outs).then((function(n){n=i(n);for(var r=0;r<t.wants.length;++r){var s=o[a[r]];"object"==typeof s&&s.hasOwnProperty&&s.hasOwnProperty("delete")&&s.delete()}n&&(e.D=n)})))}}),e.i.attachMultiListener(r,o),r.delete()}function jt(e){var t=this;e=e||{};var n={url:"face_detection_short.binarypb"},a={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new Wt({locateFile:e.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:n,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"==typeof window&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(e){var r,o,i,c,l;return S((function(u){switch(u.g){case 1:r=s("short"===e?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"]),o=r.next();case 2:if(o.done){u.g=4;break}return i=o.value,c="third_party/mediapipe/modules/face_detection/"+i,b(u,Ut(t.g,i),5);case 5:l=u.h,t.g.overrideFile(c,l),o=r.next(),u.g=2;break;case 4:return n.url="short"===e?"face_detection_short.binarypb":"face_detection_full.binarypb",a.graphOptionXref.calculatorName="short"===e?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",u.return(!0)}}))}},minDetectionConfidence:a}})}(e=Wt.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){var e=this;return S((function(t){e.i&&(e.i.reset(),e.o={},e.u={}),t.g=0}))},e.setOptions=function(e,t){var n=this;if(t=t||this.g.options){for(var a=[],r=[],o={},i=s(Object.keys(e)),c=i.next();!c.done;o={R:o.R,S:o.S},c=i.next()){var l=c.value;l in this.j&&this.j[l]===e[l]||(this.j[l]=e[l],void 0!==(c=t[l])&&(c.onChange&&(o.R=c.onChange,o.S=e[l],a.push(function(e){return function(){return S((function(t){if(1==t.g)return b(t,e.R(e.S),2);!0===t.h&&(n.s=!0),t.g=0}))}}(o))),c.graphOptionXref&&(l={valueNumber:1===c.type?e[l]:0,valueBoolean:0===c.type&&e[l],valueString:2===c.type?e[l]:""},c=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),c.graphOptionXref),l),r.push(c))))}0===a.length&&0===r.length||(this.s=!0,this.B=(void 0===this.B?[]:this.B).concat(r),this.A=(void 0===this.A?[]:this.A).concat(a))}},e.initialize=function(){var e=this;return S((function(t){return 1==t.g?b(t,function(e){var t,n,a,r,o,s,c,l,u,h,d;return S((function(p){switch(p.g){case 1:return e.Z?(t=void 0===e.g.files?[]:"function"==typeof e.g.files?e.g.files(e.j):e.g.files,b(p,S((function(e){switch(e.g){case 1:return e.o=2,b(e,WebAssembly.instantiate(Pt),4);case 4:e.g=3,e.o=0;break;case 2:return e.o=0,e.j=null,e.return(!1);case 3:return e.return(!0)}})),2)):p.return();case 2:if(n=p.h,"object"==typeof window)return Bt("createMediapipeSolutionsWasm",{locateFile:e.locateFile}),Bt("createMediapipeSolutionsPackedAssets",{locateFile:e.locateFile}),s=t.filter((function(e){return void 0!==e.data})),c=t.filter((function(e){return void 0===e.data})),l=Promise.all(s.map((function(t){var n=Ut(e,t.url);if(void 0!==t.path){var a=t.path;n=n.then((function(t){return e.overrideFile(a,t),Promise.resolve(t)}))}return n}))),u=Promise.all(c.map((function(t){return void 0===t.simd||t.simd&&n||!t.simd&&!n?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise((function(e){t.addEventListener("load",(function(){e()}),!1),t.addEventListener("error",(function(){e()}),!1),document.body.appendChild(t)}))}(e.locateFile(t.url,e.$)):Promise.resolve()}))).then((function(){var t,n,a;return S((function(r){if(1==r.g)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,a=e,b(r,t(n),2);a.h=r.h,r.g=0}))})),h=S((function(t){return e.g.graph&&e.g.graph.url?t=b(t,Ut(e,e.g.graph.url),0):(t.g=0,t=void 0),t})),b(p,Promise.all([u,l,h]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return a=t.filter((function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n})).map((function(t){return e.locateFile(t.url,e.$)})),importScripts.apply(null,i(a)),r=e,b(p,createMediapipeSolutionsWasm(Module),6);case 6:r.h=p.h,e.l=new OffscreenCanvas(1,1),e.h.canvas=e.l,o=e.h.GL.createContext(e.l,{antialias:!1,alpha:!1,ja:"undefined"!=typeof WebGL2RenderingContext?2:1}),e.h.GL.makeContextCurrent(o),p.g=4;break;case 7:if(e.l=document.createElement("canvas"),!(d=e.l.getContext("webgl2",{}))&&!(d=e.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),p.return();e.G=d,e.h.canvas=e.l,e.h.createContext(e.l,!0,!0,{});case 4:e.i=new e.h.SolutionWasm,e.Z=!1,p.g=0}}))}(e),2):3!=t.g?b(t,function(e){var t,n,a,r,o,i,c,l;return S((function(u){if(1==u.g)return e.g.graph&&e.g.graph.url&&e.Y===e.g.graph.url?u.return():(e.s=!0,e.g.graph&&e.g.graph.url?(e.Y=e.g.graph.url,b(u,Ut(e,e.g.graph.url),3)):void(u.g=2));for(2!=u.g&&(t=u.h,e.i.loadGraph(t)),n=s(Object.keys(e.C)),a=n.next();!a.done;a=n.next())r=a.value,e.i.overrideFile(r,e.C[r]);if(e.C={},e.g.listeners)for(o=s(e.g.listeners),i=o.next();!i.done;i=o.next())c=i.value,Gt(e,c);l=e.j,e.j={},e.setOptions(l),u.g=0}))}(e),3):b(t,function(e){var t,n,a,r,o,i;return S((function(c){switch(c.g){case 1:if(!e.s)return c.return();if(!e.A){c.g=2;break}t=s(e.A),n=t.next();case 3:if(n.done){c.g=5;break}return b(c,(0,n.value)(),4);case 4:n=t.next(),c.g=3;break;case 5:e.A=void 0;case 2:if(e.B){for(a=new e.h.GraphOptionChangeRequestList,r=s(e.B),o=r.next();!o.done;o=r.next())i=o.value,a.push_back(i);e.i.changeOptions(a),a.delete(),e.B=void 0}e.s=!1,c.g=0}}))}(e),0)}))},e.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.C[e]=t},e.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},e.send=function(e,t){var n,a,r,o,i,c,l,u,h,d=this;return S((function(p){switch(p.g){case 1:return d.g.inputs?(n=1e3*(null==t?performance.now():t),b(p,d.D,2)):p.return();case 2:return b(p,d.initialize(),3);case 3:for(a=new d.h.PacketDataList,r=s(Object.keys(e)),o=r.next();!o.done;o=r.next())if(i=o.value,c=d.g.inputs[i]){e:{var f=e[i];switch(c.type){case"video":var m=d.o[c.stream];if(m||(m=new Dt(d.h,d.G),d.o[c.stream]=m),0===m.l&&(m.l=m.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&f instanceof HTMLVideoElement)var g=f.videoWidth,y=f.videoHeight;else"undefined"!=typeof HTMLImageElement&&f instanceof HTMLImageElement?(g=f.naturalWidth,y=f.naturalHeight):(g=f.width,y=f.height);y={glName:m.l,width:g,height:y},(g=m.g).canvas.width=y.width,g.canvas.height=y.height,g.activeTexture(g.TEXTURE0),m.h.bindTexture2d(m.l),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f),m.h.bindTexture2d(0),m=y;break e;case"detections":for((m=d.o[c.stream])||(m=new Mt(d.h),d.o[c.stream]=m),m.data||(m.data=new m.g.DetectionListData),m.data.reset(f.length),y=0;y<f.length;++y){g=f[y];var v=m.data,x=v.setBoundingBox,w=y,k=g.boundingBox,S=new kt;if(be(S,1,k.xCenter),be(S,2,k.yCenter),be(S,3,k.height),be(S,4,k.width),be(S,5,k.rotation),be(S,6,k.rectId),k=at(S,St),x.call(v,w,k),g.landmarks)for(v=0;v<g.landmarks.length;++v){var I=!!(S=g.landmarks[v]).visibility;w=(x=m.data).addNormalizedLandmark,k=y,S=Object.assign(Object.assign({},S),{visibility:I?S.visibility:0}),be(I=new yt,1,S.x),be(I,2,S.y),be(I,3,S.z),S.visibility&&be(I,4,S.visibility),S=at(I,bt),w.call(x,k,S)}if(g.V)for(v=0;v<g.V.length;++v)w=(x=m.data).addClassification,k=y,S=g.V[v],be(I=new dt,2,S.ga),S.index&&be(I,1,S.index),S.label&&be(I,3,S.label),S.displayName&&be(I,4,S.displayName),S=at(I,pt),w.call(x,k,S)}m=m.data;break e;default:m={}}}switch(l=m,u=c.stream,c.type){case"video":a.pushTexture2d(Object.assign(Object.assign({},l),{stream:u,timestamp:n}));break;case"detections":(h=l).stream=u,h.timestamp=n,a.pushDetectionList(h);break;default:throw Error("Unknown input config type: '"+c.type+"'")}}return d.i.send(a),b(p,d.D,4);case 4:a.delete(),p.g=0}}))},e.onResults=function(e,t){this.listeners[t||"$"]=e},C("Solution",Wt),C("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=jt.prototype).close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(e){this.g.onResults(e)},e.initialize=function(){var e=this;return S((function(t){return b(t,e.g.initialize(),0)}))},e.reset=function(){this.g.reset()},e.send=function(e){var t=this;return S((function(n){return b(n,t.g.send(e),0)}))},e.setOptions=function(e){this.g.setOptions(e)},C("FaceDetection",jt),C("FACEDETECTION_LIPS",It),C("FACEDETECTION_LEFT_EYE",Tt),C("FACEDETECTION_LEFT_EYEBROW",Ct),C("FACEDETECTION_RIGHT_EYE",Et),C("FACEDETECTION_RIGHT_EYEBROW",Nt),C("FACEDETECTION_FACE_OVAL",Rt),C("FACEDETECTION_CONTOURS",At),C("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),C("VERSION","0.4.1646425229")}).call(f);var g=function(){return g=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},g.apply(this,arguments)};function y(e,t,n,a){return new(n||(n=Promise))((function(r,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function i(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}c((a=a.apply(e,t||[])).next())}))}function b(e,t){var n,a,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,a=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}var v=["rightEye","leftEye","noseTip","mouthCenter","rightEarTragion","leftEarTragion"];!function(){function e(e){var t=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceDetectorSolution=new m.FaceDetection({locateFile:function(t,n){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+t:n+"/"+t}}),this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode,model:e.modelType}),this.faceDetectorSolution.onResults((function(e){if(t.height=e.image.height,t.width=e.image.width,t.faces=[],null!==e.detections)for(var n=0,a=e.detections;n<a.length;n++){var r=a[n];t.faces.push(t.normalizedToAbsolute(r.landmarks,{xMin:s=(o=r.boundingBox).xCenter-o.width/2,xMax:s+o.width,yMin:i=o.yCenter-o.height/2,yMax:i+o.height,width:o.width,height:o.height}))}var o,s,i}))}e.prototype.normalizedToAbsolute=function(e,t){var n=this;return{keypoints:e.map((function(e,t){return{x:e.x*n.width,y:e.y*n.height,name:v[t]}})),box:{xMin:t.xMin*this.width,yMin:t.yMin*this.height,xMax:t.xMax*this.width,yMax:t.yMax*this.height,width:t.width*this.width,height:t.height*this.height}}},e.prototype.estimateFaces=function(e,t){return y(this,void 0,void 0,(function(){var n,a;return b(this,(function(o){switch(o.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode})),e instanceof r.qYS?(a=ImageData.bind,[4,r.TaL.toPixels(e)]):[3,2];case 1:return n=new(a.apply(ImageData,[void 0,o.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:n=e,o.label=3;case 3:return e=n,[4,this.faceDetectorSolution.send({image:e})];case 4:return o.sent(),[2,this.faces]}}))}))},e.prototype.dispose=function(){this.faceDetectorSolution.close()},e.prototype.reset=function(){this.faceDetectorSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},e.prototype.initialize=function(){return this.faceDetectorSolution.initialize()}}();function x(e){return e instanceof r.qYS?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function w(e){return e instanceof r.qYS?e:r.TaL.fromPixels(e)}function k(e,t){r.ZSL.assert(0!==e.width,(function(){return t+" width cannot be 0."})),r.ZSL.assert(0!==e.height,(function(){return t+" height cannot be 0."}))}function S(e){null==e.reduceBoxesInLowestLayer&&(e.reduceBoxesInLowestLayer=!1),null==e.interpolatedScaleAspectRatio&&(e.interpolatedScaleAspectRatio=1),null==e.fixedAnchorSize&&(e.fixedAnchorSize=!1);for(var t=[],n=0;n<e.numLayers;){for(var a=[],r=[],o=[],s=[],i=n;i<e.strides.length&&e.strides[i]===e.strides[n];){var c=I(e.minScale,e.maxScale,i,e.strides.length);if(0===i&&e.reduceBoxesInLowestLayer)o.push(1),o.push(2),o.push(.5),s.push(.1),s.push(c),s.push(c);else{for(var l=0;l<e.aspectRatios.length;++l)o.push(e.aspectRatios[l]),s.push(c);if(e.interpolatedScaleAspectRatio>0){var u=i===e.strides.length-1?1:I(e.minScale,e.maxScale,i+1,e.strides.length);s.push(Math.sqrt(c*u)),o.push(e.interpolatedScaleAspectRatio)}}i++}for(var h=0;h<o.length;++h){var d=Math.sqrt(o[h]);a.push(s[h]/d),r.push(s[h]*d)}var p=0,f=0;if(e.featureMapHeight.length>0)p=e.featureMapHeight[n],f=e.featureMapWidth[n];else{var m=e.strides[n];p=Math.ceil(e.inputSizeHeight/m),f=Math.ceil(e.inputSizeWidth/m)}for(var g=0;g<p;++g)for(var y=0;y<f;++y)for(var b=0;b<a.length;++b){var v={xCenter:(y+e.anchorOffsetX)/f,yCenter:(g+e.anchorOffsetY)/p,width:0,height:0};e.fixedAnchorSize?(v.width=1,v.height=1):(v.width=r[b],v.height=a[b]),t.push(v)}n=i}return t}function I(e,t,n,a){return 1===a?.5*(e+t):e+(t-e)*n/(a-1)}function T(e,t){var n=t[0],a=t[1];return[n*e[0]+a*e[1]+e[3],n*e[4]+a*e[5]+e[7]]}function C(e,t,n,a){return y(this,void 0,void 0,(function(){var a,o,s,i,c;return b(this,(function(l){switch(l.label){case 0:return e.sort((function(e,t){return Math.max.apply(Math,t.score)-Math.max.apply(Math,e.score)})),a=(0,r.KtR)(e.map((function(e){return[e.locationData.relativeBoundingBox.yMin,e.locationData.relativeBoundingBox.xMin,e.locationData.relativeBoundingBox.yMax,e.locationData.relativeBoundingBox.xMax]}))),o=(0,r.tGX)(e.map((function(e){return e.score[0]}))),[4,r.Slp.nonMaxSuppressionAsync(a,o,t,n)];case 1:return[4,(s=l.sent()).array()];case 2:return i=l.sent(),c=e.filter((function(e,t){return i.indexOf(t)>-1})),(0,r.ASo)([a,o,s]),[2,c]}}))}))}function E(e,t,n){return y(this,void 0,void 0,(function(){var a,o,s,i,c;return b(this,(function(l){switch(l.label){case 0:return a=e[0],o=e[1],s=function(e,t,n){return(0,r.DZQ)((function(){var a,o,s,i;n.reverseOutputOrder?(o=(0,r.r2V)((0,r.dik)(e,[0,n.boxCoordOffset+0],[-1,1])),a=(0,r.r2V)((0,r.dik)(e,[0,n.boxCoordOffset+1],[-1,1])),i=(0,r.r2V)((0,r.dik)(e,[0,n.boxCoordOffset+2],[-1,1])),s=(0,r.r2V)((0,r.dik)(e,[0,n.boxCoordOffset+3],[-1,1]))):(a=(0,r.r2V)((0,r.dik)(e,[0,n.boxCoordOffset+0],[-1,1])),o=(0,r.r2V)((0,r.dik)(e,[0,n.boxCoordOffset+1],[-1,1])),s=(0,r.r2V)((0,r.dik)(e,[0,n.boxCoordOffset+2],[-1,1])),i=(0,r.r2V)((0,r.dik)(e,[0,n.boxCoordOffset+3],[-1,1]))),o=(0,r.WQq)((0,r.lKK)((0,r.y4m)(o,n.xScale),t.w),t.x),a=(0,r.WQq)((0,r.lKK)((0,r.y4m)(a,n.yScale),t.h),t.y),n.applyExponentialOnBoxSize?(s=(0,r.lKK)((0,r.oNF)((0,r.y4m)(s,n.hScale)),t.h),i=(0,r.lKK)((0,r.oNF)((0,r.y4m)(i,n.wScale)),t.w)):(s=(0,r.lKK)((0,r.y4m)(s,n.hScale),t.h),i=(0,r.lKK)((0,r.y4m)(i,n.wScale),t.h));var c=(0,r.jbE)(a,(0,r.y4m)(s,2)),l=(0,r.jbE)(o,(0,r.y4m)(i,2)),u=(0,r.WQq)(a,(0,r.y4m)(s,2)),h=(0,r.WQq)(o,(0,r.y4m)(i,2)),d=(0,r.xWs)([(0,r.tQQ)(c,[n.numBoxes,1]),(0,r.tQQ)(l,[n.numBoxes,1]),(0,r.tQQ)(u,[n.numBoxes,1]),(0,r.tQQ)(h,[n.numBoxes,1])],1);if(n.numKeypoints)for(var p=0;p<n.numKeypoints;++p){var f=n.keypointCoordOffset+p*n.numValuesPerKeypoint,m=void 0,g=void 0;n.reverseOutputOrder?(m=(0,r.r2V)((0,r.dik)(e,[0,f],[-1,1])),g=(0,r.r2V)((0,r.dik)(e,[0,f+1],[-1,1]))):(g=(0,r.r2V)((0,r.dik)(e,[0,f],[-1,1])),m=(0,r.r2V)((0,r.dik)(e,[0,f+1],[-1,1])));var y=(0,r.WQq)((0,r.lKK)((0,r.y4m)(m,n.xScale),t.w),t.x),b=(0,r.WQq)((0,r.lKK)((0,r.y4m)(g,n.yScale),t.h),t.y);d=(0,r.xWs)([d,(0,r.tQQ)(y,[n.numBoxes,1]),(0,r.tQQ)(b,[n.numBoxes,1])],1)}return d}))}(o,t,n),i=(0,r.DZQ)((function(){var e=a;return n.sigmoidScore?(null!=n.scoreClippingThresh&&(e=(0,r.zQh)(a,-n.scoreClippingThresh,n.scoreClippingThresh)),e=(0,r.ry7)(e)):e})),[4,N(s,i,n)];case 1:return c=l.sent(),(0,r.ASo)([s,i]),[2,c]}}))}))}function N(e,t,n){return y(this,void 0,void 0,(function(){var a,r,o,s,i,c,l,u,h,d,p,f;return b(this,(function(m){switch(m.label){case 0:return a=[],[4,e.data()];case 1:return r=m.sent(),[4,t.data()];case 2:for(o=m.sent(),s=0;s<n.numBoxes;++s)if(!(null!=n.minScoreThresh&&o[s]<n.minScoreThresh||(i=s*n.numCoords,c=R(r[i+0],r[i+1],r[i+2],r[i+3],o[s],n.flipVertically,s),(l=c.locationData.relativeBoundingBox).width<0||l.height<0))){if(n.numKeypoints>0)for((u=c.locationData).relativeKeypoints=[],h=n.numKeypoints*n.numValuesPerKeypoint,d=0;d<h;d+=n.numValuesPerKeypoint)p=i+n.keypointCoordOffset+d,f={x:r[p+0],y:n.flipVertically?1-r[p+1]:r[p+1]},u.relativeKeypoints.push(f);a.push(c)}return[2,a]}}))}))}function R(e,t,n,a,r,o,s){return{score:[r],ind:s,locationData:{relativeBoundingBox:{xMin:t,yMin:o?1-n:e,xMax:a,yMax:o?1-e:n,width:a-t,height:n-e}}}}var A,_={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:128,inputSizeWidth:128,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},O={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:0,featureMapHeight:[],featureMapWidth:[],numLayers:1,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[4],aspectRatios:[1],fixedAnchorSize:!0},F={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:896,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:128,yScale:128,hScale:128,wScale:128,minScoreThresh:.5},D={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2304,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.6},L={outputTensorSize:{width:128,height:128},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},M={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"};!function(){function e(e,t,n){this.detectorModel=t,this.maxFaces=n,"full"===e?(this.imageToTensorConfig=M,this.tensorsToDetectionConfig=D,this.anchors=S(O)):(this.imageToTensorConfig=L,this.tensorsToDetectionConfig=F,this.anchors=S(_));var a=(0,r.tGX)(this.anchors.map((function(e){return e.width}))),o=(0,r.tGX)(this.anchors.map((function(e){return e.height}))),s=(0,r.tGX)(this.anchors.map((function(e){return e.xCenter}))),i=(0,r.tGX)(this.anchors.map((function(e){return e.yCenter})));this.anchorTensor={x:s,y:i,w:a,h:o}}e.prototype.dispose=function(){this.detectorModel.dispose(),(0,r.ASo)([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},e.prototype.reset=function(){},e.prototype.detectFaces=function(e,t){return void 0===t&&(t=!1),y(this,void 0,void 0,(function(){var n,a,o,s,i,c,l,u,h,d,p;return b(this,(function(f){switch(f.label){case 0:return null==e?(this.reset(),[2,[]]):(n=(0,r.DZQ)((function(){var n=(0,r.wgE)(w(e),"float32");return t&&(n=(0,r.r2V)(r.Slp.flipLeftRight((0,r.UG6)(n,0)),[0])),n})),a=function(e,t,n){var a=t.outputTensorSize,o=t.keepAspectRatio,s=t.borderMode,i=t.outputTensorFloatRange,c=x(e),l=function(e,t){return t?{xCenter:t.xCenter*e.width,yCenter:t.yCenter*e.height,width:t.width*e.width,height:t.height*e.height,rotation:t.rotation}:{xCenter:.5*e.width,yCenter:.5*e.height,width:e.width,height:e.height,rotation:0}}(c,n),u=function(e,t,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var a=t.height,r=t.width;k(t,"targetSize"),k(e,"roi");var o,s,i=a/r,c=e.height/e.width,l=0,u=0;return i>c?(o=e.width,s=e.width*i,u=(1-c/i)/2):(o=e.height/i,s=e.height,l=(1-i/c)/2),e.width=o,e.height=s,{top:u,left:l,right:l,bottom:u}}(l,a,o),h=function(e,t,n,a){var r=e.width,o=e.height,s=Math.cos(e.rotation),i=Math.sin(e.rotation),c=e.xCenter,l=e.yCenter,u=1/t,h=1/n,d=new Array(16);return d[0]=r*s*1*u,d[1]=-o*i*u,d[2]=0,d[3]=(-.5*r*s*1+.5*o*i+c)*u,d[4]=r*i*1*h,d[5]=o*s*h,d[6]=0,d[7]=(-.5*o*s-.5*r*i*1+l)*h,d[8]=0,d[9]=0,d[10]=r*u,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,function(e){if(16!==e.length)throw new Error("Array length must be 16 but got "+e.length);return[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}(d)}(l,c.width,c.height),d=(0,r.DZQ)((function(){var t=w(e),n=(0,r.KtR)(function(e,t,n){return k(n,"inputResolution"),[1/n.width*e[0][0]*t.width,1/n.height*e[0][1]*t.width,e[0][3]*t.width,1/n.width*e[1][0]*t.height,1/n.height*e[1][1]*t.height,e[1][3]*t.height,0,0]}(h,c,a),[1,8]),o="zero"===s?"constant":"nearest",l=r.Slp.transform((0,r.UG6)((0,r.wgE)(t,"float32")),n,"bilinear",o,0,[a.height,a.width]);return null!=i?function(e,t){var n=function(e,t,n,a){var r=(a-n)/255;return{scale:r,offset:n-0*r}}(0,0,t[0],t[1]);return(0,r.DZQ)((function(){return(0,r.WQq)((0,r.lKK)(e,n.scale),n.offset)}))}(l,i):l}));return{imageTensor:d,padding:u,transformationMatrix:h}}(n,this.imageToTensorConfig),o=a.imageTensor,s=a.transformationMatrix,i=this.detectorModel.execute(o,"Identity:0"),c=function(e){return(0,r.DZQ)((function(){var t=function(e){return(0,r.DZQ)((function(){return[(0,r.dik)(e,[0,0,0],[1,-1,1]),(0,r.dik)(e,[0,0,1],[1,-1,-1])]}))}(e),n=t[0],a=t[1];return{boxes:(0,r.r2V)(a),logits:(0,r.r2V)(n)}}))}(i),l=c.boxes,[4,E([u=c.logits,l],this.anchorTensor,this.tensorsToDetectionConfig)]);case 1:return 0===(h=f.sent()).length?((0,r.ASo)([n,o,i,u,l]),[2,h]):[4,C(h,this.maxFaces,.3)];case 2:return d=f.sent(),p=function(e,t){void 0===e&&(e=[]);var n,a=(n=t,[].concat.apply([],n));return e.forEach((function(e){var t=e.locationData;t.relativeKeypoints.forEach((function(e){var t=T(a,[e.x,e.y]),n=t[0],r=t[1];e.x=n,e.y=r}));var n=t.relativeBoundingBox,r=Number.MAX_VALUE,o=Number.MAX_VALUE,s=Number.MIN_VALUE,i=Number.MIN_VALUE;[[n.xMin,n.yMin],[n.xMin+n.width,n.yMin],[n.xMin+n.width,n.yMin+n.height],[n.xMin,n.yMin+n.height]].forEach((function(e){var t=T(a,e),n=t[0],c=t[1];r=Math.min(r,n),s=Math.max(s,n),o=Math.min(o,c),i=Math.max(i,c)})),t.relativeBoundingBox={xMin:r,xMax:s,yMin:o,yMax:i,width:s-r,height:i-o}})),e}(d,s),(0,r.ASo)([n,o,i,u,l]),[2,p]}}))}))},e.prototype.estimateFaces=function(e,t){return y(this,void 0,void 0,(function(){var n,a;return b(this,(function(r){return n=x(e),a=!!t&&t.flipHorizontal,[2,this.detectFaces(e,a).then((function(e){return e.map((function(e){for(var t=e.locationData.relativeKeypoints.map((function(e,t){return g(g({},e),{x:e.x*n.width,y:e.y*n.height,name:v[t]})})),a=e.locationData.relativeBoundingBox,r=0,o=["width","xMax","xMin"];r<o.length;r++)a[o[r]]*=n.width;for(var s=0,i=["height","yMax","yMin"];s<i.length;s++)a[i[s]]*=n.height;return{keypoints:t,box:a}}))}))]}))}))}}();function P(e){return e.width*e.height}function z(e){var t=e.xCenter-e.width/2,n=t+e.width,a=e.yCenter-e.height/2;return{xMin:t,xMax:n,yMin:a,yMax:a+e.height,width:e.width,height:e.height}}function B(e){return e instanceof r.qYS?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function W(e){return e-2*Math.PI*Math.floor((e+Math.PI)/(2*Math.PI))}function U(e){return e instanceof r.qYS?e:r.TaL.fromPixels(e)}function V(e,t){r.ZSL.assert(0!==e.width,(function(){return t+" width cannot be 0."})),r.ZSL.assert(0!==e.height,(function(){return t+" height cannot be 0."}))}function G(e,t,n){var a=t.outputTensorSize,o=t.keepAspectRatio,s=t.borderMode,i=t.outputTensorFloatRange,c=B(e),l=function(e,t){return t?{xCenter:t.xCenter*e.width,yCenter:t.yCenter*e.height,width:t.width*e.width,height:t.height*e.height,rotation:t.rotation}:{xCenter:.5*e.width,yCenter:.5*e.height,width:e.width,height:e.height,rotation:0}}(c,n),u=function(e,t,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var a=t.height,r=t.width;V(t,"targetSize"),V(e,"roi");var o,s,i=a/r,c=e.height/e.width,l=0,u=0;return i>c?(o=e.width,s=e.width*i,u=(1-c/i)/2):(o=e.height/i,s=e.height,l=(1-i/c)/2),e.width=o,e.height=s,{top:u,left:l,right:l,bottom:u}}(l,a,o),h=function(e,t,n,a){var r=e.width,o=e.height,s=a?-1:1,i=Math.cos(e.rotation),c=Math.sin(e.rotation),l=e.xCenter,u=e.yCenter,h=1/t,d=1/n,p=new Array(16);return p[0]=r*i*s*h,p[1]=-o*c*h,p[2]=0,p[3]=(-.5*r*i*s+.5*o*c+l)*h,p[4]=r*c*s*d,p[5]=o*i*d,p[6]=0,p[7]=(-.5*o*i-.5*r*c*s+u)*d,p[8]=0,p[9]=0,p[10]=r*h,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,function(e){if(16!==e.length)throw new Error("Array length must be 16 but got "+e.length);return[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}(p)}(l,c.width,c.height,!1),d=r.DZQ((function(){var t=U(e),n=r.KtR(function(e,t,n){return V(n,"inputResolution"),[1/n.width*e[0][0]*t.width,1/n.height*e[0][1]*t.width,e[0][3]*t.width,1/n.width*e[1][0]*t.height,1/n.height*e[1][1]*t.height,e[1][3]*t.height,0,0]}(h,c,a),[1,8]),o="zero"===s?"constant":"nearest",l=r.Slp.transform(r.UG6(r.wgE(t,"float32")),n,"bilinear",o,0,[a.height,a.width]);return null!=i?function(e,t){var n=function(e,t,n,a){var r=(a-n)/255;return{scale:r,offset:n-0*r}}(0,0,t[0],t[1]);return r.DZQ((function(){return r.WQq(r.lKK(e,n.scale),n.offset)}))}(l,i):l}));return{imageTensor:d,padding:u,transformationMatrix:h}}function j(e){return{xCenter:e.xMin+e.width/2,yCenter:e.yMin+e.height/2,width:e.width,height:e.height}}function H(e){var t=e.relativeKeypoints;if(t.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var n=Number.MAX_VALUE,a=Number.MAX_VALUE,r=Number.MIN_VALUE,o=Number.MIN_VALUE;return t.forEach((function(e){n=Math.min(n,e.x),r=Math.max(r,e.x),a=Math.min(a,e.y),o=Math.max(o,e.y)})),{xCenter:(n+r)/2,yCenter:(a+o)/2,width:r-n,height:o-a}}function K(e,t,n,a,r){var o="rect"===n?function(e,t,n){var a,r=e.locationData;if("boundingbox"===t)a=j(r.boundingBox);else{a=H(r);var o=n.width,s=n.height;a.xCenter=Math.round(a.xCenter*o),a.yCenter=Math.round(a.yCenter*s),a.width=Math.round(a.width*o),a.height=Math.round(a.height*s)}return a}(e,t,a):function(e,t){var n=e.locationData;return"boundingbox"===t?j(n.relativeBoundingBox):H(n)}(e,t);return r&&(o.rotation=function(e,t,n){var a,r=e.locationData,o=n.rotationVectorStartKeypointIndex,s=n.rotationVectorEndKeypointIndex;a=n.rotationVectorTargetAngle?n.rotationVectorTargetAngle:Math.PI*n.rotationVectorTargetAngleDegree/180;var i=r.relativeKeypoints[o].x*t.width,c=r.relativeKeypoints[o].y*t.height,l=r.relativeKeypoints[s].x*t.width,u=r.relativeKeypoints[s].y*t.height;return W(a-Math.atan2(-(u-c),l-i))}(e,a,r)),o}function q(e,t,n){for(var a=0;a<t.length;++a){var r=t[a],o=n[e[a]];o.x=r.x,o.y=r.y}}function Y(e,t,n,a){if("string"==typeof t){if("copy"===t)for(var r=0;r<n.length;++r)a[e[r]].z=n[r].z}else{var o=function(e,t){for(var n=0,a=0;a<t.length;++a)n+=e[t[a]].z;return n/t.length}(a,t);for(r=0;r<e.length;++r)a[e[r]].z=o}}function X(e,t){for(var n=function(e){var t=[].concat.apply([],e.map((function(e){return e.indexesMapping})));if(0===t.length)throw new Error("There should be at least one landmark in indexes mapping");var n=t[0],a=t[0],r=new Set(t);r.forEach((function(e){n=Math.min(n,e),a=Math.max(a,e)}));var o=r.size;if(0!==n)throw new Error("Indexes are expected to start with 0 instead of "+n);if(a+1!==o)throw new Error("Indexes should have no gaps but "+(a-o+1)+" indexes are missing");return o}(t),a=new Array(n).fill(null).map(Object),r=0;r<e.length;++r){var o=e[r],s=t[r];if(o.length!==s.indexesMapping.length)throw new Error("There are "+o.length+" refinement landmarks while mapping has "+s.indexesMapping.length);q(s.indexesMapping,o,a),Y(s.indexesMapping,s.zRefinement,o,a)}return a}function Z(e,t){return e.map((function(e){var n=o(o({},e),{x:e.x*t.width,y:e.y*t.height});return null!=e.z&&(n.z=e.z*t.width),n}))}function Q(e,t){return"none"===e?t:function(e){return 1/(1+Math.exp(-e))}(t)}function J(e,t,n,a){return s(this,void 0,void 0,(function(){var r,o,s,c,l,u,h,d;return i(this,(function(i){switch(i.label){case 0:return n=n||t.flipHorizontally||!1,a=a||t.flipVertically||!1,r=e.size,o=r/t.numLandmarks,[4,e.data()];case 1:for(s=i.sent(),c=[],l=0;l<t.numLandmarks;++l)u=l*o,(d={x:0,y:0}).x=n?t.inputImageWidth-s[u]:s[u],o>1&&(d.y=a?t.inputImageHeight-s[u+1]:s[u+1]),o>2&&(d.z=s[u+2]),o>3&&(d.score=Q(t.visibilityActivation,s[u+3])),c.push(d);for(h=0;h<c.length;++h)(d=c[h]).x=d.x/t.inputImageWidth,d.y=d.y/t.inputImageHeight,d.z=d.z/t.inputImageWidth/(t.normalizeZ||1);return[2,c]}}))}))}function $(e,t,n){var a=e.width,r=e.height,o=e.rotation;if(null==n.rotation&&null==n.rotationDegree||(o=function(e,t){return null!=t.rotation?e+=t.rotation:null!=t.rotationDegree&&(e+=Math.PI*t.rotationDegree/180),W(e)}(o,n)),0===o)e.xCenter=e.xCenter+a*n.shiftX,e.yCenter=e.yCenter+r*n.shiftY;else{var s=(t.width*a*n.shiftX*Math.cos(o)-t.height*r*n.shiftY*Math.sin(o))/t.width,i=(t.width*a*n.shiftX*Math.sin(o)+t.height*r*n.shiftY*Math.cos(o))/t.height;e.xCenter=e.xCenter+s,e.yCenter=e.yCenter+i}if(n.squareLong){var c=Math.max(a*t.width,r*t.height);a=c/t.width,r=c/t.height}else if(n.squareShort){var l=Math.min(a*t.width,r*t.height);a=l/t.width,r=l/t.height}return e.width=a*n.scaleX,e.height=r*n.scaleY,e}(A||(A={})).MediaPipeFaceDetector="MediaPipeFaceDetector";var ee,te={flipHorizontal:!1,staticImageMode:!1},ne={shiftX:0,shiftY:0,scaleX:1.5,scaleY:1.5,squareLong:!0},ae={outputTensorSize:{width:192,height:192},outputTensorFloatRange:[0,1],borderMode:"replicate"},re={numLandmarks:468,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},oe={numLandmarks:80,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},se={numLandmarks:71,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},ie={numLandmarks:5,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},ce={indexesMapping:Array.from(Array(468).keys()),zRefinement:"copy"},le={indexesMapping:[61,146,91,181,84,17,314,405,321,375,291,185,40,39,37,0,267,269,270,409,78,95,88,178,87,14,317,402,318,324,308,191,80,81,82,13,312,311,310,415,76,77,90,180,85,16,315,404,320,307,306,184,74,73,72,11,302,303,304,408,62,96,89,179,86,15,316,403,319,325,292,183,42,41,38,12,268,271,272,407],zRefinement:"none"},ue={indexesMapping:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173,130,25,110,24,23,22,26,112,243,247,30,29,27,28,56,190,226,31,228,229,230,231,232,233,244,113,225,224,223,222,221,189,35,124,46,53,52,65,143,111,117,118,119,120,121,128,245,156,70,63,105,66,107,55,193],zRefinement:"none"},he={indexesMapping:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398,359,255,339,254,253,252,256,341,463,467,260,259,257,258,286,414,446,261,448,449,450,451,452,453,464,342,445,444,443,442,441,413,265,353,276,283,282,295,372,340,346,347,348,349,350,357,465,383,300,293,334,296,336,285,417],zRefinement:"none"},de={indexesMapping:[468,469,470,471,472],zRefinement:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173]},pe={indexesMapping:[473,474,475,476,477],zRefinement:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398]};!function(){function e(e,t,n,a){this.detector=e,this.landmarkModel=t,this.maxFaces=n,this.withAttention=a,this.prevFaceRectsFromLandmarks=null}e.prototype.estimateFaces=function(e,t){return s(this,void 0,void 0,(function(){var n,a,s,c,l,u,h,f,m,g,y,b,v,x=this;return i(this,(function(i){switch(i.label){case 0:return n=function(e){if(null==e)return o({},te);var t=o({},e);return null==t.flipHorizontal&&(t.flipHorizontal=te.flipHorizontal),null==t.staticImageMode&&(t.staticImageMode=te.staticImageMode),t}(t),null==e?(this.reset(),[2,[]]):(a=B(e),s=r.DZQ((function(){var t=r.wgE(U(e),"float32");return n.flipHorizontal&&(t=r.r2V(r.Slp.flipLeftRight(r.UG6(t,0)),[0])),t})),c=this.prevFaceRectsFromLandmarks,n.staticImageMode||null==c||c.length<this.maxFaces?[4,this.detector.detectFaces(s,!1)]:[3,2]);case 1:return 0===(u=i.sent()).length?(this.reset(),s.dispose(),[2,[]]):(l=u.map((function(e){return x.faceDetectionFrontDetectionToRoi(e,a)})),[3,3]);case 2:l=[],i.label=3;case 3:return.5,w=[],[l,c||[]].forEach((function(e){return e.forEach((function(e){(w=w.filter((function(t){return function(e,t){var n=z(e),a=z(t);if(!function(e,t){return!(e.xMax<t.xMin||t.xMax<e.xMin||e.yMax<t.yMin||t.yMax<e.yMin)}(n,a))return 0;var r=P(function(e,t){var n=Math.max(e.xMin,t.xMin),a=Math.min(e.xMax,t.xMax),r=Math.max(e.yMin,t.yMin),o=Math.min(e.yMax,t.yMax);return{xMin:n,xMax:a,yMin:r,yMax:o,width:Math.max(a-n,0),height:Math.max(o-r,0)}}(n,a)),o=P(n)+P(a)-r;return o>0?r/o:0}(e,t)<=.5}))).push(e)}))})),h=w,[4,Promise.all(h.map((function(e){return x.faceLandmark(e,s)})))];case 4:for(f=i.sent(),m=[],this.prevFaceRectsFromLandmarks=[],g=0;g<f.length;++g)null!=(y=f[g])&&(this.prevFaceRectsFromLandmarks.push(this.faceLandmarksToRoi(y,a)),null!=(b=Z(y,a))&&b.forEach((function(e,t){var n=d.get(t);null!=n&&(e.name=n)})),v=p(b),m.push({keypoints:b,box:v.locationData.relativeBoundingBox}));return s.dispose(),[2,m]}var w}))}))},e.prototype.dispose=function(){this.detector.dispose(),this.landmarkModel.dispose()},e.prototype.reset=function(){this.detector.reset(),this.prevFaceRectsFromLandmarks=null},e.prototype.faceDetectionFrontDetectionToRoi=function(e,t){return $(K(e,"boundingbox","normRect",t,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:0}),t,ne)},e.prototype.faceLandmark=function(e,t){return s(this,void 0,void 0,(function(){var n,a,s,c,l,u,h;return i(this,(function(i){switch(i.label){case 0:return n=G(t,ae,e).imageTensor,a=["output_faceflag"].concat(this.withAttention?["output_mesh_identity","output_lips","Identity_6:0","Identity_1:0","Identity_2:0","Identity_5:0"]:["output_mesh"]),s=this.landmarkModel.execute(n,a),c=s[0],l=s.slice(1),[4,c.data()];case 1:return i.sent()[0]<.5?(r.ASo(s),r.ASo(n),[2,null]):this.withAttention?[4,this.tensorsToFaceLandmarksWithAttention(l)]:[3,3];case 2:return u=i.sent(),[3,5];case 3:return[4,this.tensorsToFaceLandmarks(l)];case 4:u=i.sent(),i.label=5;case 5:return h=function(e,t,n){void 0===n&&(n={ignoreRotation:!1});for(var a=[],r=0,s=e;r<s.length;r++){var i=s[r],c=i.x-.5,l=i.y-.5,u=n.ignoreRotation?0:t.rotation,h=Math.cos(u)*c-Math.sin(u)*l,d=Math.sin(u)*c+Math.cos(u)*l;h=h*t.width+t.xCenter,d=d*t.height+t.yCenter;var p=i.z*t.width,f=o({},i);f.x=h,f.y=d,f.z=p,a.push(f)}return a}(u,e),r.ASo(s),r.ASo(n),[2,h]}}))}))},e.prototype.tensorsToFaceLandmarks=function(e){return s(this,void 0,void 0,(function(){return i(this,(function(t){return[2,J(e[0],re)]}))}))},e.prototype.tensorsToFaceLandmarksWithAttention=function(e){return s(this,void 0,void 0,(function(){var t,n,a,r,o,s;return i(this,(function(i){switch(i.label){case 0:return[4,J(e[0],re)];case 1:return t=i.sent(),[4,J(e[1],oe)];case 2:return n=i.sent(),[4,J(e[3],se)];case 3:return a=i.sent(),[4,J(e[5],se)];case 4:return r=i.sent(),[4,J(e[4],ie)];case 5:return o=i.sent(),[4,J(e[2],ie)];case 6:return s=i.sent(),[2,X([t,n,a,r,o,s],[ce,le,ue,he,de,pe])]}}))}))},e.prototype.faceLandmarksToRoi=function(e,t){return $(K(p(e),"boundingbox","normRect",t,{rotationVectorStartKeypointIndex:33,rotationVectorEndKeypointIndex:263,rotationVectorTargetAngleDegree:0}),t,ne)}}();!function(e){e.MediaPipeFaceMesh="MediaPipeFaceMesh"}(ee||(ee={}));Object.freeze({__proto__:null,getKeypointIndexByContour:function(e){if(e===ee.MediaPipeFaceMesh)return l;throw new Error("Model "+e+" is not supported.")},getAdjacentPairs:function(e){if(e===ee.MediaPipeFaceMesh)return u;throw new Error("Model "+e+" is not supported.")}})},3415:(e,t,n)=>{"use strict";n.d(t,{H:()=>N});var a=n(1012),r=n(1585),o=function(){return(o=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function s(e,t,n,a){return new(n||(n=Promise))((function(r,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function i(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}c((a=a.apply(e,t||[])).next())}))}function i(e,t){var n,a,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,a=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}const c=e=>({startEndTensor:e,startPoint:(0,a.dik)(e,[0,0],[-1,2]),endPoint:(0,a.dik)(e,[0,2],[-1,2])}),l={strides:[8,16],anchors:[2,6]};function u(e,t){let n,r,o;if(e.topLeft instanceof a.qYS&&e.bottomRight instanceof a.qYS){const[s,i]=(0,a.DZQ)((()=>[(0,a.xWs)([(0,a.jbE)(t-1,e.topLeft.slice(0,1)),e.topLeft.slice(1,1)]),(0,a.xWs)([(0,a.jbE)(t-1,e.bottomRight.slice(0,1)),e.bottomRight.slice(1,1)])]));n=s,r=i,null!=e.landmarks&&(o=(0,a.DZQ)((()=>{const n=(0,a.jbE)((0,a.tGX)([t-1,0]),e.landmarks),r=(0,a.tGX)([1,-1]);return(0,a.lKK)(n,r)})))}else{const[a,s]=e.topLeft,[i,c]=e.bottomRight;n=[t-1-a,s],r=[t-1-i,c],null!=e.landmarks&&(o=e.landmarks.map((e=>[t-1-e[0],e[1]])))}const s={topLeft:n,bottomRight:r};return null!=o&&(s.landmarks=o),null!=e.probability&&(s.probability=e.probability instanceof a.qYS?e.probability.clone():e.probability),s}function h(e,t){return(0,a.DZQ)((()=>{let n;return n=e.hasOwnProperty("box")?e.box:e,((e,t)=>{const n=(0,a.lKK)(e.startPoint,t),r=(0,a.lKK)(e.endPoint,t),o=(0,a.RPU)([n,r],1);return c(o)})(n,t).startEndTensor.squeeze()}))}class d{constructor(e,t,n,r,o,s){this.blazeFaceModel=e,this.width=t,this.height=n,this.maxFaces=r,this.anchorsData=function(e,t,n){const a=[];for(let r=0;r<n.strides.length;r++){const o=n.strides[r],s=Math.floor((t+o-1)/o),i=Math.floor((e+o-1)/o),c=n.anchors[r];for(let e=0;e<s;e++){const t=o*(e+.5);for(let e=0;e<i;e++){const n=o*(e+.5);for(let e=0;e<c;e++)a.push([n,t])}}}return a}(t,n,l),this.anchors=(0,a.KtR)(this.anchorsData),this.inputSizeData=[t,n],this.inputSize=(0,a.tGX)([t,n]),this.iouThreshold=o,this.scoreThreshold=s}async getBoundingBoxes(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const[r,o,s]=(0,a.DZQ)((()=>{const t=e.resizeBilinear([this.width,this.height]),n=(0,a.lKK)((0,a.jbE)(t.div(255),.5),2),r=this.blazeFaceModel.predict(n).squeeze(),o=function(e,t,n){const r=(0,a.dik)(e,[0,1],[-1,2]),o=(0,a.WQq)(r,t),s=(0,a.dik)(e,[0,3],[-1,2]),i=(0,a.y4m)(s,n),c=(0,a.y4m)(o,n),l=(0,a.y4m)(i,2),u=(0,a.jbE)(c,l),h=(0,a.WQq)(c,l),d=(0,a.lKK)(u,n),p=(0,a.lKK)(h,n);return(0,a.RPU)([d,p],1)}(r,this.anchors,this.inputSize),s=(0,a.dik)(r,[0,0],[-1,1]);return[r,o,(0,a.ry7)(s).squeeze()]})),i=console.warn;console.warn=()=>{};const l=a.Slp.nonMaxSuppression(o,s,this.maxFaces,this.iouThreshold,this.scoreThreshold);console.warn=i;const u=await l.array();l.dispose();let h=u.map((e=>(0,a.dik)(o,[e,0],[1,-1])));t||(h=await Promise.all(h.map((async e=>{const t=await e.array();return e.dispose(),t}))));const d=e.shape[1],p=e.shape[2];let f;f=t?(0,a.y4m)([p,d],this.inputSize):[p/this.inputSizeData[0],d/this.inputSizeData[1]];const m=[];for(let g=0;g<h.length;g++){const e=h[g],o=(0,a.DZQ)((()=>{const o=c(e instanceof a.qYS?e:(0,a.KtR)(e));if(!n)return o;const i=u[g];let l;return l=t?this.anchors.slice([i,0],[1,2]):this.anchorsData[i],{box:o,landmarks:(0,a.dik)(r,[i,5],[1,-1]).squeeze().reshape([6,-1]),probability:(0,a.dik)(s,[i],[1]),anchor:l}}));m.push(o)}return o.dispose(),s.dispose(),r.dispose(),{boxes:m,scaleFactor:f}}async estimateFaces(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const[,o]=function(e){return e instanceof a.qYS?[e.shape[0],e.shape[1]]:[e.height,e.width]}(e),s=(0,a.DZQ)((()=>(e instanceof a.qYS||(e=a.TaL.fromPixels(e)),e.toFloat().expandDims(0)))),{boxes:i,scaleFactor:c}=await this.getBoundingBoxes(s,t,r);return s.dispose(),t?i.map((e=>{const t=h(e,c);let a={topLeft:t.slice([0],[2]),bottomRight:t.slice([2],[2])};if(r){const{landmarks:t,probability:n,anchor:r}=e,o=t.add(r).mul(c);a.landmarks=o,a.probability=n}return n&&(a=u(a,o)),a})):Promise.all(i.map((async e=>{const t=h(e,c);let a;if(r){const[n,r,o]=await Promise.all([e.landmarks,t,e.probability].map((async e=>e.array()))),s=e.anchor,[i,l]=c,u=n.map((e=>[(e[0]+s[0])*i,(e[1]+s[1])*l]));a={topLeft:r.slice(0,2),bottomRight:r.slice(2),landmarks:u,probability:o},(e=>{e.startEndTensor.dispose(),e.startPoint.dispose(),e.endPoint.dispose()})(e.box),e.landmarks.dispose(),e.probability.dispose()}else{const e=await t.array();a={topLeft:e.slice(0,2),bottomRight:e.slice(2)}}return t.dispose(),n&&(a=u(a,o)),a})))}}async function p(){let{maxFaces:e=10,inputWidth:t=128,inputHeight:n=128,iouThreshold:a=.3,scoreThreshold:o=.75}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=await(0,r.ox)("https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1",{fromTFHub:!0});return new d(s,t,n,e,a,o)}var f={silhouette:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109],lipsUpperOuter:[61,185,40,39,37,0,267,269,270,409,291],lipsLowerOuter:[146,91,181,84,17,314,405,321,375,291],lipsUpperInner:[78,191,80,81,82,13,312,311,310,415,308],lipsLowerInner:[78,95,88,178,87,14,317,402,318,324,308],rightEyeUpper0:[246,161,160,159,158,157,173],rightEyeLower0:[33,7,163,144,145,153,154,155,133],rightEyeUpper1:[247,30,29,27,28,56,190],rightEyeLower1:[130,25,110,24,23,22,26,112,243],rightEyeUpper2:[113,225,224,223,222,221,189],rightEyeLower2:[226,31,228,229,230,231,232,233,244],rightEyeLower3:[143,111,117,118,119,120,121,128,245],rightEyebrowUpper:[156,70,63,105,66,107,55,193],rightEyebrowLower:[35,124,46,53,52,65],leftEyeUpper0:[466,388,387,386,385,384,398],leftEyeLower0:[263,249,390,373,374,380,381,382,362],leftEyeUpper1:[467,260,259,257,258,286,414],leftEyeLower1:[359,255,339,254,253,252,256,341,463],leftEyeUpper2:[342,445,444,443,442,441,413],leftEyeLower2:[446,261,448,449,450,451,452,453,464],leftEyeLower3:[372,340,346,347,348,349,350,357,465],leftEyebrowUpper:[383,300,293,334,296,336,285,417],leftEyebrowLower:[265,353,276,283,282,295],midwayBetweenEyes:[168],noseTip:[1],noseBottom:[2],noseRightCorner:[98],noseLeftCorner:[327],rightCheek:[205],leftCheek:[425]};function m(e){return[Math.abs(e.endPoint[0]-e.startPoint[0]),Math.abs(e.endPoint[1]-e.startPoint[1])]}function g(e){return[e.startPoint[0]+(e.endPoint[0]-e.startPoint[0])/2,e.startPoint[1]+(e.endPoint[1]-e.startPoint[1])/2]}function y(e,t){void 0===t&&(t=1.5);var n=g(e),a=m(e),r=[t*a[0]/2,t*a[1]/2];return{startPoint:[n[0]-r[0],n[1]-r[1]],endPoint:[n[0]+r[0],n[1]+r[1]],landmarks:e.landmarks}}function b(e,t){var n;return(n=Math.PI/2-Math.atan2(-(t[1]-e[1]),t[0]-e[0]))-2*Math.PI*Math.floor((n+Math.PI)/(2*Math.PI))}function v(e,t){return[[1,0,e],[0,1,t],[0,0,1]]}function x(e,t){for(var n=0,a=0;a<e.length;a++)n+=e[a]*t[a];return n}function w(e,t){for(var n=[],a=0;a<e.length;a++)n.push(e[a][t]);return n}function k(e,t){for(var n=[],a=e.length,r=0;r<a;r++){n.push([]);for(var o=0;o<a;o++)n[r].push(x(e[r],w(t,o)))}return n}function S(e,t){var n=Math.cos(e),a=Math.sin(e),r=[[n,-a,0],[a,n,0],[0,0,1]],o=k(v(t[0],t[1]),r);return k(o,v(-t[0],-t[1]))}var I=[1,168],T=[3,2],C=function(){function e(e,t,n,a,r,o){this.regionsOfInterest=[],this.runsWithoutFaceDetector=0,this.boundingBoxDetector=e,this.meshDetector=t,this.meshWidth=n,this.meshHeight=a,this.maxContinuousChecks=r,this.maxFaces=o}return e.prototype.transformRawCoords=function(e,t,n,a){var r,o,s,i,c=this,l=m({startPoint:t.startPoint,endPoint:t.endPoint}),u=[l[0]/this.meshWidth,l[1]/this.meshHeight],h=e.map((function(e){return[u[0]*(e[0]-c.meshWidth/2),u[1]*(e[1]-c.meshHeight/2),e[2]]})),d=S(n,[0,0]),p=h.map((function(e){return function(e,t){return[x(e,t[0]),x(e,t[1])]}(e,d).concat([e[2]])})),f=(o=[[(r=a)[0][0],r[1][0]],[r[0][1],r[1][1]]],s=[r[0][2],r[1][2]],i=[-x(o[0],s),-x(o[1],s)],[o[0].concat(i[0]),o[1].concat(i[1]),[0,0,1]]),y=g({startPoint:t.startPoint,endPoint:t.endPoint}).concat([1]),b=[x(y,f[0]),x(y,f[1])];return p.map((function(e){return[e[0]+b[0],e[1]+b[1],e[2]]}))},e.prototype.predict=function(e){return s(this,void 0,void 0,(function(){var t,n,r,s,c=this;return i(this,(function(i){switch(i.label){case 0:return this.shouldUpdateRegionsOfInterest()?[4,this.boundingBoxDetector.getBoundingBoxes(e,!1,!0)]:[3,2];case 1:return t=i.sent(),n=t.boxes,r=t.scaleFactor,0===n.length?(this.regionsOfInterest=[],[2,null]):(s=n.map((function(e){var t,n,a={startPoint:e.box.startPoint.squeeze().arraySync(),endPoint:e.box.endPoint.squeeze().arraySync()},s=y((n=r,{startPoint:[(t=a).startPoint[0]*n[0],t.startPoint[1]*n[1]],endPoint:[t.endPoint[0]*n[0],t.endPoint[1]*n[1]]}));return o({},s,{landmarks:e.landmarks.arraySync()})})),n.forEach((function(e){null!=e&&null!=e.startPoint&&(e.startEndTensor.dispose(),e.startPoint.dispose(),e.endPoint.dispose())})),this.updateRegionsOfInterest(s),this.runsWithoutFaceDetector=0,[3,3]);case 2:this.runsWithoutFaceDetector++,i.label=3;case 3:return[2,(0,a.DZQ)((function(){return c.regionsOfInterest.map((function(t,n){var r;if(468===t.landmarks.length){var s=I[0],i=I[1];r=b(t.landmarks[s],t.landmarks[i])}else s=T[0],i=T[1],r=b(t.landmarks[s],t.landmarks[i]);var l=g({startPoint:t.startPoint,endPoint:t.endPoint}),u=[l[0]/e.shape[2],l[1]/e.shape[1]],h=a.Slp.rotateWithOffset(e,r,0,u),d=S(-r,l),p=function(e,t,n){var r=t.shape[1],o=t.shape[2],s=[[e.startPoint[1]/r,e.startPoint[0]/o,e.endPoint[1]/r,e.endPoint[0]/o]];return a.Slp.cropAndResize(t,s,[0],n)}({startPoint:t.startPoint,endPoint:t.endPoint},h,[c.meshHeight,c.meshWidth]).div(255),f=c.meshDetector.predict(p),m=f[1],y=f[2],v=(0,a.tQQ)(y,[-1,3]),x=v.arraySync(),w=c.transformRawCoords(x,t,r,d),k=(0,a.KtR)(w),C=c.calculateLandmarksBoundingBox(w);return c.regionsOfInterest[n]=o({},C,{landmarks:k.arraySync()}),{coords:v,scaledCoords:k,box:C,flag:m.squeeze()}}))}))]}}))}))},e.prototype.updateRegionsOfInterest=function(e){for(var t=0;t<e.length;t++){var n=e[t],a=this.regionsOfInterest[t],r=0;if(a&&a.startPoint){var o=n.startPoint,s=o[0],i=o[1],c=n.endPoint,l=c[0],u=c[1],h=a.startPoint,d=h[0],p=h[1],f=a.endPoint,m=f[0],g=f[1],y=Math.max(s,d),b=Math.max(i,p),v=(Math.min(l,m)-y)*(Math.min(u,g)-b);r=v/((l-s)*(u-i)+(m-d)*(g-i)-v)}r<.25&&(this.regionsOfInterest[t]=n)}this.regionsOfInterest=this.regionsOfInterest.slice(0,e.length)},e.prototype.clearRegionOfInterest=function(e){null!=this.regionsOfInterest[e]&&(this.regionsOfInterest=this.regionsOfInterest.slice(0,e).concat(this.regionsOfInterest.slice(e+1)))},e.prototype.shouldUpdateRegionsOfInterest=function(){var e=this.regionsOfInterest.length,t=0===e;return 1===this.maxFaces||t?t:e!==this.maxFaces&&this.runsWithoutFaceDetector>=this.maxContinuousChecks},e.prototype.calculateLandmarksBoundingBox=function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]})),a={startPoint:[Math.min.apply(Math,t),Math.min.apply(Math,n)],endPoint:[Math.max.apply(Math,t),Math.max.apply(Math,n)]};return y({startPoint:a.startPoint,endPoint:a.endPoint})},e}(),E=[[.499976992607117,.652534008026123],[.500025987625122,.547487020492554],[.499974012374878,.602371990680695],[.482113003730774,.471979022026062],[.500150978565216,.527155995368958],[.499909996986389,.498252987861633],[.499523013830185,.40106201171875],[.289712011814117,.380764007568359],[.499954998493195,.312398016452789],[.499987006187439,.269918978214264],[.500023007392883,.107050001621246],[.500023007392883,.666234016418457],[.5000159740448,.679224014282227],[.500023007392883,.692348003387451],[.499976992607117,.695277988910675],[.499976992607117,.70593398809433],[.499976992607117,.719385027885437],[.499976992607117,.737019002437592],[.499967992305756,.781370997428894],[.499816000461578,.562981009483337],[.473773002624512,.573909997940063],[.104906998574734,.254140973091125],[.365929991006851,.409575998783112],[.338757991790771,.41302502155304],[.311120003461838,.409460008144379],[.274657994508743,.389131009578705],[.393361985683441,.403706014156342],[.345234006643295,.344011008739471],[.370094001293182,.346076011657715],[.319321990013123,.347265005111694],[.297903001308441,.353591024875641],[.24779200553894,.410809993743896],[.396889001131058,.842755019664764],[.280097991228104,.375599980354309],[.106310002505779,.399955987930298],[.2099249958992,.391353011131287],[.355807989835739,.534406006336212],[.471751004457474,.65040397644043],[.474155008792877,.680191993713379],[.439785003662109,.657229006290436],[.414617002010345,.66654098033905],[.450374007225037,.680860996246338],[.428770989179611,.682690978050232],[.374971002340317,.727805018424988],[.486716985702515,.547628998756409],[.485300987958908,.527395009994507],[.257764995098114,.314490020275116],[.401223003864288,.455172002315521],[.429818987846375,.548614978790283],[.421351999044418,.533740997314453],[.276895999908447,.532056987285614],[.483370006084442,.499586999416351],[.33721199631691,.282882988452911],[.296391993761063,.293242990970612],[.169294998049736,.193813979625702],[.447580009698868,.302609980106354],[.392390012741089,.353887975215912],[.354490011930466,.696784019470215],[.067304998636246,.730105042457581],[.442739009857178,.572826027870178],[.457098007202148,.584792017936707],[.381974011659622,.694710969924927],[.392388999462128,.694203019142151],[.277076005935669,.271932005882263],[.422551989555359,.563233017921448],[.385919004678726,.281364023685455],[.383103013038635,.255840003490448],[.331431001424789,.119714021682739],[.229923993349075,.232002973556519],[.364500999450684,.189113974571228],[.229622006416321,.299540996551514],[.173287004232407,.278747975826263],[.472878992557526,.666198015213013],[.446828007698059,.668527007102966],[.422762006521225,.673889994621277],[.445307999849319,.580065965652466],[.388103008270264,.693961024284363],[.403039008378983,.706539988517761],[.403629004955292,.693953037261963],[.460041999816895,.557139039039612],[.431158006191254,.692366003990173],[.452181994915009,.692366003990173],[.475387006998062,.692366003990173],[.465828001499176,.779190003871918],[.472328990697861,.736225962638855],[.473087012767792,.717857003211975],[.473122000694275,.704625964164734],[.473033010959625,.695277988910675],[.427942007780075,.695277988910675],[.426479011774063,.703539967536926],[.423162013292313,.711845993995667],[.4183090031147,.720062971115112],[.390094995498657,.639572978019714],[.013953999616206,.560034036636353],[.499913990497589,.58014702796936],[.413199990987778,.69539999961853],[.409626007080078,.701822996139526],[.468080013990402,.601534962654114],[.422728985548019,.585985004901886],[.463079988956451,.593783974647522],[.37211999297142,.47341400384903],[.334562003612518,.496073007583618],[.411671012639999,.546965003013611],[.242175996303558,.14767599105835],[.290776997804642,.201445996761322],[.327338010072708,.256527006626129],[.399509996175766,.748921036720276],[.441727995872498,.261676013469696],[.429764986038208,.187834024429321],[.412198007106781,.108901023864746],[.288955003023148,.398952007293701],[.218936994671822,.435410976409912],[.41278201341629,.398970007896423],[.257135003805161,.355440020561218],[.427684992551804,.437960982322693],[.448339998722076,.536936044692993],[.178560003638268,.45755398273468],[.247308000922203,.457193970680237],[.286267012357712,.467674970626831],[.332827985286713,.460712015628815],[.368755996227264,.447206974029541],[.398963987827301,.432654976844788],[.476410001516342,.405806005001068],[.189241006970406,.523923993110657],[.228962004184723,.348950982093811],[.490725994110107,.562400996685028],[.404670000076294,.485132992267609],[.019469000399113,.401564002037048],[.426243007183075,.420431017875671],[.396993011236191,.548797011375427],[.266469985246658,.376977026462555],[.439121007919312,.51895797252655],[.032313998788595,.644356966018677],[.419054001569748,.387154996395111],[.462783008813858,.505746960639954],[.238978996872902,.779744982719421],[.198220998048782,.831938028335571],[.107550002634525,.540755033493042],[.183610007166862,.740257024765015],[.134409993886948,.333683013916016],[.385764002799988,.883153975009918],[.490967005491257,.579378008842468],[.382384985685349,.508572995662689],[.174399003386497,.397670984268188],[.318785011768341,.39623498916626],[.343364000320435,.400596976280212],[.396100014448166,.710216999053955],[.187885001301765,.588537991046906],[.430987000465393,.944064974784851],[.318993002176285,.898285031318665],[.266247987747192,.869701027870178],[.500023007392883,.190576016902924],[.499976992607117,.954452991485596],[.366169989109039,.398822009563446],[.393207013607025,.39553701877594],[.410373002290726,.391080021858215],[.194993004202843,.342101991176605],[.388664990663528,.362284004688263],[.365961998701096,.355970978736877],[.343364000320435,.355356991291046],[.318785011768341,.35834002494812],[.301414996385574,.363156020641327],[.058132998645306,.319076001644135],[.301414996385574,.387449026107788],[.499987989664078,.618434011936188],[.415838003158569,.624195992946625],[.445681989192963,.566076993942261],[.465844005346298,.620640993118286],[.49992299079895,.351523995399475],[.288718998432159,.819945991039276],[.335278987884521,.852819979190826],[.440512001514435,.902418971061707],[.128294005990028,.791940987110138],[.408771991729736,.373893976211548],[.455606997013092,.451801002025604],[.499877005815506,.908990025520325],[.375436991453171,.924192011356354],[.11421000212431,.615022003650665],[.448662012815475,.695277988910675],[.4480200111866,.704632043838501],[.447111994028091,.715808033943176],[.444831997156143,.730794012546539],[.430011987686157,.766808986663818],[.406787008047104,.685672998428345],[.400738000869751,.681069016456604],[.392399996519089,.677703022956848],[.367855995893478,.663918972015381],[.247923001646996,.601333022117615],[.452769994735718,.420849978923798],[.43639200925827,.359887003898621],[.416164010763168,.368713974952698],[.413385987281799,.692366003990173],[.228018000721931,.683571994304657],[.468268007040024,.352671027183533],[.411361992359161,.804327011108398],[.499989002943039,.469825029373169],[.479153990745544,.442654013633728],[.499974012374878,.439637005329132],[.432112008333206,.493588984012604],[.499886006116867,.866917014122009],[.49991300702095,.821729004383087],[.456548988819122,.819200992584229],[.344549000263214,.745438992977142],[.37890899181366,.574010014533997],[.374292999505997,.780184984207153],[.319687992334366,.570737957954407],[.357154995203018,.604269981384277],[.295284003019333,.621580958366394],[.447750002145767,.862477004528046],[.410986006259918,.508723020553589],[.31395098567009,.775308012962341],[.354128003120422,.812552988529205],[.324548006057739,.703992962837219],[.189096003770828,.646299958229065],[.279776990413666,.71465802192688],[.1338230073452,.682700991630554],[.336768001317978,.644733011722565],[.429883986711502,.466521978378296],[.455527991056442,.548622965812683],[.437114000320435,.558896005153656],[.467287987470627,.529924988746643],[.414712011814117,.335219979286194],[.37704598903656,.322777986526489],[.344107985496521,.320150971412659],[.312875986099243,.32233202457428],[.283526003360748,.333190023899078],[.241245999932289,.382785975933075],[.102986000478268,.468762993812561],[.267612010240555,.424560010433197],[.297879010438919,.433175981044769],[.333433985710144,.433878004550934],[.366427004337311,.426115989685059],[.396012008190155,.416696012020111],[.420121014118195,.41022801399231],[.007561000064015,.480777025222778],[.432949006557465,.569517970085144],[.458638995885849,.479089021682739],[.473466008901596,.545744001865387],[.476087987422943,.563830018043518],[.468472003936768,.555056989192963],[.433990985155106,.582361996173859],[.483518004417419,.562983989715576],[.482482999563217,.57784903049469],[.42645001411438,.389798998832703],[.438998997211456,.39649498462677],[.450067013502121,.400434017181396],[.289712011814117,.368252992630005],[.276670008897781,.363372981548309],[.517862021923065,.471948027610779],[.710287988185883,.380764007568359],[.526226997375488,.573909997940063],[.895093023777008,.254140973091125],[.634069979190826,.409575998783112],[.661242008209229,.41302502155304],[.688880026340485,.409460008144379],[.725341975688934,.389131009578705],[.606630027294159,.40370500087738],[.654766023159027,.344011008739471],[.629905998706818,.346076011657715],[.680678009986877,.347265005111694],[.702096998691559,.353591024875641],[.75221198797226,.410804986953735],[.602918028831482,.842862963676453],[.719901978969574,.375599980354309],[.893692970275879,.399959981441498],[.790081977844238,.391354024410248],[.643998026847839,.534487962722778],[.528249025344849,.65040397644043],[.525849997997284,.680191040039062],[.560214996337891,.657229006290436],[.585384011268616,.66654098033905],[.549625992774963,.680860996246338],[.57122802734375,.682691991329193],[.624852001667023,.72809898853302],[.513050019741058,.547281980514526],[.51509702205658,.527251958847046],[.742246985435486,.314507007598877],[.598631024360657,.454979002475739],[.570338010787964,.548575043678284],[.578631997108459,.533622980117798],[.723087012767792,.532054007053375],[.516445994377136,.499638974666595],[.662801027297974,.282917976379395],[.70362401008606,.293271005153656],[.830704987049103,.193813979625702],[.552385985851288,.302568018436432],[.607609987258911,.353887975215912],[.645429015159607,.696707010269165],[.932694971561432,.730105042457581],[.557260990142822,.572826027870178],[.542901992797852,.584792017936707],[.6180260181427,.694710969924927],[.607590973377228,.694203019142151],[.722943007946014,.271963000297546],[.577413976192474,.563166975975037],[.614082992076874,.281386971473694],[.616907000541687,.255886018276215],[.668509006500244,.119913995265961],[.770092010498047,.232020974159241],[.635536015033722,.189248979091644],[.77039098739624,.299556016921997],[.826722025871277,.278755009174347],[.527121007442474,.666198015213013],[.553171992301941,.668527007102966],[.577238023281097,.673889994621277],[.554691970348358,.580065965652466],[.611896991729736,.693961024284363],[.59696102142334,.706539988517761],[.596370995044708,.693953037261963],[.539958000183105,.557139039039612],[.568841993808746,.692366003990173],[.547818005084991,.692366003990173],[.52461302280426,.692366003990173],[.534089982509613,.779141008853912],[.527670979499817,.736225962638855],[.526912987232208,.717857003211975],[.526877999305725,.704625964164734],[.526966989040375,.695277988910675],[.572058022022247,.695277988910675],[.573521018028259,.703539967536926],[.57683801651001,.711845993995667],[.581691026687622,.720062971115112],[.609944999217987,.639909982681274],[.986046016216278,.560034036636353],[.5867999792099,.69539999961853],[.590372025966644,.701822996139526],[.531915009021759,.601536989212036],[.577268004417419,.585934996604919],[.536915004253387,.593786001205444],[.627542972564697,.473352015018463],[.665585994720459,.495950996875763],[.588353991508484,.546862006187439],[.757824003696442,.14767599105835],[.709249973297119,.201507985591888],[.672684013843536,.256581008434296],[.600408971309662,.74900496006012],[.55826598405838,.261672019958496],[.570303976535797,.187870979309082],[.588165998458862,.109044015407562],[.711045026779175,.398952007293701],[.781069993972778,.435405015945435],[.587247014045715,.398931980133057],[.742869973182678,.355445981025696],[.572156012058258,.437651991844177],[.55186802148819,.536570012569427],[.821442008018494,.457556009292603],[.752701997756958,.457181990146637],[.71375697851181,.467626988887787],[.66711300611496,.460672974586487],[.631101012229919,.447153985500336],[.6008620262146,.432473003864288],[.523481011390686,.405627012252808],[.810747981071472,.523926019668579],[.771045982837677,.348959028720856],[.509127020835876,.562718033790588],[.595292985439301,.485023975372314],[.980530977249146,.401564002037048],[.573499977588654,.420000016689301],[.602994978427887,.548687994480133],[.733529984951019,.376977026462555],[.560611009597778,.519016981124878],[.967685997486115,.644356966018677],[.580985009670258,.387160003185272],[.537728011608124,.505385041236877],[.760966002941132,.779752969741821],[.801778972148895,.831938028335571],[.892440974712372,.54076099395752],[.816350996494293,.740260004997253],[.865594983100891,.333687007427216],[.614073991775513,.883246004581451],[.508952975273132,.579437971115112],[.617941975593567,.508316040039062],[.825608015060425,.397674977779388],[.681214988231659,.39623498916626],[.656635999679565,.400596976280212],[.603900015354156,.710216999053955],[.81208598613739,.588539004325867],[.56801301240921,.944564998149872],[.681007981300354,.898285031318665],[.733752012252808,.869701027870178],[.633830010890961,.398822009563446],[.606792986392975,.39553701877594],[.589659988880157,.391062021255493],[.805015981197357,.342108011245728],[.611334979534149,.362284004688263],[.634037971496582,.355970978736877],[.656635999679565,.355356991291046],[.681214988231659,.35834002494812],[.698584973812103,.363156020641327],[.941866993904114,.319076001644135],[.698584973812103,.387449026107788],[.584177017211914,.624107003211975],[.554318010807037,.566076993942261],[.534153997898102,.62064003944397],[.711217999458313,.819975018501282],[.664629995822906,.852871000766754],[.559099972248077,.902631998062134],[.871706008911133,.791940987110138],[.591234028339386,.373893976211548],[.544341027736664,.451583981513977],[.624562978744507,.924192011356354],[.88577002286911,.615028977394104],[.551338016986847,.695277988910675],[.551980018615723,.704632043838501],[.552887976169586,.715808033943176],[.555167973041534,.730794012546539],[.569944024085999,.767035007476807],[.593203008174896,.685675978660583],[.599261999130249,.681069016456604],[.607599973678589,.677703022956848],[.631937980651855,.663500010967255],[.752032995223999,.601315021514893],[.547226011753082,.420395016670227],[.563543975353241,.359827995300293],[.583841025829315,.368713974952698],[.586614012718201,.692366003990173],[.771915018558502,.683578014373779],[.531597018241882,.352482974529266],[.588370978832245,.804440975189209],[.52079701423645,.442565023899078],[.567984998226166,.493479013442993],[.543282985687256,.819254994392395],[.655317008495331,.745514988899231],[.621008992195129,.574018001556396],[.625559985637665,.78031200170517],[.680198013782501,.570719003677368],[.64276397228241,.604337990283966],[.704662978649139,.621529996395111],[.552012026309967,.862591981887817],[.589071989059448,.508637011051178],[.685944974422455,.775357007980347],[.645735025405884,.812640011310577],[.675342977046967,.703978002071381],[.810858011245728,.646304965019226],[.72012197971344,.714666962623596],[.866151988506317,.682704985141754],[.663187026977539,.644596993923187],[.570082008838654,.466325998306274],[.544561982154846,.548375964164734],[.562758982181549,.558784961700439],[.531987011432648,.530140042304993],[.585271000862122,.335177004337311],[.622952997684479,.32277899980545],[.655896008014679,.320163011550903],[.687132000923157,.322345972061157],[.716481983661652,.333200991153717],[.758756995201111,.382786989212036],[.897013008594513,.468769013881683],[.732392013072968,.424547016620636],[.70211398601532,.433162987232208],[.66652500629425,.433866024017334],[.633504986763,.426087975502014],[.603875994682312,.416586995124817],[.579657971858978,.409945011138916],[.992439985275269,.480777025222778],[.567192018032074,.569419980049133],[.54136598110199,.478899002075195],[.526564002037048,.546118021011353],[.523913025856018,.563830018043518],[.531529009342194,.555056989192963],[.566035985946655,.582329034805298],[.51631098985672,.563053965568542],[.5174720287323,.577877044677734],[.573594987392426,.389806985855103],[.560697972774506,.395331978797913],[.549755990505219,.399751007556915],[.710287988185883,.368252992630005],[.723330020904541,.363372981548309]];function N(e){var t=void 0===e?{}:e,n=t.maxContinuousChecks,a=void 0===n?5:n,r=t.detectionConfidence,o=void 0===r?.9:r,c=t.maxFaces,l=void 0===c?10:c,u=t.iouThreshold,h=void 0===u?.3:u,d=t.scoreThreshold,p=void 0===d?.75:d;return s(this,void 0,void 0,(function(){var e,t,n;return i(this,(function(r){switch(r.label){case 0:return[4,Promise.all([R(l,h,p),A()])];case 1:return e=r.sent(),t=e[0],n=e[1],[2,new O(t,n,a,o,l)]}}))}))}function R(e,t,n){return s(this,void 0,void 0,(function(){return i(this,(function(a){return[2,p({maxFaces:e,iouThreshold:t,scoreThreshold:n})]}))}))}function A(){return s(this,void 0,void 0,(function(){return i(this,(function(e){return[2,(0,r.ox)("https://tfhub.dev/mediapipe/tfjs-model/facemesh/1/default/1",{fromTFHub:!0})]}))}))}function _(e,t){if(e.mesh instanceof a.qYS){var n=(0,a.DZQ)((function(){var n=(0,a.tGX)([t-1,0,0]),r=(0,a.tGX)([1,-1,1]);return(0,a.DZQ)((function(){return[(0,a.xWs)([(0,a.jbE)(t-1,e.boundingBox.topLeft.slice(0,1)),e.boundingBox.topLeft.slice(1,1)]),(0,a.xWs)([(0,a.jbE)(t-1,e.boundingBox.bottomRight.slice(0,1)),e.boundingBox.bottomRight.slice(1,1)]),(0,a.jbE)(n,e.mesh).mul(r),(0,a.jbE)(n,e.scaledMesh).mul(r)]}))})),r=n[0],o=n[1],s=n[2],i=n[3];return Object.assign({},e,{boundingBox:{topLeft:r,bottomRight:o},mesh:s,scaledMesh:i})}return Object.assign({},e,{boundingBox:{topLeft:[t-1-e.boundingBox.topLeft[0],e.boundingBox.topLeft[1]],bottomRight:[t-1-e.boundingBox.bottomRight[0],e.boundingBox.bottomRight[1]]},mesh:e.mesh.map((function(e){var n=e.slice(0);return n[0]=t-1-e[0],n})),scaledMesh:e.scaledMesh.map((function(e){var n=e.slice(0);return n[0]=t-1-e[0],n}))})}var O=function(){function e(e,t,n,a,r){this.pipeline=new C(e,t,192,192,n,r),this.detectionConfidence=a}return e.getAnnotations=function(){return f},e.getUVCoords=function(){return E},e.prototype.estimateFaces=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),s(this,void 0,void 0,(function(){var r,o,c,l,u,h=this;return i(this,(function(d){switch(d.label){case 0:return r=function(e){return e instanceof a.qYS?[e.shape[0],e.shape[1]]:[e.height,e.width]}(e),o=r[1],c=(0,a.DZQ)((function(){return e instanceof a.qYS||(e=a.TaL.fromPixels(e)),e.toFloat().expandDims(0)})),"webgl"!==(0,a.jz4)()?[3,2]:(u=(0,a._K2)().get("WEBGL_PACK_DEPTHWISECONV"),(0,a._K2)().set("WEBGL_PACK_DEPTHWISECONV",!0),[4,this.pipeline.predict(c)]);case 1:return l=d.sent(),(0,a._K2)().set("WEBGL_PACK_DEPTHWISECONV",u),[3,4];case 2:return[4,this.pipeline.predict(c)];case 3:l=d.sent(),d.label=4;case 4:return c.dispose(),null!=l&&l.length>0?[2,Promise.all(l.map((function(e,r){return s(h,void 0,void 0,(function(){var c,l,u,h,d,p,m,g,y,b,v,x,w,k,S=this;return i(this,(function(I){switch(I.label){case 0:return c=e.coords,l=e.scaledCoords,u=e.box,h=e.flag,d=[h],t||(d=d.concat([c,l])),[4,Promise.all(d.map((function(e){return s(S,void 0,void 0,(function(){return i(this,(function(t){return[2,e.array()]}))}))})))];case 1:if(p=I.sent(),m=p[0],h.dispose(),m<this.detectionConfidence&&this.pipeline.clearRegionOfInterest(r),t)return g={faceInViewConfidence:m,mesh:c,scaledMesh:l,boundingBox:{topLeft:(0,a.tGX)(u.startPoint),bottomRight:(0,a.tGX)(u.endPoint)}},n?[2,_(g,o)]:[2,g];for(k in y=p.slice(1),b=y[0],v=y[1],l.dispose(),c.dispose(),x={faceInViewConfidence:m,boundingBox:{topLeft:u.startPoint,bottomRight:u.endPoint},mesh:b,scaledMesh:v},n&&(x=_(x,o)),w={},f)w[k]=f[k].map((function(e){return x.scaledMesh[e]}));return x.annotations=w,[2,x]}}))}))})))]:[2,[]]}}))}))},e}()},9833:(e,t,n)=>{"use strict";var a={};n.r(a),n.d(a,{addImpl:()=>Be,bincountImpl:()=>Ue,bincountReduceImpl:()=>Ve,castImpl:()=>Le,ceilImpl:()=>Ke,concatImpl:()=>qe,equalImpl:()=>Ye,expImpl:()=>Xe,expm1Impl:()=>Ze,floorImpl:()=>Qe,gatherNdImpl:()=>Je,gatherV2Impl:()=>$e,greaterEqualImpl:()=>tt,greaterImpl:()=>et,lessEqualImpl:()=>at,lessImpl:()=>nt,linSpaceImpl:()=>rt,logImpl:()=>ot,maxImpl:()=>st,maximumImpl:()=>it,minimumImpl:()=>ct,multiplyImpl:()=>lt,negImpl:()=>ht,notEqualImpl:()=>dt,prodImpl:()=>ft,raggedGatherImpl:()=>bt,raggedTensorToTensorImpl:()=>St,rangeImpl:()=>It,rsqrtImpl:()=>Tt,scatterImpl:()=>Ct,sigmoidImpl:()=>Et,simpleAbsImpl:()=>Re,sliceImpl:()=>Nt,sparseFillEmptyRowsImpl:()=>Rt,sparseReshapeImpl:()=>At,sparseSegmentReductionImpl:()=>_t,sqrtImpl:()=>Ot,stridedSliceImpl:()=>Ft,stringNGramsImpl:()=>Lt,stringSplitImpl:()=>Pt,stringToHashBucketFastImpl:()=>zt,subImpl:()=>Bt,tileImpl:()=>Ut,topKImpl:()=>jt,transposeImpl:()=>pt,uniqueImpl:()=>Ht});var r=n(1012);const o={},s={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function i(e,t){if(!(e in o)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete o[e]}),!1),(0,r._K2)().getBool("SOFTWARE_WEBGL_ENABLED")&&(s.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",s)||n.getContext("experimental-webgl",s);return n.getContext("webgl2",s)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;o[e]=n}const n=o[e];return null==n||n.isContextLost()?(delete o[e],i(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),o[e])}var c,l,u;function h(e,t){return[t,e]}function d(e){const t=r.ZSL.sizeFromShape(e),n=Math.ceil(t/4);return r.ZSL.sizeToSquarishShape(n)}function p(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function f(e,t){const n=e;let a,o,s,i,c,l,u,h,d,p;return 2===(0,r._K2)().getNumber("WEBGL_VERSION")?(a=n.R32F,o=n.R16F,s=n.RGBA16F,i=n.RGBA32F,c=n.RED,u=4,h=1,d=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(a=e.RGBA,o=e.RGBA,s=e.RGBA,i=n.RGBA,c=e.RGBA,u=4,h=4,d=null!=t?t.HALF_FLOAT_OES:null,p=e.FLOAT,l=e.RGBA),{internalFormatFloat:a,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:c,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:h,textureTypeHalfFloat:d,textureTypeFloat:p}}function m(e,t){const n=t();return(0,r._K2)().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(c||(c={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(l||(l={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(u||(u={}));function g(e){return!!((0,r._K2)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function y(e,t){return C(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}const b=/ERROR: [0-9]+:([0-9]+):/g;function v(e,t){const n=b.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);const a=+n[1],o=e.split("\n"),s=o.length.toString().length+2,i=o.map(((e,t)=>r.ZSL.rightPad((t+1).toString(),s)+e));let c=0;for(let r=0;r<i.length;r++)c=Math.max(i[r].length,c);const l=i.slice(0,a-1),u=i.slice(a-1,a),h=i.slice(a);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(r.ZSL.rightPad(u[0],c)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}function x(e,t){if(m(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function w(e,t,n,a,r,o,s){const i=e.getAttribLocation(t,n);return-1!==i&&(m(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,a))),m(e,(()=>e.vertexAttribPointer(i,r,e.FLOAT,!1,o,s))),m(e,(()=>e.enableVertexAttribArray(i))),!0)}function k(e,t,n,a){m(e,(()=>function(e,t,n){E(e,n),m(e,(()=>e.activeTexture(e.TEXTURE0+n))),m(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,a))),m(e,(()=>e.uniform1i(n,a)))}function S(e,t,n){m(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),m(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function I(e,t){m(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),m(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function T(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function C(e,t,n){const a=m(e,(()=>t()));if(null==a)throw new Error(n);return a}function E(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,a=t+e.TEXTURE0;if(a<e.TEXTURE0||a>n){const e="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(e,"."))}}function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return r.ZSL.sizeFromShape(e.slice(0,e.length-t))}function R(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function A(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[N(e),...R(e)]),t}function _(e){return e%2===0}function O(e,t){if(e=e.slice(-2),t=t.slice(-2),r.ZSL.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e.slice(-1)[0],a=t.slice(-1)[0];if(n===a)return!0;if(_(n)&&_(a)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&_(e[0])&&_(t[0])}let F,D;function L(e,t){return null!=e.getExtension(t)}function M(e){try{if(null!=i(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function P(e){if(0===e)return!1;const t=i(e);if(1!==e){if(L(t,"EXT_color_buffer_float"))return z(t);const e="EXT_color_buffer_half_float";if(L(t,e)){const n=t.getExtension(e);return function(e,t){const n=f(e,t),a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a);const r=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,r,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(a),e.deleteFramebuffer(s),i}(t,n)}return!1}if(!L(t,"OES_texture_float"))return!1;if(!L(t,"WEBGL_color_buffer_float"))return!1;return z(t)}function z(e){const t=f(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const r=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(a),r}function B(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&r.ZSL.assert("complex64"!==e.dtype,(()=>"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."))}))}const W=(0,r._K2)();function U(){let e,t,n,a,o,s,i,c,l,u;return 2===(0,r._K2)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",a="in",o="texture",s="outputColor",i="out vec4 outputColor;",c=(0,r._K2)().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",a="varying",o="texture2D",s="gl_FragColor",i="",c="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:a,texture2D:o,output:s,defineOutput:i,defineSpecialNaN:c,defineSpecialInf:l,defineRound:u}}function V(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const a=r.ZSL.computeStrides(t);return a.map(((t,r)=>{const o="int ".concat(e[r]," = ").concat(n," / ").concat(t),s=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(t):"index -= ".concat(e[r]," * ").concat(t);return"".concat(o,"; ").concat(s,";")})).join("")}function G(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const a=r.ZSL.computeStrides(t);return a.map(((t,r)=>{const o="int ".concat(e[r]," = ").concat(n," / outShapeStrides[").concat(r,"]"),s=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * outShapeStrides[").concat(r,"]"):"index -= ".concat(e[r]," * outShapeStrides[").concat(r,"]");return"".concat(o,"; ").concat(s,";")})).join("")}function j(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const a=function(e,t){const n=e.length,a=e.map((e=>"".concat(t,"[").concat(e,"]"))),r=new Array(n-1);r[n-2]=a[n-1];for(let o=n-3;o>=0;--o)r[o]="(".concat(r[o+1]," * ").concat(a[o+1],")");return r}(e.map(((e,t)=>t)),t);return a.map(((t,r)=>{const o="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),s=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(o,"; ").concat(s,";")})).join("")}function H(e){const t=r.ZSL.computeStrides(e).map((e=>e.toString()));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}W.registerFlag("HAS_WEBGL",(()=>W.getNumber("WEBGL_VERSION")>0)),W.registerFlag("WEBGL_VERSION",(()=>M(2)?2:M(1)?1:0)),W.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),W.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===W.get("WEBGL_VERSION"))),W.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),W.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),W.registerFlag("WEBGL_PACK",(()=>W.getBool("HAS_WEBGL"))),W.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>W.getBool("WEBGL_PACK"))),W.registerFlag("WEBGL_PACK_CLIP",(()=>W.getBool("WEBGL_PACK"))),W.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>W.getBool("WEBGL_PACK"))),W.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>W.getBool("WEBGL_PACK"))),W.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>W.getBool("WEBGL_PACK"))),W.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>W.getBool("WEBGL_PACK"))),W.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>W.getBool("WEBGL_PACK"))),W.registerFlag("WEBGL_PACK_REDUCE",(()=>W.getBool("WEBGL_PACK"))),W.registerFlag("WEBGL_LAZILY_UNPACK",(()=>W.getBool("WEBGL_PACK"))),W.registerFlag("WEBGL_CONV_IM2COL",(()=>W.getBool("WEBGL_PACK"))),W.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==F){const t=i(e);F=t.getParameter(t.MAX_TEXTURE_SIZE)}return F}(W.getNumber("WEBGL_VERSION")))),W.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==D){const t=i(e);D=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,D)}(W.getNumber("WEBGL_VERSION")))),W.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=W.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=i(e);return t=L(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:L(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),W.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>W.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!r.eMq.isMobile())),W.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=i(e);if(1===e){if(!L(t,"OES_texture_float"))return!1}else if(!L(t,"EXT_color_buffer_float"))return!1;return z(t)}(W.getNumber("WEBGL_VERSION")))),W.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!W.getBool("WEBGL_FORCE_F16_TEXTURES")&&W.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),W.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>P(W.getNumber("WEBGL_VERSION")))),W.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=W.getNumber("WEBGL_VERSION"))&&null!=i(e).fenceSync;var e})),W.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>W.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),W.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),W.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>r.eMq.isMobile()?1:-1),(e=>{if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),W.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),W.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),W.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),W.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128)),W.registerFlag("WEBGL_EXP_CONV",(()=>!1)),W.registerFlag("SOFTWARE_WEBGL_ENABLED",(()=>W.getBool("IS_TEST"))),W.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(()=>1/0)),W.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(()=>!1)),W.registerFlag("WEBGL2_ISNAN_CUSTOM",(()=>!1));const K="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:q}=r.backend_util;function Y(e,t,n){const a=[];if(e.forEach((e=>{const t=r.ZSL.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?a.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(a.push("uniform sampler2D ".concat(e.name,";")),a.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){const{uniformShape:t}=re(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:a.push("uniform int ".concat(e.name,"Shape;"));break;case 2:a.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:a.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:a.push("uniform ivec4 ".concat(e.name,"Shape;"))}a.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:a.push("uniform int outShape;");break;case 2:a.push("uniform ivec2 outShape;"),a.push("uniform int outShapeStrides;");break;case 3:a.push("uniform ivec3 outShape;"),a.push("uniform ivec2 outShapeStrides;");break;case 4:a.push("uniform ivec4 outShape;"),a.push("uniform ivec3 outShapeStrides;")}a.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{a.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));const o=a.join("\n"),s=e.map((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,o="";o+=n?Z(e,a):X(e,a);const s=e.shapeInfo.logicalShape,i=t.logicalShape;s.length<=i.length&&(o+=n?function(e,t){const n=e.name,a=n.charAt(0).toUpperCase()+n.slice(1),o="get"+a+"AtOutCoords",s=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,c=q(e.shapeInfo.logicalShape,t.logicalShape),l=ae(i),u=i-s;let h;const d=["x","y","z","w","u","v"];h=0===s?"":i<2&&c.length>=1?"coords = 0;":c.map((e=>"coords.".concat(d[e+u]," = 0;"))).join("\n");let p="";p=i<2&&s>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>"coords.".concat(d[t+u]))).join(", ");let f="return outputValue;";const m=1===r.ZSL.sizeFromShape(e.shapeInfo.logicalShape),g=r.ZSL.sizeFromShape(t.logicalShape),y=1===g;if(1!==s||m||y){if(m&&!y)f=1===i?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(c.length){const e=s-2,t=s-1;c.indexOf(e)>-1&&c.indexOf(t)>-1?f="return vec4(outputValue.x);":c.indexOf(e)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":c.indexOf(t)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(h,"\n      vec4 outputValue = get").concat(a,"(").concat(p,");\n      ").concat(f,"\n    }\n  ")}(e,t):function(e,t){const n=e.name,a=n.charAt(0).toUpperCase()+n.slice(1),o="get"+a+"AtOutCoords",s=t.texShape,i=e.shapeInfo.texShape,c=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&c===l&&null==e.shapeInfo.flatOffset&&r.ZSL.arraysEqual(i,s))return"\n      float ".concat(o,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");const u=ae(l),h=q(e.shapeInfo.logicalShape,t.logicalShape),d=l-c;let p;const f=["x","y","z","w","u","v"];p=0===c?"":l<2&&h.length>=1?"coords = 0;":h.map((e=>"coords.".concat(f[e+d]," = 0;"))).join("\n");let m="";m=l<2&&c>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>"coords.".concat(f[t+d]))).join(", ");return"\n    float ".concat(o,"() {\n      ").concat(u," coords = getOutputCoords();\n      ").concat(p,"\n      return get").concat(a,"(").concat(m,");\n    }\n  ")}(e,t));return o}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),i=t.texShape,c=U(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c);let u,h,d=function(e){const t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(Q,"\n    ").concat(J,"\n    ").concat($,"\n  ");return t}(c);t.isPacked?(u=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===a[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(a[1],".0);\n      }\n    ");if(1===a[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(a[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n      return 2 * (resTexRC.x * ").concat(a[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(r.ZSL.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(a[0],", ").concat(a[1],"));\n      }\n    ");const o=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(o,");\n      int c = imod(index, ").concat(o,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),o=r*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),o=r*Math.ceil(e[e.length-2]/2);let s=o,i="",c="b, r, c";for(let l=2;l<e.length-1;l++)s*=e[e.length-l-1],i="\n      int b".concat(l," = index / ").concat(s,";\n      index -= b").concat(l," * ").concat(s,";\n    ")+i,c="b".concat(l,", ")+c;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(a[0],", ").concat(a[1],"));\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n\n      ").concat(i,"\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec").concat(e.length,"(").concat(c,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,i,n.enableShapeUniforms),h=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(u=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(r.ZSL.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){const t=G(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(t,"\n    return ivec3(r, c, d);\n  }\n")}const a=V(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){const t=G(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(t,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}const a=V(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){const n=V(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){const n=V(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,i,n.enableShapeUniforms),h=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(d+=ee);return[d,l,h,o,u,s,n.userCode].join("\n")}function X(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(a,"() {return ").concat(n,";}");const[r,o]=e.shapeInfo.texShape;if(1===r&&1===o)return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const s=te(n);if(t)return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");const[i,c]=e.shapeInfo.texShape;return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(c,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int index) {\n        ").concat(ne(e),"\n      }\n    ");const r=e.shapeInfo.texShape,o=r[0],s=r[1];if(1===s&&1===o)return"\n      float ".concat(a,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const i=te(n);if(1===s)return t?"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(i,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(i,") + 0.5) / ").concat(o,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===o)return t?"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(i,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(i,") + 0.5) / ").concat(s,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(a,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(a,"(int index) {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(s,", index + ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),s=e.shapeInfo.texShape;if(null!=s&&r.ZSL.arraysEqual(n,s)){if(t)return"\n      float ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");const e=s[0],n=s[1];return"\n    float ".concat(o,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(n,".0, ").concat(e,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}const{newShape:i,keptDims:c}=r.ZSL.squeezeShape(n),l=i;if(l.length<n.length){const n=oe(e,l),a=["row","col"];return"\n      ".concat(X(n,t),"\n      float ").concat(o,"(int row, int col) {\n        return ").concat(o,"(").concat(se(a,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(ne(e),"\n      }\n    ");const u=s[0],h=s[1],d=te(a);if(1===h)return t?"\n      float ".concat(o,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(a,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(a,"TexShape[0]));\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(o,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(u,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");if(1===u)return t?"\n      float ".concat(o,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(a,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(a,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(o,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(h,".0, 0.5);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");if(t)return"\n      float ".concat(o,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(a,"Shape[1] + col + ").concat(d,";\n        vec2 uv = uvFromFlat(").concat(a,"TexShape[0], ").concat(a,"TexShape[1], index);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");return"\n  float ".concat(o,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(d,";\n    vec2 uv = uvFromFlat(").concat(u,", ").concat(h,", index);\n    return sampleTexture(").concat(a,", uv);\n  }\n")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),s=n[1]*n[2],i=n[2],{newShape:c,keptDims:l}=r.ZSL.squeezeShape(n),u=c;if(u.length<n.length){const n=oe(e,u),a=["row","col","depth"];return"\n        ".concat(X(n,t),"\n        float ").concat(o,"(int row, int col, int depth) {\n          return ").concat(o,"(").concat(se(a,l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(s,", ").concat(i,", 1)));\n        ").concat(ne(e),"\n      }\n    ");const h=e.shapeInfo.texShape,d=h[0],p=h[1],f=e.shapeInfo.flatOffset;if(p===s&&null==f)return t?"\n      float ".concat(o,"(int row, int col, int depth) {\n        int stride1 = ").concat(a,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n        float ".concat(o,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(p,".0, ").concat(d,".0);\n          return sampleTexture(").concat(a,", uv);\n        }\n      ");if(p===i&&null==f)return t?"\n      float ".concat(o,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(a,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(o,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,".0, ").concat(d,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");const m=te(a);if(t)return"\n    float ".concat(o,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(a,"Shape[1] * ").concat(a,"Shape[2];\n      int stride1 = ").concat(a,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(a,"TexShape[0], ").concat(a,"TexShape[1], index);\n      return sampleTexture(").concat(a,", uv);\n    }\n    ");return"\n      float ".concat(o,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(s," + col * ").concat(i," + depth + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n        return sampleTexture(").concat(a,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),s=n[3],i=n[2]*s,c=n[1]*i,{newShape:l,keptDims:u}=r.ZSL.squeezeShape(n);if(l.length<n.length){const n=oe(e,l),a=["row","col","depth","depth2"];return"\n      ".concat(X(n,t),"\n      float ").concat(o,"(int row, int col, int depth, int depth2) {\n        return ").concat(o,"(").concat(se(a,u),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(c,", ").concat(i,", ").concat(s,", 1)));\n        ").concat(ne(e),"\n      }\n    ");const h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1],m="int stride2 = ".concat(a,"Shape[3];"),g="int stride1 = ".concat(a,"Shape[2] * stride2;"),y="int stride0 = ".concat(a,"Shape[1] * stride1;");if(f===c&&null==h)return t?"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        ").concat(m,"\n        ").concat(g,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(s,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");if(f===s&&null==h)return t?"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(a,"Shape[1] * ").concat(a,"Shape[2], ").concat(a,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");const b=te(a);if(t)return"\n    float ".concat(o,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(m,"\n      ").concat(g,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(a,"TexShape[0], ").concat(a,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");return"\n    float ".concat(o,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(c," + col * ").concat(i," +\n          depth * ").concat(s," + depth2;\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index + ").concat(b,");\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],s=t[3]*o,i=t[2]*s,c=t[1]*i,{newShape:l,keptDims:u}=r.ZSL.squeezeShape(t);if(l.length<t.length){const t=oe(e,l),n=["row","col","depth","depth2","depth3"];return"\n      ".concat(X(t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(a,"(").concat(se(n,u),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(c,", ").concat(i,", ").concat(s,", ").concat(o,")) +\n          depth3;\n        ").concat(ne(e),"\n      }\n    ");const h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1];if(f===c&&null==h)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(s,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===o&&null==h)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const m=te(n);return"\n    float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(c," + col * ").concat(i," + depth * ").concat(s," +\n          depth2 * ").concat(o," + depth3 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:s}=r.ZSL.squeezeShape(t);if(o.length<t.length){const t=oe(e,o),n=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(X(t),"\n      float ").concat(a,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(a,"(").concat(se(n,s),");\n      }\n    ")}const i=t[5],c=t[4]*i,l=t[3]*c,u=t[2]*l,h=t[1]*u;if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(h,", ").concat(u,", ").concat(l,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(i,", 1)));\n        ").concat(ne(e),"\n      }\n    ");const d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,f=p[0],m=p[1];if(m===h&&null==d)return"\n      float ".concat(a,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(u,", ").concat(l,", ").concat(c,", ").concat(i,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===i&&null==d)return"\n      float ".concat(a,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const g=te(n);return"\n    float ".concat(a,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(h," + col * ").concat(u," + depth * ").concat(l," +\n          depth2 * ").concat(c," + depth3 * ").concat(i," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(f,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function Z(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),a=U();return"\n    vec4 ".concat(n,"() {\n      return ").concat(a.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=e.shapeInfo.texShape,o=U();if(t)return"\n    vec4 ".concat(a,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");const s=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return"\n    vec4 ".concat(a,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(s[0],", ").concat(s[1],", index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),s=e.shapeInfo.texShape,i=s[0],c=s[1],l=U();if(null!=s&&r.ZSL.arraysEqual(n,s))return t?"\n      vec4 ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n\n        return ").concat(l.texture2D,"(").concat(a,", uv);\n      }\n    "):"\n      vec4 ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(c,".0, ").concat(i,".0);\n\n        return ").concat(l.texture2D,"(").concat(a,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(o,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(a,"TexShape[0]) / 2.0), ceil(float(").concat(a,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(a,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(l.texture2D,"(").concat(a,", uv);\n    }\n  ");const u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],h=Math.ceil(n[1]/2);return"\n    vec4 ".concat(o,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(h,", ").concat(u[0],", ").concat(u[1],", row, col);\n      return ").concat(l.texture2D,"(").concat(a,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=e.shapeInfo.texShape,s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){const a=[1,2],o=oe(e,n.slice(1)),s=["b","row","col"];return"\n        ".concat(Z(o,t),"\n        vec4 ").concat(r,"(int b, int row, int col) {\n          return ").concat(r,"(").concat(se(s,a),");\n        }\n      ")}const i=U();if(t)return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(a,"TexShape[0]) / 2.0), ceil(float(").concat(a,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(a,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(a,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(i.texture2D,"(").concat(a,", uv);\n    }\n  ");const c=s[0],l=s[1],u=Math.ceil(n[2]/2),h=u*Math.ceil(n[1]/2);return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(c,", ").concat(l,", ").concat(h,", ").concat(u,", b, row, col);\n      return ").concat(i.texture2D,"(").concat(a,", uv);\n    }\n  ")}(e,t);default:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=U();if(t)return"\n    vec4 ".concat(a,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(r.texture2D,"(").concat(n,", uv);\n    }\n  ");const o=e.shapeInfo.logicalShape,s=o.length,i=e.shapeInfo.texShape,c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],l=c[0],u=c[1],h=Math.ceil(o[s-1]/2);let d=h*Math.ceil(o[s-2]/2),p="int b, int row, int col",f="b * ".concat(d," + (row / 2) * ").concat(h," + (col / 2)");for(let m=2;m<s-1;m++)p="int b".concat(m,", ")+p,d*=o[s-m-1],f="b".concat(m," * ").concat(d," + ")+f;return"\n    vec4 ".concat(a,"(").concat(p,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(l,");\n      return ").concat(r.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}const Q="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",J="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",$="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ee="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function te(e){return"offset".concat(e)}function ne(e){const t=e.name,n=r.ZSL.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function ae(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function re(e,t,n){const{newShape:a,keptDims:o}=r.ZSL.squeezeShape(t),s=t.length,i=e&&3===s&&1===t[0],c=i?t.slice(1):a,l=!e&&s>1&&!r.ZSL.arraysEqual(t,n)&&a.length<s||i;return{useSqueezeShape:l,uniformShape:l?c:t,keptDims:o}}function oe(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function se(e,t){return t.map((t=>e[t])).join(", ")}function ie(e,t,n,a){const o=n.map(((e,n)=>{const a={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(a.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:a}})),s=o.map((e=>e.shapeInfo)),i={logicalShape:a.shape,texShape:a.texData.texShape,isUniform:!1,isPacked:a.texData.isPacked,flatOffset:null},c=Y(o,i,t),l=function(e,t){const n=C(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(m(e,(()=>e.shaderSource(n,t))),m(e,(()=>e.compileShader(n))),(0,r._K2)().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw v(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,c),u=e.createProgram(l);return(0,r._K2)().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:c,webGLProgram:u,inShapeInfos:s,outShapeInfo:i,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:l,source:c,webGLProgram:u,inShapeInfos:s,outShapeInfo:i},ce(e,t,u))}function ce(e,t,n){const a={},o={},s={},i=[];let c,l,u,h=null,d=null;d=e.getUniformLocation(n,"NAN",!1),1===(0,r._K2)().getNumber("WEBGL_VERSION")&&(h=e.getUniformLocation(n,"INFINITY",!1));const p=!1;for(let r=0;r<t.variableNames.length;r++){const i=t.variableNames[r];a[i]=e.getUniformLocation(n,i,p),a["offset".concat(i)]=e.getUniformLocation(n,"offset".concat(i),p),t.enableShapeUniforms&&(o["".concat(i,"Shape")]=e.getUniformLocation(n,"".concat(i,"Shape"),p),s["".concat(i,"TexShape")]=e.getUniformLocation(n,"".concat(i,"TexShape"),p))}return t.enableShapeUniforms&&(c=e.getUniformLocation(n,"outShape",p),u=e.getUniformLocation(n,"outShapeStrides",p),l=e.getUniformLocation(n,"outTexShape",p)),t.customUniforms&&t.customUniforms.forEach(((t,a)=>{i[a]=e.getUniformLocation(n,t.name,p)})),{uniformLocations:a,customUniformLocations:i,infLoc:h,nanLoc:d,inShapesLocations:o,inTexShapesLocations:s,outShapeLocation:c,outShapeStridesLocation:u,outTexShapeLocation:l}}function le(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach(((e,n)=>{const a=e.logicalShape,o=t[n],s=o.shape;if(!r.ZSL.arraysEqual(a,s))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(a," and ").concat(s," must match"));if(e.isUniform&&o.isUniform)return;const i=e.texShape,c=o.isUniform?null:o.texData.texShape;if(!r.ZSL.arraysEqual(i,c))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(i," and ").concat(c," must match"))}))}function ue(e){return(0,r._K2)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class he{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=c.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=U();this.outputShape=e,this.enableShapeUniforms=ue(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?G(["r","c","d"],e):V(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class de{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=c.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=U();this.outputShape=e,this.enableShapeUniforms=ue(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?G(["r","c","d"],e):V(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class pe{constructor(e){this.variableNames=["A"],this.outTexUsage=l.DOWNLOAD;const t=U();this.outputShape=e,this.userCode="\n      ".concat(K,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}class fe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=l.DOWNLOAD;const t=U();this.outputShape=e,this.userCode="\n      ".concat(K,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}class me{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=U();this.outputShape=e,this.enableShapeUniforms=ue(this.outputShape.length);let a="result";t&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":H(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(n.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")}}class ge{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=U();this.outputShape=e,this.enableShapeUniforms=ue(this.outputShape.length);let a="",r="result";t&&(r="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let t=0;t<=1;t++){const r=2*o+t;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(t," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(t,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(n.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(r,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(r,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(r,"] = values[2];\n            } else {\n              result[").concat(r,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":H(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(n.output," = ").concat(r,";\n        }\n    ")}}function ye(e){const t=U();return function(e,t){const n=C(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(m(e,(()=>e.shaderSource(n,t))),m(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function be(e){return function(e,t){const n=C(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return m(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),m(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function ve(e){return function(e,t){const n=C(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return m(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),m(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}function xe(e,t,n,a,o,s){!function(e,t){const n=(0,r._K2)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const n="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+n+" is invalid.")}if(e>n||t>n){const a="[".concat(e,"x").concat(t,"]"),r="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+r+".")}}(t,n);const i=function(e){return C(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),c=e.TEXTURE_2D;return m(e,(()=>e.bindTexture(c,i))),m(e,(()=>e.texParameteri(c,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),m(e,(()=>e.texParameteri(c,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),m(e,(()=>e.texParameteri(c,e.TEXTURE_MIN_FILTER,e.NEAREST))),m(e,(()=>e.texParameteri(c,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===(0,r._K2)().getNumber("WEBGL_VERSION")?m(e,(()=>e.texImage2D(c,0,a,t,n,0,o,s,null))):m(e,(()=>e.texStorage2D(c,1,a,t,n))),m(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:i,texShape:[n,t]}}function we(e){return e.internalFormatFloat}function ke(e){return e.internalFormatHalfFloat}function Se(e){return e.downloadTextureFormat}function Ie(e){return e.internalFormatPackedFloat}function Te(e){return e.internalFormatPackedHalfFloat}function Ce(e,t,n,a,r,o,s,i){const c=e,l=new Float32Array(function(e,t){const[n,a]=p(e,t);return n*a*4}(o,s));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,l),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),l}class Ee{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const t=(0,r._K2)().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,function(e,t){o[e]=t}(t,e)):this.gl=i(t);let n="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===(0,r._K2)().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=y(this.gl,e),L(this.gl,t))this.textureHalfFloatExtension=y(this.gl,t);else if((0,r._K2)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),L(this.gl,a))this.colorBufferHalfFloatExtension=y(this.gl,a);else if((0,r._K2)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",L(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!L(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=be(this.gl),this.indexBuffer=ve(this.gl),this.framebuffer=function(e){return C(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=f(this.gl,this.textureHalfFloatExtension)}get debug(){return(0,r._K2)().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;m(e,(()=>e.finish())),m(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),m(e,(()=>e.deleteFramebuffer(this.framebuffer))),m(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),m(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),m(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=h(t,n);return xe(e,r,o,we(a),a.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=h(t,n);return xe(e,r,o,ke(a),a.textureFormatFloat,a.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=h(t,n);return xe(e,r,o,Se(a),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){m(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===(0,r._K2)().getNumber("WEBGL_VERSION")?m(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):m(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===(0,r._K2)().getNumber("WEBGL_VERSION")?m(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):m(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),m(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,a){this.throwIfDisposed(),function(e,t,n,a,o,s){let i,c,l;m(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),o instanceof Uint8Array?(i=new Uint8Array(n*a*4),c=e.UNSIGNED_BYTE,l=e.RGBA):(i=new Float32Array(n*a*4),c=e.FLOAT,l=s.internalFormatPackedFloat),i.set(o),2===(0,r._K2)().getNumber("WEBGL_VERSION")?m(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,a,e.RGBA,c,i))):m(e,(()=>e.texImage2D(e.TEXTURE_2D,0,l,n,a,0,e.RGBA,c,i))),m(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=p(t,n);return xe(e,r,o,Te(a),e.RGBA,a.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=p(t,n);return xe(e,r,o,Ie(a),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(I(this.gl,this.framebuffer),this.outputTexture=null),m(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,a){const[r,o]=h(t,n),s=new Uint8Array(t*n*4);return m(e,(()=>e.readPixels(0,0,r,o,a.downloadTextureFormat,e.UNSIGNED_BYTE,s))),new Float32Array(s.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,a,r,o){return Ce(this.gl,e,0,0,0,r,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const a=e,r=new Float32Array(n);return a.bindBuffer(a.PIXEL_PACK_BUFFER,t),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,r),a.bindBuffer(a.PIXEL_PACK_BUFFER,null),r}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const a=function(e,t,n,a){const r=e.createBuffer();m(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,r)));const o=16*t*n;return m(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ))),m(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),m(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),r}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if((0,r._K2)().getBool("WEBGL_FENCE_API_ENABLED")){const a=e,r=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=a.clientWaitSync(r,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=r}else(0,r._K2)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,(0,r._K2)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const a=new Float32Array(t*n*4);return m(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,a))),a}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=ye(t));const n=function(e){return C(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);return m(t,(()=>t.attachShader(n,this.vertexShader))),m(t,(()=>t.attachShader(n,e))),function(e,t){if(m(e,(()=>e.linkProgram(t))),!(0,r._K2)().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n),this.debug&&x(t,n),this.vertexAttrsAreBound||(this.setProgram(n),this.vertexAttrsAreBound=function(e,t,n){return m(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),w(e,t,"clipSpacePos",n,3,20,0)&&w(e,t,"uv",n,2,20,12)}(t,this.program,this.vertexBuffer)),n}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&m(this.gl,(()=>this.gl.deleteProgram(e)))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&x(this.gl,this.program),m(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return C(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),m(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),k(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[a,r]=p(t,n);this.setOutputMatrixTextureDriver(e,a,r)}setOutputMatrixWriteRegion(e,t,n,a){this.setOutputMatrixWriteRegionDriver(n,e,a,t)}setOutputPackedMatrixWriteRegion(e,t,n,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&x(this.gl,this.program),T(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),m(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),m(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=y(this.gl,2===(0,r._K2)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===(0,r._K2)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===(0,r._K2)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await r.ZSL.repeatedTry((()=>this.disposed||this.isQueryAvailable(e,(0,r._K2)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,(0,r._K2)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),a=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),a&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in(0,r._K2)().platform&&(n=(0,r._K2)().platform.setTimeoutCustom.bind((0,r._K2)().platform)),r.ZSL.repeatedTry((()=>(this.pollItems(),0===this.itemsToPoll.length)),(()=>0),null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),S(this.gl,e,this.framebuffer),this.debug&&T(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(S(this.gl,this.outputTexture,this.framebuffer),this.debug&&T(this.gl)):I(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const a=this.gl;S(a,e,this.framebuffer),this.debug&&T(a),this.outputTexture=e,m(a,(()=>a.viewport(0,0,t,n))),m(a,(()=>a.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,a){this.throwIfDisposed(),m(this.gl,(()=>this.gl.scissor(e,t,n,a)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function Ne(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&r.ZSL.assert("complex64"!==e.dtype,(()=>"".concat(t," does not support complex64 tensors in the CPU backend.")))}))}function Re(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}r.ljI;function Ae(e){return(t,n,a,o,s)=>{const i=r.backend_util.assertAndGetBroadcastShape(t,n),c=i.length,l=r.ZSL.computeStrides(i),u=r.ZSL.sizeFromShape(i),h=r.ZSL.getTypedArrayFromDType(s,u),d=t.length,p=n.length,f=r.ZSL.computeStrides(t),m=r.ZSL.computeStrides(n),g=r.backend_util.getBroadcastDims(t,i),y=r.backend_util.getBroadcastDims(n,i);if(g.length+y.length===0)for(let r=0;r<h.length;++r)h[r]=e(a[r%a.length],o[r%o.length]);else for(let b=0;b<h.length;++b){const t=r.ZSL.indexToLoc(b,c,l),n=t.slice(-d);g.forEach((e=>n[e]=0));const s=r.ZSL.locToIndex(n,d,f),i=t.slice(-p);y.forEach((e=>i[e]=0));const u=r.ZSL.locToIndex(i,p,m);h[b]=e(a[s],o[u])}return[h,i]}}function _e(e){const{inputs:t,backend:n}=e,{real:a,imag:r}=t,o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,i=n.makeTensorInfo(a.shape,"complex64");return n.data.get(i.dataId).complexTensorInfos={real:n.makeTensorInfo(a.shape,"float32",o),imag:n.makeTensorInfo(r.shape,"float32",s)},i}r.pr3;function Oe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return _e({inputs:{real:Oe(e,t,"float32"),imag:Oe(e,t,"float32")},backend:e})}const a=r.ZSL.makeZerosTypedArray(r.ZSL.sizeFromShape(t),n);return e.makeTensorInfo(t,n,a)}function Fe(e){const{inputs:t,backend:n}=e,{x:a}=t;return n.incRef(a.dataId),{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}r.lzr;function De(e){const{inputs:t,backend:n}=e,{input:a}=t,r=n.data.get(a.dataId).complexTensorInfos.real,o=n.data.get(r.dataId).values;return n.makeTensorInfo(r.shape,r.dtype,o)}r.LRy;function Le(e,t,n,a){if("int32"===a){return[t,"int32",Int32Array.from(e)]}if("bool"===a){const a=r.ZSL.toTypedArray([0],n),[o,s]=Ae(((e,t)=>e!==t?1:0))(t,[],e,a,"bool");return[s,"bool",o]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(a))}function Me(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{dtype:s}=a;if("complex64"===s){if("complex64"===o.dtype)return Fe({inputs:{x:o},backend:n});const e=Oe(n,o.shape,o.dtype),t=Me({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),a=_e({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),a}if("complex64"===o.dtype){const e=De({inputs:{input:o},backend:n}),t=Me({inputs:{x:e},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(e),t}if(!r.ZSL.hasEncodingLoss(o.dtype,s)){const e=Fe({inputs:{x:o},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:s}}const i=n.data.get(o.dataId).values,[c,l,u]=Le(i,o.shape,o.dtype,s);return n.makeTensorInfo(c,l,u)}r.KXH;function Pe(e,t,n,a){return null==n?n=>{let{inputs:o,backend:s}=n;const{a:i,b:c}=o,l=s;Ne([i,c],e);const u=l.data.get(i.dataId).values,h=l.data.get(c.dataId).values,d="string"===i.dtype?r.backend_util.fromUint8ToStringArray(u):u,p="string"===i.dtype?r.backend_util.fromUint8ToStringArray(h):h,f=a||i.dtype,[m,g]=t(i.shape,c.shape,d,p,f);return l.makeTensorInfo(g,f,m)}:e=>{let{inputs:r,backend:o}=e;const{a:s,b:i}=r,c=o;if("complex64"===s.dtype||"complex64"===i.dtype){const e=Me({inputs:{x:s},backend:c,attrs:{dtype:"complex64"}}),t=c.data.get(e.dataId),a=t.complexTensorInfos.real,r=t.complexTensorInfos.imag,o=c.data.get(a.dataId).values,l=c.data.get(r.dataId).values,u=Me({inputs:{x:i},backend:c,attrs:{dtype:"complex64"}}),h=c.data.get(u.dataId),d=h.complexTensorInfos.real,p=h.complexTensorInfos.imag,f=c.data.get(d.dataId).values,m=c.data.get(p.dataId).values,[g,y,b]=n(s.shape,i.shape,o,l,f,m),v=c.makeTensorInfo(b,"float32",g),x=c.makeTensorInfo(b,"float32",y),w=_e({inputs:{real:v,imag:x},backend:c});return c.disposeIntermediateTensorInfo(e),c.disposeIntermediateTensorInfo(u),c.disposeIntermediateTensorInfo(v),c.disposeIntermediateTensorInfo(x),w}{const e=c.data.get(s.dataId).values,n=c.data.get(i.dataId).values,r=a||s.dtype,[o,l]=t(s.shape,i.shape,e,n,r);return c.makeTensorInfo(l,r,o)}}}function ze(e){return(t,n,a,o,s,i)=>{const c=r.backend_util.assertAndGetBroadcastShape(t,n),l=r.ZSL.sizeFromShape(c),u=c.length,h=r.ZSL.computeStrides(c),d=r.ZSL.getTypedArrayFromDType("float32",l),p=r.ZSL.getTypedArrayFromDType("float32",l),f=r.backend_util.getBroadcastDims(t,c),m=r.backend_util.getBroadcastDims(n,c),g=r.backend_util.mergeRealAndImagArrays(a,o),y=r.backend_util.mergeRealAndImagArrays(s,i),b=t.length,v=r.ZSL.computeStrides(t),x=n.length,w=r.ZSL.computeStrides(n);if(f.length+m.length===0)for(let r=0;r<d.length;r++){const t=r%g.length,n=r%y.length,a=e(g[2*t],g[2*t+1],y[2*n],y[2*n+1]);d[r]=a.real,p[r]=a.imag}else for(let k=0;k<d.length;k++){const t=r.ZSL.indexToLoc(k,u,h),n=t.slice(-b);f.forEach((e=>n[e]=0));const a=r.ZSL.locToIndex(n,b,v),o=t.slice(-x);m.forEach((e=>o[e]=0));const s=r.ZSL.locToIndex(o,x,w),i=e(g[2*a],g[2*a+1],y[2*s],y[2*s+1]);d[k]=i.real,p[k]=i.imag}return[d,p,c]}}const Be=Ae(((e,t)=>e+t)),We=ze(((e,t,n,a)=>({real:e+n,imag:t+a})));Pe(r.OMN,Be,We),r.OMN;function Ue(e,t,n,a,o){const s=r.ZSL.sizeFromShape(a),i=r.ZSL.makeZerosTypedArray(o,n);for(let r=0;r<e.length;r++){const n=e[r];if(n<0)throw new Error("Input x must be non-negative!");n>=o||(i[n]+=s>0?t[r]:1)}return i}function Ve(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=e.shape[0],s=e.shape[1],i=(0,r.ra8)([o,n],t.dtype);for(let r=0;r<o;r++)for(let o=0;o<s;o++){const s=e.get(r,o);if(s<0)throw new Error("Input x must be non-negative!");s>=n||(a?i.set(1,r,s):t.size>0?i.set(i.get(r,s)+t.get(r,o),r,s):i.set(i.get(r,s)+1,r,s))}return i}function Ge(e){return(t,n,a)=>{const o=r.ZSL.getTypedArrayFromDType(n,t.length);for(let r=0;r<t.length;++r)o[r]=e(t[r],a);return o}}function je(e,t,n){return a=>{let{inputs:o,attrs:s,backend:i}=a;const{x:c}=o;if(Ne(c,e),"string"===c.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const l=i,u=l.data.get(c.dataId).values,h=r.ZSL.sizeFromShape(c.shape),d=n||c.dtype,p=r.ZSL.getArrayFromDType(d,h);for(let e=0;e<h;++e)p[e]=t(u[e],s);return l.makeTensorInfo(c.shape,d,p)}}function He(e,t,n){return a=>{let{inputs:r,attrs:o,backend:s}=a;const{x:i}=r;if(Ne(i,e),"string"===i.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const c=s,l=c.data.get(i.dataId).values,u=n||i.dtype,h=t(l,u,o);return c.makeTensorInfo(i.shape,u,h)}}const Ke=Ge((e=>Math.ceil(e)));He(r.QDP,Ke),r.QDP;function qe(e,t,n,a){const o=r.ZSL.getArrayFromDType(n,r.ZSL.sizeFromShape(t));if(a&&"string"!==n){let t=0;e.forEach((e=>{const n=r.ZSL.sizeFromShape(e.shape);o.set(e.vals,t),t+=n}))}else{let a=0;e.forEach((e=>{const s="string"===n?r.backend_util.fromUint8ToStringArray(e.vals):e.vals;let i=0;for(let n=0;n<e.shape[0];++n){const r=n*t[1]+a;for(let t=0;t<e.shape[1];++t)o[r+t]=s[i++]}a+=e.shape[1]}))}return o}const Ye=Ae(((e,t)=>e===t?1:0)),Xe=(Pe(r.BRl,Ye,null,"bool"),r.BRl,Ge((e=>Math.exp(e)))),Ze=(He(r.ox3,Xe,"float32"),r.ox3,Ge((e=>Math.expm1(e)))),Qe=(He(r.ybj,Ze),r.ybj,Ge((e=>Math.floor(e))));He(r.ZgB,Qe),r.ZgB;function Je(e,t,n,a,o,s,i,c,l){const u=(0,r.ra8)([a,s],n);for(let r=0;r<a;r++){const n=[];let a=0;for(let t=0;t<o;t++){const s=e[r*o+t];a+=s*i[t],n.push(s)}if(a<0||a>=l/s)throw new Error("Invalid indices: ".concat(n," does not index into ").concat(c));for(let e=0;e<s;e++)u.values[r*s+e]=t.get(...t.indexToLoc(a*s+e))}return u}function $e(e,t,n){const a=(0,r.ra8)(n,e.dtype);for(let r=0;r<a.size;++r){const n=a.indexToLoc(r).slice(),o=n[0],s=n[2],i=t.locToIndex([o,s]);n[2]=t.values[i];const c=e.locToIndex(n);0<=c&&c<e.values.length&&(a.values[r]=e.values[c])}return a}const et=Ae(((e,t)=>e>t?1:0)),tt=(Pe(r.XhZ,et,null,"bool"),r.XhZ,Ae(((e,t)=>e>=t?1:0))),nt=(Pe(r.lLS,tt,null,"bool"),r.lLS,Ae(((e,t)=>e<t?1:0))),at=(Pe(r.mIA,nt,null,"bool"),r.mIA,Ae(((e,t)=>e<=t?1:0)));Pe(r.CwD,at,null,"bool"),r.CwD;function rt(e,t,n){const a=(t-e)/(n-1),o=r.ZSL.makeZerosTypedArray(n,"float32");o[0]=e;for(let r=1;r<o.length;r++)o[r]=o[r-1]+a;return o}const ot=Ge((e=>Math.log(e)));He(r.tG8,ot),r.tG8;function st(e,t,n,a){const o=r.ZSL.getTypedArrayFromDType(a,r.ZSL.sizeFromShape(n));for(let r=0;r<o.length;++r){const n=r*t;let a=e[n];for(let r=0;r<t;++r){const t=e[n+r];(Number.isNaN(t)||t>a)&&(a=t)}o[r]=a}return o}const it=Ae(((e,t)=>Math.max(e,t))),ct=(Pe(r.LDN,it),r.LDN,Ae(((e,t)=>Math.min(e,t)))),lt=(Pe(r.LG0,ct),r.LG0,Ae(((e,t)=>e*t))),ut=ze(((e,t,n,a)=>({real:e*n-t*a,imag:e*a+t*n})));Pe(r.xu7,lt,ut),r.xu7;function ht(e,t,n){const a=r.ZSL.createScalarValue(-1,n);return lt([],t,a,e,n)}r.l0G;const dt=Ae(((e,t)=>e!==t?1:0));Pe(r.ylV,dt,null,"bool"),r.ylV;function pt(e,t,n,a,o){const s=t.length,i=r.ZSL.sizeFromShape(t),c=r.ZSL.computeStrides(t),l=r.ZSL.computeStrides(o),u=r.ZSL.getTypedArrayFromDType(n,r.ZSL.sizeFromShape(o));for(let h=0;h<i;++h){const t=r.ZSL.indexToLoc(h,s,c),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[a[e]];u[r.ZSL.locToIndex(n,s,l)]=e[h]}return u}r.wx0;function ft(e,t,n,a){const[o,s]=r.backend_util.computeOutAndReduceShapes(e,a),i=(0,r.TuY)(t,"int32"),c=r.ZSL.makeZerosTypedArray(r.ZSL.sizeFromShape(o),i),l=r.ZSL.sizeFromShape(s);for(let r=0;r<c.length;++r){const e=r*l;let t=1;for(let a=0;a<l;++a)t*=n[e+a];c[r]=t}return{outVals:c,outShape:o,outDtype:i}}r.kdj;function mt(e,t,n,a){const r=[];let o=0;const s=t.length-1+n.length,i=new Array(s).fill(null).map((()=>[0]));!function(e,t){for(let n=0;n<e.length;++n){const a=e[n],r=n===e.length-1?t:e[n+1].length;if(0===a.length)throw new Error("Ragged splits may not be empty");if(a[0]<0)throw new Error("Ragged splits must be non-negative");if(a[a.length-1]>r)throw new Error("Ragged splits must not point past values");for(let e=1;e<a.length;++e)if(a[e-1]>a[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,a);let c=1;for(let l=0;l<t.length-1;++l){c*=t[l];const e=t[l+1];for(let t=1;t<c+1;++t)i[l].push(t*e)}for(let l=0;l<e.length;++l){let a=e[l],s=e[l]+1;for(let e=0;e<n.length;++e){const r=n[e],o=e+t.length-1;if(o>=0){const e=i[o],t=e[e.length-1]-r[a];for(let n=a;n<s;++n)i[o].push(r[n+1]+t)}a=r[a],s=r[s]}s!==a&&(r.push([a,s]),o+=s-a)}return{outSplits:i,valueSlices:r,numValues:o}}function gt(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let a=t;a<e.length;a++)n[t-1]*=e[a];return n}function yt(e,t,n,a,o){const s=t.slice();s[0]=o;const i=r.ZSL.getArrayFromDType(n,r.ZSL.sizeFromShape(s)),c=e.length;return function(e,t,n,a,r,o){const s=gt(t,2)[1],i=gt(o,2)[1];let c=0;for(const l of n)for(let t=l[0];t<l[1];++t){for(let n=0;n<a;++n)r[c*i+n]=e[t*s+n];++c}}(e,t,a,0===c?0:c/t[0],i,s),[i,s]}function bt(e,t,n,a,o,s,i,c){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach(((e,a)=>{if(e<0||e>=n){const o=r.ZSL.indexToLoc(a,t.length,r.ZSL.computeStrides(t)).join(",");throw new Error("indices[".concat(o,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(s,i,t[0][0]-1),0===a.length)throw new Error("params.rank must be nonzero");const l=a[0],{outSplits:u,valueSlices:h,numValues:d}=mt(s,i,e,l),p=function(e){const t=[];for(let n=0;n<e.length;++n){const a=e[n].length,o=r.ZSL.getArrayFromDType("int32",a);t.push(o),e[n].forEach(((e,t)=>o[t]=e))}return t}(u),f=yt(n,a,o,h,d);return[p,f[0],f[1]]}var vt=r.backend_util.RowPartitionType;class xt{constructor(e,t,n,a,o,s,i,c,l,u){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=a,this.valuesDType=o,this.defaultValue=s,this.defaultValueShape=i,this.rowPartitionValues=c,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=r.backend_util.getRowPartitionTypesHelper(u),this.raggedRank=r.backend_util.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===vt.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===vt.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case vt.VALUE_ROWIDS:return xt.getMaxWidthValueRowID(t);case vt.ROW_SPLITS:return xt.getMaxWidthRowSplit(t);default:throw new Error("Cannot handle partition type ".concat(vt[this.getRowPartitionTypeByDimension(e-1)]))}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let a=0;a<t-1;++a){const t=e[a+1]-e[a];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,a=e[0],r=0;for(let o=1;o<t;++o){const t=e[o];t!==a&&(a=t,r=Math.max(o-n,r),n=o)}return Math.max(t-n,r)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return kt(e,n)}calculateOutputSize(e){const t=this.valuesShape,n=this.defaultValueShape;r.backend_util.validateDefaultValueShape(n,t);const a=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=r.backend_util.combineRaggedTensorToTensorShapes(this.raggedRank,a,t);o[0]<0&&(o[0]=e);for(let r=1;r<=this.raggedRank;++r)o[r]<0&&(o[r]=this.getMaxWidth(r));return o}calculateFirstParentOutputIndex(e,t,n){const a=Math.min(e,n),o=[];let s=0;for(let r=0;r<a;++r,s+=t)o.push(s);for(let r=a;r<e;++r)o.push(-1);return r.ZSL.assert(o.length===e,(()=>"Final length of result must be equal to firstDimension.")),o}calculateOutputIndexRowSplit(e,t,n,a){const r=e.length,o=[];for(let s=0;s<r-1;++s){const r=e[s+1]-e[s];let i=Math.min(a,r),c=t[s];-1===c&&(i=0);for(let e=0;e<i;++e)o.push(c),c+=n;for(let e=0;e<r-i;++e)o.push(-1)}if(r>0&&o.length!==e[r-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,t,n,a){const r=e.length,o=[];if(0===r)return[];let s=0,i=e[0];if(i>=t.length)throw new Error("Got currentValueRowId=".concat(i,", which is not less than ").concat(t.length));let c=t[i];o.push(c);for(let l=1;l<r;++l){const r=e[l];if(r===i)c>=0&&(++s,s<a?c+=n:c=-1);else{if(s=0,i=r,r>=t.length)throw new Error("Got nextValueRowId=".concat(r," which is not less than ").concat(t.length));c=t[r]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,t,n,a){const r=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case vt.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(r,t,n,a);case vt.ROW_SPLITS:if(r.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(r.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(r,t,n,a);default:throw new Error("Unsupported partition type: ".concat(vt[o]))}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case vt.FIRST_DIM_SIZE:return e[0];case vt.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case vt.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(vt[t]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let r=n.length-2;r>=0;--r)n[r]=n[r+1]*t[r+1];const a=kt(t,!1),o=r.ZSL.getArrayFromDType(this.valuesDType,r.ZSL.sizeFromShape(a));if(n[0]*t[0]>0){let r=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){r=this.calculateOutputIndex(e-1,r,n[e],t[e])}this.setOutput(this.raggedRank,r,o,a)}return[a,o]}setOutput(e,t,n,a){if(0===n.length)return;const o=this.values,s=n;let i=a.slice();i=i.slice(e+1);const c=r.ZSL.sizeFromShape(i),l=t.length;let u=this.defaultValue;if(u.length!==c&&1!==u.length){const e=this.defaultValueShape;(0,r.DZQ)((()=>{const t=(0,r.tQQ)(u,e),n=(0,r.hOW)(t,i);u=n.dataSync()}))}let h=0,d=0,p=0;for(let r=0;r<=l;++r){let e=r<l?t[r]:-1;if(e!==p){if(d<p){const e=o.subarray(h*c);wt(s.subarray(d*c),e,(p-d)*c)}if(r>=l){const t=n.length;e=Math.floor(t/c)}if(e>p)if(1===this.defaultValue.length)s.subarray(p*c,e*c).fill(this.defaultValue[0]),p=e;else for(;e>p;){wt(s.slice(p*c),u,c),++p}e<0?(h=r+1,d=p):(h=r,d=p,p=d+1)}else++p}}}function wt(e,t,n){for(let a=0;a<n;a++)e[a]=t[a]}function kt(e,t){const n=[];for(let a of e){if(a<0){if(!t)throw new Error("Dimension ".concat(a," must be >= 0"));if(a<-1)throw new Error("Dimension ".concat(a," must be >= -1"));a=-1}n.push(a)}return n}function St(e,t,n,a,r,o,s,i,c,l){return new xt(e,t,n,a,r,o,s,i,c,l).compute()}function It(e,t,n,a){if(e===t||e<t&&n<0||t<e&&n>1)return r.ZSL.makeZerosTypedArray(0,a);const o=Math.abs(Math.ceil((t-e)/n)),s=r.ZSL.makeZerosTypedArray(o,a);t<e&&1===n&&(n=-1),s[0]=e;for(let r=1;r<s.length;r++)s[r]=s[r-1]+n;return s}const Tt=Ge((e=>1/Math.sqrt(e)));He(r.TOR,Tt),r.TOR;function Ct(e,t,n,a,o,s,i,c,l,u){const h=[a/o,o],d=e.values,p=t.values;if(0===a)return(0,r.ra8)(n,t.dtype);const f=(0,r.ra8)(h,t.dtype);"string"===typeof l||"number"===typeof l?f.values.fill(l):"boolean"===typeof l&&f.values.fill(+l);for(let r=0;r<s;r++){const e=[];let s=0;for(let t=0;t<i;t++){const n=d[r*i+t];e.push(n),s+=n*c[t]}if(s<0||s>=a/o)throw new Error("Invalid indices: ".concat(e," does not index into ").concat(n));for(let n=0;n<o;n++)u?f.values[s*o+n]+=p[r*o+n]:f.values[s*o+n]=0===t.rank?p[0]:p[r*o+n]}return f}const Et=Ge((e=>1/(1+Math.exp(-e))));je(r.vI1,(e=>1/(1+Math.exp(-e)))),r.vI1;function Nt(e,t,n,a,o){const s=r.Kro.isSliceContinous(a,t,n),i=r.ZSL.sizeFromShape(n),c=r.ZSL.computeStrides(a);if(s){const n=r.Kro.computeFlatOffset(t,c);return"string"===o?e.slice(n,n+i):e.subarray(n,n+i)}const l="string"===o?r.backend_util.fromUint8ToStringArray(e):e,u=(0,r.ra8)(a,o,l),h=(0,r.ra8)(n,o);for(let r=0;r<h.size;++r){const e=h.indexToLoc(r),n=e.map(((e,n)=>e+t[n]));h.set(u.get(...n),...e)}return"string"===o?r.backend_util.fromStringArrayToUint8(h.values):h.values}r.JiE;function Rt(e,t,n,a,o,s,i){const c=t[0],l=s[0],u=new Array(l),h=new Array(c),d=t[1];if(0===l){if(0!==c)throw new Error(r.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(c));return[r.ZSL.getArrayFromDType(n,0),[0,d],r.ZSL.getArrayFromDType(o,0),u,h]}let p=!0,f=0;const m=new Array(l).fill(0);for(let y=0;y<c;++y){const t=e[y*d];if(t<0)throw new Error(r.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(y,t));if(t>=l)throw new Error(r.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(y,t,l));++m[t],p=p&&t>=f,f=t}let g=!0;for(let r=0;r<l;++r){const e=0===m[r];u[r]=e,g=g&&!e,m[r]=Math.max(m[r],1),r>0&&(m[r]+=m[r-1])}if(g&&p){const t=e,n=a;for(let e=0;e<c;++e)h[e]=e;return[t,[c,d],n,u,h]}{const t=m[l-1],s=r.ZSL.getArrayFromDType(n,t*d),p=r.ZSL.getArrayFromDType(o,t),f=new Array(l).fill(0);for(let n=0;n<c;++n){const t=e[n*d],r=f[t],o=(0===t?0:m[t-1])+r;f[t]++;for(let a=0;a<d;++a)s[o*d+a]=e[n*d+a];p[o]=a[n],h[n]=o}for(let e=0;e<l;++e){if(0===f[e]){const t=0===e?0:m[e-1];s[t*d+0]=e;for(let e=1;e<d;++e)s[t*d+e]=0;p[t]=i}}return[s,[t,d],p,u,h]}}function At(e,t,n,a,o){const s=r.ZSL.sizeFromShape(a),i=t[0],c=o.length,l=[];let u=1,h=-1;for(let g=0;g<c;++g){const e=o[g];if(-1===e){if(-1!==h)throw new Error(r.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(h,g));h=g,l.push(1)}else{if(e<0)throw new Error(r.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(g,e));u*=e,l.push(e)}}if(-1!==h){if(u<=0)throw new Error(r.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());const e=Math.trunc(s/u);if(u*e!==s)throw new Error(r.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(a,l));l[h]=e}if(r.ZSL.sizeFromShape(l)!==s)throw new Error(r.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(a,l));const d=a.length,p=[];if(d>0){p[d-1]=1;for(let e=d-2;e>=0;--e)p[e]=p[e+1]*a[e+1]}const f=[];if(c>0){f[c-1]=1;for(let e=c-2;e>=0;--e)f[e]=f[e+1]*l[e+1]}const m=r.ZSL.getArrayFromDType(n,i*c);for(let r=0;r<i;++r){let t=0;for(let n=0;n<d;++n)t+=e[r*d+n]*p[n];for(let e=0;e<c;++e)m[r*c+e]=Math.trunc(t/f[e]),t%=f[e]}return[m,[i,c],l]}function _t(e,t,n,a,o){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const c=a.length,l=[t[0],e.length/t[0]],u=l[1],h=c>0?o[c-1]+1:0;if(h<0)throw new Error(r.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());const d=t.slice();d[0]=h;const p=d.reduce(((e,t)=>e*t),1),f=r.ZSL.getArrayFromDType(n,p);if(0===c)return h>0&&f.fill(i),[f,d];if(h<=0)throw new Error(r.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let m=0,g=1,y=0,b=o[m];for(;;){let t=0;if(g<c){if(t=o[g],b===t){++g;continue}if(b>=t)throw new Error(r.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(b<0||b>=h)throw new Error(r.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(b,h));b>y&&f.fill(i,y*u,b*u);for(let n=m;n<g;++n){const t=a[n];if(t<0||t>=l[0])throw new Error(r.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(n,a[n],l[0]));for(let n=0;n<u;n++)f[b*u+n]+=e[t*u+n]}if(s)for(let e=0;e<u;e++)f[b*u+e]/=g-m;if(m=g,++g,y=b+1,b=t,g>c)break}return y<h&&f.fill(i,y*u,h*u),[f,d]}const Ot=Ge((e=>Math.sqrt(e)));je(r.dFH,(e=>Math.sqrt(e))),r.dFH;function Ft(e,t,n,a){const o=(0,r.ra8)(e,t.dtype);for(let r=0;r<o.size;r++){const e=o.indexToLoc(r),s=new Array(e.length);for(let t=0;t<s.length;t++)s[t]=e[t]*n[t]+a[t];o.set(t.get(...s),...e)}return o}class Dt{constructor(e,t,n,a,o,s){this.separator=r.ZSL.encodeString(e),this.nGramWidths=t,this.leftPad=r.ZSL.encodeString(n),this.rightPad=r.ZSL.encodeString(a),this.padWidth=o,this.preserveShort=s}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,a,r,o){for(let s=0;s<r;++s){const i=this.getPadWidth(o),c=Math.max(0,i-s),l=Math.max(0,i-(r-(s+1))),u=o-(c+l),h=t+(c>0?0:s-i);let d=0;d+=c*this.leftPad.length;for(let t=0;t<u;++t)d+=e[h+t].length;d+=l*this.rightPad.length;d+=(c+l+u-1)*this.separator.length,n[a+s]=new Uint8Array(d);const p=n[a+s];let f=0;const m=e=>e.forEach((e=>p[f++]=e));for(let e=0;e<c;++e)m(this.leftPad),m(this.separator);for(let t=0;t<u-1;++t)m(e[h+t]),m(this.separator);if(u>0){m(e[h+u-1]);for(let e=0;e<l;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<l-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,a=t.length;if(a>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got ".concat(e));for(let r=1;r<a;++r){let a=t[r]>=e;if(a=a&&t[r]<=n,!a)throw new Error("Invalid split value ".concat(t[r],", must be in [").concat(e,", ").concat(n,"]"));e=t[r]}if(e!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(e))}const o=a-1,s=r.ZSL.getArrayFromDType("int32",a);if(0===n||0===a){const e=new Array(n);for(let t=0;t<=o;++t)s[t]=0;return[e,s]}s[0]=0;for(let r=1;r<=o;++r){const e=t[r]-t[r-1];let n=0;this.nGramWidths.forEach((t=>{n+=this.getNumNGrams(e,t)})),this.preserveShort&&e>0&&0===n&&(n=1),s[r]=s[r-1]+n}const i=new Array(s[o]);for(let r=0;r<o;++r){const n=t[r];let a=s[r];if(this.nGramWidths.forEach((o=>{const s=t[r+1]-t[r],c=this.getNumNGrams(s,o);this.createNGrams(e,n,i,a,c,o),a+=c})),this.preserveShort&&a===s[r]){const o=t[r+1]-t[r];if(0===o)continue;const s=o+2*this.padWidth,c=1;this.createNGrams(e,n,i,a,c,s)}}return[i,s]}}function Lt(e,t,n,a,r,o,s,i){return new Dt(n,a,r,o,s,i).compute(e,t)}function Mt(e,t,n,a){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)a.push(e.subarray(t,t+1));return}if(1===t.length){const r=t[0];let o=e.indexOf(r);for(;-1!==o;){const t=e.subarray(0,o);n&&0===t.length||a.push(t),o=(e=e.subarray(o+1)).indexOf(r)}return void(n&&0===e.length||a.push(e))}let r=0;for(let o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){const t=e.subarray(r,o);n&&0===t.length||a.push(t),r=o+1}}function Pt(e,t,n){const a=e.length,o=[];let s=0,i=0;const c=new Array(a);for(let r=0;r<a;++r){const a=o.length;Mt(e[r],t,n,o);const l=o.length-a;c[r]=l,s+=l,i=Math.max(i,l)}const l=r.ZSL.getArrayFromDType("int32",2*s),u=new Array(s),h=[a,i];let d=0;for(let r=0;r<a;++r)for(let e=0;e<c[r];++e)l[2*d]=r,l[2*d+1]=e,u[d]=o[d],++d;return[l,u,h]}function zt(e,t){const n=r.ZSL.getArrayFromDType("int32",e.length);for(let a=0;a<e.length;++a)n[a]=r.ZSL.fingerPrint64(e[a]).modulo(t).getLowBitsUnsigned();return n}const Bt=Ae(((e,t)=>e-t)),Wt=ze(((e,t,n,a)=>({real:e-n,imag:t-a})));Pe(r.PbM,Bt,Wt),r.PbM;function Ut(e,t){const n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];const a=(0,r.ra8)(n,e.dtype);for(let r=0;r<a.values.length;++r){const t=a.indexToLoc(r),n=new Array(e.rank);for(let a=0;a<n.length;a++)n[a]=t[a]%e.shape[a];const o=e.locToIndex(n);a.values[r]=e.values[o]}return a}const Vt=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function Gt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;a>n;){if(a-n>600){const r=a-n+1,o=t-n+1,s=Math.log(r),i=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*i*(r-i)/r)*Math.sign(o-r/2);Gt(e,t,Math.max(n,Math.floor(t-o*i/r+c)),Math.min(a,Math.floor(t+(r-o)*i/r+c)))}const o=e[t];let s=n,i=a;for(r.ZSL.swap(e,n,t),Vt(e[a],o)>0&&r.ZSL.swap(e,n,a);s<i;){for(r.ZSL.swap(e,s,i),s++,i--;Vt(e[s],o)<0;)s+=1;for(;Vt(e[i],o)>0;)i-=1}0===Vt(e[n],o)?r.ZSL.swap(e,n,i):(i+=1,r.ZSL.swap(e,i,a)),i<=t&&(n=i+1),t<=i&&(a=i-1)}}function jt(e,t,n,a,o){const s=t[t.length-1],[i,c]=[e.length/s,s],l=r.ZSL.getTypedArrayFromDType(n,i*a),u=r.ZSL.getTypedArrayFromDType("int32",i*a);for(let r=0;r<i;r++){const t=r*c,n=e.subarray(t,t+c);let s=new Array(n.length);n.forEach(((e,t)=>s[t]={value:e,index:t})),a<s.length&&(Gt(s,a),s=s.slice(0,a)),o&&s.sort(Vt);const i=r*a,h=l.subarray(i,i+a),d=u.subarray(i,i+a);for(let e=0;e<a;e++)h[e]=s[e].value,d[e]=s[e].index}const h=t.slice();return h[h.length-1]=a,[(0,r.ra8)(h,n,l),(0,r.ra8)(h,"int32",u)]}function Ht(e,t,n,a){const o=r.ZSL.parseAxisParam(t,n)[0],s=[1,n[0],1];for(let r=0;r<o;r++)s[0]*=n[r];s[1]=n[o];for(let r=o+1;r<n.length;r++)s[2]*=n[r];const i={},c=new Int32Array(n[o]),l=new r.ylz(s,a,e),u=[],h=1===s[0]&&1===s[2];for(let r=0;r<n[o];r++){let t;if(h)t=e[r].toString();else{const e=[];for(let t=0;t<s[0];t++)for(let n=0;n<s[2];n++)e.push(l.get(t,r,n));t=e.join(",")}if(void 0!==i[t])c[r]=i[t];else{const e=Object.keys(i).length;i[t]=e,c[r]=e,u.push(r)}}const d=s.slice();d[1]=Object.keys(i).length;const p=new r.ylz(d,a);u.forEach(((e,t)=>{for(let n=0;n<s[0];n++)for(let a=0;a<s[2];a++)p.set(l.get(n,e,a),n,t,a)}));const f=n.slice();return f[o]=d[1],{outputValues:p.values,outputShape:f,indices:c}}const{addImpl:Kt,bincountImpl:qt,bincountReduceImpl:Yt,castImpl:Xt,ceilImpl:Zt,concatImpl:Qt,equalImpl:Jt,expImpl:$t,expm1Impl:en,floorImpl:tn,gatherNdImpl:nn,gatherV2Impl:an,greaterImpl:rn,greaterEqualImpl:on,lessImpl:sn,lessEqualImpl:cn,linSpaceImpl:ln,logImpl:un,maxImpl:hn,maximumImpl:dn,minimumImpl:pn,multiplyImpl:fn,negImpl:mn,notEqualImpl:gn,prodImpl:yn,raggedGatherImpl:bn,raggedTensorToTensorImpl:vn,rangeImpl:xn,rsqrtImpl:wn,scatterImpl:kn,sigmoidImpl:Sn,simpleAbsImpl:In,sliceImpl:Tn,sparseFillEmptyRowsImpl:Cn,sparseReshapeImpl:En,sparseSegmentReductionImpl:Nn,sqrtImpl:Rn,stridedSliceImpl:An,stringNGramsImpl:_n,stringSplitImpl:On,stringToHashBucketFastImpl:Fn,subImpl:Dn,tileImpl:Ln,topKImpl:Mn,transposeImpl:Pn,uniqueImpl:zn}=a;function Bn(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>"".concat(e,".").concat(t)))}function Wn(e,t){return 1===t?[e]:Bn(e,t)}class Un{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ue(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=Wn("rc",this.rank),t=ae(this.rank),n=this.getOutOfBoundsCondition(e),a=this.getSetup(e),r=this.getOutput(e);this.userCode="\n        void main() {\n          ".concat(t," rc = getOutputCoords();\n\n          if(").concat(n,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(a,"\n\n            setOutput(vec4(").concat(r,"));\n          }\n        }\n      ")}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let a=0;a<=1;a++){let r="".concat(0===n?"r":"rp1",", ").concat(0===a?"c":"cp1");for(let t=2;t<this.rank;t++)r="".concat(e[e.length-1-t],",")+r;t.push(r)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let t="";for(let n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],a=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(a,";\n    ")}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){const e=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(e," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}class Vn{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ue(this.outputShape.length);let n="";for(let a=0;a<4;a++){let e="thisRC = rc;";a%2===1&&(e+="thisRC.z += 1;"),a>1&&(e+="thisRC.y += 1;"),n+="\n        ".concat(e,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){const n=t?j(["r","c","d"],"inputShape"):V(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(t,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":H(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(n,"\n\n        setOutput(result);\n      }\n    ")}}class Gn{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,n){const a=Hn(t,n),r=Kn(e,a,n);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const o=jn(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const e=this.freeTextures[r].shift();return this.usedTextures[r].push(e),e}let s;return a===u.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===u.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===u.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===u.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===u.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[r].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,t,n,a){if(null==this.freeTextures)return;const o=Hn(n,a),s=Kn(t,o,a);s in this.freeTextures||(this.freeTextures[s]=[]);const i=jn(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,a),c=(0,r._K2)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==c&&this._numBytesAllocated>c?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[s].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const l=this.usedTextures[s],u=l.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(u,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));const t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function jn(e,t,n,a,r){const o=function(e,t){switch(e){case u.PACKED_2X2_FLOAT32:return Ie(t);case u.PACKED_2X2_FLOAT16:return Te(t);case u.UNPACKED_FLOAT32:return we(t);case u.UNPACKED_FLOAT16:return ke(t);case u.PACKED_4X1_UNSIGNED_BYTE:return Se(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,a);let s;if(r){const[t,n]=p(e[0],e[1]);s=t*n}else{const[t,n]=h(e[0],e[1]);s=t*n}const i=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return s*i}function Hn(e,t){if(e===l.UPLOAD)return u.PACKED_2X2_FLOAT32;if(e===l.RENDER||null==e)return function(e){return(0,r._K2)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?u.PACKED_2X2_FLOAT32:u.UNPACKED_FLOAT32:e?u.PACKED_2X2_FLOAT16:u.UNPACKED_FLOAT16}(t);if(e===l.DOWNLOAD||e===l.PIXELS)return u.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function Kn(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}class qn{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ue(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}const Yn="if (isnan(x)) return x;",Xn="return x;",Zn="return abs(x);";const Qn="return (x >= 0.0) ? x : (exp(x) - 1.0);",Jn=Yn+"\n  return (x < 0.0) ? 0.0 : x;\n",$n=Yn+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",ea="return x;",ta="return 1.0 / (1.0 + exp(-1.0 * x));",na="return x;",aa="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",ra="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",oa="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",sa="return 1.0 / (1.0 + exp(-1.0 * x));";class ia{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ue(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}class ca{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ue(this.outputShape.length);const t=e.length,n=Wn("rc",t),a=ae(t),r=function(e,t){if(1===e)return"rc";let n="";for(let a=0;a<e;a++)n+=t[a],a<e-1&&(n+=",");return n}(t,n),o=n.slice(-2),s=t<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(r,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")}}const la=r.kpo.YO,ua={};const ha=(0,r._K2)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class da extends r.uI_{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!(0,r._K2)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof Ee)t=e;else{const n=i((0,r._K2)().getNumber("WEBGL_VERSION"),e);t=new Ee(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=i((0,r._K2)().getNumber("WEBGL_VERSION"));t=new Ee(e),this.binaryCache=((n=(0,r._K2)().getNumber("WEBGL_VERSION"))in ua||(ua[n]={}),ua[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Gn(this.gpgpu),this.numMBBeforeWarning=null==(0,r._K2)().global.screen?1024:(0,r._K2)().global.screen.height*(0,r._K2)().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new r.GJx(this,(0,r.Hi9)())}nextDataId(){return da.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,t,n){if(((0,r._K2)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,r._K2)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:t,dtype:n,values:e,usage:l.UPLOAD,refCount:1}),a}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,a,o){if((0,r._K2)().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===a)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:a,values:t,usage:l.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:a,complexTensorInfos:o,slice:s,shape:i,isPacked:c}=t;if(null!=s){let t;t=c?new ia(i,ea):new qn(i,ea);const n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:a}],a),r=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===a)return n;const l=null!=this.activeTimers;let u,h;if(l&&(u=r.ZSL.now()),"complex64"===a){const e=this.readSync(o.real.dataId),t=this.readSync(o.imag.dataId);h=r.backend_util.mergeRealAndImagArrays(e,t)}else h=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=r.ZSL.now()-u),this.convertAndCacheOnCPU(e,h)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:a,slice:o,dtype:s,complexTensorInfos:i,isPacked:c}=t;if(null!=o){let t;t=c?new ia(a,ea):new qn(a,ea);const n=this.runWebGLProgram(t,[{dataId:e,shape:a,dtype:s}],s),r=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=n)return this.convertAndCacheOnCPU(e);if((0,r._K2)().getBool("DEBUG")&&!(0,r._K2)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===(0,r._K2)().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,u,h=null;if("complex64"!==s&&(0,r._K2)().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);h=this.gpgpu.createBufferFromTexture(t.texture.texture,...d(a))}if(this.pendingRead.set(e,[]),"complex64"!==s&&await this.gpgpu.createAndWaitForFence(),"complex64"===s){const e=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]),t=e[0],n=e[1];u=r.backend_util.mergeRealAndImagArrays(t,n)}else if(null==h)u=this.getValuesFromTexture(e);else{const e=r.ZSL.sizeFromShape(a);u=this.gpgpu.downloadFloat32MatrixFromBuffer(h,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=h){const e=this.gpgpu.gl;m(e,(()=>e.deleteBuffer(h)))}const p=this.convertAndCacheOnCPU(e,u),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach((e=>e(p))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&(0,r.Hi9)().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(e),{values:a,shape:o,slice:s,dtype:i,isPacked:c,texture:l}=n;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=s){let n;n=c?new ia(o,ea):new qn(o,ea);const a=this.runWebGLProgram(n,[{dataId:e,shape:o,dtype:i}],i),r=this.readToGPU(a,t);return this.disposeIntermediateTensorInfo(a),r}if(null==l)throw null!=a?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,t.customTexShape),h=(0,r.Hi9)().makeTensorFromTensorInfo(u),d=this.texData.get(u.dataId);return Object.assign({tensorRef:h},d.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>r.ZSL.decodeString(e)));return(0,r.ra8)(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,r.ra8)(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!g(n)){if((0,r._K2)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:a}=this.texData.get(e),o=r.ZSL.sizeFromShape(t);if((0,r._K2)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),a=this.texData.get(n.dataId),r=this.gpgpu.downloadMatrixFromPackedTexture(a.texture.texture,...d(t)).subarray(0,o);return this.disposeIntermediateTensorInfo(n),r}const s=(0,r._K2)().getBool("WEBGL_PACK")&&!0===a,i=s?A(t):t,c=s?new fe(i):new pe(i),l=this.runWebGLProgram(c,[{shape:i,dtype:n,dataId:e}],"float32"),u=this.texData.get(l.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(l),h}timerAvailable(){return(0,r._K2)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let a=!1;null==this.programTimersStack?(this.programTimersStack=n,a=!0):this.activeTimers.push(n),this.activeTimers=n,e();const o=r.ZSL.flatten(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),s=r.ZSL.flatten(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,a&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if((0,r._K2)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(o);i.kernelMs=r.ZSL.sum(e),i.getExtraProfileInfo=()=>e.map(((e,t)=>({name:s[t],ms:e}))).map((e=>"".concat(e.name,": ").concat(e.ms))).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return(0,r._K2)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:r.ZSL.now(),endMs:null}}endTimer(e){return(0,r._K2)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=r.ZSL.now(),e)}async getQueryTime(e){if((0,r._K2)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:a,usage:r,isPacked:o,slice:s}=this.texData.get(e),i=s&&s.origDataId||e,c=this.dataRefCount.get(i);c>1?this.dataRefCount.set(i,c-1):(this.dataRefCount.delete(i),null!=t&&(this.numBytesInGPU-=this.computeBytes(a,n),this.textureManager.releaseTexture(t,a,r,o)));const l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ha;return(0,r._K2)().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&r.ZSL.sizeFromShape(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){r.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return la(e.shape,t)}packedUnaryOp(e,t,n){const a=new ia(e.shape,t),o=this.compileAndRun(a,[e],n);return(0,r.Hi9)().makeTensorFromTensorInfo(o)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=In(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if((0,r._K2)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Zn,e.dtype);const t=new qn(e.shape,Zn),n=this.compileAndRun(t,[e]);return(0,r.Hi9)().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let a;if("string"===t&&null!=n&&n.length>0&&r.ZSL.isString(n[0])){const o=n.map((e=>r.ZSL.encodeString(e)));a=this.write(o,e,t)}else a=this.write(n,e,t);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:t}}makeOutput(e,t,n){return(0,r.Hi9)().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new ca(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new Un(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[N(e.shape),...R(e.shape)],a={dtype:e.dtype,shape:n,dataId:e.dataId},r=[N(t),...R(t)],o=new Vn(r,n),s=[n],i=this.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:a,shape:o,dtype:s}=n;if(null!=t){const e=r.ZSL.sizeFromShape(o),n=t[0]*t[1]*4;r.ZSL.assert(e<=n,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."))}const i=A(o);let c;c=a?new de(i):new he(i);const l=[null!=t?t:d(i)];return{dtype:s,shape:o,dataId:this.runWebGLProgram(c,[{shape:i,dtype:s,dataId:e}],s,l,!0,t).dataId}}runWebGLProgram(e,t,n,a){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0;const i=this.makeTensorInfo(e.outputShape,n),l=this.texData.get(i.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===c.DENSE){const t=null!=s?s:d(e.outputShape);l.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(l.usage=e.outTexUsage),0===r.ZSL.sizeFromShape(i.shape))return l.values=r.ZSL.getTypedArrayFromDType(i.dtype,0),i;const u=[],h=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&r.ZSL.sizeFromShape(t.shape)<=(0,r._K2)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),u.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!O(n.shape,t.shape)){const e=t,a=t.shape;t.shape=n.shape,t=this.packedReshape(t,a),u.push(t),n=this.texData.get(t.dataId),e.shape=a}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(i.dataId);const p={shape:i.shape,texData:l,isUniform:!1},f=function(e,t,n){let a="";t.concat(n).forEach((t=>{const o=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const s=t.texData.texShape,{useSqueezeShape:i,uniformShape:c,keptDims:l}=re(e.packedInputs,t.shape,s);let u="",h="",d="";if(1===c.length&&e.packedInputs){const e=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];u="".concat(e[0]>1,"_").concat(e[1]>1)}else if(2!==c.length||e.packedInputs){if(c.length>2&&!e.packedInputs){const e=r.ZSL.computeStrides(c);d="".concat(e[0]===s[1],"_").concat(e[e.length-1]===s[1])}}else h="".concat(c[0]>1,"_").concat(c[1]>1);const p=t.shape.length,f=2===c.length&&r.ZSL.arraysEqual(t.shape,s),m=1===r.ZSL.sizeFromShape(t.shape),g=r.backend_util.getBroadcastDims(t.shape,n.shape),y=!e.packedInputs&&p===n.shape.length&&r.ZSL.arraysEqual(s,n.texData.texShape),b=e.packedInputs||c.length>2?"":"".concat(s[0]>1,"_").concat(s[1]>1);a+="".concat(p,"_").concat(y,"_").concat(i?l:"","_").concat(c.length,"_").concat(m,"_").concat(g,"_").concat(f,"_").concat(u,"_").concat(h,"_").concat(d,"_").concat(b,"_").concat(o)}else{const e=t.isUniform?"uniform":t.texData.texShape;a+="".concat(t.shape,"_").concat(e,"_").concat(o)}}));const o=e.userCode;let s=e.constructor.name;return s+="_"+a+"_"+o+"".concat((0,r._K2)().getNumber("WEBGL_VERSION")),s}(e,h,p),m=this.getAndSaveBinary(f,(()=>ie(this.gpgpu,e,h,p))),g=null!=this.activeTimers;let y;g&&(y=this.startTimer()),(0,r._K2)().get("ENGINE_COMPILE_ONLY")||function(e,t,n,a,o){t.program.enableShapeUniforms||(le(t.inShapeInfos,n),le([t.outShapeInfo],[a]));const s=a.texData.texture,i=a.texData.texShape;a.texData.isPacked?e.setOutputPackedMatrixTexture(s.texture,i[0],i[1]):e.setOutputMatrixTexture(s.texture,i[0],i[1]),e.setProgram(t.webGLProgram),1===(0,r._K2)().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach(((n,a)=>{const o=t.program.variableNames[a],s=t.uniformLocations[o],i=t.uniformLocations["offset".concat(o)],c=t.inShapesLocations["".concat(o,"Shape")],l=t.inTexShapesLocations["".concat(o,"TexShape")];if(c){const{uniformShape:a}=re(t.program.packedInputs,n.shape,n.texData.texShape);switch(a.length){case 1:e.gl.uniform1iv(c,new Int32Array(a));break;case 2:e.gl.uniform2iv(c,new Int32Array(a));break;case 3:e.gl.uniform3iv(c,new Int32Array(a));break;case 4:e.gl.uniform4iv(c,new Int32Array(a))}}if(l&&e.gl.uniform2i(l,n.texData.texShape[0],n.texData.texShape[1]),null!=s)if(n.isUniform)if(r.ZSL.sizeFromShape(n.shape)<2)e.gl.uniform1f(s,n.uniformValues[0]);else{let t=n.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(s,t)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,s,a)}));const c=t.outShapeLocation;if(c)switch(a.shape.length){case 1:e.gl.uniform1iv(c,new Int32Array(a.shape));break;case 2:e.gl.uniform2iv(c,new Int32Array(a.shape));break;case 3:e.gl.uniform3iv(c,new Int32Array(a.shape));break;case 4:e.gl.uniform4iv(c,new Int32Array(a.shape))}if(t.outShapeStridesLocation){const n=r.ZSL.computeStrides(a.shape);switch(a.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,a.texData.texShape[0],a.texData.texShape[1]),t.program.customUniforms&&o&&t.program.customUniforms.forEach(((n,a)=>{const r=t.customUniformLocations[a],s=o[a];if("float"===n.type)e.gl.uniform1fv(r,s);else if("vec2"===n.type)e.gl.uniform2fv(r,s);else if("vec3"===n.type)e.gl.uniform3fv(r,s);else if("vec4"===n.type)e.gl.uniform4fv(r,s);else if("int"===n.type)e.gl.uniform1iv(r,s);else if("ivec2"===n.type)e.gl.uniform2iv(r,s);else if("ivec3"===n.type)e.gl.uniform3iv(r,s);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(r,s)}})),e.executeProgram()}(this.gpgpu,m,h,p,a),u.forEach((e=>this.disposeIntermediateTensorInfo(e))),g&&(y=this.endTimer(y),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(y)}));const b=(0,r._K2)().get("WEBGL_FLUSH_THRESHOLD");if(b>0){const e=r.ZSL.now();e-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!(0,r._K2)().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&!1===o){const e=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),e}return i}compileAndRun(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,a,r)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!(0,r._K2)().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,r.DZQ)((()=>{if(!(0,r._K2)().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=(0,r._K2)().getBool("DEBUG");(0,r._K2)().set("DEBUG",!1);const t=this.abs((0,r.d_2)(1e-8)).dataSync()[0];if((0,r._K2)().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:a,values:o,texture:s,usage:i,isPacked:c}=t;if(null!=s)return;const u=null!=this.activeTimers;let h;u&&(h=r.ZSL.now());let d=t.texShape;if(null==d&&(d=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,r._K2)().getNumber("WEBGL_MAX_TEXTURE_SIZE"),a=(0,r._K2)().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(a===1/0&&(0,r._K2)().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(a=n/2),t&&(n*=2,a*=2,1===(e=e.map(((t,n)=>n>=e.length-2?r.ZSL.nearestLargerEven(e[n]):e[n]))).length&&(e=[2,e[0]])),2!==e.length){const t=r.ZSL.squeezeShape(e);e=t.newShape}let o=r.ZSL.sizeFromShape(e),s=null;e.length<=1&&o<=n?s=[1,o]:2===e.length&&e[0]<=n&&e[1]<=n?s=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?s=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?s=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?s=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(s=[e[0],e[1]*e[2]*e[3]]);const i=null!=s&&Math.max(...s)>a&&Math.min(...s)<=(t?2:1)&&Math.min(...s)>0;if(null==s||i)if(t){const t=N(e);let n=2,a=2;e.length&&([n,a]=R(e)),o=t*(n/2)*(a/2),s=r.ZSL.sizeToSquarishShape(o).map((e=>2*e))}else s=r.ZSL.sizeToSquarishShape(o);return s}(n,c),t.texShape=d),null!=o){const e=A(n);let s,i=d[1],f=d[0];const m=o instanceof Uint8Array||o instanceof Uint8ClampedArray;!c&&m||([i,f]=p(d[0],d[1])),s=c?new ge(e,m):new me(e,m);const g=m?[f,i]:d,y=this.makeTensorInfo(g,a),b=this.texData.get(y.dataId);b.usage=m?l.PIXELS:l.UPLOAD,b.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),i,f,o);const v=[[f,i]],x=!0,w=this.runWebGLProgram(s,[y],a,v,x),k=this.texData.get(w.dataId);t.texShape=k.texShape,t.isPacked=k.isPacked,t.usage=k.usage,(0,r._K2)().get("ENGINE_COMPILE_ONLY")?this.disposeData(w.dataId):(t.texture=k.texture,t.values=null,this.texData.delete(w.dataId)),this.disposeIntermediateTensorInfo(y),u&&(this.uploadWaitMs+=r.ZSL.now()-h)}else{const e=this.acquireTexture(d,i,a,c);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:a}=n;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype ".concat(t))}(t,a)),n.values}acquireTexture(e,t,n,a){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(e," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,a)}computeBytes(e,t){return e[0]*e[1]*r.ZSL.bytesPerElement(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(n){throw n}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await(0,r.dA1)(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw v(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const[,e]of Object.entries(this.binaryCache)){const{uniformLocations:t,customUniformLocations:n,infLoc:a,nanLoc:r,inShapesLocations:o,inTexShapesLocations:s,outShapeLocation:i,outShapeStridesLocation:c,outTexShapeLocation:l}=ce(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=t,e.customUniformLocations=n,e.infLoc=a,e.nanLoc=r,e.inShapesLocations=o,e.inTexShapesLocations=s,e.outShapeLocation=i,e.outShapeStridesLocation=c,e.outTexShapeLocation=l}}}da.nextDataId=0,r.eMq.isBrowser()&&(0,r.gJX)("webgl",(()=>new da),2);const pa="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class fa{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=r.backend_util.assertAndGetBroadcastShape(t,n),this.enableShapeUniforms=ue(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}}const ma="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class ga{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r.backend_util.assertAndGetBroadcastShape(t,n);const o=this.outputShape.length;this.enableShapeUniforms=ue(o);let s="";if(a)if(0===o||1===r.ZSL.sizeFromShape(this.outputShape))s="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const e=ae(o);if(s="\n          ".concat(e," coords = getOutputCoords();\n        "),1===o)this.enableShapeUniforms?s+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":s+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{const e=Wn("coords",o);this.enableShapeUniforms?s+="\n            bool nextRowOutOfBounds =\n              (".concat(e[o-2]," + 1) >= outShape[").concat(o," - 2];\n            bool nextColOutOfBounds =\n              (").concat(e[o-1]," + 1) >= outShape[").concat(o," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):s+="\n            bool nextRowOutOfBounds =\n              (".concat(e[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(e[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(s,"\n\n        setOutput(result);\n      }\n    ")}}function ya(e){const{inputs:t,backend:n}=e,{x:a}=t;return n.incRef(a.dataId),{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}const ba={kernelName:r.lzr,backendName:"webgl",kernelFunc:ya};function va(e){const{inputs:t,backend:n}=e,{real:a,imag:r}=t,o=n.makeTensorInfo(a.shape,"complex64"),s=n.texData.get(o.dataId),i=ya({inputs:{x:a},backend:n}),c=ya({inputs:{x:r},backend:n});return s.complexTensorInfos={real:i,imag:c},o}const xa={kernelName:r.pr3,backendName:"webgl",kernelFunc:va},wa="return (a < 0.) ? b * a : a;",ka="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const Sa={kernelName:r.X0$,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{alpha:s}=a,i=n.makeTensorInfo([],"float32",r.ZSL.createScalarValue(s,"float32")),c=(0,r._K2)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ga(ka,o.shape,i.shape):new fa(wa,o.shape,i.shape),l=n.runWebGLProgram(c,[o,i],"float32");return n.disposeIntermediateTensorInfo(i),l}},Ia="return (a < 0.) ? b * a : a;",Ta="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const Ca={kernelName:r.Ncv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a,alpha:o}=t,s=(0,r._K2)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ga(Ta,a.shape,o.shape):new fa(Ia,a.shape,o.shape);return n.runWebGLProgram(s,[a,o],"float32")}},Ea="if (isnan(x)) return x;";function Na(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:a,dtype:o}=e;return e=>{let{inputs:s,backend:i}=e;const{x:c}=s,l=i,u=o||c.dtype;if(l.shouldExecuteOnCPU([c])&&null!=a){const e=l.texData.get(c.dataId),t=a(e.values,u);return l.makeTensorInfo(c.shape,u,t)}let h;return h=(0,r._K2)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new ia(c.shape,n):new qn(c.shape,t),l.runWebGLProgram(h,[c],u)}}function Ra(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:a=!1,supportsComplex:o=!1,cpuKernelImpl:s,dtype:i}=e;return e=>{let{inputs:c,backend:l}=e;const{a:u,b:h}=c,d=l;if(o&&"complex64"===u.dtype){const e=d.texData.get(u.dataId),n=d.texData.get(h.dataId),[a,o]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((e=>{const[n,a]=e,o={dataId:n.dataId,dtype:n.dtype,shape:u.shape},s={dataId:a.dataId,dtype:a.dtype,shape:h.shape},i=new fa(t,u.shape,h.shape);return d.runWebGLProgram(i,[o,s],(0,r.TuY)(n.dtype,a.dtype))})),s=va({inputs:{real:a,imag:o},backend:d});return d.disposeIntermediateTensorInfo(a),d.disposeIntermediateTensorInfo(o),s}const p=i||(0,r.TuY)(u.dtype,h.dtype);if(("string"===u.dtype||"string"===h.dtype||d.shouldExecuteOnCPU([u,h]))&&null!=s){const e=d.texData.get(u.dataId).values,t=d.texData.get(h.dataId).values,n="string"===u.dtype?r.backend_util.fromUint8ToStringArray(e):e,a="string"===u.dtype?r.backend_util.fromUint8ToStringArray(t):t,[o,i]=s(u.shape,h.shape,n,a,p),c=d.makeTensorInfo(i,p);return d.texData.get(c.dataId).values=o,c}let f;return f=(0,r._K2)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new ga(n,u.shape,h.shape,a):new fa(t,u.shape,h.shape),d.runWebGLProgram(f,[u,h],p)}}function Aa(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?na:Xn;if("relu"===e)return t?ra:Jn;if("elu"===e)return t?aa:Qn;if("relu6"===e)return t?oa:$n;if("prelu"===e)return t?Ta:Ia;if("leakyrelu"===e)return t?ka:wa;if("sigmoid"===e)return t?sa:ta;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}class _a{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,i=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=ue(this.outputShape.length);const l=a?e[1]:e[2],u=Math.ceil(l/2),h=a?"i * 2, rc.y":"rc.y, i * 2",d=r?"rc.z, i * 2":"i * 2, rc.z",p=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";s&&(m=i?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),g="result = activation(result);");const y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let b="rc.x",v="rc.x";e[0]<t[0]?b="int(min(float(rc.x), ".concat(e[0]-1,".))"):t[0]<e[0]&&(v="int(min(float(rc.x), ".concat(t[0]-1,".))")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(u,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(u,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(v,";\n          vec4 a = getMatrixA(batchA, ").concat(h,");\n          vec4 b = getMatrixB(batchB, ").concat(d,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(f[0],");\n          result += (").concat(p[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")}}const Oa={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class Fa{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=r.backend_util.assertAndGetBroadcastShape(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}}const Da="return a * b;";function La(e){const{inputs:t,backend:n}=e,{a:a,b:o}=t,s=r.backend_util.upcastType(a.dtype,o.dtype);if("complex64"===a.dtype){const e=n.texData.get(a.dataId),t=n.texData.get(o.dataId),r=new Fa(Oa.REAL,a.shape,o.shape),s=new Fa(Oa.IMAG,a.shape,o.shape),i=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:a.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:o.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:o.shape}],c=n.runWebGLProgram(r,i,"float32"),l=n.runWebGLProgram(s,i,"float32"),u=va({inputs:{real:c,imag:l},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),u}if(n.shouldExecuteOnCPU([a,o])){const e=n.texData.get(a.dataId),t=n.texData.get(o.dataId),[r,i]=fn(a.shape,o.shape,e.values,t.values,s),c=n.makeTensorInfo(i,s);return n.texData.get(c.dataId).values=r,c}let i;return i=(0,r._K2)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ga(Da,a.shape,o.shape):new fa(Da,a.shape,o.shape),n.runWebGLProgram(i,[a,o],s)}const Ma={kernelName:r.xu7,backendName:"webgl",kernelFunc:La};function Pa(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{shape:s}=a,i=n,c=r.ZSL.sizeFromShape(o.shape),l=r.ZSL.inferFromImplicitShape(s,c),u=r.ZSL.sizeFromShape(l);r.ZSL.assert(c===u,(()=>"The new shape (".concat(l,") has ").concat(u," elements and the old ")+"shape (".concat(o.shape,") has ").concat(c," elements. The new shape and old ")+"shape must have the same number of elements."));const h=i.texData.get(o.dataId);return!h.isPacked||O(o.shape,l)||null!==h.texture&&O(h.shape,l)?(i.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype}):function(e,t,n){const a=[N(e.shape),...R(e.shape)],r={dtype:e.dtype,shape:a,dataId:e.dataId},o=[N(t),...R(t)],s=new Vn(o,a),i=[a],c=n.runWebGLProgram(s,[r],e.dtype,i,!0);return{dataId:c.dataId,shape:t,dtype:c.dtype}}(o,l,i)}const za={kernelName:r.R23,backendName:"webgl",kernelFunc:Pa};class Ba{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:a,inSize:o,outSize:s}=e;this.outputShape=[a,s];const i=4*Math.floor(n/4),c=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l="sumValue += dot(values * ".concat(r.ZSL.isInt(e)?e.toPrecision(2):e,", ones);")}let u="";o%n>0&&(u="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(u,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(i,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(i,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")}}class Wa{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:a,inSize:r,outSize:o}=e;this.outputShape=[a,o];let s="0.0",i="";"prod"===t?s="1.0":"min"===t?(s="1.0 / 1e-20",i="min"):"max"===t&&(s="-1.0 / 1e-20",i="max");let c="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?c="sumValue":"prod"===t?c="prodValue":"all"===t?c="allValue":"any"===t&&(c="anyValue");const l=4*Math.floor(n/4),u=n%4;let h="\n      if (".concat("sum"===t,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===t,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(i,"(values, minMaxValue);\n        if (").concat("min"===t," || ").concat("max"===t,") {\n          minMaxValue = ").concat(i,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),d="vec4";"all"===t?(s="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(s="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";r%n>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(2===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(3===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}}function Ua(e,t,n,a){const o=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],a=r.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:a,outSize:Math.ceil(n/a)})}return t}(e.shape);let s=e;for(let r=0;r<o.length;r++){const{inSize:i,windowSize:c,outSize:l}=o[r];let u,h;u="mean"===n?0===r?new Ba({windowSize:c,inSize:i,batchSize:e.shape[0],outSize:l},i):new Ba({windowSize:c,inSize:i,batchSize:e.shape[0],outSize:l}):new Wa({windowSize:c,inSize:i,batchSize:e.shape[0],outSize:l},n),h=s,s=a.runWebGLProgram(u,[s],t),h.dataId!==e.dataId&&a.disposeIntermediateTensorInfo(h)}return s}class Va{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[t[o]];this.outputShape=n,this.rank=n.length;const a=ae(this.rank),r=function(e){const t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],a=new Array(t);for(let r=0;r<e.length;r++)a[e[r]]=n[r];return a.join()}(t);this.userCode="\n    void main() {\n      ".concat(a," resRC = getOutputCoords();\n      setOutput(getA(").concat(r,"));\n    }\n    ")}}class Ga{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let l=0;l<n.length;l++)n[l]=e[t[l]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));const a=ae(this.rank),r=Bn("rc",this.rank),o=new Array(this.rank);for(let l=0;l<t.length;l++)o[t[l]]=r[l];const s="vec2(".concat(o.slice(-2).join(),")"),i="++".concat(r[this.rank-1]," < ").concat(n[this.rank-1]),c="getChannel(getA(".concat(o.join(),"), ").concat(s,")");this.userCode="\n    void main() {\n      ".concat(a," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(c,";\n      if(").concat(i,") {\n        result[1] = ").concat(c,";\n      }\n      --").concat(r[this.rank-1],";\n      if(++").concat(r[this.rank-2]," < ").concat(n[this.rank-2],") {\n        result[2] = ").concat(c,";\n        if(").concat(i,") {\n          result[3] = ").concat(c,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}}function ja(e,t,n){const a=(0,r._K2)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ga(e.shape,t):new Va(e.shape,t);return n.runWebGLProgram(a,[e],e.dtype)}function Ha(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{axis:s,keepDims:i}=a;return function(e,t,n,a){const o=t,s=e.shape.length,i=r.ZSL.parseAxisParam(o,e.shape);let c=i;const l=r.backend_util.getAxesPermutation(c,s),u=null!=l;let h=e;u&&(h=ja(e,l,a),c=r.backend_util.getInnerMostAxes(c.length,s)),r.backend_util.assertAxesAreInnerMostDims("sum",c,s);const[d,p]=r.backend_util.computeOutAndReduceShapes(h.shape,c);let f=d;n&&(f=r.backend_util.expandShapeToKeepDim(d,i));const m=r.ZSL.sizeFromShape(p),g=Pa({inputs:{x:h},attrs:{shape:[r.ZSL.sizeFromShape(e.shape)/m,m]},backend:a}),y=Ua(g,(0,r.chL)(e.dtype),"sum",a),b=Pa({inputs:{x:y},attrs:{shape:f},backend:a});return a.disposeIntermediateTensorInfo(g),a.disposeIntermediateTensorInfo(y),u&&a.disposeIntermediateTensorInfo(h),b}(o,s,i,n)}const Ka={kernelName:r.WuN,backendName:"webgl",kernelFunc:Ha};function qa(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{perm:o}=a,s=n,i=r.shape.length,c=new Array(i);for(let u=0;u<c.length;u++)c[u]=r.shape[o[u]];let l;if(s.shouldExecuteOnCPU([r])){const e=s.texData.get(r.dataId).values,t=Pn(e,r.shape,r.dtype,o,c);l=s.makeTensorInfo(c,r.dtype);s.texData.get(l.dataId).values=t}else l=ja(r,o,s);return l}const Ya={kernelName:r.wx0,backendName:"webgl",kernelFunc:qa},Xa=1e3;function Za(e){let{a:t,b:n,transposeA:a,transposeB:o,backend:s,bias:i=null,preluActivationWeights:c=null,leakyreluAlpha:l=0,activation:u=null}=e;const h=t.shape.length,d=n.shape.length,p=a?t.shape[h-2]:t.shape[h-1],f=o?n.shape[d-1]:n.shape[d-2],m=a?t.shape[h-1]:t.shape[h-2],g=o?n.shape[d-2]:n.shape[d-1],y=t.shape.slice(0,-2),b=n.shape.slice(0,-2),v=r.ZSL.sizeFromShape(y),x=r.ZSL.sizeFromShape(b),w=r.ZEY.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([m,g]);r.ZSL.assert(p===f,(()=>"Error in matMul: inner shapes (".concat(p,") and (")+"".concat(f,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")));const k=a?[v,p,m]:[v,m,p],S=o?[x,g,f]:[x,f,g],I=Pa({inputs:{x:t},backend:s,attrs:{shape:k}}),T=Pa({inputs:{x:n},backend:s,attrs:{shape:S}}),C=[I,T],E=Math.max(v,x),N=a?I.shape[1]:I.shape[2],R=null!=i,A=null!=c,_="leakyrelu"===u,O=null!=u?Aa(u,!0):null;let F;if((1===m||1===g)&&N>Xa&&!1===(R||A||_||null!=O)){let e=I,t=T;a&&(e=qa({inputs:{x:I},backend:s,attrs:{perm:[0,2,1]}}),C.push(e)),o&&(t=qa({inputs:{x:T},backend:s,attrs:{perm:[0,2,1]}}),C.push(t));const n=1===g;let r=e;1!==g&&(r=Pa({inputs:{x:e},backend:s,attrs:{shape:[E,N,1]}}),C.push(r));const i=1===g?2:1;let c=t;n&&(c=Pa({inputs:{x:t},backend:s,attrs:{shape:[E,1,N]}}),C.push(c));const l=La({inputs:{a:r,b:c},backend:s});F=Ha({inputs:{x:l},backend:s,attrs:{axis:i,keepDims:!0}}),C.push(l)}else{const e=(0,r.TuY)(t.dtype,n.dtype),u=new _a(k,S,[E,m,g],a,o,R,O,A,_),h=[I,T];if(null!=i&&h.push(i),A&&h.push(c),_){const e=s.makeTensorInfo([],"float32",r.ZSL.createScalarValue(l,"float32"));h.push(e),C.push(e)}F=s.runWebGLProgram(u,h,e)}const D=Pa({inputs:{x:F},backend:s,attrs:{shape:w}});C.push(F);for(const r of C)s.disposeIntermediateTensorInfo(r);return D}const Qa={kernelName:r.Dr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o,bias:s,preluActivationWeights:i}=t,{transposeA:c,transposeB:l,activation:u,leakyreluAlpha:h}=a;return Za({a:r,b:o,transposeA:c,transposeB:l,backend:n,bias:s,preluActivationWeights:i,leakyreluAlpha:h,activation:u})}},Ja="return abs(x);";const $a={kernelName:r.ljI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t;if(n.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){const e=n.texData.get(a.dataId),t=In(e.values);return n.makeTensorInfo(a.shape,a.dtype,t)}let o;return o=(0,r._K2)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new ia(a.shape,Ja):new qn(a.shape,Ja),n.runWebGLProgram(o,[a],a.dtype)}},er=Na({opSnippet:Yn+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),tr={kernelName:r.Vvy,backendName:"webgl",kernelFunc:er},nr=Na({opSnippet:Yn+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),ar={kernelName:r.PH8,backendName:"webgl",kernelFunc:nr},rr="return a + b;",or=Ra({opSnippet:rr,packedOpSnippet:rr,supportsComplex:!0,cpuKernelImpl:Kt}),sr={kernelName:r.OMN,backendName:"webgl",kernelFunc:or};class ir{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>"T".concat(t)));const n=[];this.variableNames.forEach((e=>{n.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));const a=this.variableNames.map((e=>"v".concat(e))).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}}class cr{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>"T".concat(t)));const n=[];this.variableNames.forEach((e=>{n.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));const a=this.variableNames.map((e=>"v".concat(e))).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}}const lr={kernelName:r.EkD,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:a}=t,o=n;if(1===o.length)return ya({inputs:{x:o[0]},backend:a});if(o.length>(0,r._K2)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(o.length/2),n=e({inputs:o.slice(0,t),backend:a}),r=e({inputs:o.slice(t),backend:a});return e({inputs:[n,r],backend:a})}const s=o.map((e=>e.dtype)).reduce(((e,t)=>(0,r.TuY)(e,t))),i=o.map((e=>e.shape)),c=(0,r._K2)().getBool("WEBGL_PACK")?new cr(o[0].shape,i):new ir(o[0].shape,i);return a.runWebGLProgram(c,o,s)}};const ur={kernelName:r.u8Z,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{axis:s,keepDims:i}=a,c=o.shape.length,l=r.ZSL.parseAxisParam(s,o.shape);let u=l;const h=r.backend_util.getAxesPermutation(u,c);let d=o;null!=h&&(d=qa({inputs:{x:o},backend:n,attrs:{perm:h}}),u=r.backend_util.getInnerMostAxes(u.length,c)),r.backend_util.assertAxesAreInnerMostDims("all",u,c);const[p,f]=r.backend_util.computeOutAndReduceShapes(d.shape,u),m=Pa({inputs:{x:d},backend:n,attrs:{shape:[-1,r.ZSL.sizeFromShape(f)]}}),g=Ua(m,m.dtype,"all",n);let y;if(i){y=Pa({inputs:{x:g},backend:n,attrs:{shape:r.backend_util.expandShapeToKeepDim(p,l)}})}else y=Pa({inputs:{x:g},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=h&&n.disposeIntermediateTensorInfo(d),y}};const hr={kernelName:r.FSt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{axis:s,keepDims:i}=a,c=o.shape.length,l=r.ZSL.parseAxisParam(s,o.shape);let u=l;const h=r.backend_util.getAxesPermutation(u,c);let d=o;null!=h&&(d=qa({inputs:{x:o},backend:n,attrs:{perm:h}}),u=r.backend_util.getInnerMostAxes(u.length,c)),r.backend_util.assertAxesAreInnerMostDims("any",u,c);const[p,f]=r.backend_util.computeOutAndReduceShapes(d.shape,u),m=Pa({inputs:{x:d},backend:n,attrs:{shape:[-1,r.ZSL.sizeFromShape(f)]}}),g=Ua(m,m.dtype,"any",n);let y;if(i){y=Pa({inputs:{x:g},backend:n,attrs:{shape:r.backend_util.expandShapeToKeepDim(p,l)}})}else y=Pa({inputs:{x:g},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=h&&n.disposeIntermediateTensorInfo(d),y}};class dr{constructor(e,t,n){this.variableNames=["A"];const{windowSize:a,batchSize:r,outSize:o}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[r,o];const s="max"===t?">":"<",i=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(i,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}}class pr{constructor(e,t,n,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,r.ZSL.assert(e.length>2,(()=>"Packed arg".concat(n.charAt(0).toUpperCase()+n.slice(1)," supports only inputs with rank above 2.")));const o=e[e.length-1],s=Math.ceil(o/t);this.outputShape=e.slice(0,-1),s>1&&this.outputShape.push(s),a||this.variableNames.push("bestIndicesA");const i=this.outputShape,c=i.length,l=ae(c),u=Wn("coords",c);let h,d;if(1===s){d=c+1;const e=ae(d);h="\n        ".concat(e," sourceLocR = ").concat(e,"(").concat(u.join(),", 0);\n        ++").concat(u[c-1],";\n        ").concat(e," sourceLocG = ").concat(e,"(").concat(u.join(),", 0);\n        ++").concat(u[c-2],";\n        ").concat(e," sourceLocA = ").concat(e,"(").concat(u.join(),", 0);\n        --").concat(u[c-1],";\n        ").concat(e," sourceLocB = ").concat(e,"(").concat(u.join(),", 0);\n        --").concat(u[c-2],";")}else d=c,h="\n        ".concat(l," sourceLocR = coords;\n        ++").concat(u[c-1],";\n        ").concat(l," sourceLocG = coords;\n        ++").concat(u[c-2],";\n        ").concat(l," sourceLocA = coords;\n        --").concat(u[c-1],";\n        ").concat(l," sourceLocB = coords;\n        --").concat(u[c-2],";");const p=["x","y","z","w","u","v"].slice(0,d),f="."+p[d-1],m=p.map((e=>"int "+e)),g=Wn("sourceLocR",d-1).concat("inIdx.r"),y=Wn("sourceLocG",d-1).concat("inIdx.g"),b=Wn("sourceLocB",d-1).concat("inIdx.b"),v=Wn("sourceLocA",d-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(v.join(),")));"),k="vec4(\n            getAChannel(".concat(g.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(v.join(),") : 0.)"),S=a?"":"\n      float getBestIndicesAChannel(".concat(m.join(),") {\n        return getChannel(getBestIndicesA(").concat(p.join(),"),\n                                          vec2(").concat(p.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(m.join(),") {\n        return getChannel(getA(").concat(p.join(),"),\n                               vec2(").concat(p.slice(-2).join(),"));\n      }\n      ").concat(S,"\n      void main() {\n        ").concat(l," coords = getOutputCoords();\n        bool hasNextCol = ").concat(u[c-1]," < ").concat(i[c-1]-1,";\n        bool hasNextRow = ").concat(u[c-2]," < ").concat(i[c-2]-1,";\n        ").concat(h,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(f,", sourceLocG").concat(f,",\n          sourceLocB").concat(f,", sourceLocA").concat(f,") * ").concat(t,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(k,";\n\n        for (int i = 0; i < ").concat(t,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(k,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(x,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}}function fr(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=t.shape[0],s=t.shape[1];null!=a&&(o=a.shape[0],s=a.shape[1]);const i=r.backend_util.computeOptimalWindowSize(s),c={windowSize:i,inSize:s,batchSize:o,outSize:Math.ceil(s/i)},l=new dr(c,n,null==a),u=[t];null!=a&&u.push(a);const h=e.runWebGLProgram(l,u,"int32");if(1===h.shape[1])return h;const d=fr(e,t,n,h);return e.disposeIntermediateTensorInfo(h),d}function mr(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o=null!=a?a.shape:t.shape,s=o[o.length-1],i=r.backend_util.computeOptimalWindowSize(s),c=new pr(o,i,n,null==a),l=null==a?[t]:[t,a],u=e.runWebGLProgram(c,l,"int32");if(u.shape.length===t.shape.length){const a=mr(e,t,n,u);return e.disposeIntermediateTensorInfo(u),a}return u}function gr(e,t,n,a){const o=[n];if(r.backend_util.assertAxesAreInnerMostDims("arg"+a.charAt(0).toUpperCase()+a.slice(1),o,t.shape.length),!(0,r._K2)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],s=e.texData.get(t.dataId);let i=t;null!==s&&s.isPacked&&(i=e.unpackTensor(t),n.push(i));const[c,l]=r.backend_util.computeOutAndReduceShapes(i.shape,o),u=r.ZSL.sizeFromShape(l),h=Pa({inputs:{x:i},backend:e,attrs:{shape:[-1,u]}});n.push(h);const d=fr(e,h,a);n.push(d);const p=Pa({inputs:{x:d},backend:e,attrs:{shape:c}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),p}return mr(e,t,a)}const yr={kernelName:r.Jp_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{axis:s}=a;let i=r.ZSL.parseAxisParam(s,o.shape);const c=r.backend_util.getAxesPermutation(i,o.shape.length);let l=o;const u=[];null!=c&&(l=qa({inputs:{x:o},backend:n,attrs:{perm:c}}),u.push(l),i=r.backend_util.getInnerMostAxes(i.length,l.shape.length)),r.backend_util.assertAxesAreInnerMostDims("argMax",[i[0]],l.shape.length);const h=gr(n,l,i[0],"max");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}};const br={kernelName:r.p_m,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{axis:s}=a;let i=r.ZSL.parseAxisParam(s,o.shape);const c=r.backend_util.getAxesPermutation(i,o.shape.length);let l=o;const u=[];null!=c&&(l=qa({inputs:{x:o},backend:n,attrs:{perm:c}}),u.push(l),i=r.backend_util.getInnerMostAxes(i.length,l.shape.length)),r.backend_util.assertAxesAreInnerMostDims("argMin",[i[0]],l.shape.length);const h=gr(n,l,i[0],"min");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}},vr=Na({opSnippet:Yn+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),xr={kernelName:r.QKF,backendName:"webgl",kernelFunc:vr},wr=Na({opSnippet:Yn+"return log(x + sqrt(x * x + 1.0));"}),kr={kernelName:r.epO,backendName:"webgl",kernelFunc:wr},Sr=Na({opSnippet:Yn+"\n  return atan(x);\n"}),Ir={kernelName:r.TyE,backendName:"webgl",kernelFunc:Sr},Tr=Ra({opSnippet:pa+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+ma+"\n  return result;\n"}),Cr={kernelName:r.lxb,backendName:"webgl",kernelFunc:Tr},Er=Na({opSnippet:Yn+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),Nr={kernelName:r.zP9,backendName:"webgl",kernelFunc:Er};class Rr{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,i=e.strideWidth,c=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),g="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d");let y="0.0";if(f||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(i,");\n        const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(t," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?r?m:g:"wR * ".concat(h," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let b="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(b="avgValue / count");const v=4*Math.floor(o/4),x=o%4,w="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(v,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(w,"\n          }\n\n          int xC = xCCorner + ").concat(v,";\n          if (").concat(1===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(2===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(3===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(w,"\n          }\n        }\n        setOutput(").concat(b,");\n      }\n    ")}}class Ar{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,i=e.strideHeight,c=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const b="avg"===t;let v="0.0";if(b||(v="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(i,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(d,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(u,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(h,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(t," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?r?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(p," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let x="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(x="avgValue / count");const w=4*Math.floor(o/4),k=o%4,S="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(i,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(v,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(v,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(h,", ch)\n              );\n\n              ").concat(S,"\n            }\n\n            int xC = xCCorner + ").concat(w,";\n            if (").concat(1===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(2===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(3===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                initializationValue\n              );\n\n              ").concat(S,"\n            }\n          }\n          setOutput(").concat(x,");\n        }\n      }\n    ")}}const _r={kernelName:r.ho8,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t;B(o,"avgPool");const{filterSize:s,strides:i,pad:c,dimRoundingMode:l}=a;r.ZSL.assert(r.backend_util.eitherStridesOrDilationsAreOne(i,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")));const u=r.backend_util.computePool2DInfo(o.shape,s,i,1,c,l);if(1===u.filterWidth&&1===u.filterHeight&&r.ZSL.arraysEqual(u.inShape,u.outShape))return ya({inputs:{x:o},backend:n});const h=new Rr(u,"avg",!1);return n.runWebGLProgram(h,[o],"float32")}};const Or={kernelName:r.cS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{filterSize:s,strides:i,pad:c,dimRoundingMode:l,dataFormat:u}=a,h=r.backend_util.computePool3DInfo(o.shape,s,i,[1,1,1],c,l,u),d=new Ar(h,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}};class Fr{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,a=e.strideHeight,r=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,i=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=i-1-e.padInfo.top,u=c-1-e.padInfo.left,h=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(u,");\n      const float avgMultiplier = float(").concat(h,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class Dr{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,a=e.filterWidth,r=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,c=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=u-1-e.padInfo.front,f=h-1-e.padInfo.top,m=d-1-e.padInfo.left,g=1/(t*n*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(f,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n            wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(r,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const Lr={kernelName:r.wwC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:o,input:s}=t,i=s,{filterSize:c,strides:l,pad:u,dimRoundingMode:h}=a,d=r.backend_util.computePool3DInfo(i.shape,c,l,[1,1,1],u,h),p=new Dr(d);return n.runWebGLProgram(p,[o],i.dtype)}};const Mr={kernelName:r.VCH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:o,input:s}=t,i=s;B([o,s],"avgPoolGrad");const{filterSize:c,strides:l,pad:u}=a,h=r.backend_util.computePool2DInfo(i.shape,c,l,1,u),d=new Fr(h);return n.runWebGLProgram(d,[o],i.dtype)}};const Pr={kernelName:r.jAQ,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o}=t,{transposeA:s,transposeB:i}=a;return Za({a:r,b:o,transposeA:s,transposeB:i,backend:n})}};class zr{constructor(e,t,n,a,o,s){this.outputShape=[],this.variableNames=["x","mean","variance"],r.backend_util.assertAndGetBroadcastShape(e,t),r.backend_util.assertAndGetBroadcastShape(e,n);let i="0.0";null!=a&&(r.backend_util.assertAndGetBroadcastShape(e,a),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let c="1.0";null!=o&&(r.backend_util.assertAndGetBroadcastShape(e,o),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(i,";\n        float scale = ").concat(c,";\n        float inv = scale * inversesqrt(variance + float(").concat(s,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}}class Br{constructor(e,t,n,a,o,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],r.backend_util.assertAndGetBroadcastShape(e,t),r.backend_util.assertAndGetBroadcastShape(e,n);let i="vec4(0.0)";null!=a&&(r.backend_util.assertAndGetBroadcastShape(e,a),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let c="vec4(1.0)";null!=o&&(r.backend_util.assertAndGetBroadcastShape(e,o),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(i,";\n        vec4 scale = ").concat(c,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(s,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}}const Wr={kernelName:r.i5R,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:a}=e;const{x:o,mean:s,variance:i,offset:c,scale:l}=t;r.ZSL.assert(s.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),r.ZSL.assert(null==c||s.shape.length===c.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),r.ZSL.assert(null==l||s.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:u}=a;null==u&&(u=.001);const h=[o,s,i];let d=null;null!=c&&(d=c.shape,h.push(c));let p=null;null!=l&&(p=l.shape,h.push(l));const f=(0,r._K2)().getBool("WEBGL_PACK_NORMALIZATION")?new Br(o.shape,s.shape,i.shape,d,p,u):new zr(o.shape,s.shape,i.shape,d,p,u);return n.runWebGLProgram(f,h,h[0].dtype)}};class Ur{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=ae(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return Vr.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);let a;const r=e.map(((e,t)=>"sourceLoc.".concat(Vr[t]," = start[").concat(t,"] + coords.").concat(Vr[t],";")));a="\n        ".concat(t," sourceLoc;\n        ").concat(t," coords = getOutputCoords();\n        ").concat(r.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(a,"\n        setOutput(getSource(").concat(n,"));\n      }\n    ")}}const Vr=["x","y","z","w","u","v"];class Gr{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=ae(this.rank),n=Wn("coords",this.rank),a=Wn("sourceLoc",this.rank),r=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(r,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),i=1===this.rank?"":"\n      --".concat(n[this.rank-1],";\n      if (++").concat(n[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(t,"(").concat(e.map(((e,t)=>"start[".concat(t,"]"))).join(),");"):e.map(((e,t)=>"".concat(a[t]," = ").concat(n[t]," + start[").concat(t,"];"))).join("\n");this.userCode="\n      void main() {\n        ".concat(t," coords = getOutputCoords();\n        ").concat(t," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(i,"\n        setOutput(result);\n      }\n    ")}}function jr(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{begin:s,size:i}=a,[c,l]=r.Kro.parseSliceParams(o,s,i);if(r.Kro.assertParamsValid(o,c,l),0===r.ZSL.sizeFromShape(l))return n.makeTensorInfo(l,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||"string"===o.dtype){const e=n.texData.get(o.dataId),t=Tn(e.values,c,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,t)}const{isPacked:u}=n.texData.get(o.dataId),h=r.Kro.isSliceContinous(o.shape,c,l);if(u||!h){const e=(0,r._K2)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Gr(l):new Ur(l),t=[c];return n.runWebGLProgram(e,[o],o.dtype,t)}return n.uploadToGPU(o.dataId),function(e,t,n,a){const o=a.texData.get(e.dataId),s=a.makeTensorInfo(n,e.dtype),i=a.texData.get(s.dataId);Object.assign(i,o),i.refCount=1,i.shape=n,i.dtype=e.dtype;let c=r.Kro.computeFlatOffset(t,r.ZSL.computeStrides(e.shape));o.slice&&(c+=o.slice.flatOffset),i.slice={flatOffset:c,origDataId:o.slice&&o.slice.origDataId||e.dataId};const l=a.dataRefCount.get(i.slice.origDataId)||1;return a.dataRefCount.set(i.slice.origDataId,l+1),s}(o,c,l,n)}const Hr={kernelName:r.JiE,backendName:"webgl",kernelFunc:jr},Kr={kernelName:r.Ik2,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{blockShape:s,crops:i}=a;r.ZSL.assert(o.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const c=s.reduce(((e,t)=>e*t)),l=r.backend_util.getReshaped(o.shape,s,c),u=r.backend_util.getPermuted(l.length,s.length),h=r.backend_util.getReshapedPermuted(o.shape,s,c),d=r.backend_util.getSliceBeginCoords(i,s.length),p=r.backend_util.getSliceSize(h,i,s.length),f=[],m=Pa({inputs:{x:o},backend:n,attrs:{shape:l}}),g=qa({inputs:{x:m},backend:n,attrs:{perm:u}}),y=Pa({inputs:{x:g},backend:n,attrs:{shape:h}}),b=jr({inputs:{x:y},backend:n,attrs:{begin:d,size:p}});return f.push(m),f.push(g),f.push(y),f.forEach((e=>n.disposeIntermediateTensorInfo(e))),b}};const qr={kernelName:r.N4F,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:o}=t,{size:s}=a,i=n.readSync(r.dataId),c=n.readSync(o.dataId),l=qt(i,c,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,l)}};const Yr={kernelName:r.vj7,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:a,s1:o}=t,s=n.readSync(a.dataId),i=n.readSync(o.dataId),c=r.backend_util.assertAndGetBroadcastShape(Array.from(s),Array.from(i));return n.makeTensorInfo([c.length],"int32",Int32Array.from(c))}},Xr=Ra({opSnippet:"return float(a != b);",cpuKernelImpl:gn,dtype:"bool"}),Zr={kernelName:r.ylV,backendName:"webgl",kernelFunc:Xr};function Qr(e){const{inputs:t,backend:n}=e,{input:a}=t;return ya({inputs:{x:n.texData.get(a.dataId).complexTensorInfos.real},backend:n})}const Jr={kernelName:r.LRy,backendName:"webgl",kernelFunc:Qr},$r="return float(int(x));";const eo={kernelName:r.KXH,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:a,attrs:o}=t,{x:s}=n,{dtype:i}=o;if("complex64"===i){if("complex64"===s.dtype)return ya({inputs:{x:s},backend:a});const t=r.Ul9(s.shape),n=e({inputs:{x:s},backend:a,attrs:{dtype:"float32"}}),o=va({inputs:{real:n,imag:t},backend:a});return t.dispose(),a.disposeIntermediateTensorInfo(n),o}if("complex64"===s.dtype){const t=Qr({inputs:{input:s},backend:a}),n=e({inputs:{x:t},backend:a,attrs:{dtype:i}});return a.disposeIntermediateTensorInfo(t),n}if(!r.ZSL.hasEncodingLoss(s.dtype,i)){const e=ya({inputs:{x:s},backend:a});return{dataId:e.dataId,shape:e.shape,dtype:i}}if(a.shouldExecuteOnCPU([s])){const e=a.texData.get(s.dataId).values,[t,n,r]=Xt(e,s.shape,s.dtype,i);return a.makeTensorInfo(t,n,r)}if("int32"===i)return function(e,t){const n=new qn(e.shape,$r),a=t.runWebGLProgram(n,[e],"int32");return{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}(s,a);if("bool"===i){const e=a.makeTensorInfo([],"bool",r.ZSL.getTypedArrayFromDType("bool",1)),t=Xr({inputs:{a:s,b:e},backend:a});return a.disposeIntermediateTensorInfo(e),t}throw new Error("Error in Cast: failed to cast ".concat(s.dtype," to ").concat(i))}},to="return ceil(x);",no=Na({opSnippet:to,packedOpSnippet:to,cpuKernelImpl:Zt}),ao={kernelName:r.QDP,backendName:"webgl",kernelFunc:no};class ro{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class oo{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const so={kernelName:r.vaV,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{clipValueMin:s,clipValueMax:i}=a;let c;c=(0,r._K2)().getBool("WEBGL_PACK_CLIP")?new oo(o.shape):new ro(o.shape);const l=[[s],[i]];return n.runWebGLProgram(c,[o],o.dtype,l)}};class io{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function co(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const lo={kernelName:r.$zE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,r=n.texData.get(a.dataId),o=new io(a.shape),s=[co(a,r.complexTensorInfos.real),co(a,r.complexTensorInfos.imag)];return n.runWebGLProgram(o,s,s[0].dtype)}};class uo{constructor(e){this.outputShape=[],this.outputShape=r.backend_util.computeOutShape(e,1),this.variableNames=e.map(((e,t)=>"T".concat(t)));const t=new Array(e.length-1);t[0]=e[0][1];for(let r=1;r<t.length;r++)t[r]=t[r-1]+e[r][1];const n=["if (yC < ".concat(t[0],") setOutput(getT0(yR, yC));")];for(let r=1;r<t.length;r++){const e=t[r-1];n.push("else if (yC < ".concat(t[r],") ")+"setOutput(getT".concat(r,"(yR, yC-").concat(e,"));"))}const a=t.length,o=t[t.length-1];n.push("else setOutput(getT".concat(a,"(yR, yC-").concat(o,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(n.join("\n        "),"\n      }\n    ")}}class ho{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=r.backend_util.computeOutShape(e,t);const n=this.outputShape,a=n.length,o=ae(a),s=Wn("coords",a),i=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map(((e,t)=>"T".concat(t)));const c=new Array(e.length-1);c[0]=e[0][t];for(let r=1;r<c.length;r++)c[r]=c[r-1]+e[r][t];const l=i[t],u=i.slice(-2),h=i.join();let d="if (".concat(l," < ").concat(c[0],") {\n        return getChannel(\n            getT0(").concat(h,"), vec2(").concat(u.join(),"));\n        }");for(let r=1;r<c.length;r++){const e=c[r-1];d+="\n        if (".concat(l," < ").concat(c[r],"  && ").concat(l," >= ").concat(c[r-1],") {\n          return getChannel(\n            getT").concat(r,"(").concat(po(i,l,e),"),\n            vec2(").concat(po(u,l,e),"));\n        }")}const p=c.length,f=c[c.length-1];d+="\n        return getChannel(\n          getT".concat(p,"(").concat(po(i,l,f),"),\n          vec2(").concat(po(u,l,f),"));"),this.userCode="\n      float getValue(".concat(i.map((e=>"int "+e)),") {\n        ").concat(d,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(s,"), 0., 0., 0.);\n\n        ").concat(s[a-1]," = ").concat(s[a-1]," + 1;\n        if (").concat(s[a-1]," < ").concat(n[a-1],") {\n          result.g = getValue(").concat(s,");\n        }\n\n        ").concat(s[a-2]," = ").concat(s[a-2]," + 1;\n        if (").concat(s[a-2]," < ").concat(n[a-2],") {\n          result.a = getValue(").concat(s,");\n        }\n\n        ").concat(s[a-1]," = ").concat(s[a-1]," - 1;\n        if (").concat(s[a-2]," < ").concat(n[a-2]," &&\n            ").concat(s[a-1]," < ").concat(n[a-1],") {\n          result.b = getValue(").concat(s,");\n        }\n        setOutput(result);\n      }\n    ")}}function po(e,t,n){const a=e.indexOf(t);return e.map(((e,t)=>t===a?"".concat(e," - ").concat(n):e)).join()}function fo(e){const{inputs:t,backend:n}=e,{input:a}=t;return ya({inputs:{x:n.texData.get(a.dataId).complexTensorInfos.imag},backend:n})}const mo={kernelName:r.dv8,backendName:"webgl",kernelFunc:fo};function go(e,t,n){const a=e[0].dtype;if("complex64"===a){const a=e.map((e=>Qr({inputs:{input:e},backend:n}))),r=e.map((e=>fo({inputs:{input:e},backend:n}))),o=go(a,t,n),s=go(r,t,n),i=va({inputs:{real:o,imag:s},backend:n});return a.forEach((e=>n.disposeIntermediateTensorInfo(e))),r.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),i}let o=n.shouldExecuteOnCPU(e);if("string"===a&&(o=!0),o){const o=e.map((e=>{const a=r.ZSL.sizeFromShape(e.shape.slice(t));return Pa({inputs:{x:e},backend:n,attrs:{shape:[-1,a]}})})),s=o.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),i=r.backend_util.computeOutShape(o.map((e=>e.shape)),1),c=1===o[0].shape[0],l=Qt(s,i,a,c),u=r.backend_util.computeOutShape(e.map((e=>e.shape)),t),h=n.makeTensorInfo(u,a,l);return o.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}const s=(0,r._K2)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(e.length>s){const a=[];for(let o=0;o<e.length;o+=s){const r=e.slice(o,o+s);a.push(go(r,t,n))}const r=go(a,t,n);for(const e of a)n.disposeIntermediateTensorInfo(e);return r}if((0,r._K2)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){const r=new ho(e.map((e=>e.shape)),t);return n.runWebGLProgram(r,e,a)}const{tensors2D:i,outShape:c}=function(e,t,n){const a=r.backend_util.computeOutShape(e.map((e=>e.shape)),t),o=e.map((e=>Pa({inputs:{x:e},attrs:{shape:[-1,r.ZSL.sizeFromShape(e.shape.slice(t))]},backend:n})));return{tensors2D:o,outShape:a}}(e,t,n),l=new uo(i.map((e=>e.shape))),u=n.runWebGLProgram(l,i,a);i.forEach((e=>n.disposeIntermediateTensorInfo(e)));const h=Pa({inputs:{x:u},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(u),h}function yo(e){const{inputs:t,backend:n,attrs:a}=e,{axis:o}=a,s=r.ZSL.parseAxisParam(o,t[0].shape)[0],i=t.map((e=>e.shape));r.backend_util.assertParamsConsistent(i,s);const c=r.backend_util.computeOutShape(t.map((e=>e.shape)),s);if(0===r.ZSL.sizeFromShape(c))return n.makeTensorInfo(c,t[0].dtype,[]);const l=t.filter((e=>r.ZSL.sizeFromShape(e.shape)>0));return 1===l.length?ya({inputs:{x:l[0]},backend:n}):go(l,s,n)}const bo={kernelName:r.$dB,backendName:"webgl",kernelFunc:yo};class vo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,i=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,y=m?2:3,b=m?3:1;let v="",x="";n&&(v=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):r?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),x="result = activation(result);");const w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(v,"\n\n      const ivec2 strides = ivec2(").concat(i,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(d,"; wC++) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===f,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===f,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===f,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}}class xo{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,a=e.padInfo.left,r=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,c=e.dilationHeight,l=e.dilationWidth,u=e.filterDepth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(r,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(t,", ").concat(n,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(u,"; wF++) {\n          int xF = xFCorner + wF * ").concat(i,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===f,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class wo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ue(this.outputShape.length);const s=e.padInfo.left,i=e.strideWidth,c=e.dilationWidth,l=e.filterHeight,u=e.filterWidth,h=u;let d="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let r=0;r<u;r++)d+="\n           vec4 xTexelC".concat(2*r,";\n           int xTexelC").concat(2*r,"Ready;\n           vec4 xTexelC").concat(2*r+1,";\n           int xTexelC").concat(2*r+1,"Ready;\n           vec4 xC").concat(r,";");d+="\n     for (int r = 0; r < ".concat(l,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(let r=0;r<u;r++)d+="\n           xTexelC".concat(2*r," = vec4(0.0);\n           xTexelC").concat(2*r,"Ready = 0;\n           xTexelC").concat(2*r+1," = vec4(0.0);\n           xTexelC").concat(2*r+1,"Ready = 0;\n           xC").concat(r," = vec4(0.0);");d+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let g=0;g<(h+1)/2;g++){const t=2*g;if(d+="\n           xC = xCCorner + ".concat(t*c,";\n           "),1===i){if(t<u&&(s%2===1?(d+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n               "),d+=1===c&&t>0?"\n                 xC".concat(t," = vec4(xTexelC").concat(t-2,".zw, xTexelC").concat(t,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(t," = vec4(previous.zw, xTexelC").concat(t,".xy);\n                   } else {\n                     xC").concat(t," = vec4(0.0, 0.0, xTexelC").concat(t,".xy);\n                   }\n                   ")):d+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xC").concat(t," = xTexelC").concat(t,";\n                 "),t+1<u)){const e=s%2===0?r.ZSL.nearestLargerEven(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(d+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(e,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                     xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(t+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(t+1,"Ready = 1;\n                   }\n                   "),d+=c>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(t+1," = vec4(previous.zw, xTexelC").concat(t+1,".xy);\n                     } else {\n                      xC").concat(t+1," = vec4(0.0, 0.0, xTexelC").concat(t+1,".xy);\n                     }\n                     "):"\n                     xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".xy);\n                     ")):d+=1===e?"\n                     xC".concat(t+1," = xTexelC").concat(t,";\n                     "):"\n                     xCOffset = xC + ".concat(e,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                       xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(t+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(t+1,"Ready = 1;\n                     }\n\n                     xC").concat(t+1," = xTexelC").concat(t+1,";\n                     ")}}else t<u&&(s%2===1?(d+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n               "),t+1<u&&(d+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(t+1," = vec4(xTexelC").concat(t+1,".xy, final.xy);\n                 "))):(d+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(\n                   xTexelC").concat(t,".xy, xTexelC").concat(t+1,".xy);\n               "),t+1<u&&(d+="\n                   xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n                 "))));t<u&&(d+="\n             wTexel = getW(r, ".concat(t,", d1, d2);\n             dotProd += xC").concat(t,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(t,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),t+1<u&&(d+="\n               wTexel = getW(r, ".concat(t+1,", d1, d2);\n               dotProd += xC").concat(t+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(t+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}d+="\n     }\n   ",d+="\n     }\n   ",d+="\n     }\n   ";let p="",f="";n&&(p=a?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(n,"\n         }"):o?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(n,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(n,"\n         }"),f="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(p,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(d,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(m,"\n         ").concat(f,"\n         setOutput(result);\n       }\n     ")}}class ko{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ue(this.outputShape.length);const{dataFormat:n}=t,a=U(),r="channelsLast"===n,o=r?1:2,s=r?2:3,i=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {");let c="";for(let l=0;l<=1;l++)for(let e=0;e<=1;e++)c+="\n          blockIndex = rc.z + ".concat(e,";\n          pos = rc.y + ").concat(l,";\n\n          ").concat(i,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(r,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+e,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+e,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}}function So(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function Io(e){let{x:t,filter:n,convInfo:a,backend:o,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:c=0,activation:l=null}=e;const u=t.shape,h=o.texData.get(t.dataId),d=a.inChannels,p=u[0]*u[1]*u[2],f=a.outChannels,m="channelsLast"===a.dataFormat,g=!1;let y;const b=[];if(null!=i){const e=So(i.shape,m);null!=e&&(i=Pa({inputs:{x:i},backend:o,attrs:{shape:e}}),b.push(i))}if(null!=s){const e=So(s.shape,m);null!=e&&(s=Pa({inputs:{x:s},backend:o,attrs:{shape:e}}),b.push(s))}if(!((1===p||1===f)&&d>Xa)&&h.isPacked&&m&&null!=h.texture&&u[2]%2!==0&&r.ZSL.arraysEqual(h.shape.slice(-3),u.slice(-3))){const e=u[0]*u[1]*(u[2]+1),d={dataId:t.dataId,shape:[1,e,a.inChannels],dtype:t.dtype},p=h.shape;h.shape=h.shape.slice(),h.shape[h.shape.length-2]++,r.ZSL.assert(O(h.shape,d.shape),(()=>"packed reshape ".concat(h.shape," to ").concat(d.shape," isn't free")));const f=Pa({inputs:{x:n},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}});b.push(f);const m=Za({a:d,b:f,backend:o,transposeA:false,transposeB:g,bias:s,activation:l,preluActivationWeights:i,leakyreluAlpha:c}),v=o.texData.get(m.dataId);r.ZSL.assert(v.isPacked,(()=>"batchMatMul result is expected to be packed")),h.shape=p,v.shape=a.outShape,y=ya({inputs:{x:m},backend:o}),y.shape=a.outShape,b.push(m)}else{const e=a.outHeight*a.outWidth,r=Pa({inputs:{x:t},backend:o,attrs:{shape:m?[a.batchSize,e,a.inChannels]:[a.batchSize,a.inChannels,e]}}),u=Pa({inputs:{x:n},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}}),h=Za({a:m?r:u,b:m?u:r,transposeA:!m,transposeB:g,backend:o,bias:s,activation:l,preluActivationWeights:i,leakyreluAlpha:c});y=Pa({inputs:{x:h},backend:o,attrs:{shape:a.outShape}}),b.push(r),b.push(u),b.push(h)}for(const r of b)o.disposeIntermediateTensorInfo(r);return y}function To(e){let{x:t,filter:n,convInfo:a,backend:o,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:c=0,activation:l=null}=e;const{filterWidth:u,filterHeight:h,inChannels:d,outWidth:p,outHeight:f,dataFormat:m}=a,g="channelsLast"===m,y=u*h*d,b=f*p,v=[a.batchSize,y,b],x=[];if(null!=i){const e=So(i.shape,g);null!=e&&(i=Pa({inputs:{x:i},backend:o,attrs:{shape:e}}),x.push(i))}if(null!=s){const e=So(s.shape,g);null!=e&&(s=Pa({inputs:{x:s},backend:o,attrs:{shape:e}}),x.push(s))}const w=Pa({inputs:{x:n},backend:o,attrs:{shape:[1,y,r.ZSL.sizeFromShape(n.shape)/y]}});x.push(w);const k=new ko(v,a),S=[t.shape,[a.padInfo.top,a.padInfo.left],[a.strideHeight,a.strideWidth],[a.dilationHeight,a.dilationWidth],[a.inChannels],[a.filterWidth*a.inChannels],[a.outWidth]],I=o.runWebGLProgram(k,[t],"float32",S),T=Pa({inputs:{x:I},backend:o,attrs:{shape:v}});x.push(I),x.push(T);const C=null!=s,E=null!=i,N="leakyrelu"===l,R=l?Aa(l,!0):null,A=new _a(g?T.shape:w.shape,g?w.shape:T.shape,g?[a.batchSize,b,a.outChannels]:[a.batchSize,a.outChannels,b],!0,!1,C,R,E,N),_=g?[T,w]:[w,T];if(s&&_.push(s),E&&_.push(i),N){const e=o.makeTensorInfo([],"float32",r.ZSL.createScalarValue(c,"float32"));_.push(e),x.push(e)}const O=o.runWebGLProgram(A,_,"float32"),F=Pa({inputs:{x:O},backend:o,attrs:{shape:a.outShape}});x.push(O);for(const r of x)o.disposeIntermediateTensorInfo(r);return F}const Co={kernelName:r.p2J,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o,filter:s}=t,{strides:i,pad:c,dataFormat:l,dilations:u,dimRoundingMode:h}=a,d=r.backend_util.convertConv2DDataFormat(l),p=r.backend_util.computeConv2DInfo(o.shape,s.shape,i,u,c,h,!1,d);let f;if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(p.strideWidth<=2&&"channelsLast"===d&&(0,r._K2)().getBool("WEBGL_EXP_CONV")){const e=new wo(p),t=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];f=n.runWebGLProgram(e,[o,s],"float32",t)}else if((0,r._K2)().getBool("WEBGL_CONV_IM2COL"))f=To({x:o,filter:s,convInfo:p,backend:n});else{const e=new vo(p);f=n.runWebGLProgram(e,[o,s],"float32")}else f=Io({x:o,filter:s,convInfo:p,backend:n});const m=Pa({inputs:{x:f},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(f),m}};class Eo{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,a=e.padInfo.top,r=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(r,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class No{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,a=e.strideHeight,r=e.strideWidth,o="channelsLast"===e.dataFormat,s=t-1-e.padInfo.top,i=n-1-e.padInfo.left,c=o?1:2,l=o?2:3,u=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(u,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class Ro{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,a=e.strideWidth,r=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t," - ").concat(r,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(n," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class Ao{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,a=e.filterWidth,r=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=t-1-e.padInfo.front,c=n-1-e.padInfo.top,l=a-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(i,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(t,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(r,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(t," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(n,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(n," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const _o={kernelName:r.rFm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o,dy:s}=t,{strides:i,pad:c,dataFormat:l,dimRoundingMode:u,filterShape:h}=a,d=r.backend_util.convertConv2DDataFormat(l),p=r.backend_util.computeConv2DInfo(o.shape,h,i,1,c,u,!1,d),f=new Eo(p);return n.runWebGLProgram(f,[o,s],"float32")}};const Oo={kernelName:r.jfg,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:o,filter:s}=t,{inputShape:i,strides:c,pad:l,dataFormat:u,dimRoundingMode:h}=a,d=r.backend_util.convertConv2DDataFormat(u),p=r.backend_util.computeConv2DInfo(i,s.shape,c,1,l,h,!1,d),f=new No(p);return n.runWebGLProgram(f,[o,s],"float32")}};const Fo={kernelName:r.A1h,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o,filter:s}=t,{strides:i,pad:c,dilations:l}=a,u=r.backend_util.computeConv3DInfo(o.shape,s.shape,i,l,c),h=new xo(u);return n.runWebGLProgram(h,[o,s],"float32")}};const Do={kernelName:r.iGz,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o,dy:s}=t,{strides:i,pad:c,filterShape:l}=a,u=r.backend_util.computeConv3DInfo(o.shape,l,i,1,c),h=new Ro(u);return n.runWebGLProgram(h,[o,s],"float32")}};const Lo={kernelName:r.gC7,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:o,filter:s}=t,{pad:i,strides:c,inputShape:l}=a,u=r.backend_util.computeConv3DInfo(l,s.shape,c,1,i),h=new Ao(u);return n.runWebGLProgram(h,[o,s],"float32")}},Mo=Na({opSnippet:Ea+"\n  return cos(x);\n"}),Po={kernelName:r.Mn0,backendName:"webgl",kernelFunc:Mo},zo=Na({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),Bo={kernelName:r.MnK,backendName:"webgl",kernelFunc:zo};class Wo{constructor(e,t,n,a,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,i,c]=e,[l]=t,[u,h]=n;this.outputShape=[l,u,h,c];const d="bilinear"===a?1:0,[p,f]=["".concat(s-1,".0"),"".concat(i-1,".0")],[m,g,y]=u>1?["".concat((s-1)/(u-1)),"(y2-y1) * height_ratio","y1*".concat(p," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(p)],[b,v,x]=h>1?["".concat((i-1)/(h-1)),"(x2-x1) * width_ratio","x1*".concat(f," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(f)];this.userCode="\n      const float height_ratio = float(".concat(m,");\n      const float width_ratio = float(").concat(b,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(o,") {\n          return;\n        }\n\n        float height_scale = ").concat(g,";\n        float width_scale = ").concat(v,";\n\n        float in_y = ").concat(y,";\n        if( in_y < 0.0 || in_y > ").concat(p," ) {\n          setOutput(float(").concat(r,"));\n          return;\n        }\n        float in_x = ").concat(x,";\n        if( in_x < 0.0 || in_x > ").concat(f," ) {\n          setOutput(float(").concat(r,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(d," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}}const Uo={kernelName:r.MRQ,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{image:r,boxes:o,boxInd:s}=t,{cropSize:i,method:c,extrapolationValue:l}=a,u=new Wo(r.shape,o.shape,i,c,l);return n.runWebGLProgram(u,[r,o,s],"float32")}};var Vo;!function(e){e.Prod="*",e.Sum="+"}(Vo||(Vo={}));class Go{constructor(e,t,n,a){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const r=this.outputShape.length,o=this.op===Vo.Prod?"1.0":"0.0",s=n?o:"getX(".concat(jo(r,"coords",this.op),")"),i=this.outputShape[this.outputShape.length-1];let c="",l="";n?(c=a?"end != ".concat(i-1):"end != 0",l=a?"end + 1":"end - 1"):(c=a?"end + pow2 < ".concat(i):"end >= pow2",l=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(ae(r)," coords = getOutputCoords();\n        int end = ").concat(Ho(r,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(l,";\n          ").concat(Ho(r,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(jo(r,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}}function jo(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function Ho(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function Ko(e,t,n,a,o,s){const i=t.shape.length,c=r.backend_util.getAxesPermutation([a],i);let l=t;null!=c&&(l=qa({inputs:{x:t},backend:n,attrs:{perm:c}}));const u=r.backend_util.getInnerMostAxes(1,i)[0];if(u!==i-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(a));const h=l.shape[u];let d=ya({inputs:{x:l},backend:n});for(let r=0;r<=Math.ceil(Math.log2(h))-1;r++){const t=new Go(e,l.shape,!1,s),a=[[r]],o=d;d=n.runWebGLProgram(t,[d],d.dtype,a),n.disposeIntermediateTensorInfo(o)}if(o){const t=new Go(e,l.shape,o,s),a=d;d=n.runWebGLProgram(t,[d],d.dtype),n.disposeIntermediateTensorInfo(a)}if(null!=c){const e=qa({inputs:{x:d},backend:n,attrs:{perm:r.backend_util.getUndoAxesPermutation(c)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),e}return d}const qo={kernelName:r.jj_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,exclusive:s,reverse:i}=a;return Ko(Vo.Prod,r,n,o,s,i)}};const Yo={kernelName:r.nY8,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,exclusive:s,reverse:i}=a;return Ko(Vo.Sum,r,n,o,s,i)}};const Xo={kernelName:r.wNW,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:o}=t,{size:s,binaryOutput:i}=a;if(1===r.shape.length){const e=n.readSync(r.dataId),t=n.readSync(o.dataId),a=qt(e,t,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,a)}if(2===r.shape.length){const e=n.bufferSync(r),t=n.bufferSync(o),a=Yt(e,t,s,i);return n.makeTensorInfo(a.shape,o.dtype,a.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(r.shape.length,"."))}};class Zo{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(t,";\n      int offset_h = imod(h, ").concat(t,");\n      int in_w = w / ").concat(t,";\n      int offset_w = imod(w, ").concat(t,");\n      int offset_d = (offset_h * ").concat(t," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const Qo={kernelName:r.TMz,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockSize:o,dataFormat:s}=a,i=r.shape[0],c=("NHWC"===s?r.shape[1]:r.shape[2])*o,l=("NHWC"===s?r.shape[2]:r.shape[3])*o,u=("NHWC"===s?r.shape[3]:r.shape[1])/(o*o),h=new Zo("NHWC"===s?[i,c,l,u]:[i,u,c,l],o,s);return n.runWebGLProgram(h,[r],r.dtype)}};class Jo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ue(this.outputShape.length);const o=e.filterHeight,s=e.filterWidth,i=e.outChannels/e.inChannels;let c="",l="";n&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):r?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),l="result = activation(result);");const u=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(u,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")}}class $o{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ue(this.outputShape.length);const s=e.outChannels/e.inChannels,i=e.padInfo.left,c=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,h=e.filterWidth,d=h;let p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let r=0;r<h;r++)p+="\n          vec4 xTexelC".concat(2*r,";\n          int xTexelC").concat(2*r,"Ready;\n          vec4 xTexelC").concat(2*r+1,";\n          int xTexelC").concat(2*r+1,"Ready;\n          vec4 xC").concat(r,";");p+="\n    for (int r = 0; r < ".concat(u,"; r++) {\n      ");for(let r=0;r<h;r++)p+="\n          xTexelC".concat(2*r," = vec4(0.0);\n          xTexelC").concat(2*r,"Ready = 0;\n          xTexelC").concat(2*r+1," = vec4(0.0);\n          xTexelC").concat(2*r+1,"Ready = 0;\n          xC").concat(r," = vec4(0.0);");p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let y=0;y<(d+1)/2;y++){const e=2*y;if(p+="\n          xC = xCCorner + ".concat(e*l,";\n          "),1===c){if(e<h&&(i%2===1?(p+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n              "),p+=1===l&&e>0?"\n                xC".concat(e," = vec4(xTexelC").concat(e-2,".zw, xTexelC").concat(e,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(e," = vec4(previous.zw, xTexelC").concat(e,".xy);\n                  } else {\n                    xC").concat(e," = vec4(0.0, 0.0, xTexelC").concat(e,".xy);\n                  }\n                  ")):p+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xC").concat(e," = xTexelC").concat(e,";\n                "),e+1<h)){const t=i%2===0?r.ZSL.nearestLargerEven(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(p+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(t,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                    xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(e+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(e+1,"Ready = 1;\n                  }\n                  "),p+=l>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(e+1," = vec4(previous.zw, xTexelC").concat(e+1,".xy);\n                    } else {\n                     xC").concat(e+1," = vec4(0.0, 0.0, xTexelC").concat(e+1,".xy);\n                    }\n                    "):"\n                    xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".xy);\n                    ")):p+=1===t?"\n                    xC".concat(e+1," = xTexelC").concat(e,";\n                    "):"\n                    xCOffset = xC + ".concat(t,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                      xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(e+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(e+1,"Ready = 1;\n                    }\n\n                    xC").concat(e+1," = xTexelC").concat(e+1,";\n                    ")}}else e<h&&(i%2===1?(p+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n              "),e+1<h&&(p+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(e+1," = vec4(xTexelC").concat(e+1,".xy, final.xy);\n                "))):(p+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(\n                  xTexelC").concat(e,".xy, xTexelC").concat(e+1,".xy);\n              "),e+1<h&&(p+="\n                  xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n                "))));e<h&&(p+="\n            wTexel = getW(r, ".concat(e,", d1, q);\n            dotProd += xC").concat(e," * vec4(wTexel.xz, wTexel.xz);\n          "),e+1<h&&(p+="\n              wTexel = getW(r, ".concat(e+1,", d1, q);\n              dotProd += xC").concat(e+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}p+="\n    }\n  ",p+="\n      }\n    ";let f="",m="";n&&(f=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(n,"\n        }"),m="result = activation(result);");const g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(f,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(s,";\n        int q = d2 - d1 * ").concat(s,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(p,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(g,"\n        ").concat(m,"\n        setOutput(result);\n      }\n    ")}}const es={kernelName:r.tGH,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o,filter:s}=t,{strides:i,pad:c,dilations:l,dimRoundingMode:u}=a;let h=l;null==h&&(h=[1,1]),r.ZSL.assert(r.backend_util.eitherStridesOrDilationsAreOne(i,h),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(h,"'")));const d=r.backend_util.computeConv2DInfo(o.shape,s.shape,i,h,c,u,!0);let p;p=(0,r._K2)().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new $o(d):new Jo(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[o,s],"float32",f)}};class ts{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,a=e.padInfo.top,r=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(r,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class ns{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,a=e.strideHeight,r=e.strideWidth,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(i,"; dm++) {\n              int d2 = d1 * ").concat(i," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const as={kernelName:r.X$8,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o,dy:s}=t,{strides:i,dilations:c,pad:l,dimRoundingMode:u,filterShape:h}=a,d=r.backend_util.computeConv2DInfo(o.shape,h,i,c,l,u,!0),p=new ts(d);return n.runWebGLProgram(p,[o,s],"float32")}};const rs={kernelName:r.nVu,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:o,filter:s}=t,{strides:i,dilations:c,pad:l,dimRoundingMode:u,inputShape:h}=a,d=r.backend_util.computeConv2DInfo(h,s.shape,i,c,l,u,!0),p=new ns(d);return n.runWebGLProgram(p,[o,s],"float32")}};class os{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const ss={kernelName:r.ORI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,o=[...a.shape,...a.shape],s=r.ZSL.sizeFromShape(a.shape),i=Pa({inputs:{x:a},backend:n,attrs:{shape:[s]}}),c=new os(s),l=n.runWebGLProgram(c,[i],i.dtype),u=Pa({inputs:{x:l},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}};class is{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:a,strideHeight:r,strideWidth:o,filterHeight:s,filterWidth:i,dilationHeight:c,dilationWidth:l}=e,{top:u,left:h}=a;this.userCode="\n      const ivec2 strides = ivec2(".concat(r,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(h,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(t,") {\n            for (int w = 0; w < ").concat(i,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(n,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}}const cs={kernelName:r.jxD,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o,filter:s}=t,{strides:i,pad:c,dilations:l}=a,u=r.backend_util.computeDilation2DInfo(o.shape,s.shape,i,c,"NHWC",l);let h;const d=new is(u);h=n.runWebGLProgram(d,[o,s],"float32");const p=Pa({inputs:{x:h},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(h),p}};const ls={kernelName:r.Qgm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{equation:o}=a,s=t,{allDims:i,summedDims:c,idDims:l}=r.backend_util.decodeEinsumEquation(o,s.length);r.backend_util.checkEinsumDimSizes(i.length,l,s);const{path:u,steps:h}=r.backend_util.getEinsumComputePath(c,l),d=h.length;let p=null,f=i.length;const m=[];for(let g=0;g<d;++g){for(const e of h[g]){const{permutationIndices:t,expandDims:a}=r.backend_util.getEinsumPermutation(f,l[e]);let o;r.backend_util.isIdentityPermutation(t)?o=s[e]:(o=qa({inputs:{x:s[e]},backend:n,attrs:{perm:t}}),m.push(o));const i=o.shape.slice();for(let e=0;e<a.length;++e)i.splice(a[e],0,1);r.ZSL.arraysEqual(o.shape,i)||(o=Pa({inputs:{x:o},backend:n,attrs:{shape:i}}),m.push(o)),null===p?p=o:(p=La({inputs:{a:o,b:p},backend:n}),m.push(p))}g<d-1&&(u[g]>=0&&(p=Ha({inputs:{x:p},backend:n,attrs:{axis:u[g]-(i.length-f),keepDims:!1}}),m.push(p)),f--)}for(const r of m)r!==p&&n.disposeIntermediateTensorInfo(r);return p}},us=Na({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),hs={kernelName:r.Pah,backendName:"webgl",kernelFunc:us},ds={kernelName:r.rsH,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:a,y:o}=t,s=(0,r._K2)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ga("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",a.shape,o.shape):new fa("return (b >= 1.0) ? a : a * (b + 1.0);",a.shape,o.shape);return n.runWebGLProgram(s,[a,o],a.dtype)}},ps=Ra({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:Jt}),fs={kernelName:r.BRl,backendName:"webgl",kernelFunc:ps},ms=Na({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(r.backend_util.ERF_P,";\n  float a1 = ").concat(r.backend_util.ERF_A1,";\n  float a2 = ").concat(r.backend_util.ERF_A2,";\n  float a3 = ").concat(r.backend_util.ERF_A3,";\n  float a4 = ").concat(r.backend_util.ERF_A4,";\n  float a5 = ").concat(r.backend_util.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),gs={kernelName:r._s9,backendName:"webgl",kernelFunc:ms},ys=Na({opSnippet:Ea+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:$t,dtype:"float32"}),bs={kernelName:r.ox3,backendName:"webgl",kernelFunc:ys};function vs(e){const{inputs:t,attrs:n,backend:a}=e,{dim:o}=n,{input:s}=t,i=s.shape.length,c=s.shape.slice();let l=o;return o<0&&(r.ZSL.assert(-(i+1)<=o,(()=>"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]"))),l=i+o+1),c.splice(l,0,1),Pa({inputs:{x:s},backend:a,attrs:{shape:c}})}const xs={kernelName:r.ybN,backendName:"webgl",kernelFunc:vs},ws="return exp(x) - 1.0;",ks=Na({opSnippet:ws,packedOpSnippet:ws,cpuKernelImpl:en}),Ss={kernelName:r.ybj,backendName:"webgl",kernelFunc:ks};class Is{constructor(e,t,n){this.variableNames=["real","imag"];const a=t[1];this.outputShape=t;const r=n?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),o=n?"".concat(a,".0"):"1.0";let s;if("real"===e)s="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));s="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(r,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(s,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(o,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}}function Ts(e,t,n){const a=n.texData.get(e.dataId),o=r.ZSL.sizeFromShape(e.shape),s=e.shape[e.shape.length-1],i=Pa({inputs:{x:e},backend:n,attrs:{shape:[o/s,s]}}),c=i.shape,l=new Is("real",c,t),u=new Is("imag",c,t),h=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:c},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:c}],d=n.runWebGLProgram(l,h,"float32"),p=n.runWebGLProgram(u,h,"float32"),f=va({inputs:{real:d,imag:p},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p);const m=Pa({inputs:{x:f},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(f),m}const Cs={kernelName:r.rGP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t;return Ts(a,!1,n)}};class Es{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function Ns(e){const{backend:t,attrs:n}=e,{shape:a,value:o}=n;let{dtype:s}=n;if(s=s||r.ZSL.inferDtype(o),"string"===s){const e=r.ZSL.getArrayFromDType(s,r.ZSL.sizeFromShape(a));return e.fill(o),t.makeTensorInfo(a,s,e)}{const e=new Es(a,o),n=[[o]];return t.runWebGLProgram(e,[],s,n)}}const Rs={kernelName:r.SQl,backendName:"webgl",kernelFunc:Ns};class As{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(t," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(t,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const _s={kernelName:r.BxF,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:a}=t,r=n,o=new As(a.shape);return r.runWebGLProgram(o,[a],a.dtype)}},Os="return floor(x);",Fs=Na({opSnippet:Os,packedOpSnippet:Os,cpuKernelImpl:tn}),Ds={kernelName:r.ZgB,backendName:"webgl",kernelFunc:Fs},Ls=Ra({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Ms={kernelName:r.ElG,backendName:"webgl",kernelFunc:Ls};class Ps{constructor(e){this.variableNames=["A"];const t=U(),[n,a]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(a,".0, ").concat(n,".0);\n\n        vec4 values = ").concat(t.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}}class zs{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=U(),[n,a]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(a,".0, ").concat(n,".0);\n            vec4 values = ").concat(t.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}const Bs={kernelName:r.awo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e;let{pixels:o}=t;const{numChannels:s}=a,i="undefined"!==typeof HTMLVideoElement&&o instanceof HTMLVideoElement,c="undefined"!==typeof HTMLImageElement&&o instanceof HTMLImageElement,[u,h]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],d=[h,u],p=[h,u,s];if(c||i){const e=(0,r._K2)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=Ws&&e===Us||(Us=e,Ws=document.createElement("canvas").getContext("2d",{willReadFrequently:Us})),Ws.canvas.width=u,Ws.canvas.height=h,Ws.drawImage(o,0,0,u,h),o=Ws.canvas}const f=n.makeTensorInfo(d,"int32");n.texData.get(f.dataId).usage=l.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),o);const m=(0,r._K2)().getBool("WEBGL_PACK")?new zs(p):new Ps(p),g=n.runWebGLProgram(m,[f],"int32");return n.disposeData(f.dataId),g}};let Ws,Us=(0,r._K2)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const Vs={kernelName:r.aAr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o,filter:s,bias:i,preluActivationWeights:c}=t,{strides:l,pad:u,dataFormat:h,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:m}=a,g=r.backend_util.convertConv2DDataFormat(h),y=r.backend_util.computeConv2DInfo(o.shape,s.shape,l,d,u,p,!1,g);let b;const v=[],x=null!=i,w=null!=c,k="leakyrelu"===f,S=()=>{const e=[o,s],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=Pa({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return v.push(t),t}return e};if(x&&e.push(t(i,h)),w&&e.push(t(c,h)),k){const t=n.makeTensorInfo([],"float32",r.ZSL.createScalarValue(m,"float32"));e.push(t),v.push(t)}return e};if(1!==y.filterHeight||1!==y.filterWidth||1!==y.dilationHeight||1!==y.dilationWidth||1!==y.strideHeight||1!==y.strideWidth||"SAME"!==y.padInfo.type&&"VALID"!==y.padInfo.type)if(y.strideWidth<=2&&"channelsLast"===g&&(0,r._K2)().getBool("WEBGL_EXP_CONV")){const e=f?Aa(f,!0):null,t=new wo(y,x,e,w,k),a=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],r=S();b=n.runWebGLProgram(t,r,"float32",a)}else if((0,r._K2)().getBool("WEBGL_CONV_IM2COL"))b=To({x:o,filter:s,convInfo:y,backend:n,bias:i,activation:f,preluActivationWeights:c,leakyreluAlpha:m});else{const e=f?Aa(f,!1):null,t=new vo(y,x,e,w,k),a=S();b=n.runWebGLProgram(t,a,"float32")}else b=Io({x:o,filter:s,convInfo:y,backend:n,bias:i,activation:f,preluActivationWeights:c,leakyreluAlpha:m});const I=Pa({inputs:{x:b},backend:n,attrs:{shape:y.outShape}});return v.push(b),v.forEach((e=>n.disposeIntermediateTensorInfo(e))),I}};const Gs={kernelName:r.T7M,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o,filter:s,bias:i,preluActivationWeights:c}=t,{strides:l,pad:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=a,m=[];let g=h;null==g&&(g=[1,1]),r.ZSL.assert(r.backend_util.eitherStridesOrDilationsAreOne(l,g),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(l," and dilations '").concat(g,"'")));const y=r.backend_util.computeConv2DInfo(o.shape,s.shape,l,g,u,d,!0),b=(0,r._K2)().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,v=p?Aa(p,b):null,x=[o,s],w=null!=i,k=null!=c,S="leakyrelu"===p;if(w&&x.push(i),k&&x.push(c),S){const e=n.makeTensorInfo([],"float32",r.ZSL.createScalarValue(f,"float32"));x.push(e),m.push(e)}let I;I=b?new $o(y,w,v,k,S):new Jo(y,w,v,k,S);const T=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],C=n.runWebGLProgram(I,x,"float32",T);return m.forEach((e=>n.disposeIntermediateTensorInfo(e))),C}};class js{constructor(e,t,n,a){this.sliceDim=e,this.strides=t,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=n;const r=ae(n.length);let o="\n    int index;";for(let s=0;s<this.sliceDim;s++)o+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(r," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(o,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}}const Hs={kernelName:r.O4G,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:a,indices:o}=t,s=o.shape,i=s[s.length-1],c=r.ZSL.sizeFromShape(a.shape),[l,u,h,d]=r.backend_util.prepareAndValidate(a,o),p=Pa({inputs:{x:o},backend:n,attrs:{shape:[u,i]}}),f=Pa({inputs:{x:a},backend:n,attrs:{shape:[r.ZSL.sizeFromShape(a.shape)/h,h]}});if(n.shouldExecuteOnCPU([a,o])||"string"===a.dtype){const e=n.readSync(o.dataId),t=n.bufferSync(a),r=nn(e,t,a.dtype,u,i,h,d,a.shape,c);return n.makeTensorInfo(l,a.dtype,r.values)}const m=new js(i,d,[u,h],a.shape),g=n.runWebGLProgram(m,[f,p],f.dtype),y=Pa({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}};class Ks{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=ae(this.rank),a=function(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[];for(let r=0;r<e.length;r++)2===r?a.push("index"):a.push("".concat(n[r]));return a.join()}(e);this.userCode="\n      void main() {\n        ".concat(n," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}}function qs(e){const{inputs:t,backend:n,attrs:a}=e,{x:o,indices:s}=t,{axis:i,batchDims:c}=a,l=r.ZSL.parseAxisParam(i,o.shape)[0];if((0,r._K2)().get("DEBUG")){const e=n.readSync(s.dataId),t=o.shape[l];for(let n=0;n<e.length;++n){const a=e[n];r.ZSL.assert(a<=t-1&&a>=0,(()=>"GatherV2: the index value ".concat(a," is not in [0, ").concat(t-1,"]")))}}const u=r.backend_util.segment_util.collectGatherOpShapeInfo(o,s,l,c),h=r.ZSL.sizeFromShape(s.shape),d=[],p=Pa({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),f=Pa({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,h/u.batchSize]}});d.push(p),d.push(f);const m=[u.batchSize,u.outerSize,h/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([o,s])||"string"===o.dtype){const e=n.bufferSync(f),t=n.bufferSync(p),a=an(t,e,m);return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u.outputShape,a.dtype,a.values)}const g=new Ks(p.shape,m),y=n.runWebGLProgram(g,[p,f],p.dtype);d.push(y);const b=Pa({inputs:{x:y},backend:n,attrs:{shape:u.outputShape}});return d.forEach((e=>n.disposeIntermediateTensorInfo(e))),b}const Ys={kernelName:r.mxL,backendName:"webgl",kernelFunc:qs},Xs=Ra({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:rn,dtype:"bool"}),Zs={kernelName:r.XhZ,backendName:"webgl",kernelFunc:Xs},Qs=Ra({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:on}),Js={kernelName:r.lLS,backendName:"webgl",kernelFunc:Qs};const $s={kernelName:r.OAQ,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t;return Ts(a,!0,n)}},ei=Na({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),ti={kernelName:r.gIW,backendName:"webgl",kernelFunc:ei},ni=Na({opSnippet:"return float(isinf(x));",dtype:"bool"}),ai={kernelName:r.E3$,backendName:"webgl",kernelFunc:ni},ri=Na({opSnippet:"return float(isnan(x));",dtype:"bool"}),oi={kernelName:r.iPs,backendName:"webgl",kernelFunc:ri},si=Ra({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:sn,dtype:"bool"}),ii={kernelName:r.mIA,backendName:"webgl",kernelFunc:si},ci=Ra({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:cn,dtype:"bool"}),li={kernelName:r.CwD,backendName:"webgl",kernelFunc:ci};const ui={kernelName:r.mnI,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:a,stop:r,num:o}=n,s=ln(a,r,o);return t.makeTensorInfo([s.length],"float32",s)}},hi=Na({opSnippet:Ea+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:un}),di={kernelName:r.tG8,backendName:"webgl",kernelFunc:hi},pi=Na({opSnippet:Ea+"\n  return log(1.0 + x);\n"}),fi={kernelName:r.Cg$,backendName:"webgl",kernelFunc:pi},mi=Ra({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),gi={kernelName:r.RUm,backendName:"webgl",kernelFunc:mi},yi=Na({opSnippet:"return float(!(x >= 1.0));"}),bi={kernelName:r.nZd,backendName:"webgl",kernelFunc:yi},vi=Ra({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),xi={kernelName:r.LXA,backendName:"webgl",kernelFunc:vi};class wi{constructor(e,t,n,a,r){this.variableNames=["x"],this.outputShape=[];const o=t,s=e[3]-1;let i;this.outputShape=e;const c="float(".concat(n,") + float(").concat(a,") * sum");i=.5===r?"inversesqrt(".concat(c,")"):1===r?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(r,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(o,"; j <= ").concat(o,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(s,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(i,";\n        setOutput(val);\n      }\n    ")}}class ki{constructor(e,t,n,a,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=t,s=e[3]-1;let i;this.outputShape=e;const c="float(".concat(n,") + float(").concat(a,") * sum");i=.5===r?"inversesqrt(".concat(c,")"):1===r?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(r,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(o,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(o,"; j <= ").concat(o,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(s,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(i,";\n        setOutput(result);\n      }\n    ")}}const Si={kernelName:r.jM4,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{depthRadius:s,bias:i,alpha:c,beta:l}=a,u=(0,r._K2)().getBool("WEBGL_PACK_NORMALIZATION")?new ki(o.shape,s,i,c,l):new wi(o.shape,s,i,c,l);return n.runWebGLProgram(u,[o],o.dtype)}};class Ii{constructor(e,t,n,a,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=a,this.beta=r,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(t,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(t," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(n,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(r,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(r,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}}const Ti={kernelName:r.ToN,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r,y:o,dy:s}=t,{depthRadius:i,bias:c,alpha:l,beta:u}=a,h=new Ii(r.shape,i,c,l,u);return n.runWebGLProgram(h,[r,o,s],r.dtype)}};function Ci(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{reductionIndices:s,keepDims:i}=a,c=o.shape.length,l=r.ZSL.parseAxisParam(s,o.shape);let u=l;const h=r.backend_util.getAxesPermutation(u,c),d=null!=h,p=n.shouldExecuteOnCPU([o]);let f=o;if(d){if(p){const e=n.texData.get(f.dataId).values,t=new Array(c);for(let n=0;n<t.length;n++)t[n]=o.shape[h[n]];const a=Pn(e,o.shape,o.dtype,h,t);f=n.makeTensorInfo(t,o.dtype);n.texData.get(f.dataId).values=a}else f=ja(o,h,n);u=r.backend_util.getInnerMostAxes(u.length,c)}r.backend_util.assertAxesAreInnerMostDims("max",u,c);const[m,g]=r.backend_util.computeOutAndReduceShapes(f.shape,u);let y,b=m;if(i&&(b=r.backend_util.expandShapeToKeepDim(m,l)),p){const e=n.texData.get(f.dataId).values,t=hn(e,r.ZSL.sizeFromShape(g),b,o.dtype);y=n.makeTensorInfo(b,o.dtype);n.texData.get(y.dataId).values=t}else y=function(e,t,n,a){const o=r.ZSL.sizeFromShape(t),s=Pa({inputs:{x:e},attrs:{shape:[r.ZSL.sizeFromShape(e.shape)/o,o]},backend:a}),i=Ua(s,e.dtype,"max",a),c=Pa({inputs:{x:i},attrs:{shape:n},backend:a});return a.disposeIntermediateTensorInfo(s),a.disposeIntermediateTensorInfo(i),c}(f,g,b,n);return d&&n.disposeIntermediateTensorInfo(f),y}const Ei={kernelName:r.VAI,backendName:"webgl",kernelFunc:Ci},Ni=Ra({opSnippet:pa+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+ma+"\n  return result;\n",cpuKernelImpl:dn}),Ri={kernelName:r.LDN,backendName:"webgl",kernelFunc:Ni};const Ai={kernelName:r.t3d,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t;B(o,"maxPool");const{filterSize:s,strides:i,pad:c,dimRoundingMode:l}=a;r.ZSL.assert(r.backend_util.eitherStridesOrDilationsAreOne(i,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")));const u=r.backend_util.computePool2DInfo(o.shape,s,i,1,c,l);if(1===u.filterWidth&&1===u.filterHeight&&r.ZSL.arraysEqual(u.inShape,u.outShape))return ya({inputs:{x:o},backend:n});const h=new Rr(u,"max",!1);return n.runWebGLProgram(h,[o],o.dtype)}};const _i={kernelName:r.ySp,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{filterSize:s,strides:i,pad:c,dataFormat:l,dimRoundingMode:u}=a,h=r.backend_util.computePool3DInfo(o.shape,s,i,[1,1,1],c,u,l),d=new Ar(h,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}};class Oi{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,a=e.dilationHeight,r=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=r-1-e.padInfo.top,i=o-1-e.padInfo.left,c=r*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(r,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(n,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class Fi{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,a=e.strideWidth,r=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,i=e.effectiveFilterDepth,c=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=i-1-e.padInfo.front,h=c-1-e.padInfo.top,d=l-1-e.padInfo.left,p=i*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(h,", ").concat(d,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(i,";\n           wD += ").concat(r,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const Di={kernelName:r.cHb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:o,input:s}=t,i=s,{filterSize:c,strides:l,pad:u,dimRoundingMode:h}=a,d=r.backend_util.computePool3DInfo(i.shape,c,l,[1,1,1],u,h),p=new Ar(d,"max",!0),f=n.runWebGLProgram(p,[i],i.dtype),m=new Fi(d),g=n.runWebGLProgram(m,[o,f],i.dtype);return n.disposeIntermediateTensorInfo(f),g}};const Li={kernelName:r.RXX,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:o,input:s,output:i}=t,c=s;B([s,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:h,dimRoundingMode:d}=a,p=r.backend_util.computePool2DInfo(c.shape,l,u,1,h,d),f=new Rr(p,"max",!0),m=n.runWebGLProgram(f,[c],c.dtype),g=new Oi(p),y=n.runWebGLProgram(g,[o,m],c.dtype);return n.disposeIntermediateTensorInfo(m),y}};const Mi={kernelName:r.TL8,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{x:o}=t,{filterSize:s,strides:i,pad:c,includeBatchInIndex:l}=n,u=a;r.ZSL.assert(4===o.shape.length,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(o.shape.length,".")));const h=[1,1];r.ZSL.assert(r.backend_util.eitherStridesOrDilationsAreOne(i,h),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(h,"'")));const d=r.backend_util.computePool2DInfo(o.shape,s,i,h,c),[p,f]=function(e,t,n,a){let r=new Rr(n,"max",!1);const o=a.runWebGLProgram(r,[e],"float32");return r=new Rr(n,"max",!0,!0,t),[o,a.runWebGLProgram(r,[e],"float32")]}(o,l,d,u);return[p,f]}};const Pi={kernelName:r.g5A,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{x:o}=t,{keepDims:s,axis:i}=n,c=a,l=o.shape.length,u=r.ZSL.parseAxisParam(i,o.shape);let h=u;const d=r.backend_util.getAxesPermutation(h,l),p=null!=d,f=c.shouldExecuteOnCPU([o]),m=[];let g=o;if(p){if(f){const e=c.texData.get(g.dataId).values,t=new Array(l);for(let a=0;a<t.length;a++)t[a]=o.shape[d[a]];const n=Pn(e,o.shape,o.dtype,d,t);g=c.makeTensorInfo(t,o.dtype);c.texData.get(g.dataId).values=n}else g=ja(o,d,c);m.push(g),h=r.backend_util.getInnerMostAxes(h.length,l)}r.backend_util.assertAxesAreInnerMostDims("sum",h,l);const[y,b]=r.backend_util.computeOutAndReduceShapes(g.shape,h);let v=y;s&&(v=r.backend_util.expandShapeToKeepDim(y,u));const x=function(e,t,n,a){const o=r.ZSL.sizeFromShape(t),s=Pa({inputs:{x:e},attrs:{shape:[r.ZSL.sizeFromShape(e.shape)/o,o]},backend:a}),i=Ua(s,"float32","mean",a),c=Pa({inputs:{x:i},attrs:{shape:n},backend:a});return a.disposeIntermediateTensorInfo(s),a.disposeIntermediateTensorInfo(i),c}(g,b,v,c);for(const r of m)c.disposeIntermediateTensorInfo(r);return x}};const zi={kernelName:r.lNG,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{axis:s,keepDims:i}=a,c=o.shape.length,l=r.ZSL.parseAxisParam(s,o.shape);let u=l;const h=r.backend_util.getAxesPermutation(u,c);let d=o;null!=h&&(d=qa({inputs:{x:o},backend:n,attrs:{perm:h}}),u=r.backend_util.getInnerMostAxes(u.length,o.shape.length)),r.backend_util.assertAxesAreInnerMostDims("min",u,c);const[p,f]=r.backend_util.computeOutAndReduceShapes(d.shape,u),m=Pa({inputs:{x:d},backend:n,attrs:{shape:[-1,r.ZSL.sizeFromShape(f)]}}),g=Ua(m,m.dtype,"min",n);let y;if(i){y=Pa({inputs:{x:g},backend:n,attrs:{shape:r.backend_util.expandShapeToKeepDim(p,l)}})}else y=Pa({inputs:{x:g},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=h&&n.disposeIntermediateTensorInfo(d),y}},Bi=Ra({opSnippet:pa+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+ma+"\n  return result;\n",cpuKernelImpl:pn}),Wi={kernelName:r.LG0,backendName:"webgl",kernelFunc:Bi};class Ui{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=ae(a),o=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),i=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===n?0:1;this.userCode=1!==a?"\n      ".concat(r," start = ").concat(r,"(").concat(o,");\n      ").concat(r," end = ").concat(r,"(").concat(s,");\n\n      void main() {\n        ").concat(r," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(r," coords = outC - start;\n        setOutput(getX(").concat(i,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")}}class Vi{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=ae(a),o=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),i=Wn("rc",a),c=Wn("source",a),l="".concat(i[a-1]," < ").concat(this.outputShape[a-1]),u=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),h="reflect"===n?0:1;let d="";if(1===a){const e="\n        ".concat(r," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(h,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(h,";\n        }\n        source -= start;\n      ");d="\n        ".concat(r," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        ").concat(i[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        }\n      ")}else{const e="\n        ".concat(r," source = rc;\n        ").concat(r," lt = ").concat(r,"(lessThan(source, start));\n        ").concat(r," gte = ").concat(r,"(greaterThanEqual(source, end));\n        ").concat(r," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(h,") +\n                gte * ((end - 1) * 2 - source + ").concat(h,");\n        source -= start;\n      ");d="\n        ".concat(r," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        ").concat(i[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        }\n        rc = outputLoc;\n        ").concat(i[a-2]," += 1;\n        if(").concat(i[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(e,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n          ").concat(i[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(e,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(r," start = ").concat(r,"(").concat(o,");\n      const ").concat(r," end = ").concat(r,"(").concat(s,");\n\n      void main() {\n        ").concat(r," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")}}const Gi={kernelName:r.x7F,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:a}=e;const{x:o}=t,{paddings:s,mode:i}=a,c=(0,r._K2)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Vi(o.shape,s,i):new Ui(o.shape,s,i);return n.runWebGLProgram(c,[o],o.dtype)}},ji=Ra({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+ma+"\n  return result;\n"}),Hi={kernelName:r.BLA,backendName:"webgl",kernelFunc:ji};class Ki{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(t-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(t-1,"));\n      }\n    ")}}const qi=Ra({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),Yi={kernelName:r.sDr,backendName:"webgl",kernelFunc:qi},Xi="return a - b;",Zi=Ra({opSnippet:Xi,packedOpSnippet:Xi,supportsComplex:!0,cpuKernelImpl:Dn}),Qi={kernelName:r.PbM,backendName:"webgl",kernelFunc:Zi};function Ji(e){const{inputs:t,backend:n,attrs:a}=e,{logits:o}=t,{dim:s}=a,i=r.ZSL.parseAxisParam([s],o.shape),c=Ci({inputs:{x:o},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=r.backend_util.expandShapeToKeepDim(c.shape,i),u=Pa({inputs:{x:c},backend:n,attrs:{shape:l}}),h=Zi({inputs:{a:o,b:u},backend:n}),d=ys({inputs:{x:h},backend:n}),p=Ha({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),f=Pa({inputs:{x:p},backend:n,attrs:{shape:l}}),m=qi({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}const $i={kernelName:r.rFG,backendName:"webgl",kernelFunc:Ji};const ec={kernelName:r.WT3,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{numSamples:o,seed:s,normalized:i}=a,c=i?r:Ji({inputs:{logits:r},backend:n,attrs:{dim:r.shape.length-1}}),l=c.shape[0],u=c.shape[1],h=new Ki(l,u,o),d=[[s]],p=n.runWebGLProgram(h,[c],"int32",d);return i||n.disposeIntermediateTensorInfo(c),p}},tc=Yn+"\n  return -x;\n";const nc={kernelName:r.l0G,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t;if(n.shouldExecuteOnCPU([a])){const e=n.texData.get(a.dataId),[t,r]=mn(e.values,a.shape,a.dtype);return n.makeTensorInfo(r,a.dtype,t)}let o;return o=(0,r._K2)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new ia(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new qn(a.shape,tc),n.runWebGLProgram(o,[a],a.dtype)}},ac=r.kpo.c7;const rc={kernelName:r.SDM,backendName:"webgl",kernelFunc:function(e){r.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:o,scores:s}=t,{maxOutputSize:i,iouThreshold:c,scoreThreshold:l}=a,u=n.readSync(o.dataId),h=n.readSync(s.dataId),{selectedIndices:d}=ac(u,h,i,c,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},oc=r.kpo.ZS;const sc={kernelName:r.Zl4,backendName:"webgl",kernelFunc:function(e){r.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:o,scores:s}=t,{maxOutputSize:i,iouThreshold:c,scoreThreshold:l,padToMaxOutputSize:u}=a,h=n.readSync(o.dataId),d=n.readSync(s.dataId),{selectedIndices:p,validOutputs:f}=oc(h,d,i,c,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}},ic=r.kpo.ut;const cc={kernelName:r.e0f,backendName:"webgl",kernelFunc:function(e){r.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:o,scores:s}=t,{maxOutputSize:i,iouThreshold:c,scoreThreshold:l,softNmsSigma:u}=a,h=n.readSync(o.dataId),d=n.readSync(s.dataId),p=i,f=c,m=l,g=u,{selectedIndices:y,selectedScores:b}=ic(h,d,p,f,m,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}};class lc{constructor(e,t,n,a){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(n,"),\n                      float(index == coords.y)));\n      }\n    ")}}const uc={kernelName:r.urI,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{indices:o}=t,{dtype:s,depth:i,onValue:c,offValue:l}=a,u=r.ZSL.sizeFromShape(o.shape),h=new lc(u,i,c,l),d=Pa({inputs:{x:o},backend:n,attrs:{shape:[u]}}),p=n.runWebGLProgram(h,[d],s);n.disposeIntermediateTensorInfo(d);const f=Pa({inputs:{x:p},backend:n,attrs:{shape:[...o.shape,i]}});return n.disposeIntermediateTensorInfo(p),f}};function hc(e){const{inputs:t,backend:n}=e,{x:a}=t;if("complex64"===a.dtype){const e=Qr({inputs:{input:a},backend:n}),t=hc({inputs:{x:e},backend:n}),r=fo({inputs:{input:a},backend:n}),o=hc({inputs:{x:r},backend:n}),s=va({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),s}return Ns({attrs:{shape:a.shape,dtype:a.dtype,value:"string"===a.dtype?"":0},backend:n})}const dc={kernelName:r.xJ3,backendName:"webgl",kernelFunc:hc};const pc={kernelName:r.LWX,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:a}=t,{x:r}=n;if("string"===r.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===r.dtype){const t=Qr({inputs:{input:r},backend:a}),n=e({inputs:{x:t},backend:a}),o=fo({inputs:{input:r},backend:a}),s=hc({inputs:{x:o},backend:a}),i=va({inputs:{real:n,imag:s},backend:a});return a.disposeIntermediateTensorInfo(t),a.disposeIntermediateTensorInfo(n),a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(s),i}return Ns({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:a})}};const fc={kernelName:r.mM$,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{axis:o}=a;if(1===t.length)return vs({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const s=t[0].shape,i=t[0].dtype;t.forEach((e=>{r.ZSL.assertShapesMatch(s,e.shape,"All tensors passed to stack must have matching shapes"),r.ZSL.assert(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const c=[],l=yo({inputs:t.map((e=>{const t=vs({inputs:{input:e},backend:n,attrs:{dim:o}});return c.push(t),t})),backend:n,attrs:{axis:o}});return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}};class mc{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=ae(a),o=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),i=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(r," start = ").concat(r,"(").concat(o,");\n      ").concat(r," end = ").concat(r,"(").concat(s,");\n\n      void main() {\n        ").concat(r," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(r," coords = outC - start;\n          setOutput(getX(").concat(i,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}}class gc{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=ae(a),o=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),i=Wn("rc",a),c=Wn("source",a),l="".concat(i[a-1]," < ").concat(this.outputShape[a-1]),u=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),h=["".concat(r," rc = outputLoc;"),"".concat(i[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(i[a-2]," += 1;\n       if(").concat(i[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(i[a-1]," += 1;\n         if(").concat(l,") {")],d=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,m=1===a?2:4;f<m;f++)p+="\n        ".concat(h[f],"\n        if (").concat(d,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(r," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        }\n      ");p+=1===a?"} ":"}}",this.userCode="\n      const ".concat(r," start = ").concat(r,"(").concat(o,");\n      const ").concat(r," end = ").concat(r,"(").concat(s,");\n\n      void main() {\n        ").concat(r," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}}const yc=e=>{const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{paddings:s,constantValue:i}=a;if(0===r.ZSL.sizeFromShape(o.shape)){return Ns({backend:n,attrs:{shape:s.map(((e,t)=>e[0]+o.shape[t]+e[1])),value:i,dtype:o.dtype}})}const c=(0,r._K2)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new gc(o.shape,s,i):new mc(o.shape,s,i),l=[[i]];return n.runWebGLProgram(c,[o],o.dtype,l)},bc={kernelName:r.ODT,backendName:"webgl",kernelFunc:yc},vc=Ra({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+ma+"\n  return result;\n"}),xc={kernelName:r.pyJ,backendName:"webgl",kernelFunc:vc};const wc={kernelName:r.kdj,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{axis:s,keepDims:i}=a,c=o.shape.length,l=[],u=r.ZSL.parseAxisParam(s,o.shape);let h=u;const d=r.backend_util.getAxesPermutation(h,c);let p,f=o;if(null!=d&&(f=qa({inputs:{x:o},backend:n,attrs:{perm:d}}),h=r.backend_util.getInnerMostAxes(h.length,c),l.push(f)),r.backend_util.assertAxesAreInnerMostDims("prod",h,c),n.shouldExecuteOnCPU([f])){const e=n.texData.get(f.dataId).values,{outVals:t,outShape:a,outDtype:r}=yn(f.shape,f.dtype,e,h);p=n.makeTensorInfo(a,r,t)}else{const[e,t]=r.backend_util.computeOutAndReduceShapes(f.shape,h),a=r.ZSL.sizeFromShape(t),s=Pa({inputs:{x:f},backend:n,attrs:{shape:[-1,a]}}),i=Ua(s,(0,r.chL)(o.dtype),"prod",n);p=Pa({inputs:{x:i},backend:n,attrs:{shape:e}}),l.push(s),l.push(i)}if(i){l.push(p);const e=r.backend_util.expandShapeToKeepDim(p.shape,u);p=Pa({inputs:{x:p},backend:n,attrs:{shape:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}};const kc={kernelName:r.oJ2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{paramsNestedSplits:r,paramsDenseValues:o,indices:s}=t,{outputRaggedRank:i}=a,c=r.map((e=>n.readSync(e.dataId))),l=r.map((e=>e.shape)),u=n.readSync(o.dataId),h=n.readSync(s.dataId),[d,p,f]=bn(c,l,u,o.shape,o.dtype,h,s.shape,i),m=d.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(f,o.dtype,p);return m.concat([g])}};const Sc={kernelName:r.mH5,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{shape:r,values:o,defaultValue:s,rowPartitionTensors:i}=t,{rowPartitionTypes:c}=a,l=n.readSync(r.dataId),u=n.readSync(o.dataId),h=n.readSync(s.dataId),d=i.map((e=>n.readSync(e.dataId))),p=i.map((e=>e.shape)),[f,m]=vn(l,r.shape,u,o.shape,o.dtype,h,s.shape,d,p,c);return n.makeTensorInfo(f,o.dtype,m)}},Ic=e=>{const{backend:t,attrs:n}=e,{start:a,stop:r,step:o,dtype:s}=n,i=xn(a,r,o,s);return t.makeTensorInfo([i.length],s,i)},Tc={kernelName:r.Q6t,backendName:"webgl",kernelFunc:Ic},Cc=Na({opSnippet:"return 1.0 / x;"}),Ec={kernelName:r.huO,backendName:"webgl",kernelFunc:Cc},Nc=Na({opSnippet:Yn+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Rc={kernelName:r.fUj,backendName:"webgl",kernelFunc:Nc},Ac=Na({opSnippet:Yn+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),_c={kernelName:r.P_L,backendName:"webgl",kernelFunc:Ac};class Oc{constructor(e,t,n,a,r){this.variableNames=["A"],this.outputShape=[];const[o,s,i,c]=e;this.outputShape=[o,t,n,c];const l=[a&&t>1?s-1:s,a&&n>1?i-1:i],u=[a&&t>1?t-1:t,a&&n>1?n-1:n];let h;h=r?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(i,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}}class Fc{constructor(e,t,n,a,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,i,c]=e;this.outputShape=[o,t,n,c];const l=[a&&t>1?s-1:s,a&&n>1?i-1:i],u=[a&&t>1?t-1:t,a&&n>1?n-1:n];let h;h=r?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],",\n          ").concat(l[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(i,".0,\n                                     ").concat(i,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}}const Dc={kernelName:r.hgw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:o}=t,{alignCorners:s,halfPixelCenters:i,size:c}=a,[l,u]=c,h=(0,r._K2)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Fc(o.shape,l,u,s,i):new Oc(o.shape,l,u,s,i);return n.runWebGLProgram(h,[o],"float32")}};class Lc{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,a,r]=t,[,o,s]=e,i=[n&&o>1?a-1:a,n&&s>1?r-1:r],c=[n&&o>1?o-1:o,n&&s>1?s-1:s],l=i[0]/c[0],u=i[1]/c[1],h=1/l,d=1/u,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(l,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(d,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(s,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(a-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(r-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const Mc={kernelName:r.FCQ,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:s}=a,i=new Lc(o.shape,r.shape,s);return n.runWebGLProgram(i,[o],o.dtype)}};class Pc{constructor(e,t,n,a,r){this.variableNames=["A"],this.outputShape=[];const[o,s,i,c]=e;this.outputShape=[o,t,n,c];const l=[a&&t>1?s-1:s,a&&n>1?i-1:i],u=[a&&t>1?t-1:t,a&&n>1?n-1:n],h=a?"0.5":"0.0";let d;d=r?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(i,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}}class zc{constructor(e,t,n,a,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,i,c]=e;this.outputShape=[o,t,n,c];const l=[a&&t>1?s-1:s,a&&n>1?i-1:i],u=[a&&t>1?t-1:t,a&&n>1?n-1:n],h=a?"0.5":"0.0";let d;d=r?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],",\n          ").concat(l[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(i,".0,\n                                     ").concat(i,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}}const Bc={kernelName:r.jOE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:o}=t,{alignCorners:s,halfPixelCenters:i,size:c}=a,[l,u]=c,h=(0,r._K2)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new zc(o.shape,l,u,s,i):new Pc(o.shape,l,u,s,i);return n.runWebGLProgram(h,[o],o.dtype)}};class Wc{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,a,r]=t,[,o,s]=e,i=[n&&o>1?a-1:a,n&&s>1?r-1:r],c=[n&&o>1?o-1:o,n&&s>1?s-1:s],l=i[0]/c[0],u=i[1]/c[1],h=1/l,d=1/u,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(l,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(d,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(s,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(i[0],") *\n                (float(dyR) / float(").concat(c[0],"));\n\n            float sourceFracCol =\n                float(").concat(i[1],") *\n                  (float(dyC) / float(").concat(c[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(a,") - 1),\n                ").concat(n," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(n," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const Uc={kernelName:r.XQy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:s}=a,i=new Wc(o.shape,r.shape,s);return n.runWebGLProgram(i,[o],o.dtype)}};class Vc{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));if(this.outputShape=e,1===n)return void(this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      "));const a=e.map(((n,a)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - coords[").concat(n,"] - 1"):"coords[".concat(n,"]"))(a))).join(","),r=ae(n);this.userCode="\n      void main() {\n        ".concat(r," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}}class Gc{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));this.outputShape=e;const a=Wn("rc",n),r="".concat(a[n-1]," + 1 < ").concat(this.outputShape[n-1]),o="".concat(a[n-2]," + 1 < ").concat(this.outputShape[n-2]),s=ae(n);function i(n){const a=e.map(((a,r)=>function(n,a){return-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - ").concat(a[n]," - 1"):"".concat(a[n])}(r,n))),r=a.join(","),o=a.slice(-2).join(",");return"getChannel(getX(".concat(r,"), vec2(").concat(o,"))")}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(r,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return i(e)}(a.slice()),";\n          if(").concat(r,"){\n            result.g = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",i(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[n-2]="("+e[n-2]+" + 1)",i(e)}(a.slice()),";\n            if(").concat(r,") {\n              result.a = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",i(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}}const jc={kernelName:r.D7i,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{dims:s}=a,i=o.shape.length,c=r.ZSL.parseAxisParam(s,o.shape);if(0===i)return ya({inputs:{x:o},backend:n});const l=(0,r._K2)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Gc(o.shape,c):new Vc(o.shape,c);return n.runWebGLProgram(l,[o],o.dtype)}};class Hc{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],a=e[2];this.outputShape=e;let r="";r="number"===typeof t?"float outputValue = ".concat(t.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(t.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(r,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(n,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const Kc={kernelName:r.BK4,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{image:o}=t,{radians:s,fillValue:i,center:c}=n,l=a,u=new Hc(o.shape,i),[h,d]=r.backend_util.getImageCenter(c,o.shape[1],o.shape[2]),p=[[h,d,Math.sin(s),Math.cos(s)]];return l.runWebGLProgram(u,[o],o.dtype,p)}},qc=Na({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),Yc={kernelName:r.hVg,backendName:"webgl",kernelFunc:qc},Xc=Na({opSnippet:"return inversesqrt(x);",cpuKernelImpl:wn}),Zc={kernelName:r.TOR,backendName:"webgl",kernelFunc:Xc};class Qc{constructor(e,t,n,a,r,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const s=ae(r.length),i=ae(o.length);let c="";1===n?c="i":2===n&&(c="i, j");const l="getIndices(".concat(c,")");let u="";1===a?u="i":2===a&&(u="i, coords[1]");const h="getUpdates(".concat(u,")"),d=t>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(r,");\n\n        void main() {\n          ").concat(i," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(t,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(d,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}}const Jc={kernelName:r.pJc,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{indices:o,updates:s}=t,{shape:i}=a,{sliceRank:c,numUpdates:l,sliceSize:u,strides:h,outputSize:d}=r.backend_util.calculateShapes(s,o,i),p=[d/u,u];if(0===d)return n.makeTensorInfo(i,o.dtype);const f=Pa({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),m=Pa({inputs:{x:s},backend:n,attrs:{shape:[l,u]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),y=new Qc(l,c,f.shape.length,m.shape.length,h,p),b=n.runWebGLProgram(y,[m,f,g],m.dtype),v=Pa({inputs:{x:b},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),v}};class $c{constructor(e,t,n,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const o="for (int i = 0; i < ".concat(Math.ceil(Math.log2(t+1)),"; ++i) { if (left >= right) break;"),s=2===(0,r._K2)().getNumber("WEBGL_VERSION")?"while (left < right) {":o,i="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(s,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(i," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}}const el={kernelName:r.uWl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sortedSequence:r,values:o}=t,{side:s}=a,i=new $c(r.shape[0],r.shape[1],o.shape[1],s),c=[[r.shape[1]]];return n.runWebGLProgram(i,[r,o],"int32",c)}};class tl{constructor(e,t,n){let a,r;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank ".concat(n," is not yet supported"));if(1===n)r="resRC",a="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[];for(let a=0;a<t.length;a++)s.push("".concat(n[a])),a<e&&o.push("".concat(n[a]));a=o.join(),r=s.join()}const o=ae(n);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(r,"));\n        } else {\n          setOutput(getB(").concat(r,"));\n        }\n      }\n    ")}}const nl={kernelName:r.l6P,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:a,t:o,e:s}=t,i=new tl(a.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(i,[a,o,s],(0,r.TuY)(o.dtype,s.dtype))}},al=Na({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(r.backend_util.SELU_SCALEALPHA,";\n  float scale = ").concat(r.backend_util.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),rl={kernelName:r.u$b,backendName:"webgl",kernelFunc:al},ol=Na({opSnippet:Ea+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:Sn}),sl={kernelName:r.vI1,backendName:"webgl",kernelFunc:ol},il=Na({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),cl={kernelName:r.YVe,backendName:"webgl",kernelFunc:il},ll=Na({opSnippet:Ea+"\n  return sin(x);\n"}),ul={kernelName:r.hql,backendName:"webgl",kernelFunc:ll},hl=Na({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),dl={kernelName:r.J3C,backendName:"webgl",kernelFunc:hl},pl=Na({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),fl={kernelName:r.Fin,backendName:"webgl",kernelFunc:pl},ml={kernelName:r.A8B,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{blockShape:s,paddings:i}=a;r.ZSL.assert(o.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const c=s.reduce(((e,t)=>e*t)),l=[[0,0]];l.push(...i);for(let r=1+s.length;r<o.shape.length;++r)l.push([0,0]);const u=[],h=yc({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),d=r.backend_util.getReshaped(h.shape,s,c,!1),p=r.backend_util.getPermuted(d.length,s.length,!1),f=r.backend_util.getReshapedPermuted(h.shape,s,c,!1),m=Pa({inputs:{x:h},backend:n,attrs:{shape:d}}),g=qa({inputs:{x:m},backend:n,attrs:{perm:p}}),y=Pa({inputs:{x:g},backend:n,attrs:{shape:f}});return u.push(h),u.push(m),u.push(g),u.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}};const gl={kernelName:r.C8s,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:a,values:r,denseShape:o,defaultValue:s}=t;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(o.shape));if(2!==a.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(a.shape));if(1!==r.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(r.shape));if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));const i=n.readSync(a.dataId),c=n.readSync(r.dataId),l=n.readSync(o.dataId),u=n.readSync(s.dataId)[0],[h,d,p,f,m]=Cn(i,a.shape,a.dtype,c,r.dtype,l,u);return[n.makeTensorInfo(d,a.dtype,h),n.makeTensorInfo([d[0]],r.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],a.dtype,new Int32Array(m))]}};const yl={kernelName:r.BoJ,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:a,inputShape:r,newShape:o}=t;if(2!==a.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(a.shape));if(1!==r.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(r.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));const s=Array.from(n.readSync(r.dataId)),i=n.readSync(a.dataId),c=Array.from(n.readSync(o.dataId)),[l,u,h]=En(i,a.shape,a.dtype,s,c);return[n.makeTensorInfo(u,a.dtype,l),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}};const bl={kernelName:r.L6G,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:o}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(r.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(o.shape));const s=n.readSync(a.dataId),i=n.readSync(r.dataId),c=n.readSync(o.dataId),[l,u]=Nn(s,a.shape,a.dtype,i,c,!0);return n.makeTensorInfo(u,a.dtype,l)}};const vl={kernelName:r.DvZ,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:o}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(r.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(o.shape));const s=n.readSync(a.dataId),i=n.readSync(r.dataId),c=n.readSync(o.dataId),[l,u]=Nn(s,a.shape,a.dtype,i,c);return n.makeTensorInfo(u,a.dtype,l)}};const xl={kernelName:r.jgd,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sparseIndices:o,sparseValues:s,defaultValue:i}=t,{outputShape:c}=a,{sliceRank:l,numUpdates:u,sliceSize:h,strides:d,outputSize:p}=r.backend_util.calculateShapes(s,o,c),f=!1;if("string"===s.dtype){const e=n.bufferSync(o),t=n.bufferSync(s),a=r.ZSL.decodeString(n.readSync(i.dataId)[0]),m=kn(e,t,c,p,h,u,l,d,a,f);return n.makeTensorInfo(c,m.dtype,m.values)}const m=new Qc(u,l,o.shape.length,s.shape.length,d,[p,1],f),g=n.runWebGLProgram(m,[s,o,i],s.dtype),y=Pa({inputs:{x:g},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(g),y}};const wl={kernelName:r.Blb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{numOrSizeSplits:s,axis:i}=a,c=r.ZSL.parseAxisParam(i,o.shape)[0],l=r.backend_util.prepareSplitSize(o,s,c),u=o.shape.length,h=new Array(u).fill(0),d=o.shape.slice();return l.map((e=>{const t=[...d];t[c]=e;const a=jr({inputs:{x:o},backend:n,attrs:{begin:h,size:t}});return h[c]+=e,a}))}},kl="return sqrt(x);",Sl=Na({opSnippet:kl,packedOpSnippet:kl,cpuKernelImpl:Rn}),Il={kernelName:r.dFH,backendName:"webgl",kernelFunc:Sl},Tl=Na({opSnippet:"return x * x;"}),Cl={kernelName:r.M6A,backendName:"webgl",kernelFunc:Tl},El="return (a - b) * (a - b);",Nl=Ra({opSnippet:El,packedOpSnippet:El}),Rl={kernelName:r.Ddj,backendName:"webgl",kernelFunc:Nl};const Al={kernelName:r.pnw,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:a}=e;const{x:r}=t,o=Yn+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),s=new qn(r.shape,o);return a.runWebGLProgram(s,[r],r.dtype)}};class _l{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const a=n.length,r=ae(n.length),o=ae(n.length);let s="";if(1===a)s="coords * strides + begin";else{let e=0;s=n.map(((t,a)=>(e++,1===n.length?"coords * strides[".concat(a,"] + begin[").concat(a,"]"):"coords[".concat(e-1,"] * strides[").concat(a,"] + begin[").concat(a,"]")))).join(",")}this.userCode="\n      ".concat(r," begin = ").concat(r,"(").concat(e,");\n      ").concat(r," strides = ").concat(r,"(").concat(t,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}}const Ol={kernelName:r.UcO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{begin:s,end:i,strides:c,beginMask:l,endMask:u,ellipsisMask:h,newAxisMask:d,shrinkAxisMask:p}=a,{finalShapeSparse:f,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:b,begin:v,end:x,strides:w}=r.Kro.sliceInfo(o.shape,s,i,c,l,u,h,d,p);let k;if(g)k=Pa({inputs:{x:o},backend:n,attrs:{shape:m}});else if(y||b){r.ZSL.assert(o.shape.length>=1,(()=>"Input must have rank at least 1, got: ".concat(o.shape.length)));const e=r.Kro.computeOutShape(v,x,w),t=jr({inputs:{x:o},backend:n,attrs:{begin:v,size:e}});k=Pa({inputs:{x:t},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([o])){const e=n.readSync(o.dataId),t=(0,r.ra8)(o.shape,o.dtype,e),a=An(f,t,w,v);k=n.makeTensorInfo(m,o.dtype,a.values)}else{const e=new _l(v,w,f);k=n.runWebGLProgram(e,[o],o.dtype)}}const S=Pa({inputs:{x:k},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(k),S}};const Fl={kernelName:r.YAb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{separator:r,nGramWidths:o,leftPad:s,rightPad:i,padWidth:c,preserveShortSequences:l}=a,{data:u,dataSplits:h}=t,d=n.readSync(u.dataId),p=n.readSync(h.dataId),[f,m]=_n(d,p,r,o,s,i,c,l);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",m)]}};const Dl={kernelName:r.iW0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{skipEmpty:r}=a,{input:o,delimiter:s}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: ".concat(o.shape));if(0!==s.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(s.shape));const i=n.readSync(o.dataId),c=n.readSync(s.dataId)[0],[l,u,h]=On(i,c,r),d=u.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};const Ll={kernelName:r.$jE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{numBuckets:r}=a,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");const s=n.readSync(o.dataId),i=Fn(s,r);return n.makeTensorInfo(o.shape,"int32",i)}},Ml=Na({opSnippet:"return tan(x);"}),Pl={kernelName:r.oFs,backendName:"webgl",kernelFunc:Ml},zl=Na({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),Bl={kernelName:r.iuW,backendName:"webgl",kernelFunc:zl};class Wl{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[o]*t[o];this.outputShape=n,this.rank=n.length;const a=ae(this.rank),r=function(e){const t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],a=[];for(let r=0;r<e.length;r++)a.push("imod(".concat(n[r],", ").concat(e[r],")"));return a.join()}(e);this.userCode="\n      void main() {\n        ".concat(a," resRC = getOutputCoords();\n        setOutput(getA(").concat(r,"));\n      }\n    ")}}function Ul(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{reps:s}=a;if("string"===o.dtype||o.shape.length>5){const e=n.readSync(o.dataId),t="string"===o.dtype?e.map((e=>r.ZSL.decodeString(e))):e,a=(0,r.ra8)(o.shape,o.dtype,t),i=Ln(a,s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const i=new Wl(o.shape,s);return n.runWebGLProgram(i,[o],o.dtype)}const Vl={kernelName:r.FAs,backendName:"webgl",kernelFunc:Ul};class Gl{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class jl{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function Hl(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function Kl(e){let t=1;for(;t<e;)t*=2;return t}const ql={kernelName:r.TBb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o}=t,{k:s,sorted:i}=a,c=(0,r._K2)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=(0,r._K2)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=o.shape,h=u[u.length-1];if(n.shouldExecuteOnCPU([o])||h<c||s>l){const e=n.readSync(o.dataId),[t,a]=Mn(e,u,o.dtype,s,i);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(a.shape,a.dtype,a.values)]}if(0===s)return u[u.length-1]=0,[n.makeTensorInfo(u,o.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(1===h)return[o,Ns({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),p=null!==d&&d.isPacked,f=p?n.unpackTensor(o):o,m=r.ZSL.sizeFromShape(u)/h,g=Pa({inputs:{x:f},attrs:{shape:[m,h]},backend:n});p&&Hl(n,f);const y=Kl(s),b=Kl(h);let v=null;const x=()=>null===v?[g,g]:[g,v],w=(e,t,a)=>{const r=x(),o=new Gl(a),s=[[h],[null===v?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],i=v;v=n.runWebGLProgram(o,r,"int32",s),Hl(n,i)};for(let r=1;r<y;r*=2){const e=2*r;for(let t=r;t>=1;t/=2)w(e,t,[m,b])}for(let r=b;r>y;r/=2){const e=x(),t=new jl([m,r/2]),a=[[h],[null===v?1:0],[y]],o=v;v=n.runWebGLProgram(t,e,"int32",a),Hl(n,o);const s=y/2,i=2*s;for(let n=s;n>=1;n/=2)w(i,n,v.shape)}let k=v;v=jr({inputs:{x:v},backend:n,attrs:{begin:0,size:[m,s]}}),Hl(n,k);let S=qs({inputs:{x:g,indices:v},backend:n,attrs:{axis:1,batchDims:1}});Hl(n,g);const I=u.slice(0,-1);I.push(s),k=v,v=Pa({inputs:{x:v},attrs:{shape:I},backend:n}),Hl(n,k);const T=S;return S=Pa({inputs:{x:S},attrs:{shape:I},backend:n}),Hl(n,T),[S,v]}};class Yl{constructor(e,t,n,a,r,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const s="nearest"===n?1:2;let i;switch(a){case"constant":default:i=1;break;case"reflect":i=2;break;case"wrap":i=3;break;case"nearest":i=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(i," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(i," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(i," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(t,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(r,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(r,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(t,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(s," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}}const Xl={kernelName:r.dLy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{image:r,transforms:o}=t,{interpolation:s,fillMode:i,fillValue:c,outputShape:l}=a,[u,h,d,p]=r.shape,[f,m]=null!=l?l:[h,d],g=new Yl(h,d,s,i,c,[u,f,m,p]);return n.runWebGLProgram(g,[r,o],"float32")}};const Zl={kernelName:r.EwU,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{axis:r}=n,{x:o}=t;B(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const s=a.readSync(o.dataId),{outputValues:i,outputShape:c,indices:l}=zn(s,r,o.shape,o.dtype);return[a.makeTensorInfo(c,o.dtype,i),a.makeTensorInfo([l.length],"int32",l)]}};const Ql={kernelName:r.dXR,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{value:r}=t;let{axis:o}=a;o<0&&(o+=r.shape.length);const s=r,i=s.shape.length,c=r.shape[o],l=new Array(i-1);let u=0;for(let m=0;m<i;m++)m!==o&&(l[u++]=s.shape[m]);const h=[],d=new Array(i).fill(0),p=s.shape.slice();p[o]=1;const f=new Array(c);for(let m=0;m<f.length;m++){d[o]=m;const e=jr({inputs:{x:s},backend:n,attrs:{begin:d,size:p}}),t=Pa({inputs:{x:e},backend:n,attrs:{shape:l}});f[m]=t,h.push(e)}return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};class Jl{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,a=e.batchSize,r=e.inSize,o=e.numSegments,s=o*Math.ceil(r/n);this.outputShape=[a,s];const i=4*Math.floor(n/4),c=n%4,l="\n        sumValue += dot(values, segFilter);\n    ";let u="";r%n>0&&(u="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return initializationValue;\n        }\n      "));let h="";r%n>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(u,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(h,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(n,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(i,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(i,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}}const $l=[Qa,$a,tr,ar,sr,lr,ur,hr,yr,br,xr,kr,Ir,Cr,Nr,_r,Or,Lr,Mr,Pr,Wr,Kr,qr,Yr,eo,ao,so,xa,lo,bo,Co,_o,Oo,Fo,Do,Lo,Po,Bo,Uo,qo,Yo,Xo,Qo,es,as,rs,ss,cs,ls,hs,ds,fs,gs,bs,xs,Ss,Cs,Rs,_s,Ds,Ms,Bs,Vs,Gs,Hs,Ys,Zs,Js,ba,$s,mo,ti,ai,oi,Sa,ii,li,ui,di,fi,gi,bi,xi,Si,Ti,Ei,Ri,Ai,_i,Di,Li,Mi,Pi,zi,Wi,Gi,Hi,ec,Ma,nc,rc,sc,cc,Zr,uc,pc,fc,bc,xc,Ca,wc,kc,Sc,Tc,Jr,Yi,Ec,Rc,_c,za,Dc,Mc,Bc,Uc,jc,Kc,Yc,Zc,Jc,el,nl,rl,sl,cl,ul,dl,Hr,$i,fl,ml,gl,yl,bl,vl,xl,wl,Il,Cl,Rl,Al,Ol,Fl,Dl,Ll,Qi,Ka,Pl,Bl,Vl,ql,Xl,Ya,Zl,Ql,{kernelName:r.pPe,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:o,segmentIds:s}=t,{numSegments:i}=a,c=o.shape.length,l=[];let u=0;const h=r.backend_util.getAxesPermutation([u],c);let d=o;null!=h&&(d=qa({inputs:{x:o},backend:n,attrs:{perm:h}}),l.push(d),u=r.backend_util.getInnerMostAxes(1,c)[0]);const p=r.backend_util.segment_util.computeOutShape(d.shape,u,i),f=r.ZSL.sizeFromShape([d.shape[u]]),m=Pa({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(m);const g=(0,r.chL)(o.dtype),y=(e,t,a,o,s)=>{const i=e.shape[0],c=e.shape[1],u=r.backend_util.segment_util.segOpComputeOptimalWindowSize(c,s),h=new Jl({windowSize:u,inSize:c,batchSize:i,numSegments:s},t),d=n.compileAndRun(h,[e,a],o);if(l.push(d),d.shape[1]===s)return d;const p=Ic({backend:n,attrs:{start:0,stop:s,step:1,dtype:"float32"}}),f=Ul({inputs:{x:p},backend:n,attrs:{reps:[c/u]}});l.push(p),l.push(f);return y(d,t,f,o,s)},b=Pa({inputs:{x:y(m,"unsortedSegmentSum",s,g,i)},backend:n,attrs:{shape:p}});let v=b;if(null!=h){l.push(b);const e=r.backend_util.getUndoAxesPermutation(h);v=qa({inputs:{x:v},backend:n,attrs:{perm:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}},dc];for(const eu of $l)(0,r.tAK)(eu)},1585:(e,t,n)=>{"use strict";n.d(t,{ox:()=>Ve});var a={};n.r(a),n.d(a,{json:()=>L});var r={};n.r(r),n.d(r,{json:()=>M});var o={};n.r(o),n.d(o,{json:()=>P});var s={};n.r(s),n.d(s,{json:()=>z});var i={};n.r(i),n.d(i,{json:()=>B});var c={};n.r(c),n.d(c,{json:()=>W});var l={};n.r(l),n.d(l,{json:()=>U});var u={};n.r(u),n.d(u,{json:()=>V});var h={};n.r(h),n.d(h,{json:()=>G});var d={};n.r(d),n.d(d,{json:()=>j});var p={};n.r(p),n.d(p,{json:()=>H});var f={};n.r(f),n.d(f,{json:()=>K});var m={};n.r(m),n.d(m,{json:()=>q});var g={};n.r(g),n.d(g,{json:()=>Y});var y={};n.r(y),n.d(y,{json:()=>X});var b={};n.r(b),n.d(b,{json:()=>Z});var v={};n.r(v),n.d(v,{json:()=>Q});var x={};n.r(x),n.d(x,{json:()=>J});var w={};n.r(w),n.d(w,{json:()=>$});var k={};n.r(k),n.d(k,{OP_SCOPE_SUFFIX:()=>ge.BTT,abs:()=>ge.tnl,acos:()=>ge.HQu,acosh:()=>ge.FqL,add:()=>ge.WQq,addN:()=>ge.QiD,all:()=>ge.Q7R,any:()=>ge.bzn,argMax:()=>ge.FLi,argMin:()=>ge.XRg,asin:()=>ge.qRo,asinh:()=>ge.yHs,atan:()=>ge.rYl,atan2:()=>ge.FPz,atanh:()=>ge.rfv,avgPool:()=>ge.$jT,avgPool3d:()=>ge.sub,basicLSTMCell:()=>ge.lZX,batchNorm:()=>ge.$v7,batchNorm2d:()=>ge.BFc,batchNorm3d:()=>ge.kSi,batchNorm4d:()=>ge.T5N,batchToSpaceND:()=>ge.GTe,bincount:()=>ge.HbZ,booleanMaskAsync:()=>ge.ftb,broadcastArgs:()=>ge.ROE,broadcastTo:()=>ge.hOW,buffer:()=>ge.ra8,cast:()=>ge.wgE,ceil:()=>ge.mkO,clipByValue:()=>ge.zQh,clone:()=>ge.o8B,complex:()=>ge.faB,concat:()=>ge.xWs,concat1d:()=>ge.I1m,concat2d:()=>ge.RPU,concat3d:()=>ge.O5O,concat4d:()=>ge.P1l,conv1d:()=>ge.kA9,conv2d:()=>ge.Xtf,conv2dTranspose:()=>ge.wX9,conv3d:()=>ge.IPL,conv3dTranspose:()=>ge.jIJ,cos:()=>ge.gnS,cosh:()=>ge.yIG,cosineWindow:()=>ge._jP,cumprod:()=>ge.Lp0,cumsum:()=>ge.rCv,denseBincount:()=>ge.aOp,depthToSpace:()=>ge.Rj8,depthwiseConv2d:()=>ge.Gl3,diag:()=>ge.smy,dilation2d:()=>ge.X7t,div:()=>ge.y4m,divNoNan:()=>ge.ek5,dot:()=>ge.Omf,dropout:()=>ge.EZY,einsum:()=>ge._3C,elu:()=>ge.Pqc,enclosingPowerOfTwo:()=>ge.FJY,equal:()=>ge.LCg,erf:()=>ge.Y12,euclideanNorm:()=>ge.p4S,exp:()=>ge.oNF,expandDims:()=>ge.UG6,expm1:()=>ge.IYd,eye:()=>ge.y5U,fft:()=>ge.hVP,fill:()=>ge.GSj,floor:()=>ge.RIf,floorDiv:()=>ge.wh_,fused:()=>ge.cZk,gather:()=>ge.kgh,gatherND:()=>ge.SY9,greater:()=>ge.rhj,greaterEqual:()=>ge.DQN,ifft:()=>ge.KGM,imag:()=>ge.ngS,image:()=>ge.Slp,inTopKAsync:()=>ge.U4u,irfft:()=>ge.ggX,isFinite:()=>ge.MIs,isInf:()=>ge.EN4,isNaN:()=>ge.yrW,leakyRelu:()=>ge.H8d,less:()=>ge.M7h,lessEqual:()=>ge.InN,linalg:()=>ge.mPL,linspace:()=>ge.mT8,localResponseNormalization:()=>ge.Kgs,log:()=>ge.Rm2,log1p:()=>ge.Kko,logSigmoid:()=>ge.nqI,logSoftmax:()=>ge.HPB,logSumExp:()=>ge.VZ,logicalAnd:()=>ge.n76,logicalNot:()=>ge.NSZ,logicalOr:()=>ge.ztW,logicalXor:()=>ge.rxB,losses:()=>ge.YYh,lowerBound:()=>ge.yzS,matMul:()=>ge.NoW,max:()=>ge.T9B,maxPool:()=>ge.jgi,maxPool3d:()=>ge.NYV,maxPoolWithArgmax:()=>ge.RO,maximum:()=>ge.PhQ,mean:()=>ge.i2o,meshgrid:()=>ge.OYQ,min:()=>ge.jkA,minimum:()=>ge.BpO,mirrorPad:()=>ge.FFZ,mod:()=>ge.ziu,moments:()=>ge.Clk,movingAverage:()=>ge.CRk,mul:()=>ge.lKK,multiRNNCell:()=>ge.YDF,multinomial:()=>ge.OjQ,neg:()=>ge.HZy,norm:()=>ge.xbf,notEqual:()=>ge.Ec,oneHot:()=>ge.Mw0,ones:()=>ge.SaS,onesLike:()=>ge.P61,op:()=>ge.op,outerProduct:()=>ge.X4o,pad:()=>ge.eVF,pad1d:()=>ge.BZs,pad2d:()=>ge.grY,pad3d:()=>ge.XHu,pad4d:()=>ge.WLX,pool:()=>ge.dzn,pow:()=>ge.n7C,prelu:()=>ge.NsG,print:()=>ge.yyV,prod:()=>ge._eU,raggedGather:()=>ge.whe,raggedTensorToTensor:()=>ge.Q0_,rand:()=>ge._9M,randomGamma:()=>ge.pR9,randomNormal:()=>ge.FE$,randomStandardNormal:()=>ge.m0H,randomUniform:()=>ge.YeY,range:()=>ge.y17,real:()=>ge.xav,reciprocal:()=>ge.VOZ,relu:()=>ge.VVh,relu6:()=>ge.j__,reshape:()=>ge.tQQ,reverse:()=>ge.BEg,reverse1d:()=>ge.QD2,reverse2d:()=>ge.LMr,reverse3d:()=>ge.I2l,reverse4d:()=>ge.JYU,rfft:()=>ge.z8$,round:()=>ge.LIG,rsqrt:()=>ge.Z$r,scalar:()=>ge.d_2,scatterND:()=>ge.NFr,searchSorted:()=>ge.sZg,selu:()=>ge.WfX,separableConv2d:()=>ge.wdz,setdiff1dAsync:()=>ge.F12,sigmoid:()=>ge.ry7,sign:()=>ge._SZ,signal:()=>ge.vPA,sin:()=>ge.F8e,sinh:()=>ge.L0l,slice:()=>ge.dik,slice1d:()=>ge.Q$M,slice2d:()=>ge.zAd,slice3d:()=>ge.wck,slice4d:()=>ge.R0O,softmax:()=>ge.Vs9,softplus:()=>ge.lw0,spaceToBatchND:()=>ge.eDJ,sparse:()=>ge.lMo,sparseToDense:()=>ge.Zhr,spectral:()=>ge.lOn,split:()=>ge.lDo,sqrt:()=>ge.RZD,square:()=>ge.EwI,squaredDifference:()=>ge.Pbu,squeeze:()=>ge.r2V,stack:()=>ge.t$z,step:()=>ge.PMw,stridedSlice:()=>ge.Ym9,string:()=>ge.YjP,sub:()=>ge.jbE,sum:()=>ge.czq,tan:()=>ge.Mlm,tanh:()=>ge.ymU,tensor:()=>ge.OEK,tensor1d:()=>ge.tGX,tensor2d:()=>ge.KtR,tensor3d:()=>ge.$_$,tensor4d:()=>ge.g9W,tensor5d:()=>ge.Lpo,tensor6d:()=>ge.yxw,tile:()=>ge.Vsq,topk:()=>ge.rfw,transpose:()=>ge.mgz,truncatedNormal:()=>ge.efE,unique:()=>ge.AmM,unsortedSegmentSum:()=>ge.zAU,unstack:()=>ge.K$i,upperBound:()=>ge.rni,variable:()=>ge.bvq,where:()=>ge._M9,whereAsync:()=>ge.YJN,zeros:()=>ge.Ul9,zerosLike:()=>ge.POl});var S=n(1012);var I,T;(0,S._K2)().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(I||(I={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(T||(T={}));const C={};function E(e){return C[e]}function N(e,t,n,a,r){const o=t.inputParams[e];if(o&&void 0!==o.inputIndexStart){const e=o.inputIndexStart,s=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?e+1:o.inputIndexEnd;if("tensor"===o.type)return R(t.inputNames[o.inputIndexStart],n,a,r);if("tensors"===o.type){return t.inputNames.slice(e,s).map((e=>R(e,n,a,r)))}const i=R(t.inputNames.slice(e)[0],n,a,r),c=i.dataSync();return"number"===o.type?c[0]:S.ZSL.toNestedArray(i.shape,c)}const s=t.attrParams[e];return s&&s.value}function R(e,t,n,a){const[r,o]=O(e);if(null!=a){const e=a.getHashTableHandleByName(r);if(null!=e)return e}const s=n.currentContextIds.find((e=>!!t[_(r,e)]));return void 0!==s?t[_(r,s)][o]:void 0}function A(e,t){const[n,a,r]=O(e);return[_(n,t&&t.currentContextId),a,r]}function _(e,t){return t?"".concat(e,"-").concat(t):e}function O(e){const t=e.split(":");if(1===t.length)return[e,0,void 0];const n=t[0],a=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),a]}function F(e,t,n){let a=N("pad",e,t,n);if("explicit"===a){a=N("explicitPaddings",e,t,n);const r=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)r[e][0]=a[2*e],r[e][1]=a[2*e+1];return r}return a}function D(e){return e.kept?e:(0,S.o8B)(e)}const L=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],M=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],P=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],z=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],B=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],W=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],U=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],V=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],G=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],j=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],H=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],K=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],q=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],Y=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],X=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],Z=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Q=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],J=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],$=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class ee{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[a,r,o,s,i,c,l,u,h,d,p,f,m,g,y,b,v,x,w].map((e=>e.json)));this.opMappers=e.reduce(((e,t)=>(e[t.tfOpName]=t,e)),{})}transformGraph(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.node,a=[],r=[],o=[],s=n.reduce(((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?a.push(e[t.name]):"Const"===t.op?r.push(e[t.name]):null!=t.input&&0!==t.input.length||o.push(e[t.name]),e)),{});let i=[];const c=[];let l={},u={};null!=t&&(l=this.mapSignatureEntries(t.inputs),u=this.mapSignatureEntries(t.outputs));const h=Object.keys(s);h.forEach((e=>{const t=s[e];t.inputNames.forEach(((e,n)=>{const[a,,r]=A(e),o=s[a];if(null!=o.outputs){const e=o.outputs.indexOf(r);if(-1!==e){const r="".concat(a,":").concat(e);t.inputNames[n]=r}}t.inputs.push(o),o.children.push(t)}))})),0===Object.keys(u).length?h.forEach((e=>{const t=s[e];0===t.children.length&&c.push(t)})):Object.keys(u).forEach((e=>{const[t]=A(e),n=s[t];null!=n&&(n.signatureKey=u[e],c.push(n))})),Object.keys(l).length>0?Object.keys(l).forEach((e=>{const[t]=A(e),n=s[t];n&&(n.signatureKey=l[e],i.push(n))})):i=a;let d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce(((e,t)=>(e[t.signature.name]=this.mapFunction(t),e)),{}));const p={nodes:s,inputs:i,outputs:c,weights:r,placeholders:a,signature:t,functions:d};return o.length>0&&(p.initNodes=o),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce(((t,n)=>(t[e[n].name]=n,t)),{})}mapNode(e){const t=E(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((e=>e.startsWith("^")?e.slice(1):e)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce(((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e)),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce(((t,n)=>{const a=n.type;let r;switch(n.type){case"string":r=ne(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=ne(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":r=de(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=de(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":r=re(e.attr,n.tfName,n.defaultValue||0),void 0===r&&n.tfDeprecatedName&&(r=re(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":r=he(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=he(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":r=ae(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=ae(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":r=fe(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=fe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":r=ue(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=ue(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":r=pe(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=pe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":r=ie(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=ie(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":r=ce(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=ce(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":r=se(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=se(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:r,type:a},t}),{})),n}mapFunction(e){const t=e.nodeDef,n=[];let a={};null!=t&&(a=t.reduce(((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e)),{}));const r=[],o=[];e.signature.inputArg.forEach((e=>{const[t]=A(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:oe(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,r.push(n),a[t]=n}));Object.keys(a).forEach((e=>{const t=a[e];t.inputNames.forEach(((e,n)=>{const[r,,o]=A(e),s=a[r];if(null!=s.outputs){const e=s.outputs.indexOf(o);if(-1!==e){const a="".concat(r,":").concat(e);t.inputNames[n]=a}}t.inputs.push(s),s.children.push(t)}))}));const s=e.ret;e.signature.outputArg.forEach((e=>{const[t,n]=A(s[e.name]),r=a[t];null!=r&&(r.defaultOutput=n,o.push(r))}));const i=this.mapArgsToSignature(e);return{nodes:a,inputs:r,outputs:o,weights:n,placeholders:[],signature:i}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce(((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e)),{}),outputs:e.signature.outputArg.reduce(((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t)),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function te(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=(0,S._K2)().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function ne(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e[t];return null!=r?te(r.s,a):n}function ae(e,t,n){const a=e[t];return a?a.b:n}function re(e,t,n){const a=e[t]||{},r=null!=a.i?a.i:null!=a.f?a.f:n;return"number"===typeof r?r:parseInt(r,10)}function oe(e){switch("string"===typeof e&&(e=I[e]),e){case I.DT_FLOAT:case I.DT_HALF:return"float32";case I.DT_INT32:case I.DT_INT64:case I.DT_INT8:case I.DT_UINT8:return"int32";case I.DT_BOOL:return"bool";case I.DT_DOUBLE:return"float32";case I.DT_STRING:return"string";default:return null}}function se(e,t,n){const a=e[t];return a&&a.func?a.func.name:n}function ie(e,t,n){const a=e[t];return a&&a.type?oe(a.type):n}function ce(e,t,n){const a=e[t];return a&&a.list&&a.list.type?a.list.type.map((e=>oe(e))):n}function le(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((e=>"number"===typeof e.size?e.size:parseInt(e.size,10))):[]}function ue(e,t,n){const a=e[t];return a&&a.shape?le(a.shape):n}function he(e,t,n){const a=e[t];return a?((a.list.f&&a.list.f.length?a.list.f:a.list.i)||[]).map((e=>"number"===typeof e?e:parseInt(e,10))):n}function de(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e[t];return r&&r.list&&r.list.s?r.list.s.map((e=>te(e,a))):n}function pe(e,t,n){const a=e[t];return a&&a.list&&a.list.shape?a.list.shape.map((e=>le(e))):n}function fe(e,t,n){const a=e[t];return a&&a.list&&a.list.b?a.list.b:n}class me{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((e=>this.getInput(e))),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce(((e,t)=>(e[t]=this.getAttr(t),e)),{}))}getInput(e){return R(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return R(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return re(this.node.rawAttrs,e,t);if(null!=n.s)return ne(this.node.rawAttrs,e,t);if(null!=n.b)return ae(this.node.rawAttrs,e,t);if(null!=n.shape)return ue(this.node.rawAttrs,e,t);if(null!=n.type)return ie(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return he(this.node.rawAttrs,e,t);if(null!=n.list.s)return de(this.node.rawAttrs,e,t);if(null!=n.list.shape)return pe(this.node.rawAttrs,e,t);if(null!=n.list.b)return fe(this.node.rawAttrs,e,t);if(null!=n.list.type)return ce(this.node.rawAttrs,e,t)}return t}}var ge=n(9650);function ye(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){S.ZSL.assert(e.length===t.length,(()=>n+" Shapes ".concat(e," and ").concat(t," must match")));for(let a=0;a<e.length;a++){const r=e[a],o=t[a];S.ZSL.assert(r<0||o<0||r===o,(()=>n+" Shapes ".concat(e," and ").concat(t," must match")))}}}function be(e){return"number"!==typeof e&&!e.some((e=>e<0))}function ve(e,t,n){let a=xe(e,n);const r=!be(a);if(r&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(a));if(r&&t.forEach((e=>{a=xe(e.shape,a)})),!be(a))throw new Error("Non-fully-defined elementShape: ".concat(a));return a}function xe(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));const n=[];for(let a=0;a<e.length;++a){const r=e[a],o=t[a];if(r>=0&&o>=0&&r!==o)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[a]=r>=0?r:o}return n}class we{constructor(e,t,n,a,r,o,s){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=a,this.identicalElementShapes=r,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=(0,S.d_2)(0),(0,S.aCs)(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));const t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map((e=>this.read(e)))}write(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),ye(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,(0,S.aCs)(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach(((e,n)=>this.write(e,t[n])))}gather(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return(0,S.OEK)([],[0].concat(this.elementShape));const n=this.readMany(e);return ye(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),(0,S.t$z)(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return(0,S.OEK)([],[0].concat(this.elementShape));const t=[];for(let a=0;a<this.size();a++)t.push(a);const n=this.readMany(t);return ye(this.elementShape,n[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(n[0].shape,")")),(0,S.xWs)(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,(0,S.K$i)(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));let n=0;const a=e.map((e=>(n+=e,n)));if(n!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(n,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");const r=0===n?0:t.size/n,o=[];(0,S.DZQ)((()=>{t=(0,S.tQQ)(t,[1,n,r]);for(let n=0;n<e.length;++n){const s=[0,0===n?0:a[n-1],0],i=[1,e[n],r];o[n]=(0,S.tQQ)((0,S.dik)(t,s,i),this.elementShape)}return o}));const s=[];for(let i=0;i<e.length;i++)s[i]=i;this.writeMany(s,o)}}class ke{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach((e=>{if(n!==e.dtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(e.dtype));ye(t,e.shape,"TensorList shape mismatch: "),(0,S.aCs)(e)})),this.idTensor=(0,S.d_2)(0),this.maxNumElements=a,(0,S.aCs)(this.idTensor)}get id(){return this.idTensor.id}copy(){return new ke([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==n&&this.tensors.length!==n)throw new Error("Operation expected a list with ".concat(n," elements but got a list with ").concat(this.tensors.length," elements."));ye(e,this.elementShape,"TensorList shape mismatch: ");const a=ve(this.elementShape,this.tensors,e);return(0,S.DZQ)((()=>{const e=this.tensors.map((e=>(0,S.tQQ)(e,a)));return(0,S.t$z)(e,0)}))}popBack(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=ve(this.elementShape,this.tensors,e),a=this.tensors.pop();return a.kept=!1,ye(a.shape,e,"TensorList shape mismatch: "),(0,S.tQQ)(a,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(ye(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");(0,S.aCs)(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));const t=new ke([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));ye(this.tensors[e].shape,t,"TensorList shape mismatch: ");const a=ve(this.elementShape,this.tensors,t);return(0,S.tQQ)(this.tensors[e],a)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));ye(this.elementShape,t.shape,"TensorList shape mismatch: "),(0,S.aCs)(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));ye(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const a=ve(this.elementShape,this.tensors,n);return 0===e.length?(0,S.OEK)([],[0].concat(a)):(0,S.DZQ)((()=>{const t=e.map((e=>(0,S.tQQ)(this.tensors[e],a)));return(0,S.t$z)(t,0)}))}concat(e,t){if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));ye(this.elementShape,t,"TensorList shape mismatch: ");const n=ve(this.elementShape,this.tensors,t);return 0===this.size()?(0,S.OEK)([],[0].concat(n)):(0,S.DZQ)((()=>{const e=this.tensors.map((e=>(0,S.tQQ)(e,n)));return(0,S.xWs)(e,0)}))}}const Se=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const a=N("thenBranch",e,t,n),r=N("elseBranch",e,t,n),o=N("cond",e,t,n),s=N("args",e,t,n);return(await o.data())[0]?n.functionMap[a].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const a=N("body",e,t,n),r=N("cond",e,t,n),o=N("args",e,t,n),s=await n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap),i=o.map((e=>e.id));let c=await s[0].data();s.forEach((e=>{e.kept||-1!==i.indexOf(e.id)||e.dispose()}));let l=o;for(;c[0];){const e=l;l=await n.functionMap[a].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);const t=l.map((e=>e.id));e.forEach((e=>{e.kept||-1!==i.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}));const o=await n.functionMap[r].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);c=await o[0].data(),o.forEach((e=>{e.kept||-1!==i.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}))}return l}case"LoopCond":return[D(N("pred",e,t,n))];case"Switch":{const a=N("pred",e,t,n);let r=N("data",e,t,n);return r.kept||(r=D(r)),(await a.data())[0]?[void 0,r]:[r,void 0]}case"Merge":{const a=e.inputNames.find((e=>void 0!==R(e,t,n)));if(a){return[D(R(a,t,n))]}return}case"Enter":{const a=N("frameName",e,t,n),r=N("tensor",e,t,n);return n.enterFrame(a),[D(r)]}case"Exit":{const a=N("tensor",e,t,n);return n.exitFrame(),[D(a)]}case"NextIteration":{const a=N("tensor",e,t,n);return n.nextIteration(),[D(a)]}case"TensorArrayV3":{const a=N("size",e,t,n),r=N("dtype",e,t,n),o=N("elementShape",e,t,n),s=N("dynamicSize",e,t,n),i=N("clearAfterRead",e,t,n),c=N("identicalElementShapes",e,t,n),l=N("name",e,t,n),u=new we(l,r,a,o,c,s,i);return n.addTensorArray(u),[u.idTensor,(0,S.d_2)(1)]}case"TensorArrayWriteV3":{const a=N("tensorArrayId",e,t,n),r=N("index",e,t,n),o=N("tensor",e,t,n),s=n.getTensorArray(a.id);return s.write(r,o),[s.idTensor]}case"TensorArrayReadV3":{const a=N("tensorArrayId",e,t,n),r=N("index",e,t,n);return[n.getTensorArray(a.id).read(r)]}case"TensorArrayGatherV3":{const a=N("tensorArrayId",e,t,n),r=N("indices",e,t,n),o=N("dtype",e,t,n);return[n.getTensorArray(a.id).gather(r,o)]}case"TensorArrayScatterV3":{const a=N("tensorArrayId",e,t,n),r=N("indices",e,t,n),o=N("tensor",e,t,n),s=n.getTensorArray(a.id);return s.scatter(r,o),[s.idTensor]}case"TensorArrayConcatV3":{const a=N("tensorArrayId",e,t,n),r=n.getTensorArray(a.id),o=N("dtype",e,t,n);return[r.concat(o)]}case"TensorArraySplitV3":{const a=N("tensorArrayId",e,t,n),r=N("tensor",e,t,n),o=N("lengths",e,t,n),s=n.getTensorArray(a.id);return s.split(o,r),[s.idTensor]}case"TensorArraySizeV3":{const a=N("tensorArrayId",e,t,n),r=n.getTensorArray(a.id);return[(0,S.d_2)(r.size(),"int32")]}case"TensorArrayCloseV3":{const a=N("tensorArrayId",e,t,n),r=n.getTensorArray(a.id);return r.clearAndClose(),[r.idTensor]}case"TensorListSetItem":{const a=N("tensorListId",e,t,n),r=N("index",e,t,n),o=N("tensor",e,t,n),s=n.getTensorList(a.id);return s.setItem(r,o),[s.idTensor]}case"TensorListGetItem":{const a=N("tensorListId",e,t,n),r=N("index",e,t,n),o=N("elementShape",e,t,n),s=N("elementDType",e,t,n);return[n.getTensorList(a.id).getItem(r,o,s)]}case"TensorListScatterV2":case"TensorListScatter":{const a=N("indices",e,t,n),r=function(e,t,n,a){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));const r=Math.max(...t);if(null!=a&&-1!==a&&r>=a)throw new Error("Max index must be < array size (".concat(r,"  vs. ").concat(a,")"));const o=new ke([],n,e.dtype,a),s=(0,S.K$i)(e,0);return t.forEach(((e,t)=>{o.setItem(e,s[t])})),o}(N("tensor",e,t,n),a,N("elementShape",e,t,n),N("numElements",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const a=N("elementShape",e,t,n),r=N("elementDType",e,t,n);let o;o="TensorListReserve"===e.op?"numElements":"maxNumElements";const s=N(o,e,t,n),i=function(e,t,n,a){return new ke([],e,t,a)}(a,r,0,"TensorListReserve"===e.op?-1:s);return n.addTensorList(i),[i.idTensor]}case"TensorListGather":{const a=N("tensorListId",e,t,n),r=N("indices",e,t,n),o=N("elementShape",e,t,n),s=N("elementDType",e,t,n);return[n.getTensorList(a.id).gather(r,s,o)]}case"TensorListStack":{const a=N("tensorListId",e,t,n),r=N("elementShape",e,t,n),o=N("elementDType",e,t,n),s=N("numElements",e,t,n);return[n.getTensorList(a.id).stack(r,o,s)]}case"TensorListFromTensor":{const a=function(e,t,n){const a=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));ye(e.shape.slice(1),t,"TensorList shape mismatch: ");const r=(0,S.K$i)(e);return new ke(r,t,a)}(N("tensor",e,t,n),N("elementShape",e,t,n),N("elementDType",e,t,n));return n.addTensorList(a),[a.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const a=N("tensorListId",e,t,n),r=n.getTensorList(a.id),o=N("dtype",e,t,n),s=N("elementShape",e,t,n);return[r.concat(o,s)]}case"TensorListPushBack":{const a=N("tensorListId",e,t,n),r=N("tensor",e,t,n),o=n.getTensorList(a.id);return o.pushBack(r),[o.idTensor]}case"TensorListPopBack":{const a=N("tensorListId",e,t,n),r=N("elementShape",e,t,n),o=N("elementDType",e,t,n);return[n.getTensorList(a.id).popBack(r,o)]}case"TensorListSplit":{const a=N("tensor",e,t,n),r=N("elementShape",e,t,n),o=function(e,t,n){let a=0;const r=t.map((e=>(a+=e,a)));if(a!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(a,", and tensor's shape is: ").concat(e.shape));const o=xe(e.shape.slice(1),n),s=0===a?0:e.size/a,i=(0,S.DZQ)((()=>{const n=[];e=(0,S.tQQ)(e,[1,a,s]);for(let a=0;a<t.length;++a){const i=[0,0===a?0:r[a-1],0],c=[1,t[a],s];n[a]=(0,S.tQQ)((0,S.dik)(e,i,c),o)}return e.dispose(),n})),c=new ke([],n,e.dtype,t.length);for(let l=0;l<i.length;l++)c.setItem(l,i[l]);return c}(a,N("lengths",e,t,n),r);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const a=N("tensorListId",e,t,n),r=n.getTensorList(a.id);return[(0,S.d_2)(r.size(),"int32")]}case"TensorListResize":{const a=N("tensorListId",e,t,n),r=N("size",e,t,n),o=n.getTensorList(a.id).resize(r);return n.addTensorList(o),[o.idTensor]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function Ie(e,t,n){const[a,r]=N("fusedOps",e,t,n),o="biasadd"===a,s=!o,i="prelu"===r,c="fusedbatchnorm"===a,l=N("numArgs",e,t,n);if(o){if(i&&2!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&o&&1!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=N("strides",e,t,n),h=F(e,t,n),d=N("dataFormat",e,t,n).toUpperCase(),p=N("dilations",e,t,n);let[f,m]=N("args",e,t,n);s&&(m=f,f=void 0);return{stride:u,pad:h,dataFormat:d,dilations:p,biasArg:f,preluArg:m,activationFunc:r,leakyreluAlpha:N("leakyreluAlpha",e,t,n)}}function Te(e,t,n){return{boxes:N("boxes",e,t,n),scores:N("scores",e,t,n),maxOutputSize:N("maxOutputSize",e,t,n),iouThreshold:N("iouThreshold",e,t,n),scoreThreshold:N("scoreThreshold",e,t,n),softNmsSigma:N("softNmsSigma",e,t,n)}}var Ce=n(1997);class Ee{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=(0,S.d_2)(0),this.tensorMap=new Map,(0,S.aCs)(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ce.d(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),(0,S.DZQ)((()=>{const e=(0,S.K$i)(t),a=n.length,r=e.length;S.ZSL.assert(a===r,(()=>"The number of elements doesn't match, keys has "+"".concat(a," elements, the values has ").concat(r," ")+"elements."));for(let t=0;t<a;t++){const a=n[t],r=e[t];(0,S.aCs)(r),this.tensorMap.set(a,r)}return this.handle}))}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return(0,S.DZQ)((()=>{const e=[];for(let a=0;a<n.length;a++){const r=n[a],o=this.findWithDefault(r,t);e.push(o)}return(0,S.t$z)(e)}))}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}function Ne(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:S.DZQ;const o=((e,t,n)=>{switch(e.category){case"arithmetic":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[a.add(N("a",e,t,n),N("b",e,t,n))];case"AddN":return[a.addN(N("tensors",e,t,n))];case"FloorMod":case"Mod":return[a.mod(N("a",e,t,n),N("b",e,t,n))];case"Mul":return[a.mul(N("a",e,t,n),N("b",e,t,n))];case"RealDiv":case"Div":return[a.div(N("a",e,t,n),N("b",e,t,n))];case"DivNoNan":return[a.divNoNan(N("a",e,t,n),N("b",e,t,n))];case"FloorDiv":return[a.floorDiv(N("a",e,t,n),N("b",e,t,n))];case"Sub":return[a.sub(N("a",e,t,n),N("b",e,t,n))];case"Minimum":return[a.minimum(N("a",e,t,n),N("b",e,t,n))];case"Maximum":return[a.maximum(N("a",e,t,n),N("b",e,t,n))];case"Pow":return[a.pow(N("a",e,t,n),N("b",e,t,n))];case"SquaredDifference":return[a.squaredDifference(N("a",e,t,n),N("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"basic_math":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Abs":case"ComplexAbs":return[a.abs(N("x",e,t,n))];case"Acos":return[a.acos(N("x",e,t,n))];case"Acosh":return[a.acosh(N("x",e,t,n))];case"Asin":return[a.asin(N("x",e,t,n))];case"Asinh":return[a.asinh(N("x",e,t,n))];case"Atan":return[a.atan(N("x",e,t,n))];case"Atan2":return[a.atan2(N("x",e,t,n),N("y",e,t,n))];case"Atanh":return[a.atanh(N("x",e,t,n))];case"Ceil":return[a.ceil(N("x",e,t,n))];case"Complex":return[a.complex(N("real",e,t,n),N("imag",e,t,n))];case"Cos":return[a.cos(N("x",e,t,n))];case"Cosh":return[a.cosh(N("x",e,t,n))];case"Elu":return[a.elu(N("x",e,t,n))];case"Erf":return[a.erf(N("x",e,t,n))];case"Exp":return[a.exp(N("x",e,t,n))];case"Expm1":return[a.expm1(N("x",e,t,n))];case"Floor":return[a.floor(N("x",e,t,n))];case"Log":return[a.log(N("x",e,t,n))];case"Log1p":return[a.log1p(N("x",e,t,n))];case"Imag":return[a.imag(N("x",e,t,n))];case"Neg":return[a.neg(N("x",e,t,n))];case"Reciprocal":return[a.reciprocal(N("x",e,t,n))];case"Real":return[a.real(N("x",e,t,n))];case"Relu":return[a.relu(N("x",e,t,n))];case"Round":return[a.round(N("x",e,t,n))];case"Selu":return[a.selu(N("x",e,t,n))];case"Sigmoid":return[a.sigmoid(N("x",e,t,n))];case"Sin":return[a.sin(N("x",e,t,n))];case"Sign":return[a.sign(N("x",e,t,n))];case"Sinh":return[a.sinh(N("x",e,t,n))];case"Softplus":return[a.softplus(N("x",e,t,n))];case"Sqrt":return[a.sqrt(N("x",e,t,n))];case"Square":return[a.square(N("x",e,t,n))];case"Tanh":return[a.tanh(N("x",e,t,n))];case"Tan":return[a.tan(N("x",e,t,n))];case"ClipByValue":return[a.clipByValue(N("x",e,t,n),N("clipValueMin",e,t,n),N("clipValueMax",e,t,n))];case"Relu6":return[a.relu6(N("x",e,t,n))];case"Rsqrt":return[a.rsqrt(R(e.inputNames[0],t,n))];case"Prod":return[a.prod(N("x",e,t,n),N("axes",e,t,n))];case"LeakyRelu":return[a.leakyRelu(N("x",e,t,n),N("alpha",e,t,n))];case"Prelu":return[a.prelu(N("x",e,t,n),N("alpha",e,t,n))];case"IsNan":return[a.isNaN(R(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"control":return Se(e,t,n);case"convolution":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Conv1D":{const r=N("stride",e,t,n),o=N("pad",e,t,n),s=N("dataFormat",e,t,n).toUpperCase(),i=N("dilation",e,t,n);return[a.conv1d(N("x",e,t,n),N("filter",e,t,n),r,o,s,i)]}case"Conv2D":{const r=N("strides",e,t,n),o=F(e,t,n),s=N("dataFormat",e,t,n).toUpperCase(),i=N("dilations",e,t,n);return[a.conv2d(N("x",e,t,n),N("filter",e,t,n),[r[1],r[2]],o,s,[i[1],i[2]])]}case"_FusedConv2D":{const{stride:r,pad:o,dataFormat:s,dilations:i,biasArg:c,preluArg:l,activationFunc:u,leakyreluAlpha:h}=Ie(e,t,n);return[a.fused.conv2d({x:N("x",e,t,n),filter:N("filter",e,t,n),strides:[r[1],r[2]],pad:o,dataFormat:s,dilations:[i[1],i[2]],bias:c,activation:u,preluActivationWeights:l,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:o,dataFormat:s,dilations:i,biasArg:c,preluArg:l,activationFunc:u,leakyreluAlpha:h}=Ie(e,t,n);return[a.fused.depthwiseConv2d({x:N("x",e,t,n),filter:N("filter",e,t,n),strides:[r[1],r[2]],pad:o,dataFormat:s,dilations:[i[1],i[2]],bias:c,activation:u,preluActivationWeights:l,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=N("outputShape",e,t,n),o=N("strides",e,t,n),s=F(e,t,n);return[a.conv2dTranspose(N("x",e,t,n),N("filter",e,t,n),r,[o[1],o[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=N("strides",e,t,n),o=F(e,t,n),s=N("dilations",e,t,n),i=N("dataFormat",e,t,n).toUpperCase();return[a.depthwiseConv2d(N("input",e,t,n),N("filter",e,t,n),[r[1],r[2]],o,i,[s[1],s[2]])]}case"Conv3D":{const r=N("strides",e,t,n),o=N("pad",e,t,n),s=N("dataFormat",e,t,n).toUpperCase(),i=N("dilations",e,t,n);return[a.conv3d(N("x",e,t,n),N("filter",e,t,n),[r[1],r[2],r[3]],o,s,[i[1],i[2],i[3]])]}case"AvgPool":{const r=N("strides",e,t,n),o=N("pad",e,t,n),s=N("kernelSize",e,t,n);return[a.avgPool(N("x",e,t,n),[s[1],s[2]],[r[1],r[2]],o)]}case"MaxPool":{const r=N("strides",e,t,n),o=N("pad",e,t,n),s=N("kernelSize",e,t,n);return[a.maxPool(N("x",e,t,n),[s[1],s[2]],[r[1],r[2]],o)]}case"MaxPoolWithArgmax":{const r=N("strides",e,t,n),o=N("pad",e,t,n),s=N("kernelSize",e,t,n),i=N("includeBatchInIndex",e,t,n),{result:c,indexes:l}=a.maxPoolWithArgmax(N("x",e,t,n),[s[1],s[2]],[r[1],r[2]],o,i);return[c,l]}case"AvgPool3D":{const r=N("strides",e,t,n),o=N("pad",e,t,n),s=N("kernelSize",e,t,n);return[a.avgPool3d(N("x",e,t,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],o)]}case"MaxPool3D":{const r=N("strides",e,t,n),o=N("pad",e,t,n),s=N("kernelSize",e,t,n);return[a.maxPool3d(N("x",e,t,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],o)]}case"Dilation2D":{const r=N("strides",e,t,n),o=N("pad",e,t,n),s=N("dilations",e,t,n),i=r[1],c=r[2],l=s[1],u=s[2];return[a.dilation2d(N("x",e,t,n),N("filter",e,t,n),[i,c],o,[l,u],"NHWC")]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"creation":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Fill":{const r=N("shape",e,t,n),o=N("dtype",e,t,n),s=N("value",e,t,n);return[a.fill(r,s,o)]}case"LinSpace":{const r=N("start",e,t,n),o=N("stop",e,t,n),s=N("num",e,t,n);return[a.linspace(r,o,s)]}case"Multinomial":{const r=N("logits",e,t,n),o=N("numSamples",e,t,n),s=N("seed",e,t,n);return[a.multinomial(r,o,s)]}case"OneHot":{const r=N("indices",e,t,n),o=N("depth",e,t,n),s=N("onValue",e,t,n),i=N("offValue",e,t,n),c=N("dtype",e,t,n);return[a.oneHot(r,o,s,i,c)]}case"Ones":return[a.ones(N("shape",e,t,n),N("dtype",e,t,n))];case"OnesLike":return[a.onesLike(N("x",e,t,n))];case"RandomStandardNormal":return[a.randomStandardNormal(N("shape",e,t,n),N("dtype",e,t,n),N("seed",e,t,n))];case"RandomUniform":return[a.randomUniform(N("shape",e,t,n),N("minval",e,t,n),N("maxval",e,t,n),N("dtype",e,t,n))];case"Range":{const r=N("start",e,t,n),o=N("stop",e,t,n),s=N("step",e,t,n);return[a.range(r,o,s,N("dtype",e,t,n))]}case"TruncatedNormal":{const r=N("shape",e,t,n),o=N("mean",e,t,n),s=N("stdDev",e,t,n),i=N("seed",e,t,n);return[a.truncatedNormal(r,o,s,N("dtype",e,t,n),i)]}case"Zeros":return[a.zeros(N("shape",e,t,n),N("dtype",e,t,n))];case"ZerosLike":return[a.zerosLike(N("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"dynamic":return async function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:k;switch(e.op){case"NonMaxSuppressionV5":{const{boxes:a,scores:o,maxOutputSize:s,iouThreshold:i,scoreThreshold:c,softNmsSigma:l}=Te(e,t,n),u=await r.image.nonMaxSuppressionWithScoreAsync(a,o,s,i,c,l);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:a,scores:o,maxOutputSize:s,iouThreshold:i,scoreThreshold:c}=Te(e,t,n),l=N("padToMaxOutputSize",e,t,n),u=await r.image.nonMaxSuppressionPaddedAsync(a,o,s,i,c,l);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:a,scores:o,maxOutputSize:s,iouThreshold:i,scoreThreshold:c}=Te(e,t,n);return[await r.image.nonMaxSuppressionAsync(a,o,s,i,c)]}case"Where":{const a=r.cast(N("condition",e,t,n),"bool"),o=[await r.whereAsync(a)];return a.dispose(),o}case"ListDiff":return r.setdiff1dAsync(N("x",e,t,n),N("y",e,t,n));default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n);case"evaluation":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"LowerBound":{const r=N("sortedSequence",e,t,n),o=N("values",e,t,n);return[a.lowerBound(r,o)]}case"TopKV2":{const r=N("x",e,t,n),o=N("k",e,t,n),s=N("sorted",e,t,n),i=a.topk(r,o,s);return[i.values,i.indices]}case"UpperBound":{const r=N("sortedSequence",e,t,n),o=N("values",e,t,n);return[a.upperBound(r,o)]}case"Unique":{const r=N("x",e,t,n),o=a.unique(r);return[o.values,o.indices]}case"UniqueV2":{const r=N("x",e,t,n),o=N("axis",e,t,n),s=a.unique(r,o);return[s.values,s.indices]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"image":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"ResizeBilinear":{const r=N("images",e,t,n),o=N("size",e,t,n),s=N("alignCorners",e,t,n),i=N("halfPixelCenters",e,t,n);return[a.image.resizeBilinear(r,[o[0],o[1]],s,i)]}case"ResizeNearestNeighbor":{const r=N("images",e,t,n),o=N("size",e,t,n),s=N("alignCorners",e,t,n),i=N("halfPixelCenters",e,t,n);return[a.image.resizeNearestNeighbor(r,[o[0],o[1]],s,i)]}case"CropAndResize":{const r=N("image",e,t,n),o=N("boxes",e,t,n),s=N("boxInd",e,t,n),i=N("cropSize",e,t,n),c=N("method",e,t,n),l=N("extrapolationValue",e,t,n);return[a.image.cropAndResize(r,o,s,i,c,l)]}case"ImageProjectiveTransformV3":{const r=N("images",e,t,n),o=N("transforms",e,t,n),s=N("outputShape",e,t,n),i=N("fillValue",e,t,n),c=N("interpolation",e,t,n),l=N("fillMode",e,t,n);return[a.image.transform(r,o,c.toLowerCase(),l.toLowerCase(),i,s)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"graph":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const r=N("default",e,t,n);return[R(e.name,t,n)||r];case"Placeholder":return[R(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[D(N("x",e,t,n))];case"IdentityN":return N("x",e,t,n).map((e=>D(e)));case"Shape":return[a.tensor1d(N("x",e,t,n).shape,"int32")];case"ShapeN":return N("x",e,t,n).map((e=>a.tensor1d(e.shape)));case"Size":return[a.scalar(N("x",e,t,n).size,"int32")];case"Rank":return[a.scalar(N("x",e,t,n).rank,"int32")];case"NoOp":return[a.scalar(1)];case"Print":const o=N("x",e,t,n),s=N("data",e,t,n),i=N("message",e,t,n),c=N("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(i);for(let e=0;e<s.length;e++)console.log(Array.prototype.slice.call(s[e].dataSync()).slice(0,c));return[o];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"logical":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Equal":return[a.equal(N("a",e,t,n),N("b",e,t,n))];case"NotEqual":return[a.notEqual(N("a",e,t,n),N("b",e,t,n))];case"Greater":return[a.greater(N("a",e,t,n),N("b",e,t,n))];case"GreaterEqual":return[a.greaterEqual(N("a",e,t,n),N("b",e,t,n))];case"Less":return[a.less(N("a",e,t,n),N("b",e,t,n))];case"LessEqual":return[a.lessEqual(N("a",e,t,n),N("b",e,t,n))];case"LogicalAnd":return[a.logicalAnd(N("a",e,t,n),N("b",e,t,n))];case"LogicalNot":return[a.logicalNot(N("a",e,t,n))];case"LogicalOr":return[a.logicalOr(N("a",e,t,n),N("b",e,t,n))];case"Select":case"SelectV2":return[a.where(N("condition",e,t,n),N("a",e,t,n),N("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"matrices":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[a.matMul(N("a",e,t,n),N("b",e,t,n),N("transposeA",e,t,n),N("transposeB",e,t,n))];case"Einsum":return[a.einsum(N("equation",e,t,n),...N("tensors",e,t,n))];case"Transpose":return[a.transpose(N("x",e,t,n),N("perm",e,t,n))];case"_FusedMatMul":const[r,o]=N("fusedOps",e,t,n),s="biasadd"===r,i="prelu"===o,c=N("numArgs",e,t,n),l=N("leakyreluAlpha",e,t,n);if(s){if(i&&2!==c)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&1!==c)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,h]=N("args",e,t,n);return[a.fused.matMul({a:N("a",e,t,n),b:N("b",e,t,n),transposeA:N("transposeA",e,t,n),transposeB:N("transposeB",e,t,n),bias:u,activation:o,preluActivationWeights:h,leakyreluAlpha:l})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"normalization":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"EuclideanNorm":return[a.euclideanNorm(N("x",e,t,n),N("axis",e,t,n),N("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[a.batchNorm(N("x",e,t,n),N("mean",e,t,n),N("variance",e,t,n),N("offset",e,t,n),N("scale",e,t,n),N("epsilon",e,t,n))];case"LRN":return[a.localResponseNormalization(N("x",e,t,n),N("radius",e,t,n),N("bias",e,t,n),N("alpha",e,t,n),N("beta",e,t,n))];case"Softmax":return[a.softmax(N("x",e,t,n))];case"LogSoftmax":return[a.logSoftmax(N("x",e,t,n))];case"SparseToDense":return[a.sparseToDense(N("sparseIndices",e,t,n),N("outputShape",e,t,n),N("sparseValues",e,t,n),N("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"reduction":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Max":{const r=N("axis",e,t,n),o=N("keepDims",e,t,n);return[a.max(N("x",e,t,n),r,o)]}case"Mean":{const r=N("axis",e,t,n),o=N("keepDims",e,t,n);return[a.mean(N("x",e,t,n),r,o)]}case"Min":{const r=N("axis",e,t,n),o=N("keepDims",e,t,n);return[a.min(N("x",e,t,n),r,o)]}case"Sum":{const r=N("axis",e,t,n),o=N("keepDims",e,t,n);return[a.sum(N("x",e,t,n),r,o)]}case"All":{const r=N("axis",e,t,n),o=N("keepDims",e,t,n);return[a.all(N("x",e,t,n),r,o)]}case"Any":{const r=N("axis",e,t,n),o=N("keepDims",e,t,n);return[a.any(N("x",e,t,n),r,o)]}case"ArgMax":{const r=N("axis",e,t,n);return[a.argMax(N("x",e,t,n),r)]}case"ArgMin":{const r=N("axis",e,t,n);return[a.argMin(N("x",e,t,n),r)]}case"Prod":{const r=N("axis",e,t,n),o=N("keepDims",e,t,n);return[a.prod(N("x",e,t,n),r,o)]}case"Cumprod":{const r=N("axis",e,t,n),o=N("exclusive",e,t,n),s=N("reverse",e,t,n);return[a.cumprod(N("x",e,t,n),r,o,s)]}case"Cumsum":{const r=N("axis",e,t,n),o=N("exclusive",e,t,n),s=N("reverse",e,t,n);return[a.cumsum(N("x",e,t,n),r,o,s)]}case"Bincount":const r=N("x",e,t,n),o=N("weights",e,t,n),s=N("size",e,t,n);return[a.bincount(r,o,s)];case"DenseBincount":{const r=N("x",e,t,n),o=N("weights",e,t,n),s=N("size",e,t,n),i=N("binaryOutput",e,t,n);return[a.denseBincount(r,o,s,i)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"slice_join":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"ConcatV2":case"Concat":{const r=N("n",e,t,n),o=N("axis",e,t,n);let s=N("tensors",e,t,n);return s=s.slice(0,r),[a.concat(s,o)]}case"Gather":{const r=N("x",e,t,n),o=N("indices",e,t,n);return[a.gather(r,a.cast(o,"int32"),0)]}case"GatherV2":{const r=N("axis",e,t,n),o=N("batchDims",e,t,n),s=N("x",e,t,n),i=N("indices",e,t,n);return[a.gather(s,a.cast(i,"int32"),r,o)]}case"Reverse":{const r=N("dims",e,t,n),o=[];for(let e=0;e<r.length;e++)r[e]&&o.push(e);const s=N("x",e,t,n);return[a.reverse(s,o)]}case"ReverseV2":{const r=N("axis",e,t,n),o=N("x",e,t,n);return[a.reverse(o,r)]}case"Slice":{const r=N("begin",e,t,n),o=N("size",e,t,n);return[a.slice(N("x",e,t,n),r,o)]}case"StridedSlice":{const r=N("begin",e,t,n),o=N("end",e,t,n),s=N("strides",e,t,n),i=N("beginMask",e,t,n),c=N("endMask",e,t,n),l=N("ellipsisMask",e,t,n),u=N("newAxisMask",e,t,n),h=N("shrinkAxisMask",e,t,n),d=N("x",e,t,n);return[a.stridedSlice(d,r,o,s,i,c,l,u,h)]}case"Pack":return(0,S.DZQ)((()=>{const r=N("axis",e,t,n),o=N("tensors",e,t,n),s=o[0].shape,i=a.squeeze(o[0]).shape,c=o.map((e=>{const t=S.ZSL.arraysEqual(e.shape,s);if(!t&&!S.ZSL.arraysEqual(a.squeeze(e).shape,i))throw new Error("the input tensors shape does not match");return t?e:a.reshape(e,s)}));return[a.stack(c,r)]}));case"Unpack":{const r=N("axis",e,t,n),o=N("tensor",e,t,n);return a.unstack(o,r)}case"Tile":{const r=N("reps",e,t,n);return[a.tile(N("x",e,t,n),r)]}case"Split":case"SplitV":{const r=N("axis",e,t,n),o=N("numOrSizeSplits",e,t,n),s=N("x",e,t,n);return a.split(s,o,r)}case"ScatterNd":{const r=N("indices",e,t,n),o=N("values",e,t,n),s=N("shape",e,t,n);return[a.scatterND(r,o,s)]}case"GatherNd":{const r=N("x",e,t,n),o=N("indices",e,t,n);return[a.gatherND(r,o)]}case"SparseToDense":{const r=N("sparseIndices",e,t,n),o=N("outputShape",e,t,n),s=N("sparseValues",e,t,n),i=N("defaultValue",e,t,n);return[a.sparseToDense(r,s,o,s.dtype===i.dtype?i:a.cast(i,s.dtype))]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"sparse":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:r,outputValues:o,emptyRowIndicator:s,reverseIndexMap:i}=a.sparse.sparseFillEmptyRows(N("indices",e,t,n),N("values",e,t,n),N("denseShape",e,t,n),N("defaultValue",e,t,n));return[r,o,s,i]}case"SparseReshape":{const{outputIndices:r,outputShape:o}=a.sparse.sparseReshape(N("inputIndices",e,t,n),N("inputShape",e,t,n),N("newShape",e,t,n));return[r,o]}case"SparseSegmentMean":return[a.sparse.sparseSegmentMean(N("data",e,t,n),N("indices",e,t,n),N("segmentIds",e,t,n))];case"SparseSegmentSum":return[a.sparse.sparseSegmentSum(N("data",e,t,n),N("indices",e,t,n),N("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"spectral":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"FFT":return[a.fft(N("x",e,t,n))];case"IFFT":return[a.ifft(N("x",e,t,n))];case"RFFT":return[a.rfft(N("x",e,t,n))];case"IRFFT":return[a.irfft(N("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"string":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"StringNGrams":{const{nGrams:r,nGramsSplits:o}=a.string.stringNGrams(N("data",e,t,n),N("dataSplits",e,t,n),N("separator",e,t,n),N("nGramWidths",e,t,n),N("leftPad",e,t,n),N("rightPad",e,t,n),N("padWidth",e,t,n),N("preserveShortSequences",e,t,n));return[r,o]}case"StringSplit":{const{indices:r,values:o,shape:s}=a.string.stringSplit(N("input",e,t,n),N("delimiter",e,t,n),N("skipEmpty",e,t,n));return[r,o,s]}case"StringToHashBucketFast":return[a.string.stringToHashBucketFast(N("input",e,t,n),N("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"transformation":return r((()=>function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Cast":return[a.cast(N("x",e,t,n),N("dtype",e,t,n))];case"ExpandDims":{const r=N("axis",e,t,n);return[a.expandDims(N("x",e,t,n),r)]}case"Squeeze":{const r=N("axis",e,t,n);return[a.squeeze(N("x",e,t,n),r)]}case"Reshape":return[a.reshape(N("x",e,t,n),N("shape",e,t,n))];case"MirrorPad":return[a.mirrorPad(N("x",e,t,n),N("padding",e,t,n),N("mode",e,t,n))];case"PadV2":case"Pad":return[a.pad(N("x",e,t,n),N("padding",e,t,n),N("constantValue",e,t,n))];case"SpaceToBatchND":{const r=N("blockShape",e,t,n),o=N("paddings",e,t,n);return[a.spaceToBatchND(N("x",e,t,n),r,o)]}case"BatchToSpaceND":{const r=N("blockShape",e,t,n),o=N("crops",e,t,n);return[a.batchToSpaceND(N("x",e,t,n),r,o)]}case"DepthToSpace":{const r=N("blockSize",e,t,n),o=N("dataFormat",e,t,n).toUpperCase();return[a.depthToSpace(N("x",e,t,n),r,o)]}case"BroadcastTo":return[a.broadcastTo(N("x",e,t,n),N("shape",e,t,n))];case"BroadcastArgs":return[a.broadcastArgs(N("s0",e,t,n),N("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"hash_table":return(async(e,t,n,a)=>{switch(e.op){case"HashTable":case"HashTableV2":{const r=N("keyDType",e,t,n),o=N("valueDType",e,t,n),s=new Ee(r,o);return a.addHashTable(e.name,s),[s.handle]}case"LookupTableImport":case"LookupTableImportV2":{const r=N("tableHandle",e,t,n,a),o=N("keys",e,t,n),s=N("values",e,t,n),i=a.getHashTableById(r.id);return[await i.import(o,s)]}case"LookupTableFind":case"LookupTableFindV2":{const r=N("tableHandle",e,t,n,a),o=N("keys",e,t,n),s=N("defaultValue",e,t,n),i=a.getHashTableById(r.id);return[await i.find(o,s)]}case"LookupTableSize":case"LookupTableSizeV2":{const r=N("tableHandle",e,t,n,a);return[a.getHashTableById(r.id).tensorSize()]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}})(e,t,n,a);case"custom":const o=E(e.op);if(o&&o.customExecutor)return o.customExecutor(new me(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}})(e,t,n);return S.ZSL.isPromise(o)?o.then((e=>[].concat(e))):[].concat(o)}class Re{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map((e=>0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId))).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function Ae(e,t,n,a){const r=new Set,o=[];let s=null,i=null;const c=new Set,l=Object.keys(e).map((e=>O(e)[0]));let u=[];null!=a&&(u=a.map((e=>O(e.name)[0])));const h=[...t];for(;h.length>0;){const e=h.pop();(De(e)||Le(e)||Me(e))&&null==s&&(s=e,i=s.children.map((e=>e.name)).filter((e=>r.has(e)))),r.add(e.name),null==n[e.name]&&(-1===l.indexOf(e.name)&&-1===u.indexOf(e.name)&&(0!==e.inputs.length?e.inputs.forEach((e=>{c.has(e.name)||(c.add(e.name),h.push(e))})):o.push(e.name)))}return{inputs:e,outputs:t,usedNodes:r,missingInputs:o,dynamicNode:s,syncInputs:i}}const _e=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],Oe=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],Fe=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function De(e){return _e.indexOf(e.op)>=0}function Le(e){return Oe.indexOf(e.op)>=0}function Me(e){return Fe.indexOf(e.op)>=0}class Pe{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((t=>{this._functionExecutorMap[t]=new Pe(e.functions[t],this)}))}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map((t=>e[t].map((e=>e.id))));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((e=>e.signatureKey||e.name))}get outputNodes(){return this._outputs.map((e=>{const t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}get functions(){return Object.keys(this._functions).reduce(((e,t)=>(e[t]=this._functions[t].signature,e)),{})}getCompilationKey(e,t){const n=e.map((e=>e.name)).sort(),a=t.map((e=>e.name)).sort();return n.join(this.SEPERATOR)+"--"+a.join(this.SEPERATOR)}compile(e,t){const n=Ae(e,t,this.weightMap,this._initNodes),{missingInputs:a,dynamicNode:r,syncInputs:o}=n;if(null!=r)throw new Error("This execution contains the node '".concat(r.name,"', which has ")+"the dynamic op '".concat(r.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(o,"]"));if(a.length>0){const n=t.map((e=>e.name)),r=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(n,"] from the provided inputs ")+"[".concat(r,"]. Missing the following inputs: [").concat(a,"]"))}return function(e,t,n){const{usedNodes:a,inputs:r}=n,o=[],s=Object.keys(r).map((e=>O(e)[0])).map((t=>e.nodes[t])),i=e.initNodes;s.forEach((e=>{a.has(e.name)&&o.push(e)})),e.weights.forEach((e=>{a.has(e.name)&&o.push(e)})),null!=i&&i.forEach((e=>{a.has(e.name)&&o.push(e)}));const c=new Set,l=[];for(;o.length>0;){const e=o.pop();c.add(e.name),t[e.name]||l.push(e),e.children.forEach((e=>{!c.has(e.name)&&a.has(e.name)&&e.inputs.every((e=>c.has(e.name)))&&o.push(e)}))}return l}(this.graph,this.weightMap,n)}execute(e,t){e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const a=n.map((e=>this.graph.nodes[O(e)[0]])),r=t.map((e=>O(e)[0]));let o=r.map((e=>this.graph.nodes[e]));this.resetIntermediateTensors(),0===o.length&&(o=this._outputs);const s=this.getCompilationKey(a,o);let i=this.compiledMap.get(s);null==i&&(i=this.compile(e,o),this.compiledMap.set(s,i));const c={},l={};return(0,S.DZQ)((()=>{const n=new Re(this.weightMap,c,l,this.functionExecutorMap),a=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,r]=O(t),o=[];o[r]=e[t],a[n]=o}));const o=this.getFrozenTensorIds(a),s={};for(let e=0;e<i.length;e++){const t=i[e];if(!a[t.name]){const e=Ne(t,a,n,this._resourceManager);if(S.ZSL.isPromise(e))throw new Error("The execution of the op '".concat(t.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[t.name]=e,this.checkTensorForDisposal(t.name,t,a,n,o,r,s)}}return null==this.parent&&n.dispose(o),t.map((e=>R(e,a,n)))}))}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map((t=>e[t])).map((e=>e.map((e=>e.id)))));return new Set(t)}checkTensorForDisposal(e,t,n,a,r,o,s){"control"!==t.category&&-1===o.indexOf(e)&&(n[e].forEach((e=>{null!=e&&(s[e.id]=(s[e.id]||0)+t.children.length)})),t.inputs.forEach((e=>{if("control"!==e.category){const o=function(e,t,n){return t[_(e,n.currentContextId)]}(e.name,n,a);null!=o&&o.forEach((e=>{if(e&&!e.kept&&!r.has(e.id)){const n=s[e.id];if(1===n){if(this.keepTensorForDebug){const[n,r]=A(t.name,a);this.intermediateTensors[n]||(this.intermediateTensors[n]=[]),this.intermediateTensors[n][r]=e}else e.dispose();delete s[e.id]}else null!=n&&s[e.id]--}}))}})))}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach((e=>this.intermediateTensors[e].forEach((e=>e.dispose())))),this.disposeTensorsMap())}disposeTensorsMap(){this.tensorsMap&&Object.keys(this.tensorsMap).forEach((e=>{this.tensorsMap[e].forEach((e=>{!e||e.kept||e.isDisposed||this.keepIds.has(e.id)||e.dispose()}))}))}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(const e in this.intermediateTensors)this.intermediateTensors[e].forEach((e=>e.dispose())),delete this.intermediateTensors[e]}async _executeAsync(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepTensorForDebug=(0,S._K2)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(l){console.warn(l.message)}this.resetIntermediateTensors();const o=new Re(this.weightMap,a,r,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(e,o,t,n);const s=t.map((e=>R(e,this.tensorsMap,o))),i=s.map((e=>e.id)),c=Object.keys(e).map((t=>e[t].id));return this.keepIds=new Set([...i,...c,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&o.dispose(this.keepIds),s}async executeFunctionAsync(e,t,n){const a=e.reduce(((e,t,n)=>(e[this.inputs[n].name]=t,e)),{});return this._executeAsync(a,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,a){const r=Object.keys(e),o=r.map((e=>this.graph.nodes[O(e)[0]])),s=n.map((e=>O(e)[0]));let i=s.map((e=>this.graph.nodes[e]));0===i.length&&(i=this._outputs);const{usedNodes:c,missingInputs:l,dynamicNode:u,syncInputs:h}=Ae(e,i,this.weightMap,this._initNodes),d=[...o,...this.graph.weights,...this._initNodes||[]].map((e=>({node:e,contexts:t.currentContext}))),p=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,a]=O(t),r=[];r[a]=e[t],p[n]=r}));const f={},m=this.getFrozenTensorIds(p),g={};for(;d.length>0;){const e=this.processStack(o,d,t,p,g,m,s,f,c);await Promise.all(e)}null!=u||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const y=i.filter((e=>!De(e)&&!R(e.name,p,t))).map((e=>e.name));if(y.length>0){let e="";throw null!=u&&(e="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(h,"]")),new Error("Cannot compute the outputs [".concat(y,"] from the provided ")+"inputs [".concat(r,"]. Consider providing the following inputs: ")+"[".concat(l,"]. ").concat(e))}return p}processStack(e,t,n,a,r,o,s,i,c){const l=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let u="";if("Enter"===e.node.op&&N("isConstant",e.node,a,n)&&([u]=A(e.node.name,n)),null==a[e.node.name]){const h=Ne(e.node,a,n,this._resourceManager);u||([u]=A(e.node.name,n));const d=n.currentContext;S.ZSL.isPromise(h)?l.push(h.then((l=>(a[u]=l,n.currentContext=d,this.checkTensorForDisposal(u,e.node,a,n,o,s,i),this.processChildNodes(e.node,t,n,a,r,c),l)))):(a[u]=h,this.checkTensorForDisposal(u,e.node,a,n,o,s,i),this.processChildNodes(e.node,t,n,a,r,c))}else this.processChildNodes(e.node,t,n,a,r,c)}return l}processChildNodes(e,t,n,a,r,o){e.children.forEach((e=>{const[s]=A(e.name,n);!r[s]&&o.has(e.name)&&("Merge"===e.op?e.inputNames.some((e=>!!R(e,a,n)))&&(r[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((e=>!!R(e,a,n)))&&(r[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}dispose(){Object.keys(this.weightMap).forEach((e=>this.weightMap[e].forEach((e=>e.dispose()))))}checkInputShapeAndType(e){Object.keys(e).forEach((t=>{const n=e[t],[a]=O(t),r=this.graph.nodes[a];if(r.attrParams.shape&&r.attrParams.shape.value){const e=r.attrParams.shape.value,t=e.length===n.shape.length&&n.shape.every(((t,n)=>-1===e[n]||e[n]===t));S.ZSL.assert(t,(()=>"The shape of dict['".concat(r.name,"'] provided in ")+"model.execute(dict) must be [".concat(e,"], but was ")+"[".concat(n.shape,"]")))}r.attrParams.dtype&&r.attrParams.dtype.value&&S.ZSL.assert(n.dtype===r.attrParams.dtype.value,(()=>"The dtype of dict['".concat(r.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(r.attrParams.dtype.value,", but was ").concat(n.dtype)))}))}mapInputs(e){const t={};for(const n in e)if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]){t[this._signature.inputs[n].name]=e[n]}else t[n]=e[n];return t}checkInputs(e){const t=Object.keys(e).filter((e=>{const[t]=O(e);return null==this.graph.nodes[t]}));if(t.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(t,"] that are not part of graph"))}mapOutputs(e){return e.map((e=>{if(null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[e]){return this._signature.outputs[e].name}return e}),{})}checkOutputs(e){e.forEach((e=>{const[t]=O(e);if(!this.graph.nodes[t])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}class ze{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}const Be="?tfjs-format=file",We="model.json";class Ue{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.io;this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=n,null==t&&(this.loadOptions={}),this.resourceManager=new ze}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return S.ZSL.isPromise(e)?e.then((e=>this.loadSync(e))):this.loadSync(e)}loadSync(e){this.artifacts=e;const t=this.artifacts.modelTopology;let n=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const e=this.artifacts.userDefinedMetadata;null!=e.signature&&(n=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}this.signature=n,this.version="".concat(t.versions.producer,".").concat(t.versions.minConsumer);const a=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Pe(ee.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=ee.Instance.transformGraph(e.modelInitializer);this.initializer=new Pe(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,t){if("string"===typeof e){const t=this.io.getSaveHandlers(e);if(0===t.length)throw new Error("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new Error("Found more than one (".concat(t.length,") save handlers for ")+"URL '".concat(e,"'"));e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,t){const n=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){const e=n instanceof S.qYS?[n]:n,t={};return e.forEach(((e,n)=>t[this.structuredOutputKeys[n]]=e)),t}return n}normalizeInputs(e){if(!(e instanceof S.qYS)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+"the graph model has ".concat(this.inputNodes.length," placeholders, ")+"while there are ".concat(e.length," input tensors."));return this.inputNodes.reduce(((t,n,a)=>(t[n]=e[a],t)),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce(((t,n)=>(t[n]=[e[n]],t)),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function Ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.io;if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&"string"===typeof e&&(e=function(e){e.endsWith("/")||(e+="/");return"".concat(e).concat(We).concat(Be)}(e));const a=new Ue(e,t,n);return await a.load(),a}},6790:(e,t,n)=>{"use strict";n.d(t,{GJ:()=>a,uI:()=>r});class a{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class r{refCount(e){return o("refCount")}incRef(e){return o("incRef")}timerAvailable(){return!0}time(e){return o("time")}read(e){return o("read")}readSync(e){return o("readSync")}readToGPU(e,t){return o("readToGPU")}numDataIds(){return o("numDataIds")}disposeData(e,t){return o("disposeData")}write(e,t,n){return o("write")}move(e,t,n,a,r){return o("move")}memory(){return o("memory")}floatPrecision(){return o("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return o("dispose")}}function o(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}},6692:(e,t,n)=>{"use strict";function a(e,t,n){const a=function(e,t,n){return function(e,t,n){let a=0,r=e.length,o=0,s=!1;for(;a<r;){o=a+(r-a>>>1);const i=n(t,e[o]);i>0?a=o+1:(r=o,s=!i)}return s?a:-a-1}(e,t,n||r)}(e,t,n),o=a<0?-(a+1):a;e.splice(o,0,t)}function r(e,t){return e>t?1:e<t?-1:0}function o(e,t,n,a,r){return c(e,t,n,a,r,0)}function s(e,t,n,a,r,o){return c(e,t,n,a,r,0,!1,o,!0)}function i(e,t,n,a,r,o){return c(e,t,n,a,r,o,!0)}function c(e,t,n,r,o,s){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],d=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const p=[];for(let a=0;a<t.length;a++)t[a]>o&&p.push({score:t[a],boxIndex:a,suppressBeginIndex:0});p.sort(h);const f=s>0?-.5/s:0,m=[],g=[];for(;m.length<n&&p.length>0;){const t=p.pop(),{score:n,boxIndex:s,suppressBeginIndex:i}=t;if(n<o)break;let c=!1;for(let a=m.length-1;a>=i;--a){const n=l(e,s,m[a]);if(n>=r){c=!0;break}if(t.score=t.score*u(r,f,n),t.score<=o)break}t.suppressBeginIndex=m.length,c||(t.score===n?(m.push(s),g.push(t.score)):t.score>o&&a(p,t,h))}const y=m.length,b=n-y;c&&b>0&&(m.push(...new Array(b).fill(0)),g.push(...new Array(b).fill(0)));const v={selectedIndices:m};return i&&(v.selectedScores=g),d&&(v.validOutputs=y),v}function l(e,t,n){const a=e.subarray(4*t,4*t+4),r=e.subarray(4*n,4*n+4),o=Math.min(a[0],a[2]),s=Math.min(a[1],a[3]),i=Math.max(a[0],a[2]),c=Math.max(a[1],a[3]),l=Math.min(r[0],r[2]),u=Math.min(r[1],r[3]),h=Math.max(r[0],r[2]),d=Math.max(r[1],r[3]),p=(i-o)*(c-s),f=(h-l)*(d-u);if(p<=0||f<=0)return 0;const m=Math.max(o,l),g=Math.max(s,u),y=Math.min(i,h),b=Math.min(c,d),v=Math.max(y-m,0)*Math.max(b-g,0);return v/(p+f-v)}function u(e,t,n){const a=Math.exp(t*n*n);return n<=e?a:0}function h(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}n.d(t,{c7:()=>o,ZS:()=>s,ut:()=>i})},9286:(e,t,n)=>{"use strict";n.d(t,{Y:()=>r});var a=n(259);function r(e,t){const n=[];for(let a=0;a<t.length;a++)t[a]&&n.push(a);const r=(0,a.r)(e,"int32"),o=(0,a.r)([n.length,e.length],"int32");for(let a=0;a<n.length;a++){const t=r.indexToLoc(n[a]),s=a*e.length;o.values.set(t,s)}return o.toTensor()}},2164:(e,t,n)=>{"use strict";n.d(t,{T2:()=>x,Ye:()=>v});var a=n(6790),r=n(5399),o=n(7926),s=n(9554),i=n(843),c=n(4124),l=n(8977),u=n(1426);class h{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new p)}profileKernel(e,t,n){let a;const o=()=>{a=n()};let s;const i=l.now();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(o);else{o();for(const e of a)e.dataSync();s=Promise.resolve({kernelMs:l.now()-i})}if((0,r._K)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let r=0;r<a.length;r++){const t=a[r];t.data().then((n=>{d(n,t.dtype,e)}))}return{kernelName:e,outputs:a,inputs:t,timeMs:s.then((e=>e.kernelMs)),extraInfo:s.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:a,inputs:r,extraInfo:o}=e;n.forEach((e=>{Promise.all([e.data(),a,o]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],r,n[2])}))}))}}function d(e,t,n){if("float32"!==t)return!1;for(let a=0;a<e.length;a++){const t=e[a];if(isNaN(t)||!isFinite(t))return console.warn("Found ".concat(t," in the result of '").concat(n,"'")),!0}return!1}class p{logKernelProfile(e,t,n,a,r,o){const s="number"===typeof a?u.av("".concat(a,"ms"),9):a.error,i=u.av(e,25),c=t.rank,l=t.size,h=u.av(t.shape.toString(),14);let d="";for(const u in r){const e=r[u];if(null!=e){const n=e.shape||t.shape,a=n.length;d+="".concat(u,": ").concat(a,"D ").concat(a>0?n:""," ")}}console.log("%c".concat(i,"\t%c").concat(s,"\t%c").concat(c,"D ").concat(h,"\t%c").concat(l,"\t%c").concat(d,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}var f=n(9494),m=n(8804);function g(e){return null!=e.kernelName}class y{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class b{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new y}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error("The highest priority backend '".concat(e,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(c.i("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new h(this.backendInstance),!0}setupRegisteredKernels(){(0,i.Op)(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){(0,i.Op)(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{const n=t.factory();if(!n||n instanceof a.uI||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,a=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,c.i("Initialization of backend ".concat(e," failed")),c.i(n.stack||n.message)),!1)));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}}catch(n){return c.i("Initialization of backend ".concat(e," failed")),c.i(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:a,asyncInit:r}=this.initializeBackend(n);if(r||a)return{name:n,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),a=n.backend,r=this.readSync(t),o=a.refCount(t);a.disposeData(t,!0),n.backend=e,e.move(t,r,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((()=>this.startScope(a)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(a){throw t(),a}}nextTensorId(){return b.nextTensorId++}nextVariableId(){return b.nextVariableId++}clone(e){const t=x.runKernel(s.lzr,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return x.runKernel(s.KXH,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=(0,i._5)(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const a=this.backend.numDataIds();let r=0;n.forEach((e=>{r+="complex64"===e.dtype?3:1}));const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-t-r-o;if(s>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(s," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let t,n=[];const a=this.isTapeOn(),r=this.state.numBytes,o=this.state.numTensors;let s,c;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=g(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(g(e)){const{kernelName:t,inputs:r,attrs:o}=e;null==this.backendName&&this.backend;const l=(0,i._5)(t,this.backendName);u.vA(null!=l,(()=>"Cannot find registered kernel '".concat(t,"' for backend '").concat(this.backendName,"'"))),s=()=>{const e=this.backend.numDataIds();c=l.kernelFunc({inputs:r,attrs:o,backend:this.backend});const s=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,s);const i=s.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(a){const e=this.getTensorsForGradient(t,r,i);n=this.saveTensorsForBackwardMode(e)}return i}}else{const{forwardFunc:t}=e,r=e=>{a&&(n=e.map((e=>this.keep(this.clone(e)))))};s=()=>{const e=this.backend.numDataIds();c=this.tidy((()=>t(this.backend,r)));const n=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:h,attrs:d}=e,p=g(e)?null:e.backwardsFunc;let f;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(f=this.profiler.profileKernel(l,h,(()=>s())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),t=f.outputs):t=s()})),a&&this.addTapeNode(l,h,t,p,n,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-r,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(h).map((e=>null!=h[e]?h[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(c)?t:t[0]}saveTensorsForBackwardMode(e){const t=e.map((e=>this.keep(this.clone(e))));return t}getTensorsForGradient(e,t,n){const a=(0,i.vQ)(e);if(null!=a){const e=a.inputsToSave||[],r=a.outputsToSave||[];let o;a.saveAllInputs?(u.vA(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),o=Object.keys(t).map((e=>t[e]))):o=e.map((e=>t[e]));const s=n.filter(((e,t)=>r[t]));return o.concat(s)}return[]}makeTensor(e,t,n,a){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",a=a||this.backend;let r=e;"string"===n&&u.Kg(e[0])&&(r=e.map((e=>l.encodeString(e))));const o=a.write(r,t,n),s=new f.qY(t,n,o,this.nextTensorId());if(this.trackTensor(s,a),"string"===n){const e=this.state.tensorInfo.get(o),t=(0,u.SL)(r);this.state.numBytes+=t-e.bytes,e.bytes=t}return s}makeTensorFromDataId(e,t,n,a){const r={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(r,a)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:a,dtype:r}=e,o=new f.qY(a,r,n,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=a&&a!==e.dtype&&(e=e.cast(a));const r=new f.rT(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[r.name])throw new Error("Variable with name ".concat(r.name," was already registered"));return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*u.jv(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof f.rT||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*u.jv(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,a,r,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:r},c=(0,i.vQ)(e);null!=c&&(a=c.gradFunc),null!=a&&(s.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],a=u.Ty(e.size,e.dtype);return this.makeTensor(a,e.shape,e.dtype)}return e})),a(e.length>1?e:e[0],r,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=(0,m.NB)(e),n=new Set(t.map((e=>e.id)));for(let r=0;r<this.state.activeScope.track.length;r++){const e=this.state.activeScope.track[r];e.kept||n.has(e.id)||e.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==a.id||this.track(e)}))}gradients(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(u.vA(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));const r=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));u.vA(r instanceof f.qY,(()=>"The result y returned by f() must be a tensor."));const o=function(e,t,n){const a={},r={};for(let c=0;c<t.length;c++)a[t[c].id]=!0;for(let c=0;c<e.length;c++){const n=e[c],o=n.inputs;for(const e in o){const s=o[e];let i=!1;for(let e=0;e<t.length;e++)if(a[s.id]){n.outputs.forEach((e=>a[e.id]=!0)),i=!0,r[n.id]=!0;break}if(i)break}}const o={};o[n.id]=!0;const s={};for(let c=e.length-1;c>=0;c--){const t=e[c],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(o[t.outputs[e].id]){for(const e in n)o[n[e].id]=!0,s[t.id]=!0;break}}const i=[];for(let c=0;c<e.length;c++){const t=e[c];if(r[t.id]&&s[t.id]){const e={};for(const r in t.inputs){const n=t.inputs[r];a[n.id]&&(e[r]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,i.push(n)}}return i}(this.state.activeTape,t,r);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[r.id]=null==n?function(e){const t=(0,u.FZ)((0,u.Ze)(e),"float32");return x.makeTensor(t,e,"float32")}(r.shape):n,function(e,t,n,a){for(let r=t.length-1;r>=0;r--){const o=t[r],s=[];if(o.outputs.forEach((t=>{const n=e[t.id];null!=n?s.push(n):s.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(o.kernelName,"."));const i=o.gradient(s);for(const t in o.inputs){if(!(t in i))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(i),"."));const r=n((()=>i[t]()));if("float32"!==r.dtype)throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(r.dtype,"'"));const s=o.inputs[t];if(!u.r1(r.shape,s.shape))throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(r.shape,"', which does not match ")+"the shape of the input '".concat(s.shape,"'"));if(null==e[s.id])e[s.id]=r;else{const t=e[s.id];e[s.id]=a(t,r),t.dispose()}}}}(e,o,(e=>this.tidy(e)),w);const a=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:r,grads:a}}))}customGrad(e){var t=this;return u.vA(u.Tn(e),(()=>"The f passed in customGrad(f) must be a function.")),function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];let o;u.vA(a.every((e=>e instanceof f.qY)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const s={};a.forEach(((e,t)=>{s[t]=e}));return t.runKernelFunc({forwardFunc:(t,n)=>(o=e(...a,n),u.vA(o.value instanceof f.qY,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),u.vA(u.Tn(o.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),o.value),backwardsFunc:(e,t)=>{const n=o.gradFunc(e,t),r=Array.isArray(n)?n:[n];u.vA(r.length===a.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),u.vA(r.every((e=>e instanceof f.qY)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const s={};return r.forEach(((e,t)=>{s[t]=()=>e})),s},inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=(0,l.now)(),n=await this.backend.time(e);return n.wallMs=(0,l.now)()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new y;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function v(){const e=(0,o.L)();if(null==e._tfengine){const t=new r.OH(e);e._tfengine=new b(t)}return(0,r.tj)(e._tfengine.ENV),(0,f.qP)((()=>e._tfengine)),e._tfengine}b.nextTensorId=0,b.nextVariableId=0;const x=v();function w(e,t){const n={a:e,b:t};return x.runKernel(s.OMN,n)}},5399:(e,t,n)=>{"use strict";n.d(t,{OH:()=>o,_K:()=>i,tj:()=>l});var a=n(1426);const r="tfjsflags";class o{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=s,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(i().getBool("IS_TEST")||i().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];i().getBool("IS_TEST")||i().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(t,".")),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if((0,a.yL)(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(r in e){e[r].split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(t,n)}))}}}function s(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,a[0],a[1]),a.join("=")})),t}function i(){return c}let c=null;function l(e){c=e}},7926:(e,t,n)=>{"use strict";let a;function r(){if(null==a){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}a=e}return a}function o(e,t){const n=function(){const e=r();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const a=t();return n.set(e,a),n.get(e)}}n.d(t,{L:()=>r,m:()=>o})},8046:(e,t,n)=>{"use strict";n.d(t,{AS:()=>l,DZ:()=>c,Hi:()=>i,aC:()=>u,gJ:()=>d,jz:()=>h});var a=n(2164),r=n(5399),o=n(9494),s=n(8804);function i(){return a.T2}function c(e,t){return a.T2.tidy(e,t)}function l(e){(0,s.NB)(e).forEach((e=>e.dispose()))}function u(e){return a.T2.keep(e)}function h(){return a.T2.backendName}function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return a.T2.registerBackend(e,t,n)}(0,o.B4)((function(e){(0,r._K)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}))},1012:(e,t,n)=>{"use strict";n.d(t,{ljI:()=>Ke.ljI,Vvy:()=>Ke.Vvy,PH8:()=>Ke.PH8,OMN:()=>Ke.OMN,EkD:()=>Ke.EkD,u8Z:()=>Ke.u8Z,FSt:()=>Ke.FSt,Jp_:()=>Ke.Jp_,p_m:()=>Ke.p_m,QKF:()=>Ke.QKF,epO:()=>Ke.epO,TyE:()=>Ke.TyE,lxb:()=>Ke.lxb,zP9:()=>Ke.zP9,ho8:()=>Ke.ho8,cS:()=>Ke.cS,wwC:()=>Ke.wwC,VCH:()=>Ke.VCH,jAQ:()=>Ke.jAQ,Ik2:()=>Ke.Ik2,N4F:()=>Ke.N4F,vj7:()=>Ke.vj7,KXH:()=>Ke.KXH,QDP:()=>Ke.QDP,vaV:()=>Ke.vaV,pr3:()=>Ke.pr3,$zE:()=>Ke.$zE,$dB:()=>Ke.$dB,p2J:()=>Ke.p2J,rFm:()=>Ke.rFm,jfg:()=>Ke.jfg,A1h:()=>Ke.A1h,iGz:()=>Ke.iGz,gC7:()=>Ke.gC7,Mn0:()=>Ke.Mn0,MnK:()=>Ke.MnK,MRQ:()=>Ke.MRQ,jj_:()=>Ke.jj_,nY8:()=>Ke.nY8,GJx:()=>Vn.GJ,wNW:()=>Ke.wNW,TMz:()=>Ke.TMz,tGH:()=>Ke.tGH,X$8:()=>Ke.X$8,nVu:()=>Ke.nVu,ORI:()=>Ke.ORI,jxD:()=>Ke.jxD,Qgm:()=>Ke.Qgm,Pah:()=>Ke.Pah,rsH:()=>Ke.rsH,BRl:()=>Ke.BRl,_s9:()=>Ke._s9,ox3:()=>Ke.ox3,ybN:()=>Ke.ybN,ybj:()=>Ke.ybj,rGP:()=>Ke.rGP,SQl:()=>Ke.SQl,BxF:()=>Ke.BxF,ZgB:()=>Ke.ZgB,ElG:()=>Ke.ElG,awo:()=>Ke.awo,i5R:()=>Ke.i5R,aAr:()=>Ke.aAr,T7M:()=>Ke.T7M,O4G:()=>Ke.O4G,mxL:()=>Ke.mxL,XhZ:()=>Ke.XhZ,lLS:()=>Ke.lLS,OAQ:()=>Ke.OAQ,lzr:()=>Ke.lzr,dv8:()=>Ke.dv8,gIW:()=>Ke.gIW,E3$:()=>Ke.E3$,iPs:()=>Ke.iPs,uI_:()=>Vn.uI,jM4:()=>Ke.jM4,ToN:()=>Ke.ToN,X0$:()=>Ke.X0$,mIA:()=>Ke.mIA,CwD:()=>Ke.CwD,mnI:()=>Ke.mnI,tG8:()=>Ke.tG8,Cg$:()=>Ke.Cg$,RUm:()=>Ke.RUm,nZd:()=>Ke.nZd,LXA:()=>Ke.LXA,VAI:()=>Ke.VAI,t3d:()=>Ke.t3d,ySp:()=>Ke.ySp,cHb:()=>Ke.cHb,RXX:()=>Ke.RXX,TL8:()=>Ke.TL8,LDN:()=>Ke.LDN,g5A:()=>Ke.g5A,lNG:()=>Ke.lNG,LG0:()=>Ke.LG0,x7F:()=>Ke.x7F,BLA:()=>Ke.BLA,WT3:()=>Ke.WT3,xu7:()=>Ke.xu7,l0G:()=>Ke.l0G,SDM:()=>Ke.SDM,Zl4:()=>Ke.Zl4,e0f:()=>Ke.e0f,ylV:()=>Ke.ylV,urI:()=>Ke.urI,LWX:()=>Ke.LWX,mM$:()=>Ke.mM$,ODT:()=>Ke.ODT,pyJ:()=>Ke.pyJ,Ncv:()=>Ke.Ncv,kdj:()=>Ke.kdj,oJ2:()=>Ke.oJ2,mH5:()=>Ke.mH5,Q6t:()=>Ke.Q6t,LRy:()=>Ke.LRy,sDr:()=>Ke.sDr,huO:()=>Ke.huO,fUj:()=>Ke.fUj,P_L:()=>Ke.P_L,R23:()=>Ke.R23,hgw:()=>Ke.hgw,FCQ:()=>Ke.FCQ,jOE:()=>Ke.jOE,XQy:()=>Ke.XQy,D7i:()=>Ke.D7i,BK4:()=>Ke.BK4,hVg:()=>Ke.hVg,TOR:()=>Ke.TOR,pJc:()=>Ke.pJc,uWl:()=>Ke.uWl,l6P:()=>Ke.l6P,u$b:()=>Ke.u$b,vI1:()=>Ke.vI1,YVe:()=>Ke.YVe,hql:()=>Ke.hql,J3C:()=>Ke.J3C,JiE:()=>Ke.JiE,rFG:()=>Ke.rFG,Fin:()=>Ke.Fin,A8B:()=>Ke.A8B,C8s:()=>Ke.C8s,BoJ:()=>Ke.BoJ,L6G:()=>Ke.L6G,DvZ:()=>Ke.DvZ,jgd:()=>Ke.jgd,Blb:()=>Ke.Blb,dFH:()=>Ke.dFH,M6A:()=>Ke.M6A,Ddj:()=>Ke.Ddj,pnw:()=>Ke.pnw,UcO:()=>Ke.UcO,YAb:()=>Ke.YAb,iW0:()=>Ke.iW0,$jE:()=>Ke.$jE,PbM:()=>Ke.PbM,WuN:()=>Ke.WuN,oFs:()=>Ke.oFs,iuW:()=>Ke.iuW,qYS:()=>Se.qY,ylz:()=>Se.yl,FAs:()=>Ke.FAs,TBb:()=>Ke.TBb,dLy:()=>Ke.dLy,wx0:()=>Ke.wx0,EwU:()=>Ke.EwU,dXR:()=>Ke.dXR,pPe:()=>Ke.pPe,xJ3:()=>Ke.xJ3,Dr:()=>Ke.Dr,WQq:()=>It.WQq,backend_util:()=>c,hOW:()=>It.hOW,ZEY:()=>He,TaL:()=>o,ra8:()=>It.ra8,wgE:()=>It.wgE,zQh:()=>It.zQh,o8B:()=>It.o8B,xWs:()=>It.xWs,RPU:()=>It.RPU,eMq:()=>a,ASo:()=>Tt.AS,y4m:()=>It.y4m,Hi9:()=>Tt.Hi,_K2:()=>m._K,oNF:()=>It.oNF,UG6:()=>It.UG6,jz4:()=>Tt.jz,Slp:()=>It.Slp,io:()=>r,aCs:()=>Tt.aC,kpo:()=>l,lKK:()=>It.lKK,dA1:()=>Et,gJX:()=>Tt.gJ,tAK:()=>qe.tA,tQQ:()=>It.tQQ,d_2:()=>It.d_2,ry7:()=>It.ry7,dik:()=>It.dik,Kro:()=>s,r2V:()=>It.r2V,t$z:()=>It.t$z,jbE:()=>It.jbE,chL:()=>St.ch,OEK:()=>It.OEK,tGX:()=>It.tGX,KtR:()=>It.KtR,DZQ:()=>Tt.DZ,K$i:()=>It.K$i,TuY:()=>St.Tu,ZSL:()=>kt,Ul9:()=>It.Ul9});var a={};n.r(a),n.d(a,{isBrowser:()=>f,isMobile:()=>p,mockIsMobile:()=>d});var r={};n.r(r),n.d(r,{browserFiles:()=>Ne,browserHTTPRequest:()=>Pe,concatenateArrayBuffers:()=>E,copyModel:()=>pe,decodeWeights:()=>S,encodeWeights:()=>k,fromMemory:()=>Ue,fromMemorySync:()=>Ve,getLoadHandlers:()=>B,getModelArtifactsForJSON:()=>_,getModelArtifactsForJSONSync:()=>A,getModelArtifactsInfoForJSON:()=>O,getSaveHandlers:()=>z,getWeightSpecs:()=>F,http:()=>Me,isHTTPScheme:()=>De,listModels:()=>he,loadWeights:()=>_e,moveModel:()=>fe,registerLoadRouter:()=>P,registerSaveRouter:()=>M,removeModel:()=>de,weightsLoaderFactory:()=>Oe,withSaveHandler:()=>Ge,withSaveHandlerSync:()=>je});var o={};n.r(o),n.d(o,{fromPixels:()=>nt,fromPixelsAsync:()=>et,toPixels:()=>tt});var s={};n.r(s),n.d(s,{assertParamsValid:()=>ot,computeFlatOffset:()=>bt,computeOutShape:()=>it,getNormalizedAxes:()=>ht,isSliceContinous:()=>yt,maskToAxes:()=>st,parseSliceParams:()=>vt,sliceInfo:()=>xt,startForAxis:()=>mt,startIndicesWithElidedDims:()=>dt,stopForAxis:()=>gt,stopIndicesWithElidedDims:()=>pt,stridesForAxis:()=>ft,stridesWithElidedDims:()=>ct});var i={};n.r(i),n.d(i,{collectGatherOpShapeInfo:()=>Pn,computeOutShape:()=>Mn,segOpComputeOptimalWindowSize:()=>Ln});var c={};n.r(c),n.d(c,{ERF_A1:()=>Qt,ERF_A2:()=>Jt,ERF_A3:()=>$t,ERF_A4:()=>en,ERF_A5:()=>tn,ERF_P:()=>Zt,PARALLELIZE_THRESHOLD:()=>zt,RowPartitionType:()=>_t,SELU_SCALE:()=>Xt,SELU_SCALEALPHA:()=>Yt,applyActivation:()=>Ft.f2,assertAndGetBroadcastShape:()=>He.assertAndGetBroadcastShape,assertAxesAreInnerMostDims:()=>Nt.WC,assertParamsConsistent:()=>Rt,assignToTypedArray:()=>ln,axesAreInnerMostDims:()=>Nt.WH,calculateShapes:()=>qt.l8,checkEinsumDimSizes:()=>bn,checkPadOnDimRoundingMode:()=>Ot.s_,combineLocations:()=>Nt.aF,combineRaggedTensorToTensorShapes:()=>Dt,complexWithEvenIndex:()=>on,complexWithOddIndex:()=>sn,computeConv2DInfo:()=>Ot.uf,computeConv3DInfo:()=>Ot.p$,computeDefaultPad:()=>Ot.G8,computeDilation2DInfo:()=>Ot.YQ,computeOptimalWindowSize:()=>Bt,computeOutAndReduceShapes:()=>Nt.lb,computeOutShape:()=>At,computePool2DInfo:()=>Ot.E6,computePool3DInfo:()=>Ot.l5,convertConv2DDataFormat:()=>Ot.$Q,decodeEinsumEquation:()=>gn,eitherStridesOrDilationsAreOne:()=>Ot.G0,expandShapeToKeepDim:()=>Nt.SM,exponent:()=>hn,exponents:()=>un,fromStringArrayToUint8:()=>Bn,fromUint8ToStringArray:()=>zn,getAxesPermutation:()=>Nt.Em,getBroadcastDims:()=>He.getBroadcastDims,getComplexWithIndex:()=>cn,getEinsumComputePath:()=>vn,getEinsumPermutation:()=>yn,getFusedBiasGradient:()=>Ft.Do,getFusedDyActivation:()=>Ft.XB,getImageCenter:()=>Wt,getInnerMostAxes:()=>Nt.fK,getPermuted:()=>Vt,getRaggedRank:()=>Mt,getReductionAxes:()=>He.getReductionAxes,getReshaped:()=>Ut,getReshapedPermuted:()=>Gt,getRowPartitionTypesHelper:()=>Lt,getSliceBeginCoords:()=>jt,getSliceSize:()=>Ht,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>Sn,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>In,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>Tn,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>Nn,getSparseReshapeInputOutputMismatchErrorMessage:()=>An,getSparseReshapeInputOutputMultipleErrorMessage:()=>Rn,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>Cn,getSparseReshapeNegativeOutputDimErrorMessage:()=>En,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>Dn,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>_n,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>On,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>Fn,getUndoAxesPermutation:()=>Nt.gx,isIdentityPermutation:()=>xn,log:()=>nn.R,mergeRealAndImagArrays:()=>an,prepareAndValidate:()=>Kt,prepareSplitSize:()=>kn,segment_util:()=>i,shouldFuse:()=>Ft.zE,slice_util:()=>s,splitRealAndImagArrays:()=>rn,tupleValuesAreOne:()=>Ot.Dh,upcastType:()=>St.Tu,validateDefaultValueShape:()=>Pt,validateInput:()=>qt.TT,validateUpdateShape:()=>qt.Ly,warn:()=>nn.i});var l={};n.r(l),n.d(l,{c7:()=>Wn.c7,ZS:()=>Wn.ZS,ut:()=>Wn.ut,YO:()=>Un.Y});var u=n(2164);let h;function d(e){h=e}function p(e){if(void 0!==h)return h;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function f(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var m=n(5399);const g=(0,m._K)();g.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),g.registerFlag("IS_BROWSER",(()=>f())),g.registerFlag("IS_NODE",(()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node)),g.registerFlag("IS_CHROME",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),g.registerFlag("PROD",(()=>!1)),g.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>g.getBool("DEBUG"))),g.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),g.registerFlag("IS_TEST",(()=>!1)),g.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>!0)),g.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),g.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1)),g.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),g.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));var y=n(6149),b=n(8032),v=n(1426);const x={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},w=4;async function k(e,t){const n=[],a=[],r=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let o=0;o<r.length;++o){const s=r[o],i=Array.isArray(e)?e[o].tensor:e[s];if("float32"!==i.dtype&&"int32"!==i.dtype&&"bool"!==i.dtype&&"string"!==i.dtype&&"complex64"!==i.dtype)throw new Error("Unsupported dtype in weight '".concat(s,"': ").concat(i.dtype));const c={name:s,shape:i.shape,dtype:i.dtype};if("string"===i.dtype){const e=new Promise((async e=>{const t=await i.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+w*t.length,a=new Uint8Array(n);let r=0;for(let o=0;o<t.length;o++){const e=t[o],n=new Uint8Array(new Uint32Array([e.length]).buffer);a.set(n,r),r+=w,a.set(e,r),r+=e.length}e(a)}));a.push(e)}else a.push(i.data());null!=t&&(c.group=t),n.push(c)}return{data:I(await Promise.all(a)),specs:n}}function S(e,t){const n={};let a,r=0;for(const o of t){const t=o.name,s=o.dtype,i=o.shape,c=(0,v.Ze)(i);let l;if("quantization"in o){const n=o.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error("Weight ".concat(o.name," with quantization ").concat(n.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==n.dtype)throw new Error("Weight ".concat(o.name," has unknown ")+"quantization dtype ".concat(n.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==s)throw new Error("Weight ".concat(o.name," is quantized with ").concat(n.dtype," ")+"which only supports weights of type float32 not ".concat(s,"."))}const i=x[n.dtype],u=e.slice(r,r+c*i),h="uint8"===n.dtype?new Uint8Array(u):new Uint16Array(u);if("float32"===s)if("uint8"===n.dtype||"uint16"===n.dtype){l=new Float32Array(h.length);for(let e=0;e<h.length;e++){const t=h[e];l[e]=t*n.scale+n.min}}else{if("float16"!==n.dtype)throw new Error("Unsupported quantization type ".concat(n.dtype," ")+"for weight type float32.");void 0===a&&(a=D()),l=a(h)}else{if("int32"!==s)throw new Error("Unsupported dtype in weight '".concat(t,"': ").concat(s));if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error("Unsupported quantization type ".concat(n.dtype," ")+"for weight type int32.");l=new Int32Array(h.length);for(let e=0;e<h.length;e++){const t=h[e];l[e]=Math.round(t*n.scale+n.min)}}r+=c*i}else if("string"===s){const t=(0,v.Ze)(o.shape);l=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(r,r+w))[0];r+=w;const n=new Uint8Array(e.slice(r,r+t));l.push(n),r+=t}}else{const a=x[s],o=e.slice(r,r+c*a);if("float32"===s)l=new Float32Array(o);else if("int32"===s)l=new Int32Array(o);else if("bool"===s)l=new Uint8Array(o);else{if("complex64"!==s)throw new Error("Unsupported dtype in weight '".concat(t,"': ").concat(s));{l=new Float32Array(o);const e=new Float32Array(l.length/2),a=new Float32Array(l.length/2);for(let t=0;t<e.length;t++)e[t]=l[2*t],a[t]=l[2*t+1];const r=(0,b.O)(e,i,"float32"),s=(0,b.O)(a,i,"float32");n[t]=(0,y.f)(r,s),r.dispose(),s.dispose()}}r+=c*a}"complex64"!==s&&(n[t]=(0,b.O)(l,i,s))}return n}function I(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));const a=new Uint8Array(t);let r=0;return n.forEach((e=>{a.set(new Uint8Array(e.buffer),r),r+=e.byteLength})),a.buffer}const T="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function C(e){return T?Buffer.byteLength(e):new Blob([e]).size}function E(e){if(1===e.length)return e[0];let t=0;e.forEach((e=>{t+=e.byteLength}));const n=new Uint8Array(t);let a=0;return e.forEach((e=>{n.set(new Uint8Array(e),a),a+=e.byteLength})),n.buffer}function N(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function R(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function A(e,t,n){const a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(a.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");a.weightSpecs=t,a.weightData=n}return null!=e.signature&&(a.signature=e.signature),null!=e.userDefinedMetadata&&(a.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(a.modelInitializer=e.modelInitializer),a}async function _(e,t){let n,a;return null!=e.weightsManifest&&([n,a]=await t(e.weightsManifest)),A(e,n,a)}function O(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:C(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:C(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function F(e){const t=[];for(const n of e)t.push(...n.weights);return t}function D(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0===(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return a=>{const r=new ArrayBuffer(4*a.length),o=new Uint32Array(r);for(let s=0;s<a.length;s++){const r=a[s],i=e[n[r>>10]+(1023&r)]+t[r>>10];o[s]=i}return new Float32Array(r)}}class L{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==L.instance&&(L.instance=new L),L.instance}static registerSaveRouter(e){L.getInstance().saveRouters.push(e)}static registerLoadRouter(e){L.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return L.getHandlers(e,"save")}static getLoadHandlers(e,t){return L.getHandlers(e,"load",t)}static getHandlers(e,t,n){const a=[];return("load"===t?L.getInstance().loadRouters:L.getInstance().saveRouters).forEach((t=>{const r=t(e,n);null!==r&&a.push(r)})),a}}const M=e=>L.registerSaveRouter(e),P=e=>L.registerLoadRouter(e),z=e=>L.getSaveHandlers(e),B=(e,t)=>L.getLoadHandlers(e,t),W="tensorflowjs",U="models_store",V="model_info_store";function G(){if(!(0,m._K)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function j(e){const t=e.result;t.createObjectStore(U,{keyPath:"modelPath"}),t.createObjectStore(V,{keyPath:"modelPath"})}class H{constructor(e){if(this.indexedDB=G(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const a=this.indexedDB.open(W,1);a.onupgradeneeded=()=>j(a),a.onsuccess=()=>{const r=a.result;if(null==t){const t=r.transaction(U,"readonly"),a=t.objectStore(U).get(this.modelPath);a.onsuccess=()=>{if(null==a.result)return r.close(),n(new Error("Cannot find model with path '".concat(this.modelPath,"' ")+"in IndexedDB."));e(a.result.modelArtifacts)},a.onerror=e=>(r.close(),n(a.error)),t.oncomplete=()=>r.close()}else{const a=O(t),o=r.transaction(V,"readwrite");let s=o.objectStore(V);const i=s.put({modelPath:this.modelPath,modelArtifactsInfo:a});let c;i.onsuccess=()=>{c=r.transaction(U,"readwrite");const i=c.objectStore(U).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:a});i.onsuccess=()=>e({modelArtifactsInfo:a}),i.onerror=e=>{s=o.objectStore(V);const t=s.delete(this.modelPath);t.onsuccess=()=>(r.close(),n(i.error)),t.onerror=e=>(r.close(),n(i.error))}},i.onerror=e=>(r.close(),n(i.error)),o.oncomplete=()=>{null==c?r.close():c.oncomplete=()=>r.close()}}},a.onerror=e=>n(a.error)}))}}H.URL_SCHEME="indexeddb://";const K=e=>{return(0,m._K)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(H.URL_SCHEME)?(t=e.slice(H.URL_SCHEME.length),new H(t)):null;var t};L.registerSaveRouter(K),L.registerLoadRouter(K);class q{constructor(){this.indexedDB=G()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(W,1);n.onupgradeneeded=()=>j(n),n.onsuccess=()=>{const a=n.result,r=a.transaction(V,"readonly"),o=r.objectStore(V).getAll();o.onsuccess=()=>{const t={};for(const e of o.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},o.onerror=e=>(a.close(),t(o.error)),r.oncomplete=()=>a.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(H.URL_SCHEME)?t.slice(H.URL_SCHEME.length):t,new Promise(((t,n)=>{const a=this.indexedDB.open(W,1);a.onupgradeneeded=()=>j(a),a.onsuccess=()=>{const r=a.result,o=r.transaction(V,"readwrite"),s=o.objectStore(V),i=s.get(e);let c;i.onsuccess=()=>{if(null==i.result)return r.close(),n(new Error("Cannot find model with path '".concat(e,"' ")+"in IndexedDB."));{const a=s.delete(e),o=()=>{c=r.transaction(U,"readwrite");const a=c.objectStore(U).delete(e);a.onsuccess=()=>t(i.result.modelArtifactsInfo),a.onerror=e=>n(i.error)};a.onsuccess=o,a.onerror=e=>(o(),r.close(),n(i.error))}},i.onerror=e=>(r.close(),n(i.error)),o.oncomplete=()=>{null==c?r.close():c.oncomplete=()=>r.close()}},a.onerror=e=>n(a.error)}))}}const Y="/",X="tensorflowjs_models",Z="info",Q="model_topology",J="weight_specs",$="weight_data",ee="model_metadata";function te(e){return{info:[X,e,Z].join(Y),topology:[X,e,Q].join(Y),weightSpecs:[X,e,J].join(Y),weightData:[X,e,$].join(Y),modelMetadata:[X,e,ee].join(Y)}}function ne(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function ae(e){const t=e.split(Y);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(Y)}class re{constructor(e){if(!(0,m._K)().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=te(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),a=JSON.stringify(e.weightSpecs),r=O(e);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,a),this.LS.setItem(this.keys.weightData,function(e){if(T)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let a=0,r=t.length;a<r;a++)n+=String.fromCharCode(t[a]);return btoa(n)}(e.weightData));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:r}}catch(t){throw ne(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(r.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(r.weightSpecsBytes,", ")+"weightDataBytes=".concat(r.weightDataBytes,"."))}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");t.modelTopology=n;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==a)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");t.weightSpecs=a;const r=this.LS.getItem(this.keys.modelMetadata);if(null!=r){const e=JSON.parse(r);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return t.weightData=function(e){if(T){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let a=0;a<t.length;++a)n.set([t.charCodeAt(a)],a);return n.buffer}(o),t}}re.URL_SCHEME="localstorage://";const oe=e=>{return(0,m._K)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(re.URL_SCHEME)?(t=e.slice(re.URL_SCHEME.length),new re(t)):null;var t};L.registerSaveRouter(oe),L.registerLoadRouter(oe);class se{constructor(){(0,v.vA)((0,m._K)().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),(0,v.vA)("undefined"===typeof window||"undefined"!==typeof window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=X+Y,n=Y+Z;for(let a=0;a<this.LS.length;++a){const r=this.LS.key(a);if(r.startsWith(t)&&r.endsWith(n)){e[ae(r)]=JSON.parse(this.LS.getItem(r))}}return e}async removeModel(e){var t;const n=te(e=(t=e).startsWith(re.URL_SCHEME)?t.slice(re.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error("Cannot find model at path '".concat(e,"'"));const a=JSON.parse(this.LS.getItem(n.info));return ne(n),a}}const ie="://";class ce{constructor(){this.managers={}}static getInstance(){return null==ce.instance&&(ce.instance=new ce),ce.instance}static registerManager(e,t){(0,v.vA)(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(ie)&&(e=e.slice(0,e.indexOf(ie))),(0,v.vA)(e.length>0,(()=>"scheme must not be an empty string."));const n=ce.getInstance();(0,v.vA)(null==n.managers[e],(()=>"A model store manager is already registered for scheme '".concat(e,"'."))),n.managers[e]=t}static getManager(e){const t=ce.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}static getSchemes(){return Object.keys(ce.getInstance().managers)}}function le(e){if(-1===e.indexOf(ie))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(ce.getSchemes().join(",")));return{scheme:e.split(ie)[0],path:e.split(ie)[1]}}async function ue(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,v.vA)(e!==t,(()=>"Old path and new path are the same: '".concat(e,"'")));const a=L.getLoadHandlers(e);(0,v.vA)(a.length>0,(()=>"Copying failed because no load handler is found for source URL ".concat(e,"."))),(0,v.vA)(a.length<2,(()=>"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(e,".")));const r=a[0],o=L.getSaveHandlers(t);(0,v.vA)(o.length>0,(()=>"Copying failed because no save handler is found for destination "+"URL ".concat(t,"."))),(0,v.vA)(o.length<2,(()=>"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(t,".")));const s=o[0],i=le(e).scheme,c=le(e).path,l=i===le(e).scheme,u=await r.load();n&&l&&await ce.getManager(i).removeModel(c);const h=await s.save(u);return n&&!l&&await ce.getManager(i).removeModel(c),h.modelArtifactsInfo}async function he(){const e=ce.getSchemes(),t={};for(const n of e){const e=await ce.getManager(n).listModels();for(const a in e){t[n+ie+a]=e[a]}}return t}async function de(e){const t=le(e);return ce.getManager(t.scheme).removeModel(t.path)}async function pe(e,t){return ue(e,t,!1)}async function fe(e,t){return ue(e,t,!0)}class me{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){window&&(0,m._K)().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}}),!0))):setTimeout(e,t)}}if((0,m._K)().get("IS_BROWSER")){(0,m._K)().setPlatform("browser",new me);try{ce.registerManager(re.URL_SCHEME,new se)}catch(Gn){}try{ce.registerManager(H.URL_SCHEME,new q)}catch(Gn){}}const ge=()=>n(5817);let ye;class be{constructor(){this.util=n(8590),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=(0,m._K)().global.fetch?(0,m._K)().global.fetch(e,t):(null==ye&&(ye=ge()),ye(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}(0,m._K)().get("IS_NODE")&&!(0,m._K)().get("IS_BROWSER")&&(0,m._K)().setPlatform("node",new be);var ve=n(259),xe=n(7794),we=n(9820),ke=n(6574),Se=n(9494);(0,u.Ye)();const Ie={buffer:ve.r,cast:xe.w,clone:we.o,print:ke.y};(0,Se.Q5)(Ie);function Te(e){return new Promise((e=>setTimeout(e))).then(e)}class Ce{constructor(e){if(!(0,m._K)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Ce.URL_SCHEME)&&(e=e.slice(Ce.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=R(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),a=window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"application/json"})),r=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(r.download=this.modelJsonFileName,r.href=a,await Te((()=>r.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await Te((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:O(e)}}}}Ce.URL_SCHEME="downloads://";class Ee{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(e));this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise(((e,t)=>{const n=new FileReader;n.onload=n=>{const a=JSON.parse(n.target.result),r=a.modelTopology;if(null==r)return void t(new Error("modelTopology field is missing from file ".concat(this.jsonFile.name)));if(null==a.weightsManifest)return void t(new Error("weightManifest field is missing from file ".concat(this.jsonFile.name)));if(0===this.weightsFiles.length)return void e({modelTopology:r});const o=_(a,(e=>this.loadWeights(e)));e(o)},n.onerror=e=>t("Failed to read model topology and weights manifest JSON "+"from file '".concat(this.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only."),n.readAsText(this.jsonFile)}))}loadWeights(e){const t=[],n=[];for(const o of e)t.push(...o.weights),n.push(...o.paths);const a=this.checkManifestAndWeightFiles(e),r=n.map((e=>this.loadWeightsFile(e,a[e])));return Promise.all(r).then((e=>[t,E(e)]))}loadWeightsFile(e,t){return new Promise(((n,a)=>{const r=new FileReader;r.onload=e=>{const t=e.target.result;n(t)},r.onerror=t=>a("Failed to weights data from file of path '".concat(e,"'.")),r.readAsArrayBuffer(t)}))}checkManifestAndWeightFiles(e){const t=[],n=this.weightsFiles.map((e=>N(e.name))),a={};for(const r of e)r.paths.forEach((e=>{const r=N(e);if(-1!==t.indexOf(r))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(r,"'"));if(t.push(r),-1===n.indexOf(r))throw new Error("Weight file with basename '".concat(r,"' is not provided."));a[e]=this.weightsFiles[n.indexOf(r)]}));if(t.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(t.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return a}}function Ne(e){return new Ee(e)}function Re(e,t,n,a){!function(e){(0,v.vA)(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){(0,v.vA)(e>=0&&e<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e))),(0,v.vA)(t>=0&&t<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t))),(0,v.vA)(t>=e,(()=>"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)))}(n=null==n?0:n,a=null==a?1:a);let r=0;return Promise.all(e.map((o=>(o.then((o=>{const s=n+ ++r/e.length*(a-n);return t(s),o})),o))))}async function Ae(e,t){null==t&&(t={});const n=null==t.fetchFunc?(0,m._K)().platform.fetch:t.fetchFunc,a=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),r=(null==t.onProgress?await Promise.all(a):await Re(a,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(r):await Re(r,t.onProgress,.5,1)}async function _e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return Oe((e=>Ae(e,{requestInit:a})))(e,t,n)}function Oe(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;const r=t.map((()=>!1)),o={},s=null!=a?a.map((()=>!1)):[],i=[];if(t.forEach(((e,t)=>{let n=0;e.weights.forEach((e=>{const c="quantization"in e?e.quantization.dtype:e.dtype,l=x[c]*v.Ze(e.shape),u=()=>{r[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=a?a.forEach(((t,n)=>{t===e.name&&(u(),s[n]=!0)})):u(),i.push(e.name),n+=l}))})),!s.every((e=>e))){const e=a.filter(((e,t)=>!s[t]));throw new Error("Could not find weights in manifest with names: "+"".concat(e.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(i.join(", "),"."))}const c=r.reduce(((e,t,n)=>(t&&e.push(n),e)),[]),l=[];c.forEach((e=>{t[e].paths.forEach((e=>{const t=n+(n.endsWith("/")?"":"/")+e;l.push(t)}))}));const u=await e(l),h={};let d=0;return c.forEach((e=>{const n=t[e].paths.length;let a=0;for(let t=0;t<n;t++)a+=u[d+t].byteLength;const r=new ArrayBuffer(a),s=new Uint8Array(r);let i=0;for(let t=0;t<n;t++){const e=new Uint8Array(u[d+t]);s.set(e,i),i+=e.byteLength}o[e].forEach((e=>{const t=S(r.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const n in t)h[n]=t[n]})),d+=n})),h}}L.registerSaveRouter((e=>(0,m._K)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ce.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new Ce(e)}(e.slice(Ce.URL_SCHEME.length)):null));class Fe{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?((0,v.vA)("function"===typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=(0,m._K)().platform.fetch,(0,v.vA)(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&(0,v.vA)(2===e.length,(()=>"URL paths for http must have a length of 2, "+"(actual length is ".concat(e.length,")."))),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=R(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin");const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:O(e),responses:[a]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(a.status,"."))}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(e.status,". Please verify this URL points to ")+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(r){let e="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const n=t.modelTopology,a=t.weightsManifest;if(null==n&&null==a)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return _(t,(e=>this.loadWeights(e)))}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,a]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),a=e.substring(0,t),r=n>t?e.substring(n):"";return[a+"/",r]}(t),r=this.weightPathPrefix||n,o=F(e),s=[],i=[];for(const c of e)for(const e of c.paths)null!=this.weightUrlConverter?i.push(this.weightUrlConverter(e)):s.push(r+e+a);this.weightUrlConverter&&s.push(...await Promise.all(i));return[o,E(await Ae(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress}))]}}function De(e){return null!=e.match(Fe.URL_SCHEME_REGEX)}Fe.URL_SCHEME_REGEX=/^https?:\/\//;const Le=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>De(e))):De(e),n)return Me(e,t)}return null};function Me(e,t){return new Fe(e,t)}function Pe(e,t){return Me(e,t)}L.registerSaveRouter(Le),L.registerLoadRouter(Le);class ze{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class Be{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class We{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function Ue(e,t,n,a){return new We(Ve(...arguments))}function Ve(e,t,n,a){if(1===arguments.length){return null!=e.modelTopology||null!=e.weightSpecs?new ze(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ze({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ze({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:a})}function Ge(e){return new Be(e)}function je(e){return new Be(e)}var He=n(8805),Ke=n(9554),qe=n(843),Ye=n(4148),Xe=n(7892),Ze=n(5395);let Qe;function Je(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,a=!1,r=!1,o=!1,s=!1,i=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)a=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)r=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)o=!0;else if(null!=e.getContext)s=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));i=!0}if(null!=(0,qe._5)(Ke.awo,u.T2.backendName)){const n={pixels:e},a={numChannels:t};return u.T2.runKernel(Ke.awo,n,a)}const[c,l]=r?[e.videoWidth,e.videoHeight]:[e.width,e.height];let h,d;if(s)h=e.getContext("2d").getImageData(0,0,c,l).data;else if(a||n)h=e.data;else if(o||r||i){if(null==Qe)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Qe=new OffscreenCanvas(1,1).getContext("2d")}else Qe=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Qe.canvas.width=c,Qe.canvas.height=l,Qe.drawImage(e,0,0,c,l),h=Qe.getImageData(0,0,c,l).data}if(4===t)d=new Int32Array(h);else{const e=c*l;d=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)d[n*t+e]=h[4*n+e]}const p=[l,c,t];return(0,Ze.$)(d,p,"int32")}function $e(e){return"undefined"!==typeof window&&"undefined"!==typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}async function et(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=null;if((0,m._K)().getBool("WRAP_TO_IMAGEBITMAP")&&$e(e)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(a){t=null}n=null!=t&&t.width===e.width&&t.height===e.height?t:e}else n=e;return Je(n,t)}async function tt(e,t){let n=(0,Ye.YT)(e,"img","toPixels");if(!(e instanceof Se.qY)){const e=n;n=(0,xe.w)(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(n.rank,"."));const[a,r]=n.shape.slice(0,2),o=2===n.rank?1:n.shape[2];if(o>4||2===o)throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(o));if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error("Unsupported type for toPixels: ".concat(n.dtype,".")+" Please use float32 or int32 tensors.");const s=await n.data(),i="float32"===n.dtype?255:1,c=new Uint8ClampedArray(r*a*4);for(let l=0;l<a*r;++l){const e=[0,0,0,255];for(let a=0;a<o;a++){const t=s[l*o+a];if("float32"===n.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(t,"."))}else if("int32"===n.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(t,"."));1===o?(e[0]=t*i,e[1]=t*i,e[2]=t*i):e[a]=t*i}const t=4*l;c[t+0]=Math.round(e[0]),c[t+1]=Math.round(e[1]),c[t+2]=Math.round(e[2]),c[t+3]=Math.round(e[3])}if(null!=t){t.width=r,t.height=a;const e=t.getContext("2d"),n=new ImageData(c,r,a);e.putImageData(n,0,0)}return n!==e&&n.dispose(),c}const nt=(0,Xe.op)({fromPixels_:Je}),at=-2,rt=-1;function ot(e,t,n){const a=e.shape.length;v.vA(a===t.length,(()=>"Error in slice".concat(a,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(a,")."))),v.vA(a===n.length,(()=>"Error in slice".concat(a,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(a,").")));for(let r=0;r<a;++r)v.vA(t[r]+n[r]<=e.shape[r],(()=>"Error in slice".concat(a,"D: begin[").concat(r,"] + size[").concat(r,"] ")+"(".concat(t[r]+n[r],") would overflow input.shape[").concat(r,"] (").concat(e.shape[r],")")))}function st(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function it(e,t,n){const a=[];for(let r=0;r<e.length;r++)a[r]=Math.ceil((t[r]-e[r])/n[r]);return a}function ct(e,t,n,a){const r=[...e];for(let o=r.length;o<a.length;o++)r.push(1);for(let o=0;o<n;o++)0===o?r[t]=1:(r.splice(t,0,1),r.pop());return r}function lt(e,t,n){return n<=e?n:n-(t-1)}function ut(e,t){const n=[];for(let a=0;a<e;a++)n.push(t+a);return n}function ht(e,t,n,a,r,o,s,i,c){const l=e.length;let u=new Array(l),h=new Array(l),d=new Array(l);if(t.length&&n>0){const c=t[0],l=n+1;u=dt(s,c,l,a,e),h=pt(i,c,l,r,e),d=ct(o,c,l,e)}else for(let p=0;p<l;p++)u[p]=mt(s,a,o,e,p,c),h[p]=gt(i,r,o,e,p,c),d[p]=ft(o,p,c);return{begin:u,end:h,strides:d}}function dt(e,t,n,a,r){const o=[...r],s=ut(n,t);for(let i=0;i<o.length;i++)if(s.indexOf(i)>-1)o[i]=0;else{const r=lt(t,n,i);let s=a[r];e&1<<r&&(s=0),o[i]=s}return o}function pt(e,t,n,a,r){const o=[...r],s=ut(n,t);for(let i=0;i<o.length;i++)if(s.indexOf(i)>-1)o[i]=Number.MAX_SAFE_INTEGER;else{const r=lt(t,n,i);let s=a[r];e&1<<r&&(s=Number.MAX_SAFE_INTEGER),o[i]=s}for(let i=0;i<o.length;i++){const e=r[i];o[i]<0&&(o[i]+=e),o[i]=v.qE(0,o[i],r[i])}return o}function ft(e,t,n){let a=e[t];return(n&1<<t||null==a)&&(a=1),a}function mt(e,t,n,a,r,o){let s=t[r];const i=n[r]||1;(e&1<<r||o&1<<r||null==s)&&(s=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const c=a[r];return s<0&&(s+=c),s=v.qE(0,s,c-1),s}function gt(e,t,n,a,r,o){let s=t[r];const i=n[r]||1;(e&1<<r||o&1<<r||null==s)&&(s=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const c=a[r];return s<0&&(s+=c),s=i>0?v.qE(0,s,c):v.qE(-1,s,c-1),s}function yt(e,t,n){let a=n.length;for(let r=0;r<n.length;r++)if(n[r]>1){a=r;break}for(let r=a+1;r<n.length;r++)if(t[r]>0||n[r]!==e[r])return!1;return!0}function bt(e,t){let n=e.length>0?e[e.length-1]:1;for(let a=0;a<e.length-1;a++)n+=e[a]*t[a];return n}function vt(e,t,n){let a;const r=e.shape.length;let o;return a="number"===typeof t?[t,...new Array(r-1).fill(0)]:t.length<r?t.concat(new Array(r-t.length).fill(0)):t.slice(),a.forEach((e=>{v.vA(-1!==e,(()=>"slice() does not support negative begin indexing."))})),o=null==n?new Array(r).fill(-1):"number"===typeof n?[n,...new Array(r-1).fill(-1)]:n.length<r?n.concat(new Array(r-n.length).fill(-1)):n,o=o.map(((t,n)=>t>=0?t:(v.vA(-1===t,(()=>"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,"."))),e.shape[n]-a[n]))),[a,o]}function xt(e,t,n,a,r,o,s,i,c){let l;if(null==a?(l=new Array(t.length),l.fill(1)):l=a,null!=s&&0!==(s&s-1))throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const h={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:l.slice(),beginMask:r,endMask:o,ellipsisMask:s,newAxisMask:i,shrinkAxisMask:c};for(let b=0;b<h.dims;b++)u&&0!==(1<<b&i)&&h.numAddAxisAfterEllipsis++,1<<b&s&&(u=!0);u||(h.ellipsisMask|=1<<h.dims,h.dims++);const d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let a=0;a<e.dims;a++)if(1<<a&e.ellipsisMask){const r=Math.min(t.dims-(e.dims-a)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<r;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=a}else if(1<<a&e.newAxisMask)t.finalShapeGatherIndices.push(at),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[a]),null!=e.end&&(t.end[n]=e.end[a]),t.strides[n]=e.strides[a],e.beginMask&1<<a&&(t.beginMask|=1<<n),e.endMask&1<<a&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<a?(t.finalShapeGatherIndices.push(rt),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(a)),t.inputShapeGatherIndicesSparse[n]=a,n++}}(h,d);let p=!0,f=!0,m=!0;const g=[],y=[];for(let b=0;b<e.length;++b){if(0===d.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));const t=!!(d.shrinkAxisMask&1<<b),n=e[b];if(-1===n){g.push(t?1:-1);continue}const a=[d.beginMask&1<<b,d.endMask&1<<b],r=[d.strides[b]>0?0:-1,d.strides[b]>0?n:n-1];if(t&&d.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===d.strides[b];const o=!!(d.beginMask&1<<b&&d.endMask&1<<b);if(d.beginValid&&d.endValid){if(t){const e=d.begin[b]<0?n+d.begin[b]:d.begin[b];if(d.begin[b]=e,d.end[b]=d.begin[b]+1,e<0||e>=n)throw Error("slice index ".concat(d.begin[b]," of dimension ").concat(b," out of bounds."))}else d.begin[b]=wt(d.begin[b],0,d.strides[b],n,a,r),d.end[b]=wt(d.end[b],1,d.strides[b],n,a,r);const e=1===d.strides[b]&&0===d.begin[b]&&d.end[b]===n;p=p&&e,f=f&&(0===b&&1===d.strides[b]||e)}else p=p&&1===d.strides[b]&&o,f=f&&(0===b&&1===d.strides[b]||o);let s,i=!1;if(d.beginValid&&d.endValid?(s=d.end[b]-d.begin[b],i=!0):t?(s=1,i=!0):o&&n>=0&&(s=d.strides[b]<0?-n:n,i=!0),i){let e;e=0===s||s<0!==d.strides[b]<0?0:Math.trunc(s/d.strides[b])+(s%d.strides[b]!==0?1:0),g.push(e)}else g.push(-1)}for(let b=0;b<d.finalShapeGatherIndices.length;++b){const e=d.finalShapeGatherIndices[b];e>=0?y.push(g[e]):e===at&&y.push(1)}return{finalShapeSparse:y.filter(((e,t)=>d.finalShapeGatherIndices[t]!==at)),finalShape:y,isIdentity:p,sliceDim0:f,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function wt(e,t,n,a,r,o){if(r[t])return n>0?o[t]:o[t+1&1];{const t=e<0?a+e:e;return t<o[0]?o[0]:t>o[1]?o[1]:t}}var kt=n(8977),St=n(8075),It=n(9650),Tt=n(8046);const Ct="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e();function Et(){return new Promise((e=>Ct((()=>e()))))}var Nt=n(9235);function Rt(e,t){const n=e[0].length;e.forEach(((e,t)=>{v.vA(e.length===n,(()=>"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")))})),v.vA(t>=0&&t<n,(()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")));const a=e[0];e.forEach(((e,r)=>{for(let o=0;o<n;o++)v.vA(o===t||e[o]===a[o],(()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(r,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(a,") ")+"along the non-concatenated axis ".concat(r,".")))}))}function At(e,t){const n=e[0].slice();for(let a=1;a<e.length;a++)n[t]+=e[a][t];return n}var _t,Ot=n(7538),Ft=n(7905);function Dt(e,t,n){let a=new Array;if(null==n&&null==t)return a;if(null==t)for(;a.length<e+n.length;)a.push(-1);else a=t.slice();if(null==n)return a;if(e+n.length!==a.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(a.length));for(let r=1;r<n.length;++r){const o=n[r],s=a[a.length-n.length+r],i=a[s];if(o>=0)if(i>=0){if(i!==o)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(r+e,"] = ").concat(o," but shape[").concat(r+e,"] = ").concat(i))}else a[s]=o}return a}function Lt(e){const t={FIRST_DIM_SIZE:_t.FIRST_DIM_SIZE,VALUE_ROWIDS:_t.VALUE_ROWIDS,ROW_LENGTHS:_t.ROW_LENGTHS,ROW_SPLITS:_t.ROW_SPLITS,ROW_LIMITS:_t.ROW_LIMITS,ROW_STARTS:_t.ROW_STARTS},n=[];for(const a of e){if(!(a in t))break;n.push(t[a])}return n}function Mt(e){return 0===e.length?0:e[0]===_t.FIRST_DIM_SIZE?e.length-1:e.length}function Pt(e,t){if(null==e||null==t)return;const n=e.length,a=t.length;if(n>=a)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(a,")"));for(let r=0;r<Math.min(n,a-1);++r){const n=e[r],a=t[r+1];if(n>=0&&a>=0&&1!==n&&n!==a)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(r-e.length,"] = ").concat(n," but ragged tensor input.flatValues.shape[").concat(r-e.length,"] = ").concat(a))}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(_t||(_t={}));const zt=30;function Bt(e){return e<=zt?e:(0,v.lK)(e,Math.floor(Math.sqrt(e)))}function Wt(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function Ut(e,t,n){let a=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)a=a.concat([e[r+1]/t[r],t[r]]);a=a.concat(e.slice(n+1))}return a}function Vt(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let a=t+1;a<e;++a)a<=2*t?(n.push(a),n.push(a-(t+1))):n.push(a)}else{const a=[],r=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?r.push(n):a.push(n);n.push(...a),n.push(0),n.push(...r)}return n}function Gt(e,t,n){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=[];a?r.push(e[0]/n):r.push(e[0]*n);for(let o=1;o<e.length;++o)o<=t.length?a?r.push(t[o-1]*e[o]):r.push(e[o]/t[o-1]):r.push(e[o]);return r}function jt(e,t){const n=[0];for(let a=0;a<t;++a)n.push(e[a][0]);return n}function Ht(e,t,n){const a=e.slice(0,1);for(let r=0;r<n;++r)a.push(e[r+1]-t[r][0]-t[r][1]);return a}function Kt(e,t){const n=e.shape.length,a=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(a<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(a,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[a-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[a-1]," vs. ").concat(n));if(0===(0,v.Ze)(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));const r=t.shape,o=r[r.length-1];let s=1;for(let h=0;h<r.length-1;++h)s*=r[h];const i=e.shape,c=r.slice();c.pop();let l=1;for(let h=o;h<n;++h)l*=i[h],c.push(i[h]);const u=[...(0,v.Ur)(e.shape).map((e=>e/l)),1].slice(0,o);return[c,s,l,u]}var qt=n(4083);const Yt=1.7580993408473768,Xt=1.0507009873554805,Zt=.3275911,Qt=.254829592,Jt=-.284496736,$t=1.421413741,en=-1.453152027,tn=1.061405429;var nn=n(4124);function an(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));const n=new Float32Array(2*e.length);for(let a=0;a<n.length;a+=2)n[a]=e[a/2],n[a+1]=t[a/2];return n}function rn(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let a=0;a<e.length;a+=2)t[a/2]=e[a],n[a/2]=e[a+1];return{real:t,imag:n}}function on(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),a=new Float32Array(t);for(let r=0;r<e.length;r+=4)n[Math.floor(r/4)]=e[r],a[Math.floor(r/4)]=e[r+1];return{real:n,imag:a}}function sn(e){const t=Math.floor(e.length/4),n=new Float32Array(t),a=new Float32Array(t);for(let r=2;r<e.length;r+=4)n[Math.floor(r/4)]=e[r],a[Math.floor(r/4)]=e[r+1];return{real:n,imag:a}}function cn(e,t){return{real:e[2*t],imag:e[2*t+1]}}function ln(e,t,n,a){e[2*a]=t,e[2*a+1]=n}function un(e,t){const n=new Float32Array(e/2),a=new Float32Array(e/2);for(let r=0;r<Math.ceil(e/2);r++){const o=(t?2:-2)*Math.PI*(r/e);n[r]=Math.cos(o),a[r]=Math.sin(o)}return{real:n,imag:a}}function hn(e,t,n){const a=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(a),imag:Math.sin(a)}}const dn="->",pn=/->/g,fn=",",mn="...";function gn(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(pn,"").length)/dn.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(dn,'").'));const[a,r]=e.split(dn);(0,v.vA)(-1===a.indexOf(mn),(()=>'The ellipsis notation ("'.concat(mn,'") is not supported yet.')));const o=a.split(fn),s=o.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const i=[];for(let h=0;h<r.length;++h){const e=r[h];if(!o.some((t=>-1!==t.indexOf(e))))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===i.indexOf(e)&&i.push(e)}for(let h=0;h<a.length;++h){const e=a[h];-1===i.indexOf(e)&&e!==fn&&i.push(e)}const c=new Array(o.length);for(let h=0;h<s;++h){if(new Set(o[h].split("")).size!==o[h].length)throw new Error("Found duplicate axes in input component ".concat(o[h],". ")+"Support for duplicate axes in input is not implemented yet.");c[h]=[];for(let e=0;e<o[h].length;++e)c[h].push(i.indexOf(o[h][e]))}const l=i.length,u=[];for(let h=r.length;h<l;++h)u.push(h);return{allDims:i,summedDims:u,idDims:c}}function yn(e,t){let n=new Array(e);n.fill(-1);for(let r=0;r<t.length;++r)n[t[r]]=r;const a=[];for(let r=0;r<e;++r)-1===n[r]&&a.push(r);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:a}}function bn(e,t,n){const a=new Array(e);for(let r=0;r<n.length;++r){const e=n[r].shape;for(let n=0;n<t[r].length;++n)void 0===a[t[r][n]]?a[t[r][n]]=e[n]:(0,v.vA)(a[t[r][n]]===e[n],(()=>"Expected dimension ".concat(a[t[r][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(e),", ")+"but got dimension ".concat(e[n])))}}function vn(e,t){const n=e,a=[];let r=0;0===e.length&&n.push(-1),r=e.length+1;for(let s=0;s<r;++s)a.push([]);const o=[];for(let s=0;s<n.length;++s){const e=wn(t,n[s]);for(const t of e)-1===o.indexOf(t)&&(a[s].push(t),o.push(t))}return{path:n,steps:a}}function xn(e){return e.every(((e,t)=>e===t))}function wn(e,t){const n=[];for(let a=0;a<e.length;++a)0!==e[a].length&&-1===e[a].indexOf(t)&&-1!==t||n.push(a);return n}function kn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=[];if("number"===typeof t)(0,v.vA)(e.shape[n]%t===0,(()=>"Number of splits must evenly divide the axis.")),a=new Array(t).fill(e.shape[n]/t);else{const r=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);(0,v.vA)(r<=1,(()=>"There should be only one negative value in split array."));const o=t.indexOf(-1);if(-1!==o){const a=t.reduce(((e,t)=>t>0?e+t:e));t[o]=e.shape[n]-a}(0,v.vA)(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),a=t}return a}function Sn(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function In(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function Tn(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function Cn(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function En(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function Nn(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Rn(e,t){const n=(0,v.Ze)(e),a=(0,v.Ze)(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(a,". inputShape=").concat(e," outputShape= ").concat(t)}function An(e,t){const n=(0,v.Ze)(e),a=(0,v.Ze)(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(a,". inputShape=").concat(e," outputShape=").concat(t)}function _n(){return"segment ids must be >= 0"}function On(){return"segment ids are not increasing"}function Fn(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function Dn(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function Ln(e,t){let n,a=!1;for(e<=zt?(n=e,a=!0):n=(0,v.lK)(e,Math.floor(Math.sqrt(e)));!a;)n>t||n===e?a=!0:n=(0,v.lK)(e,n+1);return n}function Mn(e,t,n){const a=[],r=e.length;for(let o=0;o<r;o++)o!==t?a.push(e[o]):a.push(n);return a}function Pn(e,t,n,a){const r=t.shape.length,o=e.shape.length;if(0!==a&&(a<-r||a>r))throw new Error("Expect batchDims in the range of [-".concat(r,", ").concat(r,"], but got ").concat(a));if(a<0&&(a+=r),a>o)throw new Error("batchDims (".concat(a,") must be less than rank(x) (\n    ").concat(o,")."));if(n<a)throw new Error("batchDims (".concat(a,") must be less than or equal to axis (").concat(n,")."));for(let h=0;h<a;++h)if(e.shape[h]!==t.shape[h])throw new Error("x.shape[".concat(h,"]: ").concat(e.shape[h]," should be equal to indices.shape[").concat(h,"]: ").concat(t.shape[h],"."));const s=e.shape[n],i=[];let c=1,l=1,u=1;for(let h=0;h<a;++h)i.push(e.shape[h]),c*=e.shape[h];for(let h=a;h<n;h++)i.push(e.shape[h]),l*=e.shape[h];for(let h=a;h<r;h++)i.push(t.shape[h]);for(let h=n+1;h<o;h++)i.push(e.shape[h]),u*=e.shape[h];return{batchSize:c,sliceSize:u,outerSize:l,dimSize:s,outputShape:i}}function zn(e){try{return e.map((e=>(0,kt.decodeString)(e)))}catch(Gn){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(Gn))}}function Bn(e){return e.map((e=>(0,kt.encodeString)(e)))}var Wn=n(6692),Un=n(9286),Vn=n(6790)},9554:(e,t,n)=>{"use strict";n.d(t,{$dB:()=>A,$jE:()=>Gt,$zE:()=>R,A1h:()=>D,A8B:()=>At,BK4:()=>an,BLA:()=>Ve,BRl:()=>ee,Blb:()=>_t,BoJ:()=>Dt,BxF:()=>se,C8s:()=>Ft,Cg$:()=>Te,CwD:()=>ke,D7i:()=>mt,Ddj:()=>zt,Dr:()=>rn,DvZ:()=>Mt,E3$:()=>be,EkD:()=>i,ElG:()=>ce,EwU:()=>Qt,FAs:()=>qt,FCQ:()=>pt,FSt:()=>l,Fin:()=>Et,Ik2:()=>k,J3C:()=>It,JiE:()=>kt,Jp_:()=>u,KXH:()=>T,L6G:()=>Lt,LDN:()=>Oe,LG0:()=>We,LRy:()=>st,LWX:()=>Ze,LXA:()=>Ne,M6A:()=>Bt,MRQ:()=>U,Mn0:()=>P,MnK:()=>z,N4F:()=>S,Ncv:()=>tt,O4G:()=>he,OAQ:()=>me,ODT:()=>$e,OMN:()=>s,ORI:()=>q,PH8:()=>o,P_L:()=>ft,Pah:()=>Q,PbM:()=>jt,Q6t:()=>ot,QDP:()=>C,QKF:()=>d,Qgm:()=>Z,R23:()=>lt,RUm:()=>Ce,RXX:()=>De,SDM:()=>qe,SQl:()=>oe,T7M:()=>sn,TBb:()=>Yt,TL8:()=>Pe,TMz:()=>G,TOR:()=>yt,ToN:()=>Ae,TyE:()=>f,UcO:()=>Wt,VAI:()=>_e,VCH:()=>b,Vvy:()=>r,WT3:()=>Ge,WuN:()=>Rt,X$8:()=>H,X0$:()=>xe,XQy:()=>ht,XhZ:()=>de,YAb:()=>Ut,YVe:()=>Tt,ZgB:()=>ie,Zl4:()=>Ye,_s9:()=>$,aAr:()=>on,awo:()=>nn,cHb:()=>Me,cS:()=>v,dFH:()=>Nt,dLy:()=>Xt,dXR:()=>Jt,dv8:()=>ge,e0f:()=>Xe,epO:()=>p,fUj:()=>ct,g5A:()=>ze,gC7:()=>M,gIW:()=>ye,hVg:()=>gt,hgw:()=>dt,ho8:()=>y,hql:()=>St,huO:()=>it,i5R:()=>le,iGz:()=>L,iPs:()=>ve,iW0:()=>Vt,iuW:()=>Kt,jAQ:()=>w,jM4:()=>Re,jOE:()=>ut,jfg:()=>F,jgd:()=>Pt,jj_:()=>B,jxD:()=>Y,kdj:()=>nt,l0G:()=>He,l6P:()=>xt,lLS:()=>pe,lNG:()=>Be,ljI:()=>a,lxb:()=>g,lzr:()=>fe,mH5:()=>rt,mIA:()=>we,mM$:()=>Je,mnI:()=>Se,mxL:()=>ue,nVu:()=>K,nY8:()=>W,nZd:()=>Ee,oFs:()=>Ht,oJ2:()=>at,ox3:()=>te,p2J:()=>_,pJc:()=>bt,pPe:()=>$t,p_m:()=>h,pnw:()=>tn,pr3:()=>N,pyJ:()=>et,rFG:()=>Ot,rFm:()=>O,rGP:()=>re,rsH:()=>J,sDr:()=>X,t3d:()=>Fe,tG8:()=>Ie,tGH:()=>j,u$b:()=>wt,u8Z:()=>c,uWl:()=>vt,urI:()=>Qe,vI1:()=>Ct,vaV:()=>E,vj7:()=>I,wNW:()=>V,wwC:()=>x,wx0:()=>Zt,x7F:()=>Ue,xJ3:()=>en,xu7:()=>je,ySp:()=>Le,ybN:()=>ne,ybj:()=>ae,ylV:()=>Ke,zP9:()=>m});const a="Abs",r="Acos",o="Acosh",s="Add",i="AddN",c="All",l="Any",u="ArgMax",h="ArgMin",d="Asin",p="Asinh",f="Atan",m="Atanh",g="Atan2",y="AvgPool",b="AvgPoolGrad",v="AvgPool3D",x="AvgPool3DGrad",w="BatchMatMul",k="BatchToSpaceND",S="Bincount",I="BroadcastArgs",T="Cast",C="Ceil",E="ClipByValue",N="Complex",R="ComplexAbs",A="Concat",_="Conv2D",O="Conv2DBackpropFilter",F="Conv2DBackpropInput",D="Conv3D",L="Conv3DBackpropFilterV2",M="Conv3DBackpropInputV2",P="Cos",z="Cosh",B="Cumprod",W="Cumsum",U="CropAndResize",V="DenseBincount",G="DepthToSpace",j="DepthwiseConv2dNative",H="DepthwiseConv2dNativeBackpropFilter",K="DepthwiseConv2dNativeBackpropInput",q="Diag",Y="Dilation2D",X="RealDiv",Z="Einsum",Q="Elu",J="EluGrad",$="Erf",ee="Equal",te="Exp",ne="ExpandDims",ae="Expm1",re="FFT",oe="Fill",se="FlipLeftRight",ie="Floor",ce="FloorDiv",le="FusedBatchNorm",ue="GatherV2",he="GatherNd",de="Greater",pe="GreaterEqual",fe="Identity",me="IFFT",ge="Imag",ye="IsFinite",be="IsInf",ve="IsNan",xe="LeakyRelu",we="Less",ke="LessEqual",Se="LinSpace",Ie="Log",Te="Log1p",Ce="LogicalAnd",Ee="LogicalNot",Ne="LogicalOr",Re="LRN",Ae="LRNGrad",_e="Max",Oe="Maximum",Fe="MaxPool",De="MaxPoolGrad",Le="MaxPool3D",Me="MaxPool3DGrad",Pe="MaxPoolWithArgmax",ze="Mean",Be="Min",We="Minimum",Ue="MirrorPad",Ve="Mod",Ge="Multinomial",je="Multiply",He="Neg",Ke="NotEqual",qe="NonMaxSuppressionV3",Ye="NonMaxSuppressionV4",Xe="NonMaxSuppressionV5",Ze="OnesLike",Qe="OneHot",Je="Pack",$e="PadV2",et="Pow",tt="Prelu",nt="Prod",at="RaggedGather",rt="RaggedTensorToTensor",ot="Range",st="Real",it="Reciprocal",ct="Relu",lt="Reshape",ut="ResizeNearestNeighbor",ht="ResizeNearestNeighborGrad",dt="ResizeBilinear",pt="ResizeBilinearGrad",ft="Relu6",mt="Reverse",gt="Round",yt="Rsqrt",bt="ScatterNd",vt="SearchSorted",xt="Select",wt="Selu",kt="Slice",St="Sin",It="Sinh",Tt="Sign",Ct="Sigmoid",Et="Softplus",Nt="Sqrt",Rt="Sum",At="SpaceToBatchND",_t="SplitV",Ot="Softmax",Ft="SparseFillEmptyRows",Dt="SparseReshape",Lt="SparseSegmentMean",Mt="SparseSegmentSum",Pt="SparseToDense",zt="SquaredDifference",Bt="Square",Wt="StridedSlice",Ut="StringNGrams",Vt="StringSplit",Gt="StringToHashBucketFast",jt="Sub",Ht="Tan",Kt="Tanh",qt="Tile",Yt="TopK",Xt="Transform",Zt="Transpose",Qt="Unique",Jt="Unpack",$t="UnsortedSegmentSum",en="ZerosLike",tn="Step",nn="FromPixels",an="RotateWithOffset",rn="_FusedMatMul",on="FusedConv2D",sn="FusedDepthwiseConv2D"},843:(e,t,n)=>{"use strict";n.d(t,{Op:()=>l,_5:()=>i,tA:()=>u,vQ:()=>c});var a=n(7926),r=n(4124);const o=(0,a.m)("kernelRegistry",(()=>new Map)),s=(0,a.m)("gradRegistry",(()=>new Map));function i(e,t){const n=h(e,t);return o.get(n)}function c(e){return s.get(e)}function l(e){const t=o.entries(),n=[];for(;;){const{done:a,value:r}=t.next();if(a)break;const[o,s]=r,[i]=o.split("_");i===e&&n.push(s)}return n}function u(e){const{kernelName:t,backendName:n}=e,a=h(t,n);o.has(a)&&r.i("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),o.set(a,e)}function h(e,t){return"".concat(t,"_").concat(e)}},4124:(e,t,n)=>{"use strict";n.d(t,{R:()=>o,i:()=>r});var a=n(5399);function r(){(0,a._K)().getBool("IS_TEST")||(0,a._K)().getBool("PROD")||console.warn(...arguments)}function o(){(0,a._K)().getBool("IS_TEST")||(0,a._K)().getBool("PROD")||console.log(...arguments)}},9235:(e,t,n)=>{"use strict";n.d(t,{Em:()=>l,SM:()=>i,WC:()=>c,WH:()=>r,aF:()=>o,fK:()=>h,gx:()=>u,lb:()=>s});var a=n(1426);function r(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function o(e,t,n){const a=e.length+t.length,r=[];let o=0,s=0;for(let i=0;i<a;i++)-1===n.indexOf(i)?r.push(e[o++]):r.push(t[s++]);return r}function s(e,t){const n=[],a=e.length;for(let r=0;r<a;r++)-1===t.indexOf(r)&&n.push(e[r]);return[n,t.map((t=>e[t]))]}function i(e,t){return o(e,t.map((e=>1)),t)}function c(e,t,n){a.vA(r(t,n),(()=>"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")))}function l(e,t){if(r(e,t))return null;const n=[];for(let a=0;a<t;++a)-1===e.indexOf(a)&&n.push(a);return e.forEach((e=>n.push(e))),n}function u(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function h(e,t){const n=[];for(let a=t-e;a<t;++a)n.push(a);return n}},8805:(e,t,n)=>{"use strict";function a(e,t){const n=e.length,a=[];for(let r=0;r<n;r++){const o=n-1-r,s=e[o]||1;(t[t.length-1-r]||1)>1&&1===s&&a.unshift(o)}return a}function r(e,t){const n=[];for(let a=0;a<t.length;a++){const r=e[e.length-a-1],o=t.length-a-1,s=t[o];(null==r||1===r&&s>1)&&n.unshift(o)}return n}function o(e,t){const n=[],a=Math.max(e.length,t.length);for(let r=0;r<a;r++){let a=e[e.length-r-1];null==a&&(a=1);let o=t[t.length-r-1];if(null==o&&(o=1),1===a)n.unshift(o);else if(1===o)n.unshift(a);else{if(a!==o){const n="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(n)}n.unshift(a)}}return n}n.r(t),n.d(t,{assertAndGetBroadcastShape:()=>o,getBroadcastDims:()=>a,getReductionAxes:()=>r})},259:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var a=n(9494),r=n(1426);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",r.SA(e),new a.yl(e,t,n)}},7794:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var a=n(2164),r=n(9554),o=n(4148),s=n(1426);const i=(0,n(7892).op)({cast_:function(e,t){const n=(0,o.YT)(e,"x","cast");if(!s.xn(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const i={x:n},c={dtype:t};return a.T2.runKernel(r.KXH,i,c)}})},9820:(e,t,n)=>{"use strict";n.d(t,{o:()=>s});var a=n(2164),r=n(9554),o=n(4148);const s=(0,n(7892).op)({clone_:function(e){const t={x:(0,o.YT)(e,"x","clone","string_or_numeric")};return a.T2.runKernel(r.lzr,t)}})},6149:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});var a=n(2164),r=n(9554),o=n(4148),s=n(1426);const i=(0,n(7892).op)({complex_:function(e,t){const n=(0,o.YT)(e,"real","complex"),i=(0,o.YT)(t,"imag","complex");s.O3(n.shape,i.shape,"real and imag shapes, ".concat(n.shape," and ").concat(i.shape,", ")+"must match in call to tf.complex().");const c={real:n,imag:i};return a.T2.runKernel(r.pr3,c)}})},7538:(e,t,n)=>{"use strict";n.d(t,{$Q:()=>g,Dh:()=>f,E6:()=>o,G0:()=>m,G8:()=>l,YQ:()=>r,l5:()=>s,p$:()=>c,s_:()=>y,uf:()=>i});var a=n(1426);function r(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0;return i(e,[...t,e[3]],n,o,a,null,null,g(r))}function o(e,t,n,a,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[c,l]=u(t);let h;if("channelsLast"===s)h=[c,l,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));h=[c,l,e[1],e[1]]}return i(e,h,n,a,r,o,!1,s)}function s(e,t,n,a,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[i,l,u]=h(t);let d,p;if("NDHWC"===s)p="channelsLast",d=[i,l,u,e[4],e[4]];else{if("NCDHW"!==s)throw new Error("Unknown dataFormat ".concat(s));p="channelsFirst",d=[i,l,u,e[1],e[1]]}return c(e,d,n,a,r,!1,p,o)}function i(e,t,n,a,r,o){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[c,h,f,m]=[-1,-1,-1,-1];if("channelsLast"===i)[c,h,f,m]=e;else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));[c,m,h,f]=e}const[g,y,,b]=t,[v,x]=u(n),[w,k]=u(a),S=d(g,w),I=d(y,k),{padInfo:T,outHeight:C,outWidth:E}=function(e,t,n,a,r,o,s,i,c){let u,h,d;if("number"===typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const r=function(e,t,n,a,r){null==a&&(a=l(e,t,n));const o=e[0],s=e[1],i=p((o-t+2*a)/n+1,r),c=p((s-t+2*a)/n+1,r);return[i,c]}([t,n],o,a,e,i);h=r[0],d=r[1]}else if("same"===e){h=Math.ceil(t/a),d=Math.ceil(n/r);const e=Math.max(0,(h-1)*a+o-t),i=Math.max(0,(d-1)*r+s-n),c=Math.floor(e/2),l=e-c,p=Math.floor(i/2);u={top:c,bottom:l,left:p,right:i-p,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},h=Math.ceil((t-o+1)/a),d=Math.ceil((n-s+1)/r);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));{const l="channelsLast"===c?e[1][0]:e[2][0],f="channelsLast"===c?e[1][1]:e[2][1],m="channelsLast"===c?e[2][0]:e[3][0],g="channelsLast"===c?e[2][1]:e[3][1];u={top:l,bottom:f,left:m,right:g,type:0===l&&0===f&&0===m&&0===g?"VALID":"EXPLICIT"},h=p((t-o+l+f)/a+1,i),d=p((n-s+m+g)/r+1,i)}}return{padInfo:u,outHeight:h,outWidth:d}}(r,h,f,v,x,S,I,o,i),N=s?b*m:b;let R;return"channelsFirst"===i?R=[c,N,C,E]:"channelsLast"===i&&(R=[c,C,E,N]),{batchSize:c,dataFormat:i,inHeight:h,inWidth:f,inChannels:m,outHeight:C,outWidth:E,outChannels:N,padInfo:T,strideHeight:v,strideWidth:x,filterHeight:g,filterWidth:y,effectiveFilterHeight:S,effectiveFilterWidth:I,dilationHeight:w,dilationWidth:k,inShape:e,outShape:R,filterShape:t}}function c(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",i=arguments.length>7?arguments[7]:void 0,[c,u,f,m,g]=[-1,-1,-1,-1,-1];if("channelsLast"===s)[c,u,f,m,g]=e;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));[c,g,u,f,m]=e}const[y,b,v,,x]=t,[w,k,S]=h(n),[I,T,C]=h(a),E=d(y,I),N=d(b,T),R=d(v,C),{padInfo:A,outDepth:_,outHeight:O,outWidth:F}=function(e,t,n,a,r,o,s,i,c,u,h){let d,f,m,g;if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const o=function(e,t,n,a,r,o){null==r&&(r=l(e,t,a));const s=e[0],i=e[1],c=e[2],u=p((s-t+2*r)/a+1,o),h=p((i-t+2*r)/a+1,o),d=p((c-t+2*r)/a+1,o);return[u,h,d,n]}([t,n,a,1],i,1,r,e,h);f=o[0],m=o[1],g=o[2]}else if("same"===e){f=Math.ceil(t/r),m=Math.ceil(n/o),g=Math.ceil(a/s);const e=(f-1)*r+i-t,l=(m-1)*o+c-n,h=(g-1)*s+u-a,p=Math.floor(e/2),y=e-p,b=Math.floor(l/2),v=l-b,x=Math.floor(h/2);d={top:b,bottom:v,left:x,right:h-x,front:p,back:y,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-i+1)/r),m=Math.ceil((n-c+1)/o),g=Math.ceil((a-u+1)/s)}return{padInfo:d,outDepth:f,outHeight:m,outWidth:g}}(r,u,f,m,w,k,S,E,N,R,i),D=o?x*g:x;let L;return"channelsFirst"===s?L=[c,D,_,O,F]:"channelsLast"===s&&(L=[c,_,O,F,D]),{batchSize:c,dataFormat:s,inDepth:u,inHeight:f,inWidth:m,inChannels:g,outDepth:_,outHeight:O,outWidth:F,outChannels:D,padInfo:A,strideDepth:w,strideHeight:k,strideWidth:S,filterDepth:y,filterHeight:b,filterWidth:v,effectiveFilterDepth:E,effectiveFilterHeight:N,effectiveFilterWidth:R,dilationDepth:I,dilationHeight:T,dilationWidth:C,inShape:e,outShape:L,filterShape:t}}function l(e,t,n){const a=d(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+a)/2)}function u(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function h(e){return"number"===typeof e?[e,e,e]:e}function d(e,t){return t<=1?e:e+(e-1)*(t-1)}function p(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function f(e){const[t,n,a]=u(e);return 1===t&&1===n&&1===a}function m(e,t){return f(e)||f(t)}function g(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function y(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)a.vA(a.E6(t),(()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((t=>{t.forEach((t=>{a.vA(a.E6(t),(()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")))}))}))}}}},3645:(e,t,n)=>{"use strict";n.d(t,{P:()=>s});var a=n(2164),r=n(9554),o=n(4148);const s=(0,n(7892).op)({elu_:function(e){const t={x:(0,o.YT)(e,"x","elu","float32")};return a.T2.runKernel(r.Pah,t)}})},7905:(e,t,n)=>{"use strict";n.d(t,{Do:()=>m,XB:()=>f,f2:()=>g,zE:()=>y});var a=n(8805),r=n(3645),o=n(8076),s=n(803),i=n(9855),c=n(5251),l=n(9721),u=n(5583),h=n(4213),d=n(319),p=n(7382);function f(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return(0,s.l)(e,(0,d.P)(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function m(e,t){let n=t;const r=a.getReductionAxes(e.shape,t.shape);return r.length>0&&(n=(0,p.c)(n,r)),(0,u.t)(n,e.shape)}function g(e,t,n,a){if("linear"===t)return e;if("relu"===t)return(0,c.V)(e);if("elu"===t)return(0,r.P)(e);if("relu6"===t)return(0,l.j)(e);if("prelu"===t)return(0,i.N)(e,n);if("leakyrelu"===t)return(0,o.H)(e,a);if("sigmoid"===t)return(0,h.r)(e);throw new Error("Unknown fused activation ".concat(t,"."))}const y=(e,t)=>!(e>0)||"linear"===t},8076:(e,t,n)=>{"use strict";n.d(t,{H:()=>s});var a=n(2164),r=n(9554),o=n(4148);const s=(0,n(7892).op)({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:(0,o.YT)(e,"x","leakyRelu")},s={alpha:t};return a.T2.runKernel(r.X0$,n,s)}})},803:(e,t,n)=>{"use strict";n.d(t,{l:()=>i});var a=n(2164),r=n(9554),o=n(8804),s=n(4148);const i=(0,n(7892).op)({mul_:function(e,t){let n=(0,s.YT)(e,"a","mul"),i=(0,s.YT)(t,"b","mul");[n,i]=(0,o.h0)(n,i);const c={a:n,b:i};return a.T2.runKernel(r.xu7,c)}})},7892:(e,t,n)=>{"use strict";n.d(t,{B:()=>o,op:()=>s});var a=n(2164),r=n(1426);const o="__op";function s(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));let n=t[0];const s=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=o;const i=function(){a.T2.startScope(n);try{const e=s(...arguments);return(0,r.yL)(e)&&console.error("Cannot return a Promise inside of tidy."),a.T2.endScope(e),e}catch(e){throw a.T2.endScope(null),e}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}},9650:(e,t,n)=>{"use strict";n.d(t,{BTT:()=>i.B,tnl:()=>c,HQu:()=>l,FqL:()=>u,WQq:()=>d,QiD:()=>f,Q7R:()=>m,bzn:()=>g,FLi:()=>y,XRg:()=>b,qRo:()=>v,yHs:()=>x,rYl:()=>w,FPz:()=>k,rfv:()=>S,$jT:()=>E,sub:()=>N,lZX:()=>M,$v7:()=>z,BFc:()=>B,kSi:()=>W,T5N:()=>U,GTe:()=>P,HbZ:()=>V,ftb:()=>na,ROE:()=>G,hOW:()=>j,ra8:()=>H.r,wgE:()=>I.w,mkO:()=>K,zQh:()=>Y,o8B:()=>R.o,faB:()=>X.f,xWs:()=>A,I1m:()=>Z,RPU:()=>Q,O5O:()=>J,P1l:()=>$,kA9:()=>te,Xtf:()=>ee,wX9:()=>ae,IPL:()=>re,jIJ:()=>se,gnS:()=>ie,yIG:()=>ce,_jP:()=>da,Lp0:()=>le,rCv:()=>ue,aOp:()=>he,Rj8:()=>de,Gl3:()=>pe,smy:()=>fe,X7t:()=>me,y4m:()=>ye,ek5:()=>ke,Omf:()=>Se,EZY:()=>ua,_3C:()=>Ie,Pqc:()=>Te.P,FJY:()=>ha,LCg:()=>ve,Y12:()=>Ce,p4S:()=>Pe,oNF:()=>ze,UG6:()=>Be,IYd:()=>We,y5U:()=>Ve,hVP:()=>Nn,GSj:()=>q,RIf:()=>Ge,wh_:()=>ge,cZk:()=>a,kgh:()=>je,SY9:()=>la,rhj:()=>He,DQN:()=>Ke,KGM:()=>Rn,ngS:()=>qe,Slp:()=>ur,U4u:()=>pa,ggX:()=>An,MIs:()=>Ye,EN4:()=>Xe,yrW:()=>Ze,H8d:()=>Qe.H,M7h:()=>Je,InN:()=>$e,mPL:()=>hr,mT8:()=>et,Kgs:()=>tt,Rm2:()=>nt,Kko:()=>at,nqI:()=>ct,HPB:()=>ut,VZ:()=>ht,n76:()=>dt,NSZ:()=>pt,ztW:()=>ft,rxB:()=>mt,YYh:()=>dr,yzS:()=>bt,NoW:()=>_,T9B:()=>Ne,jgi:()=>vt,NYV:()=>xt,RO:()=>wt,PhQ:()=>kt,i2o:()=>St,OYQ:()=>Ct,jkA:()=>Re,BpO:()=>Et,FFZ:()=>Nt,ziu:()=>Rt,Clk:()=>At,CRk:()=>oa,lKK:()=>O.l,YDF:()=>_t,OjQ:()=>Ot,HZy:()=>st,xbf:()=>Me,Ec:()=>Ft,Mw0:()=>Dt,SaS:()=>Tt,P61:()=>Lt,op:()=>i.op,X4o:()=>Mt,eVF:()=>Pt,BZs:()=>zt,grY:()=>Bt,XHu:()=>Wt,WLX:()=>Ut,dzn:()=>Gt,n7C:()=>Ae,NsG:()=>jt.N,yyV:()=>Ht.y,_eU:()=>Kt,whe:()=>qt,Q0_:()=>Yt,_9M:()=>Xt,pR9:()=>en,FE$:()=>tn,m0H:()=>nn,YeY:()=>an,y17:()=>rn,xav:()=>on,VOZ:()=>sn,VVh:()=>cn.V,j__:()=>ln.j,tQQ:()=>C.t,BEg:()=>un,QD2:()=>hn,LMr:()=>dn,I2l:()=>pn,JYU:()=>fn,z8$:()=>On,LIG:()=>mn,Z$r:()=>gn,d_2:()=>_e.d,NFr:()=>ia,sZg:()=>yt,WfX:()=>yn,wdz:()=>bn,F12:()=>vn,ry7:()=>F.r,_SZ:()=>xn,vPA:()=>lr,F8e:()=>wn,L0l:()=>kn,dik:()=>D,Q$M:()=>Sn,zAd:()=>In,wck:()=>Tn,R0O:()=>Cn,Vs9:()=>En,lw0:()=>it,eDJ:()=>Vt,lMo:()=>pr,Zhr:()=>ca,lOn:()=>cr,lDo:()=>_n,RZD:()=>Oe,EwI:()=>Fe,Pbu:()=>Fn,r2V:()=>Dn,t$z:()=>Ln,PMw:()=>Mn.P,Ym9:()=>Pn,YjP:()=>fr,jbE:()=>lt,czq:()=>De.c,Mlm:()=>zn,ymU:()=>L,OEK:()=>Bn.O,tGX:()=>Un,KtR:()=>Vn,$_$:()=>Gn.$,g9W:()=>jn,Lpo:()=>Hn,yxw:()=>Kn,Vsq:()=>Ue,rfw:()=>qn,mgz:()=>ra,efE:()=>Yn,AmM:()=>Xn,zAU:()=>Zn,K$i:()=>Qn,rni:()=>Jn,bvq:()=>$n,_M9:()=>xe,YJN:()=>ta,Ul9:()=>It,POl:()=>we});var a={};n.r(a),n.d(a,{conv2d:()=>ga,depthwiseConv2d:()=>va,matMul:()=>xa});var r=n(2164),o=n(9554),s=n(4148),i=n(7892);const c=(0,i.op)({abs_:function(e){const t=(0,s.YT)(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return r.T2.runKernel(o.$zE,e)}{const e={x:t};return r.T2.runKernel(o.ljI,e)}}});const l=(0,i.op)({acos_:function(e){const t={x:(0,s.YT)(e,"x","acos")};return r.T2.runKernel(o.Vvy,t)}});const u=(0,i.op)({acosh_:function(e){const t={x:(0,s.YT)(e,"x","acosh")};return r.T2.runKernel(o.PH8,t)}});var h=n(8804);const d=(0,i.op)({add_:function(e,t){let n=(0,s.YT)(e,"a","add"),a=(0,s.YT)(t,"b","add");[n,a]=(0,h.h0)(n,a);const i={a:n,b:a};return r.T2.runKernel(o.OMN,i)}});var p=n(1426);const f=(0,i.op)({addN_:function(e){p.vA(Array.isArray(e),(()=>"The argument passed to tf.addN() must be a list of tensors")),p.vA(e.length>=1,(()=>"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)));const t=e.map(((e,t)=>(0,s.YT)(e,"tensors".concat(t),"addN"))),n=t[0];t.forEach((e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((e=>{if(!p.r1(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));const a=t;return r.T2.runKernel(o.EkD,a)}});const m=(0,i.op)({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:(0,s.YT)(e,"x","all","bool")},i={axis:t,keepDims:n};return r.T2.runKernel(o.u8Z,a,i)}});const g=(0,i.op)({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:(0,s.YT)(e,"x","any","bool")},i={axis:t,keepDims:n};return r.T2.runKernel(o.FSt,a,i)}});const y=(0,i.op)({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:(0,s.YT)(e,"x","argMax")},a={axis:t};return r.T2.runKernel(o.Jp_,n,a)}});const b=(0,i.op)({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:(0,s.YT)(e,"x","argMin")},a={axis:t};return r.T2.runKernel(o.p_m,n,a)}});const v=(0,i.op)({asin_:function(e){const t={x:(0,s.YT)(e,"x","asin")};return r.T2.runKernel(o.QKF,t)}});const x=(0,i.op)({asinh_:function(e){const t={x:(0,s.YT)(e,"x","asinh")};return r.T2.runKernel(o.epO,t)}});const w=(0,i.op)({atan_:function(e){const t={x:(0,s.YT)(e,"x","atan")};return r.T2.runKernel(o.TyE,t)}});const k=(0,i.op)({atan2_:function(e,t){let n=(0,s.YT)(e,"a","atan2"),a=(0,s.YT)(t,"b","atan2");[n,a]=(0,h.h0)(n,a);const i={a:n,b:a};return r.T2.runKernel(o.lxb,i)}});const S=(0,i.op)({atanh_:function(e){const t={x:(0,s.YT)(e,"x","atanh")};return r.T2.runKernel(o.zP9,t)}});var I=n(7794),T=n(7538),C=n(5583);const E=(0,i.op)({avgPool_:function(e,t,n,a,i){const c=(0,s.YT)(e,"x","avgPool","float32");p.vA(T.G0(n,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")));let l=c,u=!1;3===c.rank&&(u=!0,l=(0,C.t)(c,[1,c.shape[0],c.shape[1],c.shape[2]])),p.vA(4===l.rank,(()=>"Error in avgPool: x must be rank 4 but got rank ".concat(l.rank,"."))),T.s_("avgPool",a,i);const h={x:l},d={filterSize:t,strides:n,pad:a,dimRoundingMode:i};let f=r.T2.runKernel(o.ho8,h,d);return f=(0,I.w)(f,c.dtype),u?(0,C.t)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const N=(0,i.op)({avgPool3d_:function(e,t,n,a,i){let c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const l=(0,s.YT)(e,"x","avgPool3d","float32");let u=l,h=!1;4===l.rank&&(h=!0,u=(0,C.t)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),p.vA(5===u.rank,(()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(u.rank,"."))),p.vA("NDHWC"===c,(()=>"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(c))),(0,T.s_)("avgPool3d",a,i);const d={x:u},f={filterSize:t,strides:n,pad:a,dimRoundingMode:i,dataFormat:c};let m=r.T2.runKernel(o.cS,d,f);return m=(0,I.w)(m,u.dtype),h?(0,C.t)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}});var R=n(9820);const A=(0,i.op)({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,p.vA)(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=(0,s.j1)(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return(0,R.o)(n[0]);const a=n,i={axis:t};return r.T2.runKernel(o.$dB,a,i)}});const _=(0,i.op)({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(0,s.YT)(e,"a","matMul"),c=(0,s.YT)(t,"b","matMul");[i,c]=(0,h.h0)(i,c);const l={a:i,b:c},u={transposeA:n,transposeB:a};return r.T2.runKernel(o.jAQ,l,u)}});var O=n(803),F=n(4213);const D=(0,i.op)({slice_:function(e,t,n){const a=(0,s.YT)(e,"x","slice","string_or_numeric");if(0===a.rank)throw new Error("Slicing scalar is not possible");const i={x:a},c={begin:t,size:n};return r.T2.runKernel(o.JiE,i,c)}});const L=(0,i.op)({tanh_:function(e){const t={x:(0,s.YT)(e,"x","tanh","float32")};return r.T2.runKernel(o.iuW,t)}});const M=(0,i.op)({basicLSTMCell_:function(e,t,n,a,r,o){const i=(0,s.YT)(e,"forgetBias","basicLSTMCell"),c=(0,s.YT)(t,"lstmKernel","basicLSTMCell"),l=(0,s.YT)(n,"lstmBias","basicLSTMCell"),u=(0,s.YT)(a,"data","basicLSTMCell"),h=(0,s.YT)(r,"c","basicLSTMCell"),p=(0,s.YT)(o,"h","basicLSTMCell"),f=A([u,p],1),m=_(f,c),g=d(m,l),y=g.shape[0],b=g.shape[1]/4,v=[y,b],x=D(g,[0,0],v),w=D(g,[0,b],v),k=D(g,[0,2*b],v),S=D(g,[0,3*b],v),I=d((0,O.l)((0,F.r)(x),L(w)),(0,O.l)(h,(0,F.r)(d(i,k))));return[I,(0,O.l)(L(I),(0,F.r)(S))]}});const P=(0,i.op)({batchToSpaceND_:function(e,t,n){const a=(0,s.YT)(e,"x","batchToSpaceND"),i=t.reduce(((e,t)=>e*t));p.vA(a.rank>=1+t.length,(()=>"input rank is ".concat(a.rank," but should be > than blockShape.length ").concat(t.length))),p.vA(n.length===t.length,(()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length))),p.vA(a.shape[0]%i===0,(()=>"input tensor batch is ".concat(a.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(i)));const c={x:a},l={blockShape:t,crops:n};return r.T2.runKernel(o.Ik2,c,l)}});const z=(0,i.op)({batchNorm_:function(e,t,n,a,i,c){null==c&&(c=.001);const l=(0,s.YT)(e,"x","batchNorm"),u=(0,s.YT)(t,"mean","batchNorm"),h=(0,s.YT)(n,"variance","batchNorm");let d,f;null!=i&&(d=(0,s.YT)(i,"scale","batchNorm")),null!=a&&(f=(0,s.YT)(a,"offset","batchNorm")),p.vA(u.rank===h.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),p.vA(null==f||u.rank===f.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),p.vA(null==d||u.rank===d.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const m={x:function(e){let t;return t=0===e.rank||1===e.rank?(0,C.t)(e,[1,1,1,e.size]):2===e.rank?(0,C.t)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?(0,C.t)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(l),scale:d,offset:f,mean:u,variance:h},g={varianceEpsilon:c},y=r.T2.runKernel(o.i5R,m,g);return(0,C.t)(y,l.shape)}});const B=(0,i.op)({batchNorm2d_:function(e,t,n,a,r,o){const i=(0,s.YT)(e,"x","batchNorm"),c=(0,s.YT)(t,"mean","batchNorm"),l=(0,s.YT)(n,"variance","batchNorm");let u,h;return null!=r&&(u=(0,s.YT)(r,"scale","batchNorm")),null!=a&&(h=(0,s.YT)(a,"offset","batchNorm")),p.vA(2===i.rank,(()=>"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(i.rank,"."))),p.vA(2===c.rank||1===c.rank,(()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,"."))),p.vA(2===l.rank||1===l.rank,(()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=u&&p.vA(2===u.rank||1===u.rank,(()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,"."))),null!=h&&p.vA(2===h.rank||1===h.rank,(()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(h.rank,"."))),z(i,c,l,h,u,o)}});const W=(0,i.op)({batchNorm3d_:function(e,t,n,a,r,o){const i=(0,s.YT)(e,"x","batchNorm"),c=(0,s.YT)(t,"mean","batchNorm"),l=(0,s.YT)(n,"variance","batchNorm");let u,h;return null!=r&&(u=(0,s.YT)(r,"scale","batchNorm")),null!=a&&(h=(0,s.YT)(a,"offset","batchNorm")),p.vA(3===i.rank,(()=>"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(i.rank,"."))),p.vA(3===c.rank||1===c.rank,(()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,"."))),p.vA(3===l.rank||1===l.rank,(()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=u&&p.vA(3===u.rank||1===u.rank,(()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,"."))),null!=h&&p.vA(3===h.rank||1===h.rank,(()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(h.rank,"."))),z(i,c,l,h,u,o)}});const U=(0,i.op)({batchNorm4d_:function(e,t,n,a,r,o){const i=(0,s.YT)(e,"x","batchNorm"),c=(0,s.YT)(t,"mean","batchNorm"),l=(0,s.YT)(n,"variance","batchNorm");let u,h;return null!=r&&(u=(0,s.YT)(r,"scale","batchNorm")),null!=a&&(h=(0,s.YT)(a,"offset","batchNorm")),p.vA(4===i.rank,(()=>"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(i.rank,"."))),p.vA(4===c.rank||1===c.rank,(()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,"."))),p.vA(4===l.rank||1===l.rank,(()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=u&&p.vA(4===u.rank||1===u.rank,(()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,"."))),null!=h&&p.vA(4===h.rank||1===h.rank,(()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(h.rank,"."))),z(i,c,l,h,u,o)}});const V=(0,i.op)({bincount_:function(e,t,n){const a=(0,s.YT)(e,"x","bincount"),i=(0,s.YT)(t,"weights","bincount");p.vA("int32"===a.dtype,(()=>"Error in bincount: input "+"dtype must be int32, but got ".concat(a.dtype))),p.vA(n>=0,(()=>"size must be non-negative, but got ".concat(n,"."))),p.vA(i.size===a.size||0===i.size,(()=>"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,".")));const c={x:a,weights:i},l={size:n};return r.T2.runKernel(o.N4F,c,l)}});const G=(0,i.op)({broadcastArgs_:function(e,t){const n=(0,s.YT)(e,"s0","broadcastArgs","int32"),a=(0,s.YT)(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==a.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(a.rank));const i={s0:n,s1:a};return r.T2.runKernel(o.vj7,i)}});const j=(0,i.op)({broadcastTo_:function(e,t){let n=(0,s.YT)(e,"broadcastTo","x");const a=n.shape;if(t.some((e=>!(e>0)||e%1!==0)))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=(0,C.t)(n,e)}const i=n.shape,c=Array.from(t);for(let r=t.length-1;r>=0;r--)if(i[r]===t[r])c[r]=1;else if(1!==n.shape[r])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(t,"]."));if(0===c.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0)).length)return(0,R.o)(n);const l={x:n},u={reps:c};return r.T2.runKernel(o.FAs,l,u)}});var H=n(259);const K=(0,i.op)({ceil_:function(e){const t={x:(0,s.YT)(e,"x","ceil","float32")};return r.T2.runKernel(o.QDP,t)}});function q(e,t,n){const a={shape:e,value:t,dtype:n};return r.T2.runKernel(o.SQl,{},a)}const Y=(0,i.op)({clipByValue_:function(e,t,n){const a=(0,s.YT)(e,"x","clipByValue");if(p.vA(t<=n,(()=>"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,")."))),t===n)return q(a.shape,t,a.dtype);const i={x:a},c={clipValueMin:t,clipValueMax:n};return r.T2.runKernel(o.vaV,i,c)}});var X=n(6149);const Z=(0,i.op)({concat1d_:function(e){return A(e,0)}});const Q=(0,i.op)({concat2d_:function(e,t){return A(e,t)}});const J=(0,i.op)({concat3d_:function(e,t){return A(e,t)}});const $=(0,i.op)({concat4d_:function(e,t){return A(e,t)}});const ee=(0,i.op)({conv2d_:function(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],l=arguments.length>6?arguments[6]:void 0;const u=(0,s.YT)(e,"x","conv2d","float32"),h=(0,s.YT)(t,"filter","conv2d","float32");let d=u,f=!1;3===u.rank&&(f=!0,d=(0,C.t)(u,[1,u.shape[0],u.shape[1],u.shape[2]])),p.vA(4===d.rank,(()=>"Error in conv2d: input must be rank 4, but got rank ".concat(d.rank,"."))),p.vA(4===h.rank,(()=>"Error in conv2d: filter must be rank 4, but got rank "+"".concat(h.rank,"."))),T.s_("conv2d",a,l);const m="NHWC"===i?d.shape[3]:d.shape[1];p.vA(m===h.shape[2],(()=>"Error in conv2d: depth of input (".concat(m,") must match ")+"input depth for filter ".concat(h.shape[2],"."))),p.vA(T.G0(n,c),(()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(c,"'")));const g={x:d,filter:h},y={strides:n,pad:a,dataFormat:i,dilations:c,dimRoundingMode:l},b=r.T2.runKernel(o.p2J,g,y);return f?(0,C.t)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}});const te=(0,i.op)({conv1d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const c=(0,s.YT)(e,"x","conv1d"),l=(0,s.YT)(t,"filter","conv1d");let u=c,h=!1;2===c.rank&&(h=!0,u=(0,C.t)(c,[1,c.shape[0],c.shape[1]])),p.vA(3===u.rank,(()=>"Error in conv1d: input must be rank 3, but got rank ".concat(u.rank,"."))),p.vA(3===l.rank,(()=>"Error in conv1d: filter must be rank 3, but got rank "+"".concat(l.rank,"."))),T.s_("conv1d",a,i),p.vA(u.shape[2]===l.shape[1],(()=>"Error in conv1d: depth of input (".concat(u.shape[2],") must match ")+"input depth for filter ".concat(l.shape[1],"."))),p.vA(T.G0(n,o),(()=>"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(o,"'"))),p.vA("NWC"===r,(()=>"Error in conv1d: got dataFormat of ".concat(r," but only NWC is currently supported.")));const d=(0,C.t)(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=(0,C.t)(u,[u.shape[0],1,u.shape[1],u.shape[2]]),m=ee(f,d,[1,n],a,"NHWC",[1,o],i);return h?(0,C.t)(m,[m.shape[2],m.shape[3]]):(0,C.t)(m,[m.shape[0],m.shape[2],m.shape[3]])}});const ne=(0,i.op)({conv2DBackpropInput_:function(e,t,n,a,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",c=arguments.length>6?arguments[6]:void 0;p.vA(e.length===t.rank,(()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")));let l=e,u=t,h=!1;3===t.rank&&(h=!0,u=(0,C.t)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),l=[1,e[0],e[1],e[2]]),p.vA(4===l.length,(()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(l.length,"."))),p.vA(4===u.rank,(()=>"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank))),p.vA(4===n.rank,(()=>"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)));const d="NHWC"===i?l[3]:l[1],f="NHWC"===i?u.shape[3]:u.shape[1];p.vA(d===n.shape[2],(()=>"Error in conv2dDerInput: depth of input (".concat(d,") must ")+"match input depth for filter ".concat(n.shape[2],"."))),p.vA(f===n.shape[3],(()=>"Error in conv2dDerInput: depth of output (".concat(f,") must ")+"match output depth for filter ".concat(n.shape[3],"."))),T.s_("conv2dDerInput",s,c);const m={dy:u,filter:n},g={strides:a,pad:s,dataFormat:i,dimRoundingMode:c,inputShape:l},y=r.T2.runKernel(o.jfg,m,g);return h?(0,C.t)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}});const ae=(0,i.op)({conv2dTranspose_:function(e,t,n,a,r,o){const i=(0,s.YT)(e,"x","conv2dTranspose"),c=(0,s.YT)(t,"filter","conv2dTranspose");return ne(n,i,c,a,r,"NHWC",o)}});const re=(0,i.op)({conv3d_:function(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const l=(0,s.YT)(e,"x","conv3d"),u=(0,s.YT)(t,"filter","conv3d");let h=l,d=!1;4===l.rank&&(d=!0,h=(0,C.t)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),p.vA(5===h.rank,(()=>"Error in conv3d: input must be rank 5, but got rank ".concat(h.rank,"."))),p.vA(5===u.rank,(()=>"Error in conv3d: filter must be rank 5, but got rank "+"".concat(u.rank,"."))),p.vA(h.shape[4]===u.shape[3],(()=>"Error in conv3d: depth of input (".concat(h.shape[4],") must match ")+"input depth for filter ".concat(u.shape[3],"."))),p.vA((0,T.G0)(n,c),(()=>"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(c,"'"))),p.vA("NDHWC"===i,(()=>"Error in conv3d: got dataFormat of ".concat(i," but only NDHWC is currently supported.")));const f={x:h,filter:u},m={strides:n,pad:a,dataFormat:i,dilations:c},g=r.T2.runKernel(o.A1h,f,m);return d?(0,C.t)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}});const oe=(0,i.op)({conv3DBackpropInput_:function(e,t,n,a,s){p.vA(e.length===t.rank,(()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")));let i=e,c=t,l=!1;4===t.rank&&(l=!0,c=(0,C.t)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);const u=i[4],h=c.shape[4];p.vA(5===i.length,(()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,"."))),p.vA(5===c.rank,(()=>"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(c.rank))),p.vA(5===n.rank,(()=>"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank))),p.vA(u===n.shape[3],(()=>"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],"."))),p.vA(h===n.shape[4],(()=>"Error in conv3dDerInput: depth of output (".concat(h,") must ")+"match output depth for filter ".concat(n.shape[4],".")));const d={dy:c,filter:n},f={pad:s,strides:a,inputShape:i},m=r.T2.runKernel(o.gC7,d,f);return l?(0,C.t)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}});const se=(0,i.op)({conv3dTranspose_:function(e,t,n,a,r){const o=(0,s.YT)(e,"x","conv3dTranspose"),i=(0,s.YT)(t,"filter","conv3dTranspose");return oe(n,o,i,a,r)}});const ie=(0,i.op)({cos_:function(e){const t={x:(0,s.YT)(e,"x","cos","float32")};return r.T2.runKernel(o.Mn0,t)}});const ce=(0,i.op)({cosh_:function(e){const t={x:(0,s.YT)(e,"x","cosh","float32")};return r.T2.runKernel(o.MnK,t)}});const le=(0,i.op)({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i={x:(0,s.YT)(e,"x","cumprod")},c={axis:t,exclusive:n,reverse:a};return r.T2.runKernel(o.jj_,i,c)}});const ue=(0,i.op)({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i={x:(0,s.YT)(e,"x","cumsum")},c={axis:t,exclusive:n,reverse:a};return r.T2.runKernel(o.nY8,i,c)}});const he=(0,i.op)({denseBincount_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=(0,s.YT)(e,"x","denseBincount"),c=(0,s.YT)(t,"weights","denseBincount");p.vA("int32"===i.dtype,(()=>"Error in denseBincount: input "+"dtype must be int32, but got ".concat(i.dtype))),p.vA(i.rank<=2,(()=>"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(i.rank,"."))),p.vA(n>=0,(()=>"size must be non-negative, but got ".concat(n,"."))),p.vA(c.size===i.size||0===c.size,(()=>"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(i.shape,", weights shape: ")+"".concat(c.shape,".")));const l={x:i,weights:c},u={size:n,binaryOutput:a};return r.T2.runKernel(o.wNW,l,u)}});const de=(0,i.op)({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const a=(0,s.YT)(e,"x","depthToSpace","float32"),i="NHWC"===n?a.shape[1]:a.shape[2],c="NHWC"===n?a.shape[2]:a.shape[3],l="NHWC"===n?a.shape[3]:a.shape[1];p.vA(t>1,(()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(t))),p.vA(i*t>=0,(()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(a.shape))),p.vA(c*t>=0,(()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(c," and ").concat(t," for depthToSpace with input shape\n        ").concat(a.shape))),p.vA(l%(t*t)===0,(()=>"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(l," for depthToSpace with input shape ").concat(a.shape)));const u={x:a},h={blockSize:t,dataFormat:n};return r.T2.runKernel(o.TMz,u,h)}});const pe=(0,i.op)({depthwiseConv2d_:function(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],l=arguments.length>6?arguments[6]:void 0;const u=(0,s.YT)(e,"x","depthwiseConv2d","float32"),h=(0,s.YT)(t,"filter","depthwiseConv2d","float32");let d=u,f=!1;3===u.rank&&(f=!0,d=(0,C.t)(u,[1,u.shape[0],u.shape[1],u.shape[2]])),p.vA(4===d.rank,(()=>"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(d.rank,"."))),p.vA(4===h.rank,(()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(h.rank,".")));const m="NHWC"===i?d.shape[3]:d.shape[1];p.vA(m===h.shape[2],(()=>"Error in depthwiseConv2d: number of input channels "+"(".concat(m,") must match the inChannels dimension in ")+"filter ".concat(h.shape[2],"."))),T.s_("depthwiseConv2d",a,l);const g={x:d,filter:h},y={strides:n,pad:a,dataFormat:i,dilations:c,dimRoundingMode:l},b=r.T2.runKernel(o.tGH,g,y);return f?(0,C.t)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}});const fe=(0,i.op)({diag_:function(e){const t={x:(0,s.YT)(e,"x","diag")};return r.T2.runKernel(o.ORI,t)}});const me=(0,i.op)({dilation2d_:function(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const l=(0,s.YT)(e,"x","dilation2d"),u=(0,s.YT)(t,"filter","dilation2d");p.vA(3===l.rank||4===l.rank,(()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(l.rank,"."))),p.vA(3===u.rank,(()=>"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(u.rank,"."))),p.vA("NHWC"===c,(()=>"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(c)));let h=l,d=!1;3===l.rank&&(h=(0,C.t)(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=!0);const f={x:h,filter:u},m={strides:n,pad:a,dilations:i},g=r.T2.runKernel(o.jxD,f,m);return d?(0,C.t)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}});const ge=(0,i.op)({floorDiv_:function(e,t){let n=(0,s.YT)(e,"a","floorDiv"),a=(0,s.YT)(t,"b","floorDiv");[n,a]=(0,h.h0)(n,a);const i={a:n,b:a};return r.T2.runKernel(o.ElG,i)}});const ye=(0,i.op)({div_:function(e,t){let n=(0,s.YT)(e,"a","div"),a=(0,s.YT)(t,"b","div");if([n,a]=(0,h.h0)(n,a),"int32"===n.dtype&&"int32"===a.dtype)return ge(n,a);const i={a:n,b:a};return r.T2.runKernel(o.sDr,i,{})}});var be=n(8805);const ve=(0,i.op)({equal_:function(e,t){let n=(0,s.YT)(e,"a","equal","string_or_numeric"),a=(0,s.YT)(t,"b","equal","string_or_numeric");[n,a]=(0,h.h0)(n,a),(0,be.assertAndGetBroadcastShape)(n.shape,a.shape);const i={a:n,b:a};return r.T2.runKernel(o.BRl,i)}});const xe=(0,i.op)({where_:function(e,t,n){const a=(0,s.YT)(t,"a","where"),i=(0,s.YT)(n,"b","where"),c=(0,s.YT)(e,"condition","where","bool"),l=(0,be.assertAndGetBroadcastShape)((0,be.assertAndGetBroadcastShape)(c.shape,a.shape),i.shape),u={condition:j(c,l),t:j(a,l),e:j(i,l)};return r.T2.runKernel(o.l6P,u)}});const we=(0,i.op)({zerosLike_:function(e){const t={x:(0,s.YT)(e,"x","zerosLike")};return r.T2.runKernel(o.xJ3,t)}});const ke=(0,i.op)({divNoNan_:function(e,t){let n=(0,s.YT)(e,"a","div"),a=(0,s.YT)(t,"b","div");[n,a]=(0,h.h0)(n,a);const r=ye(n,a),o=we(r),i=ve(a,o);return xe(i,o,r)}});const Se=(0,i.op)({dot_:function(e,t){const n=(0,s.YT)(e,"t1","dot"),a=(0,s.YT)(t,"t2","dot");p.vA((1===n.rank||2===n.rank)&&(1===a.rank||2===a.rank),(()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(a.rank,".")));const r=1===n.rank?n.size:n.shape[1],o=1===a.rank?a.size:a.shape[0];if(p.vA(r===o,(()=>"Error in dot: inner dimensions of inputs must match, but got "+"".concat(r," and ").concat(o,"."))),1===n.rank&&1===a.rank){const e=(0,C.t)(n,[1,-1]),t=(0,C.t)(a,[-1,1]),r=_(e,t);return(0,C.t)(r,[])}if(1===n.rank&&2===a.rank){const e=(0,C.t)(n,[1,-1]),t=(0,C.t)(a,[a.shape[0],a.shape[1]]),r=_(e,t);return(0,C.t)(r,[r.size])}if(2===n.rank&&1===a.rank){const e=(0,C.t)(a,[-1,1]),t=_(n,e);return(0,C.t)(t,[t.size])}{const e=(0,C.t)(a,[a.shape[0],a.shape[1]]);return _(n,e)}}});const Ie=(0,i.op)({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];const i=n.map(((e,t)=>(0,s.YT)(e,"tensors".concat(t),"einsum"))),c={equation:e};return r.T2.runKernel(o.Qgm,i,c)}});var Te=n(3645);const Ce=(0,i.op)({erf_:function(e){let t=(0,s.YT)(e,"x","erf");p.vA("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=(0,I.w)(t,"float32"));const n={x:t};return r.T2.runKernel(o._s9,n)}});var Ee=n(9235);const Ne=(0,i.op)({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:(0,s.YT)(e,"x","max")},i={reductionIndices:t,keepDims:n};return r.T2.runKernel(o.VAI,a,i)}});const Re=(0,i.op)({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:(0,s.YT)(e,"x","min")},i={axis:t,keepDims:n};return r.T2.runKernel(o.lNG,a,i)}});const Ae=(0,i.op)({pow_:function(e,t){let n=(0,s.YT)(e,"base","pow"),a=(0,s.YT)(t,"exp","pow");[n,a]=(0,h.h0)(n,a);const i={a:n,b:a};return r.T2.runKernel(o.pyJ,i)}});var _e=n(1997);const Oe=(0,i.op)({sqrt_:function(e){const t={x:(0,s.YT)(e,"x","sqrt","float32")};return r.T2.runKernel(o.dFH,t)}});const Fe=(0,i.op)({square_:function(e){const t=(0,s.YT)(e,"x","square");return r.T2.runKernel("Square",{x:t},{})}});var De=n(7382);function Le(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return c(e);if(1!==e.rank&&null===n)return Le((0,C.t)(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return(0,De.c)(c(e),n);if(t===1/0)return Ne(c(e),n);if(t===-1/0)return Re(c(e),n);if("euclidean"===t||2===t)return Oe((0,De.c)(Ae(c(e),(0,_e.d)(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Ne((0,De.c)(c(e),n[0]),n[1]-1);if(t===1/0)return Ne((0,De.c)(c(e),n[1]),n[0]);if(t===-1/0)return Re((0,De.c)(c(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Oe((0,De.c)(Fe(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}const Me=(0,i.op)({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=Le(e=(0,s.YT)(e,"x","norm"),t,n);let o=r.shape;if(a){const t=(0,p.Y6)(n,e.shape);o=Ee.SM(r.shape,t)}return(0,C.t)(r,o)}});const Pe=(0,i.op)({euclideanNorm_:function(e){return Me(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});const ze=(0,i.op)({exp_:function(e){const t={x:(0,s.YT)(e,"x","exp")};return r.T2.runKernel(o.ox3,t)}});const Be=(0,i.op)({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(0,s.YT)(e,"x","expandDims","string_or_numeric");p.vA(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const a={input:n},i={dim:t};return r.T2.runKernel(o.ybN,a,i)}});const We=(0,i.op)({expm1_:function(e){const t={x:(0,s.YT)(e,"x","expm1")};return r.T2.runKernel(o.ybj,t)}});const Ue=(0,i.op)({tile_:function(e,t){const n=(0,s.YT)(e,"x","tile","string_or_numeric");p.vA(n.rank===t.length,(()=>"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")));const a={x:n},i={reps:t};return r.T2.runKernel(o.FAs,a,i)}});const Ve=(0,i.op)({eye_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);const r=(0,H.r)([e,t],a),o=e<=t?e:t;for(let i=0;i<o;++i)r.set(1,i,i);const s=(0,C.t)(r.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return Ue(Be(s,0),[n[0],1,1]);if(2===n.length)return Ue(Be(Be(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Ue(Be(Be(Be(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});const Ge=(0,i.op)({floor_:function(e){const t={x:(0,s.YT)(e,"x","floor","float32")};return r.T2.runKernel(o.ZgB,t)}});const je=(0,i.op)({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i={x:(0,s.YT)(e,"x","gather"),indices:(0,s.YT)(t,"indices","gather","int32")},c={axis:n,batchDims:a};return r.T2.runKernel(o.mxL,i,c)}});const He=(0,i.op)({greater_:function(e,t){let n=(0,s.YT)(e,"a","greater","string_or_numeric"),a=(0,s.YT)(t,"b","greater","string_or_numeric");[n,a]=(0,h.h0)(n,a),(0,be.assertAndGetBroadcastShape)(n.shape,a.shape);const i={a:n,b:a};return r.T2.runKernel(o.XhZ,i)}});const Ke=(0,i.op)({greaterEqual_:function(e,t){let n=(0,s.YT)(e,"a","greaterEqual","string_or_numeric"),a=(0,s.YT)(t,"b","greaterEqual","string_or_numeric");[n,a]=(0,h.h0)(n,a),(0,be.assertAndGetBroadcastShape)(n.shape,a.shape);const i={a:n,b:a};return r.T2.runKernel(o.lLS,i)}});const qe=(0,i.op)({imag_:function(e){const t={input:(0,s.YT)(e,"input","imag")};return r.T2.runKernel(o.dv8,t)}});const Ye=(0,i.op)({isFinite_:function(e){const t={x:(0,s.YT)(e,"x","isFinite")};return r.T2.runKernel(o.gIW,t)}});const Xe=(0,i.op)({isInf_:function(e){const t={x:(0,s.YT)(e,"x","isInf")};return r.T2.runKernel(o.E3$,t)}});const Ze=(0,i.op)({isNaN_:function(e){const t={x:(0,s.YT)(e,"x","isNaN")};return r.T2.runKernel(o.iPs,t)}});var Qe=n(8076);const Je=(0,i.op)({less_:function(e,t){let n=(0,s.YT)(e,"a","less","string_or_numeric"),a=(0,s.YT)(t,"b","less","string_or_numeric");[n,a]=(0,h.h0)(n,a),(0,be.assertAndGetBroadcastShape)(n.shape,a.shape);const i={a:n,b:a};return r.T2.runKernel(o.mIA,i)}});const $e=(0,i.op)({lessEqual_:function(e,t){let n=(0,s.YT)(e,"a","lessEqual","string_or_numeric"),a=(0,s.YT)(t,"b","lessEqual","string_or_numeric");[n,a]=(0,h.h0)(n,a),(0,be.assertAndGetBroadcastShape)(n.shape,a.shape);const i={a:n,b:a};return r.T2.runKernel(o.CwD,i)}});function et(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const a={start:e,stop:t,num:n};return r.T2.runKernel(o.mnI,{},a)}const tt=(0,i.op)({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const c=(0,s.YT)(e,"x","localResponseNormalization");p.vA(4===c.rank||3===c.rank,(()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(c.rank,"."))),p.vA(p.E6(t),(()=>"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")));let l=c,u=!1;3===c.rank&&(u=!0,l=(0,C.t)(c,[1,c.shape[0],c.shape[1],c.shape[2]]));const h={x:l},d={depthRadius:t,bias:n,alpha:a,beta:i},f=r.T2.runKernel(o.jM4,h,d);return u?(0,C.t)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const nt=(0,i.op)({log_:function(e){const t={x:(0,s.YT)(e,"x","log","float32")};return r.T2.runKernel(o.tG8,t)}});const at=(0,i.op)({log1p_:function(e){const t={x:(0,s.YT)(e,"x","log1p")};return r.T2.runKernel(o.Cg$,t)}});var rt=n(9494);function ot(e){return r.T2.customGrad(e)}const st=(0,i.op)({neg_:function(e){const t={x:(0,s.YT)(e,"x","neg")};return r.T2.runKernel(o.l0G,t)}});const it=(0,i.op)({softplus_:function(e){const t={x:(0,s.YT)(e,"x","softplus")};return r.T2.runKernel(o.Fin,t)}});const ct=(0,i.op)({logSigmoid_:function(e){const t=(0,s.YT)(e,"x","logSigmoid");return ot((e=>({value:st(it(st(e))),gradFunc:t=>(0,O.l)(t,(0,F.r)(st(e)))})))(t)}});const lt=(0,i.op)({sub_:function(e,t){let n=(0,s.YT)(e,"a","sub"),a=(0,s.YT)(t,"b","sub");[n,a]=(0,h.h0)(n,a);const i={a:n,b:a};return r.T2.runKernel(o.PbM,i)}});const ut=(0,i.op)({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=(0,s.YT)(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));const a=ot(((e,n)=>{const a=Ne(e,t,!0),r=lt(e,a),o=lt((0,I.w)(r,"float32"),nt((0,De.c)(ze(r),t,!0)));n([o]);return{value:o,gradFunc:(e,n)=>{const[a]=n,r=ze(a);return lt(e,(0,O.l)((0,De.c)(e,t,!0),r))}}}));return a(n)}});const ht=(0,i.op)({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=(0,s.YT)(e,"x","logSumExp"),r=(0,p.Y6)(t,a.shape),o=Ne(a,r,!0),i=lt(a,o),c=ze(i),l=(0,De.c)(c,r),u=nt(l),h=d((0,C.t)(o,u.shape),u);if(n){const e=(0,Ee.SM)(h.shape,r);return(0,C.t)(h,e)}return h}});const dt=(0,i.op)({logicalAnd_:function(e,t){const n=(0,s.YT)(e,"a","logicalAnd","bool"),a=(0,s.YT)(t,"b","logicalAnd","bool");(0,be.assertAndGetBroadcastShape)(n.shape,a.shape);const i={a:n,b:a};return r.T2.runKernel(o.RUm,i)}});const pt=(0,i.op)({logicalNot_:function(e){const t={x:(0,s.YT)(e,"x","logicalNot","bool")};return r.T2.runKernel(o.nZd,t)}});const ft=(0,i.op)({logicalOr_:function(e,t){const n=(0,s.YT)(e,"a","logicalOr","bool"),a=(0,s.YT)(t,"b","logicalOr","bool");(0,be.assertAndGetBroadcastShape)(n.shape,a.shape);const i={a:n,b:a};return r.T2.runKernel(o.LXA,i)}});const mt=(0,i.op)({logicalXor_:function(e,t){const n=(0,s.YT)(e,"a","logicalXor","bool"),a=(0,s.YT)(t,"b","logicalXor","bool");return(0,be.assertAndGetBroadcastShape)(n.shape,a.shape),dt(ft(e,t),pt(dt(e,t)))}}),gt=2147483648;const yt=(0,i.op)({searchSorted_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left";const a=(0,s.YT)(e,"sortedSequence","searchSorted"),i=(0,s.YT)(t,"values","searchSorted"),c=a.shape[a.shape.length-1],l=i.shape[i.shape.length-1],u=(0,C.t)(a,[-1,c]),h=(0,C.t)(i,[-1,l]);if(u.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(u.shape[0]!==h.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if((0,p.Ze)(h.shape)>=gt)throw new Error("values tensor size must less than ".concat(gt));if(u.shape[1]>=gt)throw new Error("trailing dim_size must less than ".concat(gt," for int32 output type, was ").concat(u.shape[1]));const d={sortedSequence:u,values:h},f={side:n};return r.T2.runKernel(o.uWl,d,f)}});function bt(e,t){return yt(e,t,"left")}const vt=(0,i.op)({maxPool_:function(e,t,n,a,i){const c=(0,s.YT)(e,"x","maxPool");let l=c,u=!1;3===c.rank&&(u=!0,l=(0,C.t)(c,[1,c.shape[0],c.shape[1],c.shape[2]])),p.vA(4===l.rank,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(l.rank,"."))),p.vA(T.G0(n,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'"))),T.s_("maxPool",a,i);const h={x:l},d={filterSize:t,strides:n,pad:a,dimRoundingMode:i},f=r.T2.runKernel(o.t3d,h,d);return u?(0,C.t)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const xt=(0,i.op)({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const l=(0,s.YT)(e,"x","maxPool3d");let u=l,h=!1;4===l.rank&&(h=!0,u=(0,C.t)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),p.vA(5===u.rank,(()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(u.rank,"."))),p.vA("NDHWC"===c,(()=>"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(c))),(0,T.s_)("maxPool3d",a,i);const d={x:u},f={filterSize:t,strides:n,pad:a,dimRoundingMode:i,dataFormat:c},m=r.T2.runKernel(o.ySp,d,f);return h?(0,C.t)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}});const wt=(0,i.op)({maxPoolWithArgmax_:function(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const c={x:(0,s.YT)(e,"x","maxPoolWithArgmax")},l={filterSize:t,strides:n,pad:a,includeBatchInIndex:i},u=r.T2.runKernel(o.TL8,c,l);return{result:u[0],indexes:u[1]}}});const kt=(0,i.op)({maximum_:function(e,t){let n=(0,s.YT)(e,"a","maximum"),a=(0,s.YT)(t,"b","maximum");[n,a]=(0,h.h0)(n,a),"bool"===n.dtype&&(n=(0,I.w)(n,"int32"),a=(0,I.w)(a,"int32")),(0,be.assertAndGetBroadcastShape)(n.shape,a.shape);const i={a:n,b:a};return r.T2.runKernel(o.LDN,i)}});const St=(0,i.op)({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:(0,s.YT)(e,"x","mean")},i={axis:t,keepDims:n};return r.T2.runKernel(o.g5A,a,i)}});function It(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){const t=It(e,"float32"),n=It(e,"float32");return(0,X.f)(t,n)}const n=(0,p.Ty)((0,p.Ze)(e),t);return r.T2.makeTensor(n,e,t)}function Tt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){const t=Tt(e,"float32"),n=It(e,"float32");return(0,X.f)(t,n)}const n=(0,p.FZ)((0,p.Ze)(e),t);return r.T2.makeTensor(n,e,t)}function Ct(e,t){let{indexing:n="xy"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("xy"!==n&&"ij"!==n)throw new TypeError("".concat(n," is not a valid third argument to meshgrid"));if(void 0===e)return[];let a=(0,s.YT)(e,"x","meshgrid",e instanceof rt.qY?e.dtype:"float32");if(void 0===t)return[a];let r=(0,s.YT)(t,"y","meshgrid",t instanceof rt.qY?t.dtype:"float32");const o=(0,p.Ze)(a.shape),i=(0,p.Ze)(r.shape);return"xy"===n?(a=(0,C.t)(a,[1,-1]),r=(0,C.t)(r,[-1,1]),[_(Tt([i,1],a.dtype),a),_(r,Tt([1,o],r.dtype))]):(a=(0,C.t)(a,[-1,1]),r=(0,C.t)(r,[1,-1]),[_(a,Tt([1,i],a.dtype)),_(Tt([o,1],r.dtype),r)])}const Et=(0,i.op)({minimum_:function(e,t){let n=(0,s.YT)(e,"a","minimum"),a=(0,s.YT)(t,"b","minimum");[n,a]=(0,h.h0)(n,a),"bool"===n.dtype&&(n=(0,I.w)(n,"int32"),a=(0,I.w)(a,"int32")),(0,be.assertAndGetBroadcastShape)(n.shape,a.shape);const i={a:n,b:a};return r.T2.runKernel(o.LG0,i)}});const Nt=(0,i.op)({mirrorPad_:function(e,t,n){p.vA("reflect"===n||"symmetric"===n,(()=>"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")));const a=(0,s.YT)(e,"x","mirrorPad");if(0===a.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");p.vA(t.length===a.rank,(()=>"Padding doesn't match input. Must be ".concat(a.rank,". ")+"Got ".concat(t.length,".")));const i="reflect"===n?1:0;for(let r=0;r<a.rank;r++)p.vA(2===t[r].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),p.vA(t[r][0]>=0&&t[r][0]<=a.shape[r]-i&&t[r][1]>=0&&t[r][1]<=a.shape[r]-i,(()=>"Padding in dimension ".concat(r," cannot be greater than or equal ")+"to ".concat(a.shape[r]-i," or less than 0 for input of ")+"shape ".concat(a.shape)));const c={paddings:t,mode:n},l={x:a};return r.T2.runKernel(o.x7F,l,c)}});const Rt=(0,i.op)({mod_:function(e,t){let n=(0,s.YT)(e,"a","mod"),a=(0,s.YT)(t,"b","mod");[n,a]=(0,h.h0)(n,a);const i={a:n,b:a};return r.T2.runKernel(o.BLA,i)}});const At=(0,i.op)({moments_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=(0,s.YT)(e,"x","moments");const a=(0,p.Y6)(t,e.shape),r=St(e,a,n);let o=r.shape;n||(o=(0,Ee.SM)(r.shape,a));const i=Fe(lt((0,I.w)(e,"float32"),(0,C.t)(r,o)));return{mean:r,variance:St(i,a,n)}}});const _t=(0,i.op)({multiRNNCell_:function(e,t,n,a){const r=(0,s.YT)(t,"data","multiRNNCell"),o=(0,s.j1)(n,"c","multiRNNCell"),i=(0,s.j1)(a,"h","multiRNNCell");let c=r;const l=[];for(let s=0;s<e.length;s++){const t=e[s](c,o[s],i[s]);l.push(t[0]),l.push(t[1]),c=t[1]}const u=[],h=[];for(let s=0;s<l.length;s+=2)u.push(l[s]),h.push(l[s+1]);return[u,h]}});const Ot=(0,i.op)({multinomial_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=(0,s.YT)(e,"logits","multinomial"),c=i.size,l=i.rank;if(c<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(c,"."));if(l>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(l));n=n||Math.random();const u={logits:1===l?(0,C.t)(i,[1,-1]):i},h={numSamples:t,seed:n,normalized:a},d=r.T2.runKernel(o.WT3,u,h);return 1===l?(0,C.t)(d,[d.size]):d}});const Ft=(0,i.op)({notEqual_:function(e,t){let n=(0,s.YT)(e,"a","notEqual","string_or_numeric"),a=(0,s.YT)(t,"b","notEqual","string_or_numeric");[n,a]=(0,h.h0)(n,a),(0,be.assertAndGetBroadcastShape)(n.shape,a.shape);const i={a:n,b:a};return r.T2.runKernel(o.ylV,i)}});const Dt=(0,i.op)({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));const c={indices:(0,s.YT)(e,"indices","oneHot","int32")},l={dtype:i,depth:t,onValue:n,offValue:a};return r.T2.runKernel(o.urI,c,l)}});const Lt=(0,i.op)({onesLike_:function(e){const t={x:(0,s.YT)(e,"x","onesLike")};return r.T2.runKernel(o.LWX,t)}});const Mt=(0,i.op)({outerProduct_:function(e,t){const n=(0,s.YT)(e,"v1","outerProduct"),a=(0,s.YT)(t,"v2","outerProduct");p.vA(1===n.rank&&1===a.rank,(()=>"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(a.rank,".")));const r=(0,C.t)(n,[-1,1]),o=(0,C.t)(a,[1,-1]);return _(r,o)}});const Pt=(0,i.op)({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=(0,s.YT)(e,"x","pad");if(0===a.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:t,constantValue:n},c={x:a};return r.T2.runKernel(o.ODT,c,i)}});const zt=(0,i.op)({pad1d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,p.vA)(2===t.length,(()=>"Invalid number of paddings. Must be length of 2.")),Pt(e,[t],n)}});const Bt=(0,i.op)({pad2d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,p.vA)(2===t.length&&2===t[0].length&&2===t[1].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Pt(e,t,n)}});const Wt=(0,i.op)({pad3d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,p.vA)(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Pt(e,t,n)}});const Ut=(0,i.op)({pad4d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,p.vA)(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Pt(e,t,n)}});const Vt=(0,i.op)({spaceToBatchND_:function(e,t,n){const a=(0,s.YT)(e,"x","spaceToBatchND");p.vA(a.rank>=1+t.length,(()=>"input rank ".concat(a.rank," should be > than [blockShape] ").concat(t.length))),p.vA(n.length===t.length,(()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length))),p.vA(a.shape.reduce(((e,a,r)=>r>0&&r<=t.length?e&&(a+n[r-1][0]+n[r-1][1])%t[r-1]===0:e),!0),(()=>"input spatial dimensions ".concat(a.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())));const i={x:a},c={blockShape:t,paddings:n};return r.T2.runKernel(o.A8B,i,c)}});const Gt=(0,i.op)({pool_:function(e,t,n,a,r,o,i){null==r&&(r=[1,1]),null==o&&(o=1),0===a&&(a="valid");const c=(0,s.YT)(e,"x","maxPool");let l=c,u=!1;3===c.rank&&(u=!0,l=(0,C.t)(c,[1,c.shape[0],c.shape[1],c.shape[2]])),p.vA(T.G0(o,r),(()=>"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(r,"'")));const h=T.E6(l.shape,t,o,r,a),d=[h.dilationHeight,h.dilationWidth];let f;f="same"===a?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))),a=n.map((e=>e-1)),r=a.map((e=>Math.floor(e/2))),o=a.map(((e,t)=>e-r[t]));return a.map(((e,t)=>[r[t],o[t]]))}([h.filterHeight,h.filterWidth],d):[[0,0],[0,0]];const m=1===d[0]&&1===d[1],[g,y]=function(e,t,n){const a=n.map((e=>e[0])),r=n.map((e=>e[1])),o=e.concat(a,r),s=t.map(((e,t)=>(e-o[t]%e)%e)),i=r.map(((e,t)=>e+s[t])),c=t.map(((e,t)=>[a[t],i[t]])),l=t.map(((e,t)=>[0,s[t]]));return[c,l]}([h.inHeight,h.inWidth],d,f),b=m?a:"valid",v=m?l:Vt(l,d,g),x=("avg"===n?()=>E(v,t,o,b,i):()=>vt(v,t,o,b,i))(),w=m?x:P(x,d,y);return u?(0,C.t)(w,[w.shape[1],w.shape[2],w.shape[3]]):w}});var jt=n(9855),Ht=n(6574);const Kt=(0,i.op)({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=(0,s.YT)(e,"x","prod");"bool"===a.dtype&&(a=(0,I.w)(a,"int32"));const i={x:a},c={axis:t,keepDims:n};return r.T2.runKernel(o.kdj,i,c)}});const qt=(0,i.op)({raggedGather_:function(e,t,n,a){const i={paramsNestedSplits:e.map(((e,t)=>(0,s.YT)(e,"tensors".concat(t),"raggedGather","int32"))),paramsDenseValues:(0,s.YT)(t,"paramsDenseValues","raggedGather"),indices:(0,s.YT)(n,"indices","raggedGather","int32")},c={outputRaggedRank:a},l=r.T2.runKernel(o.oJ2,i,c);return{outputNestedSplits:l.slice(0,l.length-1),outputDenseValues:l[l.length-1]}}});const Yt=(0,i.op)({raggedTensorToTensor_:function(e,t,n,a,i){const c=(0,s.YT)(e,"shape","raggedTensorToTensor","int32"),l=(0,s.YT)(t,"values","raggedTensorToTensor"),u={shape:c,values:l,defaultValue:(0,s.YT)(n,"defaultValue","raggedTensorToTensor",l.dtype),rowPartitionTensors:a.map(((e,t)=>(0,s.YT)(e,"tensors".concat(t),"raggedTensorToTensor","int32")))},h={rowPartitionTypes:i};return r.T2.runKernel(o.mH5,u,h)}});const Xt=(0,i.op)({rand_:function(e,t,n){const a=(0,p.Ze)(e);let o=null;if(null==n||"float32"===n)o=new Float32Array(a);else if("int32"===n)o=new Int32Array(a);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));o=new Uint8Array(a)}for(let r=0;r<a;r++)o[r]=t();return r.T2.makeTensor(o,e,n)}});var Zt=n(4334);class Qt{constructor(e,t,n,a,r){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=r||Math.random();this.random=Zt.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let a,r,o;do{a=2*this.random()-1,r=2*this.random()-1,o=a*a+r*r}while(o>=1||0===o);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*a*s,t=this.mean+this.stdDev*r*s,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Jt{constructor(e,t,n,a){this.alpha=e,this.beta=1/t,this.dtype=n;const r=a||Math.random();this.randu=Zt.alea(r.toString()),this.randn=new Qt(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,a,r,o;for(;;){do{a=this.randn.nextValue(),o=1+this.c*a}while(o<=0);if(o*=o*o,e=a*a,t=1-.331*e*e,n=.5*e+this.d*(1-o+Math.log(o)),r=this.randu(),r<t||Math.log(r)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class $t{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==a&&(a=Math.random()),"number"===typeof a&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(e," - ").concat(t," <= 1 and dtype is not float"));this.random=Zt.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const en=(0,i.op)({randomGamma_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",r=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==a&&(a="float32"),"float32"!==a&&"int32"!==a)throw new Error("Unsupported data type ".concat(a));const o=new Jt(t,n,a,r),s=(0,H.r)(e,a);for(let i=0;i<s.values.length;i++)s.values[i]=o.nextValue();return s.toTensor()}});const tn=(0,i.op)({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(null!=a&&"bool"===a)throw new Error("Unsupported data type ".concat(a));const o=new Qt(t,n,a,!1,r),s=(0,H.r)(e,a);for(let i=0;i<s.values.length;i++)s.values[i]=o.nextValue();return s.toTensor()}});const nn=(0,i.op)({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return tn(e,0,1,t,n)}});const an=(0,i.op)({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",r=arguments.length>4?arguments[4]:void 0;const o=(0,H.r)(e,a),s=new $t(t,n,null,r);for(let i=0;i<o.values.length;i++)o.values[i]=s.nextValue();return o.toTensor()}});function rn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const s={start:e,stop:t,step:n,dtype:a};return r.T2.runKernel(o.Q6t,{},s)}const on=(0,i.op)({real_:function(e){const t={input:(0,s.YT)(e,"input","real")};return r.T2.runKernel(o.LRy,t)}});const sn=(0,i.op)({reciprocal_:function(e){const t={x:(0,s.YT)(e,"x","reciprocal")};return r.T2.runKernel(o.huO,t)}});var cn=n(5251),ln=n(9721);const un=(0,i.op)({reverse_:function(e,t){const n={x:(0,s.YT)(e,"x","reverse")},a={dims:t};return r.T2.runKernel(o.D7i,n,a)}});const hn=(0,i.op)({reverse1d_:function(e){const t=(0,s.YT)(e,"x","reverse");return p.vA(1===t.rank,(()=>"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,"."))),un(t,0)}});const dn=(0,i.op)({reverse2d_:function(e,t){const n=(0,s.YT)(e,"x","reverse");return p.vA(2===n.rank,(()=>"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,"."))),un(n,t)}});const pn=(0,i.op)({reverse3d_:function(e,t){const n=(0,s.YT)(e,"x","reverse");return p.vA(3===n.rank,(()=>"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,"."))),un(n,t)}});const fn=(0,i.op)({reverse4d_:function(e,t){const n=(0,s.YT)(e,"x","reverse");return p.vA(4===n.rank,(()=>"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,"."))),un(n,t)}});const mn=(0,i.op)({round_:function(e){const t={x:(0,s.YT)(e,"x","round")};return r.T2.runKernel(o.hVg,t)}});const gn=(0,i.op)({rsqrt_:function(e){const t={x:(0,s.YT)(e,"x","rsqrt","float32")};return r.T2.runKernel(o.TOR,t)}});const yn=(0,i.op)({selu_:function(e){const t={x:(0,s.YT)(e,"x","selu")};return r.T2.runKernel(o.u$b,t)}});const bn=(0,i.op)({separableConv2d_:function(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const c=(0,s.YT)(e,"x","separableConv2d"),l=(0,s.YT)(t,"depthwiseFilter","separableConv2d"),u=(0,s.YT)(n,"pointwiseFilter","separableConv2d");let h=c,d=!1;if(3===c.rank&&(d=!0,h=(0,C.t)(c,[1,c.shape[0],c.shape[1],c.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");p.vA(4===h.rank,(()=>"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(h.rank,"."))),p.vA(4===l.rank,(()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(l.rank,"."))),p.vA(4===u.rank,(()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(l.rank,"."))),p.vA(1===u.shape[0],(()=>"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(u.shape[0],"."))),p.vA(1===u.shape[1],(()=>"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(u.shape[1],".")));const f=l.shape[2],m=l.shape[3];p.vA(u.shape[2]===f*m,(()=>"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(f*m,", ")+"but got ".concat(u.shape[2],".")));const g=pe(h,l,a,r,i,o),y=ee(g,u,1,"valid",i);return d?(0,C.t)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}});const vn=async function(e,t){const n=(0,s.YT)(e,"x","setdiff1d"),a=(0,s.YT)(t,"y","setdiff1d");p.vA(n.dtype===a.dtype,(()=>"x and y should have the same dtype, but got x (".concat(n.dtype,") and y (").concat(a.dtype,")."))),p.vA(1===n.rank,(()=>"x should be 1D tensor, but got x (".concat(n.shape,")."))),p.vA(1===a.rank,(()=>"y should be 1D tensor, but got y (".concat(a.shape,").")));const r=await n.data(),o=await a.data(),i=new Set(o);let c=0;for(let s=0;s<r.length;s++)i.has(r[s])||c++;const l=new rt.yl([c],n.dtype),u=new rt.yl([c],"int32");for(let s=0,h=0;s<r.length;s++)i.has(r[s])||(l.values[h]=r[s],u.values[h]=s,h++);return[l.toTensor(),u.toTensor()]};const xn=(0,i.op)({sign_:function(e){const t={x:(0,s.YT)(e,"x","sign")};return r.T2.runKernel(o.YVe,t)}});const wn=(0,i.op)({sin_:function(e){const t={x:(0,s.YT)(e,"x","sin","float32")};return r.T2.runKernel(o.hql,t)}});const kn=(0,i.op)({sinh_:function(e){const t={x:(0,s.YT)(e,"x","sinh")};return r.T2.runKernel(o.J3C,t)}});const Sn=(0,i.op)({slice1d_:function(e,t,n){const a=(0,s.YT)(e,"x","slice1d");return p.vA(1===a.rank,(()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(a.rank," tensor"))),D(a,[t],[n])}});const In=(0,i.op)({slice2d_:function(e,t,n){const a=(0,s.YT)(e,"x","slice2d");return p.vA(2===a.rank,(()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(a.rank," tensor"))),D(a,t,n)}});const Tn=(0,i.op)({slice3d_:function(e,t,n){const a=(0,s.YT)(e,"x","slice3d");return p.vA(3===a.rank,(()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(a.rank," tensor"))),D(a,t,n)}});const Cn=(0,i.op)({slice4d_:function(e,t,n){const a=(0,s.YT)(e,"x","slice4d");return p.vA(4===a.rank,(()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(a.rank," tensor"))),D(a,t,n)}});const En=(0,i.op)({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=(0,s.YT)(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));const a={logits:n},i={dim:t};return r.T2.runKernel(o.rFG,a,i)}});const Nn=(0,i.op)({fft_:function(e){(0,p.vA)("complex64"===e.dtype,(()=>"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")));const t={input:e};return r.T2.runKernel(o.rGP,t)}});const Rn=(0,i.op)({ifft_:function(e){(0,p.vA)("complex64"===e.dtype,(()=>"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")));const t={input:e};return r.T2.runKernel(o.OAQ,t)}});const An=(0,i.op)({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let a;if(t<=2){const r=(0,C.t)(e,[n,t]);a=Rn(r)}else{const r=[n,2*(t-1)],o=(0,C.t)(on(e),[n,t]),s=(0,C.t)(qe(e),[n,t]),i=un(D(o,[0,1],[n,t-2]),1),c=(0,O.l)(un(D(s,[0,1],[n,t-2]),1),(0,_e.d)(-1)),l=A([o,i],1),u=A([s,c],1),h=(0,C.t)((0,X.f)(l,u),[r[0],r[1]]);a=Rn(h)}if(a=on(a),3===e.rank&&0!==e.shape[0]){const t=a,n=e.shape[0];a=(0,C.t)(a,[n,a.shape[0]/n,a.shape[1]]),t.dispose()}return a}});const _n=(0,i.op)({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a={x:(0,s.YT)(e,"x","split")},i={numOrSizeSplits:t,axis:n};return r.T2.runKernel(o.Blb,a,i)}});const On=(0,i.op)({rfft_:function(e,t){(0,p.vA)("float32"===e.dtype,(()=>"The dtype for rfft() must be real value but got ".concat(e.dtype)));let n=e.shape[e.shape.length-1];const a=e.size/n;let r;if(null!=t&&t<n){const a=e.shape.map((e=>0)),o=e.shape.map((e=>e));o[e.shape.length-1]=t,r=D(e,a,o),n=t}else if(null!=t&&t>n){const a=e.shape.map((e=>e));a[e.shape.length-1]=t-n,r=A([e,It(a)],e.shape.length-1),n=t}else r=e;const o=we(r),s=(0,C.t)((0,X.f)(r,o),[a,n]),i=Nn(s),c=Math.floor(n/2)+1,l=on(i),u=qe(i),h=_n(l,[c,n-c],l.shape.length-1),d=_n(u,[c,n-c],u.shape.length-1),f=r.shape.slice();return f[r.shape.length-1]=c,(0,C.t)((0,X.f)(h[0],d[0]),f)}});const Fn=(0,i.op)({squaredDifference_:function(e,t){let n=(0,s.YT)(e,"a","squaredDifference"),a=(0,s.YT)(t,"b","squaredDifference");[n,a]=(0,h.h0)(n,a),(0,be.assertAndGetBroadcastShape)(n.shape,a.shape);const i={a:n,b:a};return r.T2.runKernel(o.Ddj,i,{})}});const Dn=(0,i.op)({squeeze_:function(e,t){const n=(0,s.YT)(e,"x","squeeze","string_or_numeric");return(0,C.t)(n,(0,p.gx)(n.shape,t).newShape)}});const Ln=(0,i.op)({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(0,s.j1)(e,"tensors","stack","string_or_numeric");p.vA(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&p.vA(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const a=n,i={axis:t};return r.T2.runKernel(o.mM$,a,i)}});var Mn=n(319);const Pn=(0,i.op)({stridedSlice_:function(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const d={x:(0,s.YT)(e,"x","stridedSlice","string_or_numeric")},p={begin:t,end:n,strides:a,beginMask:i,endMask:c,ellipsisMask:l,newAxisMask:u,shrinkAxisMask:h};return r.T2.runKernel(o.UcO,d,p)}});const zn=(0,i.op)({tan_:function(e){const t={x:(0,s.YT)(e,"x","tan","float32")};return r.T2.runKernel(o.oFs,t)}});var Bn=n(8032),Wn=n(9914);function Un(e,t){(0,p.HO)(e);const n=(0,s.MZ)(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,Wn.Q)(e,null,n,t)}function Vn(e,t,n){if((0,p.HO)(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const a=(0,s.MZ)(e,n);if(2!==a.length&&1!==a.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,Wn.Q)(e,t,a,n)}var Gn=n(5395);function jn(e,t,n){if((0,p.HO)(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const a=(0,s.MZ)(e,n);if(4!==a.length&&1!==a.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return(0,Wn.Q)(e,t,a,n)}function Hn(e,t,n){if((0,p.HO)(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const a=(0,s.MZ)(e,n);if(5!==a.length&&1!==a.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return(0,Wn.Q)(e,t,a,n)}function Kn(e,t,n){if((0,p.HO)(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const a=(0,s.MZ)(e,n);if(6!==a.length&&1!==a.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||a,(0,Wn.Q)(e,t,a,n)}const qn=(0,i.op)({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=(0,s.YT)(e,"x","topk");if(0===a.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const i=a.shape[a.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>i)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(i,") ")+"but got ".concat(t));const c={x:a},l={k:t,sorted:n},[u,h]=r.T2.runKernel(o.TBb,c,l);return{values:u,indices:h}}});const Yn=(0,i.op)({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(null!=a&&"bool"===a)throw new Error("Unsupported data type $ { dtype }");const o=new Qt(t,n,a,!0,r),s=(0,H.r)(e,a);for(let i=0;i<s.values.length;i++)s.values[i]=o.nextValue();return s.toTensor()}});const Xn=(0,i.op)({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(0,s.YT)(e,"x","unique","string_or_numeric");(0,p.vA)(n.rank>0,(()=>"The input tensor must be at least 1D"));const a={x:n},i={axis:t},[c,l]=r.T2.runKernel(o.EwU,a,i);return{values:c,indices:l}}});const Zn=(0,i.op)({unsortedSegmentSum_:function(e,t,n){const a=(0,s.YT)(e,"x","unsortedSegmentSum"),i=(0,s.YT)(t,"segmentIds","unsortedSegmentSum","int32");(0,p.vA)((0,p.E6)(n),(()=>"numSegments must be of dtype int"));const c={x:a,segmentIds:i},l={numSegments:n};return r.T2.runKernel(o.pPe,c,l)}});const Qn=(0,i.op)({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(0,s.YT)(e,"x","unstack","string_or_numeric");p.vA(t>=-n.shape.length&&t<n.shape.length,(()=>"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")));const a={value:n},i={axis:t};return r.T2.runKernel(o.dXR,a,i)}});function Jn(e,t){return yt(e,t,"right")}function $n(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return r.T2.makeVariable(e,t,n,a)}var ea=n(9286);const ta=async function(e){const t=(0,s.YT)(e,"condition","whereAsync","bool"),n=await t.data(),a=(0,ea.Y)(t.shape,n);return e!==t&&t.dispose(),a};const na=async function(e,t,n){const a=(0,s.YT)(e,"tensor","boolMask"),r=(0,s.YT)(t,"mask","boolMask","bool"),o=null==n?0:n,i=r.rank,c=a.shape;p.vA(i>0,(()=>"mask cannot be scalar")),p.O3(c.slice(o,o+i),r.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let s=o;s<o+i;s++)l*=c[s];const u=c.slice(0,o).concat([l],c.slice(o+i)),h=(0,C.t)(a,u),d=(0,C.t)(r,[-1]),f=await ta(d),m=Dn(f,[1]),g=je(h,m,o);return e!==a&&a.dispose(),t!==r&&r.dispose(),m.dispose(),h.dispose(),d.dispose(),f.dispose(),g};var aa=n(8046);const ra=(0,i.op)({transpose_:function(e,t,n){const a=(0,s.YT)(e,"x","transpose");if(null==t&&(t=a.shape.map(((e,t)=>t)).reverse()),p.vA(a.rank===t.length,(()=>"Error in transpose: rank of input ".concat(a.rank," ")+"must match length of perm ".concat(t,"."))),t.forEach((e=>{p.vA(e>=0&&e<a.rank,(()=>"All entries in 'perm' must be between 0 and ".concat(a.rank-1)+" but got ".concat(t)))})),a.rank<=1)return a.clone();const i={x:a},c={perm:t};return"complex64"===a.dtype?(0,aa.DZ)((()=>{let e=on(a),t=qe(a);return e=r.T2.runKernel(o.wx0,{x:e},c),t=r.T2.runKernel(o.wx0,{x:t},c),n&&(t=st(t)),(0,X.f)(e,t)})):r.T2.runKernel(o.wx0,i,c)}});const oa=(0,i.op)({movingAverage_:function(e,t,n,a){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const o=(0,s.YT)(e,"v","movingAverage"),i=(0,s.YT)(t,"x","movingAverage"),c=(0,s.YT)(n,"decay","movingAverage");(0,h.rt)(o,i),p.vA(p.r1(o.shape,i.shape),(()=>"Shape mismatch in v and x"));const l=(0,_e.d)(1),u=lt(l,c);let f=(0,O.l)(lt(i,o),u);if(r){p.vA(null!=a,(()=>"When using zeroDebias: true, step is required."));const e=(0,s.YT)(a,"step","movingAverage");f=ye(f,lt(l,Ae(c,e)))}return d(o,f)}});var sa=n(4083);const ia=(0,i.op)({scatterND_:function(e,t,n){const a=(0,s.YT)(e,"indices","scatterND","int32"),i=(0,s.YT)(t,"updates","scatterND");sa.TT(i,a,n);const c={indices:a,updates:i},l={shape:n};return r.T2.runKernel(o.pJc,c,l)}});const ca=(0,i.op)({sparseToDense_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=(0,s.YT)(e,"sparseIndices","sparseToDense","int32"),c=(0,s.YT)(t,"sparseValues","sparseToDense","string_or_numeric"),l=(0,s.YT)(a,"defaultValue","sparseToDense",c.dtype);!function(e,t,n,a){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));const r=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(o,"."));const s=t.size;if(0!==t.rank&&(1!==t.rank||s!==r))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(r,"]"));if(t.dtype!==a.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,c,n,l);const u={sparseIndices:i,sparseValues:c,defaultValue:l},h={outputShape:n};return r.T2.runKernel(o.jgd,u,h)}});const la=(0,i.op)({gatherND_:function(e,t){const n=(0,s.YT)(t,"indices","gatherND","int32"),a={params:(0,s.YT)(e,"x","gatherND","string_or_numeric"),indices:n};return r.T2.runKernel(o.O4G,a)}});const ua=(0,i.op)({dropout_:function(e,t,n,a){const r=(0,s.YT)(e,"x","dropout");if(p.vA("float32"===r.dtype,(()=>"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(r.dtype," tensor instead."))),p.vA(t>=0&&t<1,(()=>"rate must be a float in the range [0, 1), but got ".concat(t,"."))),0===t)return e instanceof rt.qY?r.clone():r;const o=function(e,t){if(null==t)return e.shape.slice();if(p.r1(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let a=0;a<e.shape.length;a++)null==t[a]&&null!=e.shape[a]?n.push(e.shape[a]):n.push(t[a]);return n}return t}(r,n),i=1-t,c=ye(Ge(d(an(o,0,1,"float32",a),i)),i);return(0,O.l)(r,c)}});function ha(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function da(e,t,n){const a=1-e%2,r=new Float32Array(e);for(let o=0;o<e;++o){const s=2*Math.PI*o/(e+a-1);r[o]=t-n*Math.cos(s)}return Un(r,"float32")}const pa=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const a=(0,s.YT)(e,"predictions","inTopK"),r=(0,s.YT)(t,"targets","inTopK");(0,p.vA)(a.rank>1,(()=>"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank))),(0,p.vA)(a.rank-1===r.rank,(()=>"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(r.rank))),(0,p.O3)(a.shape.slice(0,a.shape.length-1),r.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const o=a.shape[a.shape.length-1];(0,p.vA)(n>0&&n<=o,(()=>"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(n)));const i=await a.data(),c=await r.data(),[l,u]=[i.length/o,o],h=(0,p.ce)("bool",l);for(let s=0;s<l;s++){const e=s*u,t=i.subarray(e,e+u),a=[];for(let n=0;n<t.length;n++)a.push({value:t[n],index:n});a.sort(((e,t)=>t.value-e.value)),h[s]=0;for(let r=0;r<n;r++)if(a[r].index===c[s]){h[s]=1;break}}return e!==a&&a.dispose(),t!==r&&r.dispose(),(0,Bn.O)(h,r.shape,"bool")};const fa=(0,i.op)({conv2DBackpropFilter_:function(e,t,n,a,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",c=arguments.length>6?arguments[6]:void 0,l=e;3===e.rank&&(l=(0,C.t)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;3===u.rank&&(u=(0,C.t)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),p.vA(4===l.rank,(()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(l.shape,"."))),p.vA(4===u.rank,(()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,"."))),p.vA(4===n.length,(()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")));const h="NHWC"===i?l.shape[3]:l.shape[1],d="NHWC"===i?u.shape[3]:u.shape[1];p.vA(h===n[2],(()=>"Error in conv2dDerFilter: depth of input ".concat(h,") must ")+"match input depth in filter (".concat(n[2],"."))),p.vA(d===n[3],(()=>"Error in conv2dDerFilter: depth of dy (".concat(d,") must ")+"match output depth for filter (".concat(n[3],")."))),T.s_("conv2dDerFilter",s,c);const f={x:l,dy:u},m={strides:a,pad:s,dataFormat:i,dimRoundingMode:c,filterShape:n};return r.T2.runKernel(o.rFm,f,m)}});var ma=n(7905);const ga=(0,i.op)({fusedConv2d_:function(e){let{x:t,filter:n,strides:a,pad:i,dataFormat:c="NHWC",dilations:l=[1,1],dimRoundingMode:u,bias:f,activation:m="linear",preluActivationWeights:g,leakyreluAlpha:y}=e;if(m=m||"linear",!1===(0,ma.zE)(r.T2.state.gradientDepth,m)){p.vA("NHWC"===c,(()=>"Error in fused conv2d: got dataFormat of ".concat(c," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."));let e=ee(t,n,a,i,c,l,u);return null!=f&&(e=d(e,f)),(0,ma.f2)(e,m,g,y)}const b=(0,s.YT)(t,"x","conv2d","float32"),v=(0,s.YT)(n,"filter","conv2d","float32");let x=b,w=!1;3===b.rank&&(w=!0,x=(0,C.t)(b,[1,b.shape[0],b.shape[1],b.shape[2]])),p.vA(4===x.rank,(()=>"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(x.rank,"."))),p.vA(4===v.rank,(()=>"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(v.rank,"."))),T.s_("fused conv2d",i,u);const k="NHWC"===c?x.shape[3]:x.shape[1];p.vA(v.shape[2]===k,(()=>"Error in conv2d: depth of input (".concat(k,") must match ")+"input depth for filter ".concat(v.shape[2],"."))),p.vA(T.G0(a,l),(()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(l,"'")));const S=T.uf(x.shape,v.shape,a,l,i,u);let I,E;if(null!=f&&(I=(0,s.YT)(f,"bias","fused conv2d"),[I]=(0,h.h0)(I,b),"NHWC"===c?be.assertAndGetBroadcastShape(S.outShape,I.shape):(p.vA(I.shape.length<=1,(()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(I.shape.length,"."))),p.vA(0===I.shape.length||I.shape[0]===S.outChannels||1===I.shape[0],(()=>"Error in fused conv2d: bias shape (".concat(I.shape,") is not ")+"compatible with the number of output channels "+"(".concat(S.outChannels,")"))))),null!=g){const e=g.shape;if(p.vA(e.length<=1||3===e.length,(()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(e.length,"."))),1===e.length)p.vA(1===e[0]||e[0]===S.outChannels,(()=>"Error in fused conv2d: PReLU activation weights "+"(".concat(e,") is not compatible with the number of output ")+"channels (".concat(S.outChannels,").")));else if(3===e.length)try{be.assertAndGetBroadcastShape(e,S.outShape)}catch(_){const t="Error in fused conv2d: PReLU activation weights (".concat(e,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(S.outShape,").");throw Error(t)}E=(0,s.YT)(g,"prelu weights","fused conv2d")}const N=(e,t)=>{p.vA("NHWC"===c,(()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(c," but only NHWC is currently supported.")));const[n,r,o,s]=t,u=(0,ma.XB)(e,o,m);p.vA(T.Dh(l),(()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(l,"'")));const h=[ne(r.shape,u,n,a,i),fa(r,u,n.shape,a,i)];if(null!=s){const e=(0,ma.Do)(s,u);h.push(e)}return h},R={x:x,filter:v,bias:I,preluActivationWeights:E},A={strides:a,pad:i,dataFormat:c,dilations:l,dimRoundingMode:u,activation:m,leakyreluAlpha:y};if(null==f){const e=ot(((e,t,n)=>{let a=r.T2.runKernel(o.aAr,R,A);return n([t,e,a]),w&&(a=(0,C.t)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:N}}));return e(x,v)}{const e=ot(((e,t,n,a)=>{let s=r.T2.runKernel(o.aAr,R,A);return a([t,e,s,n]),w&&(s=(0,C.t)(s,[s.shape[1],s.shape[2],s.shape[3]])),{value:s,gradFunc:N}}));return e(x,v,I)}}});const ya=(0,i.op)({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,a,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=e;3===e.rank&&(l=(0,C.t)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;3===u.rank&&(u=(0,C.t)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const h={x:l,dy:u},d={strides:a,pad:s,dimRoundingMode:c,dilations:i,filterShape:n};return r.T2.runKernel(o.X$8,h,d)}});const ba=(0,i.op)({depthwiseConv2dNativeBackpropInput_:function(e,t,n,a,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=t,u=!1;3===t.rank&&(u=!0,l=(0,C.t)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const h={dy:l,filter:n},d={strides:a,pad:s,dimRoundingMode:c,dilations:i,inputShape:e},p=r.T2.runKernel(o.nVu,h,d);return u?(0,C.t)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});const va=(0,i.op)({fusedDepthwiseConv2d_:function(e){let{x:t,filter:n,strides:a,pad:i,dataFormat:c="NHWC",dilations:l=[1,1],dimRoundingMode:u,bias:f,activation:m="linear",preluActivationWeights:g,leakyreluAlpha:y}=e;if(!1===(0,ma.zE)(r.T2.state.gradientDepth,m)){let e=pe(t,n,a,i,c,l,u);return null!=f&&(e=d(e,f)),(0,ma.f2)(e,m,g,y)}const b=(0,s.YT)(t,"x","depthwiseConv2d","float32"),v=(0,s.YT)(n,"filter","depthwiseConv2d","float32");let x=b,w=!1;3===b.rank&&(w=!0,x=(0,C.t)(b,[1,b.shape[0],b.shape[1],b.shape[2]])),p.vA(4===x.rank,(()=>"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(x.rank,"."))),p.vA(4===v.rank,(()=>"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(v.rank,"."))),p.vA(x.shape[3]===v.shape[2],(()=>"Error in fused depthwiseConv2d: number of input channels "+"(".concat(x.shape[3],") must match the inChannels dimension in ")+"filter ".concat(v.shape[2],"."))),null==l&&(l=[1,1]),p.vA(T.G0(a,l),(()=>"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(a," and dilations '").concat(l,"'"))),T.s_("fused depthwiseConv2d",i,u);const k=T.uf(x.shape,v.shape,a,l,i,u,!0);let S,I;null!=f&&(S=(0,s.YT)(f,"bias","fused conv2d"),[S]=(0,h.h0)(S,b),be.assertAndGetBroadcastShape(k.outShape,S.shape)),null!=g&&(I=(0,s.YT)(g,"prelu weights","fused depthwiseConv2d"));const E=(e,t)=>{p.vA(T.Dh(l),(()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(l,"'")));const[n,r,o,s]=t,c=(0,ma.XB)(e,o,m),h=ba(r.shape,c,n,a,i,l,u),d=ya(r,c,n.shape,a,i,l,u);if(null!=s){return[h,d,(0,ma.Do)(S,c)]}return[h,d]},N={x:x,filter:v,bias:S,preluActivationWeights:I},R={strides:a,pad:i,dataFormat:c,dilations:l,dimRoundingMode:u,activation:m,leakyreluAlpha:y};if(null==f){const e=ot(((e,t,n)=>{let a=r.T2.runKernel(o.T7M,N,R);return n([t,e,a]),w&&(a=(0,C.t)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:E}}));return e(x,v)}{const e=ot(((e,t,n,a)=>{let s=r.T2.runKernel(o.T7M,N,R);return a([t,e,s,n]),w&&(s=(0,C.t)(s,[s.shape[1],s.shape[2],s.shape[3]])),{value:s,gradFunc:E}}));return e(x,v,S)}}});const xa=(0,i.op)({fusedMatMul_:function(e){let{a:t,b:n,transposeA:a=!1,transposeB:i=!1,bias:c,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:f=.2}=e;if(!1===(0,ma.zE)(r.T2.state.gradientDepth,l)){let e=_(t,n,a,i);return null!=c&&(e=d(e,c)),(0,ma.f2)(e,l,u,f)}let m=(0,s.YT)(t,"a","fused matMul"),g=(0,s.YT)(n,"b","fused matMul");[m,g]=(0,h.h0)(m,g);const y=a?m.shape[m.rank-2]:m.shape[m.rank-1],b=i?g.shape[g.rank-1]:g.shape[g.rank-2],v=a?m.shape[m.rank-1]:m.shape[m.rank-2],x=i?g.shape[g.rank-2]:g.shape[g.rank-1],w=m.shape.slice(0,-2),k=g.shape.slice(0,-2),S=p.Ze(w),I=p.Ze(k);p.vA(y===b,(()=>"Error in fused matMul: inner shapes (".concat(y,") and (")+"".concat(b,") of Tensors with shapes ").concat(m.shape," and ")+"".concat(g.shape," and transposeA=").concat(a)+" and transposeB=".concat(i," must match.")));const T=be.assertAndGetBroadcastShape(m.shape.slice(0,-2),g.shape.slice(0,-2)).concat([v,x]),E=a?(0,C.t)(m,[S,y,v]):(0,C.t)(m,[S,v,y]),N=i?(0,C.t)(g,[I,x,b]):(0,C.t)(g,[I,b,x]);let R,A;null!=c&&(R=(0,s.YT)(c,"bias","fused matMul"),[R]=(0,h.h0)(R,m),be.assertAndGetBroadcastShape(T,R.shape)),null!=u&&(A=(0,s.YT)(u,"prelu weights","fused matMul"));const O=(e,t)=>{const[n,r,o,s]=t,u=(0,ma.XB)((0,C.t)(e,o.shape),o,l);let h,d;if(a||i?!a&&i?(h=_(u,r,!1,!1),d=_(u,n,!0,!1)):a&&!i?(h=_(r,u,!1,!0),d=_(n,u,!1,!1)):(h=_(r,u,!0,!0),d=_(u,n,!0,!0)):(h=_(u,r,!1,!0),d=_(n,u,!0,!1)),null!=c){return[h,d,(0,ma.Do)(s,u)]}return[h,d]},F={a:E,b:N,bias:R,preluActivationWeights:A},D={transposeA:a,transposeB:i,activation:l,leakyreluAlpha:f};if(null==c){const e=ot(((e,t,n)=>{const a=r.T2.runKernel(o.Dr,F,D);return n([e,t,a]),{value:(0,C.t)(a,T),gradFunc:O}}));return e(E,N)}{const e=ot(((e,t,n,a)=>{const s=r.T2.runKernel(o.Dr,F,D);return a([e,t,s,n]),{value:(0,C.t)(s,T),gradFunc:O}}));return e(E,N,R)}}});const wa=(0,i.op)({hammingWindow_:function(e){return da(e,.54,.46)}});const ka=(0,i.op)({hannWindow_:function(e){return da(e,.5,.5)}});const Sa=(0,i.op)({frame_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=0;const s=[];for(;o+t<=e.size;)s.push(D(e,o,t)),o+=n;if(a)for(;o<e.size;){const a=o+t-e.size,i=A([D(e,o,t-a),q([a],r)]);s.push(i),o+=n}return 0===s.length?Vn([],[0,t]):(0,C.t)(A(s),[s.length,t])}});const Ia=(0,i.op)({stft_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ka;null==a&&(a=ha(t));const o=Sa(e,t,n),s=(0,O.l)(o,r(t));return On(s,a)}});const Ta=(0,i.op)({cropAndResize_:function(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const l=(0,s.YT)(e,"image","cropAndResize"),u=(0,s.YT)(t,"boxes","cropAndResize","float32"),h=(0,s.YT)(n,"boxInd","cropAndResize","int32"),d=u.shape[0];p.vA(4===l.rank,(()=>"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(l.rank,"."))),p.vA(2===u.rank&&4===u.shape[1],(()=>"Error in cropAndResize: boxes must be have size [".concat(d,",4] ")+"but had shape ".concat(u.shape,"."))),p.vA(1===h.rank&&h.shape[0]===d,(()=>"Error in cropAndResize: boxInd must be have size [".concat(d,"] ")+"but had shape ".concat(u.shape,"."))),p.vA(2===a.length,(()=>"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(a.length,"."))),p.vA(a[0]>=1&&a[1]>=1,(()=>"cropSize must be atleast [1,1], but was ".concat(a))),p.vA("bilinear"===i||"nearest"===i,(()=>"method must be bilinear or nearest, but was ".concat(i)));const f={image:l,boxes:u,boxInd:h},m={method:i,extrapolationValue:c,cropSize:a};return r.T2.runKernel(o.MRQ,f,m)}});const Ca=(0,i.op)({flipLeftRight_:function(e){const t=(0,s.YT)(e,"image","flipLeftRight","float32");p.vA(4===t.rank,(()=>"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")));const n={image:t};return r.T2.runKernel(o.BxF,n,{})}});const Ea=(0,i.op)({grayscaleToRGB_:function(e){const t=(0,s.YT)(e,"image","grayscaleToRGB"),n=t.rank-1,a=t.shape[n];p.vA(t.rank>=2,(()=>"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,"."))),p.vA(1===a,(()=>"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(a,".")));const r=new Array(t.rank);return r.fill(1,0,n),r[n]=3,Ue(t,r)}});const Na=(0,i.op)({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const i=(0,s.YT)(e,"image","rotateWithOffset","float32");p.vA(4===i.rank,(()=>"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(i.rank,".")));const c={image:i},l={radians:t,fillValue:n,center:a};return r.T2.runKernel(o.BK4,c,l)}});function Ra(e,t,n,a,r,o){null==a&&(a=.5),null==r&&(r=Number.NEGATIVE_INFINITY),null==o&&(o=0);const s=e.shape[0];return n=Math.min(n,s),p.vA(0<=a&&a<=1,(()=>"iouThreshold must be in [0, 1], but was '".concat(a,"'"))),p.vA(2===e.rank,(()=>"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'"))),p.vA(4===e.shape[1],(()=>"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1]))),p.vA(1===t.rank,(()=>"scores must be a 1D tensor")),p.vA(t.shape[0]===s,(()=>"scores has incompatible shape with boxes. Expected ".concat(s,", ")+"but was ".concat(t.shape[0]))),p.vA(0<=o&&o<=1,(()=>"softNmsSigma must be in [0, 1], but was '".concat(o,"'"))),{maxOutputSize:n,iouThreshold:a,scoreThreshold:r,softNmsSigma:o}}const Aa=(0,i.op)({nonMaxSuppression_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const c=(0,s.YT)(e,"boxes","nonMaxSuppression","float32"),l=(0,s.YT)(t,"scores","nonMaxSuppression","float32"),u=Ra(c,l,n,a,i);n=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold;const h={maxOutputSize:n,iouThreshold:a,scoreThreshold:i};return r.T2.runKernel(o.SDM,{boxes:c,scores:l},h)}});var _a=n(6692);const Oa=async function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const o=(0,s.YT)(e,"boxes","nonMaxSuppressionAsync"),i=(0,s.YT)(t,"scores","nonMaxSuppressionAsync"),c=Ra(o,i,n,a,r);n=c.maxOutputSize,a=c.iouThreshold,r=c.scoreThreshold;const l=await Promise.all([o.data(),i.data()]),u=l[0],h=l[1],{selectedIndices:d}=(0,_a.c7)(u,h,n,a,r);return o!==e&&o.dispose(),i!==t&&i.dispose(),Un(d,"int32")};const Fa=(0,i.op)({nonMaxSuppressionWithScore_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const l=(0,s.YT)(e,"boxes","nonMaxSuppression"),u=(0,s.YT)(t,"scores","nonMaxSuppression"),h=Ra(l,u,n,a,i,c);n=h.maxOutputSize,a=h.iouThreshold,i=h.scoreThreshold,c=h.softNmsSigma;const d={boxes:l,scores:u},p={maxOutputSize:n,iouThreshold:a,scoreThreshold:i,softNmsSigma:c},f=r.T2.runKernel(o.e0f,d,p);return{selectedIndices:f[0],selectedScores:f[1]}}});const Da=async function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=(0,s.YT)(e,"boxes","nonMaxSuppressionAsync"),c=(0,s.YT)(t,"scores","nonMaxSuppressionAsync"),l=Ra(i,c,n,a,r,o);n=l.maxOutputSize,a=l.iouThreshold,r=l.scoreThreshold,o=l.softNmsSigma;const u=await Promise.all([i.data(),c.data()]),h=u[0],d=u[1],{selectedIndices:p,selectedScores:f}=(0,_a.ut)(h,d,n,a,r,o);return i!==e&&i.dispose(),c!==t&&c.dispose(),{selectedIndices:Un(p,"int32"),selectedScores:Un(f)}};const La=(0,i.op)({nonMaxSuppressionPadded_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const l=(0,s.YT)(e,"boxes","nonMaxSuppression"),u=(0,s.YT)(t,"scores","nonMaxSuppression"),h=Ra(l,u,n,a,i,null),d={boxes:l,scores:u},p={maxOutputSize:h.maxOutputSize,iouThreshold:h.iouThreshold,scoreThreshold:h.scoreThreshold,padToMaxOutputSize:c},f=r.T2.runKernel(o.Zl4,d,p);return{selectedIndices:f[0],validOutputs:f[1]}}});const Ma=async function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=(0,s.YT)(e,"boxes","nonMaxSuppressionAsync"),c=(0,s.YT)(t,"scores","nonMaxSuppressionAsync"),l=Ra(i,c,n,a,r,null),u=l.maxOutputSize,h=l.iouThreshold,d=l.scoreThreshold,[p,f]=await Promise.all([i.data(),c.data()]),{selectedIndices:m,validOutputs:g}=(0,_a.ZS)(p,f,u,h,d,o);return i!==e&&i.dispose(),c!==t&&c.dispose(),{selectedIndices:Un(m,"int32"),validOutputs:(0,_e.d)(g,"int32")}};const Pa=(0,i.op)({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=(0,s.YT)(e,"images","resizeBilinear");p.vA(3===i.rank||4===i.rank,(()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(i.rank,"."))),p.vA(2===t.length,(()=>"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,"."))),p.vA(!1===a||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let c=i,l=!1;3===i.rank&&(l=!0,c=(0,C.t)(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=t,u={images:c},h={alignCorners:n,halfPixelCenters:a,size:t},d=r.T2.runKernel(o.hgw,u,h);return l?(0,C.t)(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const za=(0,i.op)({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=(0,s.YT)(e,"images","resizeNearestNeighbor");p.vA(3===i.rank||4===i.rank,(()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(i.rank,"."))),p.vA(2===t.length,(()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,"."))),p.vA("float32"===i.dtype||"int32"===i.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),p.vA(!1===a||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let c=i,l=!1;3===i.rank&&(l=!0,c=(0,C.t)(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=t,u={images:c},h={alignCorners:n,halfPixelCenters:a,size:t},d=r.T2.runKernel(o.jOE,u,h);return l?(0,C.t)(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const Ba=(0,i.op)({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const r=(0,s.YT)(e,"image","threshold"),o=r.shape[0]*r.shape[1];let i,c,l,u,h=(0,O.l)(Un([a]),255);if(p.vA(3===r.rank,(()=>"Error in threshold: image must be rank 3,"+"but got rank ".concat(r.rank,"."))),p.vA(3===r.shape[2]||1===r.shape[2],(()=>"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(r.shape[2],"."))),p.vA("int32"===r.dtype||"float32"===r.dtype,(()=>"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(r.dtype,"."))),p.vA("otsu"===t||"binary"===t,(()=>"Method must be binary or otsu, but was ".concat(t))),3===r.shape[2]){[i,c,l]=_n(r,[1,1,1],-1);const e=(0,O.l)(i,.2989),t=(0,O.l)(c,.587),n=(0,O.l)(l,.114);u=d(d(e,t),n)}else u=e;if("otsu"===t){h=function(e,t){let n,a,r,o,s,i,c=Un([-1]),l=Un([0]),u=Un([0]);for(let h=0;h<e.size-1;h++){n=D(e,0,h+1),a=D(e,h+1),s=ye((0,De.c)(n),t),i=ye((0,De.c)(a),t);const p=(0,De.c)((0,O.l)(n,rn(0,n.size)));r=ye(p,(0,De.c)(n));const f=q(a.shape,n.size),m=d(rn(0,a.size),f),g=(0,O.l)(a,m);o=ye((0,De.c)(g),(0,De.c)(a));const y=lt(r,o),b=lt(r,o),v=(0,O.l)(s,i);u=(0,O.l)((0,O.l)(v,y),b);const x=He(u,l);l=xe(x,u,l),c=xe(x,Un([h]),c)}return c}(V((0,I.w)(mn(u),"int32"),(0,Bn.O)([]),256),o)}const f=n?$e(u,h):He(u,h);return(0,I.w)((0,O.l)(f,255),"int32")}});const Wa=(0,i.op)({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5?arguments[5]:void 0;const l=(0,s.YT)(e,"image","transform","float32"),u=(0,s.YT)(t,"transforms","transform","float32");p.vA(4===l.rank,(()=>"Error in transform: image must be rank 4,"+"but got rank ".concat(l.rank,"."))),p.vA(2===u.rank&&(u.shape[0]===l.shape[0]||1===u.shape[0])&&8===u.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),p.vA(null==c||2===c.length,(()=>"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(c,".")));const h={image:l,transforms:u},d={interpolation:n,fillMode:a,fillValue:i,outputShape:c};return r.T2.runKernel(o.dLy,h,d)}});const Ua=(0,i.op)({bandPart_:function(e,t,n){(0,p.vA)(t%1===0,(()=>"bandPart(): numLower must be an integer, got ".concat(t,"."))),(0,p.vA)(n%1===0,(()=>"bandPart(): numUpper must be an integer, got ".concat(n,".")));const a=(0,s.YT)(e,"a","bandPart");(0,p.vA)(a.rank>=2,(()=>"bandPart(): Rank must be at least 2, got ".concat(a.rank,".")));const r=a.shape,[o,i]=a.shape.slice(-2);if(!(t<=o))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,")."));if(!(n<=i))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(i,")."));t<0&&(t=o),n<0&&(n=i);const c=(0,C.t)(rn(0,o,1,"int32"),[-1,1]),l=rn(0,i,1,"int32"),u=lt(c,l),h=dt($e(u,(0,_e.d)(+t,"int32")),Ke(u,(0,_e.d)(-n,"int32"))),d=It([o,i],a.dtype);return(0,C.t)(Ln(Qn((0,C.t)(a,[-1,o,i])).map((e=>xe(h,e,d)))),r)}});const Va=(0,i.op)({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,(0,p.vA)(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)(0,p.vA)(e[t].shape[0]===n,(()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")))}else t=!0,e=_n(e,e.shape[0],0).map((e=>Dn(e,[0])));(0,p.vA)(e.length<=e[0].shape[0],(()=>"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")));const n=[],a=e;for(let o=0;o<e.length;++o)n.push(r.T2.tidy((()=>{let e=a[o];if(o>0)for(let t=0;t<o;++t){const a=(0,O.l)((0,De.c)((0,O.l)(n[t],e)),n[t]);e=lt(e,a)}return ye(e,Me(e,"euclidean"))})));return t?Ln(n,0):n}});function Ga(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.T2.tidy((()=>{(0,p.vA)(2===e.shape.length,(()=>"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")));const n=e.shape[0],a=e.shape[1];let o=Ve(n),s=(0,R.o)(e);const i=Vn([[1]],[1,1]);let c=(0,R.o)(i);const l=n>=a?a:n;for(let e=0;e<l;++e){const t=s,l=c,u=o;[c,s,o]=r.T2.tidy((()=>{const t=D(s,[e,e],[n-e,1]),r=Me(t),l=D(s,[e,e],[1,1]),u=xe(He(l,0),Vn([[-1]]),Vn([[1]])),h=lt(l,(0,O.l)(u,r)),d=ye(t,h);c=1===d.shape[0]?(0,R.o)(i):A([i,D(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const p=st(ye(_(u,h),r)),f=D(s,[e,0],[n-e,a]),m=(0,O.l)(p,c),g=ra(c);if(0===e)s=lt(f,_(m,_(g,f)));else{const t=lt(f,_(m,_(g,f)));s=A([D(s,[0,0],[e,a]),t],0)}const y=ra(m),b=D(o,[0,e],[n,o.shape[1]-e]);if(0===e)o=lt(b,_(_(b,c),y));else{const t=lt(b,_(_(b,c),y));o=A([D(o,[0,0],[n,e]),t],1)}return[c,s,o]})),(0,aa.AS)([t,l,u])}return!t&&n>a&&(o=D(o,[0,0],[n,a]),s=D(s,[0,0],[a,a])),[o,s]}))}const ja=(0,i.op)({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,p.vA)(e.rank>=2,(()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank))),2===e.rank)return Ga(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),a=Qn((0,C.t)(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),r=[],o=[];a.forEach((e=>{const[n,a]=Ga(e,t);r.push(n),o.push(a)}));return[(0,C.t)(Ln(r,0),e.shape),(0,C.t)(Ln(o,0),e.shape)]}}});var Ha;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Ha||(Ha={}));const Ka=(0,i.op)({computeWeightedLoss_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ha.SUM_BY_NONZERO_WEIGHTS;const a=(0,s.YT)(e,"losses","computeWeightedLoss");let r=null;null!=t&&(r=(0,s.YT)(t,"weights","computeWeightedLoss"));const o=null==r?a:(0,O.l)(a,r);if(n===Ha.NONE)return o;if(n===Ha.SUM)return(0,De.c)(o);if(n===Ha.MEAN){if(null==r)return St(o);{const e=a.size/r.size,t=ye((0,De.c)(o),(0,De.c)(r));return e>1?ye(t,(0,_e.d)(e)):t}}if(n===Ha.SUM_BY_NONZERO_WEIGHTS){if(null==r)return ye((0,De.c)(o),(0,_e.d)(a.size));{const e=(0,O.l)(r,Tt(a.shape)),t=(0,I.w)((0,De.c)(Ft(e,(0,_e.d)(0))),"float32");return ye((0,De.c)(o),t)}}throw Error("Unknown reduction: ".concat(n))}});const qa=(0,i.op)({absoluteDifference_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ha.SUM_BY_NONZERO_WEIGHTS;const r=(0,s.YT)(e,"labels","absoluteDifference"),o=(0,s.YT)(t,"predictions","absoluteDifference");let i=null;null!=n&&(i=(0,s.YT)(n,"weights","absoluteDifference")),(0,p.O3)(r.shape,o.shape,"Error in absoluteDifference: ");const l=c(lt(r,o));return Ka(l,i,a)}});const Ya=(0,i.op)({cosineDistance_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ha.SUM_BY_NONZERO_WEIGHTS;const o=(0,s.YT)(e,"labels","cosineDistance"),i=(0,s.YT)(t,"predictions","cosineDistance");let c=null;null!=a&&(c=(0,s.YT)(a,"weights","cosineDistance")),(0,p.O3)(o.shape,i.shape,"Error in cosineDistance: ");const l=(0,_e.d)(1),u=lt(l,(0,De.c)((0,O.l)(o,i),n,!0));return Ka(u,c,r)}});const Xa=(0,i.op)({hingeLoss_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ha.SUM_BY_NONZERO_WEIGHTS,r=(0,s.YT)(e,"labels","hingeLoss");const o=(0,s.YT)(t,"predictions","hingeLoss");let i=null;null!=n&&(i=(0,s.YT)(n,"weights","hingeLoss")),(0,p.O3)(r.shape,o.shape,"Error in hingeLoss: ");const c=(0,_e.d)(1);r=lt((0,O.l)((0,_e.d)(2),r),c);const l=(0,cn.V)(lt(c,(0,O.l)(r,o)));return Ka(l,i,a)}});const Za=(0,i.op)({huberLoss_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ha.SUM_BY_NONZERO_WEIGHTS;const o=(0,s.YT)(e,"labels","huberLoss"),i=(0,s.YT)(t,"predictions","huberLoss");let l=null;null!=n&&(l=(0,s.YT)(n,"weights","huberLoss")),(0,p.O3)(o.shape,i.shape,"Error in huberLoss: ");const u=(0,_e.d)(a),h=c(lt(i,o)),f=Et(h,u),m=lt(h,f),g=d((0,O.l)((0,_e.d)(.5),Fe(f)),(0,O.l)(u,m));return Ka(g,l,r)}});const Qa=(0,i.op)({logLoss_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ha.SUM_BY_NONZERO_WEIGHTS;const o=(0,s.YT)(e,"labels","logLoss"),i=(0,s.YT)(t,"predictions","logLoss");let c=null;null!=n&&(c=(0,s.YT)(n,"weights","logLoss")),(0,p.O3)(o.shape,i.shape,"Error in logLoss: ");const l=(0,_e.d)(1),u=(0,_e.d)(a),h=st((0,O.l)(o,nt(d(i,u)))),f=(0,O.l)(lt(l,o),nt(d(lt(l,i),u))),m=lt(h,f);return Ka(m,c,r)}});const Ja=(0,i.op)({meanSquaredError_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ha.SUM_BY_NONZERO_WEIGHTS;const r=(0,s.YT)(e,"labels","meanSquaredError"),o=(0,s.YT)(t,"predictions","meanSquaredError");let i=null;null!=n&&(i=(0,s.YT)(n,"weights","meanSquaredError")),(0,p.O3)(r.shape,o.shape,"Error in meanSquaredError: ");const c=Fn(r,o);return Ka(c,i,a)}});const $a=(0,i.op)({sigmoidCrossEntropy_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ha.SUM_BY_NONZERO_WEIGHTS,o=(0,s.YT)(e,"multiClassLabels","sigmoidCrossEntropy");const i=(0,s.YT)(t,"logits","sigmoidCrossEntropy");let l=null;if(null!=n&&(l=(0,s.YT)(n,"weights","sigmoidCrossEntropy")),(0,p.O3)(o.shape,i.shape,"Error in sigmoidCrossEntropy: "),a>0){const e=(0,_e.d)(a),t=(0,_e.d)(1),n=(0,_e.d)(.5);o=d((0,O.l)(o,lt(t,e)),(0,O.l)(n,e))}const u=function(e,t){const n=(0,s.YT)(e,"labels","sigmoidCrossEntropyWithLogits"),a=(0,s.YT)(t,"logits","sigmoidCrossEntropyWithLogits");(0,p.O3)(n.shape,a.shape,"Error in sigmoidCrossEntropyWithLogits: ");const r=(0,cn.V)(a),o=(0,O.l)(a,n),i=at(ze(st(c(a))));return d(lt(r,o),i)}(o,i);return Ka(u,l,r)}});const er=(0,i.op)({softmaxCrossEntropy_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ha.SUM_BY_NONZERO_WEIGHTS,o=(0,s.YT)(e,"onehotLabels","softmaxCrossEntropy");const i=(0,s.YT)(t,"logits","softmaxCrossEntropy");let c=null;if(null!=n&&(c=(0,s.YT)(n,"weights","softmaxCrossEntropy")),(0,p.O3)(o.shape,i.shape,"Error in softmaxCrossEntropy: "),a>0){const e=(0,_e.d)(a),t=(0,_e.d)(1),n=(0,_e.d)(o.shape[1]);o=d((0,O.l)(o,lt(t,e)),ye(e,n))}const l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));const a=ot(((e,t,a)=>{const r=ht(t,[n],!0),o=lt((0,I.w)(t,"float32"),r);a([e,o]);const s=st((0,O.l)(o,e));return{value:(0,De.c)(s,[n]),gradFunc:(e,t)=>{const[a,r]=t,o=(0,Ee.SM)(e.shape,[n]);return[(0,O.l)((0,C.t)(e,o),lt((0,I.w)(a,"float32"),ze(r))),(0,O.l)((0,C.t)(e,o),lt(ze(r),(0,I.w)(a,"float32")))]}}}));return a(e,t)}(o,i);return Ka(l,c,r)}});const tr=(0,i.op)({sparseFillEmptyRows_:function(e,t,n,a){const i=(0,s.YT)(e,"indices","sparseFillEmptyRows","int32"),c=(0,s.YT)(t,"values","sparseFillEmptyRows"),l=(0,s.YT)(n,"denseShape","sparseFillEmptyRows","int32"),u=(0,s.YT)(a,"defaultValue","sparseFillEmptyRows",c.dtype);if(2!==i.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(i.shape));if(1!==c.rank)throw new Error("Values should be Tensor1D but received shape ".concat(c.shape));if(1!==l.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(l.shape));if(0!==u.rank)throw new Error("Default value should be a scalar but received shape ".concat(u.shape));const h={indices:i,values:c,denseShape:l,defaultValue:u},d=r.T2.runKernel(o.C8s,h);return{outputIndices:d[0],outputValues:d[1],emptyRowIndicator:d[2],reverseIndexMap:d[3]}}});const nr=(0,i.op)({sparseReshape_:function(e,t,n){const a=(0,s.YT)(e,"inputIndices","sparseReshape","int32"),i=(0,s.YT)(t,"inputShape","sparseReshape","int32"),c=(0,s.YT)(n,"newShape","sparseReshape","int32");if(2!==a.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(i.shape));if(1!==c.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(c.shape));const l={inputIndices:a,inputShape:i,newShape:c},u=r.T2.runKernel(o.BoJ,l);return{outputIndices:u[0],outputShape:u[1]}}});const ar=(0,i.op)({sparseSegmentMean_:function(e,t,n){const a=(0,s.YT)(e,"data","sparseSegmentMean"),i=(0,s.YT)(t,"indices","sparseSegmentMean","int32"),c=(0,s.YT)(n,"segmentIds","sparseSegmentMean","int32");if(a.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(i.shape));if(1!==c.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(c.shape));const l={data:a,indices:i,segmentIds:c};return r.T2.runKernel(o.L6G,l)}});const rr=(0,i.op)({sparseSegmentSum_:function(e,t,n){const a=(0,s.YT)(e,"data","sparseSegmentSum"),i=(0,s.YT)(t,"indices","sparseSegmentSum","int32"),c=(0,s.YT)(n,"segmentIds","sparseSegmentSum","int32");if(a.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(i.shape));if(1!==c.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(c.shape));const l={data:a,indices:i,segmentIds:c};return r.T2.runKernel(o.DvZ,l)}});const or=(0,i.op)({stringNGrams_:function(e,t,n,a,i,c,l,u){const h=(0,s.YT)(e,"data","stringNGrams","string");if("string"!==h.dtype)throw new Error("Data must be of datatype string");if(1!==h.shape.length)throw new Error("Data must be a vector, saw: ".concat(h.shape));const d=(0,s.YT)(t,"dataSplits","stringNGrams");if("int32"!==d.dtype)throw new Error("Data splits must be of datatype int32");const p={separator:n,nGramWidths:a,leftPad:i,rightPad:c,padWidth:l,preserveShortSequences:u},f={data:h,dataSplits:d},m=r.T2.runKernel(o.YAb,f,p);return{nGrams:m[0],nGramsSplits:m[1]}}});const sr=(0,i.op)({stringSplit_:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=(0,s.YT)(e,"input","stringSplit","string"),i=(0,s.YT)(t,"delimiter","stringSplit","string");if(1!==a.rank)throw new Error("Input should be Tensor1D but received shape ".concat(a.shape));if(0!==i.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(i.shape));const c={skipEmpty:n},l={input:a,delimiter:i},u=r.T2.runKernel(o.iW0,l,c);return{indices:u[0],values:u[1],shape:u[2]}}});const ir=(0,i.op)({stringToHashBucketFast_:function(e,t){const n=(0,s.YT)(e,"input","stringToHashBucketFast","string"),a={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const i={input:n};return r.T2.runKernel(o.$jE,i,a)}}),cr={fft:Nn,ifft:Rn,rfft:On,irfft:An},lr={hammingWindow:wa,hannWindow:ka,frame:Sa,stft:Ia},ur={flipLeftRight:Ca,grayscaleToRGB:Ea,resizeNearestNeighbor:za,resizeBilinear:Pa,rotateWithOffset:Na,cropAndResize:Ta,nonMaxSuppression:Aa,nonMaxSuppressionAsync:Oa,nonMaxSuppressionWithScore:Fa,nonMaxSuppressionWithScoreAsync:Da,nonMaxSuppressionPadded:La,nonMaxSuppressionPaddedAsync:Ma,threshold:Ba,transform:Wa},hr={bandPart:Ua,gramSchmidt:Va,qr:ja},dr={absoluteDifference:qa,computeWeightedLoss:Ka,cosineDistance:Ya,hingeLoss:Xa,huberLoss:Za,logLoss:Qa,meanSquaredError:Ja,sigmoidCrossEntropy:$a,softmaxCrossEntropy:er},pr={sparseFillEmptyRows:tr,sparseReshape:nr,sparseSegmentMean:ar,sparseSegmentSum:rr},fr={stringNGrams:or,stringSplit:sr,stringToHashBucketFast:ir}},9855:(e,t,n)=>{"use strict";n.d(t,{N:()=>s});var a=n(2164),r=n(9554),o=n(4148);const s=(0,n(7892).op)({prelu_:function(e,t){const n={x:(0,o.YT)(e,"x","prelu"),alpha:(0,o.YT)(t,"alpha","prelu")};return a.T2.runKernel(r.Ncv,n)}})},6574:(e,t,n)=>{"use strict";function a(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}n.d(t,{y:()=>a})},5251:(e,t,n)=>{"use strict";n.d(t,{V:()=>s});var a=n(2164),r=n(9554),o=n(4148);const s=(0,n(7892).op)({relu_:function(e){const t={x:(0,o.YT)(e,"x","relu")};return a.T2.runKernel(r.fUj,t)}})},9721:(e,t,n)=>{"use strict";n.d(t,{j:()=>s});var a=n(2164),r=n(9554),o=n(4148);const s=(0,n(7892).op)({relu6_:function(e){const t={x:(0,o.YT)(e,"x","relu6")};return a.T2.runKernel(r.P_L,t)}})},5583:(e,t,n)=>{"use strict";n.d(t,{t:()=>s});var a=n(2164),r=n(9554),o=n(4148);const s=(0,n(7892).op)({reshape_:function(e,t){const n={x:(0,o.YT)(e,"x","reshape","string_or_numeric")},s={shape:t};return a.T2.runKernel(r.R23,n,s)}})},1997:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var a=n(1426),r=n(9914);function o(e,t){if(((0,a.iu)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&(0,a.iu)(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,r.Q)(e,[],[],t)}},4083:(e,t,n)=>{"use strict";n.d(t,{Ly:()=>r,TT:()=>o,l8:()=>s});var a=n(1426);function r(e,t,n){const a=t.rank>1?t.shape[t.rank-1]:1,r=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(a,", and batchDim: ").concat(r,".");if(n.rank<r)throw new Error(o+" update.rank < ".concat(r,". "));if(e.length<a+(n.rank-r))throw new Error(o+" Output shape length < ".concat(a+(n.rank-r)));if(n.rank!==r+e.length-a)throw new Error(o+" update.rank != ".concat(r+e.length-a));for(let s=0;s<r;++s)if(n.shape[s]!==t.shape[s])throw new Error(o+" updates.shape[".concat(s,"] (").concat(n.shape[s],") != indices.shape[").concat(s,"] (").concat(t.shape[s],")."));for(let s=0;s<n.rank-r;++s)if(n.shape[s+r]!==e[s+a])throw new Error(o+" updates.shape[".concat(s+r,"] (").concat(n.shape[s+r],") != shape[").concat(s+r,"] (").concat(e[s+r],")"))}function o(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}r(n,t,e)}function s(e,t,n){const r=t.shape.length,o=r>1?t.shape[r-1]:1,s=n.length;let i=1;for(let a=o;a<s;++a)i*=n[a];const c=o<1?1:o;return{sliceRank:o,numUpdates:(0,a.Ze)(t.shape)/c,sliceSize:i,strides:[...(0,a.Ur)(n.slice(0,o)),1],outputSize:(0,a.Ze)(n)}}},4213:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var a=n(2164),r=n(9554),o=n(4148);const s=(0,n(7892).op)({sigmoid_:function(e){const t={x:(0,o.YT)(e,"x","sigmoid","float32")};return a.T2.runKernel(r.vI1,t)}})},319:(e,t,n)=>{"use strict";n.d(t,{P:()=>s});var a=n(2164),r=n(9554),o=n(4148);const s=(0,n(7892).op)({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:(0,o.YT)(e,"x","step")},s={alpha:t};return a.T2.runKernel(r.pnw,n,s)}})},7382:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});var a=n(2164),r=n(9554),o=n(4148),s=n(7794);const i=(0,n(7892).op)({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=(0,o.YT)(e,"x","sum");"bool"===i.dtype&&(i=(0,s.w)(i,"int32"));const c={x:i},l={axis:t,keepDims:n};return a.T2.runKernel(r.WuN,c,l)}})},8032:(e,t,n)=>{"use strict";n.d(t,{O:()=>o});var a=n(4148),r=n(9914);function o(e,t,n){const o=(0,a.MZ)(e,n);return(0,r.Q)(e,t,o,n)}},5395:(e,t,n)=>{"use strict";n.d(t,{$:()=>s});var a=n(4148),r=n(1426),o=n(9914);function s(e,t,n){if((0,r.HO)(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const s=(0,a.MZ)(e,n);if(3!==s.length&&1!==s.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===s.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,o.Q)(e,t,s,n)}},9914:(e,t,n)=>{"use strict";n.d(t,{Q:()=>s});var a=n(2164),r=n(1426),o=n(8977);function s(e,t,n,s){if(null==s&&(s=(0,r.X$)(e)),"complex64"===s)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!(0,r.iu)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){(0,r.SA)(t);const e=(0,r.Ze)(t),a=(0,r.Ze)(n);(0,r.vA)(e===a,(()=>"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(e," values but has ").concat(a)));for(let o=0;o<n.length;++o){const e=n[o],a=o!==n.length-1||e!==(0,r.Ze)(t.slice(o));(0,r.vA)(n[o]===t[o]||!a,(()=>"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")))}}return(0,r.iu)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==s?(0,o.toTypedArray)(e,s):(0,r.Bq)(e,[],!0),a.T2.makeTensor(e,t,s)}},9494:(e,t,n)=>{"use strict";n.d(t,{qY:()=>w,yl:()=>f,rT:()=>k,B4:()=>x,Q5:()=>v,qP:()=>b});var a=n(7926),r=n(1426);const o=20,s=3,i=7;function c(e,t,n,a){const o=(0,r.Ur)(t),s=function(e,t,n,a){const o=(0,r.Ze)(t),s=a[a.length-1],i=new Array(s).fill(0),c=t.length,u="complex64"===n?d(e):e;if(c>1)for(let r=0;r<o/s;r++){const e=r*s;for(let t=0;t<s;t++)i[t]=Math.max(i[t],l(u[e+t],0,n).length)}return i}(e,t,n,o),i=t.length,c=h(e,t,n,o,s),u=["Tensor"];return a&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(i)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(c.map((e=>"    "+e)).join("\n")),u.join("\n")}function l(e,t,n){let a;return a=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(i))," + ")+"".concat(parseFloat(e[1].toFixed(i)),"j"):(0,r.Kg)(e)?"'".concat(e,"'"):"bool"===n?u(e):parseFloat(e.toFixed(i)).toString(),(0,r.av)(a,t)}function u(e){return 0===e?"false":"true"}function h(e,t,n,a,r){let i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const c="complex64"===n?2:1,p=t[0],f=t.length;if(0===f){if("complex64"===n){return[l(d(e)[0],0,n)]}return"bool"===n?[u(e[0])]:[e[0].toString()]}if(1===f){if(p>o){const t=s*c;let a=Array.from(e.slice(0,t)),o=Array.from(e.slice((p-s)*c,p*c));return"complex64"===n&&(a=d(a),o=d(o)),["["+a.map(((e,t)=>l(e,r[t],n))).join(", ")+", ..., "+o.map(((e,t)=>l(e,r[p-s+t],n))).join(", ")+"]"]}return["["+("complex64"===n?d(e):Array.from(e)).map(((e,t)=>l(e,r[t],n))).join(", ")+"]"]}const m=t.slice(1),g=a.slice(1),y=a[0]*c,b=[];if(p>o){for(let t=0;t<s;t++){const a=t*y,o=a+y;b.push(...h(e.slice(a,o),m,n,g,r,!1))}b.push("...");for(let t=p-s;t<p;t++){const a=t*y,o=a+y;b.push(...h(e.slice(a,o),m,n,g,r,t===p-1))}}else for(let o=0;o<p;o++){const t=o*y,a=t+y;b.push(...h(e.slice(t,a),m,n,g,r,o===p-1))}const v=2===f?",":"";b[0]="["+b[0]+v;for(let o=1;o<b.length-1;o++)b[o]=" "+b[o]+v;let x=",\n";for(let o=2;o<f;o++)x+="\n";return b[b.length-1]=" "+b[b.length-1]+"]"+(i?"":x),b}function d(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var p=n(8977);class f{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=r.Ze(e),null!=n){const e=n.length;r.vA(e===this.size,(()=>"Length of values '".concat(e,"' does not match the size ")+"inferred by the shape '".concat(this.size,"'.")))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||r.Ab(t,this.size),this.strides=(0,r.Ur)(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];0===n.length&&(n=[0]),r.vA(n.length===this.rank,(()=>"The number of provided coordinates (".concat(n.length,") must ")+"match the rank (".concat(this.rank,")")));const o=this.locToIndex(n);this.values[o]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let a=0;for(const o of t){if(o<0||o>=this.shape[a]){const e="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(e)}a++}let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=this.strides[o]*t[o];return this.values[r]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return m().makeTensor(this.values,this.shape,this.dtype)}}let m=null,g=null,y=null;function b(e){m=e}function v(e){g=e}function x(e){y=e}class w{constructor(e,t,n,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=r.Ze(e),this.strides=(0,r.Ur)(e),this.dataId=n,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return g.buffer(this.shape,this.dtype,e)}bufferSync(){return g.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return(0,r.yw)(this.shape,e,"complex64"===this.dtype)}arraySync(){return(0,r.yw)(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=m().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map((e=>p.decodeString(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),m().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=m().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>p.decodeString(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await m().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(m().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return g.print(this,e)}clone(){return this.throwIfDisposed(),g.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return c(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),g.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),m().makeVariable(this,e,t,n)}}Object.defineProperty(w,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),(0,a.m)("Tensor",(()=>w));class k extends w{constructor(e,t,n,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!r.r1(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));m().disposeTensor(this),this.dataId=e.dataId,m().incRef(this,null)}dispose(){m().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(k,Symbol.hasInstance,{value:e=>e instanceof w&&null!=e.assign&&e.assign instanceof Function})},8804:(e,t,n)=>{"use strict";n.d(t,{NB:()=>c,h0:()=>s,rt:()=>i});var a=n(9494),r=n(8075),o=n(1426);function s(e,t){if(e.dtype===t.dtype)return[e,t];const n=(0,r.Tu)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function i(e,t){(0,o.vA)(e.dtype===t.dtype,(()=>"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")))}function c(e){const t=[];return l(e,t,new Set),t}function l(e,t,n){if(null==e)return;if(e instanceof a.qY)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!==typeof r)return;var r;const o=e;for(const a in o){const e=o[a];n.has(e)||(n.add(e),l(e,t,n))}}},4148:(e,t,n)=>{"use strict";n.d(t,{MZ:()=>c,YT:()=>h,j1:()=>d});var a=n(2164),r=n(5399),o=n(9494),s=n(1426),i=n(8977);function c(e,t){let n=e;if((0,s.iu)(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];const a=[];for(;Array.isArray(n)||(0,s.iu)(n)&&"string"!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&(0,r._K)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&l(e,a,[]),a}function l(e,t,n){if(n=n||[],!Array.isArray(e)&&!(0,s.iu)(e))return void(0,s.vA)(0===t.length,(()=>"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")));(0,s.vA)(t.length>0,(()=>"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements"))),(0,s.vA)(e.length===t[0],(()=>"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")));const a=t.slice(1);for(let r=0;r<e.length;++r)l(e[r],a,n.concat(r))}function u(e,t,n,a){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(a,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function h(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof o.qY)return u(r,e.dtype,t,n),e;let l=(0,s.X$)(e);if("string"!==l&&["bool","int32","float32"].indexOf(r)>=0&&(l=r),u(r,l,t,n),null==e||!(0,s.iu)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const a=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(a,"'"))}const h=c(e,l);(0,s.iu)(e)||Array.isArray(e)||(e=[e]);const d="string"!==l?(0,i.toTypedArray)(e,l):(0,s.Bq)(e,[],!0);return a.T2.makeTensor(d,h,l)}function d(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map(((e,r)=>h(e,"".concat(t,"[").concat(r,"]"),n,a)))}},8075:(e,t,n)=>{"use strict";var a,r,o,s,i;n.d(t,{Tu:()=>l,ch:()=>u}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(a||(a={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(r||(r={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(o||(o={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(s||(s={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(i||(i={}));const c={float32:s,int32:r,bool:o,complex64:i};function l(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return c[e][t]}function u(e){return l(e,"int32")}},8977:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arraysEqual:()=>r.r1,assert:()=>r.vA,assertNonNegativeIntegerDimensions:()=>r.SA,assertNonNull:()=>r.HO,assertShapesMatch:()=>r.O3,bytesFromStringArray:()=>r.SL,bytesPerElement:()=>r.jv,checkConversionForErrors:()=>r.nd,clamp:()=>r.qE,computeStrides:()=>r.Ur,createScalarValue:()=>v,createShuffledIndices:()=>r.P8,decodeString:()=>I,distSquared:()=>r.oO,encodeString:()=>S,fetch:()=>k,fingerPrint64:()=>b,flatten:()=>r.Bq,getArrayFromDType:()=>r.Ab,getTypedArrayFromDType:()=>r.ce,hasEncodingLoss:()=>r.BE,hexToLong:()=>i,indexToLoc:()=>r._k,inferDtype:()=>r.X$,inferFromImplicitShape:()=>r.XT,isBoolean:()=>r.Lm,isFunction:()=>r.Tn,isInt:()=>r.E6,isNumber:()=>r.Et,isPromise:()=>r.yL,isScalarShape:()=>r.Sf,isString:()=>r.Kg,isTypedArray:()=>r.iu,isValidDtype:()=>r.xn,locToIndex:()=>r.sX,makeOnesTypedArray:()=>r.FZ,makeZerosNestedTypedArray:()=>r.c7,makeZerosTypedArray:()=>r.Ty,nearestDivisor:()=>r.lK,nearestLargerEven:()=>r.eV,now:()=>w,parseAxisParam:()=>r.Y6,randUniform:()=>r.so,repeatedTry:()=>r._q,rightPad:()=>r.av,shuffle:()=>r.k4,shuffleCombo:()=>r.a0,sizeFromShape:()=>r.Ze,sizeToSquarishShape:()=>r.gS,squeezeShape:()=>r.gx,sum:()=>r.cz,swap:()=>r.wg,tanh:()=>r.ym,toNestedArray:()=>r.yw,toTypedArray:()=>x});var a=n(5399),r=n(1426),o=n(7353);const s=n.n(o)()||o;function i(e){return s.fromString(e,!0,16)}const c=i("c3a5c85c97cb3127"),l=i("b492b66fbe98f273"),u=i("9ae16a3b2f90404f");function h(e){return e.xor(e.shru(47))}function d(e,t,n){const a=e.slice(t,t+n);return s.fromBytes(Array.from(a),!0,!0)}function p(e,t){return d(e,t,8)}function f(e,t){return d(e,t,4)}function m(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function g(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i("9ddfea08eb382d69"),a=e.xor(t).mul(n);a=a.xor(a.shru(47));let r=t.xor(a).mul(n);return r=r.xor(r.shru(47)),r=r.mul(n),r}function y(e,t,n,a){return function(e,t,n,a,r,o){r=r.add(e),o=m(o.add(r).add(a),21);const s=r;return r=(r=r.add(t)).add(n),o=o.add(m(r,44)),[r.add(a),o.add(s)]}(p(e,t),p(e,t+8),p(e,t+16),p(e,t+24),n,a)}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=s.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){const n=u.add(2*t),a=p(e,0).add(u),r=p(e,t-8);return g(m(r,37).mul(n).add(a),m(a,25).add(r).mul(n),n)}if(t>=4){const n=u.add(2*t);return g(f(e,0).shl(3).add(t),f(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),a=t+(e[t-1]<<2);return h(u.mul(n).xor(c.mul(a))).mul(u)}return u}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=u.add(2*t),a=p(e,0).mul(l),r=p(e,8),o=p(e,t-8).mul(n),s=p(e,t-16).mul(u);return g(m(a.add(r),43).add(m(o,30)).add(s),a.add(m(r.add(u),18)).add(o),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=u.add(2*t),a=p(e,0).mul(u),r=p(e,8),o=p(e,t-8).mul(n),s=p(e,t-16).mul(u),i=m(a.add(r),43).add(m(o,30)).add(s),c=g(i,a.add(m(r.add(u),18)).add(o),n),l=p(e,16).mul(n),h=p(e,24),d=i.add(p(e,t-32)).mul(n),f=c.add(p(e,t-24)).mul(n);return g(m(l.add(h),43).add(m(d,30)).add(f),l.add(m(h.add(a),18)).add(d),n)}(e,t);let a=n,r=n.mul(l).add(113),o=h(r.mul(u).add(113)).mul(u),i=[s.UZERO,s.UZERO],d=[s.UZERO,s.UZERO];a=a.mul(u).add(p(e,0));let b=0;const v=64*(t-1>>6),x=v+(t-1&63)-63;do{a=m(a.add(r).add(i[0]).add(p(e,b+8)),37).mul(l),r=m(r.add(i[1]).add(p(e,b+48)),42).mul(l),a=a.xor(d[1]),r=r.add(i[0]).add(p(e,b+40)),o=m(o.add(d[0]),33).mul(l),i=y(e,b,i[1].mul(l),a.add(d[0])),d=y(e,b+32,o.add(d[1]),r.add(p(e,b+16))),[o,a]=[a,o],b+=64}while(b!==v);const w=l.add(o.and(255).shl(1));return b=x,d[0]=d[0].add(t-1&63),i[0]=i[0].add(d[0]),d[0]=d[0].add(i[0]),a=m(a.add(r).add(i[0]).add(p(e,b+8)),37).mul(w),r=m(r.add(i[1]).add(p(e,b+48)),42).mul(w),a=a.xor(d[1].mul(9)),r=r.add(i[0].mul(9).add(p(e,b+40))),o=m(o.add(d[0]),33).mul(w),i=y(e,b,i[1].mul(w),a.add(d[0])),d=y(e,b+32,o.add(d[1]),r.add(p(e,b+16))),[o,a]=[a,o],g(g(i[0],d[0],w).add(h(r).mul(c)).add(o),g(i[1],d[1],w).add(a),w)}function v(e,t){return"string"===t?S(e):x([e],t)}function x(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=r.Bq(e)),(0,a._K)().getBool("DEBUG")&&r.nd(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type ".concat(t))}function w(){return(0,a._K)().platform.now()}function k(e,t){return(0,a._K)().platform.fetch(e,t)}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",(0,a._K)().platform.encode(e,t)}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",(0,a._K)().platform.decode(e,t)}},1426:(e,t,n)=>{"use strict";function a(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,i(e,t,n)}function r(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together "+"First array length was ".concat(e.length)+"Second array length was ".concat(t.length));let n=e.length,a=0;for(;n>0;)a=Math.random()*n|0,n--,i(e,n,a),i(t,n,a)}function o(e,t,n){return Math.max(e,Math.min(t,n))}function s(e){return e%2===0?e:e+1}function i(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function c(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function l(e,t){const n=Math.random();return t*n+(1-n)*e}function u(e,t){let n=0;for(let a=0;a<e.length;a++){const r=Number(e[a])-Number(t[a]);n+=r*r}return n}function h(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";h(y(e,t),(()=>n+" Shapes ".concat(e," and ").concat(t," must match")))}function p(e){h(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||O(e)&&!n)for(let a=0;a<e.length;++a)f(e[a],t,n);else t.push(e);return t}function m(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function g(e){return 0===e.length}function y(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function b(e){return e%1===0}function v(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{const t=Math.exp(2*e);return(t-1)/(t+1)}}function x(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function w(e){const t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return a(t),t}function k(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:setTimeout;return new Promise(((r,o)=>{let s=0;const i=()=>{if(e())return void r();s++;const c=t(s);null!=n&&s>=n?o():a(i,c)};i()}))}function I(e,t){let n=1,a=-1;for(let o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==a)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(a," and dim ").concat(o));a=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found ".concat(e[o]," at dim ").concat(o));if(-1===a){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));const r=e.slice();return r[a]=t/n,r}function T(e,t){const n=t.length;return h((e=null==e?t.map(((e,t)=>t)):[].concat(e)).every((e=>e>=-n&&e<n)),(()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e))),h(e.every((e=>b(e))),(()=>"All values in axis param must be integers but "+"got axis ".concat(e))),e.map((e=>e<0?n+e:e))}function C(e,t){const n=[],a=[],r=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||r?null:T(t,e).sort();let s=0;for(let i=0;i<e.length;++i){if(null!=o){if(o[s]===i&&1!==e[i])throw new Error("Can't squeeze axis ".concat(i," since its dim '").concat(e[i],"' is not 1"));(null==o[s]||o[s]>i)&&1===e[i]&&(n.push(e[i]),a.push(i)),o[s]<=i&&s++}1!==e[i]&&(n.push(e[i]),a.push(i))}return{newShape:n,keptDims:a}}function E(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function N(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function R(e,t){for(let n=0;n<e.length;n++){const a=e[n];if(isNaN(a)||!isFinite(a))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(a,"."))}}function A(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function _(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function O(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function F(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function D(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}function L(e){return"string"===typeof e||e instanceof String}function M(e){return"boolean"===typeof e}function P(e){return"number"===typeof e}function z(e){return Array.isArray(e)?z(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":P(e)?"float32":L(e)?"string":M(e)?"bool":"float32"}function B(e){return!!(e&&e.constructor&&e.call&&e.apply)}function W(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function U(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let a=t-3;a>=0;--a)n[a]=n[a+1]*e[a+1];return n}function V(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new Array;if(1===t.length){const o=t[0]*(a?2:1);for(let t=0;t<o;t++)r[t]=n[e+t]}else{const o=t[0],s=t.slice(1),i=s.reduce(((e,t)=>e*t))*(a?2:1);for(let t=0;t<o;t++)r[t]=V(e+t*i,s,n,a)}return r}function G(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const a=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===a)return[];if(a!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return V(0,e,t,n)}function j(e,t){const n=H(e,t);for(let a=0;a<n.length;a++)n[a]=1;return n}function H(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function K(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return G(e,new Float32Array(n));if("int32"===t)return G(e,new Int32Array(n));if("bool"===t)return G(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function q(e){e.forEach((t=>{h(Number.isInteger(t)&&t>=0,(()=>"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")))}))}function Y(e,t,n){if(0===t)return 0;if(1===t)return e[0];let a=e[e.length-1];for(let r=0;r<e.length-1;++r)a+=n[r]*e[r];return a}function X(e,t,n){if(0===t)return[];if(1===t)return[e];const a=new Array(t);for(let r=0;r<a.length-1;++r)a[r]=Math.floor(e/n[r]),e-=a[r]*n[r];return a[a.length-1]=e,a}function Z(e){return e&&e.then&&"function"===typeof e.then}n.d(t,{Ab:()=>N,BE:()=>_,Bq:()=>f,E6:()=>b,Et:()=>P,FZ:()=>j,HO:()=>p,Kg:()=>L,Lm:()=>M,O3:()=>d,P8:()=>w,SA:()=>q,SL:()=>D,Sf:()=>g,Tn:()=>B,Ty:()=>H,Ur:()=>U,X$:()=>z,XT:()=>I,Y6:()=>T,Ze:()=>m,_k:()=>X,_q:()=>S,a0:()=>r,av:()=>k,c7:()=>K,ce:()=>E,cz:()=>c,eV:()=>s,gS:()=>x,gx:()=>C,iu:()=>O,jv:()=>F,k4:()=>a,lK:()=>W,nd:()=>R,oO:()=>u,qE:()=>o,r1:()=>y,sX:()=>Y,so:()=>l,vA:()=>h,wg:()=>i,xn:()=>A,yL:()=>Z,ym:()=>v,yw:()=>G})},8507:(e,t,n)=>{"use strict";var a={};n.r(a),n.d(a,{assertParamsValid:()=>Wo,computeFlatOffset:()=>$o,computeOutShape:()=>Vo,getNormalizedAxes:()=>Ko,isSliceContinous:()=>Jo,maskToAxes:()=>Uo,parseSliceParams:()=>es,sliceInfo:()=>ts,startForAxis:()=>Zo,startIndicesWithElidedDims:()=>qo,stopForAxis:()=>Qo,stopIndicesWithElidedDims:()=>Yo,stridesForAxis:()=>Xo,stridesWithElidedDims:()=>Go});var r={};n.r(r),n.d(r,{collectGatherOpShapeInfo:()=>bu,computeOutShape:()=>yu,segOpComputeOptimalWindowSize:()=>gu});var o={};n.r(o),n.d(o,{ERF_A1:()=>Dl,ERF_A2:()=>Ll,ERF_A3:()=>Ml,ERF_A4:()=>Pl,ERF_A5:()=>zl,ERF_P:()=>Fl,PARALLELIZE_THRESHOLD:()=>vl,RowPartitionType:()=>fl,SELU_SCALE:()=>Ol,SELU_SCALEALPHA:()=>_l,applyActivation:()=>yc,assertAndGetBroadcastShape:()=>So,assertAxesAreInnerMostDims:()=>li,assertParamsConsistent:()=>dl,assignToTypedArray:()=>jl,axesAreInnerMostDims:()=>oi,calculateShapes:()=>Al,checkEinsumDimSizes:()=>$l,checkPadOnDimRoundingMode:()=>xs,combineLocations:()=>si,combineRaggedTensorToTensorShapes:()=>ml,complexWithEvenIndex:()=>Ul,complexWithOddIndex:()=>Vl,computeConv2DInfo:()=>ls,computeConv3DInfo:()=>us,computeDefaultPad:()=>hs,computeDilation2DInfo:()=>ss,computeOptimalWindowSize:()=>xl,computeOutAndReduceShapes:()=>ii,computeOutShape:()=>pl,computePool2DInfo:()=>is,computePool3DInfo:()=>cs,convertConv2DDataFormat:()=>vs,decodeEinsumEquation:()=>Ql,eitherStridesOrDilationsAreOne:()=>ys,expandShapeToKeepDim:()=>ci,exponent:()=>Kl,exponents:()=>Hl,fromStringArrayToUint8:()=>xu,fromUint8ToStringArray:()=>vu,getAxesPermutation:()=>ui,getBroadcastDims:()=>wo,getComplexWithIndex:()=>Gl,getEinsumComputePath:()=>eu,getEinsumPermutation:()=>Jl,getFusedBiasGradient:()=>gc,getFusedDyActivation:()=>mc,getImageCenter:()=>wl,getInnerMostAxes:()=>di,getPermuted:()=>Sl,getRaggedRank:()=>yl,getReductionAxes:()=>ko,getReshaped:()=>kl,getReshapedPermuted:()=>Il,getRowPartitionTypesHelper:()=>gl,getSliceBeginCoords:()=>Tl,getSliceSize:()=>Cl,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>ru,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>ou,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>su,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>lu,getSparseReshapeInputOutputMismatchErrorMessage:()=>hu,getSparseReshapeInputOutputMultipleErrorMessage:()=>uu,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>iu,getSparseReshapeNegativeOutputDimErrorMessage:()=>cu,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>mu,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>du,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>pu,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>fu,getUndoAxesPermutation:()=>hi,isIdentityPermutation:()=>tu,log:()=>Un,mergeRealAndImagArrays:()=>Bl,prepareAndValidate:()=>El,prepareSplitSize:()=>au,segment_util:()=>r,shouldFuse:()=>bc,slice_util:()=>a,splitRealAndImagArrays:()=>Wl,stridesOrDilationsArePositive:()=>bs,tupleValuesAreOne:()=>gs,upcastType:()=>Oa,validateDefaultValueShape:()=>bl,validateInput:()=>Rl,validateUpdateShape:()=>Nl,warn:()=>Wn});var s={};n.r(s),n.d(s,{addImpl:()=>vC,bincountImpl:()=>aE,bincountReduceImpl:()=>rE,bitwiseAndImpl:()=>sE,castImpl:()=>fC,ceilImpl:()=>lE,concatImpl:()=>pE,equalImpl:()=>XE,expImpl:()=>eN,expm1Impl:()=>oN,floorImpl:()=>wN,gatherNdImpl:()=>NN,gatherV2Impl:()=>AN,greaterEqualImpl:()=>LN,greaterImpl:()=>ON,lessEqualImpl:()=>HN,lessImpl:()=>VN,linSpaceImpl:()=>YN,logImpl:()=>ZN,maxImpl:()=>cR,maximumImpl:()=>hR,minimumImpl:()=>wR,multiplyImpl:()=>UE,negImpl:()=>RR,notEqualImpl:()=>PR,prodImpl:()=>ZR,raggedGatherImpl:()=>tA,raggedRangeImpl:()=>rA,raggedTensorToTensorImpl:()=>uA,rangeImpl:()=>dA,rsqrtImpl:()=>SA,scatterImpl:()=>TA,sigmoidImpl:()=>oC,simpleAbsImpl:()=>NC,sliceImpl:()=>$C,sparseFillEmptyRowsImpl:()=>zA,sparseReshapeImpl:()=>WA,sparseSegmentReductionImpl:()=>VA,sqrtImpl:()=>qA,staticRegexReplaceImpl:()=>e_,stridedSliceImpl:()=>o_,stringNGramsImpl:()=>c_,stringSplitImpl:()=>h_,stringToHashBucketFastImpl:()=>p_,subImpl:()=>uN,tileImpl:()=>y_,topKImpl:()=>x_,transposeImpl:()=>FC,uniqueImpl:()=>C_});class i{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class c{refCount(e){return l("refCount")}incRef(e){return l("incRef")}timerAvailable(){return!0}time(e){return l("time")}read(e){return l("read")}readSync(e){return l("readSync")}readToGPU(e,t){return l("readToGPU")}numDataIds(){return l("numDataIds")}disposeData(e,t){return l("disposeData")}write(e,t,n){return l("write")}move(e,t,n,a,r){return l("move")}createTensorFromGPUData(e,t,n){return l("createTensorFromGPUData")}memory(){return l("memory")}floatPrecision(){return l("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return l("dispose")}}function l(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function u(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,p(e,t,n)}function h(e,t,n){return Math.max(e,Math.min(t,n))}function d(e){return e%2===0?e:e+1}function p(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function f(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";f(b(e,t),(()=>n+" Shapes ".concat(e," and ").concat(t," must match")))}function g(e){f(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function y(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function b(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function v(e){return e%1===0}function x(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function w(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return new Promise(((r,o)=>{let s=0;const i=()=>{if(e())return void r();s++;const c=t(s);null!=n&&s>=n?o():null!=a?a(i,c):setTimeout(i,c)};i()}))}function S(e,t){const n=t.length;return f((e=null==e?t.map(((e,t)=>t)):[].concat(e)).every((e=>e>=-n&&e<n)),(()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e))),f(e.every((e=>v(e))),(()=>"All values in axis param must be integers but "+"got axis ".concat(e))),e.map((e=>e<0?n+e:e))}function I(e,t){const n=[],a=[],r=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||r?null:S(t,e).sort();let s=0;for(let i=0;i<e.length;++i){if(null!=o){if(o[s]===i&&1!==e[i])throw new Error("Can't squeeze axis ".concat(i," since its dim '").concat(e[i],"' is not 1"));(null==o[s]||o[s]>i)&&1===e[i]&&(n.push(e[i]),a.push(i)),o[s]<=i&&s++}1!==e[i]&&(n.push(e[i]),a.push(i))}return{newShape:n,keptDims:a}}function T(e,t){return C(e,t)}function C(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function E(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function N(e){return"string"===typeof e||e instanceof String}function R(e){return"number"===typeof e}function A(e){return Array.isArray(e)?A(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":R(e)?"float32":N(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function _(e){return!!(e&&e.constructor&&e.call&&e.apply)}function O(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function F(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let a=t-3;a>=0;--a)n[a]=n[a+1]*e[a+1];return n}function D(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new Array;if(1===t.length){const o=t[0]*(a?2:1);for(let t=0;t<o;t++)r[t]=n[e+t]}else{const o=t[0],s=t.slice(1),i=s.reduce(((e,t)=>e*t))*(a?2:1);for(let t=0;t<o;t++)r[t]=D(e+t*i,s,n,a)}return r}function L(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const a=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===a)return[];if(a!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return D(0,e,t,n)}function M(e,t){const n=P(e,t);for(let a=0;a<n.length;a++)n[a]=1;return n}function P(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function z(e){e.forEach((t=>{f(Number.isInteger(t)&&t>=0,(()=>"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")))}))}function B(e){return e&&e.then&&"function"===typeof e.then}const W="tfjsflags";class U{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=V,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(G().getBool("IS_TEST")||G().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];G().getBool("IS_TEST")||G().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(t,".")),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(B(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(W in e){e[W].split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,n)}))}}}function V(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,a[0],a[1]),a.join("=")})),t}function G(){return H}let j,H=null;function K(){if(null==j){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}j=e}return j}function q(e,t){const n=function(){const e=K();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const a=t();return n.set(e,a),n.get(e)}}const Y="Abs",X="Acos",Z="Acosh",Q="Add",J="AddN",$="ArgMax",ee="ArgMin",te="Asin",ne="Asinh",ae="Atan",re="Atanh",oe="Atan2",se="AvgPool",ie="AvgPoolGrad",ce="AvgPool3D",le="AvgPool3DGrad",ue="BatchMatMul",he="BatchToSpaceND",de="Bincount",pe="Cast",fe="Ceil",me="ClipByValue",ge="Complex",ye="ComplexAbs",be="Concat",ve="Conv2D",xe="Conv2DBackpropFilter",we="Conv2DBackpropInput",ke="Conv3D",Se="Conv3DBackpropFilterV2",Ie="Conv3DBackpropInputV2",Te="Cos",Ce="Cosh",Ee="Cumprod",Ne="Cumsum",Re="CropAndResize",Ae="DenseBincount",_e="DepthToSpace",Oe="DepthwiseConv2dNative",Fe="DepthwiseConv2dNativeBackpropFilter",De="DepthwiseConv2dNativeBackpropInput",Le="Dilation2D",Me="RealDiv",Pe="Einsum",ze="Elu",Be="EluGrad",We="Erf",Ue="Equal",Ve="Exp",Ge="ExpandDims",je="Expm1",He="Fill",Ke="FlipLeftRight",qe="Floor",Ye="FloorDiv",Xe="FusedBatchNorm",Ze="GatherV2",Qe="Greater",Je="GreaterEqual",$e="Identity",et="IFFT",tt="Imag",nt="IsFinite",at="IsInf",rt="IsNan",ot="LeakyRelu",st="Less",it="LessEqual",ct="Log",lt="Log1p",ut="LogicalAnd",ht="LogicalNot",dt="LogicalOr",pt="LRN",ft="LRNGrad",mt="Max",gt="Maximum",yt="MaxPool",bt="MaxPoolGrad",vt="MaxPool3D",xt="MaxPool3DGrad",wt="Mean",kt="Min",St="Minimum",It="MirrorPad",Tt="Mod",Ct="Multiply",Et="Neg",Nt="NotEqual",Rt="NonMaxSuppressionV3",At="NonMaxSuppressionV4",_t="NonMaxSuppressionV5",Ot="OnesLike",Ft="OneHot",Dt="Pack",Lt="PadV2",Mt="Pow",Pt="Prelu",zt="Prod",Bt="Range",Wt="Real",Ut="Reciprocal",Vt="Relu",Gt="Reshape",jt="ResizeNearestNeighbor",Ht="ResizeNearestNeighborGrad",Kt="ResizeBilinear",qt="ResizeBilinearGrad",Yt="Relu6",Xt="Reverse",Zt="Round",Qt="Rsqrt",Jt="Select",$t="Selu",en="Slice",tn="Sin",nn="Sinh",an="Sign",rn="Sigmoid",on="Softplus",sn="Sqrt",cn="Sum",ln="SpaceToBatchND",un="SplitV",hn="Softmax",dn="SparseFillEmptyRows",pn="SparseReshape",fn="SparseSegmentMean",mn="SparseSegmentSum",gn="SquaredDifference",yn="Square",bn="StaticRegexReplace",vn="StridedSlice",xn="StringNGrams",wn="StringSplit",kn="StringToHashBucketFast",Sn="Sub",In="Tan",Tn="Tanh",Cn="Tile",En="TopK",Nn="Transform",Rn="Transpose",An="Unique",_n="Unpack",On="UnsortedSegmentSum",Fn="ZerosLike",Dn="Step",Ln="FromPixels",Mn="RotateWithOffset",Pn="_FusedMatMul",zn="FusedConv2D",Bn="FusedDepthwiseConv2D";function Wn(){G().getBool("IS_TEST")||G().getBool("PROD")||console.warn(...arguments)}function Un(){G().getBool("IS_TEST")||G().getBool("PROD")||console.log(...arguments)}const Vn=q("kernelRegistry",(()=>new Map)),Gn=q("gradRegistry",(()=>new Map));function jn(e,t){const n=Xn(e,t);return Vn.get(n)}function Hn(e){return Gn.get(e)}function Kn(e){const t=Vn.entries(),n=[];for(;;){const{done:a,value:r}=t.next();if(a)break;const[o,s]=r,[i]=o.split("_");i===e&&n.push(s)}return n}function qn(e){const{kernelName:t,backendName:n}=e,a=Xn(t,n);Vn.has(a)&&Wn("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),Vn.set(a,e)}function Yn(e){const{kernelName:t}=e;Gn.has(t)&&G().getBool("DEBUG")&&Wn("Overriding the gradient for '".concat(t,"'")),Gn.set(t,e)}function Xn(e,t){return"".concat(t,"_").concat(e)}function Zn(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var Qn=n(7353),Jn=n.n(Qn);const $n=Jn()||Qn;function ea(e){return $n.fromString(e,!0,16)}ea("c3a5c85c97cb3127"),ea("b492b66fbe98f273"),ea("9ae16a3b2f90404f");function ta(e,t){return"string"===t?ra(e):na([e],t)}function na(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=ia(e)),G().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const a=e[n];if(isNaN(a)||!isFinite(a))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(a,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type ".concat(t))}function aa(){return G().platform.now()}function ra(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",G().platform.encode(e,t)}function oa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",G().platform.decode(e,t)}function sa(e){return null!=G().platform.isTypedArray?G().platform.isTypedArray(e):Zn(e)}function ia(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||B(e)||null==e||sa(e)&&n)t.push(e);else if(Array.isArray(e)||sa(e))for(let a=0;a<e.length;++a)ia(e[a],t,n);else{let a=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(a=Math.max(a,Number(t)));for(let r=0;r<=a;r++)ia(e[r],t,n)}return t}class ca{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new ua)}profileKernel(e,t,n){let a;const r=()=>{a=n()};let o;const s=aa();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(r);else{r();for(const e of a)e.dataSync();o=Promise.resolve({kernelMs:aa()-s})}if(G().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let i=0;i<a.length;i++){const t=a[i];t.data().then((n=>{la(n,t.dtype,e)}))}return{kernelName:e,outputs:a,inputs:t,timeMs:o.then((e=>e.kernelMs)),extraInfo:o.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:a,inputs:r,extraInfo:o}=e;n.forEach((e=>{Promise.all([e.data(),a,o]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],r,n[2])}))}))}}function la(e,t,n){if("float32"!==t)return!1;for(let a=0;a<e.length;a++){const t=e[a];if(isNaN(t)||!isFinite(t))return console.warn("Found ".concat(t," in the result of '").concat(n,"'")),!0}return!1}class ua{logKernelProfile(e,t,n,a,r,o){const s="number"===typeof a?w("".concat(a,"ms"),9):a.error,i=w(e,25),c=t.rank,l=t.size,u=w(t.shape.toString(),14);let h="";for(const d in r){const e=r[d];if(null!=e){const n=e.shape||t.shape,a=n.length;h+="".concat(d,": ").concat(a,"D ").concat(a>0?n:""," ")}}console.log("%c".concat(i,"\t%c").concat(s,"\t%c").concat(c,"D ").concat(u,"\t%c").concat(l,"\t%c").concat(h,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}const ha=20,da=3,pa=7;function fa(e,t,n,a){const r=F(t),o=function(e,t,n,a){const r=y(t),o=a[a.length-1],s=new Array(o).fill(0),i=t.length,c="complex64"===n?ba(e):e;if(i>1)for(let l=0;l<r/o;l++){const e=l*o;for(let t=0;t<o;t++)s[t]=Math.max(s[t],ma(c[e+t],0,n).length)}return s}(e,t,n,r),s=t.length,i=ya(e,t,n,r,o),c=["Tensor"];return a&&(c.push("  dtype: ".concat(n)),c.push("  rank: ".concat(s)),c.push("  shape: [".concat(t,"]")),c.push("  values:")),c.push(i.map((e=>"    "+e)).join("\n")),c.join("\n")}function ma(e,t,n){let a;return a=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(pa))," + ")+"".concat(parseFloat(e[1].toFixed(pa)),"j"):N(e)?"'".concat(e,"'"):"bool"===n?ga(e):parseFloat(e.toFixed(pa)).toString(),w(a,t)}function ga(e){return 0===e?"false":"true"}function ya(e,t,n,a,r){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const s="complex64"===n?2:1,i=t[0],c=t.length;if(0===c){if("complex64"===n){return[ma(ba(e)[0],0,n)]}return"bool"===n?[ga(e[0])]:[e[0].toString()]}if(1===c){if(i>ha){const t=da*s;let a=Array.from(e.slice(0,t)),o=Array.from(e.slice((i-da)*s,i*s));return"complex64"===n&&(a=ba(a),o=ba(o)),["["+a.map(((e,t)=>ma(e,r[t],n))).join(", ")+", ..., "+o.map(((e,t)=>ma(e,r[i-da+t],n))).join(", ")+"]"]}return["["+("complex64"===n?ba(e):Array.from(e)).map(((e,t)=>ma(e,r[t],n))).join(", ")+"]"]}const l=t.slice(1),u=a.slice(1),h=a[0]*s,d=[];if(i>ha){for(let t=0;t<da;t++){const a=t*h,o=a+h;d.push(...ya(e.slice(a,o),l,n,u,r,!1))}d.push("...");for(let t=i-da;t<i;t++){const a=t*h,o=a+h;d.push(...ya(e.slice(a,o),l,n,u,r,t===i-1))}}else for(let m=0;m<i;m++){const t=m*h,a=t+h;d.push(...ya(e.slice(t,a),l,n,u,r,m===i-1))}const p=2===c?",":"";d[0]="["+(i>0?d[0]+p:"");for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+p;let f=",\n";for(let m=2;m<c;m++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(o?"":f),d}function ba(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class va{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=y(e),null!=n){const e=n.length;f(e===this.size,(()=>"Length of values '".concat(e,"' does not match the size ")+"inferred by the shape '".concat(this.size,"'.")))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||C(t,this.size),this.strides=F(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];0===n.length&&(n=[0]),f(n.length===this.rank,(()=>"The number of provided coordinates (".concat(n.length,") must ")+"match the rank (".concat(this.rank,")")));const r=this.locToIndex(n);this.values[r]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let a=0;for(const o of t){if(o<0||o>=this.shape[a]){const e="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(e)}a++}let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=this.strides[o]*t[o];return this.values[r]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return xa().makeTensor(this.values,this.shape,this.dtype)}}let xa=null,wa=null,ka=null;class Sa{constructor(e,t,n,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=y(e),this.strides=F(e),this.dataId=n,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return wa.buffer(this.shape,this.dtype,e)}bufferSync(){return wa.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return L(this.shape,e,"complex64"===this.dtype)}arraySync(){return L(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=xa().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map((e=>oa(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),xa().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=xa().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>oa(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await xa().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),xa().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return wa.print(this,e)}clone(){return this.throwIfDisposed(),wa.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return fa(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),wa.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),xa().makeVariable(this,e,t,n)}}function Ia(){return q("Tensor",(()=>Sa))}Object.defineProperty(Sa,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),Ia();class Ta extends Sa{constructor(e,t,n,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!b(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));xa().disposeTensor(this),this.dataId=e.dataId,xa().incRef(this,null)}dispose(){xa().disposeVariable(this),this.isDisposedInternal=!0}}var Ca,Ea,Na,Ra,Aa;Object.defineProperty(Ta,Symbol.hasInstance,{value:e=>e instanceof Sa&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Ca||(Ca={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Ea||(Ea={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Na||(Na={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Ra||(Ra={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Aa||(Aa={}));const _a={float32:Ra,int32:Ea,bool:Na,complex64:Aa};function Oa(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return _a[e][t]}function Fa(e){return Oa(e,"int32")}function Da(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function La(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function Ma(e,t){if(e.dtype===t.dtype)return[e,t];const n=Oa(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Pa(e,t){return t.some((t=>t.id===e.id))}function za(e){const t=[];return Ba(e,t,new Set),t}function Ba(e,t,n){if(null==e)return;if(e instanceof Sa)return void t.push(e);if(a=e,!Array.isArray(a)&&"object"!==typeof a)return;var a;const r=e;for(const o in r){const e=r[o];n.has(e)||(n.add(e),Ba(e,t,n))}}function Wa(e){return null!=e.kernelName}class Ua{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Va{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Ua}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error("The highest priority backend '".concat(e,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(Wn("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new ca(this.backendInstance),!0}setupRegisteredKernels(){Kn(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){Kn(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{const n=t.factory();if(!n||n instanceof c||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,a=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,Wn("Initialization of backend ".concat(e," failed")),Wn(n.stack||n.message)),!1)));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}}catch(n){return Wn("Initialization of backend ".concat(e," failed")),Wn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:a,asyncInit:r}=this.initializeBackend(n);if(r||a)return{name:n,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),a=n.backend,r=this.readSync(t),o=a.refCount(t);a.disposeData(t,!0),n.backend=e,e.move(t,r,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((()=>this.startScope(a)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(a){throw t(),a}}nextTensorId(){return Va.nextTensorId++}nextVariableId(){return Va.nextVariableId++}clone(e){const t=ja.runKernel($e,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return ja.runKernel(pe,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=jn(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const a=this.backend.numDataIds();let r=0;n.forEach((e=>{r+="complex64"===e.dtype?3:1}));const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-t-r-o;if(s>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(s," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let t,n=[];const a=this.isTapeOn(),r=this.state.numBytes,o=this.state.numTensors;let s,i;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const c=Wa(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Wa(e)){const{kernelName:t,inputs:r,attrs:o}=e;null==this.backendName&&this.backend;const c=jn(t,this.backendName);f(null!=c,(()=>"Cannot find registered kernel '".concat(t,"' for backend '").concat(this.backendName,"'"))),s=()=>{const e=this.backend.numDataIds();i=c.kernelFunc({inputs:r,attrs:o,backend:this.backend});const s=Array.isArray(i)?i:[i];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,s);const l=s.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(a){const e=this.getTensorsForGradient(t,r,l);n=this.saveTensorsForBackwardMode(e)}return l}}else{const{forwardFunc:t}=e,r=e=>{a&&(n=e.map((e=>this.keep(this.clone(e)))))};s=()=>{const e=this.backend.numDataIds();i=this.tidy((()=>t(this.backend,r)));const n=Array.isArray(i)?i:[i];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,e,n),n}}const{inputs:l,attrs:u}=e,h=Wa(e)?null:e.backwardsFunc;let d;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(d=this.profiler.profileKernel(c,l,(()=>s())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),t=d.outputs):t=s()})),a&&this.addTapeNode(c,l,t,h,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-r,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(l).map((e=>null!=l[e]?l[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(i)?t:t[0]}saveTensorsForBackwardMode(e){return e.map((e=>this.keep(this.clone(e))))}getTensorsForGradient(e,t,n){const a=Hn(e);if(null!=a){const e=a.inputsToSave||[],r=a.outputsToSave||[];let o;a.saveAllInputs?(f(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),o=Object.keys(t).map((e=>t[e]))):o=e.map((e=>t[e]));const s=n.filter(((e,t)=>r[t]));return o.concat(s)}return[]}makeTensor(e,t,n,a){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",a=a||this.backend;let r=e;"string"===n&&N(e[0])&&(r=e.map((e=>ra(e))));const o=a.write(r,t,n),s=new Sa(t,n,o,this.nextTensorId());if(this.trackTensor(s,a),"string"===n){const e=this.state.tensorInfo.get(o),t=function(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}(r);this.state.numBytes+=t-e.bytes,e.bytes=t}return s}makeTensorFromDataId(e,t,n,a){const r={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(r,a)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:a,dtype:r}=e,o=new Sa(a,r,n,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=a&&a!==e.dtype&&(e=e.cast(a));const r=new Ta(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[r.name])throw new Error("Variable with name ".concat(r.name," was already registered"));return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*E(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof Ta||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*E(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,a,r,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:r},i=Hn(e);null!=i&&(a=i.gradFunc),null!=a&&(s.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],a=P(e.size,e.dtype);return this.makeTensor(a,e.shape,e.dtype)}return e})),a(e.length>1?e:e[0],r,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=za(e),n=new Set(t.map((e=>e.id)));for(let r=0;r<this.state.activeScope.track.length;r++){const e=this.state.activeScope.track[r];e.kept||n.has(e.id)||e.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==a.id||this.track(e)}))}gradients(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(f(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));const r=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));f(r instanceof Sa,(()=>"The result y returned by f() must be a tensor."));const o=function(e,t,n){const a={},r={};for(let c=0;c<t.length;c++)a[t[c].id]=!0;for(let c=0;c<e.length;c++){const n=e[c],o=n.inputs;for(const e in o){const s=o[e];let i=!1;for(let e=0;e<t.length;e++)if(a[s.id]){n.outputs.forEach((e=>a[e.id]=!0)),i=!0,r[n.id]=!0;break}if(i)break}}const o={};o[n.id]=!0;const s={};for(let c=e.length-1;c>=0;c--){const t=e[c],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(o[t.outputs[e].id]){for(const e in n)o[n[e].id]=!0,s[t.id]=!0;break}}const i=[];for(let c=0;c<e.length;c++){const t=e[c];if(r[t.id]&&s[t.id]){const e={};for(const r in t.inputs){const n=t.inputs[r];a[n.id]&&(e[r]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,i.push(n)}}return i}(this.state.activeTape,t,r);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[r.id]=null==n?function(e){const t=M(y(e),"float32");return ja.makeTensor(t,e,"float32")}(r.shape):n,function(e,t,n,a){for(let r=t.length-1;r>=0;r--){const o=t[r],s=[];if(o.outputs.forEach((t=>{const n=e[t.id];null!=n?s.push(n):s.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(o.kernelName,"."));const i=o.gradient(s);for(const t in o.inputs){if(!(t in i))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(i),"."));const r=n((()=>i[t]()));if("float32"!==r.dtype)throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(r.dtype,"'"));const s=o.inputs[t];if(!b(r.shape,s.shape))throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(r.shape,"', which does not match ")+"the shape of the input '".concat(s.shape,"'"));if(null==e[s.id])e[s.id]=r;else{const t=e[s.id];e[s.id]=a(t,r),t.dispose()}}}}(e,o,(e=>this.tidy(e)),Ha);const a=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:r,grads:a}}))}customGrad(e){var t=this;return f(_(e),(()=>"The f passed in customGrad(f) must be a function.")),function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];let o;f(a.every((e=>e instanceof Sa)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const s={};a.forEach(((e,t)=>{s[t]=e}));return t.runKernelFunc({forwardFunc:(t,n)=>(o=e(...a,n),f(o.value instanceof Sa,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),f(_(o.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),o.value),backwardsFunc:(e,t)=>{const n=o.gradFunc(e,t),r=Array.isArray(n)?n:[n];f(r.length===a.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),f(r.every((e=>e instanceof Sa)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const s={};return r.forEach(((e,t)=>{s[t]=()=>e})),s},inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=aa(),n=await this.backend.time(e);return n.wallMs=aa()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Ua;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function Ga(){const e=K();if(null==e._tfengine){const t=new U(e);e._tfengine=new Va(t)}var t;return t=e._tfengine.ENV,H=t,xa=()=>e._tfengine,e._tfengine}Va.nextTensorId=0,Va.nextVariableId=0;const ja=Ga();function Ha(e,t){const n={a:e,b:t};return ja.runKernel(Q,n)}let Ka;function qa(e){if(void 0!==Ka)return Ka;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Ya(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}const Xa=G();function Za(e,t){let n=e;if(sa(e))return"string"===t?[]:[e.length];if(Da(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(La(e))return[e.buffer.size/(null==t?4:E(t))];if(!Array.isArray(e))return[];const a=[];for(;Array.isArray(n)||sa(n)&&"string"!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&G().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Qa(e,a,[]),a}function Qa(e,t,n){if(n=n||[],!Array.isArray(e)&&!sa(e))return void f(0===t.length,(()=>"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")));f(t.length>0,(()=>"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements"))),f(e.length===t[0],(()=>"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")));const a=t.slice(1);for(let r=0;r<e.length;++r)Qa(e[r],a,n.concat(r))}function Ja(e,t,n,a){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(a,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function $a(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Ia())return Ja(a,e.dtype,t,n),e;let r=A(e);if("string"!==r&&["bool","int32","float32"].indexOf(a)>=0&&(r=a),Ja(a,r,t,n),null==e||!sa(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const a=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(a,"'"))}const o=Za(e,r);sa(e)||Array.isArray(e)||(e=[e]);const s="string"!==r?na(e,r):ia(e,[],!0);return ja.makeTensor(s,o,r)}function er(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map(((e,r)=>$a(e,"".concat(t,"[").concat(r,"]"),n,a)))}Xa.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Xa.registerFlag("IS_BROWSER",(()=>Ya())),Xa.registerFlag("IS_NODE",(()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node)),Xa.registerFlag("IS_CHROME",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),Xa.registerFlag("IS_SAFARI",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor))),Xa.registerFlag("PROD",(()=>!1)),Xa.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>Xa.getBool("DEBUG"))),Xa.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),Xa.registerFlag("IS_TEST",(()=>!1)),Xa.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>Xa.getBool("DEBUG"))),Xa.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),Xa.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),Xa.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));function tr(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));let n=t[0];const a=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";const r=function(){ja.startScope(n);try{const e=a(...arguments);return B(e)&&console.error("Cannot return a Promise inside of tidy."),ja.endScope(e),e}catch(e){throw ja.endScope(null),e}};return Object.defineProperty(r,"name",{value:n,configurable:!0}),r}const nr=tr({complex_:function(e,t){const n=$a(e,"real","complex"),a=$a(t,"imag","complex");m(n.shape,a.shape,"real and imag shapes, ".concat(n.shape," and ").concat(a.shape,", ")+"must match in call to tf.complex().");const r={real:n,imag:a};return ja.runKernel(ge,r)}});function ar(e,t,n,a){if(null==a)a=A(e);else if("complex64"===a)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(La(e)||Da(e)){if("float32"!==a&&"int32"!==a)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(a,"."));return ja.backend.createTensorFromGPUData(e,t||n,a)}if(!sa(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){z(t);const e=y(t),a=y(n);f(e===a,(()=>"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(e," values but has ").concat(a)));for(let r=0;r<n.length;++r){const e=n[r],a=r!==n.length-1||e!==y(t.slice(r));f(n[r]===t[r]||!a,(()=>"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")))}}return sa(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==a?na(e,a):ia(e,[],!0),ja.makeTensor(e,t,a)}function rr(e,t,n){return ar(e,t,Za(e,n),n)}class or{static join(e){return new or(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map((e=>sa(e)?e.buffer:e))).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const a=e[n];n!==e.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const r=t+a.byteLength;this.shards.push({buffer:a,start:t,end:r}),t=r}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error("Could not find start shard for byte ".concat(e));const a=new ArrayBuffer(t-e),r=new Uint8Array(a);let o=0;for(let s=n;s<this.shards.length;s++){const n=this.shards[s],a=e+o-n.start,i=o,c=Math.min(t,n.end)-n.start,l=new Uint8Array(n.buffer,a,c-a);if(r.set(l,i),o+=l.length,t<n.end)break}return a}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,a=e.length;for(;n<=a;){const r=Math.floor((a-n)/2)+n,o=t(e[r]);if(0===o)return r;o<0?a=r:n=r+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function sr(){return ja}function ir(){return ja.memory()}function cr(e,t){return ja.tidy(e,t)}function lr(e){za(e).forEach((e=>e.dispose()))}function ur(e){return ja.keep(e)}function hr(){return ja.backend}ka=function(e){G().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")};const dr=4;async function pr(e,t){const n=[],a=[],r=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let o=0;o<r.length;++o){const s=r[o],i=Array.isArray(e)?e[o].tensor:e[s];if("float32"!==i.dtype&&"int32"!==i.dtype&&"bool"!==i.dtype&&"string"!==i.dtype&&"complex64"!==i.dtype)throw new Error("Unsupported dtype in weight '".concat(s,"': ").concat(i.dtype));const c={name:s,shape:i.shape,dtype:i.dtype};if("string"===i.dtype){const e=new Promise((async e=>{const t=await i.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+dr*t.length,a=new Uint8Array(n);let r=0;for(let o=0;o<t.length;o++){const e=t[o],n=new Uint8Array(new Uint32Array([e.length]).buffer);a.set(n,r),r+=dr,a.set(e,r),r+=e.length}e(a)}));a.push(e)}else a.push(i.data());null!=t&&(c.group=t),n.push(c)}return{data:fr(await Promise.all(a)),specs:n}}function fr(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));const a=new Uint8Array(t);let r=0;return n.forEach((e=>{a.set(new Uint8Array(e.buffer),r),r+=e.byteLength})),a.buffer}const mr="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function gr(e){return mr?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function yr(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function br(e,t){let n,a;return null!=e.weightsManifest&&([n,a]=await t(e.weightsManifest)),function(e,t,n){const a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(a.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");a.weightSpecs=t,a.weightData=n}return null!=e.signature&&(a.signature=e.signature),null!=e.userDefinedMetadata&&(a.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(a.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(a.initializerSignature=e.initializerSignature),a}(e,n,a)}function vr(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:gr(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:gr(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new or(e.weightData).byteLength}}function xr(e){const t=[];for(const n of e)t.push(...n.weights);return t}class wr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==wr.instance&&(wr.instance=new wr),wr.instance}static registerSaveRouter(e){wr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){wr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return wr.getHandlers(e,"save")}static getLoadHandlers(e,t){return wr.getHandlers(e,"load",t)}static getHandlers(e,t,n){const a=[];return("load"===t?wr.getInstance().loadRouters:wr.getInstance().saveRouters).forEach((t=>{const r=t(e,n);null!==r&&a.push(r)})),a}}const kr="tensorflowjs",Sr="models_store",Ir="model_info_store";function Tr(){if(!G().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Cr(e){const t=e.result;t.createObjectStore(Sr,{keyPath:"modelPath"}),t.createObjectStore(Ir,{keyPath:"modelPath"})}class Er{constructor(e){if(this.indexedDB=Tr(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const a=this.indexedDB.open(kr,1);a.onupgradeneeded=()=>Cr(a),a.onsuccess=()=>{const r=a.result;if(null==t){const t=r.transaction(Sr,"readonly"),a=t.objectStore(Sr).get(this.modelPath);a.onsuccess=()=>{if(null==a.result)return r.close(),n(new Error("Cannot find model with path '".concat(this.modelPath,"' ")+"in IndexedDB."));e(a.result.modelArtifacts)},a.onerror=e=>(r.close(),n(a.error)),t.oncomplete=()=>r.close()}else{t.weightData=or.join(t.weightData);const a=vr(t),s=r.transaction(Ir,"readwrite");let i,c,l=s.objectStore(Ir);try{i=l.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(o){return n(o)}i.onsuccess=()=>{c=r.transaction(Sr,"readwrite");const i=c.objectStore(Sr);let u;try{u=i.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:a})}catch(o){return n(o)}u.onsuccess=()=>e({modelArtifactsInfo:a}),u.onerror=e=>{l=s.objectStore(Ir);const t=l.delete(this.modelPath);t.onsuccess=()=>(r.close(),n(u.error)),t.onerror=e=>(r.close(),n(u.error))}},i.onerror=e=>(r.close(),n(i.error)),s.oncomplete=()=>{null==c?r.close():c.oncomplete=()=>r.close()}}},a.onerror=e=>n(a.error)}))}}Er.URL_SCHEME="indexeddb://";const Nr=e=>{return G().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Er.URL_SCHEME)?(t=e.slice(Er.URL_SCHEME.length),new Er(t)):null;var t};wr.registerSaveRouter(Nr),wr.registerLoadRouter(Nr);class Rr{constructor(){this.indexedDB=Tr()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(kr,1);n.onupgradeneeded=()=>Cr(n),n.onsuccess=()=>{const a=n.result,r=a.transaction(Ir,"readonly"),o=r.objectStore(Ir).getAll();o.onsuccess=()=>{const t={};for(const e of o.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},o.onerror=e=>(a.close(),t(o.error)),r.oncomplete=()=>a.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(Er.URL_SCHEME)?t.slice(Er.URL_SCHEME.length):t,new Promise(((t,n)=>{const a=this.indexedDB.open(kr,1);a.onupgradeneeded=()=>Cr(a),a.onsuccess=()=>{const r=a.result,o=r.transaction(Ir,"readwrite"),s=o.objectStore(Ir),i=s.get(e);let c;i.onsuccess=()=>{if(null==i.result)return r.close(),n(new Error("Cannot find model with path '".concat(e,"' ")+"in IndexedDB."));{const a=s.delete(e),o=()=>{c=r.transaction(Sr,"readwrite");const a=c.objectStore(Sr).delete(e);a.onsuccess=()=>t(i.result.modelArtifactsInfo),a.onerror=e=>n(i.error)};a.onsuccess=o,a.onerror=e=>(o(),r.close(),n(i.error))}},i.onerror=e=>(r.close(),n(i.error)),o.oncomplete=()=>{null==c?r.close():c.oncomplete=()=>r.close()}},a.onerror=e=>n(a.error)}))}}const Ar="/",_r="tensorflowjs_models",Or="info",Fr="model_topology",Dr="weight_specs",Lr="weight_data",Mr="model_metadata";function Pr(e){return{info:[_r,e,Or].join(Ar),topology:[_r,e,Fr].join(Ar),weightSpecs:[_r,e,Dr].join(Ar),weightData:[_r,e,Lr].join(Ar),modelMetadata:[_r,e,Mr].join(Ar)}}function zr(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function Br(e){const t=e.split(Ar);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(Ar)}class Wr{constructor(e){if(!G().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Pr(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),a=JSON.stringify(e.weightSpecs),r=vr(e),o=or.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,a),this.LS.setItem(this.keys.weightData,function(e){if(mr)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let a=0,r=t.length;a<r;a++)n+=String.fromCharCode(t[a]);return btoa(n)}(o));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:r}}catch(t){throw zr(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(r.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(r.weightSpecsBytes,", ")+"weightDataBytes=".concat(r.weightDataBytes,"."))}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");t.modelTopology=n;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==a)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");t.weightSpecs=a;const r=this.LS.getItem(this.keys.modelMetadata);if(null!=r){const e=JSON.parse(r);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return t.weightData=function(e){if(mr){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let a=0;a<t.length;++a)n.set([t.charCodeAt(a)],a);return n.buffer}(o),t}}Wr.URL_SCHEME="localstorage://";const Ur=e=>{return G().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Wr.URL_SCHEME)?(t=e.slice(Wr.URL_SCHEME.length),new Wr(t)):null;var t};wr.registerSaveRouter(Ur),wr.registerLoadRouter(Ur);class Vr{constructor(){f(G().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),f("undefined"===typeof window||"undefined"!==typeof window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=_r+Ar,n=Ar+Or;for(let a=0;a<this.LS.length;++a){const r=this.LS.key(a);if(r.startsWith(t)&&r.endsWith(n)){e[Br(r)]=JSON.parse(this.LS.getItem(r))}}return e}async removeModel(e){var t;const n=Pr(e=(t=e).startsWith(Wr.URL_SCHEME)?t.slice(Wr.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error("Cannot find model at path '".concat(e,"'"));const a=JSON.parse(this.LS.getItem(n.info));return zr(n),a}}const Gr="://";class jr{constructor(){this.managers={}}static getInstance(){return null==jr.instance&&(jr.instance=new jr),jr.instance}static registerManager(e,t){f(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(Gr)&&(e=e.slice(0,e.indexOf(Gr))),f(e.length>0,(()=>"scheme must not be an empty string."));const n=jr.getInstance();f(null==n.managers[e],(()=>"A model store manager is already registered for scheme '".concat(e,"'."))),n.managers[e]=t}static getManager(e){const t=jr.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}static getSchemes(){return Object.keys(jr.getInstance().managers)}}class Hr{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!==typeof window&&G().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}}),!0))):setTimeout(e,t)}isTypedArray(e){return Zn(e)}}if(G().get("IS_BROWSER")){G().setPlatform("browser",new Hr);try{jr.registerManager(Wr.URL_SCHEME,new Vr)}catch(pU){}try{jr.registerManager(Er.URL_SCHEME,new Rr)}catch(pU){}}const Kr=()=>n(7078);let qr;class Yr{constructor(){this.util=n(6905),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=G().global.fetch?G().global.fetch(e,t):(null==qr&&(qr=Kr()),qr(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function Xr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",z(e),new va(e,t,n)}G().get("IS_NODE")&&!G().get("IS_BROWSER")&&G().setPlatform("node",new Yr);const Zr=tr({cast_:function(e,t){const n=$a(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const a={x:n},r={dtype:t};return ja.runKernel(pe,a,r)}});const Qr=tr({clone_:function(e){const t={x:$a(e,"x","clone","string_or_numeric")};return ja.runKernel($e,t)}});Ga();wa={buffer:Xr,cast:Zr,clone:Qr,print:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};const Jr=tr({add_:function(e,t){let n=$a(e,"a","add"),a=$a(t,"b","add");[n,a]=Ma(n,a);const r={a:n,b:a};return ja.runKernel(Q,r)}});const $r=tr({floorDiv_:function(e,t){let n=$a(e,"a","floorDiv"),a=$a(t,"b","floorDiv");[n,a]=Ma(n,a);const r={a:n,b:a};return ja.runKernel(Ye,r)}});const eo=tr({div_:function(e,t){let n=$a(e,"a","div"),a=$a(t,"b","div");if([n,a]=Ma(n,a),"int32"===n.dtype&&"int32"===a.dtype)return $r(n,a);const r={a:n,b:a};return ja.runKernel(Me,r,{})}});const to=tr({mul_:function(e,t){let n=$a(e,"a","mul"),a=$a(t,"b","mul");[n,a]=Ma(n,a);const r={a:n,b:a};return ja.runKernel(Ct,r)}});const no=tr({sqrt_:function(e){const t={x:$a(e,"x","sqrt","float32")};return ja.runKernel(sn,t)}});const ao=tr({square_:function(e){const t=$a(e,"x","square");return ja.runKernel("Square",{x:t},{})}});const ro=tr({zerosLike_:function(e){const t={x:$a(e,"x","zerosLike")};return ja.runKernel(Fn,t)}});function oo(e){return ja.customGrad(e)}function so(e,t){if((sa(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&sa(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ar(e,[],[],t)}const io=new Map,co=new Map;class lo{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class uo{constructor(){this.classNameMap={}}static getMap(){return null==uo.instance&&(uo.instance=new uo),uo.instance}static register(e){uo.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function ho(e,t,n){f(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),f("string"===typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),f(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);const a=t+">"+n;return uo.register(e),io.set(a,e),co.set(e,a),e}class po extends lo{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:a,grads:r}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:r[e.name]})));this.applyGradients(e)}else this.applyGradients(r);return lr(r),t?a:(a.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){f(_(e),(()=>"The f passed in variableGrads(f) must be a function")),f(null==t||Array.isArray(t)&&t.every((e=>e instanceof Ta)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in ja.registeredVariables)t.push(ja.registeredVariables[e])}const a=n?t.filter((e=>!e.trainable)):null,r=t.length;t=t.filter((e=>e.trainable)),f(t.length>0,(()=>"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(r," variables is ")+"trainable."));const{value:o,grads:s}=ja.gradients(e,t,null,!0);f(s.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),f(0===o.rank,(()=>"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(o.rank," tensor")));const i={};return t.forEach(((e,t)=>{null!=s[t]&&(i[e.name]=s[t])})),null!=a&&a.forEach((e=>i[e.name]=null)),{value:o,grads:i}}(e,t)}dispose(){null!=this.iterations_&&lr(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:so(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()))}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(po,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class fo extends po{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=ja.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=ja.registeredVariables[t],r=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accum_grad"),variable:cr((()=>ro(a).variable(r)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:"".concat(t,"/accum_var"),variable:cr((()=>ro(a).variable(r)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const s=this.accumulatedGrads[n].variable,i=this.accumulatedUpdates[n].variable;cr((()=>{const e=Jr(to(s,this.rho),to(ao(o),1-this.rho)),t=to(eo(no(Jr(i,this.epsilon)),no(Jr(s,this.epsilon))),o),n=Jr(to(i,this.rho),to(ao(t),1-this.rho));s.assign(e),i.assign(n);const r=Jr(to(t,-this.learningRate),a);a.assign(r)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(lr(this.accumulatedGrads.map((e=>e.variable))),lr(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function mo(e,t,n){z(e);const a={shape:e,value:t,dtype:n=n||A(t)};return ja.runKernel(He,{},a)}class go extends po{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=ja.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:"".concat(t,"/accumulator"),variable:cr((()=>mo(a.shape,this.initialAccumulatorValue).variable(e)))}}const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const o=this.accumulatedGrads[n].variable;cr((()=>{const e=Jr(o,ao(r));o.assign(e);const t=Jr(to(eo(r,no(Jr(e,ja.backend.epsilon()))),-this.learningRate),a);a.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&lr(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}const yo=tr({pow_:function(e,t){let n=$a(e,"base","pow"),a=$a(t,"exp","pow");[n,a]=Ma(n,a);const r={a:n,b:a};return ja.runKernel(Mt,r)}});const bo=tr({sub_:function(e,t){let n=$a(e,"a","sub"),a=$a(t,"b","sub");[n,a]=Ma(n,a);const r={a:n,b:a};return ja.runKernel(Sn,r)}});class vo extends po{static get className(){return"Adam"}constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],cr((()=>{this.accBeta1=so(t).variable(),this.accBeta2=so(n).variable()})),null==a&&(this.epsilon=ja.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);cr((()=>{const n=bo(1,this.accBeta1),a=bo(1,this.accBeta2);t.forEach(((t,r)=>{const o=ja.registeredVariables[t],s=!1;null==this.accumulatedFirstMoment[r]&&(this.accumulatedFirstMoment[r]={originalName:"".concat(t,"/m"),variable:cr((()=>ro(o).variable(s)))}),null==this.accumulatedSecondMoment[r]&&(this.accumulatedSecondMoment[r]={originalName:"".concat(t,"/v"),variable:cr((()=>ro(o).variable(s)))});const i=Array.isArray(e)?e[r].tensor:e[t];if(null==i)return;const c=this.accumulatedFirstMoment[r].variable,l=this.accumulatedSecondMoment[r].variable,u=Jr(to(c,this.beta1),to(i,1-this.beta1)),h=Jr(to(l,this.beta2),to(ao(i),1-this.beta2)),d=eo(u,n),p=eo(h,a);c.assign(u),l.assign(h);const f=Jr(to(eo(d,Jr(no(p),this.epsilon)),-this.learningRate),o);o.assign(f)})),this.accBeta1.assign(to(this.accBeta1,this.beta1)),this.accBeta2.assign(to(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&lr(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&lr(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),cr((()=>{this.accBeta1.assign(yo(this.beta1,this.iterations_+1)),this.accBeta2.assign(yo(this.beta2,this.iterations_+1))}));const t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}const xo=tr({abs_:function(e){const t=$a(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return ja.runKernel(ye,e)}{const e={x:t};return ja.runKernel(Y,e)}}});function wo(e,t){const n=e.length,a=[];for(let r=0;r<n;r++){const o=n-1-r,s=e[o]||1;(t[t.length-1-r]||1)>1&&1===s&&a.unshift(o)}return a}function ko(e,t){const n=[];for(let a=0;a<t.length;a++){const r=e[e.length-a-1],o=t.length-a-1,s=t[o];(null==r||1===r&&s>1)&&n.unshift(o)}return n}function So(e,t){const n=Math.max(e.length,t.length),a=new Array(n);for(let r=0;r<n;r++){let o=e[e.length-r-1];null==o&&(o=1);let s=t[t.length-r-1];if(null==s&&(s=1),1===o)a[n-r-1]=s;else if(1===s)a[n-r-1]=o;else{if(o!==s){const n="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(n)}a[n-r-1]=o}}return a}const Io=tr({maximum_:function(e,t){let n=$a(e,"a","maximum"),a=$a(t,"b","maximum");[n,a]=Ma(n,a),"bool"===n.dtype&&(n=Zr(n,"int32"),a=Zr(a,"int32")),So(n.shape,a.shape);const r={a:n,b:a};return ja.runKernel(gt,r)}});class To extends po{static get className(){return"Adamax"}constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=a,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],cr((()=>{this.iteration=so(0).variable(),this.accBeta1=so(t).variable()})),null==a&&(this.epsilon=ja.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);cr((()=>{const n=bo(1,this.accBeta1),a=eo(-this.learningRate,Jr(to(this.iteration,this.decay),1));t.forEach(((t,r)=>{const o=ja.registeredVariables[t],s=!1;null==this.accumulatedFirstMoment[r]&&(this.accumulatedFirstMoment[r]={originalName:"".concat(t,"/m"),variable:ro(o).variable(s)}),null==this.accumulatedWeightedInfNorm[r]&&(this.accumulatedWeightedInfNorm[r]={originalName:"".concat(t,"/v"),variable:ro(o).variable(s)});const i=Array.isArray(e)?e[r].tensor:e[t];if(null==i)return;const c=this.accumulatedFirstMoment[r].variable,l=this.accumulatedWeightedInfNorm[r].variable,u=Jr(to(c,this.beta1),to(i,1-this.beta1)),h=to(l,this.beta2),d=xo(i),p=Io(h,d);c.assign(u),l.assign(p);const f=Jr(to(eo(a,n),eo(u,Jr(p,this.epsilon))),o);o.assign(f)})),this.iteration.assign(Jr(this.iteration,1)),this.accBeta1.assign(to(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&lr(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&lr(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class Co extends po{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const r=ja.registeredVariables[t];cr((()=>{const e=Jr(to(this.c,a),r);r.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=ur(so(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class Eo extends Co{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=so(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=ja.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:"".concat(t,"/momentum"),variable:cr((()=>ro(a).variable(e)))}}const r=this.accumulations[n].variable,o=Array.isArray(e)?e[n].tensor:e[t];null!=o&&cr((()=>{let e;const t=Jr(to(this.m,r),o);e=this.useNesterov?Jr(to(this.c,Jr(o,to(t,this.m))),a):Jr(to(this.c,t),a),r.assign(t),a.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&lr(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class No extends po{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,null==a&&(this.epsilon=ja.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=ja.registeredVariables[t],r=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:"".concat(t,"/rms"),variable:cr((()=>ro(a).variable(r)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:"".concat(t,"/momentum"),variable:cr((()=>ro(a).variable(r)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:"".concat(t,"/mg"),variable:cr((()=>ro(a).variable(r)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const s=this.accumulatedMeanSquares[n].variable,i=this.accumulatedMoments[n].variable;cr((()=>{const e=Jr(to(s,this.decay),to(ao(o),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,r=Jr(to(t,this.decay),to(o,1-this.decay)),c=eo(to(o,this.learningRate),no(bo(e,Jr(ao(r),this.epsilon)))),l=Jr(to(i,this.momentum),c);s.assign(e),t.assign(r),i.assign(l);const u=bo(a,l);a.assign(u)}else{const e=Jr(to(s,this.decay),to(ao(o),1-this.decay)),t=Jr(to(i,this.momentum),eo(to(o,this.learningRate),no(Jr(e,this.epsilon))));s.assign(e),i.assign(t);const n=bo(a,t);a.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&lr(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&lr(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&lr(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}const Ro=[fo,go,vo,To,Eo,No,Co];function Ao(e){return new Promise((e=>setTimeout(e))).then(e)}class _o{constructor(e){if(!G().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(_o.URL_SCHEME)&&(e=e.slice(_o.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=or.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=yr(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),a=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),r=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(r.download=this.modelJsonFileName,r.href=a,await Ao((()=>r.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await Ao((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:vr(e)}}}}_o.URL_SCHEME="downloads://";function Oo(e,t,n,a){!function(e){f(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){f(e>=0&&e<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e))),f(t>=0&&t<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t))),f(t>=e,(()=>"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)))}(n=null==n?0:n,a=null==a?1:a);let r=0;return Promise.all(e.map((o=>(o.then((o=>{const s=n+ ++r/e.length*(a-n);return t(s),o})),o))))}async function Fo(e,t){null==t&&(t={});const n=null==t.fetchFunc?G().platform.fetch:t.fetchFunc,a=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),r=(null==t.onProgress?await Promise.all(a):await Oo(a,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(r):await Oo(r,t.onProgress,.5,1)}wr.registerSaveRouter((e=>G().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(_o.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new _o(e)}(e.slice(_o.URL_SCHEME.length)):null));class Do{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(f("function"===typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=G().platform.fetch,f(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&f(2===e.length,(()=>"URL paths for http must have a length of 2, "+"(actual length is ".concat(e.length,")."))),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=yr(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=or.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:vr(e),responses:[a]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(a.status,"."))}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(e.status,". Please verify this URL points to ")+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(r){let e="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const n=t.modelTopology,a=t.weightsManifest;if(null==n&&null==a)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return br(await this.loadModelJSON(),(e=>this.loadWeights(e)))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=xr(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const a=null==t.fetchFunc?G().platform.fetch:t.fetchFunc;let r,o=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var s;o<e.length;){if(!r){const n=(await a(e[o],t.requestInit,{isBinary:!0})).body;r=n.getReader()}const{done:i,value:c}=await r.read();if(!i)return void n.enqueue(c);o++,r=void 0,null===(s=t.onProgress)||void 0===s||s.call(t,o/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,a]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),a=e.substring(0,t),r=n>t?e.substring(n):"";return[a+"/",r]}(t),r=this.weightPathPrefix||n,o=[],s=[];for(const i of e)for(const e of i.paths)null!=this.weightUrlConverter?s.push(this.weightUrlConverter(e)):o.push(r+e+a);return this.weightUrlConverter&&o.push(...await Promise.all(s)),o}async loadWeights(e){const t=await this.getWeightUrls(e);return[xr(e),await Fo(t,this.loadOptions)]}}function Lo(e){return null!=e.match(Do.URL_SCHEME_REGEX)}Do.URL_SCHEME_REGEX=/^https?:\/\//;const Mo=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>Lo(e))):Lo(e),n)return Po(e,t)}return null};function Po(e,t){return new Do(e,t)}wr.registerSaveRouter(Mo),wr.registerLoadRouter(Mo);const zo=-2,Bo=-1;function Wo(e,t,n){const a=e.shape.length;f(a===t.length,(()=>"Error in slice".concat(a,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(a,")."))),f(a===n.length,(()=>"Error in slice".concat(a,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(a,").")));for(let r=0;r<a;++r)f(t[r]+n[r]<=e.shape[r],(()=>"Error in slice".concat(a,"D: begin[").concat(r,"] + size[").concat(r,"] ")+"(".concat(t[r]+n[r],") would overflow input.shape[").concat(r,"] (").concat(e.shape[r],")")))}function Uo(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Vo(e,t,n){const a=[];for(let r=0;r<e.length;r++)a[r]=Math.ceil((t[r]-e[r])/n[r]);return a}function Go(e,t,n,a){const r=[...e];for(let o=r.length;o<a.length;o++)r.push(1);for(let o=0;o<n;o++)0===o?r[t]=1:(r.splice(t,0,1),r.pop());return r}function jo(e,t,n){return n<=e?n:n-(t-1)}function Ho(e,t){const n=[];for(let a=0;a<e;a++)n.push(t+a);return n}function Ko(e,t,n,a,r,o,s,i,c){const l=e.length;let u=new Array(l),h=new Array(l),d=new Array(l);if(t.length&&n>0){const c=t[0],l=n+1;u=qo(s,c,l,a,e),h=Yo(i,c,l,r,e),d=Go(o,c,l,e)}else for(let p=0;p<l;p++)u[p]=Zo(s,a,o,e,p,c),h[p]=Qo(i,r,o,e,p,c),d[p]=Xo(o,p,c);return{begin:u,end:h,strides:d}}function qo(e,t,n,a,r){const o=[...r],s=Ho(n,t);for(let i=0;i<o.length;i++)if(s.indexOf(i)>-1)o[i]=0;else{const r=jo(t,n,i);let s=a[r];e&1<<r&&(s=0),o[i]=s}return o}function Yo(e,t,n,a,r){const o=[...r],s=Ho(n,t);for(let i=0;i<o.length;i++)if(s.indexOf(i)>-1)o[i]=Number.MAX_SAFE_INTEGER;else{const r=jo(t,n,i);let s=a[r];e&1<<r&&(s=Number.MAX_SAFE_INTEGER),o[i]=s}for(let i=0;i<o.length;i++){const e=r[i];o[i]<0&&(o[i]+=e),o[i]=h(0,o[i],r[i])}return o}function Xo(e,t,n){let a=e[t];return(n&1<<t||null==a)&&(a=1),a}function Zo(e,t,n,a,r,o){let s=t[r];const i=n[r]||1;(e&1<<r||o&1<<r||null==s)&&(s=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const c=a[r];return s<0&&(s+=c),s=h(0,s,c-1),s}function Qo(e,t,n,a,r,o){let s=t[r];const i=n[r]||1;(e&1<<r||o&1<<r||null==s)&&(s=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const c=a[r];return s<0&&(s+=c),s=i>0?h(0,s,c):h(-1,s,c-1),s}function Jo(e,t,n){let a=n.length;for(let r=0;r<n.length;r++)if(n[r]>1){a=r;break}for(let r=a+1;r<n.length;r++)if(t[r]>0||n[r]!==e[r])return!1;return!0}function $o(e,t){let n=e.length>0?e[e.length-1]:1;for(let a=0;a<e.length-1;a++)n+=e[a]*t[a];return n}function es(e,t,n){let a;const r=e.shape.length;let o;return a="number"===typeof t?[t,...new Array(r-1).fill(0)]:t.length<r?t.concat(new Array(r-t.length).fill(0)):t.slice(),a.forEach((e=>{f(-1!==e,(()=>"slice() does not support negative begin indexing."))})),o=null==n?new Array(r).fill(-1):"number"===typeof n?[n,...new Array(r-1).fill(-1)]:n.length<r?n.concat(new Array(r-n.length).fill(-1)):n,o=o.map(((t,n)=>t>=0?t:(f(-1===t,(()=>"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,"."))),e.shape[n]-a[n]))),[a,o]}function ts(e,t,n,a,r,o,s,i,c){let l;if(null==a?(l=new Array(t.length),l.fill(1)):l=a,null!=s&&0!==(s&s-1))throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const h={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:l.slice(),beginMask:r,endMask:o,ellipsisMask:s,newAxisMask:i,shrinkAxisMask:c};for(let b=0;b<h.dims;b++)u&&0!==(1<<b&i)&&h.numAddAxisAfterEllipsis++,1<<b&s&&(u=!0);u||(h.ellipsisMask|=1<<h.dims,h.dims++);const d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let a=0;a<e.dims;a++)if(1<<a&e.ellipsisMask){const r=Math.min(t.dims-(e.dims-a)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<r;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=a}else if(1<<a&e.newAxisMask)t.finalShapeGatherIndices.push(zo),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[a]),null!=e.end&&(t.end[n]=e.end[a]),t.strides[n]=e.strides[a],e.beginMask&1<<a&&(t.beginMask|=1<<n),e.endMask&1<<a&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<a?(t.finalShapeGatherIndices.push(Bo),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(a)),t.inputShapeGatherIndicesSparse[n]=a,n++}}(h,d);let p=!0,f=!0,m=!0;const g=[],y=[];for(let b=0;b<e.length;++b){if(0===d.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));const t=!!(d.shrinkAxisMask&1<<b),n=e[b];if(-1===n){g.push(t?1:-1);continue}const a=[d.beginMask&1<<b,d.endMask&1<<b],r=[d.strides[b]>0?0:-1,d.strides[b]>0?n:n-1];if(t&&d.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===d.strides[b];const o=!!(d.beginMask&1<<b&&d.endMask&1<<b);if(d.beginValid&&d.endValid){if(t){const e=d.begin[b]<0?n+d.begin[b]:d.begin[b];if(d.begin[b]=e,d.end[b]=d.begin[b]+1,e<0||e>=n)throw Error("slice index ".concat(d.begin[b]," of dimension ").concat(b," out of bounds."))}else d.begin[b]=ns(d.begin[b],0,d.strides[b],n,a,r),d.end[b]=ns(d.end[b],1,d.strides[b],n,a,r);const e=1===d.strides[b]&&0===d.begin[b]&&d.end[b]===n;p=p&&e,f=f&&(0===b&&1===d.strides[b]||e)}else p=p&&1===d.strides[b]&&o,f=f&&(0===b&&1===d.strides[b]||o);let s,i=!1;if(d.beginValid&&d.endValid?(s=d.end[b]-d.begin[b],i=!0):t?(s=1,i=!0):o&&n>=0&&(s=d.strides[b]<0?-n:n,i=!0),i){let e;e=0===s||s<0!==d.strides[b]<0?0:Math.trunc(s/d.strides[b])+(s%d.strides[b]!==0?1:0),g.push(e)}else g.push(-1)}for(let b=0;b<d.finalShapeGatherIndices.length;++b){const e=d.finalShapeGatherIndices[b];e>=0?y.push(g[e]):e===zo&&y.push(1)}return{finalShapeSparse:y.filter(((e,t)=>d.finalShapeGatherIndices[t]!==zo)),finalShape:y,isIdentity:p,sliceDim0:f,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function ns(e,t,n,a,r,o){if(r[t])return n>0?o[t]:o[t+1&1];{const t=e<0?a+e:e;return t<o[0]?o[0]:t>o[1]?o[1]:t}}const as=tr({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:$a(e,"x","all","bool")},r={axis:t,keepDims:n};return ja.runKernel("All",a,r)}});const rs=tr({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:$a(e,"x","any","bool")},r={axis:t,keepDims:n};return ja.runKernel("Any",a,r)}});const os=tr({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:$a(e,"x","argMax")},a={axis:t};return ja.runKernel($,n,a)}});function ss(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0;return ls(e,[...t,e[3]],n,o,a,null,null,vs(r))}function is(e,t,n,a,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[i,c]=ds(t);let l;if("channelsLast"===s)l=[i,c,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));l=[i,c,e[1],e[1]]}return ls(e,l,n,a,r,o,!1,s)}function cs(e,t,n,a,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[i,c,l]=ps(t);let u,h;if("NDHWC"===s)h="channelsLast",u=[i,c,l,e[4],e[4]];else{if("NCDHW"!==s)throw new Error("Unknown dataFormat ".concat(s));h="channelsFirst",u=[i,c,l,e[1],e[1]]}return us(e,u,n,a,r,!1,h,o)}function ls(e,t,n,a,r,o){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[c,l,u,h]=[-1,-1,-1,-1];if("channelsLast"===i)[c,l,u,h]=e;else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));[c,h,l,u]=e}const[d,p,,f]=t,[m,g]=ds(n),[y,b]=ds(a),v=fs(d,y),x=fs(p,b),{padInfo:w,outHeight:k,outWidth:S}=function(e,t,n,a,r,o,s,i,c){let l,u,h;if("number"===typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const r=function(e,t,n,a,r){null==a&&(a=hs(e,t,n));const o=e[0],s=e[1],i=ms((o-t+2*a)/n+1,r),c=ms((s-t+2*a)/n+1,r);return[i,c]}([t,n],o,a,e,i);u=r[0],h=r[1]}else if("same"===e){u=Math.ceil(t/a),h=Math.ceil(n/r);const e=Math.max(0,(u-1)*a+o-t),i=Math.max(0,(h-1)*r+s-n),c=Math.floor(e/2),d=e-c,p=Math.floor(i/2);l={top:c,bottom:d,left:p,right:i-p,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-o+1)/a),h=Math.ceil((n-s+1)/r);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));{const d="channelsLast"===c?e[1][0]:e[2][0],p="channelsLast"===c?e[1][1]:e[2][1],f="channelsLast"===c?e[2][0]:e[3][0],m="channelsLast"===c?e[2][1]:e[3][1];l={top:d,bottom:p,left:f,right:m,type:0===d&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},u=ms((t-o+d+p)/a+1,i),h=ms((n-s+f+m)/r+1,i)}}return{padInfo:l,outHeight:u,outWidth:h}}(r,l,u,m,g,v,x,o,i),I=s?f*h:f;let T;return"channelsFirst"===i?T=[c,I,k,S]:"channelsLast"===i&&(T=[c,k,S,I]),{batchSize:c,dataFormat:i,inHeight:l,inWidth:u,inChannels:h,outHeight:k,outWidth:S,outChannels:I,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:p,effectiveFilterHeight:v,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:b,inShape:e,outShape:T,filterShape:t}}function us(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",i=arguments.length>7?arguments[7]:void 0,[c,l,u,h,d]=[-1,-1,-1,-1,-1];if("channelsLast"===s)[c,l,u,h,d]=e;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));[c,d,l,u,h]=e}const[p,f,m,,g]=t,[y,b,v]=ps(n),[x,w,k]=ps(a),S=fs(p,x),I=fs(f,w),T=fs(m,k),{padInfo:C,outDepth:E,outHeight:N,outWidth:R}=function(e,t,n,a,r,o,s,i,c,l,u){let h,d,p,f;"valid"===e&&(e=0);if("number"===typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const m=function(e,t,n,a,r,o){null==r&&(r=hs(e,t[0],a[0]));const s=[0,0,0,n];for(let i=0;i<3;i++)e[i]+2*r>=t[i]&&(s[i]=ms((e[i]-t[i]+2*r)/a[i]+1,o));return s}([t,n,a,1],[i,c,l],1,[r,o,s],e,u);d=m[0],p=m[1],f=m[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));{d=Math.ceil(t/r),p=Math.ceil(n/o),f=Math.ceil(a/s);const e=(d-1)*r+i-t,u=(p-1)*o+c-n,m=(f-1)*s+l-a,g=Math.floor(e/2),y=e-g,b=Math.floor(u/2),v=u-b,x=Math.floor(m/2);h={top:b,bottom:v,left:x,right:m-x,front:g,back:y,type:"SAME"}}}return{padInfo:h,outDepth:d,outHeight:p,outWidth:f}}(r,l,u,h,y,b,v,S,I,T,i),A=o?g*d:g;let _;return"channelsFirst"===s?_=[c,A,E,N,R]:"channelsLast"===s&&(_=[c,E,N,R,A]),{batchSize:c,dataFormat:s,inDepth:l,inHeight:u,inWidth:h,inChannels:d,outDepth:E,outHeight:N,outWidth:R,outChannels:A,padInfo:C,strideDepth:y,strideHeight:b,strideWidth:v,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:S,effectiveFilterHeight:I,effectiveFilterWidth:T,dilationDepth:x,dilationHeight:w,dilationWidth:k,inShape:e,outShape:_,filterShape:t}}function hs(e,t,n){const a=fs(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+a)/2)}function ds(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function ps(e){return"number"===typeof e?[e,e,e]:e}function fs(e,t){return t<=1?e:e+(e-1)*(t-1)}function ms(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function gs(e){const[t,n,a]=ds(e);return 1===t&&1===n&&1===a}function ys(e,t){return gs(e)||gs(t)}function bs(e){return ds(e).every((e=>e>0))}function vs(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function xs(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)f(v(t),(()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((t=>{t.forEach((t=>{f(v(t),(()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")))}))}))}}}const ws=tr({reshape_:function(e,t){const n={x:$a(e,"x","reshape","string_or_numeric")},a={shape:t};return ja.runKernel(Gt,n,a)}});const ks=tr({avgPool_:function(e,t,n,a,r){const o=$a(e,"x","avgPool","float32");f(ys(n,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")));let s=o,i=!1;3===o.rank&&(i=!0,s=ws(o,[1,o.shape[0],o.shape[1],o.shape[2]])),f(4===s.rank,(()=>"Error in avgPool: x must be rank 4 but got rank ".concat(s.rank,"."))),xs("avgPool",a,r);const c={x:s},l={filterSize:t,strides:n,pad:a,dimRoundingMode:r};let u=ja.runKernel(se,c,l);return u=Zr(u,o.dtype),i?ws(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const Ss=tr({avgPool3d_:function(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const s=$a(e,"x","avgPool3d","float32");let i=s,c=!1;4===s.rank&&(c=!0,i=ws(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),f(5===i.rank,(()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(i.rank,"."))),f("NDHWC"===o,(()=>"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o))),f("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(()=>"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'"))),xs("avgPool3d",a,r);const l={x:i},u={filterSize:t,strides:n,pad:a,dimRoundingMode:r,dataFormat:o};let h=ja.runKernel(ce,l,u);return h=Zr(h,i.dtype),c?ws(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const Is=tr({batchNorm_:function(e,t,n,a,r,o){null==o&&(o=.001);const s=$a(e,"x","batchNorm"),i=$a(t,"mean","batchNorm"),c=$a(n,"variance","batchNorm");let l,u;null!=r&&(l=$a(r,"scale","batchNorm")),null!=a&&(u=$a(a,"offset","batchNorm")),f(i.rank===c.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),f(null==u||i.rank===u.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),f(null==l||i.rank===l.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const h={x:function(e){let t;return t=0===e.rank||1===e.rank?ws(e,[1,1,1,e.size]):2===e.rank?ws(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?ws(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(s),scale:l,offset:u,mean:i,variance:c},d={varianceEpsilon:o},p=ja.runKernel(Xe,h,d);return ws(p,s.shape)}});const Ts=tr({batchNorm2d_:function(e,t,n,a,r,o){const s=$a(e,"x","batchNorm"),i=$a(t,"mean","batchNorm"),c=$a(n,"variance","batchNorm");let l,u;return null!=r&&(l=$a(r,"scale","batchNorm")),null!=a&&(u=$a(a,"offset","batchNorm")),f(2===s.rank,(()=>"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(s.rank,"."))),f(2===i.rank||1===i.rank,(()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(i.rank,"."))),f(2===c.rank||1===c.rank,(()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=l&&f(2===l.rank||1===l.rank,(()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=u&&f(2===u.rank||1===u.rank,(()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,"."))),Is(s,i,c,u,l,o)}});const Cs=tr({batchNorm3d_:function(e,t,n,a,r,o){const s=$a(e,"x","batchNorm"),i=$a(t,"mean","batchNorm"),c=$a(n,"variance","batchNorm");let l,u;return null!=r&&(l=$a(r,"scale","batchNorm")),null!=a&&(u=$a(a,"offset","batchNorm")),f(3===s.rank,(()=>"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(s.rank,"."))),f(3===i.rank||1===i.rank,(()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(i.rank,"."))),f(3===c.rank||1===c.rank,(()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=l&&f(3===l.rank||1===l.rank,(()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=u&&f(3===u.rank||1===u.rank,(()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,"."))),Is(s,i,c,u,l,o)}});const Es=tr({batchNorm4d_:function(e,t,n,a,r,o){const s=$a(e,"x","batchNorm"),i=$a(t,"mean","batchNorm"),c=$a(n,"variance","batchNorm");let l,u;return null!=r&&(l=$a(r,"scale","batchNorm")),null!=a&&(u=$a(a,"offset","batchNorm")),f(4===s.rank,(()=>"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(s.rank,"."))),f(4===i.rank||1===i.rank,(()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(i.rank,"."))),f(4===c.rank||1===c.rank,(()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=l&&f(4===l.rank||1===l.rank,(()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=u&&f(4===u.rank||1===u.rank,(()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,"."))),Is(s,i,c,u,l,o)}});const Ns=tr({clipByValue_:function(e,t,n){const a=$a(e,"x","clipByValue");if(f(t<=n,(()=>"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,")."))),t===n)return mo(a.shape,t,a.dtype);const r={x:a},o={clipValueMin:t,clipValueMax:n};return ja.runKernel(me,r,o)}});const Rs=tr({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=er(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return Qr(n[0]);const a=n,r={axis:t};return ja.runKernel(be,a,r)}});const As=tr({concat1d_:function(e){return Rs(e,0)}});const _s=tr({concat2d_:function(e,t){return Rs(e,t)}});const Os=tr({concat3d_:function(e,t){return Rs(e,t)}});const Fs=tr({concat4d_:function(e,t){return Rs(e,t)}});const Ds=tr({conv2d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0;const i=$a(e,"x","conv2d","float32"),c=$a(t,"filter","conv2d","float32");let l=i,u=!1;3===i.rank&&(u=!0,l=ws(i,[1,i.shape[0],i.shape[1],i.shape[2]])),f(4===l.rank,(()=>"Error in conv2d: input must be rank 4, but got rank ".concat(l.rank,"."))),f(4===c.rank,(()=>"Error in conv2d: filter must be rank 4, but got rank "+"".concat(c.rank,"."))),xs("conv2d",a,s);const h="NHWC"===r?l.shape[3]:l.shape[1];f(h===c.shape[2],(()=>"Error in conv2d: depth of input (".concat(h,") must match ")+"input depth for filter ".concat(c.shape[2],"."))),f(ys(n,o),(()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'"))),f(bs(o),(()=>"Error in conv2D: Dilated rates should be larger than 0.")),f(bs(n),(()=>"Error in conv2D: Strides should be larger than 0."));const d={x:l,filter:c},p={strides:n,pad:a,dataFormat:r,dilations:o,dimRoundingMode:s},m=ja.runKernel(ve,d,p);return u?ws(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});const Ls=tr({conv1d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6?arguments[6]:void 0;const i=$a(e,"x","conv1d"),c=$a(t,"filter","conv1d");let l=i,u=!1;2===i.rank&&(u=!0,l=ws(i,[1,i.shape[0],i.shape[1]])),f(3===l.rank,(()=>"Error in conv1d: input must be rank 3, but got rank ".concat(l.rank,"."))),f(3===c.rank,(()=>"Error in conv1d: filter must be rank 3, but got rank "+"".concat(c.rank,"."))),xs("conv1d",a,s),f(l.shape[2]===c.shape[1],(()=>"Error in conv1d: depth of input (".concat(l.shape[2],") must match ")+"input depth for filter ".concat(c.shape[1],"."))),f(ys(n,o),(()=>"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(o,"'"))),f(bs(o),(()=>"Error in conv1D: Dilated rates should be larger than 0.")),f(bs(n),(()=>"Error in conv1D: Stride should be larger than 0.")),f("NWC"===r,(()=>"Error in conv1d: got dataFormat of ".concat(r," but only NWC is currently supported.")));const h=ws(c,[1,c.shape[0],c.shape[1],c.shape[2]]),d=ws(l,[l.shape[0],1,l.shape[1],l.shape[2]]),p=Ds(d,h,[1,n],a,"NHWC",[1,o],s);return ws(p,u?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});const Ms=tr({conv2DBackpropInput_:function(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",s=arguments.length>6?arguments[6]:void 0;f(e.length===t.rank,(()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")));let i=e,c=t,l=!1;3===t.rank&&(l=!0,c=ws(t,[1,t.shape[0],t.shape[1],t.shape[2]]),i=[1,e[0],e[1],e[2]]),f(4===i.length,(()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(i.length,"."))),f(4===c.rank,(()=>"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(c.rank))),f(4===n.rank,(()=>"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)));const u="NHWC"===o?i[3]:i[1],h="NHWC"===o?c.shape[3]:c.shape[1];f(u===n.shape[2],(()=>"Error in conv2dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[2],"."))),f(h===n.shape[3],(()=>"Error in conv2dDerInput: depth of output (".concat(h,") must ")+"match output depth for filter ".concat(n.shape[3],"."))),xs("conv2dDerInput",r,s);const d={dy:c,filter:n},p={strides:a,pad:r,dataFormat:o,dimRoundingMode:s,inputShape:i},m=ja.runKernel(we,d,p);return l?ws(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});const Ps=tr({conv2dTranspose_:function(e,t,n,a,r,o){const s=$a(e,"x","conv2dTranspose"),i=$a(t,"filter","conv2dTranspose");return Ms(n,s,i,a,r,"NHWC",o)}});const zs=tr({conv3d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const s=$a(e,"x","conv3d"),i=$a(t,"filter","conv3d");let c=s,l=!1;4===s.rank&&(l=!0,c=ws(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),f(5===c.rank,(()=>"Error in conv3d: input must be rank 5, but got rank ".concat(c.rank,"."))),f(5===i.rank,(()=>"Error in conv3d: filter must be rank 5, but got rank "+"".concat(i.rank,"."))),f(c.shape[4]===i.shape[3],(()=>"Error in conv3d: depth of input (".concat(c.shape[4],") must match ")+"input depth for filter ".concat(i.shape[3],"."))),f(ys(n,o),(()=>"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'"))),f("NDHWC"===r,(()=>"Error in conv3d: got dataFormat of ".concat(r," but only NDHWC is currently supported."))),f(bs(o),(()=>"Error in conv3D: Dilated rates should be larger than 0.")),f(bs(n),(()=>"Error in conv3D: Strides should be larger than 0."));const u={x:c,filter:i},h={strides:n,pad:a,dataFormat:r,dilations:o},d=ja.runKernel(ke,u,h);return l?ws(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const Bs=tr({conv3DBackpropInput_:function(e,t,n,a,r){f(e.length===t.rank,(()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")));let o=e,s=t,i=!1;4===t.rank&&(i=!0,s=ws(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);const c=o[4],l=s.shape[4];f(5===o.length,(()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(o.length,"."))),f(5===s.rank,(()=>"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(s.rank))),f(5===n.rank,(()=>"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank))),f(c===n.shape[3],(()=>"Error in conv3dDerInput: depth of input (".concat(c,") must ")+"match input depth for filter ".concat(n.shape[3],"."))),f(l===n.shape[4],(()=>"Error in conv3dDerInput: depth of output (".concat(l,") must ")+"match output depth for filter ".concat(n.shape[4],".")));const u={dy:s,filter:n},h={pad:r,strides:a,inputShape:o},d=ja.runKernel(Ie,u,h);return i?ws(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const Ws=tr({conv3dTranspose_:function(e,t,n,a,r){const o=$a(e,"x","conv3dTranspose"),s=$a(t,"filter","conv3dTranspose");return Bs(n,o,s,a,r)}});const Us=tr({denseBincount_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=$a(e,"x","denseBincount"),o=$a(t,"weights","denseBincount");f("int32"===r.dtype,(()=>"Error in denseBincount: input "+"dtype must be int32, but got ".concat(r.dtype))),f(r.rank<=2,(()=>"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(r.rank,"."))),f(n>=0,(()=>"size must be non-negative, but got ".concat(n,"."))),f(o.size===r.size||0===o.size,(()=>"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(r.shape,", weights shape: ")+"".concat(o.shape,".")));const s={x:r,weights:o},i={size:n,binaryOutput:a};return ja.runKernel(Ae,s,i)}});const Vs=tr({depthwiseConv2d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0;const i=$a(e,"x","depthwiseConv2d","float32"),c=$a(t,"filter","depthwiseConv2d","float32");let l=i,u=!1;3===i.rank&&(u=!0,l=ws(i,[1,i.shape[0],i.shape[1],i.shape[2]])),f(4===l.rank,(()=>"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,"."))),f(4===c.rank,(()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(c.rank,".")));const h="NHWC"===r?l.shape[3]:l.shape[1];f(h===c.shape[2],(()=>"Error in depthwiseConv2d: number of input channels "+"(".concat(h,") must match the inChannels dimension in ")+"filter ".concat(c.shape[2],"."))),xs("depthwiseConv2d",a,s);const d={x:l,filter:c},p={strides:n,pad:a,dataFormat:r,dilations:o,dimRoundingMode:s},m=ja.runKernel(Oe,d,p);return u?ws(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});const Gs=tr({elu_:function(e){const t={x:$a(e,"x","elu","float32")};return ja.runKernel(ze,t)}});const js=tr({equal_:function(e,t){let n=$a(e,"a","equal","string_or_numeric"),a=$a(t,"b","equal","string_or_numeric");[n,a]=Ma(n,a),So(n.shape,a.shape);const r={a:n,b:a};return ja.runKernel(Ue,r)}});const Hs=tr({exp_:function(e){const t={x:$a(e,"x","exp")};return ja.runKernel(Ve,t)}});const Ks=tr({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=$a(e,"x","expandDims","string_or_numeric");f(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const a={input:n},r={dim:t};return ja.runKernel(Ge,a,r)}});const qs=tr({tile_:function(e,t){const n=$a(e,"x","tile","string_or_numeric");f(n.rank===t.length,(()=>"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")));const a={x:n},r={reps:t};return ja.runKernel(Cn,a,r)}});const Ys=tr({eye_:function(e,t,n){null==t&&(t=e);const a=Xr([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),r=e<=t?e:t;for(let s=0;s<r;++s)a.set(1,s,s);const o=ws(a.toTensor(),[e,t]);if(null==n)return o;if(1===n.length)return qs(Ks(o,0),[n[0],1,1]);if(2===n.length)return qs(Ks(Ks(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return qs(Ks(Ks(Ks(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});const Xs=tr({floor_:function(e){const t={x:$a(e,"x","floor","float32")};return ja.runKernel(qe,t)}});const Zs=tr({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r={x:$a(e,"x","gather"),indices:$a(t,"indices","gather","int32")},o={axis:n,batchDims:a};return ja.runKernel(Ze,r,o)}});const Qs=tr({greater_:function(e,t){let n=$a(e,"a","greater","string_or_numeric"),a=$a(t,"b","greater","string_or_numeric");[n,a]=Ma(n,a),So(n.shape,a.shape);const r={a:n,b:a};return ja.runKernel(Qe,r)}});const Js=tr({greaterEqual_:function(e,t){let n=$a(e,"a","greaterEqual","string_or_numeric"),a=$a(t,"b","greaterEqual","string_or_numeric");[n,a]=Ma(n,a),So(n.shape,a.shape);const r={a:n,b:a};return ja.runKernel(Je,r)}});const $s=tr({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:$a(e,"x","leakyRelu")},a={alpha:t};return ja.runKernel(ot,n,a)}});const ei=tr({log_:function(e){const t={x:$a(e,"x","log","float32")};return ja.runKernel(ct,t)}});const ti=tr({log1p_:function(e){const t={x:$a(e,"x","log1p")};return ja.runKernel(lt,t)}});const ni=tr({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:$a(e,"x","max")},r={reductionIndices:t,keepDims:n};return ja.runKernel(mt,a,r)}});const ai=tr({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=$a(e,"x","sum");"bool"===a.dtype&&(a=Zr(a,"int32"));const r={x:a},o={axis:t,keepDims:n};return ja.runKernel(cn,r,o)}});const ri=tr({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=$a(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));const a=oo(((e,n)=>{const a=ni(e,t,!0),r=bo(e,a),o=bo(Zr(r,"float32"),ei(ai(Hs(r),t,!0)));n([o]);return{value:o,gradFunc:(e,n)=>{const[a]=n,r=Hs(a);return bo(e,to(ai(e,t,!0),r))}}}));return a(n)}});function oi(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function si(e,t,n){const a=e.length+t.length,r=[];let o=0,s=0;for(let i=0;i<a;i++)-1===n.indexOf(i)?r.push(e[o++]):r.push(t[s++]);return r}function ii(e,t){const n=[],a=e.length;for(let r=0;r<a;r++)-1===t.indexOf(r)&&n.push(e[r]);return[n,t.map((t=>e[t]))]}function ci(e,t){return si(e,t.map((e=>1)),t)}function li(e,t,n){f(oi(t,n),(()=>"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")))}function ui(e,t){if(oi(e,t))return null;const n=[];for(let a=0;a<t;++a)-1===e.indexOf(a)&&n.push(a);return e.forEach((e=>n.push(e))),n}function hi(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function di(e,t){const n=[];for(let a=t-e;a<t;++a)n.push(a);return n}const pi=tr({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=$a(e,"x","logSumExp"),r=S(t,a.shape),o=ni(a,r,!0),s=bo(a,o),i=Hs(s),c=ai(i,r),l=ei(c),u=Jr(ws(o,l.shape),l);if(n){const e=ci(u.shape,r);return ws(u,e)}return u}});const fi=tr({logicalAnd_:function(e,t){const n=$a(e,"a","logicalAnd","bool"),a=$a(t,"b","logicalAnd","bool");So(n.shape,a.shape);const r={a:n,b:a};return ja.runKernel(ut,r)}});const mi=tr({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=$a(e,"a","matMul"),o=$a(t,"b","matMul");[r,o]=Ma(r,o);const s={a:r,b:o},i={transposeA:n,transposeB:a};return ja.runKernel(ue,s,i)}});const gi=tr({maxPool_:function(e,t,n,a,r){const o=$a(e,"x","maxPool");let s=o,i=!1;3===o.rank&&(i=!0,s=ws(o,[1,o.shape[0],o.shape[1],o.shape[2]])),f(4===s.rank,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(s.rank,"."))),f(ys(n,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'"))),xs("maxPool",a,r);const c={x:s},l={filterSize:t,strides:n,pad:a,dimRoundingMode:r},u=ja.runKernel(yt,c,l);return i?ws(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const yi=tr({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const s=$a(e,"x","maxPool3d");let i=s,c=!1;4===s.rank&&(c=!0,i=ws(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),f(5===i.rank,(()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(i.rank,"."))),f("NDHWC"===o,(()=>"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o))),xs("maxPool3d",a,r);const l={x:i},u={filterSize:t,strides:n,pad:a,dimRoundingMode:r,dataFormat:o},h=ja.runKernel(vt,l,u);return c?ws(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const bi=tr({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:$a(e,"x","mean")},r={axis:t,keepDims:n};return ja.runKernel(wt,a,r)}});const vi=tr({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={x:$a(e,"x","min")},r={axis:t,keepDims:n};return ja.runKernel(kt,a,r)}});const xi=tr({minimum_:function(e,t){let n=$a(e,"a","minimum"),a=$a(t,"b","minimum");[n,a]=Ma(n,a),"bool"===n.dtype&&(n=Zr(n,"int32"),a=Zr(a,"int32")),So(n.shape,a.shape);const r={a:n,b:a};return ja.runKernel(St,r)}});const wi=tr({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=S(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=$a(e,"x","moments")).shape),a=bi(e,n,t);let r=a.shape;t||(r=ci(a.shape,n));const o=ao(bo(Zr(e,"float32"),ws(a,r)));return{mean:a,variance:bi(o,n,t)}}});const ki=tr({neg_:function(e){const t={x:$a(e,"x","neg")};return ja.runKernel(Et,t)}});const Si=tr({notEqual_:function(e,t){let n=$a(e,"a","notEqual","string_or_numeric"),a=$a(t,"b","notEqual","string_or_numeric");[n,a]=Ma(n,a),So(n.shape,a.shape);const r={a:n,b:a};return ja.runKernel(Nt,r)}});const Ii=tr({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));const o={indices:$a(e,"indices","oneHot","int32")},s={dtype:r,depth:t,onValue:n,offValue:a};return ja.runKernel(Ft,o,s)}});function Ti(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(z(e),"complex64"===t){const t=Ti(e,"float32"),n=Ti(e,"float32");return nr(t,n)}const n=P(y(e),t);return ja.makeTensor(n,e,t)}function Ci(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(z(e),"complex64"===t){const t=Ci(e,"float32"),n=Ti(e,"float32");return nr(t,n)}const n=M(y(e),t);return ja.makeTensor(n,e,t)}const Ei=tr({onesLike_:function(e){const t={x:$a(e,"x","onesLike")};return ja.runKernel(Ot,t)}});const Ni=tr({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=$a(e,"x","pad");if(0===a.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const r={paddings:t,constantValue:n},o={x:a};return ja.runKernel(Lt,o,r)}});const Ri=tr({prelu_:function(e,t){const n={x:$a(e,"x","prelu"),alpha:$a(t,"alpha","prelu")};return ja.runKernel(Pt,n)}});var Ai=n(4334);class _i{constructor(e,t,n,a,r){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=r||Math.random();this.random=Ai.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let a,r,o;do{a=2*this.random()-1,r=2*this.random()-1,o=a*a+r*r}while(o>=1||0===o);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*a*s,t=this.mean+this.stdDev*r*s,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Oi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==a&&(a=Math.random()),"number"===typeof a&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(e," - ").concat(t," <= 1 and dtype is not float"));this.random=Ai.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const Fi=tr({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(z(e),null!=a&&"bool"===a)throw new Error("Unsupported data type ".concat(a));const o=new _i(t,n,a,!1,r),s=Xr(e,a);for(let i=0;i<s.values.length;i++)s.values[i]=o.nextValue();return s.toTensor()}});const Di=tr({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",r=arguments.length>4?arguments[4]:void 0;z(e);const o=Xr(e,a),s=new Oi(t,n,null,r);for(let i=0;i<o.values.length;i++)o.values[i]=s.nextValue();return o.toTensor()}});function Li(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const r={start:e,stop:t,step:n,dtype:a};return ja.runKernel(Bt,{},r)}const Mi=tr({relu_:function(e){const t={x:$a(e,"x","relu")};return ja.runKernel(Vt,t)}});const Pi=tr({reverse_:function(e,t){const n={x:$a(e,"x","reverse")},a={dims:t};return ja.runKernel(Xt,n,a)}});const zi=tr({selu_:function(e){const t={x:$a(e,"x","selu")};return ja.runKernel($t,t)}});const Bi=tr({separableConv2d_:function(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const i=$a(e,"x","separableConv2d"),c=$a(t,"depthwiseFilter","separableConv2d"),l=$a(n,"pointwiseFilter","separableConv2d");let u=i,h=!1;if(3===i.rank&&(h=!0,u=ws(i,[1,i.shape[0],i.shape[1],i.shape[2]])),"NCHW"===s)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");f(4===u.rank,(()=>"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(u.rank,"."))),f(4===c.rank,(()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(c.rank,"."))),f(4===l.rank,(()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(c.rank,"."))),f(1===l.shape[0],(()=>"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(l.shape[0],"."))),f(1===l.shape[1],(()=>"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(l.shape[1],".")));const d=c.shape[2],p=c.shape[3];f(l.shape[2]===d*p,(()=>"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(d*p,", ")+"but got ".concat(l.shape[2],".")));const m=Vs(u,c,a,r,s,o),g=Ds(m,l,1,"valid",s);return h?ws(g,[g.shape[1],g.shape[2],g.shape[3]]):g}});const Wi=tr({sigmoid_:function(e){const t={x:$a(e,"x","sigmoid","float32")};return ja.runKernel(rn,t)}});const Ui=tr({slice_:function(e,t,n){const a=$a(e,"x","slice","string_or_numeric");if(0===a.rank)throw new Error("Slicing scalar is not possible");const r={x:a},o={begin:t,size:n};return ja.runKernel(en,r,o)}});const Vi=tr({slice1d_:function(e,t,n){const a=$a(e,"x","slice1d");return f(1===a.rank,(()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(a.rank," tensor"))),Ui(a,[t],[n])}});const Gi=tr({slice2d_:function(e,t,n){const a=$a(e,"x","slice2d");return f(2===a.rank,(()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(a.rank," tensor"))),Ui(a,t,n)}});const ji=tr({slice3d_:function(e,t,n){const a=$a(e,"x","slice3d");return f(3===a.rank,(()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(a.rank," tensor"))),Ui(a,t,n)}});const Hi=tr({slice4d_:function(e,t,n){const a=$a(e,"x","slice4d");return f(4===a.rank,(()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(a.rank," tensor"))),Ui(a,t,n)}});const Ki=tr({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=$a(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));const a={logits:n},r={dim:t};return ja.runKernel(hn,a,r)}});const qi=tr({softplus_:function(e){const t={x:$a(e,"x","softplus")};return ja.runKernel(on,t)}});const Yi=tr({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a={x:$a(e,"x","split")},r={numOrSizeSplits:t,axis:n};return ja.runKernel(un,a,r)}});const Xi=tr({squeeze_:function(e,t){const n=$a(e,"x","squeeze","string_or_numeric");return ws(n,I(n.shape,t).newShape)}});const Zi=tr({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=er(e,"tensors","stack","string_or_numeric");f(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&f(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const a=n,r={axis:t};return ja.runKernel(Dt,a,r)}});const Qi=tr({tanh_:function(e){const t={x:$a(e,"x","tanh","float32")};return ja.runKernel(Tn,t)}});function Ji(e,t){g(e);const n=Za(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ar(e,null,n,t)}function $i(e,t,n){if(g(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const a=Za(e,n);if(2!==a.length&&1!==a.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ar(e,t,a,n)}const ec=tr({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(z(e),null!=a&&"bool"===a)throw new Error("Unsupported data type $ { dtype }");const o=new _i(t,n,a,!0,r),s=Xr(e,a);for(let i=0;i<s.values.length;i++)s.values[i]=o.nextValue();return s.toTensor()}});const tc=tr({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=$a(e,"x","unstack","string_or_numeric");f(t>=-n.shape.length&&t<n.shape.length,(()=>"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")));const a={value:n},r={axis:t};return ja.runKernel(_n,a,r)}});const nc=tr({broadcastTo_:function(e,t){let n=$a(e,"broadcastTo","x");const a=n.shape;if(z(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=ws(n,e)}const r=n.shape,o=Array.from(t);for(let c=t.length-1;c>=0;c--)if(r[c]===t[c])o[c]=1;else if(1!==n.shape[c])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(t,"]."));if(0===o.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0)).length)return Qr(n);const s={x:n},i={reps:o};return ja.runKernel(Cn,s,i)}});const ac=tr({where_:function(e,t,n){const a=$a(t,"a","where"),r=$a(n,"b","where"),o=$a(e,"condition","where","bool"),s=So(So(o.shape,a.shape),r.shape),i={condition:nc(o,s),t:nc(a,s),e:nc(r,s)};return ja.runKernel(Jt,i)}});const rc=tr({imag_:function(e){const t={input:$a(e,"input","imag")};return ja.runKernel(tt,t)}});const oc=tr({real_:function(e){const t={input:$a(e,"input","real")};return ja.runKernel(Wt,t)}});const sc=tr({transpose_:function(e,t,n){const a=$a(e,"x","transpose");if(null==t&&(t=a.shape.map(((e,t)=>t)).reverse()),f(a.rank===t.length,(()=>"Error in transpose: rank of input ".concat(a.rank," ")+"must match length of perm ".concat(t,"."))),t.forEach((e=>{f(e>=0&&e<a.rank,(()=>"All entries in 'perm' must be between 0 and ".concat(a.rank-1)+" but got ".concat(t)))})),a.rank<=1)return a.clone();const r={x:a},o={perm:t};return"complex64"===a.dtype?cr((()=>{let e=oc(a),t=rc(a);return e=ja.runKernel(Rn,{x:e},o),t=ja.runKernel(Rn,{x:t},o),n&&(t=ki(t)),nr(e,t)})):ja.runKernel(Rn,r,o)}});const ic=tr({dropout_:function(e,t,n,a){const r=$a(e,"x","dropout");if(f("float32"===r.dtype,(()=>"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(r.dtype," tensor instead."))),f(t>=0&&t<1,(()=>"rate must be a float in the range [0, 1), but got ".concat(t,"."))),0===t)return e instanceof Sa?r.clone():r;const o=function(e,t){if(null==t)return e.shape.slice();if(b(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let a=0;a<e.shape.length;a++)null==t[a]&&null!=e.shape[a]?n.push(e.shape[a]):n.push(t[a]);return n}return t}(r,n),s=1-t,i=eo(Xs(Jr(Di(o,0,1,"float32",a),s)),s);return to(r,i)}});const cc=tr({fft_:function(e){f("complex64"===e.dtype,(()=>"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")));const t={input:e};return ja.runKernel("FFT",t)}});const lc=tr({rfft_:function(e,t){f("float32"===e.dtype,(()=>"The dtype for rfft() must be real value but got ".concat(e.dtype)));let n=e.shape[e.shape.length-1];const a=e.size/n;let r;if(null!=t&&t<n){const a=e.shape.map((e=>0)),o=e.shape.map((e=>e));o[e.shape.length-1]=t,r=Ui(e,a,o),n=t}else if(null!=t&&t>n){const a=e.shape.map((e=>e));a[e.shape.length-1]=t-n,r=Rs([e,Ti(a)],e.shape.length-1),n=t}else r=e;const o=ro(r),s=ws(nr(r,o),[a,n]),i=cc(s),c=Math.floor(n/2)+1,l=oc(i),u=rc(i),h=Yi(l,[c,n-c],l.shape.length-1),d=Yi(u,[c,n-c],u.shape.length-1),p=r.shape.slice();return p[r.shape.length-1]=c,ws(nr(h[0],d[0]),p)}});const uc=tr({ifft_:function(e){f("complex64"===e.dtype,(()=>"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")));const t={input:e};return ja.runKernel(et,t)}});const hc=tr({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let a;if(t<=2){const r=ws(e,[n,t]);a=uc(r)}else{const r=[n,2*(t-1)],o=ws(oc(e),[n,t]),s=ws(rc(e),[n,t]),i=Pi(Ui(o,[0,1],[n,t-2]),1),c=to(Pi(Ui(s,[0,1],[n,t-2]),1),so(-1)),l=Rs([o,i],1),u=Rs([s,c],1),h=ws(nr(l,u),[r[0],r[1]]);a=uc(h)}if(a=oc(a),3===e.rank&&0!==e.shape[0]){const t=a,n=e.shape[0];a=ws(a,[n,a.shape[0]/n,a.shape[1]]),t.dispose()}return a}});const dc=tr({conv2DBackpropFilter_:function(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",s=arguments.length>6?arguments[6]:void 0,i=e;3===e.rank&&(i=ws(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c=t;3===c.rank&&(c=ws(t,[1,t.shape[0],t.shape[1],t.shape[2]])),f(4===i.rank,(()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(i.shape,"."))),f(4===c.rank,(()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(c.shape,"."))),f(4===n.length,(()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")));const l="NHWC"===o?i.shape[3]:i.shape[1],u="NHWC"===o?c.shape[3]:c.shape[1];f(l===n[2],(()=>"Error in conv2dDerFilter: depth of input ".concat(l,") must ")+"match input depth in filter (".concat(n[2],"."))),f(u===n[3],(()=>"Error in conv2dDerFilter: depth of dy (".concat(u,") must ")+"match output depth for filter (".concat(n[3],")."))),xs("conv2dDerFilter",r,s);const h={x:i,dy:c},d={strides:a,pad:r,dataFormat:o,dimRoundingMode:s,filterShape:n};return ja.runKernel(xe,h,d)}});const pc=tr({relu6_:function(e){const t={x:$a(e,"x","relu6")};return ja.runKernel(Yt,t)}});const fc=tr({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:$a(e,"x","step")},a={alpha:t};return ja.runKernel(Dn,n,a)}});function mc(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return to(e,fc(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function gc(e,t){let n=t;const a=ko(e.shape,t.shape);return a.length>0&&(n=ai(n,a)),ws(n,e.shape)}function yc(e,t,n,a){if("linear"===t)return e;if("relu"===t)return Mi(e);if("elu"===t)return Gs(e);if("relu6"===t)return pc(e);if("prelu"===t)return Ri(e,n);if("leakyrelu"===t)return $s(e,a);if("sigmoid"===t)return Wi(e);throw new Error("Unknown fused activation ".concat(t,"."))}const bc=(e,t)=>!(e>0)||"linear"===t;const vc=tr({fusedConv2d_:function(e){let{x:t,filter:n,strides:a,pad:r,dataFormat:o="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:c,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:h}=e;if(l=l||"linear",!1===bc(ja.state.gradientDepth,l)){f("NHWC"===o,(()=>"Error in fused conv2d: got dataFormat of ".concat(o," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."));let e=Ds(t,n,a,r,o,s,i);return null!=c&&(e=Jr(e,c)),yc(e,l,u,h)}const d=$a(t,"x","conv2d","float32"),p=$a(n,"filter","conv2d","float32");let m=d,g=!1;3===d.rank&&(g=!0,m=ws(d,[1,d.shape[0],d.shape[1],d.shape[2]])),f(4===m.rank,(()=>"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(m.rank,"."))),f(4===p.rank,(()=>"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(p.rank,"."))),xs("fused conv2d",r,i);const y="NHWC"===o?m.shape[3]:m.shape[1];f(p.shape[2]===y,(()=>"Error in conv2d: depth of input (".concat(y,") must match ")+"input depth for filter ".concat(p.shape[2],"."))),f(ys(a,s),(()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(s,"'")));const b=ls(m.shape,p.shape,a,s,r,i);let v,x;if(null!=c&&(v=$a(c,"bias","fused conv2d"),[v]=Ma(v,d),"NHWC"===o?So(b.outShape,v.shape):(f(v.shape.length<=1,(()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(v.shape.length,"."))),f(0===v.shape.length||v.shape[0]===b.outChannels||1===v.shape[0],(()=>"Error in fused conv2d: bias shape (".concat(v.shape,") is not ")+"compatible with the number of output channels "+"(".concat(b.outChannels,")"))))),null!=u){const e=u.shape;if(f(e.length<=1||3===e.length,(()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(e.length,"."))),1===e.length)f(1===e[0]||e[0]===b.outChannels,(()=>"Error in fused conv2d: PReLU activation weights "+"(".concat(e,") is not compatible with the number of output ")+"channels (".concat(b.outChannels,").")));else if(3===e.length)try{So(e,b.outShape)}catch(I){const t="Error in fused conv2d: PReLU activation weights (".concat(e,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(b.outShape,").");throw Error(t)}x=$a(u,"prelu weights","fused conv2d")}const w=(e,t)=>{f("NHWC"===o,(()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(o," but only NHWC is currently supported.")));const[n,i,c,u]=t,h=mc(e,c,l);f(gs(s),(()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(s,"'")));const d=[Ms(i.shape,h,n,a,r),dc(i,h,n.shape,a,r)];if(null!=u){const e=gc(u,h);d.push(e)}return d},k={x:m,filter:p,bias:v,preluActivationWeights:x},S={strides:a,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i,activation:l,leakyreluAlpha:h};if(null==c){const e=oo(((e,t,n)=>{let a=ja.runKernel(zn,k,S);return n([t,e,a]),g&&(a=ws(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:w}}));return e(m,p)}{const e=oo(((e,t,n,a)=>{let r=ja.runKernel(zn,k,S);return a([t,e,r,n]),g&&(r=ws(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:w}}));return e(m,p,v)}}});const xc=tr({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0,i=e;3===e.rank&&(i=ws(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c=t;3===c.rank&&(c=ws(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const l={x:i,dy:c},u={strides:a,pad:r,dimRoundingMode:s,dilations:o,filterShape:n};return ja.runKernel(Fe,l,u)}});const wc=tr({depthwiseConv2dNativeBackpropInput_:function(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0,i=t,c=!1;3===t.rank&&(c=!0,i=ws(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const l={dy:i,filter:n},u={strides:a,pad:r,dimRoundingMode:s,dilations:o,inputShape:e},h=ja.runKernel(De,l,u);return c?ws(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});const kc=tr({fusedMatMul_:function(e){let{a:t,b:n,transposeA:a=!1,transposeB:r=!1,bias:o,activation:s="linear",preluActivationWeights:i,leakyreluAlpha:c=.2}=e;if(!1===bc(ja.state.gradientDepth,s)){let e=mi(t,n,a,r);return null!=o&&(e=Jr(e,o)),yc(e,s,i,c)}let l=$a(t,"a","fused matMul"),u=$a(n,"b","fused matMul");[l,u]=Ma(l,u);const h=a?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],p=a?l.shape[l.rank-1]:l.shape[l.rank-2],m=r?u.shape[u.rank-2]:u.shape[u.rank-1],g=l.shape.slice(0,-2),b=u.shape.slice(0,-2),v=y(g),x=y(b);f(h===d,(()=>"Error in fused matMul: inner shapes (".concat(h,") and (")+"".concat(d,") of Tensors with shapes ").concat(l.shape," and ")+"".concat(u.shape," and transposeA=").concat(a)+" and transposeB=".concat(r," must match.")));const w=So(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,m]),k=ws(l,a?[v,h,p]:[v,p,h]),S=ws(u,r?[x,m,d]:[x,d,m]);let I,T;null!=o&&(I=$a(o,"bias","fused matMul"),[I]=Ma(I,l),So(w,I.shape)),null!=i&&(T=$a(i,"prelu weights","fused matMul"));const C=(e,t)=>{const[n,i,c,l]=t,u=mc(ws(e,c.shape),c,s);let h,d;if(a||r?!a&&r?(h=mi(u,i,!1,!1),d=mi(u,n,!0,!1)):a&&!r?(h=mi(i,u,!1,!0),d=mi(n,u,!1,!1)):(h=mi(i,u,!0,!0),d=mi(u,n,!0,!0)):(h=mi(u,i,!1,!0),d=mi(n,u,!0,!1)),null!=o){return[h,d,gc(l,u)]}return[h,d]},E={a:k,b:S,bias:I,preluActivationWeights:T},N={transposeA:a,transposeB:r,activation:s,leakyreluAlpha:c};if(null==o){const e=oo(((e,t,n)=>{const a=ja.runKernel(Pn,E,N);return n([e,t,a]),{value:ws(a,w),gradFunc:C}}));return e(k,S)}{const e=oo(((e,t,n,a)=>{const r=ja.runKernel(Pn,E,N);return a([e,t,r,n]),{value:ws(r,w),gradFunc:C}}));return e(k,S,I)}}});const Sc=tr({cropAndResize_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const s=$a(e,"image","cropAndResize"),i=$a(t,"boxes","cropAndResize","float32"),c=$a(n,"boxInd","cropAndResize","int32"),l=i.shape[0];f(4===s.rank,(()=>"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(s.rank,"."))),f(2===i.rank&&4===i.shape[1],(()=>"Error in cropAndResize: boxes must be have size [".concat(l,",4] ")+"but had shape ".concat(i.shape,"."))),f(1===c.rank&&c.shape[0]===l,(()=>"Error in cropAndResize: boxInd must be have size [".concat(l,"] ")+"but had shape ".concat(i.shape,"."))),f(2===a.length,(()=>"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(a.length,"."))),f(a[0]>=1&&a[1]>=1,(()=>"cropSize must be atleast [1,1], but was ".concat(a))),f("bilinear"===r||"nearest"===r,(()=>"method must be bilinear or nearest, but was ".concat(r)));const u={image:s,boxes:i,boxInd:c},h={method:r,extrapolationValue:o,cropSize:a};return ja.runKernel(Re,u,h)}});const Ic=tr({flipLeftRight_:function(e){const t=$a(e,"image","flipLeftRight","float32");f(4===t.rank,(()=>"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")));const n={image:t};return ja.runKernel(Ke,n,{})}});const Tc=tr({grayscaleToRGB_:function(e){const t=$a(e,"image","grayscaleToRGB"),n=t.rank-1,a=t.shape[n];f(t.rank>=2,(()=>"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,"."))),f(1===a,(()=>"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(a,".")));const r=new Array(t.rank);return r.fill(1,0,n),r[n]=3,qs(t,r)}});const Cc=tr({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];const r=n.map(((e,t)=>$a(e,"tensors".concat(t),"einsum"))),o={equation:e};return ja.runKernel(Pe,r,o)}});const Ec=tr({rgbToGrayscale_:function(e){const t=$a(e,"image","RGBToGrayscale"),n=t.rank-1,a=t.shape[n];f(t.rank>=2,(()=>"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(t.rank,"."))),f(3===a,(()=>"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(a,".")));const r=t.dtype,o=Zr(t,"float32"),s=Ji([.2989,.587,.114]);let i;switch(t.rank){case 2:i=Cc("ij,j->i",o,s);break;case 3:i=Cc("ijk,k->ij",o,s);break;case 4:i=Cc("ijkl,l->ijk",o,s);break;case 5:i=Cc("ijklm,m->ijkl",o,s);break;case 6:i=Cc("ijklmn,n->ijklm",o,s);break;default:throw new Error("Not a valid tensor rank.")}return i=Ks(i,-1),Zr(i,r)}});const Nc=tr({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const r=$a(e,"image","rotateWithOffset","float32");f(4===r.rank,(()=>"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(r.rank,".")));const o={image:r},s={radians:t,fillValue:n,center:a};return ja.runKernel(Mn,o,s)}});function Rc(e,t,n,a,r,o){null==a&&(a=.5),null==r&&(r=Number.NEGATIVE_INFINITY),null==o&&(o=0);const s=e.shape[0];return n=Math.min(n,s),f(0<=a&&a<=1,(()=>"iouThreshold must be in [0, 1], but was '".concat(a,"'"))),f(2===e.rank,(()=>"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'"))),f(4===e.shape[1],(()=>"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1]))),f(1===t.rank,(()=>"scores must be a 1D tensor")),f(t.shape[0]===s,(()=>"scores has incompatible shape with boxes. Expected ".concat(s,", ")+"but was ".concat(t.shape[0]))),f(0<=o&&o<=1,(()=>"softNmsSigma must be in [0, 1], but was '".concat(o,"'"))),{maxOutputSize:n,iouThreshold:a,scoreThreshold:r,softNmsSigma:o}}const Ac=tr({nonMaxSuppression_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const o=$a(e,"boxes","nonMaxSuppression","float32"),s=$a(t,"scores","nonMaxSuppression","float32"),i=Rc(o,s,n,a,r);n=i.maxOutputSize,a=i.iouThreshold,r=i.scoreThreshold;const c={maxOutputSize:n,iouThreshold:a,scoreThreshold:r};return ja.runKernel(Rt,{boxes:o,scores:s},c)}});function _c(e,t,n){const a=function(e,t,n){return function(e,t,n){let a=0,r=e.length,o=0,s=!1;for(;a<r;){o=a+(r-a>>>1);const i=n(t,e[o]);i>0?a=o+1:(r=o,s=!i)}return s?a:-a-1}(e,t,n||Oc)}(e,t,n),r=a<0?-(a+1):a;e.splice(r,0,t)}function Oc(e,t){return e>t?1:e<t?-1:0}function Fc(e,t,n,a,r){return Mc(e,t,n,a,r,0)}function Dc(e,t,n,a,r,o){return Mc(e,t,n,a,r,0,!1,o,!0)}function Lc(e,t,n,a,r,o){return Mc(e,t,n,a,r,o,!0)}function Mc(e,t,n,a,r,o){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],i=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const l=[];for(let g=0;g<t.length;g++)t[g]>r&&l.push({score:t[g],boxIndex:g,suppressBeginIndex:0});l.sort(Bc);const u=o>0?-.5/o:0,h=[],d=[];for(;h.length<n&&l.length>0;){const t=l.pop(),{score:n,boxIndex:o,suppressBeginIndex:s}=t;if(n<r)break;let i=!1;for(let c=h.length-1;c>=s;--c){const n=Pc(e,o,h[c]);if(n>=a){i=!0;break}if(t.score=t.score*zc(a,u,n),t.score<=r)break}t.suppressBeginIndex=h.length,i||(t.score===n?(h.push(o),d.push(t.score)):t.score>r&&_c(l,t,Bc))}const p=h.length,f=n-p;i&&f>0&&(h.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));const m={selectedIndices:h};return s&&(m.selectedScores=d),c&&(m.validOutputs=p),m}function Pc(e,t,n){const a=e.subarray(4*t,4*t+4),r=e.subarray(4*n,4*n+4),o=Math.min(a[0],a[2]),s=Math.min(a[1],a[3]),i=Math.max(a[0],a[2]),c=Math.max(a[1],a[3]),l=Math.min(r[0],r[2]),u=Math.min(r[1],r[3]),h=Math.max(r[0],r[2]),d=Math.max(r[1],r[3]),p=(i-o)*(c-s),f=(h-l)*(d-u);if(p<=0||f<=0)return 0;const m=Math.max(o,l),g=Math.max(s,u),y=Math.min(i,h),b=Math.min(c,d),v=Math.max(y-m,0)*Math.max(b-g,0);return v/(p+f-v)}function zc(e,t,n){const a=Math.exp(t*n*n);return n<=e?a:0}function Bc(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const Wc=async function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const o=$a(e,"boxes","nonMaxSuppressionAsync"),s=$a(t,"scores","nonMaxSuppressionAsync"),i=Rc(o,s,n,a,r);n=i.maxOutputSize,a=i.iouThreshold,r=i.scoreThreshold;const c=await Promise.all([o.data(),s.data()]),l=c[0],u=c[1],{selectedIndices:h}=Fc(l,u,n,a,r);return o!==e&&o.dispose(),s!==t&&s.dispose(),Ji(h,"int32")};const Uc=tr({nonMaxSuppressionWithScore_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const s=$a(e,"boxes","nonMaxSuppression"),i=$a(t,"scores","nonMaxSuppression"),c=Rc(s,i,n,a,r,o);n=c.maxOutputSize,a=c.iouThreshold,r=c.scoreThreshold,o=c.softNmsSigma;const l={boxes:s,scores:i},u={maxOutputSize:n,iouThreshold:a,scoreThreshold:r,softNmsSigma:o},h=ja.runKernel(_t,l,u);return{selectedIndices:h[0],selectedScores:h[1]}}});const Vc=async function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const s=$a(e,"boxes","nonMaxSuppressionAsync"),i=$a(t,"scores","nonMaxSuppressionAsync"),c=Rc(s,i,n,a,r,o);n=c.maxOutputSize,a=c.iouThreshold,r=c.scoreThreshold,o=c.softNmsSigma;const l=await Promise.all([s.data(),i.data()]),u=l[0],h=l[1],{selectedIndices:d,selectedScores:p}=Lc(u,h,n,a,r,o);return s!==e&&s.dispose(),i!==t&&i.dispose(),{selectedIndices:Ji(d,"int32"),selectedScores:Ji(p)}};const Gc=tr({nonMaxSuppressionPadded_:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=$a(e,"boxes","nonMaxSuppression"),i=$a(t,"scores","nonMaxSuppression"),c=Rc(s,i,n,a,r,null),l={boxes:s,scores:i},u={maxOutputSize:c.maxOutputSize,iouThreshold:c.iouThreshold,scoreThreshold:c.scoreThreshold,padToMaxOutputSize:o},h=ja.runKernel(At,l,u);return{selectedIndices:h[0],validOutputs:h[1]}}});const jc=async function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=$a(e,"boxes","nonMaxSuppressionAsync"),i=$a(t,"scores","nonMaxSuppressionAsync"),c=Rc(s,i,n,a,r,null),l=c.maxOutputSize,u=c.iouThreshold,h=c.scoreThreshold,[d,p]=await Promise.all([s.data(),i.data()]),{selectedIndices:f,validOutputs:m}=Dc(d,p,l,u,h,o);return s!==e&&s.dispose(),i!==t&&i.dispose(),{selectedIndices:Ji(f,"int32"),validOutputs:so(m,"int32")}};const Hc=tr({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=$a(e,"images","resizeBilinear");f(3===r.rank||4===r.rank,(()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(r.rank,"."))),f(2===t.length,(()=>"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,"."))),f(!1===a||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let o=r,s=!1;3===r.rank&&(s=!0,o=ws(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const[]=t,i={images:o},c={alignCorners:n,halfPixelCenters:a,size:t},l=ja.runKernel(Kt,i,c);return s?ws(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});const Kc=tr({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=$a(e,"images","resizeNearestNeighbor");f(3===r.rank||4===r.rank,(()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(r.rank,"."))),f(2===t.length,(()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,"."))),f("float32"===r.dtype||"int32"===r.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),f(!1===a||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let o=r,s=!1;3===r.rank&&(s=!0,o=ws(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const[]=t,i={images:o},c={alignCorners:n,halfPixelCenters:a,size:t},l=ja.runKernel(jt,i,c);return s?ws(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});const qc=tr({bincount_:function(e,t,n){const a=$a(e,"x","bincount"),r=$a(t,"weights","bincount");f("int32"===a.dtype,(()=>"Error in bincount: input "+"dtype must be int32, but got ".concat(a.dtype))),f(n>=0,(()=>"size must be non-negative, but got ".concat(n,"."))),f(r.size===a.size||0===r.size,(()=>"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(a.shape,", weights shape: ")+"".concat(r.shape,".")));const o={x:a,weights:r},s={size:n};return ja.runKernel(de,o,s)}});const Yc=tr({lessEqual_:function(e,t){let n=$a(e,"a","lessEqual","string_or_numeric"),a=$a(t,"b","lessEqual","string_or_numeric");[n,a]=Ma(n,a),So(n.shape,a.shape);const r={a:n,b:a};return ja.runKernel(it,r)}});const Xc=tr({round_:function(e){const t={x:$a(e,"x","round")};return ja.runKernel(Zt,t)}});const Zc=tr({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const r=$a(e,"image","threshold"),o=r.shape[0]*r.shape[1];let s,i,c,l,u=to(Ji([a]),255);if(f(3===r.rank,(()=>"Error in threshold: image must be rank 3,"+"but got rank ".concat(r.rank,"."))),f(3===r.shape[2]||1===r.shape[2],(()=>"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(r.shape[2],"."))),f("int32"===r.dtype||"float32"===r.dtype,(()=>"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(r.dtype,"."))),f("otsu"===t||"binary"===t,(()=>"Method must be binary or otsu, but was ".concat(t))),3===r.shape[2]){[s,i,c]=Yi(r,[1,1,1],-1);const e=to(s,.2989),t=to(i,.587),n=to(c,.114);l=Jr(Jr(e,t),n)}else l=e;if("otsu"===t){u=function(e,t){let n,a,r,o,s,i,c=Ji([-1]),l=Ji([0]),u=Ji([0]);for(let h=0;h<e.size-1;h++){n=Ui(e,0,h+1),a=Ui(e,h+1),s=eo(ai(n),t),i=eo(ai(a),t);const d=ai(to(n,Li(0,n.size)));r=eo(d,ai(n));const p=mo(a.shape,n.size),f=Jr(Li(0,a.size),p),m=to(a,f);o=eo(ai(m),ai(a));const g=bo(r,o),y=bo(r,o),b=to(s,i);u=to(to(b,g),y);const v=Qs(u,l);l=ac(v,u,l),c=ac(v,Ji([h]),c)}return c}(qc(Zr(Xc(l),"int32"),rr([]),256),o)}const h=n?Yc(l,u):Qs(l,u);return Zr(to(h,255),"int32")}});const Qc=tr({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;const s=$a(e,"image","transform","float32"),i=$a(t,"transforms","transform","float32");f(4===s.rank,(()=>"Error in transform: image must be rank 4,"+"but got rank ".concat(s.rank,"."))),f(2===i.rank&&(i.shape[0]===s.shape[0]||1===i.shape[0])&&8===i.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),f(null==o||2===o.length,(()=>"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(o,".")));const c={image:s,transforms:i},l={interpolation:n,fillMode:a,fillValue:r,outputShape:o};return ja.runKernel(Nn,c,l)}});const Jc=tr({less_:function(e,t){let n=$a(e,"a","less","string_or_numeric"),a=$a(t,"b","less","string_or_numeric");[n,a]=Ma(n,a),So(n.shape,a.shape);const r={a:n,b:a};return ja.runKernel(st,r)}});const $c=tr({bandPart_:function(e,t,n){const a=$a(e,"a","bandPart");f(a.rank>=2,(()=>"bandPart(): Rank must be at least 2, got ".concat(a.rank,".")));const r=a.shape,[o,s]=a.shape.slice(-2);let i,c;"number"===typeof t?(f(t%1===0,(()=>"bandPart(): numLower must be an integer, got ".concat(t,"."))),f(t<=o,(()=>"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,")."))),i=$a(t<0?o:t,"numLower","bandPart")):(f("int32"===t.dtype,(()=>"bandPart(): numLower's dtype must be an int32.")),i=ac(Jc(t,0),o,xi(t,o))),"number"===typeof n?(f(n%1===0,(()=>"bandPart(): numUpper must be an integer, got ".concat(n,"."))),f(n<=s,(()=>"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,")."))),c=$a(n<0?s:n,"numUpper","bandPart")):(f("int32"===n.dtype,(()=>"bandPart(): numUpper's dtype must be an int32.")),c=ac(Jc(n,0),s,xi(n,s)));const l=ws(Li(0,o,1,"int32"),[-1,1]),u=Li(0,s,1,"int32"),h=bo(l,u),d=fi(Yc(h,i),Js(h,ki(c))),p=Ti([o,s],a.dtype);return ws(Zi(tc(ws(a,[-1,o,s])).map((e=>ac(d,e,p)))),r)}});function el(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return xo(e);if(1!==e.rank&&null===n)return el(ws(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return ai(xo(e),n);if(t===1/0)return ni(xo(e),n);if(t===-1/0)return vi(xo(e),n);if("euclidean"===t||2===t)return no(ai(yo(xo(e),so(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return ni(ai(xo(e),n[0]),n[1]-1);if(t===1/0)return ni(ai(xo(e),n[1]),n[0]);if(t===-1/0)return vi(ai(xo(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return no(ai(ao(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}const tl=tr({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=el(e=$a(e,"x","norm"),t,n);let o=r.shape;if(a){const t=S(n,e.shape);o=ci(r.shape,t)}return ws(r,o)}});const nl=tr({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,f(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)f(e[t].shape[0]===n,(()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")))}else t=!0,e=Yi(e,e.shape[0],0).map((e=>Xi(e,[0])));f(e.length<=e[0].shape[0],(()=>"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")));const n=[],a=e;for(let r=0;r<e.length;++r)n.push(ja.tidy((()=>{let e=a[r];if(r>0)for(let t=0;t<r;++t){const a=to(ai(to(n[t],e)),n[t]);e=bo(e,a)}return eo(e,tl(e,"euclidean"))})));return t?Zi(n,0):n}});function al(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ja.tidy((()=>{f(2===e.shape.length,(()=>"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")));const n=e.shape[0],a=e.shape[1];let r=Ys(n),o=Qr(e);const s=$i([[1]],[1,1]);let i=Qr(s);const c=n>=a?a:n;for(let e=0;e<c;++e){const t=o,c=i,l=r;[i,o,r]=ja.tidy((()=>{const t=Ui(o,[e,e],[n-e,1]),c=tl(t),l=Ui(o,[e,e],[1,1]),u=ac(Qs(l,0),$i([[-1]]),$i([[1]])),h=bo(l,to(u,c)),d=eo(t,h);i=1===d.shape[0]?Qr(s):Rs([s,Ui(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const p=ki(eo(mi(u,h),c)),f=Ui(o,[e,0],[n-e,a]),m=to(p,i),g=sc(i);if(0===e)o=bo(f,mi(m,mi(g,f)));else{const t=bo(f,mi(m,mi(g,f)));o=Rs([Ui(o,[0,0],[e,a]),t],0)}const y=sc(m),b=Ui(r,[0,e],[n,r.shape[1]-e]);if(0===e)r=bo(b,mi(mi(b,i),y));else{const t=bo(b,mi(mi(b,i),y));r=Rs([Ui(r,[0,0],[n,e]),t],1)}return[i,o,r]})),lr([t,c,l])}return!t&&n>a&&(r=Ui(r,[0,0],[n,a]),o=Ui(o,[0,0],[a,a])),[r,o]}))}const rl=tr({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(f(e.rank>=2,(()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank))),2===e.rank)return al(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),a=tc(ws(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),r=[],o=[];a.forEach((e=>{const[n,a]=al(e,t);r.push(n),o.push(a)}));return[ws(Zi(r,0),e.shape),ws(Zi(o,0),e.shape)]}}});var ol;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(ol||(ol={}));const sl=tr({squaredDifference_:function(e,t){let n=$a(e,"a","squaredDifference"),a=$a(t,"b","squaredDifference");[n,a]=Ma(n,a),So(n.shape,a.shape);const r={a:n,b:a};return ja.runKernel(gn,r,{})}});const il={flipLeftRight:Ic,grayscaleToRGB:Tc,resizeNearestNeighbor:Kc,resizeBilinear:Hc,rgbToGrayscale:Ec,rotateWithOffset:Nc,cropAndResize:Sc,nonMaxSuppression:Ac,nonMaxSuppressionAsync:Wc,nonMaxSuppressionWithScore:Uc,nonMaxSuppressionWithScoreAsync:Vc,nonMaxSuppressionPadded:Gc,nonMaxSuppressionPaddedAsync:jc,threshold:Zc,transform:Qc},cl={bandPart:$c,gramSchmidt:nl,qr:rl};const ll=class{static sgd(e){return new Co(e)}static momentum(e,t){return new Eo(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}static rmsprop(e){return new No(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}static adam(){return new vo(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}static adadelta(){return new fo(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}static adamax(){return new To(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}static adagrad(e){return new go(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}},ul="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e();function hl(){return new Promise((e=>ul((()=>e()))))}function dl(e,t){const n=e[0].length;e.forEach(((e,t)=>{f(e.length===n,(()=>"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")))})),f(t>=0&&t<n,(()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")));const a=e[0];e.forEach(((e,r)=>{for(let o=0;o<n;o++)f(o===t||e[o]===a[o],(()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(r,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(a,") ")+"along the non-concatenated axis ".concat(r,".")))}))}function pl(e,t){const n=e[0].slice();for(let a=1;a<e.length;a++)n[t]+=e[a][t];return n}var fl;function ml(e,t,n){let a=new Array;if(null==n&&null==t)return a;if(null==t)for(;a.length<e+n.length;)a.push(-1);else a=t.slice();if(null==n)return a;if(e+n.length!==a.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(a.length));for(let r=1;r<n.length;++r){const o=n[r],s=a[a.length-n.length+r],i=a[s];if(o>=0)if(i>=0){if(i!==o)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(r+e,"] = ").concat(o," but shape[").concat(r+e,"] = ").concat(i))}else a[s]=o}return a}function gl(e){const t={FIRST_DIM_SIZE:fl.FIRST_DIM_SIZE,VALUE_ROWIDS:fl.VALUE_ROWIDS,ROW_LENGTHS:fl.ROW_LENGTHS,ROW_SPLITS:fl.ROW_SPLITS,ROW_LIMITS:fl.ROW_LIMITS,ROW_STARTS:fl.ROW_STARTS},n=[];for(const a of e){if(!(a in t))break;n.push(t[a])}return n}function yl(e){return 0===e.length?0:e[0]===fl.FIRST_DIM_SIZE?e.length-1:e.length}function bl(e,t){if(null==e||null==t)return;const n=e.length,a=t.length;if(n>=a)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(a,")"));for(let r=0;r<Math.min(n,a-1);++r){const n=e[r],a=t[r+1];if(n>=0&&a>=0&&1!==n&&n!==a)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(r-e.length,"] = ").concat(n," but ragged tensor input.flatValues.shape[").concat(r-e.length,"] = ").concat(a))}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(fl||(fl={}));const vl=30;function xl(e){return e<=vl?e:O(e,Math.floor(Math.sqrt(e)))}function wl(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function kl(e,t,n){let a=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)a=a.concat([e[r+1]/t[r],t[r]]);a=a.concat(e.slice(n+1))}return a}function Sl(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let a=t+1;a<e;++a)a<=2*t?(n.push(a),n.push(a-(t+1))):n.push(a)}else{const a=[],r=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?r.push(n):a.push(n);n.push(...a),n.push(0),n.push(...r)}return n}function Il(e,t,n){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=[];a?r.push(e[0]/n):r.push(e[0]*n);for(let o=1;o<e.length;++o)o<=t.length?a?r.push(t[o-1]*e[o]):r.push(e[o]/t[o-1]):r.push(e[o]);return r}function Tl(e,t){const n=[0];for(let a=0;a<t;++a)n.push(e[a][0]);return n}function Cl(e,t,n){const a=e.slice(0,1);for(let r=0;r<n;++r)a.push(e[r+1]-t[r][0]-t[r][1]);return a}function El(e,t){const n=e.shape.length,a=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(a<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(a,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[a-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[a-1]," vs. ").concat(n));if(0===y(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));const r=t.shape,o=r[r.length-1];let s=1;for(let h=0;h<r.length-1;++h)s*=r[h];const i=e.shape,c=r.slice();c.pop();let l=1;for(let h=o;h<n;++h)l*=i[h],c.push(i[h]);const u=[...F(e.shape).map((e=>e/l)),1].slice(0,o);return[c,s,l,u]}function Nl(e,t,n){const a=t.rank>1?t.shape[t.rank-1]:1,r=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(a,", and batchDim: ").concat(r,".");if(n.rank<r)throw new Error(o+" update.rank < ".concat(r,". "));if(e.length<a+(n.rank-r))throw new Error(o+" Output shape length < ".concat(a+(n.rank-r)));if(n.rank!==r+e.length-a)throw new Error(o+" update.rank != ".concat(r+e.length-a));for(let s=0;s<r;++s)if(n.shape[s]!==t.shape[s])throw new Error(o+" updates.shape[".concat(s,"] (").concat(n.shape[s],") != indices.shape[").concat(s,"] (").concat(t.shape[s],")."));for(let s=0;s<n.rank-r;++s)if(n.shape[s+r]!==e[s+a])throw new Error(o+" updates.shape[".concat(s+r,"] (").concat(n.shape[s+r],") != shape[").concat(s+r,"] (").concat(e[s+r],")"))}function Rl(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}Nl(n,t,e)}function Al(e,t,n){const a=t.shape.length,r=a>1?t.shape[a-1]:1,o=n.length;let s=1;for(let c=r;c<o;++c)s*=n[c];const i=r<1?1:r;return{sliceRank:r,numUpdates:y(t.shape)/i,sliceSize:s,strides:[...F(n.slice(0,r)),1],outputSize:y(n)}}const _l=1.7580993408473768,Ol=1.0507009873554805,Fl=.3275911,Dl=.254829592,Ll=-.284496736,Ml=1.421413741,Pl=-1.453152027,zl=1.061405429;function Bl(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));const n=new Float32Array(2*e.length);for(let a=0;a<n.length;a+=2)n[a]=e[a/2],n[a+1]=t[a/2];return n}function Wl(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let a=0;a<e.length;a+=2)t[a/2]=e[a],n[a/2]=e[a+1];return{real:t,imag:n}}function Ul(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),a=new Float32Array(t);for(let r=0;r<e.length;r+=4)n[Math.floor(r/4)]=e[r],a[Math.floor(r/4)]=e[r+1];return{real:n,imag:a}}function Vl(e){const t=Math.floor(e.length/4),n=new Float32Array(t),a=new Float32Array(t);for(let r=2;r<e.length;r+=4)n[Math.floor(r/4)]=e[r],a[Math.floor(r/4)]=e[r+1];return{real:n,imag:a}}function Gl(e,t){return{real:e[2*t],imag:e[2*t+1]}}function jl(e,t,n,a){e[2*a]=t,e[2*a+1]=n}function Hl(e,t){const n=new Float32Array(e/2),a=new Float32Array(e/2);for(let r=0;r<Math.ceil(e/2);r++){const o=(t?2:-2)*Math.PI*(r/e);n[r]=Math.cos(o),a[r]=Math.sin(o)}return{real:n,imag:a}}function Kl(e,t,n){const a=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(a),imag:Math.sin(a)}}const ql="->",Yl=/->/g,Xl=",",Zl="...";function Ql(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(Yl,"").length)/ql.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(ql,'").'));const[a,r]=e.split(ql);f(-1===a.indexOf(Zl),(()=>'The ellipsis notation ("'.concat(Zl,'") is not supported yet.')));const o=a.split(Xl),s=o.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const i=[];for(let h=0;h<r.length;++h){const e=r[h];if(!o.some((t=>-1!==t.indexOf(e))))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===i.indexOf(e)&&i.push(e)}for(let h=0;h<a.length;++h){const e=a[h];-1===i.indexOf(e)&&e!==Xl&&i.push(e)}const c=new Array(o.length);for(let h=0;h<s;++h){if(new Set(o[h].split("")).size!==o[h].length)throw new Error("Found duplicate axes in input component ".concat(o[h],". ")+"Support for duplicate axes in input is not implemented yet.");c[h]=[];for(let e=0;e<o[h].length;++e)c[h].push(i.indexOf(o[h][e]))}const l=i.length,u=[];for(let h=r.length;h<l;++h)u.push(h);return{allDims:i,summedDims:u,idDims:c}}function Jl(e,t){let n=new Array(e);n.fill(-1);for(let r=0;r<t.length;++r)n[t[r]]=r;const a=[];for(let r=0;r<e;++r)-1===n[r]&&a.push(r);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:a}}function $l(e,t,n){const a=new Array(e);for(let r=0;r<n.length;++r){const e=n[r].shape;for(let n=0;n<t[r].length;++n)void 0===a[t[r][n]]?a[t[r][n]]=e[n]:f(a[t[r][n]]===e[n],(()=>"Expected dimension ".concat(a[t[r][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(e),", ")+"but got dimension ".concat(e[n])))}}function eu(e,t){const n=e,a=[];let r=0;0===e.length&&n.push(-1),r=e.length+1;for(let s=0;s<r;++s)a.push([]);const o=[];for(let s=0;s<n.length;++s){const e=nu(t,n[s]);for(const t of e)-1===o.indexOf(t)&&(a[s].push(t),o.push(t))}return{path:n,steps:a}}function tu(e){return e.every(((e,t)=>e===t))}function nu(e,t){const n=[];for(let a=0;a<e.length;++a)0!==e[a].length&&-1===e[a].indexOf(t)&&-1!==t||n.push(a);return n}function au(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=[];if("number"===typeof t)f(e.shape[n]%t===0,(()=>"Number of splits must evenly divide the axis.")),a=new Array(t).fill(e.shape[n]/t);else{const r=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);f(r<=1,(()=>"There should be only one negative value in split array."));const o=t.indexOf(-1);if(-1!==o){const a=t.reduce(((e,t)=>t>0?e+t:e));t[o]=e.shape[n]-a}f(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),a=t}return a}function ru(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function ou(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function su(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function iu(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function cu(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function lu(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function uu(e,t){const n=y(e),a=y(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(a,". inputShape=").concat(e," outputShape= ").concat(t)}function hu(e,t){const n=y(e),a=y(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(a,". inputShape=").concat(e," outputShape=").concat(t)}function du(){return"segment ids must be >= 0"}function pu(){return"segment ids are not increasing"}function fu(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function mu(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function gu(e,t){let n,a=!1;for(e<=vl?(n=e,a=!0):n=O(e,Math.floor(Math.sqrt(e)));!a;)n>t||n===e?a=!0:n=O(e,n+1);return n}function yu(e,t,n){const a=[],r=e.length;for(let o=0;o<r;o++)o!==t?a.push(e[o]):a.push(n);return a}function bu(e,t,n,a){const r=t.shape.length,o=e.shape.length;if(0!==a&&(a<-r||a>r))throw new Error("Expect batchDims in the range of [-".concat(r,", ").concat(r,"], but got ").concat(a));if(a<0&&(a+=r),a>o)throw new Error("batchDims (".concat(a,") must be less than rank(x) (\n    ").concat(o,")."));if(n<a)throw new Error("batchDims (".concat(a,") must be less than or equal to axis (").concat(n,")."));for(let h=0;h<a;++h)if(e.shape[h]!==t.shape[h])throw new Error("x.shape[".concat(h,"]: ").concat(e.shape[h]," should be equal to indices.shape[").concat(h,"]: ").concat(t.shape[h],"."));const s=e.shape[n],i=[];let c=1,l=1,u=1;for(let h=0;h<a;++h)i.push(e.shape[h]),c*=e.shape[h];for(let h=a;h<n;h++)i.push(e.shape[h]),l*=e.shape[h];for(let h=a;h<r;h++)i.push(t.shape[h]);for(let h=n+1;h<o;h++)i.push(e.shape[h]),u*=e.shape[h];return{batchSize:c,sliceSize:u,outerSize:l,dimSize:s,outputShape:i}}function vu(e){try{return e.map((e=>oa(e)))}catch(pU){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(pU))}}function xu(e){return e.map((e=>ra(e)))}!function(){for(const e of Ro)ho(e)}();const wu={kernelName:Y,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>to(e,fc(Zr(n,"float32"),-1))}}},ku={kernelName:X,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=ao(Zr(n,"float32")),a=no(bo(so(1),t));return ki(eo(e,a))}}}},Su={kernelName:Z,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=no(bo(ao(Zr(n,"float32")),1));return eo(e,t)}}}},Iu={kernelName:Q,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=So(n.shape,a.shape);return{a:()=>{let t=e;const a=ko(n.shape,r);return a.length>0&&(t=ai(t,a)),ws(t,n.shape)},b:()=>{let t=e;const n=ko(a.shape,r);return n.length>0&&(t=ai(t,n)),ws(t,a.shape)}}}},Tu={kernelName:J,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach(((t,a)=>{n[a]=()=>e.clone()})),n}},Cu={kernelName:$,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ro(n)}}},Eu={kernelName:ee,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ro(n)}}},Nu={kernelName:te,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eo(e,no(bo(so(1),ao(Zr(n,"float32")))))}}},Ru={kernelName:ne,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=no(Jr(so(1),ao(Zr(n,"float32"))));return eo(e,t)}}}},Au={kernelName:oe,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=So(n.shape,a.shape);return{a:()=>{const t=Jr(ao(n),ao(a));let o=to(e,eo(a,t));const s=ko(n.shape,r);return s.length>0&&(o=ai(o,s)),ws(o,n.shape)},b:()=>{const t=Jr(ao(n),ao(a));let o=ki(to(e,eo(n,t)));const s=ko(a.shape,r);return s.length>0&&(o=ai(o,s)),ws(o,a.shape)}}}},_u={kernelName:ae,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eo(e,Jr(ao(Zr(n,"float32")),1))}}},Ou={kernelName:re,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eo(e,bo(so(1),ao(Zr(n,"float32"))))}}};const Fu=tr({avgPool3dGrad_:function(e,t,n,a,r,o){const s=$a(e,"dy","avgPool3dGrad"),i=$a(t,"input","avgPool3dGrad");let c=s,l=i,u=!1;4===i.rank&&(u=!0,c=ws(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),l=ws(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),f(5===c.rank,(()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(c.rank,"."))),f(5===l.rank,(()=>"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(l.rank,"."))),xs("avgPool3dGrad",r,o);const h={dy:c,input:l},d={filterSize:n,strides:a,pad:r,dimRoundingMode:o},p=ja.runKernel(le,h,d);return u?ws(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),Du={kernelName:ce,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{filterSize:r,strides:o,pad:s,dimRoundingMode:i}=n;return{x:()=>Fu(e,a,r,o,s,i)}}};const Lu=tr({avgPoolGrad_:function(e,t,n,a,r){const o=$a(e,"dy","avgPoolGrad"),s=$a(t,"input","avgPoolGrad");f(s.rank===o.rank,(()=>"Rank of input (".concat(s.rank,") does not match rank of dy (").concat(o.rank,")")));let i=s,c=o,l=!1;3===s.rank&&(l=!0,i=ws(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=ws(o,[1,o.shape[0],o.shape[1],o.shape[2]])),f(4===c.rank,(()=>"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(c.rank,"."))),f(4===i.rank,(()=>"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(i.rank,".")));const u={dy:c,input:i},h={filterSize:n,strides:a,pad:r},d=ja.runKernel(ie,u,h);return l?ws(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Mu={kernelName:se,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{filterSize:r,strides:o,pad:s}=n;return{x:()=>Lu(e,a,r,o,s)}}},Pu={kernelName:ue,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[a,r]=t,{transposeA:o,transposeB:s}=n;return o||s?!o&&s?{a:()=>mi(e,r,!1,!1),b:()=>mi(e,a,!0,!1)}:o&&!s?{a:()=>mi(r,e,!1,!0),b:()=>mi(a,e,!1,!1)}:{a:()=>mi(r,e,!0,!0),b:()=>mi(e,a,!0,!0)}:{a:()=>mi(e,r,!1,!0),b:()=>mi(a,e,!0,!1)}}};const zu=tr({spaceToBatchND_:function(e,t,n){const a=$a(e,"x","spaceToBatchND");f(a.rank>=1+t.length,(()=>"input rank ".concat(a.rank," should be > than [blockShape] ").concat(t.length))),f(n.length===t.length,(()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length))),f(a.shape.reduce(((e,a,r)=>r>0&&r<=t.length?e&&(a+n[r-1][0]+n[r-1][1])%t[r-1]===0:e),!0),(()=>"input spatial dimensions ".concat(a.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())));const r={x:a},o={blockShape:t,paddings:n};return ja.runKernel(ln,r,o)}}),Bu={kernelName:he,gradFunc:(e,t,n)=>{const{blockShape:a,crops:r}=n;return{x:()=>zu(e,a,r)}}},Wu={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{const a=n,r=a.inputShape,o=a.shape,s=Array.from(o);for(let c=r.length-1;c>=0;c--)if(r[c]===o[c])s[c]=1;else if(1!==r[c])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(o,"]."));const i=[];for(let c=0;c<s.length;c++)s[c]>1&&i.push(c);return{x:()=>ai(e,i,!0)}}},Uu={kernelName:pe,gradFunc:e=>({x:()=>e.clone()})},Vu={kernelName:fe,gradFunc:e=>({x:()=>ro(e)})},Gu={kernelName:me,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{clipValueMin:r,clipValueMax:o}=n;return{x:()=>ac(fi(Js(a,r),Yc(a,o)),e,ro(e))}}},ju={kernelName:ye,inputsToSave:["x"],gradFunc:wu.gradFunc},Hu={kernelName:be,saveAllInputs:!0,gradFunc:(e,t,n)=>{const a=t.map((e=>e.shape)),{axis:r}=n,o=S(r,t[0].shape)[0],s=a.map((e=>e[o]));return Yi(e,s,o).map((e=>()=>e))}},Ku={kernelName:ve,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[a,r]=t,{dilations:o,strides:s,pad:i,dataFormat:c}=n;return f(gs(o),(()=>"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'"))),{x:()=>Ms(a.shape,e,r,s,i,c),filter:()=>dc(a,e,r.shape,s,i,c)}}},qu={kernelName:we,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[a,r]=t,{strides:o,pad:s,dataFormat:i,dimRoundingMode:c}=n;return{dy:()=>Ds(e,r,o,s,i,1,c),filter:()=>dc(e,a,r.shape,o,s,i,c)}}};const Yu=tr({conv3DBackpropFilter_:function(e,t,n,a,r){let o=e;4===e.rank&&(o=ws(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let s=t;4===s.rank&&(s=ws(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),f(5===o.rank,(()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(o.shape,"."))),f(5===s.rank,(()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(s.shape,"."))),f(5===n.length,(()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,"."))),f(o.shape[4]===n[3],(()=>"Error in conv3dDerFilter: depth of input ".concat(o.shape[4],") must ")+"match input depth in filter (".concat(n[3],"."))),f(s.shape[4]===n[4],(()=>"Error in conv3dDerFilter: depth of dy (".concat(s.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")));const i={x:o,dy:s},c={strides:a,pad:r,filterShape:n};return ja.runKernel(Se,i,c)}}),Xu={kernelName:ke,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:a,strides:r,pad:o}=n;f(gs(a),(()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(a,"'")));const[s,i]=t;return{x:()=>Bs(s.shape,e,i,r,o),filter:()=>Yu(s,e,i.shape,r,o)}}};const Zu=tr({sin_:function(e){const t={x:$a(e,"x","sin","float32")};return ja.runKernel(tn,t)}}),Qu={kernelName:Te,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>to(ki(Zu(Zr(n,"float32"))),e)}}};const Ju=tr({sinh_:function(e){const t={x:$a(e,"x","sinh")};return ja.runKernel(nn,t)}}),$u={kernelName:Ce,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>to(Ju(Zr(n,"float32")),e)}}};const eh=tr({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={x:$a(e,"x","cumsum")},o={axis:t,exclusive:n,reverse:a};return ja.runKernel(Ne,r,o)}}),th={kernelName:Ne,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{axis:r,exclusive:o,reverse:s}=n;return{x:()=>{const t=ui([r],a.rank);let n=eh(e,r,o,!s);return null!=t&&(n=sc(n,t)),n}}}},nh={kernelName:Oe,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:a,strides:r,pad:o,dimRoundingMode:s}=n,i=null==a?[1,1]:a;f(gs(i),(()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(i,"'")));const[c,l]=t;return f(4===c.rank,(()=>"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(c.rank,"."))),f(4===l.rank,(()=>"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(l.rank,"."))),f(c.shape[3]===l.shape[2],(()=>"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(c.shape[3],") must match the inChannels dimension ")+"in filter ".concat(l.shape[2],"."))),f(ys(r,i),(()=>"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(r," and dilations ")+"'".concat(i,"'."))),xs("depthwiseConv2d",o,s),{x:()=>wc(c.shape,e,l,r,o,i,s),filter:()=>xc(c,e,l.shape,r,o,i,s)}}},ah={kernelName:Le,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[a,r]=t,o={x:a,filter:r,dy:e},s={x:a,filter:r,dy:e};return{x:()=>ja.runKernel("Dilation2DBackpropInput",o,n),filter:()=>ja.runKernel("Dilation2DBackpropFilter",s,n)}}},rh={kernelName:ze,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,a={dy:e,y:n};return{x:()=>ja.runKernel(Be,a)}}},oh={kernelName:We,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,a=to(Hs(ki(ao(n))),2/Math.sqrt(Math.PI));return{x:()=>to(e,a)}}},sh={kernelName:Ve,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>to(e,n)}}},ih={kernelName:Ge,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>ws(e,n.shape)}}},ch={kernelName:je,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>to(e,Hs(n))}}},lh={kernelName:qe,gradFunc:e=>({x:()=>ro(e)})},uh={kernelName:Ye,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=So(n.shape,a.shape);return{a:()=>{const t=eo(e,Zr(a,"float32")),o=ko(n.shape,r);return o.length>0?ws(ai(t,o),n.shape):t},b:()=>{let t=to(e,Zr(n,"float32"));const o=ko(a.shape,r);o.length>0&&(t=ws(ai(t,o),a.shape));const s=ao(a);return ki(eo(t,Zr(s,"float32")))}}}};const hh=tr({rsqrt_:function(e){const t={x:$a(e,"x","rsqrt","float32")};return ja.runKernel(Qt,t)}}),dh={kernelName:Xe,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:a}=n,[r,o,s,i]=t,c=null==i?so(1):i,l=ko(o.shape,r.shape),u=[];if(1===o.rank){for(let e=0;e<r.shape.length-1;++e)u.push(r.shape[e]);u.push(1)}const h=bo(r,o),d=to(e,c),p=hh(Jr(s,so(a))),f=to(to(to(p,p),p),so(-.5));return{x:()=>1===o.rank?ws(to(to(e,qs(ws(p,[1,1,1,o.shape[0]]),u)),c),r.shape):ws(to(to(e,p),c),r.shape),mean:()=>{let e=to(to(p,so(-1)),d);return 1===o.rank&&(e=ai(e,l)),ws(e,o.shape)},variance:()=>{let e=to(to(f,h),d);return 1===o.rank&&(e=ai(e,l)),ws(e,o.shape)},scale:()=>{const t=to(h,p);let n=to(e,t);return 1===o.rank&&(n=ai(n,l)),ws(n,o.shape)},offset:()=>{let t=e;return 1===o.rank&&(t=ai(t,l)),ws(t,o.shape)}}}};const ph=tr({unsortedSegmentSum_:function(e,t,n){const a=$a(e,"x","unsortedSegmentSum"),r=$a(t,"segmentIds","unsortedSegmentSum","int32");f(v(n),(()=>"numSegments must be of dtype int"));const o={x:a,segmentIds:r},s={numSegments:n};return ja.runKernel(On,o,s)}}),fh={kernelName:Ze,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[a,r]=t,{axis:o,batchDims:s}=n,i=S(o,a.shape)[0],c=(e,t,n)=>()=>{const a=e.shape,r=t.size,s=a.slice(0,i),c=s.length,l=a.slice(o,a.length).slice(1),u=l.length,h=mh(0,c),d=mh(c+1,c+1+u),p=gh([s,[r],l]),f=ws(n,p),m=ws(t,[r]),g=gh([[c],h,d]),y=sc(f,g);let b=ph(y,m,e.shape[i]);const v=hi(g);return b=sc(b,v),b};if(1===s){const t=a.shape[0],n=a.split(t,0);return{x:()=>{const t=Zi(n.map(((t,n)=>c(t,r.slice(n,1),e.slice(n,1))())));return t.reshape(a.shape)},indices:()=>r}}return{x:c(a,r,e),indices:()=>r}}};function mh(e,t){const n=[];for(let a=e;a<t;++a)n.push(a);return n}function gh(e){const t=[];for(let n=0;n<e.length;++n)for(let a=0;a<e[n].length;++a)t.push(e[n][a]);return t}const yh={kernelName:Je,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t;return{a:()=>ro(n),b:()=>ro(a)}}},bh={kernelName:$e,gradFunc:e=>({x:()=>Zr(e,"float32")})},vh={kernelName:nt,gradFunc:e=>({x:()=>ro(e)})},xh={kernelName:at,gradFunc:e=>({x:()=>ro(e)})},wh={kernelName:rt,gradFunc:e=>({x:()=>ro(e)})},kh={kernelName:ot,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{alpha:r}=n,o=Qs(a,0);return{x:()=>ac(o,e,to(e,r))}}},Sh={kernelName:lt,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eo(e,Jr(n,1))}}},Ih={kernelName:ct,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eo(e,Zr(n,"float32"))}}},Th={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[a]=t,{axis:r}=n;return{logits:()=>{const t=Hs(a);return bo(e,to(ai(e,r,!0),t))}}}};const Ch=tr({localResponseNormalizationBackprop_:function(e,t,n){const a={x:e,y:t,dy:n},r={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return ja.runKernel(ft,a,r)}}),Eh={kernelName:pt,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[a,r]=t,{depthRadius:o,bias:s,alpha:i,beta:c}=n;return{x:()=>Ch(a,r,e,o,s,i,c)}}};function Nh(e,t,n,a){return t.rank<n.rank&&(t=ws(t,ci(t.shape,a))),e.rank<n.rank&&(e=ws(e,ci(e.shape,a))),{x:()=>to(e,Zr(js(n,t),e.dtype))}}const Rh={kernelName:mt,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const a=n,{reductionIndices:r}=a,o=t[0],s=Nh(e,t[1],o,S(r,o.shape));return{x:()=>s.x()}}},Ah={kernelName:gt,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t;return{a:()=>to(e,Zr(Js(n,a),"float32")),b:()=>to(e,Zr(Jc(n,a),"float32"))}}};const _h=tr({maxPool3dGrad_:function(e,t,n,a,r,o,s){const i=$a(e,"dy","maxPool3dGrad"),c=$a(t,"input","maxPool3dGrad"),l=$a(n,"output","maxPool3dGrad");let u=i,h=c,d=l,p=!1;4===c.rank&&(p=!0,u=ws(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),h=ws(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]]),d=ws(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),f(5===u.rank,(()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,"."))),f(5===h.rank,(()=>"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(h.rank,"."))),f(5===d.rank,(()=>"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(d.rank,"."))),xs("maxPool3dGrad",o,s);const m={dy:u,input:h,output:d},g={filterSize:a,strides:r,pad:o,dimRoundingMode:s},y=ja.runKernel(xt,m,g);return p?ws(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}}),Oh={kernelName:vt,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[a,r]=t,{filterSize:o,strides:s,pad:i,dimRoundingMode:c}=n;return{x:()=>_h(e,a,r,o,s,i,c)}}};const Fh=tr({maxPoolGrad_:function(e,t,n,a,r,o,s){const i=$a(e,"dy","maxPoolGrad"),c=$a(t,"input","maxPoolGrad"),l=$a(n,"output","maxPoolGrad");f(c.rank===i.rank,(()=>"Rank of input (".concat(c.rank,") does not match rank of dy ")+"(".concat(i.rank,")"))),f(4===i.rank,(()=>"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(i.rank,"."))),f(4===c.rank,(()=>"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(c.rank,"."))),xs("maxPoolGrad",o,s);const u={dy:i,input:c,output:l},h={filterSize:a,strides:r,pad:o,dimRoundingMode:s};return ja.runKernel(bt,u,h)}}),Dh={kernelName:yt,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[a,r]=t,{filterSize:o,strides:s,pad:i}=n;return{x:()=>Fh(e,a,r,o,s,i)}}},Lh={kernelName:wt,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{axis:r}=n,o=S(r,a.shape),s=y(ii(a.shape,o)[1]);return{x:()=>{const t=a.shape.slice();o.forEach((e=>{t[e]=1}));const n=ws(e,t);return eo(to(n,Ci(a.shape,"float32")),s)}}}},Mh={kernelName:kt,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const a=n,{axis:r}=a,[o,s]=t,i=Nh(e,s,o,S(r,o.shape));return{x:()=>i.x()}}},Ph={kernelName:St,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t;return{a:()=>to(e,Zr(Yc(n,a),"float32")),b:()=>to(e,Zr(Qs(n,a),"float32"))}}},zh={kernelName:It,inputsToSave:["x"],gradFunc:(e,t,n)=>{const a=t[0],{paddings:r}=n,o=r.map((e=>e[0]));return{x:()=>Ui(e,o,a.shape)}}},Bh={kernelName:Tt,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=So(n.shape,a.shape);return{a:()=>{const t=ko(n.shape,r);return t.length>0?ws(ai(e,t),n.shape):e},b:()=>{const t=to(e,ki(Xs(eo(n,a)))),o=ko(a.shape,r);return o.length>0?ws(ai(t,o),a.shape):t}}}},Wh={kernelName:Ct,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=So(n.shape,a.shape);return{a:()=>{const t=to(e,Zr(a,"float32")),o=ko(n.shape,r);return o.length>0?ws(ai(t,o),n.shape):t},b:()=>{const t=to(e,Zr(n,"float32")),o=ko(a.shape,r);return o.length>0?ws(ai(t,o),a.shape):t}}}},Uh={kernelName:Et,gradFunc:e=>({x:()=>ki(e)})},Vh={kernelName:Ft,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>Ti(n.shape,"float32")}}},Gh={kernelName:Ot,gradFunc:e=>({x:()=>ro(e)})},jh={kernelName:Dt,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:a}=n;return tc(e,a).map((e=>()=>e))}},Hh={kernelName:Lt,inputsToSave:["x"],gradFunc:(e,t,n)=>{const a=t[0],{paddings:r}=n,o=r.map((e=>e[0]));return{x:()=>Ui(e,o,a.shape)}}},Kh={kernelName:Mt,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,a,r]=t,o=n,s=a,i=So(o.shape,s.shape);return{a:()=>{const t=Zr(s,"float32");let n=to(e,to(t,yo(o,bo(t,so(1)))));const a=ko(o.shape,i);return a.length>0&&(n=ai(n,a)),ws(n,o.shape)},b:()=>{const t=Qs(o,0),n=ac(t,ei(o),ro(o));let a=to(e,to(r,n));const c=ko(s.shape,i);return c.length>0&&(a=ai(a,c)),ws(a,s.shape)}}}},qh={kernelName:Pt,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,a]=t,r=Qs(n,0);return{x:()=>ac(r,e,to(e,a)),alpha:()=>{let t=ac(r,ro(e),to(e,n));const o=ko(a.shape,e.shape);return o.length>0&&(t=ai(t,o)),ws(t,a.shape)}}}};const Yh=tr({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={x:$a(e,"x","cumprod")},o={axis:t,exclusive:n,reverse:a};return ja.runKernel(Ee,r,o)}});function Xh(e,t,n){const a=e.shape.length,r=a-n.length,o=ui(n,a);let s=e;null!=o&&(s=sc(e,o));const i=s.shape.slice(),c=i.splice(a-n.length,n.length).reduce(((e,t)=>e*t),1);i.push(c);let l=function(e,t,n){const a=e.shape.slice();a[n]=1;const r=ws(t,a),o=Yh(e,n,!0,!1),s=Yh(e,n,!0,!0),i=to(o,s);return to(r,i)}(s.reshape(i),t,r);if(l=l.reshape(s.shape),null!=o){const e=hi(o);l=sc(l,e)}return l}const Zh={kernelName:zt,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{axis:r}=n;let o=[];return o=void 0===r||null===r?a.shape.map(((e,t)=>t)):"number"===typeof r?[r]:r,{x:()=>Xh(a,e,o)}}},Qh={kernelName:Me,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=So(n.shape,a.shape);return{a:()=>{const t=eo(e,Zr(a,"float32")),o=ko(n.shape,r);return o.length>0?ws(ai(t,o),n.shape):t},b:()=>{let t=to(e,Zr(n,"float32"));const o=ko(a.shape,r);o.length>0&&(t=ws(ai(t,o),a.shape));const s=ao(a);return ki(eo(t,Zr(s,"float32")))}}}},Jh={kernelName:Ut,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eo(e,ki(ao(n)))}}},$h={kernelName:Yt,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,a=to(Yc(n,6),fc(n));return{x:()=>to(e,Zr(a,"float32"))}}},ed={kernelName:Vt,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>to(e,Zr(fc(n),"float32"))}}},td={kernelName:Gt,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ws(e,n.shape)}}},nd={kernelName:Kt,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[a]=t,r={dy:e,images:a};return{images:()=>ja.runKernel(qt,r,n)}}},ad={kernelName:jt,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[a]=t,r={dy:e,images:a};return{images:()=>ja.runKernel(Ht,r,n)}}},rd={kernelName:Xt,gradFunc:(e,t,n)=>{const{dims:a}=n,r=S(a,e.shape);return{x:()=>Pi(e,r)}}},od={kernelName:Zt,gradFunc:e=>({x:()=>ro(e)})},sd={kernelName:Qt,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ki(eo(e,to(yo(n,1.5),2)))}}};const id=tr({logicalNot_:function(e){const t={x:$a(e,"x","logicalNot","bool")};return ja.runKernel(ht,t)}}),cd={kernelName:Jt,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>Zr(ro(n),"float32"),t:()=>to(e,Zr(n,e.dtype)),e:()=>to(e,Zr(id(n),e.dtype))}}},ld={kernelName:$t,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Qs(n,so(0)),a=so(_l),r=so(Ol),o=to(e,r),s=to(to(e,a),Hs(Zr(n,"float32")));return ac(t,o,s)}}}},ud={kernelName:rn,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>to(e,to(n,bo(so(1),n)))}}},hd={kernelName:an,gradFunc:e=>({x:()=>ro(e)})};const dd=tr({cos_:function(e){const t={x:$a(e,"x","cos","float32")};return ja.runKernel(Te,t)}}),pd={kernelName:tn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>to(dd(Zr(n,"float32")),e)}}};const fd=tr({cosh_:function(e){const t={x:$a(e,"x","cosh","float32")};return ja.runKernel(Ce,t)}}),md={kernelName:nn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>to(fd(Zr(n,"float32")),e)}}},gd={kernelName:en,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{begin:r,size:o}=n,s=a.shape,[i,c]=es(a,r,o),l=[];for(let u=0;u<e.rank;u++)l.push([i[u],s[u]-i[u]-c[u]]);return{x:()=>Ni(e,l)}}},yd={kernelName:hn,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[a]=t,{dim:r}=n,o=to(e,a);return{logits:()=>bo(o,to(ai(o,[r],true),a))}}},bd={kernelName:on,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>to(e,Wi(n))}}};const vd=tr({batchToSpaceND_:function(e,t,n){const a=$a(e,"x","batchToSpaceND"),r=t.reduce(((e,t)=>e*t));f(a.rank>=1+t.length,(()=>"input rank is ".concat(a.rank," but should be > than blockShape.length ").concat(t.length))),f(n.length===t.length,(()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length))),f(a.shape[0]%r===0,(()=>"input tensor batch is ".concat(a.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(r)));const o={x:a},s={blockShape:t,crops:n};return ja.runKernel(he,o,s)}}),xd={kernelName:ln,gradFunc:(e,t,n)=>{const{blockShape:a,paddings:r}=n;return{x:()=>vd(e,a,r)}}},wd={kernelName:un,gradFunc:(e,t,n)=>{const{axis:a}=n;return{x:()=>Rs(e,a)}}};const kd=[wu,ku,Su,Iu,Tu,Cu,Eu,Nu,Ru,Au,_u,Ou,Du,Mu,Pu,Bu,Wu,Uu,Vu,Gu,ju,Hu,qu,Ku,Xu,Qu,$u,th,nh,ah,Qh,rh,oh,sh,ih,ch,uh,lh,dh,fh,yh,bh,vh,xh,wh,kh,Sh,Ih,Th,Eh,Rh,Rh,Ah,Oh,Dh,Lh,Mh,Ph,zh,Bh,Wh,Uh,Vh,Gh,jh,Hh,Hh,Kh,qh,Zh,Jh,$h,ed,td,nd,ad,rd,od,sd,cd,ld,ud,hd,pd,md,gd,yd,bd,xd,xd,wd,wd,{kernelName:sn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eo(e,to(no(Zr(n,"float32")),2))}}},{kernelName:gn,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=so(2);return{a:()=>to(e,to(r,bo(n,a))),b:()=>to(e,to(r,bo(a,n)))}}},{kernelName:yn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>to(e,to(Zr(n,"float32"),2))}}},{kernelName:Dn,gradFunc:e=>({x:()=>ro(e)})},{kernelName:Sn,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=So(n.shape,a.shape);return{a:()=>{let t=e;const a=ko(n.shape,r);return a.length>0&&(t=ai(t,a)),ws(t,n.shape)},b:()=>{let t=e;const n=ko(a.shape,r);return n.length>0&&(t=ai(t,n)),ws(ki(t),a.shape)}}}},{kernelName:cn,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,r=a.shape.slice(),{axis:o}=n;S(o,a.shape).forEach((e=>{r[e]=1}));const s=ws(e,r),i=to(s,Ci(a.shape,"float32"));return{x:()=>i}}},{kernelName:In,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eo(e,ao(dd(n)))}}},{kernelName:Tn,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>to(bo(so(1),ao(n)),e)}}},{kernelName:Cn,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{reps:r}=n;return{x:()=>{let t=ro(a);if(1===a.rank)for(let n=0;n<r[0];++n)t=Jr(t,Ui(e,[n*a.shape[0]],[a.shape[0]]));else if(2===a.rank)for(let n=0;n<r[0];++n)for(let o=0;o<r[1];++o)t=Jr(t,Ui(e,[n*a.shape[0],o*a.shape[1]],[a.shape[0],a.shape[1]]));else if(3===a.rank)for(let n=0;n<r[0];++n)for(let o=0;o<r[1];++o)for(let s=0;s<r[2];++s)t=Jr(t,Ui(e,[n*a.shape[0],o*a.shape[1],s*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(4!==a.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(a.rank," tensors yet."));for(let n=0;n<r[0];++n)for(let o=0;o<r[1];++o)for(let s=0;s<r[2];++s)for(let i=0;i<r[3];++i)t=Jr(t,Ui(e,[n*a.shape[0],o*a.shape[1],s*a.shape[2],i*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return t}}}},{kernelName:Rn,gradFunc:(e,t,n)=>{const a=n,{perm:r}=a,o=hi(r);return{x:()=>sc(e,o)}}},{kernelName:_n,gradFunc:(e,t,n)=>{const a=n,{axis:r}=a;return{value:()=>Zi(e,r)}}},{kernelName:On,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=Io(t,ro(t)),a=Zs(e,n);let r=Js(t,so(0,"int32"));const o=a.rank-r.rank;for(let i=0;i<o;++i)r=Ks(r,i+1);r=fi(r,Ci(a.shape,"bool"));const s=ro(a);return ac(r,a,s)}(e,n)}}},{kernelName:Fn,gradFunc:e=>({x:()=>ro(e)})}];for(const fU of kd)Yn(fU);Ia().prototype.abs=function(){return this.throwIfDisposed(),xo(this)};const Sd=tr({acos_:function(e){const t={x:$a(e,"x","acos")};return ja.runKernel(X,t)}});Ia().prototype.acos=function(){return this.throwIfDisposed(),Sd(this)};const Id=tr({acosh_:function(e){const t={x:$a(e,"x","acosh")};return ja.runKernel(Z,t)}});Ia().prototype.acosh=function(){return this.throwIfDisposed(),Id(this)},Ia().prototype.add=function(e){return this.throwIfDisposed(),Jr(this,e)},Ia().prototype.all=function(e,t){return this.throwIfDisposed(),as(this,e,t)},Ia().prototype.any=function(e,t){return this.throwIfDisposed(),rs(this,e,t)},Ia().prototype.argMax=function(e){return this.throwIfDisposed(),os(this,e)};const Td=tr({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:$a(e,"x","argMin")},a={axis:t};return ja.runKernel(ee,n,a)}});Ia().prototype.argMin=function(e){return this.throwIfDisposed(),Td(this,e)},Ia().prototype.asScalar=function(){return this.throwIfDisposed(),f(1===this.size,(()=>"The array must have only 1 element.")),ws(this,[])},Ia().prototype.asType=function(e){return this.throwIfDisposed(),Zr(this,e)},Ia().prototype.as1D=function(){return this.throwIfDisposed(),ws(this,[this.size])},Ia().prototype.as2D=function(e,t){return this.throwIfDisposed(),ws(this,[e,t])},Ia().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),ws(this,[e,t,n])},Ia().prototype.as4D=function(e,t,n,a){return this.throwIfDisposed(),ws(this,[e,t,n,a])},Ia().prototype.as5D=function(e,t,n,a,r){return this.throwIfDisposed(),ws(this,[e,t,n,a,r])};const Cd=tr({asin_:function(e){const t={x:$a(e,"x","asin")};return ja.runKernel(te,t)}});Ia().prototype.asin=function(){return this.throwIfDisposed(),Cd(this)};const Ed=tr({asinh_:function(e){const t={x:$a(e,"x","asinh")};return ja.runKernel(ne,t)}});Ia().prototype.asinh=function(){return this.throwIfDisposed(),Ed(this)};const Nd=tr({atan_:function(e){const t={x:$a(e,"x","atan")};return ja.runKernel(ae,t)}});Ia().prototype.atan=function(){return this.throwIfDisposed(),Nd(this)};const Rd=tr({atan2_:function(e,t){let n=$a(e,"a","atan2"),a=$a(t,"b","atan2");[n,a]=Ma(n,a);const r={a:n,b:a};return ja.runKernel(oe,r)}});Ia().prototype.atan2=function(e){return this.throwIfDisposed(),Rd(this,e)};const Ad=tr({atanh_:function(e){const t={x:$a(e,"x","atanh")};return ja.runKernel(re,t)}});Ia().prototype.atanh=function(){return this.throwIfDisposed(),Ad(this)},Ia().prototype.avgPool=function(e,t,n,a){return this.throwIfDisposed(),ks(this,e,t,n,a)},Ia().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),vd(this,e,t)},Ia().prototype.batchNorm=function(e,t,n,a,r){return this.throwIfDisposed(),Is(this,e,t,n,a,r)},Ia().prototype.broadcastTo=function(e){return this.throwIfDisposed(),nc(this,e)},Ia().prototype.cast=function(e){return this.throwIfDisposed(),Zr(this,e)};const _d=tr({ceil_:function(e){const t={x:$a(e,"x","ceil","float32")};return ja.runKernel(fe,t)}});Ia().prototype.ceil=function(){return this.throwIfDisposed(),_d(this)},Ia().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Ns(this,e,t)},Ia().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Sa&&(e=[e]),Rs([this,...e],t)},Ia().prototype.conv1d=function(e,t,n,a,r,o){return this.throwIfDisposed(),Ls(this,e,t,n,a,r,o)},Ia().prototype.conv2dTranspose=function(e,t,n,a,r){return this.throwIfDisposed(),Ps(this,e,t,n,a,r)},Ia().prototype.conv2d=function(e,t,n,a,r,o){return this.throwIfDisposed(),Ds(this,e,t,n,a,r,o)},Ia().prototype.cos=function(){return this.throwIfDisposed(),dd(this)},Ia().prototype.cosh=function(){return this.throwIfDisposed(),fd(this)},Ia().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),Yh(this,e,t,n)},Ia().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),eh(this,e,t,n)};const Od=tr({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const a=$a(e,"x","depthToSpace","float32"),r="NHWC"===n?a.shape[1]:a.shape[2],o="NHWC"===n?a.shape[2]:a.shape[3],s="NHWC"===n?a.shape[3]:a.shape[1];f(t>1,(()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(t))),f(r*t>=0,(()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(r," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(a.shape))),f(o*t>=0,(()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(o," and ").concat(t," for depthToSpace with input shape\n        ").concat(a.shape))),f(s%(t*t)===0,(()=>"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(s," for depthToSpace with input shape ").concat(a.shape)));const i={x:a},c={blockSize:t,dataFormat:n};return ja.runKernel(_e,i,c)}});Ia().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Od(this,e,t)},Ia().prototype.depthwiseConv2d=function(e,t,n,a,r,o){return this.throwIfDisposed(),Vs(this,e,t,n,a,r,o)};const Fd=tr({dilation2d_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const s=$a(e,"x","dilation2d"),i=$a(t,"filter","dilation2d");f(3===s.rank||4===s.rank,(()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(s.rank,"."))),f(3===i.rank,(()=>"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(i.rank,"."))),f("NHWC"===o,(()=>"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(o)));let c=s,l=!1;3===s.rank&&(c=ws(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=!0),f(c.shape[3]===i.shape[2],(()=>"Error in dilation2d:  input and filter must have the same depth: ".concat(c.shape[3]," vs ").concat(i.shape[2])));const u={x:c,filter:i},h={strides:n,pad:a,dilations:r},d=ja.runKernel(Le,u,h);return l?ws(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});Ia().prototype.dilation2d=function(e,t,n,a,r){return this.throwIfDisposed(),Fd(this,e,t,n,a,r)};const Dd=tr({divNoNan_:function(e,t){let n=$a(e,"a","div"),a=$a(t,"b","div");[n,a]=Ma(n,a);const r=eo(n,a),o=ro(r),s=js(a,o);return ac(s,o,r)}});Ia().prototype.divNoNan=function(e){return this.throwIfDisposed(),Dd(this,e)},Ia().prototype.div=function(e){return this.throwIfDisposed(),eo(this,e)};const Ld=tr({dot_:function(e,t){const n=$a(e,"t1","dot"),a=$a(t,"t2","dot");f((1===n.rank||2===n.rank)&&(1===a.rank||2===a.rank),(()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(a.rank,".")));const r=1===n.rank?n.size:n.shape[1],o=1===a.rank?a.size:a.shape[0];if(f(r===o,(()=>"Error in dot: inner dimensions of inputs must match, but got "+"".concat(r," and ").concat(o,"."))),1===n.rank&&1===a.rank){const e=ws(n,[1,-1]),t=ws(a,[-1,1]),r=mi(e,t);return ws(r,[])}if(1===n.rank&&2===a.rank){const e=ws(n,[1,-1]),t=ws(a,[a.shape[0],a.shape[1]]),r=mi(e,t);return ws(r,[r.size])}if(2===n.rank&&1===a.rank){const e=ws(a,[-1,1]),t=mi(n,e);return ws(t,[t.size])}{const e=ws(a,[a.shape[0],a.shape[1]]);return mi(n,e)}}});Ia().prototype.dot=function(e){return this.throwIfDisposed(),Ld(this,e)},Ia().prototype.elu=function(){return this.throwIfDisposed(),Gs(this)},Ia().prototype.equal=function(e){return this.throwIfDisposed(),js(this,e)};const Md=tr({erf_:function(e){let t=$a(e,"x","erf");f("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=Zr(t,"float32"));const n={x:t};return ja.runKernel(We,n)}});Ia().prototype.erf=function(){return this.throwIfDisposed(),Md(this)};const Pd=tr({euclideanNorm_:function(e){return tl(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});Ia().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),Pd(this,e,t)},Ia().prototype.exp=function(){return this.throwIfDisposed(),Hs(this)},Ia().prototype.expandDims=function(e){return this.throwIfDisposed(),Ks(this,e)};const zd=tr({expm1_:function(e){const t={x:$a(e,"x","expm1")};return ja.runKernel(je,t)}});Ia().prototype.expm1=function(){return this.throwIfDisposed(),zd(this)},Ia().prototype.fft=function(){return this.throwIfDisposed(),cc(this)},Ia().prototype.flatten=function(){return this.throwIfDisposed(),ws(this,[this.size])},Ia().prototype.floor=function(){return this.throwIfDisposed(),Xs(this)},Ia().prototype.floorDiv=function(e){return this.throwIfDisposed(),$r(this,e)},Ia().prototype.gather=function(e,t,n){return this.throwIfDisposed(),Zs(this,e,t,n)},Ia().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Js(this,e)},Ia().prototype.greater=function(e){return this.throwIfDisposed(),Qs(this,e)},Ia().prototype.ifft=function(){return this.throwIfDisposed(),uc(this)},Ia().prototype.irfft=function(){return this.throwIfDisposed(),hc(this)};const Bd=tr({isFinite_:function(e){const t={x:$a(e,"x","isFinite")};return ja.runKernel(nt,t)}});Ia().prototype.isFinite=function(){return this.throwIfDisposed(),Bd(this)};const Wd=tr({isInf_:function(e){const t={x:$a(e,"x","isInf")};return ja.runKernel(at,t)}});Ia().prototype.isInf=function(){return this.throwIfDisposed(),Wd(this)};const Ud=tr({isNaN_:function(e){const t={x:$a(e,"x","isNaN")};return ja.runKernel(rt,t)}});Ia().prototype.isNaN=function(){return this.throwIfDisposed(),Ud(this)},Ia().prototype.leakyRelu=function(e){return this.throwIfDisposed(),$s(this,e)},Ia().prototype.lessEqual=function(e){return this.throwIfDisposed(),Yc(this,e)},Ia().prototype.less=function(e){return this.throwIfDisposed(),Jc(this,e)};const Vd=tr({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const o=$a(e,"x","localResponseNormalization");f(4===o.rank||3===o.rank,(()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(o.rank,"."))),f(v(t),(()=>"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")));let s=o,i=!1;3===o.rank&&(i=!0,s=ws(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const c={x:s},l={depthRadius:t,bias:n,alpha:a,beta:r},u=ja.runKernel(pt,c,l);return i?ws(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});Ia().prototype.localResponseNormalization=function(e,t,n,a){return this.throwIfDisposed(),Vd(this,e,t,n,a)};const Gd=tr({logSigmoid_:function(e){const t=$a(e,"x","logSigmoid");return oo((e=>({value:ki(qi(ki(e))),gradFunc:t=>to(t,Wi(ki(e)))})))(t)}});Ia().prototype.logSigmoid=function(){return this.throwIfDisposed(),Gd(this)},Ia().prototype.logSoftmax=function(e){return this.throwIfDisposed(),ri(this,e)},Ia().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),pi(this,e,t)},Ia().prototype.log=function(){return this.throwIfDisposed(),ei(this)},Ia().prototype.log1p=function(){return this.throwIfDisposed(),ti(this)},Ia().prototype.logicalAnd=function(e){return this.throwIfDisposed(),fi(this,e)},Ia().prototype.logicalNot=function(){return this.throwIfDisposed(),id(this)};const jd=tr({logicalOr_:function(e,t){const n=$a(e,"a","logicalOr","bool"),a=$a(t,"b","logicalOr","bool");So(n.shape,a.shape);const r={a:n,b:a};return ja.runKernel(dt,r)}});Ia().prototype.logicalOr=function(e){return this.throwIfDisposed(),jd(this,e)};const Hd=tr({logicalXor_:function(e,t){const n=$a(e,"a","logicalXor","bool"),a=$a(t,"b","logicalXor","bool");return So(n.shape,a.shape),fi(jd(e,t),id(fi(e,t)))}});Ia().prototype.logicalXor=function(e){return this.throwIfDisposed(),Hd(this,e)},Ia().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),mi(this,e,t,n)},Ia().prototype.maxPool=function(e,t,n,a){return this.throwIfDisposed(),gi(this,e,t,n,a)},Ia().prototype.max=function(e,t){return this.throwIfDisposed(),ni(this,e,t)},Ia().prototype.maximum=function(e){return this.throwIfDisposed(),Io(this,e)},Ia().prototype.mean=function(e,t){return this.throwIfDisposed(),bi(this,e,t)},Ia().prototype.min=function(e,t){return this.throwIfDisposed(),vi(this,e,t)},Ia().prototype.minimum=function(e){return this.throwIfDisposed(),xi(this,e)};const Kd=tr({mirrorPad_:function(e,t,n){f("reflect"===n||"symmetric"===n,(()=>"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")));const a=$a(e,"x","mirrorPad");if(0===a.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");f(t.length===a.rank,(()=>"Padding doesn't match input. Must be ".concat(a.rank,". ")+"Got ".concat(t.length,".")));const r="reflect"===n?1:0;for(let i=0;i<a.rank;i++)f(2===t[i].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),f(t[i][0]>=0&&t[i][0]<=a.shape[i]-r&&t[i][1]>=0&&t[i][1]<=a.shape[i]-r,(()=>"Padding in dimension ".concat(i," cannot be greater than or equal ")+"to ".concat(a.shape[i]-r," or less than 0 for input of ")+"shape ".concat(a.shape)));const o={paddings:t,mode:n},s={x:a};return ja.runKernel(It,s,o)}});Ia().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Kd(this,e,t)};const qd=tr({mod_:function(e,t){let n=$a(e,"a","mod"),a=$a(t,"b","mod");[n,a]=Ma(n,a);const r={a:n,b:a};return ja.runKernel(Tt,r)}});Ia().prototype.mod=function(e){return this.throwIfDisposed(),qd(this,e)},Ia().prototype.mul=function(e){return this.throwIfDisposed(),to(this,e)},Ia().prototype.neg=function(){return this.throwIfDisposed(),ki(this)},Ia().prototype.norm=function(e,t,n){return this.throwIfDisposed(),tl(this,e,t,n)},Ia().prototype.notEqual=function(e){return this.throwIfDisposed(),Si(this,e)},Ia().prototype.oneHot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),Ii(this,e,t,n)},Ia().prototype.onesLike=function(){return this.throwIfDisposed(),Ei(this)},Ia().prototype.pad=function(e,t){return this.throwIfDisposed(),Ni(this,e,t)};const Yd=tr({pool_:function(e,t,n,a,r,o,s){null==r&&(r=[1,1]),null==o&&(o=1),0===a&&(a="valid");const i=$a(e,"x","maxPool");let c=i,l=!1;3===i.rank&&(l=!0,c=ws(i,[1,i.shape[0],i.shape[1],i.shape[2]])),f(ys(o,r),(()=>"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(r,"'")));const u=is(c.shape,t,o,r,a),h=[u.dilationHeight,u.dilationWidth];let d;d="same"===a?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))),a=n.map((e=>e-1)),r=a.map((e=>Math.floor(e/2))),o=a.map(((e,t)=>e-r[t]));return a.map(((e,t)=>[r[t],o[t]]))}([u.filterHeight,u.filterWidth],h):[[0,0],[0,0]];const p=1===h[0]&&1===h[1],[m,g]=function(e,t,n){const a=n.map((e=>e[0])),r=n.map((e=>e[1])),o=e.concat(a,r),s=t.map(((e,t)=>(e-o[t]%e)%e)),i=r.map(((e,t)=>e+s[t])),c=t.map(((e,t)=>[a[t],i[t]])),l=t.map(((e,t)=>[0,s[t]]));return[c,l]}([u.inHeight,u.inWidth],h,d),y=p?a:"valid",b=p?c:zu(c,h,m),v=("avg"===n?()=>ks(b,t,o,y,s):()=>gi(b,t,o,y,s))(),x=p?v:vd(v,h,g);return l?ws(x,[x.shape[1],x.shape[2],x.shape[3]]):x}});Ia().prototype.pool=function(e,t,n,a,r,o){return this.throwIfDisposed(),Yd(this,e,t,n,a,r,o)},Ia().prototype.pow=function(e){return this.throwIfDisposed(),yo(this,e)},Ia().prototype.prelu=function(e){return this.throwIfDisposed(),Ri(this,e)};const Xd=tr({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=$a(e,"x","prod");"bool"===a.dtype&&(a=Zr(a,"int32"));const r={x:a},o={axis:t,keepDims:n};return ja.runKernel(zt,r,o)}});Ia().prototype.prod=function(e,t){return this.throwIfDisposed(),Xd(this,e,t)};const Zd=tr({reciprocal_:function(e){const t={x:$a(e,"x","reciprocal")};return ja.runKernel(Ut,t)}});Ia().prototype.reciprocal=function(){return this.throwIfDisposed(),Zd(this)},Ia().prototype.relu=function(){return this.throwIfDisposed(),Mi(this)},Ia().prototype.relu6=function(){return this.throwIfDisposed(),pc(this)},Ia().prototype.reshapeAs=function(e){return this.throwIfDisposed(),ws(this,e.shape)},Ia().prototype.reshape=function(e){return this.throwIfDisposed(),ws(this,e)},Ia().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),Hc(this,e,t,n)},Ia().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),Kc(this,e,t,n)},Ia().prototype.reverse=function(e){return this.throwIfDisposed(),Pi(this,e)},Ia().prototype.rfft=function(){return this.throwIfDisposed(),lc(this)},Ia().prototype.round=function(){return this.throwIfDisposed(),Xc(this)},Ia().prototype.rsqrt=function(){return this.throwIfDisposed(),hh(this)},Ia().prototype.selu=function(){return this.throwIfDisposed(),zi(this)},Ia().prototype.separableConv2d=function(e,t,n,a,r,o){return this.throwIfDisposed(),Bi(this,e,t,n,a,r,o)},Ia().prototype.sigmoid=function(){return this.throwIfDisposed(),Wi(this)};const Qd=tr({sign_:function(e){const t={x:$a(e,"x","sign")};return ja.runKernel(an,t)}});Ia().prototype.sign=function(){return this.throwIfDisposed(),Qd(this)},Ia().prototype.sin=function(){return this.throwIfDisposed(),Zu(this)},Ia().prototype.sinh=function(){return this.throwIfDisposed(),Ju(this)},Ia().prototype.slice=function(e,t){return this.throwIfDisposed(),Ui(this,e,t)},Ia().prototype.softmax=function(e){return this.throwIfDisposed(),Ki(this,e)},Ia().prototype.softplus=function(){return this.throwIfDisposed(),qi(this)},Ia().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),zu(this,e,t)},Ia().prototype.split=function(e,t){return this.throwIfDisposed(),Yi(this,e,t)},Ia().prototype.sqrt=function(){return this.throwIfDisposed(),no(this)},Ia().prototype.square=function(){return this.throwIfDisposed(),ao(this)},Ia().prototype.squaredDifference=function(e){return this.throwIfDisposed(),sl(this,e)},Ia().prototype.squeeze=function(e){return this.throwIfDisposed(),Xi(this,e)},Ia().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof Sa?[this,e]:[this,...e];return Zi(n,t)},Ia().prototype.step=function(e){return this.throwIfDisposed(),fc(this,e)};const Jd=tr({stridedSlice_:function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const l={x:$a(e,"x","stridedSlice","string_or_numeric")},u={begin:t,end:n,strides:a,beginMask:r,endMask:o,ellipsisMask:s,newAxisMask:i,shrinkAxisMask:c};return ja.runKernel(vn,l,u)}});Ia().prototype.stridedSlice=function(e,t,n,a,r,o,s,i){return this.throwIfDisposed(),Jd(this,e,t,n,a,r,o,s,i)},Ia().prototype.sub=function(e){return this.throwIfDisposed(),bo(this,e)},Ia().prototype.sum=function(e,t){return this.throwIfDisposed(),ai(this,e,t)};const $d=tr({tan_:function(e){const t={x:$a(e,"x","tan","float32")};return ja.runKernel(In,t)}});Ia().prototype.tan=function(){return this.throwIfDisposed(),$d(this)},Ia().prototype.tanh=function(){return this.throwIfDisposed(),Qi(this)},Ia().prototype.tile=function(e){return this.throwIfDisposed(),qs(this,e)},Ia().prototype.toBool=function(){return this.throwIfDisposed(),Zr(this,"bool")},Ia().prototype.toFloat=function(){return this.throwIfDisposed(),Zr(this,"float32")},Ia().prototype.toInt=function(){return this.throwIfDisposed(),Zr(this,"int32")};const ep=tr({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=$a(e,"x","topk");if(0===a.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const r=a.shape[a.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>r)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(r,") ")+"but got ".concat(t));const o={x:a},s={k:t,sorted:n},[i,c]=ja.runKernel(En,o,s);return{values:i,indices:c}}});Ia().prototype.topk=function(e,t){return this.throwIfDisposed(),ep(this,e,t)},Ia().prototype.transpose=function(e){return this.throwIfDisposed(),sc(this,e)};const tp=tr({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=$a(e,"x","unique","string_or_numeric");f(n.rank>0,(()=>"The input tensor must be at least 1D"));const a={x:n},r={axis:t},[o,s]=ja.runKernel(An,a,r);return{values:o,indices:s}}});Ia().prototype.unique=function(e){return this.throwIfDisposed(),tp(this,e)},Ia().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),ph(this,e,t)},Ia().prototype.unstack=function(e){return this.throwIfDisposed(),tc(this,e)},Ia().prototype.where=function(e,t){return this.throwIfDisposed(),ac(e,this,t)},Ia().prototype.zerosLike=function(){return this.throwIfDisposed(),ro(this)};class np extends Error{constructor(e){super(e),Object.setPrototypeOf(this,np.prototype)}}class ap extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ap.prototype)}}class rp extends Error{constructor(e){super(e),Object.setPrototypeOf(this,rp.prototype)}}class op extends Error{constructor(e){super(e),Object.setPrototypeOf(this,op.prototype)}}class sp extends Error{constructor(e){super(e),Object.setPrototypeOf(this,sp.prototype)}}Error;class ip{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}function cp(e,t){if(Array.isArray(e)){let n=[];for(let a=0;a<t;a++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function lp(e,t){if(!e)throw new sp(t)}function up(e,t){let n=0;for(const a of e)a===t&&n++;return n}function hp(e){return 1===e.length?e[0]:e}function dp(e){return Array.isArray(e)?e:[e]}function pp(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function fp(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,((e,t)=>t.toUpperCase()))}let mp={};function gp(e){if(null===e||void 0===e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function yp(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((e=>yp(e)));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"===typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!==typeof t.value?yp(t):e[n]=t.value)}}}function bp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){const r=e;let o;if(r in n)o=n[r];else if(r in mp)o=mp[r];else if(o=t[r],null==o)throw new rp("Unknown ".concat(a,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(a," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(a," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return o}{const o=e;if(null==o.className||null==o.config)throw new rp("".concat(a,": Improper config format: ")+"".concat(JSON.stringify(o),".\n")+"'className' and 'config' must set.");const s=o.className;let i,c;if(s in n?[i,c]=n[s]:s in mp?[i,c]=mp.className:s in t&&([i,c]=t[s]),null==i)throw new rp("Unknown ".concat(a,": ").concat(s,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(a," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(a," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=c){const e={};for(const n of Object.keys(mp))e[n]=mp[n];for(const r of Object.keys(n))e[r]=n[r];o.config.customObjects=e;const t=Object.assign({},mp);for(const r of Object.keys(n))mp[r]=n[r];yp(o.config);const a=c(i,o.config,n,r);return mp=Object.assign({},t),a}{const e=Object.assign({},mp);for(const a of Object.keys(n))mp[a]=n[a];const t=new i(o.config);return mp=Object.assign({},e),t}}}function vp(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function xp(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function wp(e){if(null==e)throw new rp("Invalid value in obj: ".concat(JSON.stringify(e)));for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function kp(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new rp("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function Sp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return lp(n>=0),lp(a>=n),Array.isArray(e)&&e.length>=n&&e.length<=a&&e.every((e=>typeof e===t))}function Ip(e,t){Array.isArray(e)?(f(e.length>0,(()=>"".concat(t," is unexpectedly an empty array."))),e.forEach(((e,n)=>Ip(e,"element ".concat(n+1," of ").concat(t))))):f(Number.isInteger(e)&&e>0,(()=>"Expected ".concat(t," to be a positive integer, but got ")+"".concat(Tp(e),".")))}function Tp(e){return null===e?"null":Array.isArray(e)?"["+e.map((e=>Tp(e))).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function Cp(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}let Ep=0;function Np(){return Ep++}const Rp={};function Ap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in Rp||(Rp[e]=0),Rp[e]+=1,e+Rp[e].toString()}const _p=["channelsFirst","channelsLast"],Op=["nearest","bilinear"],Fp=["valid","same","causal"],Dp=["max","avg"],Lp=["sum","mul","concat","ave"],Mp=new Map;function Pp(e){kp(_p,"DataFormat",e)}function zp(e){kp(Fp,"PaddingMode",e)}function Bp(e){kp(Dp,"PoolMode",e)}const Wp=[],Up="/";function Vp(e,t){Wp.push(e);try{const e=t();return Wp.pop(),e}catch(n){throw Wp.pop(),n}}function Gp(e){if(!Kp(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Wp.length?"":Wp.join(Up)+Up)+e}function jp(e){if(!Kp(e))throw new Error("Not a valid tensor name: '"+e+"'");Mp.has(e)||Mp.set(e,0);const t=Mp.get(e);if(Mp.set(e,Mp.get(e)+1),t>0){const n="".concat(e,"_").concat(t);return Mp.set(n,1),n}return e}const Hp=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Kp(e){return!!e.match(Hp)}function qp(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let a=1;for(let r=t;r<n;++r)a*=e[r];return a}function Yp(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const a=e[n];a<t&&(t=a)}return t}function Xp(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const a=e[n];a>t&&(t=a)}return t}function Zp(e,t){if(t<e)throw new rp("end (".concat(t,") < begin (").concat(e,") is forbidden."));const n=[];for(let a=e;a<t;++a)n.push(a);return n}let Qp;function Jp(){return null==Qp&&(Qp=hr().epsilon()),Qp}function $p(e,t){return Zr(e,t)}function ef(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),ws(e,n)}function tf(e,t,n){return cr((()=>{switch(e.rank){case 1:return Vi(e,t,n);case 2:return Gi(e,[t,0],[n,e.shape[1]]);case 3:return ji(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Hi(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Ui(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Ui(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new rp("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function nf(e,t,n){return cr((()=>{switch(e.rank){case 1:return Vi(e,t,n);case 2:return Gi(e,[0,t],[e.shape[0],n]);case 3:return ji(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Hi(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new rp("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function af(e,t,n,a){return cr((()=>{switch(e.rank){case 1:return Vi(e,t,n);case 2:switch(a){case 1:return tf(e,t,n);case 2:return nf(e,t,n);default:throw new rp("The axis is not within the rank of the tensor "+"".concat(a))}case 3:switch(a){case 1:return tf(e,t,n);case 2:return ji(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return nf(e,t,n);default:throw new rp("The axis is not within the rank of the tensor "+"".concat(a))}case 4:switch(a){case 1:return tf(e,t,n);case 2:return Hi(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Hi(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return nf(e,t,n);default:throw new rp("The axis is not within the rank of the tensor "+"".concat(a))}default:throw new rp("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function rf(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(t=e[0].rank,n=0!==t?t:0),n===e[0].rank&&(n=-1),Rs(e,n)}function of(e,t){switch(e.rank){case 1:return As([e,t]);case 2:return _s([e,t],0);case 3:return Os([e,t],0);case 4:return Fs([e,t],0);default:throw new rp("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function sf(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new rp("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return qs(e,t)}function cf(e){return Fi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function lf(e,t,n,a){if(e.rank<2||t.rank<2)throw new op("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new op("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape))}if(2===e.rank&&2===t.rank){return kc({a:e,b:t,transposeA:!1,transposeB:!1,bias:a?df(e.rank,a,"channelsLast"):null,activation:n})}{const r=e.shape.slice(),o=r.pop();e=ws(e,[-1,o]);const s=t.shape.slice(),i=s.pop(),c=s.pop(),l=[...s,i],u=Array.from({length:t.rank},((e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n));t=ws(sc(t,u),[c,-1]);const h=[...r,...l];return ws(kc({a:e,b:t,transposeA:!1,transposeB:!1,bias:a?df(e.rank,a,"channelsLast"):null,activation:n}),h)}}function uf(e,t,n){return cr((()=>(t=Array.isArray(t)?Ji(t,"int32"):Zr(t,"int32"),Zs(e,t,n))))}function hf(e){return to(e,e)}function df(e,t,n){const a=t.shape;if(1!==t.rank&&t.rank!==e)throw new rp("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===a.length?ws(t,[1,a[0],1,1,1]):ws(t,[1,a[3],a[0],a[1],a[2]]);if("channelsLast"===n)return 1===a.length?ws(t,[1,1,1,1,a[0]]):ws(t,[1].concat(a))}else if(4===e){if("channelsFirst"===n)return 1===a.length?ws(t,[1,a[0],1,1]):ws(t,[1,a[2],a[0],a[1]]);if("channelsLast"===n)return 1===a.length?ws(t,[1,1,1,a[0]]):ws(t,[1].concat(a))}else if(3===e){if("channelsFirst"===n)return 1===a.length?ws(t,[1,a[0],1]):ws(t,[1,a[1],a[0]]);if("channelsLast"===n)return 1===a.length?ws(t,[1,1,a[0]]):ws(t,[1].concat(a))}else if(e<3)return t;throw new rp("Unsupported input rank by biasAdd: ".concat(t.rank))}function pf(e,t,n){return cr((()=>(null==n&&(n="channelsLast"),Pp(n),Jr(e,df(e.rank,t,n)))))}function ff(e,t,n,a){return cr((()=>ic(e,t,n,a)))}function mf(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}const gf=["fanIn","fanOut","fanAvg"],yf=["normal","uniform","truncatedNormal"];class bf extends lo{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class vf extends bf{apply(e,t){return Ti(e,t)}}vf.className="Zeros",ho(vf);class xf extends bf{apply(e,t){return Ci(e,t)}}xf.className="Ones",ho(xf);class wf extends bf{constructor(e){if(super(),"object"!==typeof e)throw new rp("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new rp("config must have value set but got ".concat(e));this.value=e.value}apply(e,t){return cr((()=>to(so(this.value),Ci(e,t))))}getConfig(){return{value:this.value}}}wf.className="Constant",ho(wf);class kf extends bf{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return Di(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}kf.className="RandomUniform",ho(kf);class Sf extends bf{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new op("randomNormal does not support dType ".concat(t,"."));return cf(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Sf.className="RandomNormal",ho(Sf);class If extends bf{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new op("truncatedNormal does not support dType ".concat(t,"."));return ec(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}If.className="TruncatedNormal",ho(If);class Tf extends bf{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return cr((()=>{if(2!==e.length||e[0]!==e[1])throw new rp("Identity matrix initializer can only be used for 2D square matrices.");return to(this.gain,Ys(e[0]))}))}getConfig(){return{gain:this.gain}}}Tf.className="Identity",ho(Tf);class Cf extends bf{constructor(e){if(super(),e.scale<0)throw new rp("scale must be a positive float. Got: ".concat(e.scale));this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,function(e){kp(gf,"FanMode",e)}(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,function(e){kp(yf,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e){let t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(Pp(a),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===a){const a=qp(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===a){const a=qp(e,0,e.length-2);t=e[e.length-2]*a,n=e[e.length-1]*a}}else{const a=qp(e);t=Math.sqrt(a),n=Math.sqrt(a)}return[t,n]}(e),a=n[0],r=n[1];let o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,a):"fanOut"===this.mode?o/=Math.max(1,r):o/=Math.max(1,(a+r)/2),"normal"===this.distribution){const n=Math.sqrt(o);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new op("".concat(this.getClassName()," does not support dType ").concat(t,"."));return ec(e,0,n,t,this.seed)}{const n=Math.sqrt(3*o);return Di(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Cf.className="VarianceScaling",ho(Cf);class Ef extends Cf{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Cf.className}}Ef.className="GlorotUniform",ho(Ef);class Nf extends Cf{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Cf.className}}Nf.className="GlorotNormal",ho(Nf);class Rf extends Cf{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Cf.className}}Rf.className="HeNormal",ho(Rf);class Af extends Cf{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Cf.className}}Af.className="HeUniform",ho(Af);class _f extends Cf{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Cf.className}}_f.className="LeCunNormal",ho(_f);class Of extends Cf{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Cf.className}}Of.className="LeCunUniform",ho(Of);class Ff extends bf{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return cr((()=>{if(e.length<2)throw new op("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError("Unsupported data type ".concat(t,"."));const n=y(e.slice(0,-1)),a=e[e.length-1],r=n*a;r>this.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(this.ELEMENTS_WARN_SLOW," (").concat(r,") elements: ")+"Slowness may result.");const o=cf([Math.max(a,n),Math.min(a,n)],0,1,t,this.seed),s=cl.qr(o,!1);let i=s[0];const c=s[1].flatten().stridedSlice([0],[Math.min(a,n)*Math.min(a,n)],[Math.min(a,n)+1]);return i=to(i,c.sign()),n<a&&(i=i.transpose()),to(so(this.gain),i.reshape(e))}))}getConfig(){return{gain:this.gain,seed:this.seed}}}Ff.className="Orthogonal",ho(Ff);const Df={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Lf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return bp(e,uo.getMap().classNameMap,t,"initializer")}function Mf(e){return gp(e)}function Pf(e){if("string"===typeof e){const t=e in Df?Df[e]:e;if("GlorotNormal"===t)return new Nf;if("GlorotUniform"===t)return new Ef;if("HeNormal"===t)return new Rf;if("HeUniform"===t)return new Af;if("LeCunNormal"===t)return new _f;if("LeCunUniform"===t)return new Of;{const e={};return e.className=t,e.config={},Lf(e)}}return e instanceof bf?e:Lf(e)}function zf(e){return Array.isArray(e)&&Array.isArray(e[0])}function Bf(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function Wf(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new rp("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function Uf(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new rp("Expected exactly 1 Shape; got ".concat(e.length))}return e}function Vf(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce(((e,t)=>e*t));return t}const Gf="Variable";class jf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gf,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=Np(),n=null==n?Gf:n,this.originalName=Gp(n),this.name=jp(this.originalName),this.trainable_=a,this.constraint=r,this.val=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return ja.makeVariable(e,t,n,a)}(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function Hf(e){return e.map((e=>e.read()))}function Kf(e){e.forEach((e=>{e[0].write(e[1])}))}class qf{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Yf{constructor(e,t,n,a,r,o,s){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=a,this.callArgs=r,this.outputTensorIndex=s,this.id=Np(),null!=o&&(this.originalName=Gp(o),this.name=jp(this.originalName)),this.rank=t.length}}let Xf=0;class Zf{constructor(e,t){this.callArgs=t,this.id=Xf++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Qf=0;class Jf extends lo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Qf++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=pp(e)+"_"+Ap(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new ap("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new rp("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}getInputAt(e){return hp(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return hp(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new np("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new np("Layer ".concat(this.name)+" is not connected, no input to return.");return hp(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new np("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new np("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return hp(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map((e=>e()))}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach((t=>t.trainable=e)),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter((e=>e.trainable)):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter((e=>!e.trainable)).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=dp(e);if(null==this.inputSpec||0===this.inputSpec.length)return;const n=dp(this.inputSpec);if(t.length!==n.length)throw new rp("Layer ".concat(this.name," expects ").concat(n.length," inputs, ")+"but it received ".concat(t.length," input tensors. ")+"Input received: ".concat(e));for(let a=0;a<t.length;a++){const e=t[a],r=n[a];if(null==r)continue;const o=e.rank;if(null!=r.ndim&&o!==r.ndim)throw new rp("Input ".concat(a," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(r.ndim,", found ndim=").concat(o));if(null!=r.maxNDim&&o>r.maxNDim)throw new rp("Input ".concat(a," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(r.maxNDim,", found ndim=").concat(o));if(null!=r.minNDim&&o<r.minNDim)throw new rp("Input ".concat(a," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(r.minNDim,", found ndim=").concat(o,"."));if(null!=r.dtype&&e.dtype!==r.dtype)throw new rp("Input ".concat(a," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(r.dtype,", found dtype=").concat(e.dtype,"."));if(r.axes){const t=e.shape;for(const e in r.axes){const n=Number(e),o=r.axes[e],s=n>=0?t[n]:t[t.length+n];if(null!=o&&-1===[o,null].indexOf(s))throw new rp("Input ".concat(a," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(n," of input shape to ")+"have value ".concat(o," but got shape ").concat(t,"."))}}if(null!=r.shape)for(let t=0;t<r.shape.length;++t){const n=r.shape[t],o=e.shape[t];if(null!=n&&null!=o&&n!==o)throw new rp("Input ".concat(a," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(r.shape,", ")+"found shape=".concat(e.shape,"."))}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=dp(e),a=function(e){let t=!0;for(const n of dp(e))if(!(n instanceof Yf)){t=!1;break}return t}(e),r=function(e){let t=!0;for(const n of dp(e))if(n instanceof Yf){t=!1;break}return t}(e);if(a===r)throw new rp("Arguments to apply() must be all SymbolicTensors or all Tensors");return Vp(this.name,(()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of dp(e))t.push(n.shape);this.build(hp(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&r&&(this._refCount=1)}if(this.assertInputCompatibility(e),r){let a=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,a);const r=dp(a),o=[];for(let e of r)-1!==n.indexOf(e)&&(e=e.clone()),o.push(e);if(a=hp(o),null!=this.activityRegularizer)throw new op("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}{const n=function(e){e=dp(e);const t=[];for(const n of e)t.push(n.shape);return hp(t)}(e),a=this.computeOutputShape(n);let r;const o="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),r=null!=a&&a.length>0&&Array.isArray(a[0])?a.map(((n,a)=>new Yf(o,n,this,dp(e),t,this.name,a))):new Yf(o,a,this,dp(e),t,this.name),this.addInboundNode(e,r,null,null,n,a,t),this._refCount++,null!=this.activityRegularizer)throw new op("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}}))}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{let t=!1;this.batchInputShape.forEach(((n,a)=>{null!=n&&null!=e[a]&&e[a]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new np("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new np("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}countParams(){if(!this.built)throw new ap("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return Vf(this.weights)}build(e){this.built=!0}getWeights(){return Hf(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}setWeights(e){cr((()=>{const t=this.weights;if(t.length!==e.length)throw new rp('You called setWeights(weights) on layer "'.concat(this.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(t.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0===t.length)return;const n=[],a=Hf(t);for(let r=0;r<a.length;++r){const o=a[r],s=t[r],i=e[r];if(!b(o.shape,i.shape))throw new rp("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(i.shape));n.push([s,i])}Kf(n)}))}addWeight(e,t,n,a,r,o,s,i){if(-1!==this._addedWeightNames.indexOf(e))throw new rp("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(a=null!=i?i():Pf("zeros"));const c=a.apply(t,n),l=new jf(c,n,e,o,s);return c.dispose(),null!=r&&this.addLoss((()=>r.apply(l.read()))),null==o&&(o=!0),o?this._trainableWeights.push(l):this._nonTrainableWeights.push(l),l}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=dp(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((e=>{if(null!=e)throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;const a=this.computeMask(e,n),r=dp(t),o=dp(a);if(r.length!==o.length)throw new Error("".concat(this.name," outputs ").concat(r.length," tensors ")+"but ".concat(r.length," masks for those tensors"));for(let s=0;s<r.length;s++)r[s].kerasMask=o[s]}addInboundNode(e,t,n,a,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;const i=dp(e);t=dp(t),n=dp(n),a=dp(a),r=Bf(r),o=Bf(o);const c=[],l=[],u=[];for(const h of i)c.push(h.sourceLayer),l.push(h.nodeIndex),u.push(h.tensorIndex);new Zf({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:u,inputTensors:i,outputTensors:t,inputMasks:n,outputMasks:a,inputShapes:r,outputShapes:o},s);for(let h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach((e=>e.dispose())),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}dispose(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function $f(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const a=$f(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of a)-1===t.indexOf(e)&&t.push(e)}return t}}}class em extends Jf{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:Ap("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new rp("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new rp("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new rp("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const a=new Yf(this.dtype,this.batchInputShape,this,[],{},this.name);a.nodeIndex=0,a.tensorIndex=0,new Zf({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new rp("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}em.className="InputLayer",ho(em);class tm{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof tm)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new rp("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return Zr(t,e.dtype)}catch(pU){throw new rp("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Yf){if(null==this.id2Value[e.id])throw new rp("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new rp("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}}getMask(e){if(e instanceof Yf){if(null==this.id2Value[e.id])throw new rp("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new rp("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&lr(this.id2Mask)}}const nm=new ip,am=new ip;function rm(e,t,n,a){const r=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],i=s.map((e=>e.name)),c=[],l=t.names();for(const f of i)-1!==l.indexOf(f)?c.push(t.getValue(f)):c.push(null);null!=a&&(a.maxNumTensors=-1/0,a.minNumTensors=1/0);const u=i.join(",")+"|"+t.names().sort().join(",");let h,d=nm.get(u);if(null==d){const e=function(e,t){f(null!=e&&e.length>0,(()=>"Expected at least one fetch, got none"));let n=[],a={};if(1===e.length){const r=sm(e[0],t);n=r.sorted,a=r.recipientMap}else{const r=new Set;for(const o of e){const{sorted:e,recipientMap:s}=sm(o,t);for(const t of e)r.has(t.name)||(n.push(t),r.add(t.name));for(const t in s)null==a[t]&&(a[t]=new Set),s[t].forEach((e=>a[t].add(e)))}}return{sorted:n,recipientCounts:om(a)}}(s,t);d=e.sorted,h=e.recipientCounts,nm.put(u,d),am.put(u,h)}h={},r||Object.assign(h,am.get(u));const p=new tm(t);for(let f=0;f<d.length;++f){if(null!=a){const e=ir().numTensors;e>a.maxNumTensors&&(a.maxNumTensors=e),e<a.minNumTensors&&(a.minNumTensors=e)}const e=d[f],o=e.sourceLayer;if(o instanceof em)continue;const s=[],l=[],u=[];let m=!1;for(const n of e.inputs){const e=p.getValue(n),a=p.getMask(n);s.push(e),l.push(a),null!=a&&(m=!0),r||(h[n.name]--,0!==h[n.name]||t.hasKey(n)||-1!==i.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||u.push(e))}m&&((n=n||{}).mask=l[0]);const g=dp(o.apply(s,n));let y=null;o.supportsMasking&&(y=o.computeMask(s,l));const b=im(e),v=Array.isArray(b)?b:[b];for(let t=0;t<v.length;++t){p.hasKey(v[t])||p.add(v[t],g[t],Array.isArray(y)?y[0]:y);const e=i.indexOf(v[t].name);-1!==e&&(c[e]=g[t])}r||lr(u)}return p.disposeMasks(),o?c:c[0]}function om(e){const t={};for(const n in e)t[n]=e[n].size;return t}function sm(e,t){const n=new Set,a=[],r={};for(const i of t.names())n.add(i);const o=[],s=[];for(o.push(e);o.length>0;){const e=o[o.length-1];if(n.has(e.name)){o.pop();continue}const t=s[s.length-1]===o.length-1;if(0===e.inputs.length||t)o.pop(),a.push(e),n.add(e.name),t&&s.pop();else{s.push(o.length-1);for(const t of e.inputs)null==r[t.name]&&(r[t.name]=new Set),r[t.name].add(e.name),n.has(t.name)||o.push(t)}}return{sorted:a,recipientMap:r}}function im(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const a of e.sourceLayer.inboundNodes[t].outputTensors)if(a.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}function cm(e,t){return cr((()=>no(ai(to(e,e),t,!0))))}G().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(()=>100),(function(e){null!=nm&&nm.setMaxEntries(e),null!=am&&am.setMaxEntries(e)}));class lm extends lo{getConfig(){return{}}}class um extends lm{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return cr((()=>{const t=cm(e,this.axis),n=Ns(t,0,this.maxValue);return to(e,eo(n,Jr(Jp(),t)))}))}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}um.className="MaxNorm",ho(um);class hm extends lm{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return cr((()=>eo(e,Jr(Jp(),cm(e,this.axis)))))}getConfig(){return{axis:this.axis}}}hm.className="UnitNorm",ho(hm);class dm extends lm{apply(e){return Mi(e)}}dm.className="NonNeg",ho(dm);class pm extends lm{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return cr((()=>{const t=cm(e,this.axis),n=Jr(to(this.rate,Ns(t,this.minValue,this.maxValue)),to(1-this.rate,t));return to(e,eo(n,Jr(Jp(),t)))}))}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}pm.className="MinMaxNorm",ho(pm);const fm={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function mm(e){return gp(e)}function gm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return bp(e,uo.getMap().classNameMap,t,"constraint")}function ym(e){if(null==e)return null;if("string"===typeof e){return gm({className:e in fm?fm[e]:e,config:{}})}return e instanceof lm?e:gm(e)}async function bm(e){if(null==e)return;const t=[],n=[],a=[];for(const r in e){const o=e[r];if("number"!==typeof o){const e=o;t.push(e.data()),n.push(r),a.push(e)}}if(t.length>0){const r=await Promise.all(t);for(let t=0;t<r.length;++t)e[n[t]]=r[t][0];lr(a)}}function vm(e){if(null!=e)for(const t in e){const n=e[t];"number"!==typeof n&&n.dispose()}}var xm;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(xm||(xm={}));class wm{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class km{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class Sm extends wm{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const a in t){const e=t[a];if("number"===typeof e)this.totals.hasOwnProperty(a)||(this.totals[a]=0),this.totals[a]=this.totals[a]+e*n;else{let t;a in this.totals?t=this.totals[a]:this.totals[a]=0;const r=cr((()=>Jr(this.totals[a],to(e,n))));this.totals[a]=r,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params.metrics)null!=this.totals[n]&&("number"===typeof this.totals[n]?t[n]=this.totals[n]/this.seen:cr((()=>{const e=to(eo(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),ur(t[n])})))}}class Im extends wm{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const r in this.history){const a=this.history[r];for(let o=0;o<a.length;++o)if("number"!==typeof a[o]){const s=a[o];e.push(s.data()),t.push(r),n.push(o)}}const a=await Promise.all(e);for(let r=0;r<a.length;++r){this.history[t[r]][n[r]].dispose(),this.history[t[r]][n[r]]=a[r][0]}}}class Tm extends wm{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||hl,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");R(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let a,r=null!=n?n():aa();return function(){const o=null!=n?n():aa();return o-r<t||(r=o,a=e(...arguments)),a}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const a=[];null!=this.yield&&(await bm(n),a.push(this.yield(e,t,n))),a.push(this.nextFrameFunc()),await Promise.all(a)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await bm(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await bm(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await bm(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await bm(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):R(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await bm(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await bm(e),await this.trainEnd(e))}}function Cm(e,t){if(null==e&&(e={}),e instanceof wm)return[e];if(Array.isArray(e)&&e[0]instanceof wm)return e;return dp(e).map((e=>new Tm(e,t)))}class Em{constructor(){}static registerCallbackConstructor(e,t){f(e>=0&&Number.isInteger(e),(()=>"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(e))),Em.checkForDuplicate(t),null==Em.constructors[e]&&(Em.constructors[e]=[]),Em.constructors[e].push(t)}static checkForDuplicate(e){for(const t in Em.constructors){Em.constructors[+t].forEach((t=>{if(t===e)throw new rp("Duplicate callback constructor.")}))}}static clear(){Em.constructors={}}static createCallbacks(e){const t=[];for(const n in Em.constructors){const a=+n;e>=a&&t.push(...Em.constructors[a])}return t.map((e=>new e))}}function Nm(e,t,n,a,r,o,s,i,c){const l=new Im,u=[new Sm,...Em.createCallbacks(t)];null!=e&&u.push(...e),u.push(l);const h=new km(u);return h.setParams({epochs:n,initialEpoch:a,samples:r,steps:o,batchSize:s,verbose:t,doValidation:i,metrics:c}),{callbackList:h,history:l}}function Rm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return bp(e,uo.getMap().classNameMap,t,"layer",n)}function Am(e,t){return cr((()=>{"float32"!==e.dtype&&(e=Zr(e,"float32"));const n=ai(hf(e),t,!0),a=mo(n.shape,Jp()),r=no(Io(n,a));return eo(e,r)}))}function _m(e,t){return cr((()=>bi(hf(bo(t,e)),-1)))}function Om(e,t){return cr((()=>bi(xo(bo(t,e)),-1)))}function Fm(e,t){return cr((()=>{const n=bo(e,t),a=Ns(xo(e),Jp(),Number.MAX_VALUE),r=xo(eo(n,a));return to(100,bi(r,-1))}))}function Dm(e,t){return cr((()=>{const n=Ns(t,Jp(),Number.MAX_VALUE),a=ei(Jr(1,n)),r=Ns(e,Jp(),Number.MAX_VALUE),o=ei(Jr(1,r));return bi(hf(bo(a,o)),-1)}))}function Lm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return cr((()=>{if(n)t=Ki(t);else{const e=ai(t,t.shape.length-1,!0);t=eo(t,e)}return t=Ns(t,Jp(),1-Jp()),ki(ai(to(Zr(e,"float32"),ei(t)),t.shape.length-1))}))}function Mm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return cr((()=>{const a=Zr(Xs(function(e){const t=[qp(e.shape)];return ws(e,t)}(e)),"int32"),r=(t=Ns(t,Jp(),1-Jp())).shape;return Lm(ws(Ii(a,r[r.length-1]),r),t,n)}))}function Pm(e,t){return cr((()=>{let n;return n=Ns(t,Jp(),1-Jp()),n=ei(eo(n,bo(1,n))),bi(function(e,t){if(!b(e.shape,t.shape))throw new rp("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return cr((()=>{const n=Mi(t),a=ki(xo(t));return Jr(bo(n,to(t,e)),ti(Hs(a)))}))}(e,n),-1)}))}function zm(e,t){return cr((()=>{const n=Ns(e,Jp(),1),a=Ns(t,Jp(),1);return ai(to(e,ei(eo(n,a))),-1)}))}function Bm(e,t){return cr((()=>{const n=Am(e,-1),a=Am(t,-1),r=to(n,a);return ki(ai(r,-1))}))}Em.constructors={};const Wm={meanSquaredError:_m,meanAbsoluteError:Om,meanAbsolutePercentageError:Fm,meanSquaredLogarithmicError:Dm,squaredHinge:function(e,t){return cr((()=>{const n=Io(0,bo(1,to(e,t)));return bi(hf(n),-1)}))},hinge:function(e,t){return cr((()=>{const n=Io(0,bo(1,to(e,t)));return bi(n,-1)}))},categoricalHinge:function(e,t){return cr((()=>{const n=ai(to(e,t),-1),a=ni(to(bo(1,e),t),-1);return Io(0,Jr(1,bo(a,n)))}))},logcosh:function(e,t){return cr((()=>{const n=Math.log(2),a=bo(t,e),r=bo(Jr(a,qi(to(-2,a))),n);return bi(r,-1)}))},categoricalCrossentropy:Lm,sparseCategoricalCrossentropy:Mm,binaryCrossentropy:Pm,kullbackLeiblerDivergence:zm,poisson:function(e,t){return cr((()=>{const n=ei(Jr(Jp(),t));return bi(bo(t,to(e,n)),-1)}))},cosineProximity:Bm};function Um(e){if("string"===typeof e){if(e in Wm)return Wm[e];let t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new rp(t)}return e}function Vm(e,t){return cr((()=>{const n=to(.5,Ei(t)),a=$p(Qs(t,n),e.dtype);return bi(js(e,a),-1)}))}function Gm(e,t){return cr((()=>$p(js(os(e,-1),os(t,-1)),"float32")))}function jm(e,t){return cr((()=>Zr(ai(fi(js(e,1),js(t,1))),"float32")))}function Hm(e,t){return Pm(e,t)}function Km(e,t){return e.rank===t.rank&&(e=Xi(e,[e.rank-1])),(t=os(t,-1)).dtype!==e.dtype&&(t=Zr(t,e.dtype)),Zr(js(e,t),"float32")}const qm=Lm,Ym=Mm,Xm={binaryAccuracy:Vm,categoricalAccuracy:Gm,precision:function(e,t){return cr((()=>{const n=jm(e,t),a=function(e,t){return cr((()=>Zr(ai(fi(js(e,0),js(t,1))),"float32")))}(e,t),r=Jr(n,a);return Zr(ac(Qs(r,0),eo(n,r),0),"float32")}))},categoricalCrossentropy:qm,sparseCategoricalCrossentropy:Ym,mse:_m,MSE:_m,mae:Om,MAE:Om,mape:Fm,MAPE:Fm,cosine:Bm};function Zm(e){if("string"===typeof e&&e in Xm)return Xm[e];if("string"!==typeof e&&null!=e)return e;throw new rp("Unknown metric ".concat(e))}function Qm(e){if(lp(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;{let t;for(const n of Object.keys(Wm))if(Wm[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(Xm))if(Xm[n]===e){t=n;break}return void 0!==t?t:e.name}}const Jm=1048576;function $m(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!eg(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>Jm&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(n.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(Jm,"."))}}function eg(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!==typeof n)return!1;if(!eg(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!eg(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function tg(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;const r=function(e){let t=!0;const n=[],a=[];for(const r in e.nodesByDepth)n.push(e.nodesByDepth[r]);for(const r of n){if(r.length>1||1===r.length&&r[0].inboundLayers.length>1){t=!1;break}a.push(...r)}if(t)for(const r of e.layers){let e=!1;for(const n of r.inboundNodes)if(-1!==a.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),o=["Layer (type)","Input Shape","Output shape","Param #"];let s;if(r?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((e=>Math.floor(t*e)))),!r){o.push("Receives inputs"),s=[];for(const t in e.nodesByDepth)s.push(...e.nodesByDepth[t])}a("_".repeat(t)),ng(o,n,a),a("=".repeat(t));const i=e.layers;for(let u=0;u<i.length;++u)r?ag(i[u],n,a):rg(i[u],n,s,a),a((u===i.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const c=function(e){let t;t=null!=e.collectedTrainableWeights?Vf(e.collectedTrainableWeights):Vf(e.trainableWeights);return t}(e),l=Vf(e.nonTrainableWeights);a("Total params: ".concat(c+l)),a("Trainable params: ".concat(c)),a("Non-trainable params: ".concat(l)),a("_".repeat(t))}function ng(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,a="";for(let r=0;r<e.length;++r)r>0&&(a=a.slice(0,a.length-1)+" "),a+=e[r],a=a.slice(0,t[r]),a+=" ".repeat(t[r]-a.length);n(a)}function ag(e,t,n){let a,r;try{r=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(pU){r="multiple"}try{a=JSON.stringify(e.outputShape)}catch(pU){a="multiple"}const o=e.name,s=e.getClassName();ng(["".concat(o," (").concat(s,")"),r,a,e.countParams().toString()],t,n)}function rg(e,t,n,a){let r,o;try{o=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(pU){o="multiple"}try{r=JSON.stringify(e.outputShape)}catch(pU){r="multiple"}const s=[];for(const u of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(let e=0;e<u.inboundLayers.length;++e){const t=u.inboundLayers[e].name,n=u.nodeIndices[e],a=u.tensorIndices[e];s.push("".concat(t,"[").concat(n,"][").concat(a,"]"))}const i=e.name,c=e.getClassName(),l=0===s.length?"":s[0];ng(["".concat(i," (").concat(c,")"),o,r,e.countParams().toString(),l],t,a);for(let u=1;u<s.length;++u)ng(["","","","",s[u]],t,a)}function og(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function sg(e,t){if(null===e)return null;if("string"===typeof e)return fp(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],a=e.length;for(let r=0;r<a;++r){const a=e[r];og(t,r,a)?n.push(a):n.push(sg(a,t))}return n}{const t={};for(const n of Object.keys(e)){const a=e[n];if("name"===n&&"string"===typeof a)t[n]=a;else{const e=fp(n);t[e]=sg(a,e)}}return t}}function ig(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return pp(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],a=e.length;for(let r=0;r<a;++r){const a=e[r];og(t,r,a)?n.push(a):n.push(ig(a,t))}return n}{const t={};for(const n of Object.keys(e)){const a=e[n],r=pp(n);t[r]="name"!==n&&"className"!==n||"string"!==typeof a?ig(a,n):a}return t}}const cg="4.17.0";class lg extends Jf{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=Ap(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],xp(this.inputs).length!==this.inputs.length)throw new rp("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(this.inputs.map((e=>e.name))));xp(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(this.outputs.map((e=>e.name)))),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;this.outputLayers.push(e),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(n)}for(const y of this.inputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;lp(0===t,"input layer has >1 nodes"),lp(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const t=this.inputLayers[y];if(!(t instanceof em))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(y," (0-based) originates ")+"from layer type ".concat(t.getClassName(),"."));this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map((e=>e.shape)),this.internalOutputShapes=this.outputs.map((e=>e.shape));const t={},n={},a={},r={},o={},s=[],i=(e,t,n,a,r,c)=>{null!=a&&null!=r&&null!=c||(a=e.sourceLayer,r=e.nodeIndex,c=e.tensorIndex);const l=a.inboundNodes[r];if(-1!==n.indexOf(l))throw new ap("The tensor ".concat(e.name,' at layer "').concat(a.name,'" ')+"is part of a cycle.");if(-1!==t.indexOf(l))return;this.containerNodes.add(lg.nodeKey(a,r)),a.id in o||(o[a.id]=Object.keys(o).length),-1===n.indexOf(l)&&n.push(l);const u=l.inboundLayers.length;for(let o=0;o<u;o++){const e=l.inputTensors[o],a=l.inboundLayers[o],r=l.nodeIndices[o],s=l.tensorIndices[o];i(e,t,n,a,r,s)}for(t.push(l);n.indexOf(l)>=0;)n.splice(n.indexOf(l),1);s.push(l)},c=[],l=[];for(const y of this.outputs)i(y,c,l);const u=s.slice().reverse();for(const y of u){n[y.id]=y,y.id in t||(t[y.id]=0);let e=t[y.id];const o=null==a[y.outboundLayer.id]?0:a[y.outboundLayer.id];e=Math.max(e,o),a[y.outboundLayer.id]=e,r[y.outboundLayer.id]=y.outboundLayer,t[y.id]=e;for(let a=0;a<y.inboundLayers.length;a++){const r=y.inboundLayers[a],o=y.nodeIndices[a],s=r.inboundNodes[o],i=null==t[s.id]?0:t[s.id];t[s.id]=Math.max(e+1,i),n[s.id]=s}}const h={};for(const y in t){const e=t[y];e in h||(h[e]=[]),h[e].push(n[y])}const d={};for(const y in a){const e=a[y];e in d||(d[e]=[]),d[e].push(r[y])}let p=Object.keys(d).map((e=>parseInt(e,10))).sort(vp);this.layers=[];for(const y of p){const e=d[y];e.sort(((e,t)=>{const n=o[e.id],a=o[t.id];return n<a?-1:n>a?1:0}));for(const t of e)t instanceof lg&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=d,p=Object.keys(h).map((e=>parseInt(e,10))).sort(vp);const f=this.inputs.slice(),m=[];for(const y of p)for(const e of h[y]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===f.indexOf(n))throw new ap("Graph disconnected: cannot obtain value for tensor ".concat(n)+' at layer "'.concat(t.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(m));for(const t of e.outputTensors)f.push(t);m.push(t.name)}}this.nodesByDepth=h;const g=this.layers.map((e=>e.name));for(const y of g){const e=g.filter((e=>e===y)).length;if(1!==e)throw new ap('The name "'.concat(y,'" is used ').concat(e," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new Zf({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map((e=>null)),outputMasks:this.outputs.map((e=>null)),inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs.map((e=>e.shape))}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach((t=>{t._trainableWeights.forEach((t=>t.trainable=e))})),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new rp("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n={};let a=0;const r=(e=>{const t=Object.keys(e);if(0===t.length)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);r&&this.parseWeights(e);for(const s of this.layers)for(const[e,t]of s.weights.entries()){const o=r?"".concat(t.name.split("/").slice(0,-1).join("/")+"/").concat(e):t.originalName;if(null!=n[o])throw new rp("Duplicate weight name: ".concat(o));n[o]=t,a++}const o=[];for(const s in e){let a=s;if(null==n[s]){const e=s.split("/");a=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[a])o.push([n[a],e[s]]);else if(t)throw new rp("Provided weight data has no target variable: ".concat(s));delete n[a]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new rp("".concat(e.length," of ").concat(a," weights are not set: ")+"".concat(e))}Kf(o)}parseWeights(e){for(const t in Object.keys(e)){const n=t.split("/"),a=["vars","layer_checkpoint_dependencies"],r=n.map((e=>e.startsWith("_")?e.slice(1):e)).filter((e=>!a.includes(e))).join("/");r!==t&&(e[r]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(cg),t.backend="TensorFlow.js",t}toJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=ig(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return cr((()=>{e=dp(e);const n=new tm;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return rm(this.outputs,n,t)}))}computeMask(e,t){return cr((()=>{let n;return e=dp(e),n=null==t?cp(null,e.length):dp(t),this.runInternalGraph(e,n)[1]}))}computeOutputShape(e){const t=Bf(e);if(t.length!==this.inputLayers.length)throw new rp("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));const n={};for(let s=0;s<t.length;s++){const e=this.inputLayers[s],a=t[s];n[e.name+"_0_0"]=a}const a=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(vp);if(a.length>1)for(const s of a){const e=this.nodesByDepth[s];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map((e=>e.id)).indexOf(e.id))continue;const a=[];for(let s=0;s<t.inboundLayers.length;s++){const e=t.inboundLayers[s],r=t.nodeIndices[s],o=t.tensorIndices[s],i=n["".concat(e.name,"_").concat(r,"_").concat(o)];a.push(i)}const r=Bf(e.computeOutputShape(hp(a))),o=e.inboundNodes.indexOf(t);for(let t=0;t<r.length;t++){n["".concat(e.name,"_").concat(o,"_").concat(t)]=r[t]}}}const r=[],o=[];for(let s=0;s<this.outputLayers.length;s++){const e=this.outputLayers[s],t=this.outputLayersNodeIndices[s],n=this.outputLayersTensorIndices[s],a="".concat(e.name,"_").concat(t,"_").concat(n);o.push(a)}for(let s=0;s<o.length;s++){const e=o[s];lp(e in n),r.push(n[e])}return hp(r)}runInternalGraph(e,t){null==t&&(t=cp(null,e.length));const n={};for(let i=0;i<this.inputs.length;++i){const a=this.inputs[i],r=e[i],o=t[i];n[a.id]=[r,o]}const a=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(vp);for(const i of a){const e=this.nodesByDepth[i];for(const t of e){const e=t.outboundLayer,a=t.inputTensors,r=t.outputTensors,o=new Array;for(const t of a)t.id in n&&o.push(n[t.id]);if(o.length===a.length){let a,s,i,c,l={};if(null!=t.callArgs&&(l=t.callArgs),1===o.length){const[t,n]=o[0];null==l.mask&&(l.mask=n),i=dp(e.call(t,l)),c=dp(e.computeMask(t,n)),a=[t],s=[n]}else a=o.map((e=>e[0])),s=o.map((e=>e[1])),null==l.mask&&(l.mask=s),i=dp(e.call(a,l)),c=dp(e.computeMask(a,s));if(e.activityRegularizer)throw new op("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<r.length;++e){const t=r[e],a=i[e],o=c[e];n[t.id]=[a,o]}}}}const r=[],o=[],s=[];for(const i of this.outputs){lp(i.id in n,"Could not compute output ".concat(i.name," : ").concat(i.id));const[e,t]=n[i.id];s.push(e.shape),r.push(e),o.push(t)}return[r,o,s]}buildNodeConversionMap(e){const t={};let n;for(const a of this.layers){n=a instanceof lg?1:0;for(let e=0;e<a.inboundNodes.length;e++){const r=lg.nodeKey(a,e);this.containerNodes.has(r)&&(t[r]=n,n+=1)}}return t}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new rp("Provide either a layer name or layer index");if("number"===typeof e)return this.findLayer(e);for(const n of this.layers)if(n.name===e)return n;throw new rp("No such layer: ".concat(e))}findLayer(e){if(this.layers.length<=e)throw new rp("Was asked to retrieve layer at index ".concat(e,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[e]}calculateLosses(){return cr((()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const a=lg.nodeKey(t,n);this.containerNodes.has(a)&&e.push(...t.calculateLosses())}return e}))}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const o of this.layers){const e=o.getClassName(),a=o.getConfig(),r=[];for(let n=0;n<o.inboundNodes.length;n++){const e=o.inboundNodes[n],a=lg.nodeKey(o,n);let s={};if(this.containerNodes.has(a)){if(e.callArgs)try{JSON.stringify(e.callArgs),s=e.callArgs}catch(pU){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(e.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),s={}}if(e.inboundLayers.length>0){const n=[];for(let a=0;a<e.inboundLayers.length;a++){const r=e.inboundLayers[a],o=e.nodeIndices[a],i=e.tensorIndices[a];let c=t[lg.nodeKey(r,o)];null==c&&(c=0),n.push([r.name,c,i,s])}r.push(n)}}}const s={};s.name=o.name,s.className=e,s.config=a,s.inboundNodes=r,n.push(s)}e.layers=n;const a=[];for(let o=0;o<this.inputLayers.length;o++){const e=this.inputLayers[o],n=this.inputLayersNodeIndices[o],r=lg.nodeKey(e,n);if(!this.containerNodes.has(r))continue;let s=t[r];null!==s&&void 0!==s||(s=0);const i=this.inputLayersTensorIndices[o];a.push([e.name,s,i])}e.inputLayers=a;const r=[];for(let o=0;o<this.outputLayers.length;o++){const e=this.outputLayers[o],n=this.outputLayersNodeIndices[o],a=lg.nodeKey(e,n);if(!this.containerNodes.has(a))continue;let s=t[a];null!==s&&void 0!==s||(s=0);const i=this.outputLayersTensorIndices[o];r.push([e.name,s,i])}return e.outputLayers=r,e}static fromConfig(e,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a={},r={};function o(e,t){e.name in r?r[e.name].push(t):r[e.name]=[t]}function s(e,t){const n=[];let r;for(const s of t){const i=s[0],c=s[1],l=s[2];if(r=null==s[3]?{}:s[3],!(i in a))return void o(e,t);const u=a[i];if(u.inboundNodes.length<=c)return void o(e,t);const h=u.inboundNodes[c];n.push(h.outputTensors[l])}n.length>0&&e.apply(hp(n),r)}function i(e){const r=e.name,s=Rm(e,null!=t.customObjects?t.customObjects:{});s.setFastWeightInitDuringBuild(n),a[r]=s;e.inboundNodes.forEach((e=>{if(!(e instanceof Array))throw new rp("Corrupted configuration, expected array for nodeData: ".concat(e));o(s,e)}))}const c=t.name,l=t.layers;for(const f of l)i(f);for(;!wp(r);)for(const e of l){const t=a[e.name];if(t.name in r){const e=r[t.name];delete r[t.name];for(const n of e)s(t,n)}}const u=[],h=[],d=t.inputLayers;for(const f of d){const e=f[0],t=f[1],n=f[2];lp(e in a);const r=a[e].inboundNodes[t].outputTensors;u.push(r[n])}const p=t.outputLayers;for(const f of p){const e=f[0],t=f[1],n=f[2];lp(e in a);const r=a[e].inboundNodes[t].outputTensors;h.push(r[n])}return new e({inputs:u,outputs:h,name:c})}get stateful(){if(this._stateful)throw new rp("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){cr((()=>{this.layers.forEach((e=>{e.stateful&&e.resetStates()}))}))}}function ug(e,t,n){const a=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>null));if(1===a)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==a)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(a," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){const n=[];return t.forEach((t=>{t in e?n.push(e[t]):n.push(null)})),n}throw new Error("The model has multiple (".concat(a,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(a," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function hg(e,t){return ug(e,t,"classWeight")}async function dg(e,t,n,a){if(null!=t||null!=a)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=cr((()=>{if(1===e.shape.length)return Qr(e);if(2===e.shape.length){if(e.shape[1]>1){return os(e,1)}if(1===e.shape[1])return ws(e,[e.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(e.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(e.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),a=Array.from(await t.data());lr(t);const r=[];return a.forEach((e=>{if(null==n[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");r.push(n[e])})),Ji(r,"float32")}return null}function pg(e,t){return to(e,t)}function fg(e,t){let n,a;const r=t;n=r.xs,a=r.ys,f(null!=n&&null!=a,(()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)));const o=mg("input",e.inputNames,n),s=mg("output",e.outputNames,a),i=o[0].shape[0];f(o.length===e.inputs.length,(()=>"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(o.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")"))),f(s.length===e.outputs.length,(()=>"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(s.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")));for(let c=0;c<o.length;c++)f(o[c].shape[0]===i,(()=>"Batch size mismatch: input "+"".concat(e.inputNames[c]," has ").concat(o[c].shape[0],"; ")+"expected  ".concat(i," based on input ").concat(e.inputNames[0],".")));for(let c=0;c<s.length;c++)f(s[c].shape[0]===i,(()=>"Batch size mismatch: output "+"".concat(e.outputNames[c]," has ").concat(s[c].shape[0],"; ")+"expected  ".concat(i," based on input ").concat(e.inputNames[0],".")));return{xs:o,ys:s}}function mg(e,t,n){if(n instanceof Sa)return[n];if(Array.isArray(n))return f(n.length===t.length,(()=>"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,"."))),n;{const a=[];for(const r of t){if(null==n[r])throw new rp("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(r,"'."));a.push(n[r])}return a}}async function gg(e,t,n){const a=null!=n.batchesPerEpoch;if(f(null!=e.optimizer,(()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig).")),f(null!=n,(()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call.")),f(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),(()=>"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(n.epochs))),f(!a||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),(()=>"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(n.batchesPerEpoch))),f(null==n.validationSplit,(()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead.")),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const r=null!=n.validationData;let o,s;if(r)if(yg(n.validationData))f(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),(()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(n.validationBatches)));else{const e=function(e){if(3===e.length)throw new op("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);o=e.xs,s=e.ys}const i=e.makeTrainFunction(),c=e.getDedupedMetricsNames();let l;l=r?c.slice().concat(c.map((e=>"val_"+e))):c.slice();const u=Cm(n.callbacks,n.yieldEvery),h=null==n.verbose?1:n.verbose,{callbackList:d,history:p}=Nm(u,h,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,r,l);d.setModel(e),e.history=p,await d.onTrainBegin(),e.stopTraining_=!1;let m=null==n.initialEpoch?0:n.initialEpoch,g=await t.iterator();for(;m<n.epochs;){const l={};await d.onEpochBegin(m);let u=0,h=0;for(a||(g=await t.iterator());!a||u<n.batchesPerEpoch;){const t=await g.next();if(a&&t.done){console.warn("You provided `batchesPerEpoch` as "+"".concat(n.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(u," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(n.batchesPerEpoch*n.epochs," batches). ")+"You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:a,ys:r}=fg(e,t.value),o={};o.batch=h,o.size=a[0].shape[0],await d.onBatchBegin(h,o);const s=[];if(null!=n.classWeight){const t=hg(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)s.push(await dg(r[e],null,t[e]))}const l=a.concat(r).concat(s),p=i(l);lr(l);for(let e=0;e<c.length;++e){const t=c[e],n=p[e];o[t]=n,ur(n)}await d.onBatchEnd(h,o),vm(o),h++,u++}if(a?u>=n.batchesPerEpoch:t.done){if(r){let t;t=yg(n.validationData)?dp(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):dp(e.evaluate(o,s,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)l["val_".concat(e.metricsNames[n])]=t[n]}break}if(e.stopTraining_)break}if(await d.onEpochEnd(m,l),m++,e.stopTraining_)break}return await d.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function yg(e){return"function"===typeof e.iterator}function bg(e){f(e>0&&Number.isInteger(e),(()=>"batchSize is required to be a positive integer, but got ".concat(e)))}function vg(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((e=>tf(e,t,n-t))):tf(e,t,n-t)}function xg(e,t){return cr((()=>null==e?null:Array.isArray(e)?e.map((e=>xg(e,t))):uf(e,"int32"===t.dtype?t:Zr(t,"int32"))))}function wg(e,t){const n=[];let a=0,r=null;for(;a<e;)r=a+t,r>=e&&(r=e),n.push([a,r]),a=r;return n}function kg(e){const t=[];e instanceof Sa&&(e=[e]);for(let n=0;n<e.length;++n){const a=e[n];if(1===a.rank)t.push(ef(a,1));else{if(0===a.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(a)}}return t}function Sg(e,t){if(null==e)return;const n=[];if(t instanceof Sa)n.push(t.id);else if(Array.isArray(t))t.forEach((e=>n.push(e.id)));else if(null!=t)for(const r in t){const e=t[r];n.push(e.id)}const a=[];if(e instanceof Sa)-1===n.indexOf(e.id)&&a.push(e);else if(Array.isArray(e))e.forEach((e=>{-1===n.indexOf(e.id)&&a.push(e)}));else if(null!=e)for(const r in e){const t=e[r];-1===n.indexOf(t.id)&&a.push(t)}a.forEach((e=>{e.isDisposed||e.dispose()}))}function Ig(e){return Array.isArray(e)}function Tg(e){return!function(e){return e instanceof Sa}(e)&&!Ig(e)}function Cg(e,t,n){let a,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){let t=!1;if(Ig(e)&&e.length>0)t=!0;else if(Tg(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new rp("Error when checking model ".concat(o," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((e=>null));if(Tg(e)){a=[];for(const n of t){if(null==e[n])throw new rp('No data provided for "'.concat(n,'". Need data for each key in: ')+"".concat(t));a.push(e[n])}}else if(Ig(e)){if(e.length!==t.length)throw new rp("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));a=e}else{if(t.length>1)throw new rp("The model ".concat(o," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));a=[e]}if(a=kg(a),null!=n)for(let s=0;s<t.length;++s){if(null==n[s])continue;const e=a[s];if(e.shape.length!==n[s].length)throw new rp("Error when checking ".concat(o,": expected ").concat(t[s]," ")+"to have ".concat(n[s].length," dimension(s). but got array with ")+"shape ".concat(e.shape));for(let t=0;t<n[s].length;++t){if(0===t&&!r)continue;const a=e.shape[t],i=n[s][t];if(null!=i&&i>=0&&a!==i)throw new rp("".concat(o," expected a batch of elements where each ")+"example has shape [".concat(n[s].slice(1,n[s].length),"] ")+"(i.e.,tensor shape [*,".concat(n[s].slice(1,n[s].length),"])")+" but the ".concat(o," received an input with ").concat(e.shape[0])+" examples, each with shape [".concat(e.shape.slice(1,e.shape.length),"]")+" (tensor shape [".concat(e.shape,"])"))}}return a}function Eg(e,t,n){let a,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new rp("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));a=e}else{if(t.length>1)throw new rp("The model expects ".concat(t.length," ").concat(o," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));a=[e]}if(null!=n)for(let s=0;s<t.length;++s){if(null==n[s])continue;const e=a[s];if(e.shape.length!==n[s].length)throw new rp("Error when checking ".concat(o,": expected ").concat(t[s]," ")+"to have ".concat(n[s].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(e.shape)));for(let a=0;a<n[s].length;++a){if(0===a&&!r)continue;const i=e.shape[a],c=n[s][a];if(null!=c&&c!==i)throw new rp("Error when checking ".concat(o,": expected ")+"".concat(t[s]," to have shape ").concat(JSON.stringify(n[s])," but ")+"got array with shape ".concat(JSON.stringify(e.shape),"."))}}}class Ng extends lg{constructor(e){super(e),this.isTraining=!1}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new rp("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");tg(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>ll.adagrad(.01),Adadelta:()=>ll.adadelta(1,.95,Jp()),Adam:()=>ll.adam(.001,.9,.999,Jp()),Adamax:()=>ll.adamax(.002,.9,.999,Jp(),0),RMSProp:()=>ll.rmsprop(.001,.9,0,Jp()),SGD:()=>ll.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new rp("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof po))throw new rp("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new rp("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));const n=e.loss;t=n.map((e=>Um(e)))}else{const n=Um(e.loss);this.outputs.forEach((e=>{t.push(n)}))}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new rp('Unknown entry in loss dictionary: "'.concat(t,'". ')+"Only expected the following keys: ".concat(this.outputNames));for(const n of this.outputNames)null==e.loss[n]&&console.warn('Output "'.concat(n,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(n," during training")),t.push(Um(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const e=this.internalOutputShapes[o],t=this.outputNames[o];this.feedOutputNames.push(t),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[o])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Vp("loss",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}}));const a=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>[]));let n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((e=>n));{const e=[];for(const a of t){let t=n.hasOwnProperty(a)?n[a]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),r=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};Vp("metric",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;(t=>{let n,a,o;for(const s of t){if("string"===typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){const t=this.internalOutputShapes[e];let r;1===t[t.length-1]||this.lossFunctions[e]===Pm?-1!==["accuracy","acc"].indexOf(s)?a=Vm:-1!==["crossentropy","ce"].indexOf(s)&&(a=Hm):this.lossFunctions[e]===Mm?-1!==["accuracy","acc"].indexOf(s)?a=Km:-1!==["crossentropy","ce"].indexOf(s)&&(a=Ym):-1!==["accuracy","acc"].indexOf(s)?a=Gm:-1!==["crossentropy","ce"].indexOf(s)&&(a=qm),-1!==["accuracy","acc"].indexOf(s)?r="acc":-1!==["crossentropy","ce"].indexOf(s)&&(r="ce"),o=a,n=""+r}else{const e=Zm(s);o=e,n=""+Qm(s)}let t;Vp(n,(()=>{t=o})),r(e,n,t)}})(a[e])}})),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=null==n.batchSize?32:n.batchSize;bg(a);const r=this.standardizeUserDataXY(e,t,!0,a);try{const e=r[0].concat(r[1]);this.makeTestFunction();const t=this.testFunction;return hp(this.testLoop(t,e,a,n.verbose,n.steps))}finally{Sg(r[0],e),Sg(r[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const a=null!=(n=n||{}).batches,r=e.testFunction;let o=[];if(n.verbose>0)throw new op("Verbose mode is not implemented yet.");f(!a||n.batches>0&&Number.isInteger(n.batches),(()=>"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(n.batches))));const s="function"===typeof t.next?t:await t.iterator();let i=0,c=0;for(;!a||c<n.batches;){const t=await s.next();if(o=cr((()=>{if(t.value){const{xs:n,ys:a}=fg(e,t.value),s=n.concat(a),l=cr((()=>r(s)));if(lr(s),0===c)for(let e=0;e<l.length;++e)o.push(so(0));const u=s[0].shape[0];for(let e=0;e<l.length;++e){const t=l[e],n=o[e];o[e]=cr((()=>Jr(o[e],to(u,t)))),c>0&&lr(n)}lr(l),i+=u,++c}return o})),t.done){a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(n.batches," batches). ")+"You may need to use the repeat() function when building your dataset.");break}}for(let l=0;l<o.length;++l){const e=o[l];o[l]=eo(o[l],i),lr(e)}return hp(o)}(this,e,t)}checkNumSamples(e,t,n){let a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(a=null,null!=t)throw new rp("If ".concat(r," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new rp("Either the input data should have a defined shape, or "+"".concat(r," shoud be specified."));a=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return a}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new rp("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),a=n?t:[t],r=this.retrieveSymbolicTensors(a),o=new tm;if(e instanceof Sa&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new rp("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(let t=0;t<this.inputs.length;++t)o.add(this.inputs[t],e[t])}else for(const i of this.inputs){const t=e[i.name];if(null==t)throw new rp("No value is provided for the model's input ".concat(i.name));o.add(i,t)}const s=rm(r,o);return n?s:s[0]}retrieveSymbolicTensors(e){const t=cp(null,e.length);let n=e.length;for(const a of this.layers){const r=Array.isArray(a.output)?a.output:[a.output],o=r.map((e=>e.name));for(let a=0;a<e.length;++a){const s=o.indexOf(e[a]);if(-1!==s&&(t[a]=r[s],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach(((t,a)=>{null==t&&n.push(e[a])})),new rp("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(n)))}return t}predictLoop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return cr((()=>{const a=this.checkNumSamples(e);if(n)throw new op("Verbose predictLoop() is not implemented yet.");const r=wg(a,t),o=this.outputs.map((e=>[]));for(let t=0;t<r.length;++t){cr((()=>{const n=r[t][0],a=r[t][1],o=vg(e,n,a),s=[];if(Array.isArray(o))for(let e=0;e<o.length;++e)s.push({key:this.inputs[e],value:o[e]});else s.push({key:this.inputs[0],value:o});const i=new tm(s);return rm(this.outputs,i)})).forEach(((e,t)=>o[t].push(e)))}return hp(o.map((e=>Rs(e,0))))}))}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=kg(e);Eg(n,this.inputNames,this.feedInputShapes,!1);try{const e=null==t.batchSize?32:t.batchSize;return bg(e),this.predictLoop(n,e)}finally{Sg(n,e)}}predictOnBatch(e){Eg(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t){let n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new ap("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const a=[];for(let r=0;r<this.feedOutputShapes.length;++r){const e=this.feedOutputShapes[r];this.feedLossFns[r]===Mm?a.push(e.slice(0,e.length-1).concat([1])):a.push(e)}if(function(e,t,n){const a=xp(e.map((e=>e.shape[0])));a.sort();const r=xp(t.map((e=>e.shape[0])));if(r.sort(),a.length>1)throw new rp("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((e=>e.shape)))));if(r.length>1)throw new rp("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((e=>e.shape)))));if(a.length>0&&r.length>0&&!b(a,r))throw new rp("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(a[0]," input sample(s) and ").concat(r[0]," target ")+"sample(s).")}(e=Cg(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=Cg(t,this.feedOutputNames,a,!1,"target")),function(e,t,n){const a=[_m,Pm,Lm];for(let r=0;r<e.length;++r){const o=e[r],s=t[r],i=n[r];if(null!=s){if(s===Lm&&1===o.shape[o.shape.length-1])throw new rp("You are passing a target array of shape ".concat(o.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==a.indexOf(s)){const e=o.shape.slice(1),t=i.slice(1);for(let n=0;n<e.length;++n){const a=e[n],r=t[n];if(null!=r&&a!==r)throw new rp("A target Tensor with shape ".concat(o.shape," was passed for an ")+"output of shape ".concat(i,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new rp("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}async standardizeUserData(e,t,n,a){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5?arguments[5]:void 0;const[s,i]=this.standardizeUserDataXY(e,t,r,o);if(null!=n)throw new Error("sample weight is not supported yet.");let c=null;if(null!=a){const e=hg(a,this.outputNames);c=[];for(let t=0;t<e.length;++t)c.push(await dg(i[t],null,e[t]))}return[s,i,c]}testLoop(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0;return cr((()=>{const o=this.checkNumSamples(t,n,r,"steps"),s=[];if(a>0)throw new op("Verbose mode is not implemented yet.");if(null!=r)throw new op("steps mode in testLoop() is not implemented yet");{const a=wg(o,n),r=Ji(Zp(0,o));for(let n=0;n<a.length;++n){const o=a[n][0],i=a[n][1],c=tf(r,o,i-o),l=xg(t,c),u=e(l);if(0===n)for(let e=0;e<u.length;++e)s.push(so(0));for(let e=0;e<u.length;++e){const t=u[e];s[e]=Jr(s[e],to(i-o,t))}}for(let e=0;e<s.length;++e)s[e]=eo(s[e],o)}return s}))}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const a=e[n];let r=a;if(up(e,a)>1){const t=up(e.slice(0,n),a);r+="_".concat(t)}t.push(r)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),r=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),o=[],s=this.collectedTrainableWeights.map((e=>e.read()));return[this.optimizer_.minimize((()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const s=new tm(e),i=rm(this.outputs,s,{training:!0});let c;for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(a[n],i[n]);null!=r[n]&&(e=pg(e,r[n]));const o=bi(e);t.push(o),c=0===n?e:Jr(c,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][0],r=this.metricsTensors[n][1];e=bi(t(a[r],i[r]))}ur(e),o.push(e)}return c=bi(c),this.calculateLosses().forEach((e=>{c=Jr(c,e)})),c}),!0,s)].concat(o)}}makeTestFunction(){this.testFunction=e=>cr((()=>{const t=[];let n;const a=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let e=0;e<this.inputs.length;++e)o.push({key:this.inputs[e],value:a[e]});const s=new tm(o),i=rm(this.outputs,s);for(let e=0;e<this.lossFunctions.length;++e){const a=this.lossFunctions[e],o=bi(a(r[e],i[e]));n=0===e?o:Jr(n,o),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],a=this.metricsTensors[e][1],o=bi(n(r[a],i[a]));t.push(o)}return t}))}async fit(e,t){let n,a,r,o,s,i,c,l,u,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;try{const d=null==h.batchSize?32:h.batchSize;bg(d);const p=!1,f=await this.standardizeUserData(e,t,h.sampleWeight,h.classWeight,p,d);n=f[0],a=f[1],u=f[2];let m,g=!1;if(null!=h.validationData&&h.validationData.length>0){if(g=!0,2!==h.validationData.length)throw 3===h.validationData.length?new op("validationData including sample weights is not supported yet."):new rp("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(h.validationData," is invalid."));s=h.validationData[0],i=h.validationData[1];const e=!0,t=await this.standardizeUserData(s,i,null,null,e,d);c=t[0],l=t[1],m=c.concat(l)}else if(null!=h.validationSplit&&h.validationSplit>0&&h.validationSplit<1){g=!0;const e=Math.floor(n[0].shape[0]*(1-h.validationSplit)),t=n[0].shape[0];c=vg(n,e,t),r=n,n=vg(n,0,e),l=vg(a,e,t),o=a,a=vg(a,0,e),m=c.concat(l)}else null!=h.validationSteps&&(g=!0);const y=n.concat(a).concat(u);this.checkTrainableWeightsConsistency();const b=this.makeTrainFunction(),v=this.getDedupedMetricsNames();let x,w;g?(this.makeTestFunction(),x=this.testFunction,w=v.slice().concat(v.map((e=>"val_"+e)))):(x=null,m=[],w=v.slice());const k=Cm(h.callbacks,h.yieldEvery);return await this.fitLoop(b,y,v,d,h.epochs,h.verbose,k,x,m,h.shuffle,w,h.initialEpoch,null,null)}finally{this.isTraining=!1,Sg(n,e),Sg(a,t),Sg(r,e),Sg(o,t),Sg(c,s),Sg(l,i),null!=u&&lr(u)}}async fitLoop(e,t,n,a,r,o,s,i,c,l,h,d,p,f){null==a&&(a=32),null==r&&(r=1),null==l&&(l=!0),null==d&&(d=0);let m=!1;if(null!=i&&null!=c&&(m=!0),null!=f&&(m=!0,null==p))throw new rp("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(t,a,p,"steps_per_epoch");let y;null!=g&&(y=Zp(0,g)),null==o&&(o=1);const{callbackList:b,history:v}=Nm(s,o,r,d,g,p,a,m,h);b.setModel(this),this.history=v,await b.onTrainBegin(),this.stopTraining_=!1;for(let x=d;x<r;++x){await b.onEpochBegin(x);const r={};if(null!=p)throw new op("stepsPerEpoch mode is not implemented yet.");{if("batch"===l)throw new op("batch shuffling is not implemneted yet");l&&u(y);const o=Ji(y),s=wg(g,a);for(let l=0;l<s.length;++l){const u={};if(await b.onBatchBegin(l,u),cr((()=>{const h=s[l][0],d=s[l][1],p=tf(o,h,d-h);u.batch=l,u.size=d-h;const f=xg(t,p),g=e(f);for(let e=0;e<n.length;++e){const t=n[e],a=g[e];u[t]=a,ur(a)}if(l===s.length-1&&m){const e=this.testLoop(i,c,a);for(let t=0;t<n.length;++t){const a=n[t],o=e[t];ur(o),r["val_"+a]=o}}})),await b.onBatchEnd(l,u),vm(u),this.stopTraining_)break}o.dispose()}if(await b.onEpochEnd(x,r),this.stopTraining_)break}return await b.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return gg(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),a=n[0],r=n[1],o=this.makeTrainFunction()(a.concat(r)),s=[];for(const i of o){const e=await i.data();s.push(e[0])}return lr(o),Sg(n[0],e),Sg(n[1],t),hp(s)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,a=n?this.trainableWeights:this.weights,r=this.getWeights(n);for(let o=0;o<a.length;++o)n&&!a[o].trainable||t.push({name:a[o].originalName,tensor:r[o]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=ir().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-ir().numTensors}return e}getLossIdentifiers(){let e;if("string"===typeof this.loss)e=pp(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!==typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map((e=>pp(e)))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const a of t){if("string"!==typeof n[a])throw new Error("Serialization of non-string loss is not supported.");e[a]=pp(n[a])}}return e}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[pp(Qm(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((e=>pp(Qm(e))));{const e={};for(const t in this.metrics)e[t]=pp(Qm(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=Rm(sg(e.optimizer_config));let n,a;if("string"===typeof e.loss)n=fp(e.loss);else if(Array.isArray(e.loss))n=e.loss.map((e=>fp(e)));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=fp(e.loss[t])}if(Array.isArray(e.metrics))a=e.metrics.map((e=>fp(e)));else if(null!=e.metrics){a={};for(const t in e.metrics)a[t]=fp(e.metrics[t])}this.compile({loss:n,metrics:a,optimizer:t})}async save(e,t){if("string"===typeof e){const t=(n=e,wr.getSaveHandlers(n));if(0===t.length)throw new rp("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new rp("Found more than one (".concat(t.length,") save handlers for ")+"URL '".concat(e,"'"));e=t[0]}var n;if(null==e.save)throw new rp("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const a=await pr(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(cg),convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:n}=await pr(await this.optimizer.getWeights(),e);a.specs.push(...n),a.data=(o=[a.data,t],or.join(o))}var o;if(null!=this.userDefinedMetadata){const e=!0;$m(this.userDefinedMetadata,this.name,e),r.userDefinedMetadata=this.userDefinedMetadata}return r.weightData=a.data,r.weightSpecs=a.specs,e.save(r)}setUserDefinedMetadata(e){$m(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Ng.className="Model",ho(Ng);class Rg extends Ng{}Rg.className="Functional",ho(Rg);class Ag extends Ng{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:Ap("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some((e=>e<0)))throw new rp("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}add(e){const t=e instanceof Ag||e instanceof Ng;let n;if(t){if(n=e,1!==n.outputs.length)throw new rp("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new rp("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new rp("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new rp("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new em({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new rp("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new rp("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=$f(this.outputs[0])}this.inboundNodes=[],new Zf({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:cp(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(Uf(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Ng({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new ap("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new ap("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new ap("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new ap("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t){let n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new rp("Legacy serialization format not supported yet.");n=t}else f(null!=t.layers,(()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field.")),n=t.layers,delete t.layers,r=t;const o=new e(r);if(!(o instanceof Ag))throw new op("Sequential.fromConfig called on non-Sequential input: ".concat(o));for(const s of n){const e=Rm(s,void 0,a);a&&e.setFastWeightInitDuringBuild(!0),o.add(e)}return o}set stopTraining(e){if(null==this.model)throw new rp("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new rp("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}Ag.className="Sequential",ho(Ag);class _g extends lo{getConfig(){return{}}}class Og extends _g{apply(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new op("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return Gs(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}Og.className="elu",ho(Og);class Fg extends _g{apply(e){return zi(e)}}Fg.className="selu",ho(Fg);class Dg extends _g{apply(e){return Mi(e)}}Dg.className="relu",ho(Dg);class Lg extends _g{apply(e){return cr((()=>xi(6,Mi(e))))}}Lg.className="relu6",ho(Lg);class Mg extends _g{apply(e){return e}}Mg.className="linear",ho(Mg);class Pg extends _g{apply(e){return Wi(e)}}Pg.className="sigmoid",ho(Pg);class zg extends _g{apply(e){return function(e){return cr((()=>{const t=Jr(.5,to(.2,e));return Ns(t,0,1)}))}(e)}}zg.className="hardSigmoid",ho(zg);class Bg extends _g{apply(e){return qi(e)}}Bg.className="softplus",ho(Bg);class Wg extends _g{apply(e){return function(e){return cr((()=>eo(e,Jr(xo(e),1))))}(e)}}Wg.className="softsign",ho(Wg);class Ug extends _g{apply(e){return Qi(e)}}Ug.className="tanh",ho(Ug);class Vg extends _g{apply(e){return Ki(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}Vg.className="softmax",ho(Vg);class Gg extends _g{apply(e){return ri(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}Gg.className="logSoftmax",ho(Gg);class jg extends _g{apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return cr((()=>to(Wi(to(e,t)),e)))}}jg.className="swish",ho(jg);class Hg extends _g{apply(e){return cr((()=>to(e,Qi(qi(e)))))}}function Kg(e){return e.getClassName()}function qg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return bp(e,uo.getMap().classNameMap,t,"activation")}function Yg(e){if(null==e){const e={className:"linear",config:{}};return qg(e)}if("string"===typeof e){const t={};return t.className=e,t.config={},qg(t)}return e instanceof _g?e:qg(e)}function Xg(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}Hg.className="mish",ho(Hg);class Zg extends lo{}class Qg extends Zg{constructor(e){super(),Xg(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return cr((()=>{let t=Ti([1]);return this.hasL1&&(t=Jr(t,ai(to(this.l1,xo(e))))),this.hasL2&&(t=Jr(t,ai(to(this.l2,hf(e))))),ws(t,[])}))}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}Qg.className="L1L2",ho(Qg);const Jg={l1l2:"L1L2"};function $g(e){return gp(e)}function ey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return bp(e,uo.getMap().classNameMap,t,"regularizer")}function ty(e){if(null==e)return null;if("string"===typeof e){return ey({className:e in Jg?Jg[e]:e,config:{}})}return e instanceof Zg?e:ey(e)}class ny extends Jf{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=Wf(e);let n=Mi(e);return null!=this.maxValue&&(n=Ns(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}ny.className="ReLU",ho(ny);class ay extends Jf{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=Wf(e);return $s(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}ay.className="LeakyReLU",ho(ay);class ry extends Jf{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Pf(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=ty(e.alphaRegularizer),this.alphaConstraint=ym(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new rp("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=Uf(e)).slice(1);if(null!=this.sharedAxes)for(const a of this.sharedAxes)t[a-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let a=1;a<e.length;++a)n[a]=e[a];this.inputSpec=[new qf({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=Wf(e),Ri(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Mf(this.alphaInitializer),alphaRegularizer:$g(this.alphaRegularizer),alphaConstraint:mm(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}ry.className="PReLU",ho(ry);class oy extends Jf{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new op("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=Wf(e);return Gs(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}oy.className="ELU",ho(oy);class sy extends Jf{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=Wf(e);return to(n,Zr(Qs(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}sy.className="ThresholdedReLU",ho(sy);class iy extends Jf{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new Vg).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return cr((()=>{let n=Wf(e);const a=t.mask;if(null!=a){const e=to(bo(Ci(n.shape),Zr(a,n.dtype)),so(-1e9));n=Jr(n,e)}return this.axis instanceof Array?this.axis.length>1?Hs(bo(n,pi(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)}))}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function cy(e,t,n){if("number"===typeof e)return cp(e,t);if(e.length!==t)throw new rp("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(let r=0;r<t;++r){const o=e[r];if((a=o)!==parseInt(a.toString(),10))throw new rp("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(o))}return e;var a}function ly(e,t,n,a){if(null==e)return e;let r;return r="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((r+a-1)/a)}function uy(e,t,n,a){if(null==e)return null;if("valid"===a)e=e*t+Xp([n-t,0]);else{if("same"!==a)throw new rp("Unsupport padding mode: ".concat(a,"."));e*=t}return e}function hy(e,t){return cr((()=>(Pp(t),"channelsFirst"===t?sc(e,[0,2,3,1]):e)))}function dy(e,t){return cr((()=>(Pp(t),"channelsFirst"===t?sc(e,[0,2,3,4,1]):e)))}function py(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return cr((()=>{if(null==o&&(o="channelsLast"),Pp(o),3!==e.shape.length)throw new rp("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new rp("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new rp("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===o&&(e=sc(e,[0,2,1])),"causal"===r)throw new op("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let i=Ls(e,t,a,"same"===r?"same":"valid","NWC",s);return null!=n&&(i=pf(i,n)),i}))}function fy(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return cr((()=>{if(null==o&&(o="channelsLast"),Pp(o),3!==e.rank&&4!==e.rank)throw new rp("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new rp("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));let c=hy(e,o);if("causal"===r)throw new op("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return c=vc({x:c,filter:t,strides:a,pad:"same"===r?"same":"valid",dilations:s,dataFormat:"NHWC",bias:n,activation:i}),"channelsFirst"===o&&(c=sc(c,[0,3,1,2])),c}))}function my(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;return cr((()=>{if(null==o&&(o="channelsLast"),Pp(o),4!==e.rank&&5!==e.rank)throw new rp("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new rp("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));let i=dy(e,o);if("causal"===r)throw new op("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return i=zs(i,t,a,"same"===r?"same":"valid","NDHWC",s),null!=n&&(i=pf(i,n)),"channelsFirst"===o&&(i=sc(i,[0,4,1,2,3])),i}))}iy.className="Softmax",ho(iy);class gy extends Jf{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",gy.verifyArgs(t),this.rank=e,Ip(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new op("Convolution layer for rank other than 1, 2, or 3 (".concat(this.rank,") is ")+"not implemented yet.");if(this.kernelSize=cy(t.kernelSize,e,"kernelSize"),this.strides=cy(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,zp(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,Pp(this.dataFormat),this.activation=Yg(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=Pf(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=ym(t.biasConstraint),this.biasRegularizer=ty(t.biasRegularizer),this.activityRegularizer=ty(t.activityRegularizer),this.dilationRate=cy(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new rp("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(this.dilationRate)));if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new rp("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new rp("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}static verifyArgs(e){if(lp("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!Sp(e.kernelSize,"number",1,3))throw new rp("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Kg(this.activation),useBias:this.useBias,biasInitializer:Mf(this.biasInitializer),biasRegularizer:$g(this.biasRegularizer),activityRegularizer:$g(this.activityRegularizer),biasConstraint:mm(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class yy extends gy{constructor(e,t){super(e,t),this.kernel=null,yy.verifyArgs(t),this.filters=t.filters,Ip(this.filters,"filters"),this.kernelInitializer=Pf(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=ym(t.kernelConstraint),this.kernelRegularizer=ty(t.kernelRegularizer)}build(e){e=Uf(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new rp("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));const n=e[t],a=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return cr((()=>{let t;e=Wf(e);const n=null==this.bias?null:this.bias.read(),a=Cp(this.activation.getClassName());if(null!=a&&2===this.rank)t=fy(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(1===this.rank)t=py(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=fy(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new op("convolutions greater than 3D are not implemented yet.");t=my(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t}))}computeOutputShape(e){e=Uf(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let r=0;r<n.length;++r){const e=ly(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(e)}let a=[e[0]];return"channelsLast"===this.dataFormat?(a=a.concat(t),a.push(this.filters)):(a.push(this.filters),a=a.concat(t)),a}getConfig(){const e={filters:this.filters,kernelInitializer:Mf(this.kernelInitializer),kernelRegularizer:$g(this.kernelRegularizer),kernelConstraint:mm(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new rp("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}class by extends yy{constructor(e){super(2,e),by.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!Sp(e.kernelSize,"number",1,2))throw new rp("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}by.className="Conv2D",ho(by);class vy extends yy{constructor(e){super(3,e),vy.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new rp("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}vy.className="Conv3D",ho(vy);class xy extends by{constructor(e){if(super(e),this.inputSpec=[new qf({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new rp("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(4!==(e=Uf(e)).length)throw new rp("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new rp("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],a=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new qf({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return cr((()=>{let t=Wf(e);if(4!==t.shape.length)throw new rp("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,a=n[0];let r,o;"channelsFirst"===this.dataFormat?(r=2,o=3):(r=1,o=2);const s=n[r],i=n[o],c=this.kernelSize[0],l=this.kernelSize[1],u=this.strides[0],h=this.strides[1],d=[a,uy(s,u,c,this.padding),uy(i,h,l,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=sc(t,[0,2,3,1]));let p=Ps(t,this.kernel.read(),d,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(p=sc(p,[0,3,1,2])),null!=this.bias&&(p=pf(p,this.bias.read(),this.dataFormat)),null!=this.activation&&(p=this.activation.apply(p)),p}))}computeOutputShape(e){const t=(e=Uf(e)).slice();let n,a,r;"channelsFirst"===this.dataFormat?(n=1,a=2,r=3):(n=3,a=1,r=2);const o=this.kernelSize[0],s=this.kernelSize[1],i=this.strides[0],c=this.strides[1];return t[n]=this.filters,t[a]=uy(t[a],i,o,this.padding),t[r]=uy(t[r],c,s,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}xy.className="Conv2DTranspose",ho(xy);class wy extends vy{constructor(e){if(super(e),this.inputSpec=[new qf({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new rp("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(5!==(e=Uf(e)).length)throw new rp("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new rp("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],a=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new qf({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return cr((()=>{let t=Wf(e);if(5!==t.shape.length)throw new rp("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,a=n[0];let r,o,s;"channelsFirst"===this.dataFormat?(s=2,r=3,o=4):(s=1,r=2,o=3);const i=n[s],c=n[r],l=n[o],u=this.kernelSize[0],h=this.kernelSize[1],d=this.kernelSize[2],p=this.strides[0],f=this.strides[1],m=this.strides[2],g=[a,uy(i,p,u,this.padding),uy(c,f,h,this.padding),uy(l,m,d,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=sc(t,[0,2,3,4,1]));let y=Ws(t,this.kernel.read(),g,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(y=sc(y,[0,4,1,2,3])),null!==this.bias&&(y=pf(y,this.bias.read(),this.dataFormat)),null!==this.activation&&(y=this.activation.apply(y)),y}))}computeOutputShape(e){const t=(e=Uf(e)).slice();let n,a,r,o;"channelsFirst"===this.dataFormat?(n=1,a=2,r=3,o=4):(n=4,a=1,r=2,o=3);const s=this.kernelSize[0],i=this.kernelSize[1],c=this.kernelSize[2],l=this.strides[0],u=this.strides[1],h=this.strides[2];return t[n]=this.filters,t[a]=uy(t[a],l,s,this.padding),t[r]=uy(t[r],u,i,this.padding),t[o]=uy(t[o],h,c,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}wy.className="Conv3DTranspose",ho(wy);class ky extends yy{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new rp("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new rp("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new rp("SeparableConv".concat(this.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(t.padding)));this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=Pf(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=ty(t.depthwiseRegularizer),this.depthwiseConstraint=ym(t.depthwiseConstraint),this.pointwiseInitializer=Pf(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=ty(t.pointwiseRegularizer),this.pointwiseConstraint=ym(t.pointwiseConstraint)}build(e){if((e=Uf(e)).length<this.rank+2)throw new rp("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new rp("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));const n=e[t],a=this.kernelSize.concat([n,this.depthMultiplier]),r=[];for(let s=0;s<this.rank;++s)r.push(1);r.push(n*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",r,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new qf({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return cr((()=>{let t;if(e=Wf(e),1===this.rank)throw new op("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=sc(e,[0,2,3,1])),t=Bi(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=pf(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=sc(t,[0,3,1,2])),t}))}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Mf(this.depthwiseInitializer),e.pointwiseInitializer=Mf(this.pointwiseInitializer),e.depthwiseRegularizer=$g(this.depthwiseRegularizer),e.pointwiseRegularizer=$g(this.pointwiseRegularizer),e.depthwiseConstraint=mm(this.depthwiseConstraint),e.pointwiseConstraint=mm(this.pointwiseConstraint),e}}ky.className="SeparableConv";class Sy extends ky{constructor(e){super(2,e)}}Sy.className="SeparableConv2D",ho(Sy);class Iy extends yy{constructor(e){super(1,e),Iy.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!Sp(e.kernelSize,"number",1,1))throw new rp("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}Iy.className="Conv1D",ho(Iy);class Ty extends Jf{constructor(e){super(e),"number"===typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return cr((()=>{if(e=Wf(e),"channelsLast"===this.dataFormat){const t=af(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return af(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=af(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return af(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}}))}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}Ty.className="Cropping2D",ho(Ty);class Cy extends Jf{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Pp(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){kp(Op,"InterpolationFormat",e)}(this.interpolation)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return cr((()=>{let t=Wf(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=sc(t,[0,2,3,1]);const e=this.size[0]*n[2],a=this.size[1]*n[3],r="nearest"===this.interpolation?il.resizeNearestNeighbor(t,[e,a]):il.resizeBilinear(t,[e,a]);return sc(r,[0,3,1,2])}{const e=this.size[0]*n[1],a=this.size[1]*n[2];return"nearest"===this.interpolation?il.resizeNearestNeighbor(t,[e,a]):il.resizeBilinear(t,[e,a])}}))}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}Cy.className="UpSampling2D",ho(Cy);class Ey extends gy{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=Pf(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=ym(e.depthwiseConstraint),this.depthwiseRegularizer=ty(e.depthwiseRegularizer)}build(e){if((e=Uf(e)).length<4)throw new rp("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new rp("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));const n=e[t],a=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",a,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return cr((()=>{let t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return cr((()=>{null==r&&(r="channelsLast"),Pp(r);let s=hy(e,r);if(4!==e.rank)throw new rp("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new rp("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return s=Vs(s,t,n,"same"===a?"same":"valid","NHWC",o),"channelsFirst"===r&&(s=sc(s,[0,3,1,2])),s}))}(e=Wf(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=pf(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t}))}computeOutputShape(e){e=Uf(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],a="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,r=ly(t,this.kernelSize[0],this.padding,this.strides[0]),o=ly(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],a,r,o]:[e[0],r,o,a]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Mf(this.depthwiseInitializer),e.depthwiseRegularizer=$g(this.depthwiseRegularizer),e.depthwiseConstraint=mm(this.depthwiseRegularizer),e}}function Ny(e,t,n,a){if(Array.isArray(e)){if(null!=t||null!=n)throw new rp("When inputs is an array, neither initialState or constants should be provided");null!=a&&(n=e.slice(e.length-a,e.length),e=e.slice(0,e.length-a)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function r(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=r(t),constants:n=r(n)}}function Ry(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return cr((()=>{const c=t.shape.length;if(c<3)throw new rp("Input should be at least 3D, but is ".concat(c,"D."));const l=[1,0].concat(Zp(2,c));if(t=sc(t,l),null!=o)throw new op("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=r&&(r=Zr(Zr(r,"bool"),"float32"),r.rank===c-1&&(r=Ks(r,-1)),r=sc(r,l)),a&&(t=Pi(t,0),null!=r&&(r=Pi(r,0)));const u=[];let h,d=n;const p=t.shape[0],f=tc(t);let m,g;null!=r&&(m=tc(r));for(let t=0;t<p;++t){const n=f[t],a=cr((()=>e(n,d)));if(null==r)h=a[0],d=a[1];else{const e=cr((()=>{const e=m[t],n=bo(Ei(e),e);return{output:Jr(to(a[0],e),to(d[0],n)),newStates:d.map(((t,r)=>Jr(to(a[1][r],e),to(t,n))))}}));h=e.output,d=e.newStates}i&&u.push(h)}if(i){g=Zi(u,1)}return[h,g,d]}))}Ey.className="DepthwiseConv2D",ho(Ey);class Ay extends Jf{constructor(e){let t;if(super(e),null==e.cell)throw new rp("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new zy({cells:e.cell}):e.cell,null==t.stateSize)throw new rp("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new qf({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return Zp(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((e=>null))}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){zf(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let a;if(a=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const a of t)n.push([e[0],a]);return[a].concat(n)}return a}computeMask(e,t){return cr((()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map((e=>null));return[e].concat(t)}return e}))}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new op("Constants support is not implemented in RNN yet.");zf(e)&&(e=e[0]);const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new qf({shape:[t,null,...n]});const a=[e[0]].concat(e.slice(2));let r;if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!b(this.stateSpec.map((e=>e.shape[e.shape.length-1])),r))throw new rp("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((e=>new qf({shape:[null,e]})));this.stateful&&this.resetStates()}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];cr((()=>{if(!this.stateful)throw new np("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new rp("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>Ti([n,e]))):this.states_=[Ti([n,this.cell.stateSize])];else if(null==e)lr(this.states_),null!=this.keptStates&&(lr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>Ti([n,e]))):this.states_[0]=Ti([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new rp("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===t?this.keptStates.push(this.states_.slice()):lr(this.states_);for(let t=0;t<this.states_.length;++t){const a=e[t],r=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,o=[n,r];if(!b(a.shape,o))throw new rp("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(o,", received shape=").concat(a.shape));this.states_[t]=a}}this.states_=this.states_.map((e=>ur(e.clone())))}))}apply(e,t){let n=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});const r=Ny(e,n,a,this.numConstants);e=r.inputs,n=r.initialState,a=r.constants;let o=[],s=[];if(null!=n){t.initialState=n,o=o.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new qf({shape:e.shape}));s=s.concat(this.stateSpec)}null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length);if(o[0]instanceof Yf){const n=[e].concat(o),a=this.inputSpec.concat(s),r=this.inputSpec;this.inputSpec=a;const i=super.apply(n,t);return this.inputSpec=r,i}return super.apply(e,t)}call(e,t){return cr((()=>{const n=null==t?null:t.mask,a=null==t?null:t.training;let r=null==t?null:t.initialState;e=Wf(e),null==r&&(r=this.stateful?this.states_:this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(r.length!==o)throw new rp("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(r.length," initial state(s)."));this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const s={training:a},i=Ry(((e,t)=>{const n=this.cell.call([e].concat(t),s);return[n[0],n.slice(1)]}),e,r,this.goBackwards,n,null,this.unroll,this.returnSequences),c=i[0],l=i[1],u=i[2];this.stateful&&this.resetStates(u,a);const h=this.returnSequences?l:c;return this.returnState?[h].concat(u):h}))}getInitialState(e){return cr((()=>{let t=Ti(e.shape);return t=ai(t,[1,2]),t=ef(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map((e=>e>1?sf(t,[1,e]):t)):this.cell.stateSize>1?[sf(t,[1,this.cell.stateSize])]:[t]}))}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===Ay.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=Rm(t.cell,n);return new e(Object.assign(t,{cell:a}))}}Ay.className="RNN",ho(Ay);class _y extends Jf{}class Oy extends _y{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Ip(this.units,"units"),this.activation=Yg(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Pf(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Pf(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Pf(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ty(e.kernelRegularizer),this.recurrentRegularizer=ty(e.recurrentRegularizer),this.biasRegularizer=ty(e.biasRegularizer),this.kernelConstraint=ym(e.kernelConstraint),this.recurrentConstraint=ym(e.recurrentConstraint),this.biasConstraint=ym(e.biasConstraint),this.dropout=Yp([1,Xp([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Yp([1,Xp([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Uf(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return cr((()=>{if(2!==e.length)throw new rp("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));let n=e[1];e=e[0];const a=null!=t.training&&t.training;let r;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=By({ones:()=>Ei(e),rate:this.dropout,training:a,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=By({ones:()=>Ei(n),rate:this.recurrentDropout,training:a,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,s=this.recurrentDropoutMask;r=lf(null!=o?to(e,o):e,this.kernel.read()),null!=this.bias&&(r=pf(r,this.bias.read())),null!=s&&(n=to(n,s));let i=Jr(r,lf(n,this.recurrentKernel.read()));return null!=this.activation&&(i=this.activation.apply(i)),[i,i]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Kg(this.activation),useBias:this.useBias,kernelInitializer:Mf(this.kernelInitializer),recurrentInitializer:Mf(this.recurrentInitializer),biasInitializer:Mf(this.biasInitializer),kernelRegularizer:$g(this.kernelRegularizer),recurrentRegularizer:$g(this.recurrentRegularizer),biasRegularizer:$g(this.biasRegularizer),activityRegularizer:$g(this.activityRegularizer),kernelConstraint:mm(this.kernelConstraint),recurrentConstraint:mm(this.recurrentConstraint),biasConstraint:mm(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}Oy.className="SimpleRNNCell",ho(Oy);class Fy extends Ay{constructor(e){e.cell=new Oy(e),super(e)}call(e,t){return cr((()=>{null!=this.cell.dropoutMask&&(lr(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(lr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,a=null==t?null:t.training,r=null==t?null:t.initialState;return super.call(e,{mask:n,training:a,initialState:r})}))}static fromConfig(e,t){return new e(t)}}Fy.className="SimpleRNN",ho(Fy);class Dy extends _y{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new rp("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Ip(this.units,"units"),this.activation=Yg(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Yg(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Pf(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Pf(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Pf(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ty(e.kernelRegularizer),this.recurrentRegularizer=ty(e.recurrentRegularizer),this.biasRegularizer=ty(e.biasRegularizer),this.kernelConstraint=ym(e.kernelConstraint),this.recurrentConstraint=ym(e.recurrentConstraint),this.biasConstraint=ym(e.biasConstraint),this.dropout=Yp([1,Xp([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Yp([1,Xp([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=Uf(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return cr((()=>{if(2!==e.length)throw new rp("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=null!=t.training&&t.training;let a=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=By({ones:()=>Ei(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=By({ones:()=>Ei(a),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const r=this.dropoutMask,o=this.recurrentDropoutMask;let s,i,c;0<this.dropout&&this.dropout<1&&(e=to(e,r[0]));let l=lf(e,this.kernel.read());this.useBias&&(l=pf(l,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(a=to(a,o[0]));const u=this.recurrentKernel.read(),[h,d]=Yi(u,[2*this.units,this.units],u.rank-1),p=lf(a,h),[f,m,g]=Yi(l,3,l.rank-1),[y,b]=Yi(p,2,p.rank-1);s=this.recurrentActivation.apply(Jr(f,y)),i=this.recurrentActivation.apply(Jr(m,b));const v=lf(to(i,a),d);c=this.activation.apply(Jr(g,v));const x=Jr(to(s,a),to(Jr(1,ki(s)),c));return[x,x]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Kg(this.activation),recurrentActivation:Kg(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Mf(this.kernelInitializer),recurrentInitializer:Mf(this.recurrentInitializer),biasInitializer:Mf(this.biasInitializer),kernelRegularizer:$g(this.kernelRegularizer),recurrentRegularizer:$g(this.recurrentRegularizer),biasRegularizer:$g(this.biasRegularizer),activityRegularizer:$g(this.activityRegularizer),kernelConstraint:mm(this.kernelConstraint),recurrentConstraint:mm(this.recurrentConstraint),biasConstraint:mm(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}Dy.className="GRUCell",ho(Dy);class Ly extends Ay{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Dy(e),super(e)}call(e,t){return cr((()=>{null!=this.cell.dropoutMask&&(lr(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(lr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,a=null==t?null:t.training,r=null==t?null:t.initialState;return super.call(e,{mask:n,training:a,initialState:r})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}Ly.className="GRU",ho(Ly);class My extends _y{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Ip(this.units,"units"),this.activation=Yg(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Yg(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Pf(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Pf(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Pf(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=ty(e.kernelRegularizer),this.recurrentRegularizer=ty(e.recurrentRegularizer),this.biasRegularizer=ty(e.biasRegularizer),this.kernelConstraint=ym(e.kernelConstraint),this.recurrentConstraint=ym(e.recurrentConstraint),this.biasConstraint=ym(e.biasConstraint),this.dropout=Yp([1,Xp([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Yp([1,Xp([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=Uf(e))[e.length-1];let a;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;a=new((t=class extends bf{apply(t,a){const r=e.apply([n]),o=(new xf).apply([n]),s=e.apply([2*n]);return of(of(r,o),s)}}).className="CustomInit",t)}else a=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,a,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return cr((()=>{const n=null!=t.training&&t.training;if(3!==e.length)throw new rp("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));let a=e[1];const r=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=By({ones:()=>Ei(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=By({ones:()=>Ei(a),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,s=this.recurrentDropoutMask;let i,c,l,u;0<this.dropout&&this.dropout<1&&(e=to(e,o[0]));let h=lf(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(a=to(a,s[0])),h=Jr(h,lf(a,this.recurrentKernel.read())),this.useBias&&(h=pf(h,this.bias.read()));const[d,p,f,m]=Yi(h,4,h.rank-1);i=this.recurrentActivation.apply(d),c=this.recurrentActivation.apply(p),l=Jr(to(c,r),to(i,this.activation.apply(f))),u=this.recurrentActivation.apply(m);const g=to(u,this.activation.apply(l));return[g,g,l]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Kg(this.activation),recurrentActivation:Kg(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Mf(this.kernelInitializer),recurrentInitializer:Mf(this.recurrentInitializer),biasInitializer:Mf(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:$g(this.kernelRegularizer),recurrentRegularizer:$g(this.recurrentRegularizer),biasRegularizer:$g(this.biasRegularizer),activityRegularizer:$g(this.activityRegularizer),kernelConstraint:mm(this.kernelConstraint),recurrentConstraint:mm(this.recurrentConstraint),biasConstraint:mm(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}My.className="LSTMCell",ho(My);class Py extends Ay{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new My(e),super(e)}call(e,t){return cr((()=>{null!=this.cell.dropoutMask&&(lr(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(lr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,a=null==t?null:t.training,r=null==t?null:t.initialState;return super.call(e,{mask:n,training:a,initialState:r})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}Py.className="LSTM",ho(Py);class zy extends _y{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return cr((()=>{let n=e.slice(1);const a=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?a.push(n.splice(0,e.stateSize.length)):a.push(n.splice(0,1));a.reverse();const r=[];let o;for(let s=0;s<this.cells.length;++s){const i=this.cells[s];n=a[s],o=0===s?[e[0]].concat(n):[o[0]].concat(n),o=i.call(o,t),r.push(o.slice(1))}n=[];for(const e of r.slice().reverse())n.push(...e);return[o[0]].concat(n)}))}build(e){let t;zf(e)&&(e=e[0]),this.cells.forEach(((n,a)=>{Vp("RNNCell_".concat(a),(()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map((e=>({className:e.getClassName(),config:e.getConfig()})))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=[];for(const r of t.cells)a.push(Rm(r,n));return new e({cells:a})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return Hf(e)}setWeights(e){const t=[];for(const n of this.cells){const a=n.weights.length,r=e.splice(a);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],r[e]])}Kf(t)}}function By(e){const{ones:t,rate:n,training:a=!1,count:r=1,dropoutFunc:o}=e,s=()=>null!=o?o(t(),n):ff(t(),n),i=()=>mf(s,t,a);if(!r||r<=1)return ur(i().clone());return Array(r).fill(void 0).map(i).map((e=>ur(e.clone())))}zy.className="StackedRNNCells",ho(zy);var Wy=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};class Uy extends Ay{constructor(e){if(e.unroll)throw new op("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new op("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new qf({ndim:5})]}call(e,t){return cr((()=>{if(null!=this.cell.dropoutMask&&(lr(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(lr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new rp("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,a=null==t?null:t.training,r=null==t?null:t.initialState;return super.call(e,{mask:n,training:a,initialState:r})}))}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return cr((()=>{const{stateSize:t}=this.cell,n=e.shape,a=this.computeSingleOutputShape(n),r=Ti([a[0],...a.slice(2)]);return Array.isArray(t)?Array(t.length).fill(r):[r]}))}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];cr((()=>{if(!this.stateful)throw new np("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,a=this.computeSingleOutputShape(n),r=[a[0],...a.slice(2)];if(null==n[0])throw new rp("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>Ti(r))):this.states_=[Ti(r)];else if(null==e)lr(this.states_),null!=this.keptStates&&(lr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>Ti(r))):this.states_[0]=Ti(r);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new rp("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));t?this.keptStates.push(this.states_.slice()):lr(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],a=r;if(!b(n.shape,a))throw new rp("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(a,", received shape=").concat(n.shape));this.states_[t]=n}}this.states_=this.states_.map((e=>ur(e.clone())))}))}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:a,padding:r,strides:o,dilationRate:s}=this.cell,i="channelsFirst"===t,c=e[i?3:2],l=e[i?4:3],u=ly(c,a[0],r,o[0],s[0]),h=ly(l,a[1],r,o[1],s[1]);return[...e.slice(0,2),...i?[n,u,h]:[u,h,n]]}}Uy.className="ConvRNN2D";class Vy extends My{constructor(e){const{filters:t,kernelSize:n,strides:a,padding:r,dataFormat:o,dilationRate:s}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,Ip(this.filters,"filters"),this.kernelSize=cy(n,2,"kernelSize"),this.kernelSize.forEach((e=>Ip(e,"kernelSize"))),this.strides=cy(a||1,2,"strides"),this.strides.forEach((e=>Ip(e,"strides"))),this.padding=r||"valid",zp(this.padding),this.dataFormat=o||"channelsLast",Pp(this.dataFormat),this.dilationRate=cy(s||1,2,"dilationRate"),this.dilationRate.forEach((e=>Ip(e,"dilationRate")))}build(e){var t;e=Uf(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new rp("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));const a=e[n],r=this.kernelSize.concat([a,4*this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,a=this.filters;e=new((t=class extends bf{apply(e,t){return rf([n.apply([a]),Ci([a]),n.apply([2*a])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return cr((()=>{if(3!==e.length)throw new rp("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=t.training||!1,a=e[0],r=e[1],o=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=By({ones:()=>Ei(a),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,i=(e,t,n)=>t&&t[n]?to(t[n],e):e;let c=i(a,s,0),l=i(a,s,1),u=i(a,s,2),h=i(a,s,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=By({ones:()=>Ei(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const d=this.recurrentDropoutMask;let p=i(r,d,0),f=i(r,d,1),m=i(r,d,2),g=i(r,d,3);const[y,b,v,x]=Yi(this.kernel.read(),4,3),[w,k,S,I]=this.useBias?Yi(this.bias.read(),4):[null,null,null,null];c=this.inputConv(c,y,w,this.padding),l=this.inputConv(l,b,k,this.padding),u=this.inputConv(u,v,S,this.padding),h=this.inputConv(h,x,I,this.padding);const[T,C,E,N]=Yi(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,T),f=this.recurrentConv(f,C),m=this.recurrentConv(m,E),g=this.recurrentConv(g,N);const R=this.recurrentActivation.apply(Jr(c,p)),A=this.recurrentActivation.apply(Jr(l,f)),_=Jr(to(A,o),to(R,this.activation.apply(Jr(u,m)))),O=to(this.recurrentActivation.apply(Jr(h,g)),this.activation.apply(_));return[O,O,_]}))}getConfig(){const e=super.getConfig(),{units:t}=e,n=Wy(e,["units"]),a={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),a)}inputConv(e,t,n,a){const r=Ds(e,t,this.strides,a||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?pf(r,n,this.dataFormat):r}recurrentConv(e,t){return Ds(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}Vy.className="ConvLSTM2DCell",ho(Vy);class Gy extends Uy{constructor(e){const t=new Vy(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}Gy.className="ConvLSTM2D",ho(Gy);class jy extends Jf{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let a=0;a<this.noiseShape.length;++a)n.push(null==this.noiseShape[a]?t[a]:this.noiseShape[a]);return n}call(e,t){return cr((()=>{this.invokeCallHook(e,t);const n=Wf(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,a=this.getNoiseShape(n);return mf((()=>ff(n,this.rate,a,this.seed)),(()=>n),e)}return e}))}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}jy.className="Dropout",ho(jy);class Hy extends jy{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}Hy.className="SpatialDropout1D",ho(Hy);class Ky extends Jf{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Ip(this.units,"units"),this.activation=Yg(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=Pf(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Pf(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=ym(e.kernelConstraint),this.biasConstraint=ym(e.biasConstraint),this.kernelRegularizer=ty(e.kernelRegularizer),this.biasRegularizer=ty(e.biasRegularizer),this.activityRegularizer=ty(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=Uf(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=Uf(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return cr((()=>{this.invokeCallHook(e,t);const n=Wf(e),a=Cp(this.activation.getClassName());let r;return null!=a?r=lf(n,this.kernel.read(),a,this.bias?this.bias.read():null):(r=lf(n,this.kernel.read()),null!=this.bias&&(r=pf(r,this.bias.read())),null!=this.activation&&(r=this.activation.apply(r))),r}))}getConfig(){const e={units:this.units,activation:Kg(this.activation),useBias:this.useBias,kernelInitializer:Mf(this.kernelInitializer),biasInitializer:Mf(this.biasInitializer),kernelRegularizer:$g(this.kernelRegularizer),biasRegularizer:$g(this.biasRegularizer),activityRegularizer:$g(this.activityRegularizer),kernelConstraint:mm(this.kernelConstraint),biasConstraint:mm(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}Ky.className="Dense",ho(Ky);class qy extends Jf{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Uf(e);for(const t of e.slice(1))if(null==t)throw new rp('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],qp(e,1)]}call(e,t){return cr((()=>{this.invokeCallHook(e,t);let n=Wf(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=sc(n,e)}return function(e){if(e.rank<=1)throw new rp("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));const t=[e.shape[0],qp(e.shape,1)];return ws(e,t)}(n)}))}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}qy.className="Flatten",ho(qy);class Yy extends Jf{constructor(e){super(e),this.supportsMasking=!0,this.activation=Yg(e.activation)}call(e,t){return cr((()=>{this.invokeCallHook(e,t);const n=Wf(e);return this.activation.apply(n)}))}getConfig(){const e={activation:Kg(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}Yy.className="Activation",ho(Yy);class Xy extends Jf{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return cr((()=>{return e=Wf(e),t=e,n=this.n,cr((()=>{if(2!==t.shape.length)throw new rp("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return sf(ef(t,1),[1,n,1])}));var t,n}))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}Xy.className="RepeatVector",ho(Xy);class Zy extends Jf{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",a=t.slice();let r=1,o=null;for(let i=0;i<a.length;++i){const e=a[i];if(this.isUnknown(e)){if(null!==o)throw new rp("Can only specifiy one unknown dimension.");o=i}else r*=e}const s=qp(e);if(null!==o){if(0===r||s%r!==0)throw new rp(n);a[o]=s/r}else if(s!==r)throw new rp(n);return a}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return cr((()=>{this.invokeCallHook(e,t);const n=Wf(e),a=n.shape,r=a.slice(0,1).concat(this.fixUnknownDimension(a.slice(1),this.targetShape));return ws(n,r)}))}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}Zy.className="Reshape",ho(Zy);class Qy extends Jf{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));const t=Zp(1,e.dims.length+1);if(!b(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new qf({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=Uf(e)).slice();return this.dims.forEach(((n,a)=>{t[a+1]=e[n]})),t}call(e,t){return sc(Wf(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}Qy.className="Permute",ho(Qy);class Jy extends Jf{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=Wf(e);return rs(Si(n,this.maskValue),-1)}call(e,t){return cr((()=>{this.invokeCallHook(e,t);const n=Wf(e),a=rs(Si(n,this.maskValue),-1,!0);return to(n,Zr(a,n.dtype))}))}}Jy.className="Masking",ho(Jy);class $y extends Jf{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(dp(e.inputLength))}this.inputDim=e.inputDim,Ip(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Ip(this.outputDim,"outputDim"),this.embeddingsInitializer=Pf(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=ty(e.embeddingsRegularizer),this.activityRegularizer=ty(e.activityRegularizer),this.embeddingsConstraint=ym(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return cr((()=>this.maskZero?(e=Wf(e),Si(e,ro(e))):null))}computeOutputShape(e){if(e=Uf(e),null==this.inputLength)return[...e,this.outputDim];const t=dp(this.inputLength);if(t.length!==e.length-1)throw new rp('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));{let n=0;for(let a=0;a<t.length;++a){const r=t[a],o=e[a+1];if(null!=r&&null!=o&&r!==o)throw new rp('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==r&&(t[n]=o),n++}}return[e[0],...t,this.outputDim]}call(e,t){return cr((()=>{this.invokeCallHook(e,t);let n=Wf(e);"int32"!==n.dtype&&(n=$p(n,"int32"));const a=uf(this.embeddings.read(),ws(n,[n.size]));return ws(a,Uf(this.computeOutputShape(n.shape)))}))}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Mf(this.embeddingsInitializer),embeddingsRegularizer:$g(this.embeddingsRegularizer),activityRegularizer:$g(this.activityRegularizer),embeddingsConstraint:mm(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}$y.className="Embedding",ho($y);class eb extends Jf{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new op}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let a=0;a<t.length;++a){const r=e[e.length-t.length+a],o=t[a];if(null==r||null==o||r<0||o<0)n.push(null);else if(1===r)n.push(o);else if(1===o)n.push(r);else{if(r!==o)throw new rp("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(r)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Uf(e)]),e.length<2)throw new rp("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));let t=[];for(const r of e)null!=r&&null!==r[0]&&t.push(r[0]);if(t=xp(t),t.length>1)throw new rp("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));let n=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const t=null==e[r]?null:e[r].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const a=e.map((e=>e.length));-1===e.indexOf(null)&&1===xp(a).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return cr((()=>{if(this.reshapeRequired){const t=[],n=e.map((e=>e.rank));if(-1===n.indexOf(null)){const a=Xp(n);for(let n of e){const e=n.rank;for(let t=0;t<a-e;++t)n=ef(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const o of e){const e=o.rank;if(null==e){const e=o.shape,a=e[0],r=e.slice(1).concat([a]);let s=ws(o,[a].concat(qp(e.slice(1))));s=sc(s,[1,0]),s=ws(s,r),t.push(s),n=!0}else if(e>1){const a=Zp(1,e).concat([0]);t.push(sc(o,a)),n=!0}else t.push(o)}let a=this.mergeFunction(t);const r=a.rank;if(n)if(null==r){const e=a.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));a=ws(sc(ws(a,[-1,t]),[1,0]),n)}else if(r>1){const e=[r-1].concat(Zp(0,r-1));a=sc(a,e)}return a}}return this.mergeFunction(e)}))}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let a=1;a<e.length;++a){const n=null==e[a]?null:e[a].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const a of e)null!=a&&null!==a[0]&&n.push(a[0]);return n=xp(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return cr((()=>{if(null==t)return null;if(!Array.isArray(t))throw new rp("`mask` should be an Array");if(!Array.isArray(e))throw new rp("`inputs` should be an Array");if(t.length!==e.length)throw new rp("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((e=>null==e)))return null;let n=(t=t.map((e=>null==e?e:Ks(e,0))))[0];for(let e=1;e<t.length-1;++e)n=fi(n,t[e]);return n}))}}class tb extends eb{constructor(e){super(e)}mergeFunction(e){return cr((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Jr(t,e[n]);return t}))}}tb.className="Add",ho(tb);class nb extends eb{constructor(e){super(e)}mergeFunction(e){return cr((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=to(t,e[n]);return t}))}}nb.className="Multiply",ho(nb);class ab extends eb{constructor(e){super(e)}mergeFunction(e){return cr((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Jr(t,e[n]);return to(1/e.length,t)}))}}ab.className="Average",ho(ab);class rb extends eb{constructor(e){super(e)}mergeFunction(e){return cr((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Io(t,e[n]);return t}))}}rb.className="Maximum",ho(rb);class ob extends eb{constructor(e){super(e)}mergeFunction(e){return cr((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=xi(t,e[n]);return t}))}}ob.className="Minimum",ho(ob);class sb extends eb{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new rp("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const a of e)if(null!=a){t=!1;break}if(t)return;const n=[];for(let a=0;a<e.length;++a){const t=e[a].slice();t.splice(this.axis,1);let r=!1;for(const e of n)if(b(e,t)){r=!0;break}r||n.push(t)}if(n.length>1)throw new rp("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return cr((()=>rf(e,this.axis)))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new rp("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),a=this.axis<0?n.length+this.axis:this.axis;for(const r of t.slice(1)){if(null==n[a]||null==r[a]){n[a]=null;break}n[a]+=r[a]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new rp("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new rp("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new rp("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return cr((()=>{let n=!0;if(t.forEach((e=>{null==e||(n=!1)})),n)return null;const a=[];for(let o=0;o<e.length;++o)null==t[o]?a.push(Zr(Ei(e[o]),"bool")):t[o].rank<e[o].rank?a.push(Ks(t[o],-1)):a.push(t[o]);const r=Rs(a,this.axis);return as(r,-1,!1)}))}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function ib(e,t){for(;e<0;)e+=t;return e}sb.className="Concatenate",ho(sb);class cb extends eb{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){f(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new op("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(t,n);if(t[a[0]]!==n[a[1]])throw new rp("Dimension incompatibility: "+"".concat(t[a[0]]," !== ").concat(n[a[1]]))}mergeFunction(e){if(2!==e.length)throw new rp("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));let t,n=e[0],a=e[1];return t=Array.isArray(this.axes)?this.axes.map(((t,n)=>ib(t,e[n].shape.length))):[ib(this.axes,n.shape.length),ib(this.axes,a.shape.length)],this.normalize&&(n=Am(n,t[0]),a=Am(a,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new op("batchDot is not implemented for tensors of 4D or higher rank yet");if(f(e.shape.length>=2,(()=>"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length))),f(e.shape.length>=2,(()=>"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length))),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new op("batchDot is not implemented for complex64-type Tensors yet.");const a=e.shape.length,r=t.shape.length;null==n&&(n=[a-1,r-2]);const o=n;return cr((()=>{let n,s;if(a>r){n=a-r;const e=[];for(let t=0;t<n;++t)e.push(1);t=ws(t,t.shape.concat(e))}else if(r>a){n=r-a;const t=[];for(let e=0;e<n;++e)t.push(1);e=ws(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)s=o[0]===o[1]?ai(to(e,t),o[0]):ai(to(sc(e,[1,0]),t),o[1]);else{const n=o[0]!==e.shape.length-1,a=o[1]===t.shape.length-1;s=mi(e,t,n,a)}if(n>0){let e;e=a>r?a+r-3:a-1;const t=[];for(let a=e;a<e+n;++a)t.push(a);s=Xi(s,t)}return 1===s.shape.length&&(s=Ks(s,1)),s}))}(n,a,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[ib(this.axes,e.length),ib(this.axes,t.length)],n}computeOutputShape(e){f(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new op("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(t,n);t.splice(a[0],1),n.splice(a[1],1),n.splice(0,1);const r=t.concat(n);return 1===r.length&&r.push(1),r}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}cb.className="Dot",ho(cb);class lb extends Jf{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return cr((()=>{this.invokeCallHook(e,t);const n=Wf(e);return mf((()=>Jr(cf(n.shape,0,this.stddev),n)),(()=>n),t.training||!1)}))}}lb.className="GaussianNoise",ho(lb);class ub extends Jf{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return cr((()=>{this.invokeCallHook(e,t);const n=Wf(e);if(this.rate>0&&this.rate<1){return mf((()=>{const e=Math.sqrt(this.rate/(1-this.rate));return to(n,cf(n.shape,1,e))}),(()=>n),t.training||!1)}return n}))}}ub.className="GaussianDropout",ho(ub);class hb extends Jf{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Wf(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return cr((()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),a=()=>{const t=Wf(e),a=-1.7580993408473766;let r=Js(Di(n),this.rate);r=$p(r,"float32");const o=((1-this.rate)*(1+this.rate*a**2))**-.5,s=-o*a*this.rate,i=Jr(to(t,r),to(Jr(r,-1),a));return Jr(to(i,o),s)};return mf(a,(()=>Wf(e)),t.training||!1)}return e}))}}function db(e,t,n,a,r){let o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)o=Ts(e,t,n,a,r,s);else if(3===e.rank)o=Cs(e,t,n,a,r,s);else{if(4!==e.rank)throw new op("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");o=Es(e,t,n,a,r,s)}return o}function pb(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return b(a.slice().sort(),Zp(0,e.rank-1))?function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return cr((()=>{const o=wi(e,a),s=o.mean,i=o.variance;return[db(e,s,i,n,t,r),s,i]}))}(e,t,n,a,r):function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return cr((()=>{const o=wi(e,a),s=o.mean,i=o.variance,c=[];for(const t of Zp(0,e.rank))-1!==a.indexOf(t)?c.push(1):c.push(e.shape[t]);const l=ws(s,c),u=ws(i,c),h=null==t?null:ws(t,c),d=null==n?null:ws(n,c);return[db(e,l,u,d,h,r),s,i]}))}(e,t,n,a,r)}hb.className="AlphaDropout",ho(hb);class fb extends Jf{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=Pf(e.betaInitializer||"zeros"),this.gammaInitializer=Pf(e.gammaInitializer||"ones"),this.movingMeanInitializer=Pf(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Pf(e.movingVarianceInitializer||"ones"),this.betaConstraint=ym(e.betaConstraint),this.gammaConstraint=ym(e.gammaConstraint),this.betaRegularizer=ty(e.betaRegularizer),this.gammaRegularizer=ty(e.gammaRegularizer)}build(e){e=Uf(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new rp("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new qf({ndim:e.length,axes:{[t]:n}})];const a=[n];this.scale&&(this.gamma=this.addWeight("gamma",a,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",a,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",a,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",a,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return cr((()=>{const n=null!=t.training&&t.training,a=Wf(e),r=a.shape,o=r.length,s=Zp(0,o),i=this.axis>=0?this.axis:this.axis+o;s.splice(i,1);const c=cp(1,o);c[i]=r[i];const l=s.slice();l.sort();const u=!b(l,Zp(0,o).slice(0,o-1));if(!n)return(()=>{if(u){const e=ws(this.movingMean.read(),c),t=ws(this.movingVariance.read(),c),n=this.center?ws(this.beta.read(),c):null,r=this.scale?ws(this.gamma.read(),c):null;return db(a,e,t,n,r,this.epsilon)}return db(a,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[h,d,p]=pb(a,this.gamma.read(),this.beta.read(),s,this.epsilon),f=(e,t,n)=>{cr((()=>{const a=1-n,r=e.read(),o=to(bo(r,t),a);e.write(bo(r,o))}))};return(()=>{f(this.movingMean,d,this.momentum),f(this.movingVariance,p,this.momentum)})(),h}))}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Mf(this.betaInitializer),gammaInitializer:Mf(this.gammaInitializer),movingMeanInitializer:Mf(this.movingMeanInitializer),movingVarianceInitializer:Mf(this.movingVarianceInitializer),betaRegularizer:$g(this.betaRegularizer),gammaRegularizer:$g(this.gammaRegularizer),betaConstraint:mm(this.betaConstraint),gammaConstraint:mm(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}fb.className="BatchNormalization",ho(fb);class mb extends Jf{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received ".concat(this.axis))}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(this.axis)));for(const e of this.axis)if(!Number.isInteger(e))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(this.axis)))}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=Pf(e.betaInitializer||"zeros"),this.gammaInitializer=Pf(e.gammaInitializer||"ones"),this.betaRegularizer=ty(e.betaRegularizer),this.gammaRegularizer=ty(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=Uf(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=t);for(const r of this.axis)if(r<0||r>=t)throw new Error("Invalid axis: ".concat(r));if(this.axis.length!==xp(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));const n=this.axis.map((t=>e[t])),a=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,a):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,a):this.beta=null,this.built=!0}call(e,t){const n=Wf(e),a=n.shape,r=a.length;return cr((()=>{let{mean:e,variance:t}=wi(n,this.axis,!0);const o=cp(1,r);for(const n of this.axis)o[n]=a[n];const s=e=>null!=e&&e.shape.length!==r?ws(e,o):e;let i=this.scale?s(this.gamma.read()):null,c=this.center?s(this.beta.read()):null;const l=[],u=[];for(let n=0;n<r;++n)-1!==this.axis.indexOf(n)?(l.push(a[n]),u.push(1)):(l.push(1),u.push(a[n]));return e=qs(e,l),t=qs(t,l),null!=i&&(i=qs(i,u)),null!=c&&(c=qs(c,u)),db(n,e,t,c,i,this.epsilon)}))}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Mf(this.betaInitializer),gammaInitializer:Mf(this.gammaInitializer),betaRegularizer:$g(this.betaRegularizer),gammaRegularizer:$g(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}mb.className="LayerNormalization",ho(mb);class gb extends Jf{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new rp("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));let t,n;if("number"===typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new rp("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(t=e.padding[0],2!==e.padding[1].length)throw new rp("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new qf({ndim:4})]}computeOutputShape(e){let t,n;return e=Uf(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return cr((()=>{return t=Wf(e),n=this.padding,a=this.dataFormat,cr((()=>{if(4!==t.rank)throw new rp("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new rp("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a="channelsLast"),"channelsLast"!==a&&"channelsFirst"!==a)throw new rp("Unknown data format: ".concat(a,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");let e;return e="channelsFirst"===a?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],Ni(t,e)}));var t,n,a}))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function yb(e,t,n,a,r,o){return cr((()=>{let s;Pp(r),Bp(o),zp(a),null==n&&(n=[1,1]),null==a&&(a="valid"),null==r&&(r="channelsLast"),null==o&&(o="max"),e=hy(e,r);const i="same"===a?"same":"valid";return s="max"===o?gi(e,t,n,i):ks(e,t,n,i),"channelsFirst"===r&&(s=sc(s,[0,3,1,2])),s}))}function bb(e,t,n,a,r,o){return cr((()=>{let s;Pp(r),Bp(o),zp(a),null==n&&(n=[1,1,1]),null==a&&(a="valid"),null==r&&(r="channelsLast"),null==o&&(o="max"),e=dy(e,r);const i="same"===a?"same":"valid";return s="max"===o?yi(e,t,n,i):Ss(e,t,n,i),"channelsFirst"===r&&(s=sc(s,[0,4,1,2,3])),s}))}gb.className="ZeroPadding2D",ho(gb);class vb extends Jf{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"===typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new rp("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));this.poolSize=e.poolSize}if(Ip(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"===typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new rp("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));this.strides=e.strides}Ip(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,zp(this.padding),this.inputSpec=[new qf({ndim:3})]}computeOutputShape(e){const t=ly((e=Uf(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return cr((()=>{this.invokeCallHook(e,t),e=ef(Wf(e),2);const n=this.poolingFunction(Wf(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Xi(n,[2])}))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class xb extends vb{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return Pp(r),zp(a),yb(e,t,n,a,r,"max")}}xb.className="MaxPooling1D",ho(xb);class wb extends vb{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return Pp(r),zp(a),yb(e,t,n,a,r,"avg")}}wb.className="AveragePooling1D",ho(wb);class kb extends Jf{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new rp("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides];Ip(this.poolSize,"poolSize"),Ip(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Pp(this.dataFormat),zp(this.padding),this.inputSpec=[new qf({ndim:4})]}computeOutputShape(e){e=Uf(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=ly(t,this.poolSize[0],this.padding,this.strides[0]),n=ly(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return cr((()=>(this.invokeCallHook(e,t),this.poolingFunction(Wf(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Sb extends kb{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return Pp(r),zp(a),yb(e,t,n,a,r,"max")}}Sb.className="MaxPooling2D",ho(Sb);class Ib extends kb{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return Pp(r),zp(a),yb(e,t,n,a,r,"avg")}}Ib.className="AveragePooling2D",ho(Ib);class Tb extends Jf{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new rp("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Ip(this.poolSize,"poolSize"),Ip(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Pp(this.dataFormat),zp(this.padding),this.inputSpec=[new qf({ndim:5})]}computeOutputShape(e){e=Uf(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],a="channelsFirst"===this.dataFormat?e[4]:e[3];return t=ly(t,this.poolSize[0],this.padding,this.strides[0]),n=ly(n,this.poolSize[1],this.padding,this.strides[1]),a=ly(a,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,a]:[e[0],t,n,a,e[4]]}call(e,t){return cr((()=>(this.invokeCallHook(e,t),this.poolingFunction(Wf(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Cb extends Tb{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return Pp(r),zp(a),bb(e,t,n,a,r,"max")}}Cb.className="MaxPooling3D",ho(Cb);class Eb extends Tb{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return Pp(r),zp(a),bb(e,t,n,a,r,"avg")}}Eb.className="AveragePooling3D",ho(Eb);class Nb extends Jf{constructor(e){super(e),this.inputSpec=[new qf({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new op}}class Rb extends Nb{constructor(e){super(e||{})}call(e,t){return cr((()=>{const t=Wf(e);return bi(t,1)}))}}Rb.className="GlobalAveragePooling1D",ho(Rb);class Ab extends Nb{constructor(e){super(e||{})}call(e,t){return cr((()=>{const t=Wf(e);return ni(t,1)}))}}Ab.className="GlobalMaxPooling1D",ho(Ab);class _b extends Jf{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Pp(this.dataFormat),this.inputSpec=[new qf({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new op}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Ob extends _b{call(e,t){return cr((()=>{const t=Wf(e);return"channelsLast"===this.dataFormat?bi(t,[1,2]):bi(t,[2,3])}))}}Ob.className="GlobalAveragePooling2D",ho(Ob);class Fb extends _b{call(e,t){return cr((()=>{const t=Wf(e);return"channelsLast"===this.dataFormat?ni(t,[1,2]):ni(t,[2,3])}))}}Fb.className="GlobalMaxPooling2D",ho(Fb);class Db extends Jf{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=Rm(t.layer,n);delete t.layer;const r={layer:a};return Object.assign(r,t),new e(r)}}class Lb extends Db{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=Uf(e)).length<3)throw new rp("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=Uf(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),a=e[1];return[n[0],a].concat(n.slice(1))}call(e,t){return cr((()=>Ry(((e,n)=>[Wf(this.layer.call(e,t)),[]]),e=Wf(e),[],!1,null,null,!1,!0)[1]))}}Lb.className="TimeDistributed",ho(Lb);class Mb extends Db{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=Rm(n),t.goBackwards=!0!==t.goBackwards;const a={};if(a.className=e.layer.getClassName(),a.config=t,this.backwardLayer=Rm(a),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){kp(Lp,"BidirectionalMergeMode",e)}(this.mergeMode),e.weights)throw new op("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,a,r=this.forwardLayer.computeOutputShape(e);return Array.isArray(r)&&Array.isArray(r[0])||(r=[r]),this.returnState?(a=r.slice(1),t=r[0]):t=r[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(a).concat(a.slice()):[t].concat(a).concat(a.slice()):hp(n)}apply(e,t){let n=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});const r=Ny(e,n,a,this.numConstants);if(e=r.inputs,n=r.initialState,a=r.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==a)return super.apply(e,t);const o=[],s=[];if(null!=n){const e=n.length;if(e%2>0)throw new rp("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,o.push(...n);const a=n.map((e=>new qf({shape:e.shape})));this.forwardLayer.stateSpec=a.slice(0,e/2),this.backwardLayer.stateSpec=a.slice(e/2),s.push(...a)}if(null!=a)throw new op("Support for constants in Bidirectional layers is not implemented yet.");const i=o[0]instanceof Yf;for(const c of o)if(c instanceof Yf!==i)throw new rp("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(i){const n=[e].concat(o),a=this.inputSpec.concat(s),r=this.inputSpec;this.inputSpec=a;const i=super.apply(n,t);return this.inputSpec=r,i}return super.apply(e,t)}call(e,t){return cr((()=>{const n=t.initialState;let a,r,o,s;if(null==n)a=this.forwardLayer.call(e,t),r=this.backwardLayer.call(e,t);else{const o=n.slice(0,n.length/2),s=n.slice(n.length/2);a=this.forwardLayer.call(e,Object.assign(t,{initialState:o})),r=this.backwardLayer.call(e,Object.assign(t,{initialState:s}))}return this.returnState&&(Array.isArray(a)&&(o=a.slice(1).concat(r.slice(1))),a=a[0],r=r[0]),this.returnSequences&&(r=Pi(r,1)),"concat"===this.mergeMode?s=rf([a,r]):"sum"===this.mergeMode?s=Jr(a,r):"ave"===this.mergeMode?s=to(.5,Jr(a,r)):"mul"===this.mergeMode?s=to(a,r):null==this.mergeMode&&(s=[a,r]),this.returnState?null==this.mergeMode?s.concat(o):[s].concat(o):s}))}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Vp(this.forwardLayer.name,(()=>{this.forwardLayer.build(e)})),Vp(this.backwardLayer.name,(()=>{this.backwardLayer.build(e)})),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map((e=>null));return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=Rm(t.layer);if(delete t.layer,null!=t.numConstants)throw new op("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const a=t;return a.layer=n,new e(a)}}Mb.className="Bidirectional",ho(Mb);class Pb extends Jf{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return cr((()=>("float32"!==(e=Wf(e)).dtype&&(e=$p(e,"float32")),Jr(to(e,this.scale),this.offset))))}}Pb.className="Rescaling",ho(Pb);const{resizeBilinear:zb,cropAndResize:Bb}=il;class Wb extends Jf{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,a,r,o,s,i){return cr((()=>{let c,l=!1;const u=[t/o,n/s,(a+t)/o,(r+n)/s],h=[];3===e.rank?(l=!0,c=Zi([e])):c=e;for(let e=0;e<c.shape[0];e++)h.push(u);const d=rr(h,[h.length,4]),p=Li(0,h.length,1,"int32"),f=Bb(c,d,p,[a,r],"nearest");return $p(l?Wf(tc(f)):f,i)}))}upsize(e,t,n,a){return cr((()=>$p(zb(e,[t,n]),a)))}call(e,t){return cr((()=>{const t=Wf(e),n=t.dtype,a=t.shape,r=a[a.length-3],o=a[a.length-2];let s=0;r!==this.height&&(s=Math.floor((r-this.height)/2));let i=0;return o!==this.width&&(i=Math.floor((o-this.width)/2),0===i&&(i=1)),s>=0&&i>=0?this.centerCrop(t,s,i,this.height,this.width,r,o,n):this.upsize(e,this.height,this.width,n)}))}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=Uf(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}Wb.className="CenterCrop",ho(Wb);class Ub extends Jf{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=Uf(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return cr((()=>{let n;if("int32"!==(e=Wf(e)).dtype&&(e=$p(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==this.outputMode)throw new rp("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));n=Wf(t.countWeights)}const a=ni(e),r=vi(e),o=Qs(this.numTokens,a).bufferSync().get(0),s=Js(r,0).bufferSync().get(0);if(!o||!s)throw new rp("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(this.numTokens));return function(e,t,n,a){let r=Wf(e);if("int32"!==r.dtype&&(r=$p(r,"int32")),"int"===t)return r;const o=r.shape;if(0===r.rank&&(r=Ks(r,-1)),"oneHot"===t&&1!==r.shape[r.shape.length-1]&&(r=Ks(r,-1)),r.rank>2)throw new rp("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(o)+" which would result in output rank ".concat(r.rank,"."));const s=["multiHot","oneHot"].includes(t),i=r;let c;if(c=Us(i,"undefined"!==typeof a&&"count"===t?a:[],n,s),"tfIdf"!==t)return c;if(a)return to(c,a);throw new rp("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)}))}}Ub.className="CategoryEncoding",ho(Ub);const Vb=new Set(["bilinear","nearest"]);class Gb extends Jf{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!Vb.has(e.interpolation))throw new rp("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){const t=(e=Uf(e))[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return cr((()=>{const t=[this.height,this.width];if("bilinear"===this.interpolation)return il.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return il.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error("Interpolation is ".concat(this.interpolation," but only ").concat([...Vb]," are supported"))}))}}Gb.className="Resizing",ho(Gb);class jb{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}jb.className="RandomSeed";class Hb extends Jf{constructor(e){super(e),this.randomGenerator=new jb(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}Hb.className="BaseRandomLayer";const Kb=new Set(["bilinear","nearest"]);class qb extends Hb{constructor(e){super(e);const{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new rp("Invalid factor: ".concat(this.factor,". Must be positive number or tuple of 2 numbers"));this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new rp("factor must have values larger than -1. Got: ".concat(this.factor));if(this.widthUpper<this.widthLower)throw new rp("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(this.widthUpper,".\n        Got lower bound: ").concat(this.widthLower,"\n      "));if(n){if(!Kb.has(n))throw new rp("Invalid interpolation parameter: ".concat(n," is not implemented"));this.interpolation=n}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=Uf(e))[2];return[this.imgHeight,-1,t]}call(e,t){return cr((()=>{const t=Wf(e);this.imgHeight=t.shape[t.shape.length-3];const n=t.shape[t.shape.length-2];this.widthFactor=Di([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*n;a=Math.round(a);const r=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return il.resizeBilinear(e,r);case"nearest":return il.resizeNearestNeighbor(e,r);default:throw new Error("Interpolation is ".concat(this.interpolation,"\n          but only ").concat([...Kb]," are supported"))}}))}}qb.className="RandomWidth",ho(qb);var Yb,Xb;G().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(Yb||(Yb={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(Xb||(Xb={}));Error;new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Zb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(a.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const r=t(e);if(r.recurse&&null!==r.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(r.recurse){if(ev(e)){const r=Array.isArray(e)?[]:{};a.add(e);for(const o in e){const s=Zb(e[o],t,n,a);r[o]=s}return a.delete(e),e.__proto__&&(r.__proto__=e.__proto__),r}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,r.value),r.value}function Qb(e){return Jb(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:$b)}function Jb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const a=e[0];if(n.has(a))throw new Error("Circular references are not supported.");const r=t(e);if(r.recurse&&null!==r.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(r.recurse){if(ev(a)){const r=Array.isArray(a)?[]:{};n.add(a);for(const o in a){const a=Jb(e.map((e=>e[o])),t,n);r[o]=a}return n.delete(a),r}throw new Error("Can't recurse into non-iterable type: ".concat(a))}return r.value}function $b(e){return null===e?null:ev(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function ev(e){let t=!1;if(G().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:a}=n(4222);t=e instanceof a}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof Sa)&&!(e instanceof Promise)&&!t)}function tv(e){return function(e,t){return Zb(e,t)}(e,nv)}function nv(e){return e instanceof Sa?{value:e.clone(),recurse:!1}:ev(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class av{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class rv extends av{constructor(){super(rv.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let a=0;a<n;a++)t[a]=this.get(this.wrap(this.begin+a));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function ov(e){return new lv(e)}function sv(e,t){return new xv(e,t)}rv.INITIAL_CAPACITY=32;class iv{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new gv(this,e)}filter(e){return new fv(this,e)}map(e){return new mv(this,e)}mapAsync(e){return new yv(this,e)}serialMapAsync(e){return new yv(this,e).serial()}flatmap(e){return new vv(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile((e=>!0===e))}rowMajorBatch(e){return new pv(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}columnMajorBatch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$b;return this.rowMajorBatch(e,t).map((e=>Qb(e,n)))}concatenate(e,t){return new xv(new cv([this,e]),t)}take(e){return e<0||null==e?this:new dv(this,e)}skip(e){return e<0||null==e?this:new hv(this,e)}prefetch(e){return new kv(this,e)}shuffle(e,t){return new Sv(this,e,t)}serial(){return new uv(this)}}class cv extends iv{constructor(e){super(),this.items=e,this.trav=0}summary(){return"Array of ".concat(this.items.length," items")}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:tv(e),done:!1}}}class lv extends iv{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message="Error thrown while iterating through a dataset: ".concat(e.message),e}}}class uv extends iv{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Serial")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){return this.upstream.next()}}class hv extends iv{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Skip")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;lr(e.value)}return this.upstream.next()}}class dv extends iv{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return"".concat(this.upstream.summary()," -> Take")}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class pv extends iv{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class fv extends iv{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Filter")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;lr(e.value)}}}class mv extends iv{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Map")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=za(e.value),n=this.transform(e.value),a=za(n);for(const r of t)Pa(r,a)||r.dispose();return{value:n,done:!1}}}class gv extends iv{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> handleErrors")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class yv extends iv{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> AsyncMap")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=za(e.value),n=await this.transform(e.value),a=za(n);for(const r of t)Pa(r,a)||r.dispose();return{value:n,done:!1}}}class bv extends iv{constructor(){super(),this.outputQueue=new rv,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class vv extends bv{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Flatmap")}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=za(e.value),n=this.transform(e.value),a=za(n);this.outputQueue.pushAll(n);for(const r of t)Pa(r,a)||r.dispose();return!0}}class xv extends iv{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var wv;!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(wv||(wv={}));class kv extends iv{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new av(t)}summary(){return"".concat(this.upstream.summary()," -> Prefetch")}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class Sv extends kv{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=Ai.alea(n||aa().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class Iv{constructor(){this.size=null}batch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this;let a;return f(e>0,(()=>"batchSize needs to be positive, but it is\n      ".concat(e))),a=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),Tv((async()=>(await n.iterator()).columnMajorBatch(e,t,Cv)),a)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,Tv((async()=>(await t.iterator()).concatenate(await e.iterator())),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,Tv((async()=>(await t.iterator()).filter((t=>cr((()=>e(t)))))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return Tv((async()=>(await t.iterator()).map((t=>cr((()=>e(t)))))),this.size)}mapAsync(e){const t=this;return Tv((async()=>(await t.iterator()).mapAsync(e)),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return Tv((async()=>(await t.iterator()).prefetch(e)),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,Tv((async()=>sv(ov((async()=>({value:await t.iterator(),done:!1}))).take(e))),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,Tv((async()=>(await t.iterator()).skip(e)),n)}shuffle(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));const a=this,r=Ai.alea(t||aa().toString());return Tv((async()=>{let t=r.int32();return n&&(t+=r.int32()),(await a.iterator()).shuffle(e,t.toString())}),this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,Tv((async()=>(await t.iterator()).take(e)),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function Tv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new class extends Iv{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function Cv(e){if(null===e)return null;const t=e[0];if(null==(n=t)||function(e){return null===e||"object"!==typeof e&&"function"!==typeof e}(n)||Array.isArray(n)||"object"===typeof n&&n instanceof Sa||sa(n)){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Sa?Zi(e):rr(e)}(e),recurse:!1}}var n;return{value:null,recurse:!0}}Iv.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");class Ev{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Nv{refCount(e){return Rv("refCount")}incRef(e){return Rv("incRef")}timerAvailable(){return!0}time(e){return Rv("time")}read(e){return Rv("read")}readSync(e){return Rv("readSync")}readToGPU(e,t){return Rv("readToGPU")}numDataIds(){return Rv("numDataIds")}disposeData(e,t){return Rv("disposeData")}write(e,t,n){return Rv("write")}move(e,t,n,a,r){return Rv("move")}createTensorFromGPUData(e,t,n){return Rv("createTensorFromGPUData")}memory(){return Rv("memory")}floatPrecision(){return Rv("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return Rv("dispose")}}function Rv(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function Av(e,t,n){return Math.max(e,Math.min(t,n))}function _v(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function Ov(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function Fv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Ov(Lv(e,t),(()=>n+" Shapes ".concat(e," and ").concat(t," must match")))}function Dv(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function Lv(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Mv(e){return e%1===0}function Pv(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function zv(e,t){const n=t.length;return Ov((e=null==e?t.map(((e,t)=>t)):[].concat(e)).every((e=>e>=-n&&e<n)),(()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e))),Ov(e.every((e=>Mv(e))),(()=>"All values in axis param must be integers but "+"got axis ".concat(e))),e.map((e=>e<0?n+e:e))}function Bv(e,t){return Wv(e,t)}function Wv(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function Uv(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function Vv(e){return"string"===typeof e||e instanceof String}function Gv(e){return Array.isArray(e)?Gv(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":function(e){return"number"===typeof e}(e)?"float32":Vv(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function jv(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Hv(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let a=t-3;a>=0;--a)n[a]=n[a+1]*e[a+1];return n}function Kv(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new Array;if(1===t.length){const o=t[0]*(a?2:1);for(let t=0;t<o;t++)r[t]=n[e+t]}else{const o=t[0],s=t.slice(1),i=s.reduce(((e,t)=>e*t))*(a?2:1);for(let t=0;t<o;t++)r[t]=Kv(e+t*i,s,n,a)}return r}function qv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const a=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===a)return[];if(a!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return Kv(0,e,t,n)}function Yv(e,t){const n=Xv(e,t);for(let a=0;a<n.length;a++)n[a]=1;return n}function Xv(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function Zv(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return qv(e,new Float32Array(n));if("int32"===t)return qv(e,new Int32Array(n));if("bool"===t)return qv(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function Qv(e){e.forEach((t=>{Ov(Number.isInteger(t)&&t>=0,(()=>"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")))}))}function Jv(e,t,n){if(0===t)return 0;if(1===t)return e[0];let a=e[e.length-1];for(let r=0;r<e.length-1;++r)a+=n[r]*e[r];return a}function $v(e,t,n){if(0===t)return[];if(1===t)return[e];const a=new Array(t);for(let r=0;r<a.length-1;++r)a[r]=Math.floor(e/n[r]),e-=a[r]*n[r];return a[a.length-1]=e,a}function ex(e){return e&&e.then&&"function"===typeof e.then}const tx="tfjsflags";class nx{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=ax,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(rx().getBool("IS_TEST")||rx().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];rx().getBool("IS_TEST")||rx().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(t,".")),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(ex(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(tx in e){e[tx].split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,n)}))}}}function ax(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,a[0],a[1]),a.join("=")})),t}function rx(){return sx}let ox,sx=null;function ix(){if(null==ox){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}ox=e}return ox}function cx(e,t){const n=function(){const e=ix();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const a=t();return n.set(e,a),n.get(e)}}const lx="Acos",ux="Acosh",hx="Add",dx="Asin",px="Asinh",fx="Atan",mx="Atanh",gx="Atan2",yx="BatchMatMul",bx="Bincount",vx="BitwiseAnd",xx="Cast",wx="Ceil",kx="ClipByValue",Sx="Complex",Ix="ComplexAbs",Tx="Concat",Cx="Cosh",Ex="CropAndResize",Nx="Dilation2DBackpropInput",Rx="Dilation2DBackpropFilter",Ax="RealDiv",_x="Einsum",Ox="Elu",Fx="Equal",Dx="Exp",Lx="ExpandDims",Mx="Expm1",Px="Fill",zx="FlipLeftRight",Bx="Floor",Wx="FloorDiv",Ux="Greater",Vx="GreaterEqual",Gx="Identity",jx="IFFT",Hx="Imag",Kx="IsFinite",qx="IsInf",Yx="IsNan",Xx="LeakyRelu",Zx="Less",Qx="LessEqual",Jx="Log",$x="Log1p",ew="LogicalAnd",tw="LogicalNot",nw="LogicalOr",aw="Maximum",rw="Mean",ow="Minimum",sw="Multiply",iw="NotEqual",cw="NonMaxSuppressionV3",lw="NonMaxSuppressionV4",uw="NonMaxSuppressionV5",hw="Pack",dw="Pow",pw="Prelu",fw="Range",mw="Real",gw="Reciprocal",yw="Relu",bw="Reshape",vw="ResizeNearestNeighbor",xw="ResizeBilinear",ww="Relu6",kw="Reverse",Sw="Round",Iw="Rsqrt",Tw="Select",Cw="Selu",Ew="Slice",Nw="Sinh",Rw="Sign",Aw="Sigmoid",_w="Softplus",Ow="Sqrt",Fw="SplitV",Dw="SparseFillEmptyRows",Lw="SparseReshape",Mw="SparseSegmentMean",Pw="SparseSegmentSum",zw="SquaredDifference",Bw="StaticRegexReplace",Ww="StringNGrams",Uw="StringSplit",Vw="StringToHashBucketFast",Gw="Sub",jw="Tanh",Hw="Tile",Kw="Transform",qw="Transpose",Yw="Unpack",Xw="ZerosLike",Zw="Step",Qw="RotateWithOffset";function Jw(){rx().getBool("IS_TEST")||rx().getBool("PROD")||console.warn(...arguments)}const $w=cx("kernelRegistry",(()=>new Map)),ek=cx("gradRegistry",(()=>new Map));function tk(e,t){const n=ok(e,t);return $w.get(n)}function nk(e){return ek.get(e)}function ak(e){const t=$w.entries(),n=[];for(;;){const{done:a,value:r}=t.next();if(a)break;const[o,s]=r,[i]=o.split("_");i===e&&n.push(s)}return n}function rk(e){const{kernelName:t,backendName:n}=e,a=ok(t,n);$w.has(a)&&Jw("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),$w.set(a,e)}function ok(e,t){return"".concat(t,"_").concat(e)}function sk(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}const ik=Jn()||Qn;function ck(e){return ik.fromString(e,!0,16)}const lk=ck("c3a5c85c97cb3127"),uk=ck("b492b66fbe98f273"),hk=ck("9ae16a3b2f90404f");function dk(e){return e.xor(e.shru(47))}function pk(e,t,n){const a=e.slice(t,t+n);return ik.fromBytes(Array.from(a),!0,!0)}function fk(e,t){return pk(e,t,8)}function mk(e,t){return pk(e,t,4)}function gk(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function yk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ck("9ddfea08eb382d69"),a=e.xor(t).mul(n);a=a.xor(a.shru(47));let r=t.xor(a).mul(n);return r=r.xor(r.shru(47)),r=r.mul(n),r}function bk(e,t,n,a){return function(e,t,n,a,r,o){r=r.add(e),o=gk(o.add(r).add(a),21);const s=r;return r=(r=r.add(t)).add(n),o=o.add(gk(r,44)),[r.add(a),o.add(s)]}(fk(e,t),fk(e,t+8),fk(e,t+16),fk(e,t+24),n,a)}function vk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=ik.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){const n=hk.add(2*t),a=fk(e,0).add(hk),r=fk(e,t-8);return yk(gk(r,37).mul(n).add(a),gk(a,25).add(r).mul(n),n)}if(t>=4){const n=hk.add(2*t);return yk(mk(e,0).shl(3).add(t),mk(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),a=t+(e[t-1]<<2);return dk(hk.mul(n).xor(lk.mul(a))).mul(hk)}return hk}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=hk.add(2*t),a=fk(e,0).mul(uk),r=fk(e,8),o=fk(e,t-8).mul(n),s=fk(e,t-16).mul(hk);return yk(gk(a.add(r),43).add(gk(o,30)).add(s),a.add(gk(r.add(hk),18)).add(o),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=hk.add(2*t),a=fk(e,0).mul(hk),r=fk(e,8),o=fk(e,t-8).mul(n),s=fk(e,t-16).mul(hk),i=gk(a.add(r),43).add(gk(o,30)).add(s),c=yk(i,a.add(gk(r.add(hk),18)).add(o),n),l=fk(e,16).mul(n),u=fk(e,24),h=i.add(fk(e,t-32)).mul(n),d=c.add(fk(e,t-24)).mul(n);return yk(gk(l.add(u),43).add(gk(h,30)).add(d),l.add(gk(u.add(a),18)).add(h),n)}(e,t);let a=n,r=n.mul(uk).add(113),o=dk(r.mul(hk).add(113)).mul(hk),s=[ik.UZERO,ik.UZERO],i=[ik.UZERO,ik.UZERO];a=a.mul(hk).add(fk(e,0));let c=0;const l=64*(t-1>>6),u=l+(t-1&63)-63;do{a=gk(a.add(r).add(s[0]).add(fk(e,c+8)),37).mul(uk),r=gk(r.add(s[1]).add(fk(e,c+48)),42).mul(uk),a=a.xor(i[1]),r=r.add(s[0]).add(fk(e,c+40)),o=gk(o.add(i[0]),33).mul(uk),s=bk(e,c,s[1].mul(uk),a.add(i[0])),i=bk(e,c+32,o.add(i[1]),r.add(fk(e,c+16))),[o,a]=[a,o],c+=64}while(c!==l);const h=uk.add(o.and(255).shl(1));return c=u,i[0]=i[0].add(t-1&63),s[0]=s[0].add(i[0]),i[0]=i[0].add(s[0]),a=gk(a.add(r).add(s[0]).add(fk(e,c+8)),37).mul(h),r=gk(r.add(s[1]).add(fk(e,c+48)),42).mul(h),a=a.xor(i[1].mul(9)),r=r.add(s[0].mul(9).add(fk(e,c+40))),o=gk(o.add(i[0]),33).mul(h),s=bk(e,c,s[1].mul(h),a.add(i[0])),i=bk(e,c+32,o.add(i[1]),r.add(fk(e,c+16))),[o,a]=[a,o],yk(yk(s[0],i[0],h).add(dk(r).mul(lk)).add(o),yk(s[1],i[1],h).add(a),h)}function xk(e,t){return"string"===t?Sk(e):wk([e],t)}function wk(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Ck(e)),rx().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const a=e[n];if(isNaN(a)||!isFinite(a))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(a,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type ".concat(t))}function kk(){return rx().platform.now()}function Sk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",rx().platform.encode(e,t)}function Ik(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",rx().platform.decode(e,t)}function Tk(e){return null!=rx().platform.isTypedArray?rx().platform.isTypedArray(e):sk(e)}function Ck(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||ex(e)||null==e||Tk(e)&&n)t.push(e);else if(Array.isArray(e)||Tk(e))for(let a=0;a<e.length;++a)Ck(e[a],t,n);else{let a=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(a=Math.max(a,Number(t)));for(let r=0;r<=a;r++)Ck(e[r],t,n)}return t}class Ek{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Rk)}profileKernel(e,t,n){let a;const r=()=>{a=n()};let o;const s=kk();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(r);else{r();for(const e of a)e.dataSync();o=Promise.resolve({kernelMs:kk()-s})}if(rx().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let i=0;i<a.length;i++){const t=a[i];t.data().then((n=>{Nk(n,t.dtype,e)}))}return{kernelName:e,outputs:a,inputs:t,timeMs:o.then((e=>e.kernelMs)),extraInfo:o.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:a,inputs:r,extraInfo:o}=e;n.forEach((e=>{Promise.all([e.data(),a,o]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],r,n[2])}))}))}}function Nk(e,t,n){if("float32"!==t)return!1;for(let a=0;a<e.length;a++){const t=e[a];if(isNaN(t)||!isFinite(t))return console.warn("Found ".concat(t," in the result of '").concat(n,"'")),!0}return!1}class Rk{logKernelProfile(e,t,n,a,r,o){const s="number"===typeof a?Pv("".concat(a,"ms"),9):a.error,i=Pv(e,25),c=t.rank,l=t.size,u=Pv(t.shape.toString(),14);let h="";for(const d in r){const e=r[d];if(null!=e){const n=e.shape||t.shape,a=n.length;h+="".concat(d,": ").concat(a,"D ").concat(a>0?n:""," ")}}console.log("%c".concat(i,"\t%c").concat(s,"\t%c").concat(c,"D ").concat(u,"\t%c").concat(l,"\t%c").concat(h,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}const Ak=20,_k=3,Ok=7;function Fk(e,t,n,a){const r=Hv(t),o=function(e,t,n,a){const r=Dv(t),o=a[a.length-1],s=new Array(o).fill(0),i=t.length,c="complex64"===n?Pk(e):e;if(i>1)for(let l=0;l<r/o;l++){const e=l*o;for(let t=0;t<o;t++)s[t]=Math.max(s[t],Dk(c[e+t],0,n).length)}return s}(e,t,n,r),s=t.length,i=Mk(e,t,n,r,o),c=["Tensor"];return a&&(c.push("  dtype: ".concat(n)),c.push("  rank: ".concat(s)),c.push("  shape: [".concat(t,"]")),c.push("  values:")),c.push(i.map((e=>"    "+e)).join("\n")),c.join("\n")}function Dk(e,t,n){let a;return a=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(Ok))," + ")+"".concat(parseFloat(e[1].toFixed(Ok)),"j"):Vv(e)?"'".concat(e,"'"):"bool"===n?Lk(e):parseFloat(e.toFixed(Ok)).toString(),Pv(a,t)}function Lk(e){return 0===e?"false":"true"}function Mk(e,t,n,a,r){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const s="complex64"===n?2:1,i=t[0],c=t.length;if(0===c){if("complex64"===n){return[Dk(Pk(e)[0],0,n)]}return"bool"===n?[Lk(e[0])]:[e[0].toString()]}if(1===c){if(i>Ak){const t=_k*s;let a=Array.from(e.slice(0,t)),o=Array.from(e.slice((i-_k)*s,i*s));return"complex64"===n&&(a=Pk(a),o=Pk(o)),["["+a.map(((e,t)=>Dk(e,r[t],n))).join(", ")+", ..., "+o.map(((e,t)=>Dk(e,r[i-_k+t],n))).join(", ")+"]"]}return["["+("complex64"===n?Pk(e):Array.from(e)).map(((e,t)=>Dk(e,r[t],n))).join(", ")+"]"]}const l=t.slice(1),u=a.slice(1),h=a[0]*s,d=[];if(i>Ak){for(let t=0;t<_k;t++){const a=t*h,o=a+h;d.push(...Mk(e.slice(a,o),l,n,u,r,!1))}d.push("...");for(let t=i-_k;t<i;t++){const a=t*h,o=a+h;d.push(...Mk(e.slice(a,o),l,n,u,r,t===i-1))}}else for(let m=0;m<i;m++){const t=m*h,a=t+h;d.push(...Mk(e.slice(t,a),l,n,u,r,m===i-1))}const p=2===c?",":"";d[0]="["+(i>0?d[0]+p:"");for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+p;let f=",\n";for(let m=2;m<c;m++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(o?"":f),d}function Pk(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class zk{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=Dv(e),null!=n){const e=n.length;Ov(e===this.size,(()=>"Length of values '".concat(e,"' does not match the size ")+"inferred by the shape '".concat(this.size,"'.")))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Wv(t,this.size),this.strides=Hv(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];0===n.length&&(n=[0]),Ov(n.length===this.rank,(()=>"The number of provided coordinates (".concat(n.length,") must ")+"match the rank (".concat(this.rank,")")));const r=this.locToIndex(n);this.values[r]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let a=0;for(const o of t){if(o<0||o>=this.shape[a]){const e="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(e)}a++}let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=this.strides[o]*t[o];return this.values[r]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return Bk().makeTensor(this.values,this.shape,this.dtype)}}let Bk=null,Wk=null,Uk=null;class Vk{constructor(e,t,n,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Dv(e),this.strides=Hv(e),this.dataId=n,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Wk.buffer(this.shape,this.dtype,e)}bufferSync(){return Wk.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return qv(this.shape,e,"complex64"===this.dtype)}arraySync(){return qv(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=Bk().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map((e=>Ik(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Bk().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Bk().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>Ik(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Bk().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Bk().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Wk.print(this,e)}clone(){return this.throwIfDisposed(),Wk.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Fk(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Wk.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),Bk().makeVariable(this,e,t,n)}}function Gk(){return cx("Tensor",(()=>Vk))}Object.defineProperty(Vk,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),Gk();class jk extends Vk{constructor(e,t,n,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Lv(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));Bk().disposeTensor(this),this.dataId=e.dataId,Bk().incRef(this,null)}dispose(){Bk().disposeVariable(this),this.isDisposedInternal=!0}}var Hk,Kk,qk,Yk,Xk;Object.defineProperty(jk,Symbol.hasInstance,{value:e=>e instanceof Vk&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Hk||(Hk={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Kk||(Kk={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(qk||(qk={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Yk||(Yk={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Xk||(Xk={}));const Zk={float32:Yk,int32:Kk,bool:qk,complex64:Xk};function Qk(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return Zk[e][t]}function Jk(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function $k(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function eS(e,t){if(e.dtype===t.dtype)return[e,t];const n=Qk(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function tS(e){const t=[];return nS(e,t,new Set),t}function nS(e,t,n){if(null==e)return;if(e instanceof Vk)return void t.push(e);if(a=e,!Array.isArray(a)&&"object"!==typeof a)return;var a;const r=e;for(const o in r){const e=r[o];n.has(e)||(n.add(e),nS(e,t,n))}}function aS(e){return null!=e.kernelName}class rS{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class oS{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new rS}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error("The highest priority backend '".concat(e,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(Jw("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Ek(this.backendInstance),!0}setupRegisteredKernels(){ak(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){ak(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{const n=t.factory();if(!n||n instanceof Nv||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,a=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,Jw("Initialization of backend ".concat(e," failed")),Jw(n.stack||n.message)),!1)));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}}catch(pU){return Jw("Initialization of backend ".concat(e," failed")),Jw(pU.stack||pU.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:a,asyncInit:r}=this.initializeBackend(n);if(r||a)return{name:n,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),a=n.backend,r=this.readSync(t),o=a.refCount(t);a.disposeData(t,!0),n.backend=e,e.move(t,r,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((()=>this.startScope(a)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(a){throw t(),a}}nextTensorId(){return oS.nextTensorId++}nextVariableId(){return oS.nextVariableId++}clone(e){const t=iS.runKernel(Gx,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return iS.runKernel(xx,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=tk(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const a=this.backend.numDataIds();let r=0;n.forEach((e=>{r+="complex64"===e.dtype?3:1}));const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-t-r-o;if(s>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(s," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let t,n=[];const a=this.isTapeOn(),r=this.state.numBytes,o=this.state.numTensors;let s,i;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const c=aS(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(aS(e)){const{kernelName:t,inputs:r,attrs:o}=e;null==this.backendName&&this.backend;const c=tk(t,this.backendName);Ov(null!=c,(()=>"Cannot find registered kernel '".concat(t,"' for backend '").concat(this.backendName,"'"))),s=()=>{const e=this.backend.numDataIds();i=c.kernelFunc({inputs:r,attrs:o,backend:this.backend});const s=Array.isArray(i)?i:[i];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,s);const l=s.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(a){const e=this.getTensorsForGradient(t,r,l);n=this.saveTensorsForBackwardMode(e)}return l}}else{const{forwardFunc:t}=e,r=e=>{a&&(n=e.map((e=>this.keep(this.clone(e)))))};s=()=>{const e=this.backend.numDataIds();i=this.tidy((()=>t(this.backend,r)));const n=Array.isArray(i)?i:[i];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,e,n),n}}const{inputs:l,attrs:u}=e,h=aS(e)?null:e.backwardsFunc;let d;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(d=this.profiler.profileKernel(c,l,(()=>s())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),t=d.outputs):t=s()})),a&&this.addTapeNode(c,l,t,h,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-r,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(l).map((e=>null!=l[e]?l[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(i)?t:t[0]}saveTensorsForBackwardMode(e){return e.map((e=>this.keep(this.clone(e))))}getTensorsForGradient(e,t,n){const a=nk(e);if(null!=a){const e=a.inputsToSave||[],r=a.outputsToSave||[];let o;a.saveAllInputs?(Ov(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),o=Object.keys(t).map((e=>t[e]))):o=e.map((e=>t[e]));const s=n.filter(((e,t)=>r[t]));return o.concat(s)}return[]}makeTensor(e,t,n,a){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",a=a||this.backend;let r=e;"string"===n&&Vv(e[0])&&(r=e.map((e=>Sk(e))));const o=a.write(r,t,n),s=new Vk(t,n,o,this.nextTensorId());if(this.trackTensor(s,a),"string"===n){const e=this.state.tensorInfo.get(o),t=function(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}(r);this.state.numBytes+=t-e.bytes,e.bytes=t}return s}makeTensorFromDataId(e,t,n,a){const r={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(r,a)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:a,dtype:r}=e,o=new Vk(a,r,n,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=a&&a!==e.dtype&&(e=e.cast(a));const r=new jk(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[r.name])throw new Error("Variable with name ".concat(r.name," was already registered"));return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Uv(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof jk||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*Uv(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,a,r,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:r},i=nk(e);null!=i&&(a=i.gradFunc),null!=a&&(s.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],a=Xv(e.size,e.dtype);return this.makeTensor(a,e.shape,e.dtype)}return e})),a(e.length>1?e:e[0],r,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=tS(e),n=new Set(t.map((e=>e.id)));for(let r=0;r<this.state.activeScope.track.length;r++){const e=this.state.activeScope.track[r];e.kept||n.has(e.id)||e.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==a.id||this.track(e)}))}gradients(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Ov(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));const r=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));Ov(r instanceof Vk,(()=>"The result y returned by f() must be a tensor."));const o=function(e,t,n){const a={},r={};for(let c=0;c<t.length;c++)a[t[c].id]=!0;for(let c=0;c<e.length;c++){const n=e[c],o=n.inputs;for(const e in o){const s=o[e];let i=!1;for(let e=0;e<t.length;e++)if(a[s.id]){n.outputs.forEach((e=>a[e.id]=!0)),i=!0,r[n.id]=!0;break}if(i)break}}const o={};o[n.id]=!0;const s={};for(let c=e.length-1;c>=0;c--){const t=e[c],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(o[t.outputs[e].id]){for(const e in n)o[n[e].id]=!0,s[t.id]=!0;break}}const i=[];for(let c=0;c<e.length;c++){const t=e[c];if(r[t.id]&&s[t.id]){const e={};for(const r in t.inputs){const n=t.inputs[r];a[n.id]&&(e[r]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,i.push(n)}}return i}(this.state.activeTape,t,r);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[r.id]=null==n?function(e){const t=Yv(Dv(e),"float32");return iS.makeTensor(t,e,"float32")}(r.shape):n,function(e,t,n,a){for(let r=t.length-1;r>=0;r--){const o=t[r],s=[];if(o.outputs.forEach((t=>{const n=e[t.id];null!=n?s.push(n):s.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(o.kernelName,"."));const i=o.gradient(s);for(const t in o.inputs){if(!(t in i))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(i),"."));const r=n((()=>i[t]()));if("float32"!==r.dtype)throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(r.dtype,"'"));const s=o.inputs[t];if(!Lv(r.shape,s.shape))throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(r.shape,"', which does not match ")+"the shape of the input '".concat(s.shape,"'"));if(null==e[s.id])e[s.id]=r;else{const t=e[s.id];e[s.id]=a(t,r),t.dispose()}}}}(e,o,(e=>this.tidy(e)),cS);const a=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:r,grads:a}}))}customGrad(e){var t=this;return Ov(jv(e),(()=>"The f passed in customGrad(f) must be a function.")),function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];let o;Ov(a.every((e=>e instanceof Vk)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const s={};a.forEach(((e,t)=>{s[t]=e}));return t.runKernelFunc({forwardFunc:(t,n)=>(o=e(...a,n),Ov(o.value instanceof Vk,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),Ov(jv(o.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),o.value),backwardsFunc:(e,t)=>{const n=o.gradFunc(e,t),r=Array.isArray(n)?n:[n];Ov(r.length===a.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),Ov(r.every((e=>e instanceof Vk)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const s={};return r.forEach(((e,t)=>{s[t]=()=>e})),s},inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=kk(),n=await this.backend.time(e);return n.wallMs=kk()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new rS;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function sS(){const e=ix();if(null==e._tfengine){const t=new nx(e);e._tfengine=new oS(t)}var t;return t=e._tfengine.ENV,sx=t,function(e){Bk=e}((()=>e._tfengine)),e._tfengine}oS.nextTensorId=0,oS.nextVariableId=0;const iS=sS();function cS(e,t){const n={a:e,b:t};return iS.runKernel(hx,n)}const lS=rx();lS.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),lS.registerFlag("IS_BROWSER",(()=>"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope)),lS.registerFlag("IS_NODE",(()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node)),lS.registerFlag("IS_CHROME",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),lS.registerFlag("IS_SAFARI",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor))),lS.registerFlag("PROD",(()=>!1)),lS.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>lS.getBool("DEBUG"))),lS.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),lS.registerFlag("IS_TEST",(()=>!1)),lS.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>lS.getBool("DEBUG"))),lS.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),lS.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),lS.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));class uS{static join(e){return new uS(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map((e=>Tk(e)?e.buffer:e))).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const a=e[n];n!==e.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const r=t+a.byteLength;this.shards.push({buffer:a,start:t,end:r}),t=r}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error("Could not find start shard for byte ".concat(e));const a=new ArrayBuffer(t-e),r=new Uint8Array(a);let o=0;for(let s=n;s<this.shards.length;s++){const n=this.shards[s],a=e+o-n.start,i=o,c=Math.min(t,n.end)-n.start,l=new Uint8Array(n.buffer,a,c-a);if(r.set(l,i),o+=l.length,t<n.end)break}return a}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,a=e.length;for(;n<=a;){const r=Math.floor((a-n)/2)+n,o=t(e[r]);if(0===o)return r;o<0?a=r:n=r+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}const hS="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function dS(e){return hS?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function pS(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function fS(e,t){let n,a;return null!=e.weightsManifest&&([n,a]=await t(e.weightsManifest)),function(e,t,n){const a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(a.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");a.weightSpecs=t,a.weightData=n}return null!=e.signature&&(a.signature=e.signature),null!=e.userDefinedMetadata&&(a.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(a.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(a.initializerSignature=e.initializerSignature),a}(e,n,a)}function mS(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:dS(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:dS(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new uS(e.weightData).byteLength}}function gS(e){const t=[];for(const n of e)t.push(...n.weights);return t}class yS{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==yS.instance&&(yS.instance=new yS),yS.instance}static registerSaveRouter(e){yS.getInstance().saveRouters.push(e)}static registerLoadRouter(e){yS.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return yS.getHandlers(e,"save")}static getLoadHandlers(e,t){return yS.getHandlers(e,"load",t)}static getHandlers(e,t,n){const a=[];return("load"===t?yS.getInstance().loadRouters:yS.getInstance().saveRouters).forEach((t=>{const r=t(e,n);null!==r&&a.push(r)})),a}}const bS="tensorflowjs",vS="models_store",xS="model_info_store";function wS(){if(!rx().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function kS(e){const t=e.result;t.createObjectStore(vS,{keyPath:"modelPath"}),t.createObjectStore(xS,{keyPath:"modelPath"})}class SS{constructor(e){if(this.indexedDB=wS(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const a=this.indexedDB.open(bS,1);a.onupgradeneeded=()=>kS(a),a.onsuccess=()=>{const r=a.result;if(null==t){const t=r.transaction(vS,"readonly"),a=t.objectStore(vS).get(this.modelPath);a.onsuccess=()=>{if(null==a.result)return r.close(),n(new Error("Cannot find model with path '".concat(this.modelPath,"' ")+"in IndexedDB."));e(a.result.modelArtifacts)},a.onerror=e=>(r.close(),n(a.error)),t.oncomplete=()=>r.close()}else{t.weightData=uS.join(t.weightData);const a=mS(t),s=r.transaction(xS,"readwrite");let i,c,l=s.objectStore(xS);try{i=l.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(o){return n(o)}i.onsuccess=()=>{c=r.transaction(vS,"readwrite");const i=c.objectStore(vS);let u;try{u=i.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:a})}catch(o){return n(o)}u.onsuccess=()=>e({modelArtifactsInfo:a}),u.onerror=e=>{l=s.objectStore(xS);const t=l.delete(this.modelPath);t.onsuccess=()=>(r.close(),n(u.error)),t.onerror=e=>(r.close(),n(u.error))}},i.onerror=e=>(r.close(),n(i.error)),s.oncomplete=()=>{null==c?r.close():c.oncomplete=()=>r.close()}}},a.onerror=e=>n(a.error)}))}}SS.URL_SCHEME="indexeddb://";const IS=e=>{return rx().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(SS.URL_SCHEME)?(t=e.slice(SS.URL_SCHEME.length),new SS(t)):null;var t};yS.registerSaveRouter(IS),yS.registerLoadRouter(IS);class TS{constructor(){this.indexedDB=wS()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(bS,1);n.onupgradeneeded=()=>kS(n),n.onsuccess=()=>{const a=n.result,r=a.transaction(xS,"readonly"),o=r.objectStore(xS).getAll();o.onsuccess=()=>{const t={};for(const e of o.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},o.onerror=e=>(a.close(),t(o.error)),r.oncomplete=()=>a.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(SS.URL_SCHEME)?t.slice(SS.URL_SCHEME.length):t,new Promise(((t,n)=>{const a=this.indexedDB.open(bS,1);a.onupgradeneeded=()=>kS(a),a.onsuccess=()=>{const r=a.result,o=r.transaction(xS,"readwrite"),s=o.objectStore(xS),i=s.get(e);let c;i.onsuccess=()=>{if(null==i.result)return r.close(),n(new Error("Cannot find model with path '".concat(e,"' ")+"in IndexedDB."));{const a=s.delete(e),o=()=>{c=r.transaction(vS,"readwrite");const a=c.objectStore(vS).delete(e);a.onsuccess=()=>t(i.result.modelArtifactsInfo),a.onerror=e=>n(i.error)};a.onsuccess=o,a.onerror=e=>(o(),r.close(),n(i.error))}},i.onerror=e=>(r.close(),n(i.error)),o.oncomplete=()=>{null==c?r.close():c.oncomplete=()=>r.close()}},a.onerror=e=>n(a.error)}))}}const CS="/",ES="tensorflowjs_models",NS="info",RS="model_topology",AS="weight_specs",_S="weight_data",OS="model_metadata";function FS(e){return{info:[ES,e,NS].join(CS),topology:[ES,e,RS].join(CS),weightSpecs:[ES,e,AS].join(CS),weightData:[ES,e,_S].join(CS),modelMetadata:[ES,e,OS].join(CS)}}function DS(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function LS(e){const t=e.split(CS);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(CS)}class MS{constructor(e){if(!rx().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=FS(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),a=mS(e),r=uS.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(hS)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let a=0,r=t.length;a<r;a++)n+=String.fromCharCode(t[a]);return btoa(n)}(r));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:a}}catch(pU){throw DS(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."))}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");t.modelTopology=n;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==a)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");t.weightSpecs=a;const r=this.LS.getItem(this.keys.modelMetadata);if(null!=r){const e=JSON.parse(r);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return t.weightData=function(e){if(hS){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let a=0;a<t.length;++a)n.set([t.charCodeAt(a)],a);return n.buffer}(o),t}}MS.URL_SCHEME="localstorage://";const PS=e=>{return rx().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(MS.URL_SCHEME)?(t=e.slice(MS.URL_SCHEME.length),new MS(t)):null;var t};yS.registerSaveRouter(PS),yS.registerLoadRouter(PS);class zS{constructor(){Ov(rx().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),Ov("undefined"===typeof window||"undefined"!==typeof window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=ES+CS,n=CS+NS;for(let a=0;a<this.LS.length;++a){const r=this.LS.key(a);if(r.startsWith(t)&&r.endsWith(n)){e[LS(r)]=JSON.parse(this.LS.getItem(r))}}return e}async removeModel(e){var t;const n=FS(e=(t=e).startsWith(MS.URL_SCHEME)?t.slice(MS.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error("Cannot find model at path '".concat(e,"'"));const a=JSON.parse(this.LS.getItem(n.info));return DS(n),a}}const BS="://";class WS{constructor(){this.managers={}}static getInstance(){return null==WS.instance&&(WS.instance=new WS),WS.instance}static registerManager(e,t){Ov(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(BS)&&(e=e.slice(0,e.indexOf(BS))),Ov(e.length>0,(()=>"scheme must not be an empty string."));const n=WS.getInstance();Ov(null==n.managers[e],(()=>"A model store manager is already registered for scheme '".concat(e,"'."))),n.managers[e]=t}static getManager(e){const t=WS.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}static getSchemes(){return Object.keys(WS.getInstance().managers)}}class US{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!==typeof window&&rx().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}}),!0))):setTimeout(e,t)}isTypedArray(e){return sk(e)}}if(rx().get("IS_BROWSER")){rx().setPlatform("browser",new US);try{WS.registerManager(MS.URL_SCHEME,new zS)}catch(pU){}try{WS.registerManager(SS.URL_SCHEME,new TS)}catch(pU){}}const VS=()=>n(7448);let GS;class jS{constructor(){this.util=n(3563),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=rx().global.fetch?rx().global.fetch(e,t):(null==GS&&(GS=VS()),GS(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function HS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",Qv(e),new zk(e,t,n)}function KS(e,t){let n=e;if(Tk(e))return"string"===t?[]:[e.length];if(Jk(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if($k(e))return[e.buffer.size/(null==t?4:Uv(t))];if(!Array.isArray(e))return[];const a=[];for(;Array.isArray(n)||Tk(n)&&"string"!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&rx().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&qS(e,a,[]),a}function qS(e,t,n){if(n=n||[],!Array.isArray(e)&&!Tk(e))return void Ov(0===t.length,(()=>"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")));Ov(t.length>0,(()=>"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements"))),Ov(e.length===t[0],(()=>"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")));const a=t.slice(1);for(let r=0;r<e.length;++r)qS(e[r],a,n.concat(r))}function YS(e,t,n,a){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(a,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function XS(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Gk())return YS(a,e.dtype,t,n),e;let r=Gv(e);if("string"!==r&&["bool","int32","float32"].indexOf(a)>=0&&(r=a),YS(a,r,t,n),null==e||!Tk(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const a=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(a,"'"))}const o=KS(e,r);Tk(e)||Array.isArray(e)||(e=[e]);const s="string"!==r?wk(e,r):Ck(e,[],!0);return iS.makeTensor(s,o,r)}rx().get("IS_NODE")&&!rx().get("IS_BROWSER")&&rx().setPlatform("node",new jS);function ZS(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));let n=t[0];const a=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";const r=function(){iS.startScope(n);try{const e=a(...arguments);return ex(e)&&console.error("Cannot return a Promise inside of tidy."),iS.endScope(e),e}catch(e){throw iS.endScope(null),e}};return Object.defineProperty(r,"name",{value:n,configurable:!0}),r}const QS=ZS({cast_:function(e,t){const n=XS(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const a={x:n},r={dtype:t};return iS.runKernel(xx,a,r)}});const JS=ZS({clone_:function(e){const t={x:XS(e,"x","clone","string_or_numeric")};return iS.runKernel(Gx,t)}});sS();function $S(){return iS}function eI(e,t){return iS.tidy(e,t)}function tI(e){tS(e).forEach((e=>e.dispose()))}!function(e){Wk=e}({buffer:HS,cast:QS,clone:JS,print:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}}),function(e){Uk=e}((function(e){rx().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}));const nI=ZS({add_:function(e,t){let n=XS(e,"a","add"),a=XS(t,"b","add");[n,a]=eS(n,a);const r={a:n,b:a};return iS.runKernel(hx,r)}});const aI=ZS({floorDiv_:function(e,t){let n=XS(e,"a","floorDiv"),a=XS(t,"b","floorDiv");[n,a]=eS(n,a);const r={a:n,b:a};return iS.runKernel(Wx,r)}});const rI=ZS({div_:function(e,t){let n=XS(e,"a","div"),a=XS(t,"b","div");if([n,a]=eS(n,a),"int32"===n.dtype&&"int32"===a.dtype)return aI(n,a);const r={a:n,b:a};return iS.runKernel(Ax,r,{})}});const oI=ZS({mul_:function(e,t){let n=XS(e,"a","mul"),a=XS(t,"b","mul");[n,a]=eS(n,a);const r={a:n,b:a};return iS.runKernel(sw,r)}});const sI=ZS({sqrt_:function(e){const t={x:XS(e,"x","sqrt","float32")};return iS.runKernel(Ow,t)}});const iI=ZS({square_:function(e){const t=XS(e,"x","square");return iS.runKernel("Square",{x:t},{})}});const cI=ZS({zerosLike_:function(e){const t={x:XS(e,"x","zerosLike")};return iS.runKernel(Xw,t)}});function lI(e,t,n,a){if(null==a)a=Gv(e);else if("complex64"===a)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if($k(e)||Jk(e)){if("float32"!==a&&"int32"!==a)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(a,"."));return iS.backend.createTensorFromGPUData(e,t||n,a)}if(!Tk(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Qv(t);const e=Dv(t),a=Dv(n);Ov(e===a,(()=>"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(e," values but has ").concat(a)));for(let r=0;r<n.length;++r){const e=n[r],a=r!==n.length-1||e!==Dv(t.slice(r));Ov(n[r]===t[r]||!a,(()=>"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")))}}return Tk(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==a?wk(e,a):Ck(e,[],!0),iS.makeTensor(e,t,a)}function uI(e,t){if((Tk(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Tk(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return lI(e,[],[],t)}const hI=new Map,dI=new Map;class pI{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class fI{constructor(){this.classNameMap={}}static getMap(){return null==fI.instance&&(fI.instance=new fI),fI.instance}static register(e){fI.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function mI(e,t,n){Ov(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),Ov("string"===typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),Ov(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);const a=t+">"+n;return fI.register(e),hI.set(a,e),dI.set(e,a),e}class gI extends pI{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:a,grads:r}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:r[e.name]})));this.applyGradients(e)}else this.applyGradients(r);return tI(r),t?a:(a.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){Ov(jv(e),(()=>"The f passed in variableGrads(f) must be a function")),Ov(null==t||Array.isArray(t)&&t.every((e=>e instanceof jk)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in iS.registeredVariables)t.push(iS.registeredVariables[e])}const a=n?t.filter((e=>!e.trainable)):null,r=t.length;t=t.filter((e=>e.trainable)),Ov(t.length>0,(()=>"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(r," variables is ")+"trainable."));const{value:o,grads:s}=iS.gradients(e,t,null,!0);Ov(s.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),Ov(0===o.rank,(()=>"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(o.rank," tensor")));const i={};return t.forEach(((e,t)=>{null!=s[t]&&(i[e.name]=s[t])})),null!=a&&a.forEach((e=>i[e.name]=null)),{value:o,grads:i}}(e,t)}dispose(){null!=this.iterations_&&tI(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:uI(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()))}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(gI,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});function yI(e,t,n){Qv(e);const a={shape:e,value:t,dtype:n=n||Gv(t)};return iS.runKernel(Px,{},a)}const bI=ZS({pow_:function(e,t){let n=XS(e,"base","pow"),a=XS(t,"exp","pow");[n,a]=eS(n,a);const r={a:n,b:a};return iS.runKernel(dw,r)}});const vI=ZS({sub_:function(e,t){let n=XS(e,"a","sub"),a=XS(t,"b","sub");[n,a]=eS(n,a);const r={a:n,b:a};return iS.runKernel(Gw,r)}});const xI=ZS({abs_:function(e){const t=XS(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return iS.runKernel(Ix,e)}{const e={x:t};return iS.runKernel("Abs",e)}}});function wI(e,t){const n=e.length,a=[];for(let r=0;r<n;r++){const o=n-1-r,s=e[o]||1;(t[t.length-1-r]||1)>1&&1===s&&a.unshift(o)}return a}function kI(e,t){const n=Math.max(e.length,t.length),a=new Array(n);for(let r=0;r<n;r++){let o=e[e.length-r-1];null==o&&(o=1);let s=t[t.length-r-1];if(null==s&&(s=1),1===o)a[n-r-1]=s;else if(1===s)a[n-r-1]=o;else{if(o!==s){const n="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(n)}a[n-r-1]=o}}return a}const SI=ZS({maximum_:function(e,t){let n=XS(e,"a","maximum"),a=XS(t,"b","maximum");[n,a]=eS(n,a),"bool"===n.dtype&&(n=QS(n,"int32"),a=QS(a,"int32")),kI(n.shape,a.shape);const r={a:n,b:a};return iS.runKernel(aw,r)}});class II extends gI{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const r=iS.registeredVariables[t];eI((()=>{const e=nI(oI(this.c,a),r);r.assign(e)}))})),this.incrementIterations()}setLearningRate(e){var t;this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=(t=uI(-e),iS.keep(t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}const TI=[class extends gI{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=iS.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=iS.registeredVariables[t],r=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accum_grad"),variable:eI((()=>cI(a).variable(r)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:"".concat(t,"/accum_var"),variable:eI((()=>cI(a).variable(r)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const s=this.accumulatedGrads[n].variable,i=this.accumulatedUpdates[n].variable;eI((()=>{const e=nI(oI(s,this.rho),oI(iI(o),1-this.rho)),t=oI(rI(sI(nI(i,this.epsilon)),sI(nI(s,this.epsilon))),o),n=nI(oI(i,this.rho),oI(iI(t),1-this.rho));s.assign(e),i.assign(n);const r=nI(oI(t,-this.learningRate),a);a.assign(r)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(tI(this.accumulatedGrads.map((e=>e.variable))),tI(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}},class extends gI{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=iS.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:"".concat(t,"/accumulator"),variable:eI((()=>yI(a.shape,this.initialAccumulatorValue).variable(e)))}}const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const o=this.accumulatedGrads[n].variable;eI((()=>{const e=nI(o,iI(r));o.assign(e);const t=nI(oI(rI(r,sI(nI(e,iS.backend.epsilon()))),-this.learningRate),a);a.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&tI(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}},class extends gI{static get className(){return"Adam"}constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],eI((()=>{this.accBeta1=uI(t).variable(),this.accBeta2=uI(n).variable()})),null==a&&(this.epsilon=iS.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);eI((()=>{const n=vI(1,this.accBeta1),a=vI(1,this.accBeta2);t.forEach(((t,r)=>{const o=iS.registeredVariables[t],s=!1;null==this.accumulatedFirstMoment[r]&&(this.accumulatedFirstMoment[r]={originalName:"".concat(t,"/m"),variable:eI((()=>cI(o).variable(s)))}),null==this.accumulatedSecondMoment[r]&&(this.accumulatedSecondMoment[r]={originalName:"".concat(t,"/v"),variable:eI((()=>cI(o).variable(s)))});const i=Array.isArray(e)?e[r].tensor:e[t];if(null==i)return;const c=this.accumulatedFirstMoment[r].variable,l=this.accumulatedSecondMoment[r].variable,u=nI(oI(c,this.beta1),oI(i,1-this.beta1)),h=nI(oI(l,this.beta2),oI(iI(i),1-this.beta2)),d=rI(u,n),p=rI(h,a);c.assign(u),l.assign(h);const f=nI(oI(rI(d,nI(sI(p),this.epsilon)),-this.learningRate),o);o.assign(f)})),this.accBeta1.assign(oI(this.accBeta1,this.beta1)),this.accBeta2.assign(oI(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&tI(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&tI(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),eI((()=>{this.accBeta1.assign(bI(this.beta1,this.iterations_+1)),this.accBeta2.assign(bI(this.beta2,this.iterations_+1))}));const t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}},class extends gI{static get className(){return"Adamax"}constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=a,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],eI((()=>{this.iteration=uI(0).variable(),this.accBeta1=uI(t).variable()})),null==a&&(this.epsilon=iS.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);eI((()=>{const n=vI(1,this.accBeta1),a=rI(-this.learningRate,nI(oI(this.iteration,this.decay),1));t.forEach(((t,r)=>{const o=iS.registeredVariables[t],s=!1;null==this.accumulatedFirstMoment[r]&&(this.accumulatedFirstMoment[r]={originalName:"".concat(t,"/m"),variable:cI(o).variable(s)}),null==this.accumulatedWeightedInfNorm[r]&&(this.accumulatedWeightedInfNorm[r]={originalName:"".concat(t,"/v"),variable:cI(o).variable(s)});const i=Array.isArray(e)?e[r].tensor:e[t];if(null==i)return;const c=this.accumulatedFirstMoment[r].variable,l=this.accumulatedWeightedInfNorm[r].variable,u=nI(oI(c,this.beta1),oI(i,1-this.beta1)),h=oI(l,this.beta2),d=xI(i),p=SI(h,d);c.assign(u),l.assign(p);const f=nI(oI(rI(a,n),rI(u,nI(p,this.epsilon))),o);o.assign(f)})),this.iteration.assign(nI(this.iteration,1)),this.accBeta1.assign(oI(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&tI(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&tI(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}},class extends II{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=uI(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=iS.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:"".concat(t,"/momentum"),variable:eI((()=>cI(a).variable(e)))}}const r=this.accumulations[n].variable,o=Array.isArray(e)?e[n].tensor:e[t];null!=o&&eI((()=>{let e;const t=nI(oI(this.m,r),o);e=this.useNesterov?nI(oI(this.c,nI(o,oI(t,this.m))),a):nI(oI(this.c,t),a),r.assign(t),a.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&tI(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}},class extends gI{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,null==a&&(this.epsilon=iS.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=iS.registeredVariables[t],r=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:"".concat(t,"/rms"),variable:eI((()=>cI(a).variable(r)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:"".concat(t,"/momentum"),variable:eI((()=>cI(a).variable(r)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:"".concat(t,"/mg"),variable:eI((()=>cI(a).variable(r)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const s=this.accumulatedMeanSquares[n].variable,i=this.accumulatedMoments[n].variable;eI((()=>{const e=nI(oI(s,this.decay),oI(iI(o),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,r=nI(oI(t,this.decay),oI(o,1-this.decay)),c=rI(oI(o,this.learningRate),sI(vI(e,nI(iI(r),this.epsilon)))),l=nI(oI(i,this.momentum),c);s.assign(e),t.assign(r),i.assign(l);const u=vI(a,l);a.assign(u)}else{const e=nI(oI(s,this.decay),oI(iI(o),1-this.decay)),t=nI(oI(i,this.momentum),rI(oI(o,this.learningRate),sI(nI(e,this.epsilon))));s.assign(e),i.assign(t);const n=vI(a,t);a.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&tI(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&tI(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&tI(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}},II];function CI(e){return new Promise((e=>setTimeout(e))).then(e)}class EI{constructor(e){if(!rx().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(EI.URL_SCHEME)&&(e=e.slice(EI.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=uS.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=pS(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),a=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),r=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(r.download=this.modelJsonFileName,r.href=a,await CI((()=>r.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await CI((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:mS(e)}}}}EI.URL_SCHEME="downloads://";function NI(e,t,n,a){!function(e){Ov(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){Ov(e>=0&&e<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e))),Ov(t>=0&&t<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t))),Ov(t>=e,(()=>"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)))}(n=null==n?0:n,a=null==a?1:a);let r=0;return Promise.all(e.map((o=>(o.then((o=>{const s=n+ ++r/e.length*(a-n);return t(s),o})),o))))}async function RI(e,t){null==t&&(t={});const n=null==t.fetchFunc?rx().platform.fetch:t.fetchFunc,a=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),r=(null==t.onProgress?await Promise.all(a):await NI(a,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(r):await NI(r,t.onProgress,.5,1)}yS.registerSaveRouter((e=>rx().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(EI.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new EI(e)}(e.slice(EI.URL_SCHEME.length)):null));class AI{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(Ov("function"===typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=rx().platform.fetch,Ov(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&Ov(2===e.length,(()=>"URL paths for http must have a length of 2, "+"(actual length is ".concat(e.length,")."))),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=pS(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=uS.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:mS(e),responses:[a]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(a.status,"."))}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(e.status,". Please verify this URL points to ")+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(r){let e="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const n=t.modelTopology,a=t.weightsManifest;if(null==n&&null==a)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return fS(await this.loadModelJSON(),(e=>this.loadWeights(e)))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=gS(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const a=null==t.fetchFunc?rx().platform.fetch:t.fetchFunc;let r,o=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var s;o<e.length;){if(!r){const n=(await a(e[o],t.requestInit,{isBinary:!0})).body;r=n.getReader()}const{done:i,value:c}=await r.read();if(!i)return void n.enqueue(c);o++,r=void 0,null===(s=t.onProgress)||void 0===s||s.call(t,o/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,a]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),a=e.substring(0,t),r=n>t?e.substring(n):"";return[a+"/",r]}(t),r=this.weightPathPrefix||n,o=[],s=[];for(const i of e)for(const e of i.paths)null!=this.weightUrlConverter?s.push(this.weightUrlConverter(e)):o.push(r+e+a);return this.weightUrlConverter&&o.push(...await Promise.all(s)),o}async loadWeights(e){const t=await this.getWeightUrls(e);return[gS(e),await RI(t,this.loadOptions)]}}function _I(e){return null!=e.match(AI.URL_SCHEME_REGEX)}AI.URL_SCHEME_REGEX=/^https?:\/\//;const OI=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>_I(e))):_I(e),n)return FI(e,t)}return null};function FI(e,t){return new AI(e,t)}yS.registerSaveRouter(OI),yS.registerLoadRouter(OI);const DI=-2,LI=-1;function MI(e,t,n,a,r,o,s,i,c){let l;if(null==a?(l=new Array(t.length),l.fill(1)):l=a,null!=s&&0!==(s&s-1))throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const h={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:l.slice(),beginMask:r,endMask:o,ellipsisMask:s,newAxisMask:i,shrinkAxisMask:c};for(let b=0;b<h.dims;b++)u&&0!==(1<<b&i)&&h.numAddAxisAfterEllipsis++,1<<b&s&&(u=!0);u||(h.ellipsisMask|=1<<h.dims,h.dims++);const d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let a=0;a<e.dims;a++)if(1<<a&e.ellipsisMask){const r=Math.min(t.dims-(e.dims-a)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<r;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=a}else if(1<<a&e.newAxisMask)t.finalShapeGatherIndices.push(DI),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[a]),null!=e.end&&(t.end[n]=e.end[a]),t.strides[n]=e.strides[a],e.beginMask&1<<a&&(t.beginMask|=1<<n),e.endMask&1<<a&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<a?(t.finalShapeGatherIndices.push(LI),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(a)),t.inputShapeGatherIndicesSparse[n]=a,n++}}(h,d);let p=!0,f=!0,m=!0;const g=[],y=[];for(let b=0;b<e.length;++b){if(0===d.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));const t=!!(d.shrinkAxisMask&1<<b),n=e[b];if(-1===n){g.push(t?1:-1);continue}const a=[d.beginMask&1<<b,d.endMask&1<<b],r=[d.strides[b]>0?0:-1,d.strides[b]>0?n:n-1];if(t&&d.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===d.strides[b];const o=!!(d.beginMask&1<<b&&d.endMask&1<<b);if(d.beginValid&&d.endValid){if(t){const e=d.begin[b]<0?n+d.begin[b]:d.begin[b];if(d.begin[b]=e,d.end[b]=d.begin[b]+1,e<0||e>=n)throw Error("slice index ".concat(d.begin[b]," of dimension ").concat(b," out of bounds."))}else d.begin[b]=PI(d.begin[b],0,d.strides[b],n,a,r),d.end[b]=PI(d.end[b],1,d.strides[b],n,a,r);const e=1===d.strides[b]&&0===d.begin[b]&&d.end[b]===n;p=p&&e,f=f&&(0===b&&1===d.strides[b]||e)}else p=p&&1===d.strides[b]&&o,f=f&&(0===b&&1===d.strides[b]||o);let s,i=!1;if(d.beginValid&&d.endValid?(s=d.end[b]-d.begin[b],i=!0):t?(s=1,i=!0):o&&n>=0&&(s=d.strides[b]<0?-n:n,i=!0),i){let e;e=0===s||s<0!==d.strides[b]<0?0:Math.trunc(s/d.strides[b])+(s%d.strides[b]!==0?1:0),g.push(e)}else g.push(-1)}for(let b=0;b<d.finalShapeGatherIndices.length;++b){const e=d.finalShapeGatherIndices[b];e>=0?y.push(g[e]):e===DI&&y.push(1)}return{finalShapeSparse:y.filter(((e,t)=>d.finalShapeGatherIndices[t]!==DI)),finalShape:y,isIdentity:p,sliceDim0:f,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function PI(e,t,n,a,r,o){if(r[t])return n>0?o[t]:o[t+1&1];{const t=e<0?a+e:e;return t<o[0]?o[0]:t>o[1]?o[1]:t}}const zI=ZS({reshape_:function(e,t){const n={x:XS(e,"x","reshape","string_or_numeric")},a={shape:t};return iS.runKernel(bw,n,a)}});const BI=ZS({broadcastTo_:function(e,t){let n=XS(e,"broadcastTo","x");const a=n.shape;if(Qv(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=zI(n,e)}const r=n.shape,o=Array.from(t);for(let c=t.length-1;c>=0;c--)if(r[c]===t[c])o[c]=1;else if(1!==n.shape[c])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(t,"]."));if(0===o.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0)).length)return JS(n);const s={x:n},i={reps:o};return iS.runKernel(Hw,s,i)}});function WI(e,t,n){const a=function(e,t,n){return function(e,t,n){let a=0,r=e.length,o=0,s=!1;for(;a<r;){o=a+(r-a>>>1);const i=n(t,e[o]);i>0?a=o+1:(r=o,s=!i)}return s?a:-a-1}(e,t,n||UI)}(e,t,n),r=a<0?-(a+1):a;e.splice(r,0,t)}function UI(e,t){return e>t?1:e<t?-1:0}function VI(e,t,n,a,r){return HI(e,t,n,a,r,0)}function GI(e,t,n,a,r,o){return HI(e,t,n,a,r,0,!1,o,!0)}function jI(e,t,n,a,r,o){return HI(e,t,n,a,r,o,!0)}function HI(e,t,n,a,r,o){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],i=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const l=[];for(let g=0;g<t.length;g++)t[g]>r&&l.push({score:t[g],boxIndex:g,suppressBeginIndex:0});l.sort(YI);const u=o>0?-.5/o:0,h=[],d=[];for(;h.length<n&&l.length>0;){const t=l.pop(),{score:n,boxIndex:o,suppressBeginIndex:s}=t;if(n<r)break;let i=!1;for(let c=h.length-1;c>=s;--c){const n=KI(e,o,h[c]);if(n>=a){i=!0;break}if(t.score=t.score*qI(a,u,n),t.score<=r)break}t.suppressBeginIndex=h.length,i||(t.score===n?(h.push(o),d.push(t.score)):t.score>r&&WI(l,t,YI))}const p=h.length,f=n-p;i&&f>0&&(h.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));const m={selectedIndices:h};return s&&(m.selectedScores=d),c&&(m.validOutputs=p),m}function KI(e,t,n){const a=e.subarray(4*t,4*t+4),r=e.subarray(4*n,4*n+4),o=Math.min(a[0],a[2]),s=Math.min(a[1],a[3]),i=Math.max(a[0],a[2]),c=Math.max(a[1],a[3]),l=Math.min(r[0],r[2]),u=Math.min(r[1],r[3]),h=Math.max(r[0],r[2]),d=Math.max(r[1],r[3]),p=(i-o)*(c-s),f=(h-l)*(d-u);if(p<=0||f<=0)return 0;const m=Math.max(o,l),g=Math.max(s,u),y=Math.min(i,h),b=Math.min(c,d),v=Math.max(y-m,0)*Math.max(b-g,0);return v/(p+f-v)}function qI(e,t,n){const a=Math.exp(t*n*n);return n<=e?a:0}function YI(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function XI(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function ZI(e,t){const n=[],a=e.length;for(let r=0;r<a;r++)-1===t.indexOf(r)&&n.push(e[r]);return[n,t.map((t=>e[t]))]}function QI(e,t){return function(e,t,n){const a=e.length+t.length,r=[];let o=0,s=0;for(let i=0;i<a;i++)-1===n.indexOf(i)?r.push(e[o++]):r.push(t[s++]);return r}(e,t.map((e=>1)),t)}function JI(e,t,n){Ov(XI(t,n),(()=>"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")))}function $I(e,t){if(XI(e,t))return null;const n=[];for(let a=0;a<t;++a)-1===e.indexOf(a)&&n.push(a);return e.forEach((e=>n.push(e))),n}function eT(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function tT(e,t){const n=[];for(let a=t-e;a<t;++a)n.push(a);return n}var nT;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(nT||(nT={}));function aT(e,t){const n=e[0].slice();for(let a=1;a<e.length;a++)n[t]+=e[a][t];return n}function rT(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0;return iT(e,[...t,e[3]],n,o,a,null,null,gT(r))}function oT(e,t,n,a,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[i,c]=uT(t);let l;if("channelsLast"===s)l=[i,c,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));l=[i,c,e[1],e[1]]}return iT(e,l,n,a,r,o,!1,s)}function sT(e,t,n,a,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[i,c,l]=hT(t);let u,h;if("NDHWC"===s)h="channelsLast",u=[i,c,l,e[4],e[4]];else{if("NCDHW"!==s)throw new Error("Unknown dataFormat ".concat(s));h="channelsFirst",u=[i,c,l,e[1],e[1]]}return cT(e,u,n,a,r,!1,h,o)}function iT(e,t,n,a,r,o){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[c,l,u,h]=[-1,-1,-1,-1];if("channelsLast"===i)[c,l,u,h]=e;else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));[c,h,l,u]=e}const[d,p,,f]=t,[m,g]=uT(n),[y,b]=uT(a),v=dT(d,y),x=dT(p,b),{padInfo:w,outHeight:k,outWidth:S}=function(e,t,n,a,r,o,s,i,c){let l,u,h;if("number"===typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const r=function(e,t,n,a,r){null==a&&(a=lT(e,t,n));const o=e[0],s=e[1],i=pT((o-t+2*a)/n+1,r),c=pT((s-t+2*a)/n+1,r);return[i,c]}([t,n],o,a,e,i);u=r[0],h=r[1]}else if("same"===e){u=Math.ceil(t/a),h=Math.ceil(n/r);const e=Math.max(0,(u-1)*a+o-t),i=Math.max(0,(h-1)*r+s-n),c=Math.floor(e/2),d=e-c,p=Math.floor(i/2);l={top:c,bottom:d,left:p,right:i-p,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-o+1)/a),h=Math.ceil((n-s+1)/r);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));{const d="channelsLast"===c?e[1][0]:e[2][0],p="channelsLast"===c?e[1][1]:e[2][1],f="channelsLast"===c?e[2][0]:e[3][0],m="channelsLast"===c?e[2][1]:e[3][1];l={top:d,bottom:p,left:f,right:m,type:0===d&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},u=pT((t-o+d+p)/a+1,i),h=pT((n-s+f+m)/r+1,i)}}return{padInfo:l,outHeight:u,outWidth:h}}(r,l,u,m,g,v,x,o,i),I=s?f*h:f;let T;return"channelsFirst"===i?T=[c,I,k,S]:"channelsLast"===i&&(T=[c,k,S,I]),{batchSize:c,dataFormat:i,inHeight:l,inWidth:u,inChannels:h,outHeight:k,outWidth:S,outChannels:I,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:p,effectiveFilterHeight:v,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:b,inShape:e,outShape:T,filterShape:t}}function cT(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",i=arguments.length>7?arguments[7]:void 0,[c,l,u,h,d]=[-1,-1,-1,-1,-1];if("channelsLast"===s)[c,l,u,h,d]=e;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));[c,d,l,u,h]=e}const[p,f,m,,g]=t,[y,b,v]=hT(n),[x,w,k]=hT(a),S=dT(p,x),I=dT(f,w),T=dT(m,k),{padInfo:C,outDepth:E,outHeight:N,outWidth:R}=function(e,t,n,a,r,o,s,i,c,l,u){let h,d,p,f;"valid"===e&&(e=0);if("number"===typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const m=function(e,t,n,a,r,o){null==r&&(r=lT(e,t[0],a[0]));const s=[0,0,0,n];for(let i=0;i<3;i++)e[i]+2*r>=t[i]&&(s[i]=pT((e[i]-t[i]+2*r)/a[i]+1,o));return s}([t,n,a,1],[i,c,l],1,[r,o,s],e,u);d=m[0],p=m[1],f=m[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));{d=Math.ceil(t/r),p=Math.ceil(n/o),f=Math.ceil(a/s);const e=(d-1)*r+i-t,u=(p-1)*o+c-n,m=(f-1)*s+l-a,g=Math.floor(e/2),y=e-g,b=Math.floor(u/2),v=u-b,x=Math.floor(m/2);h={top:b,bottom:v,left:x,right:m-x,front:g,back:y,type:"SAME"}}}return{padInfo:h,outDepth:d,outHeight:p,outWidth:f}}(r,l,u,h,y,b,v,S,I,T,i),A=o?g*d:g;let _;return"channelsFirst"===s?_=[c,A,E,N,R]:"channelsLast"===s&&(_=[c,E,N,R,A]),{batchSize:c,dataFormat:s,inDepth:l,inHeight:u,inWidth:h,inChannels:d,outDepth:E,outHeight:N,outWidth:R,outChannels:A,padInfo:C,strideDepth:y,strideHeight:b,strideWidth:v,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:S,effectiveFilterHeight:I,effectiveFilterWidth:T,dilationDepth:x,dilationHeight:w,dilationWidth:k,inShape:e,outShape:_,filterShape:t}}function lT(e,t,n){const a=dT(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+a)/2)}function uT(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function hT(e){return"number"===typeof e?[e,e,e]:e}function dT(e,t){return t<=1?e:e+(e-1)*(t-1)}function pT(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function fT(e){const[t,n,a]=uT(e);return 1===t&&1===n&&1===a}function mT(e,t){return fT(e)||fT(t)}function gT(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}var yT;!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(yT||(yT={}));function bT(e,t,n){let a=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)a=a.concat([e[r+1]/t[r],t[r]]);a=a.concat(e.slice(n+1))}return a}function vT(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let a=t+1;a<e;++a)a<=2*t?(n.push(a),n.push(a-(t+1))):n.push(a)}else{const a=[],r=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?r.push(n):a.push(n);n.push(...a),n.push(0),n.push(...r)}return n}function xT(e,t,n){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=[];a?r.push(e[0]/n):r.push(e[0]*n);for(let o=1;o<e.length;++o)o<=t.length?a?r.push(t[o-1]*e[o]):r.push(e[o]/t[o-1]):r.push(e[o]);return r}function wT(e,t,n){const a=t.shape.length,r=a>1?t.shape[a-1]:1,o=n.length;let s=1;for(let c=r;c<o;++c)s*=n[c];const i=r<1?1:r;return{sliceRank:r,numUpdates:Dv(t.shape)/i,sliceSize:s,strides:[...Hv(n.slice(0,r)),1],outputSize:Dv(n)}}function kT(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));const n=new Float32Array(2*e.length);for(let a=0;a<n.length;a+=2)n[a]=e[a/2],n[a+1]=t[a/2];return n}function ST(e,t){return{real:e[2*t],imag:e[2*t+1]}}function IT(e,t,n,a){e[2*a]=t,e[2*a+1]=n}function TT(e,t,n){const a=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(a),imag:Math.sin(a)}}const CT="->",ET=/->/g,NT=",",RT="...";function AT(e,t){let n=new Array(e);n.fill(-1);for(let r=0;r<t.length;++r)n[t[r]]=r;const a=[];for(let r=0;r<e;++r)-1===n[r]&&a.push(r);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:a}}function _T(e){return e.every(((e,t)=>e===t))}function OT(e,t){const n=[];for(let a=0;a<e.length;++a)0!==e[a].length&&-1===e[a].indexOf(t)&&-1!==t||n.push(a);return n}function FT(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function DT(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function LT(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function MT(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function PT(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function zT(e){try{return e.map((e=>Ik(e)))}catch(pU){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(pU))}}function BT(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&Ov("complex64"!==e.dtype,(()=>"".concat(t," does not support complex64 tensors in the CPU backend.")))}))}!function(){for(const e of TI)mI(e)}();const WT=function(e,t){const n=[];for(let o=0;o<t.length;o++)t[o]&&n.push(o);const a=HS(e,"int32"),r=HS([n.length,e.length],"int32");for(let o=0;o<n.length;o++){const t=a.indexToLoc(n[o]),s=o*e.length;r.values.set(t,s)}return r.toTensor()};class UT extends Nv{nextDataId(){return UT.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Ev(this,$S())}write(e,t,n){this.firstUse&&(this.firstUse=!1,rx().get("IS_NODE")&&Jw("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:n,refCount:1}),a}makeTensorInfo(e,t,n){let a;if("string"===t&&null!=n&&n.length>0&&Vv(n[0])){const r=n.map((e=>Sk(e)));a=this.write(r,e,t)}else a=this.write(n,e,t);return{dataId:a,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,a,r){this.data.set(e,{values:t,dtype:a,refCount:r})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){return kT(this.readSync(n.real.dataId),this.readSync(n.imag.dataId))}return function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>Ik(e)));return HS(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return HS(e.shape,e.dtype,t)}makeOutput(e,t,n){return $S().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=kk();e();return{kernelMs:kk()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){BT([e],"where");const t=this.readSync(e.dataId);return WT(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}UT.nextDataId=0;function VT(e){return(t,n,a)=>{const r=Wv(n,t.length);for(let o=0;o<t.length;++o)r[o]=e(t[o],a);return r}}function GT(e,t,n){return jT(e,VT(t),n)}function jT(e,t,n){return a=>{let{inputs:r,attrs:o,backend:s}=a;const{x:i}=r;BT(i,e);const c=s,l=c.data.get(i.dataId).values;let u;if("string"===i.dtype){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=zT(l)}else u=l;const h=n||i.dtype,d=t(u,h,o);return c.makeTensorInfo(i.shape,h,d)}}!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;iS.registerBackend(e,t,n)}("cpu",(()=>new UT),1);const HT=GT(Ox,(e=>e>=0?e:Math.exp(e)-1)),KT={kernelName:Ox,backendName:"cpu",kernelFunc:HT};function qT(e){const{inputs:t,backend:n}=e,{x:a}=t;return n.incRef(a.dataId),{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}const YT={kernelName:Gx,backendName:"cpu",kernelFunc:qT};function XT(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{alpha:o}=a;BT([r],"leakyRelu");const s=Dv(r.shape),i=n.data.get(r.dataId).values,c=Bv("float32",s);for(let l=0;l<i.length;l++)c[l]=i[l]<0?o*i[l]:i[l];return n.makeTensorInfo(r.shape,"float32",c)}const ZT={kernelName:Xx,backendName:"cpu",kernelFunc:XT};function QT(e){return(t,n,a,r,o)=>{const s=kI(t,n),i=s.length,c=Hv(s),l=Bv(o,Dv(s)),u=t.length,h=n.length,d=Hv(t),p=Hv(n),f=wI(t,s),m=wI(n,s);if(f.length+m.length===0)for(let g=0;g<l.length;++g)l[g]=e(a[g%a.length],r[g%r.length]);else for(let g=0;g<l.length;++g){const t=$v(g,i,c),n=t.slice(-u);f.forEach((e=>n[e]=0));const o=Jv(n,u,d),s=t.slice(-h);m.forEach((e=>s[e]=0));const y=Jv(s,h,p);l[g]=e(a[o],r[y])}return[l,s]}}const JT=QT(((e,t)=>e<0?t*e:e));function $T(e){const{inputs:t,backend:n}=e,{x:a,alpha:r}=t;BT([a,r],"prelu");const o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,[i,c]=JT(a.shape,r.shape,o,s,"float32");return n.makeTensorInfo(c,"float32",i)}const eC={kernelName:pw,backendName:"cpu",kernelFunc:$T},tC=GT(yw,(e=>Math.max(0,e))),nC={kernelName:yw,backendName:"cpu",kernelFunc:tC},aC=GT(ww,(e=>Math.min(Math.max(0,e),6))),rC={kernelName:ww,backendName:"cpu",kernelFunc:aC},oC=VT((e=>1/(1+Math.exp(-e)))),sC=GT(Aw,(e=>1/(1+Math.exp(-e)))),iC={kernelName:Aw,backendName:"cpu",kernelFunc:sC};function cC(e,t,n,a,r){if("linear"===n)return qT({inputs:{x:t},backend:e});if("relu"===n)return tC({inputs:{x:t},backend:e});if("elu"===n)return HT({inputs:{x:t},backend:e});if("relu6"===n)return aC({inputs:{x:t},backend:e});if("prelu"===n)return $T({inputs:{x:t,alpha:a},backend:e});if("leakyrelu"===n)return XT({inputs:{x:t},backend:e,attrs:{alpha:r}});if("sigmoid"===n)return sC({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function lC(e){const{inputs:t,backend:n}=e,{real:a,imag:r}=t,o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,i=n.makeTensorInfo(a.shape,"complex64");return n.data.get(i.dataId).complexTensorInfos={real:n.makeTensorInfo(a.shape,"float32",o),imag:n.makeTensorInfo(r.shape,"float32",s)},i}const uC={kernelName:Sx,backendName:"cpu",kernelFunc:lC};function hC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return lC({inputs:{real:hC(e,t,"float32"),imag:hC(e,t,"float32")},backend:e})}const a=Xv(Dv(t),n);return e.makeTensorInfo(t,n,a)}function dC(e){const{inputs:t,backend:n}=e,{input:a}=t,r=n.data.get(a.dataId).complexTensorInfos.real,o=n.data.get(r.dataId).values;return n.makeTensorInfo(r.shape,r.dtype,o)}const pC={kernelName:mw,backendName:"cpu",kernelFunc:dC};function fC(e,t,n,a){if("int32"===a){return[t,"int32",Int32Array.from(e)]}if("bool"===a){const a=wk([0],n),[r,o]=QT(((e,t)=>e!==t?1:0))(t,[],e,a,"bool");return[o,"bool",r]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(a))}function mC(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{dtype:o}=a;if("complex64"===o){if("complex64"===r.dtype)return qT({inputs:{x:r},backend:n});const e=hC(n,r.shape,r.dtype),t=mC({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),a=lC({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),a}if("complex64"===r.dtype){const e=dC({inputs:{input:r},backend:n}),t=mC({inputs:{x:e},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(e),t}if(s=r.dtype,"complex64"===(i=o)||"float32"===i&&"complex64"!==s||"int32"===i&&"float32"!==s&&"complex64"!==s||"bool"===i&&"bool"===s){const e=qT({inputs:{x:r},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:o}}var s,i;const c=n.data.get(r.dataId).values,[l,u,h]=fC(c,r.shape,r.dtype,o);return n.makeTensorInfo(l,u,h)}const gC={kernelName:xx,backendName:"cpu",kernelFunc:mC};function yC(e,t,n,a){return null==n?n=>{let{inputs:r,backend:o}=n;const{a:s,b:i}=r,c=o;BT([s,i],e);const l=c.data.get(s.dataId).values,u=c.data.get(i.dataId).values,h="string"===s.dtype?zT(l):l,d="string"===s.dtype?zT(u):u,p=a||s.dtype,[f,m]=t(s.shape,i.shape,h,d,p);return c.makeTensorInfo(m,p,f)}:e=>{let{inputs:r,backend:o}=e;const{a:s,b:i}=r,c=o;if("complex64"===s.dtype||"complex64"===i.dtype){const e=mC({inputs:{x:s},backend:c,attrs:{dtype:"complex64"}}),t=c.data.get(e.dataId),a=t.complexTensorInfos.real,r=t.complexTensorInfos.imag,o=c.data.get(a.dataId).values,l=c.data.get(r.dataId).values,u=mC({inputs:{x:i},backend:c,attrs:{dtype:"complex64"}}),h=c.data.get(u.dataId),d=h.complexTensorInfos.real,p=h.complexTensorInfos.imag,f=c.data.get(d.dataId).values,m=c.data.get(p.dataId).values,[g,y,b]=n(s.shape,i.shape,o,l,f,m),v=c.makeTensorInfo(b,"float32",g),x=c.makeTensorInfo(b,"float32",y),w=lC({inputs:{real:v,imag:x},backend:c});return c.disposeIntermediateTensorInfo(e),c.disposeIntermediateTensorInfo(u),c.disposeIntermediateTensorInfo(v),c.disposeIntermediateTensorInfo(x),w}{const e=c.data.get(s.dataId).values,n=c.data.get(i.dataId).values,r=a||s.dtype,[o,l]=t(s.shape,i.shape,e,n,r);return c.makeTensorInfo(l,r,o)}}}function bC(e){return(t,n,a,r,o,s)=>{const i=kI(t,n),c=Dv(i),l=i.length,u=Hv(i),h=Bv("float32",c),d=Bv("float32",c),p=wI(t,i),f=wI(n,i),m=kT(a,r),g=kT(o,s),y=t.length,b=Hv(t),v=n.length,x=Hv(n);if(p.length+f.length===0)for(let w=0;w<h.length;w++){const t=w%m.length,n=w%g.length,a=e(m[2*t],m[2*t+1],g[2*n],g[2*n+1]);h[w]=a.real,d[w]=a.imag}else for(let w=0;w<h.length;w++){const t=$v(w,l,u),n=t.slice(-y);p.forEach((e=>n[e]=0));const a=Jv(n,y,b),r=t.slice(-v);f.forEach((e=>r[e]=0));const o=Jv(r,v,x),s=e(m[2*a],m[2*a+1],g[2*o],g[2*o+1]);h[w]=s.real,d[w]=s.imag}return[h,d,i]}}const vC=QT(((e,t)=>e+t)),xC=bC(((e,t,n,a)=>({real:e+n,imag:t+a}))),wC=yC(hx,vC,xC),kC={kernelName:hx,backendName:"cpu",kernelFunc:wC};function SC(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{shape:o}=a,s=Dv(r.shape),i=function(e,t){let n=1,a=-1;for(let o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==a)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(a," and dim ").concat(o));a=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found ".concat(e[o]," at dim ").concat(o));if(-1===a){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));const r=e.slice();return r[a]=t/n,r}(o,s),c=Dv(i);Ov(s===c,(()=>"The new shape (".concat(i,") has ").concat(c," elements and the old ")+"shape (".concat(r.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements.")),n.incRef(r.dataId);const l=n.data.get(r.dataId);if(null!=l.complexTensorInfos){const e=l.complexTensorInfos.real,t=l.complexTensorInfos.imag;e.shape=i,t.shape=i}return{dataId:r.dataId,shape:i,dtype:r.dtype}}const IC={kernelName:bw,backendName:"cpu",kernelFunc:SC};function TC(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o}=t,{transposeA:s,transposeB:i}=a;BT([r,o],"matMul");const c=r.shape.length,l=o.shape.length,u=s?r.shape[c-2]:r.shape[c-1],h=i?o.shape[l-1]:o.shape[l-2],d=s?r.shape[c-1]:r.shape[c-2],p=i?o.shape[l-2]:o.shape[l-1],f=r.shape.slice(0,-2),m=o.shape.slice(0,-2),g=Dv(f),y=Dv(m),b=kI(r.shape.slice(0,-2),o.shape.slice(0,-2)).concat([d,p]);Ov(u===h,(()=>"Error in matMul: inner shapes (".concat(u,") and (")+"".concat(h,") of Tensors with shapes ").concat(r.shape," and ")+"".concat(o.shape," and transposeA=").concat(s)+" and transposeB=".concat(i," must match.")));const v=i?[y,p,h]:[y,h,p],x=SC({inputs:{x:r},backend:n,attrs:{shape:s?[g,u,d]:[g,d,u]}}),w=SC({inputs:{x:o},backend:n,attrs:{shape:v}}),k=s?x.shape[1]:x.shape[2],S=s?x.shape[2]:x.shape[1],I=i?w.shape[1]:w.shape[2],T=Math.max(g,y),C=n.data.get(x.dataId).values,E=n.data.get(w.dataId).values,N=Hv(x.shape),R=Hv(w.shape),[A,_,O]=s?[N[0],1,N[1]]:[N[0],N[1],1],[F,D,L]=i?[1,R[1],R[0]]:[R[1],1,R[0]],M=S*I,P=HS([T,S,I],x.dtype),z=P.values,B=n.blockSize;for(let W=0;W<T;W++){const e=W%g,t=W%y;for(let n=0;n<S;n+=B){const a=Math.min(n+B,S);for(let r=0;r<I;r+=B){const o=Math.min(r+B,I);for(let s=0;s<k;s+=B){const i=Math.min(s+B,k);for(let c=n;c<a;c++)for(let n=r;n<o;n++){let a=0;for(let r=s;r<i;r++){a+=C[e*A+c*_+r*O]*E[r*F+n*D+t*L]}z[W*M+(c*I+n)]+=a}}}}}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(b,P.dtype,P.values)}const CC={kernelName:yx,backendName:"cpu",kernelFunc:TC};const EC={kernelName:"_FusedMatMul",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o,bias:s,preluActivationWeights:i}=t,{transposeA:c,transposeB:l,activation:u,leakyreluAlpha:h}=a;let d,p,f;const m=[];d=TC({inputs:{a:r,b:o},attrs:{transposeA:c,transposeB:l},backend:n}),s&&(p=wC({inputs:{a:d,b:s},backend:n}),m.push(d),d=p),u&&(f=cC(n,d,u,i,h),m.push(d),d=f);for(const g of m)n.disposeIntermediateTensorInfo(g);return d}};function NC(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const RC={kernelName:"Abs",backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;BT(t,"abs");let a=new Float32Array(Dv(t.shape));return a=NC(n.data.get(t.dataId).values),n.makeOutput(a,t.shape,t.dtype)}},AC={kernelName:lx,backendName:"cpu",kernelFunc:GT(lx,(e=>Math.acos(e)))},_C={kernelName:ux,backendName:"cpu",kernelFunc:GT(ux,(e=>Math.acosh(e)))};const OC={kernelName:"AddN",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,a=t;BT(t,"addN");const r=a.map((e=>n.data.get(e.dataId).values)),o=HS(a[0].shape,a[0].dtype),s=o.values;for(let i=0;i<a.length;i++){const e=r[i];for(let t=0;t<s.length;t++)s[t]+=e[t]}return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function FC(e,t,n,a,r){const o=t.length,s=Dv(t),i=Hv(t),c=Hv(r),l=Bv(n,Dv(r));for(let u=0;u<s;++u){const t=$v(u,o,i),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[a[e]];l[Jv(n,o,c)]=e[u]}return l}function DC(e){const{inputs:t,attrs:n,backend:a}=e,{x:r}=t,{perm:o}=n;BT(r,"transpose");const s=r.shape.length,i=new Array(s);for(let l=0;l<i.length;l++)i[l]=r.shape[o[l]];const c=FC(a.data.get(r.dataId).values,r.shape,r.dtype,o,i);return{dataId:a.write(c,i,r.dtype),shape:i,dtype:r.dtype}}const LC={kernelName:qw,backendName:"cpu",kernelFunc:DC};const MC={kernelName:"All",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a;BT(r,"all");const i=zv(o,r.shape);let c=i;const l=$I(c,r.shape.length);let u=r;null!=l&&(u=DC({inputs:{x:r},backend:n,attrs:{perm:l}}),c=tT(c.length,r.shape.length)),JI("all",c,u.shape.length);const[h,d]=ZI(u.shape,c),p=Dv(d),f=Xv(Dv(h),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const a=m[e+n];t=t&&a}f[y]=t}null!=l&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(h,u.dtype,f);if(s){const e=SC({inputs:{x:g},backend:n,attrs:{shape:QI(h,i)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const PC={kernelName:"Any",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a;BT(r,"any");const i=zv(o,r.shape);let c=i;const l=$I(c,r.shape.length);let u=r;null!=l&&(u=DC({inputs:{x:r},backend:n,attrs:{perm:l}}),c=tT(c.length,r.shape.length)),JI("any",c,u.shape.length);const[h,d]=ZI(u.shape,c),p=Dv(d),f=Xv(Dv(h),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const a=m[e+n];t=t||a}f[y]=t}null!=l&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(h,u.dtype,f);if(s){const e=SC({inputs:{x:g},backend:n,attrs:{shape:QI(h,i)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const zC={kernelName:"ArgMax",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o}=a;BT(r,"argMax");let s=zv(o,r.shape);const i=$I(s,r.shape.length);let c=r;const l=[];null!=i&&(c=DC({inputs:{x:r},backend:n,attrs:{perm:i}}),l.push(c),s=tT(s.length,c.shape.length)),s=[s[0]],JI("argMax",s,c.shape.length);const[u,h]=ZI(c.shape,s),d=Xv(Dv(u),"int32"),p=Dv(h),f=n.data.get(c.dataId).values;for(let m=0;m<d.length;++m){const e=m*p;let t=f[e],n=0;for(let a=0;a<p;++a){const r=f[e+a];r>t&&(t=r,n=a)}d[m]=n}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u,"int32",d)}};const BC={kernelName:"ArgMin",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o}=a;BT(r,"argMin");let s=zv(o,r.shape);const i=$I(s,r.shape.length);let c=r;const l=[];null!=i&&(c=DC({inputs:{x:r},backend:n,attrs:{perm:i}}),l.push(c),s=tT(s.length,c.shape.length)),s=[s[0]],JI("argMin",s,c.shape.length);const[u,h]=ZI(c.shape,s),d=Xv(Dv(u),"int32"),p=Dv(h),f=n.data.get(c.dataId).values;for(let m=0;m<d.length;++m){const e=m*p;let t=f[e],n=0;for(let a=0;a<p;++a){const r=f[e+a];r<t&&(t=r,n=a)}d[m]=n}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u,"int32",d)}},WC={kernelName:dx,backendName:"cpu",kernelFunc:GT(dx,(e=>Math.asin(e)))},UC={kernelName:px,backendName:"cpu",kernelFunc:GT(px,(e=>Math.asinh(e)))},VC={kernelName:fx,backendName:"cpu",kernelFunc:GT(fx,(e=>Math.atan(e)))},GC={kernelName:gx,backendName:"cpu",kernelFunc:yC(gx,QT(((e,t)=>Math.atan2(e,t))))},jC={kernelName:mx,backendName:"cpu",kernelFunc:GT(mx,(e=>Math.atanh(e)))};function HC(e,t,n,a,r,o){const s=r.strideHeight,i=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.top,p=r.padInfo.left,f="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=HS(r.outShape,n),g=m.values,y=r.outShape[1]*r.outShape[2]*r.outShape[3],b=r.outShape[2]*r.outShape[3],v=r.outShape[3];for(let x=0;x<r.batchSize;++x){const t=x*y,n=x*a[0];for(let m=0;m<r.inChannels;++m)for(let y=0;y<r.outHeight;++y){const x=y*s-d,w=Math.max(0,x),k=Math.min(r.inHeight,u+x),S=t+y*b;for(let t=0;t<r.outWidth;++t){const s=t*i-p,u=Math.max(0,s),d=Math.min(r.inWidth,h+s);let y=f,b=0,x=0;for(let t=w;t<k;t+=c){const r=n+t*a[1];for(let t=u;t<d;t+=l){const n=e[r+t*a[2]+m];"max"===o&&n>y?y=n:"avg"===o&&(b+=n,x++)}if(isNaN(y))break}g[S+t*v+m]="avg"===o?b/x:y}}}return m}function KC(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=HS(a.outShape,"int32"),i=a.strideHeight,c=a.strideWidth,l=a.dilationHeight,u=a.dilationWidth,h=a.effectiveFilterHeight,d=a.effectiveFilterWidth,p=a.padInfo.top,f=a.padInfo.left,m=HS(t,n,e);for(let g=0;g<a.batchSize;++g)for(let e=0;e<a.inChannels;++e)for(let t=0;t<a.outHeight;++t){const n=t*i-p;let y=n;for(;y<0;)y+=l;const b=Math.min(a.inHeight,h+n);for(let i=0;i<a.outWidth;++i){const h=i*c-f;let p=h;for(;p<0;)p+=u;const v=Math.min(a.inWidth,d+h);let x=Number.NEGATIVE_INFINITY,w=-1;for(let t=y;t<b;t+=l){const s=t-n;for(let n=p;n<v;n+=u){const i=n-h,c=m.get(g,t,n,e);c>x&&(x=c,w=r?o?((g*a.inHeight+t)*a.inWidth+n)*a.inChannels+e:(t*a.inWidth+n)*a.inChannels+e:s*d+i)}}s.set(w,g,t,i,e)}}return s}function qC(e,t,n,a,r,o){const s=r.strideDepth,i=r.strideHeight,c=r.strideWidth,l=r.dilationDepth,u=r.dilationHeight,h=r.dilationWidth,d=r.effectiveFilterDepth,p=r.effectiveFilterHeight,f=r.effectiveFilterWidth,m=r.padInfo.front,g=r.padInfo.top,y=r.padInfo.left,b="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=HS(r.outShape,n),x=v.values,w=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],k=r.outShape[2]*r.outShape[3]*r.outShape[4],S=r.outShape[3]*r.outShape[4],I=r.outShape[4];for(let T=0;T<r.batchSize;++T){const t=T*w,n=T*a[0];for(let v=0;v<r.inChannels;++v)for(let w=0;w<r.outDepth;++w){const T=w*s-m;let C=T;for(;C<0;)C+=l;const E=Math.min(r.inDepth,d+T),N=t+w*k;for(let t=0;t<r.outHeight;++t){const s=t*i-g;let d=s;for(;d<0;)d+=u;const m=Math.min(r.inHeight,p+s),w=N+t*S;for(let t=0;t<r.outWidth;++t){const s=t*c-y;let i=s;for(;i<0;)i+=h;const p=Math.min(r.inWidth,f+s),g=w+t*I;let k=b,S=0,T=0;for(let t=C;t<E;t+=l){const r=n+t*a[1];for(let t=d;t<m;t+=u){const n=r+t*a[2];for(let t=i;t<p;t+=h){const r=e[n+t*a[3]+v];if("max"===o&&r>k?k=r:"avg"===o&&(S+=r,T++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}x[g+v]="avg"===o?S/Math.max(T,1):k}}}}return v}const YC={kernelName:"AvgPool",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;BT(r,"avgPool");const{filterSize:o,strides:s,pad:i,dimRoundingMode:c}=a;Ov(mT(s,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'")));const l=oT(r.shape,o,s,1,i,c);let u;if(1===l.filterWidth&&1===l.filterHeight&&Lv(l.inShape,l.outShape))u=qT({inputs:{x:r},backend:n});else{const e=n.data.get(r.dataId).values,t=Hv(r.shape),a=HC(e,r.shape,r.dtype,t,l,"avg");u=n.makeTensorInfo(l.outShape,r.dtype,a.values)}return u}};const XC={kernelName:"AvgPool3D",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:s,pad:i,dimRoundingMode:c,dataFormat:l}=a;BT(r,"avgPool3d");const u=sT(r.shape,o,s,1,i,c,l),h=qC(n.data.get(r.dataId).values,r.shape,r.dtype,Hv(r.shape),u,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}};const ZC={kernelName:"AvgPool3DGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,{filterSize:s,strides:i,pad:c,dimRoundingMode:l}=a;BT([r,o],"avgPool3DGrad");const u=sT(o.shape,s,i,1,c,l),h=u.strideDepth,d=u.strideHeight,p=u.strideWidth,f=u.filterDepth,m=u.filterHeight,g=u.filterWidth,y=u.dilationDepth,b=u.dilationHeight,v=u.dilationWidth,x=u.effectiveFilterDepth,w=u.effectiveFilterHeight,k=u.effectiveFilterWidth,S=x-1-u.padInfo.front,I=k-1-u.padInfo.left,T=w-1-u.padInfo.top,C=HS(o.shape,"float32"),E=1/(f*m*g),N=n.bufferSync(r);for(let R=0;R<u.batchSize;++R)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let a=0;a<u.inWidth;++a){const r=t-S,o=n-T,s=a-I;let i=0;for(let t=0;t<x;t+=y){const n=(r+t)/h;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let t=0;t<w;t+=b){const a=(o+t)/d;if(!(a<0||a>=u.outHeight||Math.floor(a)!==a))for(let t=0;t<k;t+=v){const r=(s+t)/p;if(r<0||r>=u.outWidth||Math.floor(r)!==r)continue;i+=N.get(R,n,a,r,e)}}}C.set(i*E,R,t,n,a,e)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};const QC={kernelName:"AvgPoolGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,s=o;BT([r,o],"avgPoolGrad");const{filterSize:i,strides:c,pad:l}=a,u=oT(s.shape,i,c,1,l),h=u.strideHeight,d=u.strideWidth,p=u.filterHeight,f=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,y=u.effectiveFilterHeight,b=u.effectiveFilterWidth,v=b-1-u.padInfo.left,x=y-1-u.padInfo.top,w=HS(s.shape,"float32"),k=1/(p*f),S=n.data.get(r.dataId).values,I=HS(r.shape,"float32",S);for(let T=0;T<u.batchSize;++T)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inHeight;++t)for(let n=0;n<u.inWidth;++n){const a=t-x,r=n-v;let o=0;for(let t=0;t<y;t+=m){const n=(a+t)/h;if(!(n<0||n>=u.outHeight||Math.floor(n)!==n))for(let t=0;t<b;t+=g){const a=(r+t)/d;if(a<0||a>=u.outWidth||Math.floor(a)!==a)continue;o+=I.get(T,n,a,e)}}w.set(o*k,T,t,n,e)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const JC={kernelName:"FusedBatchNorm",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,scale:o,offset:s,mean:i,variance:c}=t;Ov(i.shape.length===c.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Ov(null==s||i.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Ov(null==o||i.shape.length===o.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks.")),BT([r,i,c,o,s],"batchNorm");let{varianceEpsilon:l}=a;null==l&&(l=.001);const u=n.data.get(r.dataId).values,h=n.data.get(i.dataId).values,d=n.data.get(c.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),f=s?n.data.get(s.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=f.length,y=p.length,b=d.length,v=h.length;let x=0,w=0,k=0,S=0;for(let I=0;I<u.length;++I)m[I]=f[x++]+(u[I]-h[w++])*p[k++]/Math.sqrt(d[S++]+l),x>=g&&(x=0),w>=v&&(w=0),k>=y&&(k=0),S>=b&&(S=0);return n.makeTensorInfo(r.shape,r.dtype,m)}};function $C(e,t,n,a,r){const o=function(e,t,n){let a=n.length;for(let r=0;r<n.length;r++)if(n[r]>1){a=r;break}for(let r=a+1;r<n.length;r++)if(t[r]>0||n[r]!==e[r])return!1;return!0}(a,t,n),s=Dv(n),i=Hv(a);if(o){const n=function(e,t){let n=e.length>0?e[e.length-1]:1;for(let a=0;a<e.length-1;a++)n+=e[a]*t[a];return n}(t,i);return"string"===r?e.slice(n,n+s):e.subarray(n,n+s)}const c=HS(a,r,"string"===r?zT(e):e),l=HS(n,r);for(let u=0;u<l.size;++u){const e=l.indexToLoc(u),n=e.map(((e,n)=>e+t[n]));l.set(c.get(...n),...e)}return"string"===r?l.values.map((e=>Sk(e))):l.values}function eE(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:o,size:s}=a;BT(r,"slice");const[i,c]=function(e,t,n){let a;const r=e.shape.length;let o;return a="number"===typeof t?[t,...new Array(r-1).fill(0)]:t.length<r?t.concat(new Array(r-t.length).fill(0)):t.slice(),a.forEach((e=>{Ov(-1!==e,(()=>"slice() does not support negative begin indexing."))})),o=null==n?new Array(r).fill(-1):"number"===typeof n?[n,...new Array(r-1).fill(-1)]:n.length<r?n.concat(new Array(r-n.length).fill(-1)):n,o=o.map(((t,n)=>t>=0?t:(Ov(-1===t,(()=>"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,"."))),e.shape[n]-a[n]))),[a,o]}(r,o,s);!function(e,t,n){const a=e.shape.length;Ov(a===t.length,(()=>"Error in slice".concat(a,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(a,")."))),Ov(a===n.length,(()=>"Error in slice".concat(a,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(a,").")));for(let r=0;r<a;++r)Ov(t[r]+n[r]<=e.shape[r],(()=>"Error in slice".concat(a,"D: begin[").concat(r,"] + size[").concat(r,"] ")+"(".concat(t[r]+n[r],") would overflow input.shape[").concat(r,"] (").concat(e.shape[r],")")))}(r,i,c);const l=$C(n.data.get(r.dataId).values,i,c,r.shape,r.dtype);return n.makeTensorInfo(c,r.dtype,l)}const tE={kernelName:Ew,backendName:"cpu",kernelFunc:eE};const nE={kernelName:"BatchToSpaceND",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:o,crops:s}=a;BT([r],"batchToSpaceND");const i=o.reduce(((e,t)=>e*t)),c=bT(r.shape,o,i),l=vT(c.length,o.length),u=xT(r.shape,o,i),h=function(e,t){const n=[0];for(let a=0;a<t;++a)n.push(e[a][0]);return n}(s,o.length),d=function(e,t,n){const a=e.slice(0,1);for(let r=0;r<n;++r)a.push(e[r+1]-t[r][0]-t[r][1]);return a}(u,s,o.length),p=SC({inputs:{x:r},backend:n,attrs:{shape:c}}),f=DC({inputs:{x:p},backend:n,attrs:{perm:l}}),m=SC({inputs:{x:f},backend:n,attrs:{shape:u}}),g=eE({inputs:{x:m},backend:n,attrs:{begin:h,size:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}};function aE(e,t,n,a,r){const o=Dv(a),s=Xv(r,n);for(let i=0;i<e.length;i++){const n=e[i];if(n<0)throw new Error("Input x must be non-negative!");n>=r||(s[n]+=o>0?t[i]:1)}return s}function rE(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e.shape[0],o=e.shape[1],s=HS([r,n],t.dtype);for(let i=0;i<r;i++)for(let r=0;r<o;r++){const o=e.get(i,r);if(o<0)throw new Error("Input x must be non-negative!");o>=n||(a?s.set(1,i,o):t.size>0?s.set(s.get(i,o)+t.get(i,r),i,o):s.set(s.get(i,o)+1,i,o))}return s}const oE={kernelName:bx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:o}=t,{size:s}=a,i=aE(n.data.get(r.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,i)}},sE=QT(((e,t)=>e&t)),iE={kernelName:vx,backendName:"cpu",kernelFunc:yC(vx,sE)};const cE={kernelName:"BroadcastArgs",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:a,s1:r}=t,o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,i=kI(Array.from(o),Array.from(s));return n.makeTensorInfo([i.length],"int32",Int32Array.from(i))}},lE=VT((e=>Math.ceil(e))),uE={kernelName:wx,backendName:"cpu",kernelFunc:jT(wx,lE)},hE={kernelName:kx,backendName:"cpu",kernelFunc:GT(kx,((e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}))},dE={kernelName:Ix,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,a=new Float32Array(Dv(t.shape)),r=n.data.get(t.dataId),o=r.complexTensorInfos.real,s=r.complexTensorInfos.imag,i=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values;for(let l=0;l<i.length;l++){const e=i[l],t=c[l];a[l]=Math.hypot(e,t)}return n.makeOutput(a,t.shape,"float32")}};function pE(e,t,n,a){const r=Wv(n,Dv(t));if(a&&"string"!==n){let t=0;e.forEach((e=>{const n=Dv(e.shape);r.set(e.vals,t),t+=n}))}else{let a=0;e.forEach((e=>{const o="string"===n?zT(e.vals):e.vals;let s=0;for(let n=0;n<e.shape[0];++n){const i=n*t[1]+a;for(let t=0;t<e.shape[1];++t)r[i+t]=o[s++]}a+=e.shape[1]}))}return r}function fE(e){const{inputs:t,backend:n}=e,{input:a}=t,r=n.data.get(a.dataId).complexTensorInfos.imag,o=n.data.get(r.dataId).values;return n.makeTensorInfo(r.shape,r.dtype,o)}const mE={kernelName:Hx,backendName:"cpu",kernelFunc:fE};function gE(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a,o=zv(r,t[0].shape)[0];!function(e,t){const n=e[0].length;e.forEach(((e,t)=>{Ov(e.length===n,(()=>"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")))})),Ov(t>=0&&t<n,(()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")));const a=e[0];e.forEach(((e,r)=>{for(let o=0;o<n;o++)Ov(o===t||e[o]===a[o],(()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(r,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(a,") ")+"along the non-concatenated axis ".concat(r,".")))}))}(t.map((e=>e.shape)),o);let s=aT(t.map((e=>e.shape)),o);if(0===Dv(s))return n.makeTensorInfo(s,t[0].dtype,[]);const i=t.filter((e=>Dv(e.shape)>0));if(1===i.length)return qT({inputs:{x:i[0]},backend:n});if("complex64"===i[0].dtype){const e=i.map((e=>dC({inputs:{input:e},backend:n}))),t=i.map((e=>fE({inputs:{input:e},backend:n}))),a=gE({inputs:e,backend:n,attrs:{axis:o}}),r=gE({inputs:t,backend:n,attrs:{axis:o}}),s=lC({inputs:{real:a,imag:r},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(r),s}const c=i.map((e=>{const t=Dv(e.shape.slice(o));return SC({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),l=c.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));s=aT(c.map((e=>e.shape)),1);const u=1===c[0].shape[0],h=pE(l,s,t[0].dtype,u),d=aT(i.map((e=>e.shape)),o),p=n.makeTensorInfo(d,t[0].dtype,h);return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}const yE={kernelName:Tx,backendName:"cpu",kernelFunc:gE};function bE(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:s,pad:i,dataFormat:c,dilations:l,dimRoundingMode:u}=a;BT([r,o],"conv2d");const h=gT(c),d=iT(r.shape,o.shape,s,l,i,u,!1,h),p=d.filterHeight,f=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,y=d.padInfo.left,b=d.padInfo.top,v="channelsLast"===d.dataFormat,x=new zk(d.outShape,r.dtype),w=Hv(r.shape),k=Hv(o.shape),S=w[0],I=v?w[1]:w[2],T=v?w[2]:1,C=v?1:w[1],E=x.strides[0],N=v?x.strides[1]:x.strides[2],R=v?x.strides[2]:1,A=v?1:x.strides[1],_=n.data.get(r.dataId).values,O=n.data.get(o.dataId).values,F=x.values;for(let D=0;D<d.batchSize;++D){const e=D*S,t=D*E;for(let n=0;n<d.outHeight;++n){const a=t+n*N,r=n*d.strideHeight-b;for(let t=0;t<p;++t){const n=r+t*m;if(n<0||n>=d.inHeight)continue;const o=t*k[0],s=e+n*I;for(let e=0;e<d.outWidth;++e){const t=a+e*R,n=e*d.strideWidth-y;for(let e=0;e<f;++e){const a=n+e*g;if(a<0||a>=d.inWidth)continue;const r=s+a*T;let i=o+e*k[1];for(let e=0;e<d.inChannels;++e){const n=_[r+e*C];for(let e=0;e<d.outChannels;++e)F[t+e*A]+=n*O[i+e];i+=d.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,F)}const vE={kernelName:"Conv2D",backendName:"cpu",kernelFunc:bE};const xE={kernelName:"Conv2DBackpropFilter",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:s,pad:i,dataFormat:c,dimRoundingMode:l,filterShape:u}=a;BT([r,o],"conv2dBackpropFilter");const h=gT(c),d=iT(r.shape,u,s,1,i,l,!1,h),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=d,y="channelsLast"===d.dataFormat,b=new zk(d.filterShape,"float32"),v=d.padInfo.left,x=d.padInfo.top,w=n.data.get(r.dataId).values,k=n.data.get(o.dataId).values,S=new zk(r.shape,r.dtype,w),I=new zk(o.shape,o.dtype,k);for(let T=0;T<m;++T){const e=Math.max(0,Math.ceil((x-T)/p)),t=Math.min(d.outHeight,(d.inHeight+x-T)/p);for(let n=0;n<g;++n){const a=Math.max(0,Math.ceil((v-n)/f)),r=Math.min(d.outWidth,(d.inWidth+v-n)/f);for(let o=0;o<d.inChannels;++o)for(let s=0;s<d.outChannels;++s){let i=0;for(let c=0;c<d.batchSize;++c)for(let l=e;l<t;++l){const e=T+l*p-x;for(let t=a;t<r;++t){const a=n+t*f-v;i+=y?S.get(c,e,a,o)*I.get(c,l,t,s):S.get(c,o,e,a)*I.get(c,s,l,t)}}b.set(i,T,n,o,s)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const wE={kernelName:"Conv2DBackpropInput",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{inputShape:s,strides:i,pad:c,dataFormat:l,dimRoundingMode:u}=a;BT([r,o],"conv2dBackpropInput");const h=Hv(o.shape),d=Hv(r.shape);let p=gT(l);const f=iT(s,o.shape,i,1,c,u,!1,p),m=new zk(f.inShape,"float32"),g=m.values,y=n.data.get(r.dataId).values,b=n.data.get(o.dataId).values,[v,x,w]=h,{batchSize:k,filterHeight:S,filterWidth:I,inChannels:T,inHeight:C,inWidth:E,outChannels:N,outHeight:R,outWidth:A,strideHeight:_,strideWidth:O}=f;p=f.dataFormat;const F=S-1-f.padInfo.top,D=I-1-f.padInfo.left,L="channelsLast"===p,M=m.strides[0],P=L?m.strides[1]:m.strides[2],z=L?m.strides[2]:1,B=L?1:m.strides[1],W=d[0],U=L?d[1]:d[2],V=L?d[2]:1,G=L?1:d[1];for(let j=0;j<k;++j)for(let e=0;e<T;++e)for(let t=0;t<C;++t){const n=t-F,a=Math.max(0,Math.ceil(n/_)),r=Math.min(R,(S+n)/_);for(let o=0;o<E;++o){const s=o-D,i=Math.max(0,Math.ceil(s/O)),c=Math.min(A,(I+s)/O);let l=0;for(let t=a;t<r;++t){const a=t*_-n;for(let n=i;n<c;++n){const r=W*j+U*t+V*n,o=v*(S-1-a)+x*(I-1-(n*O-s))+w*e;for(let e=0;e<N;++e){l+=y[r+G*e]*b[o+e]}}}g[M*j+P*t+z*o+B*e]=l}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const kE={kernelName:"Conv3D",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:s,pad:i,dilations:c}=a;BT([r,o],"conv3d");const l=cT(r.shape,o.shape,s,c,i),{filterDepth:u,filterHeight:h,filterWidth:d,dilationDepth:p,dilationHeight:f,dilationWidth:m,padInfo:g}=l,y=g.front,b=g.left,v=g.top,x=new zk(l.outShape,r.dtype),w=n.data.get(r.dataId).values,k=n.data.get(o.dataId).values,S=x.values,I=Hv(r.shape),T=Hv(o.shape);for(let C=0;C<l.batchSize;++C){const e=C*I[0],t=C*x.strides[0];for(let n=0;n<l.outDepth;++n){const a=t+n*x.strides[1],r=n*l.strideDepth-y;for(let t=0;t<u;++t){const n=r+t*p;if(n<0||n>=l.inDepth)continue;const o=t*T[0],s=e+n*I[1];for(let e=0;e<l.outHeight;++e){const t=a+e*x.strides[2],n=e*l.strideHeight-v;for(let e=0;e<h;++e){const a=n+e*f;if(a<0||a>=l.inHeight)continue;const r=o+e*T[1],i=s+a*I[2];for(let e=0;e<l.outWidth;++e){const n=t+e*l.outChannels,a=e*l.strideWidth-b;for(let e=0;e<d;++e){const t=a+e*m;if(t<0||t>=l.inWidth)continue;const o=r+e*T[2],s=i+t*l.inChannels;let c=o;for(let e=0;e<l.inChannels;++e){const t=w[s+e];for(let e=0;e<l.outChannels;++e)S[n+e]+=t*k[c+e];c+=l.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const SE={kernelName:"Conv3DBackpropFilterV2",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:s,pad:i,filterShape:c}=a;BT([r,o],"conv3dBackpropFilterV2");const l=Hv(r.shape),u=Hv(o.shape),h=cT(r.shape,c,s,1,i),d=h.strideDepth,p=h.strideHeight,f=h.strideWidth,m=h.filterDepth,g=h.filterHeight,y=h.filterWidth,b=new zk(h.filterShape,"float32"),v=b.values,[x,w,k,S]=b.strides,I=n.data.get(o.dataId).values,[T,C,E,N]=u,R=n.data.get(r.dataId).values,[A,_,O,F]=l,D=h.padInfo.front,L=h.padInfo.left,M=h.padInfo.top;for(let P=0;P<m;++P){const e=Math.max(0,Math.ceil((D-P)/d)),t=Math.min(h.outDepth,(h.inDepth+D-P)/d),n=P*x;for(let a=0;a<g;++a){const r=Math.max(0,Math.ceil((M-a)/p)),o=Math.min(h.outHeight,(h.inHeight+M-a)/p),s=a*w+n;for(let n=0;n<y;++n){const i=Math.max(0,Math.ceil((L-n)/f)),c=Math.min(h.outWidth,(h.inWidth+L-n)/f),l=n*k+s;for(let s=0;s<h.inChannels;++s){const u=s*S+l;for(let l=0;l<h.outChannels;++l){let m=0;for(let u=0;u<h.batchSize;++u){const h=u*A,g=u*T;for(let u=e;u<t;++u){const e=(P+u*d-D)*_+h,t=u*C+g;for(let u=r;u<o;++u){const r=(a+u*p-M)*O+e,o=u*E+t;for(let e=i;e<c;++e){const t=e*N+o;m+=R[(n+e*f-L)*F+r+s]*I[t+l]}}}}v[u+l]=m}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const IE={kernelName:"Conv3DBackpropInputV2",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{pad:s,strides:i,inputShape:c}=a;BT([r],"conv3dBackpropInputV2");const l=Hv(r.shape),u=Hv(o.shape),h=cT(c,o.shape,i,1,s),d=new zk(h.inShape,"float32"),p=d.values,[f,m,g,y]=d.strides,b=n.data.get(r.dataId).values,[v,x,w,k]=l,S=n.data.get(o.dataId).values,[I,T,C,E]=u,{batchSize:N,filterDepth:R,filterHeight:A,filterWidth:_,inChannels:O,inDepth:F,inHeight:D,inWidth:L,outChannels:M,outDepth:P,outHeight:z,outWidth:B,strideDepth:W,strideHeight:U,strideWidth:V}=h,G=R-1-h.padInfo.front,j=A-1-h.padInfo.top,H=_-1-h.padInfo.left;for(let K=0;K<N;++K)for(let e=0;e<O;++e)for(let t=0;t<F;++t){const n=t-G,a=Math.max(0,Math.ceil(n/W)),r=Math.min(P,(R+n)/W);for(let o=0;o<D;++o){const s=o-j,i=Math.max(0,Math.ceil(s/U)),c=Math.min(z,(A+s)/U);for(let l=0;l<L;++l){const u=l-H,h=Math.max(0,Math.ceil(u/V)),d=Math.min(B,(_+u)/V);let N=0;for(let t=a;t<r;++t){const a=t*W-n;for(let n=i;n<c;++n){const r=n*U-s;for(let o=h;o<d;++o){const s=v*K+x*t+w*n+k*o,i=I*(R-1-a)+T*(A-1-r)+C*(_-1-(o*V-u))+E*e;for(let e=0;e<M;++e){N+=b[s+e]*S[i+e]}}}}p[f*K+m*t+g*o+y*l+e]=N}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},TE={kernelName:"Cos",backendName:"cpu",kernelFunc:GT("Cos",(e=>Math.cos(e)))},CE={kernelName:Cx,backendName:"cpu",kernelFunc:GT(Cx,(e=>Math.cosh(e)))};const EE={kernelName:Ex,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{image:r,boxes:o,boxInd:s}=t,{cropSize:i,method:c,extrapolationValue:l}=a,[u,h,d,p]=r.shape,f=o.shape[0],[m,g]=i,y=HS([f,m,g,p],"float32"),b=n.data.get(o.dataId).values,v=n.data.get(s.dataId).values,x=n.data.get(r.dataId).values,w=Hv(r.shape),k=Hv(y.shape);for(let S=0;S<f;S++){const e=4*S,t=b[e],n=b[e+1],a=b[e+2],r=b[e+3],o=v[S];if(o>=u)continue;const s=m>1?(a-t)*(h-1)/(m-1):0,i=g>1?(r-n)*(d-1)/(g-1):0;for(let u=0;u<m;u++){const e=m>1?t*(h-1)+u*s:.5*(t+a)*(h-1);if(e<0||e>h-1)for(let t=0;t<g;t++)for(let e=0;e<p;e++){const n=e+t*k[2]+u*k[1]+S*k[0];y.values[n]=l}else if("bilinear"===c){const t=Math.floor(e),a=Math.ceil(e),s=e-t;for(let e=0;e<g;e++){const c=g>1?n*(d-1)+e*i:.5*(n+r)*(d-1);if(c<0||c>d-1){for(let t=0;t<p;t++){const n=t+e*k[2]+u*k[1]+S*k[0];y.values[n]=l}continue}const h=Math.floor(c),f=Math.ceil(c),m=c-h;for(let n=0;n<p;n++){let r=n+h*w[2]+t*w[1]+o*w[0];const i=x[r];r=n+f*w[2]+t*w[1]+o*w[0];const c=x[r];r=n+h*w[2]+a*w[1]+o*w[0];const l=x[r];r=n+f*w[2]+a*w[1]+o*w[0];const d=i+(c-i)*m,p=l+(x[r]-l)*m;r=n+e*k[2]+u*k[1]+S*k[0],y.values[r]=d+(p-d)*s}}}else for(let t=0;t<g;++t){const a=g>1?n*(d-1)+t*i:.5*(n+r)*(d-1);if(a<0||a>d-1){for(let e=0;e<p;e++){const n=e+t*k[2]+u*k[1]+S*k[0];y.values[n]=l}continue}const s=Math.round(a),c=Math.round(e);for(let e=0;e<p;e++){const n=e+s*w[2]+c*w[1]+o*w[0],a=e+t*k[2]+u*k[1]+S*k[0];y.values[a]=x[n]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};const NE={kernelName:"Cumprod",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,exclusive:s,reverse:i}=a;BT(r,"cumprod");const c=$I([o],r.shape.length);let l=r;null!=c&&(l=DC({inputs:{x:r},backend:n,attrs:{perm:c}}));const u=tT(1,r.shape.length)[0];if(u!==l.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(u));const h=Qk(l.dtype,"int32"),d=Yv(Dv(l.shape),h),p=n.data.get(l.dataId).values,f=l.shape[l.shape.length-1],m=i?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=m(y,e);if(0===e)d[t]=s?1:p[t];else{const n=m(y,e-1);d[t]=s?p[n]*d[n]:p[t]*d[n]}}const g=n.makeTensorInfo(l.shape,h,d);if(null!=c){const e=DC({inputs:{x:g},backend:n,attrs:{perm:eT(c)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(l),e}return g}};const RE={kernelName:"Cumsum",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,exclusive:s,reverse:i}=a;BT(r,"cumsum");const c=$I([o],r.shape.length);let l=r;null!=c&&(l=DC({inputs:{x:r},backend:n,attrs:{perm:c}}));const u=tT(1,r.shape.length)[0];if(u!==l.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(u));const h=Qk(l.dtype,"int32"),d=Xv(Dv(l.shape),h),p=n.data.get(l.dataId).values,f=l.shape[l.shape.length-1],m=i?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=m(y,e);if(0===e)d[t]=s?0:p[t];else{const n=m(y,e-1);d[t]=s?p[n]+d[n]:p[t]+d[n]}}const g=n.makeTensorInfo(l.shape,h,d);if(null!=c){const e=DC({inputs:{x:g},backend:n,attrs:{perm:eT(c)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(l),e}return g}};const AE={kernelName:"DenseBincount",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:o}=t,{size:s,binaryOutput:i}=a;if(1===r.shape.length){const e=aE(n.data.get(r.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,e)}if(2===r.shape.length){const e=rE(n.bufferSync(r),n.bufferSync(o),s,i);return n.makeTensorInfo(e.shape,o.dtype,e.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(r.shape.length,"."))}};const _E={kernelName:"DepthToSpace",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockSize:o,dataFormat:s}=a;Ov("NHWC"===s,(()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(s)));const i=r.shape[0],c=r.shape[1],l=r.shape[2],u=r.shape[3],h=c*o,d=l*o,p=u/(o*o),f=n.data.get(r.dataId).values,m=new Float32Array(i*h*d*p);let g=0;for(let y=0;y<i;++y)for(let e=0;e<h;++e){const t=Math.floor(e/o),n=e%o;for(let e=0;e<d;++e){const a=Math.floor(e/o),r=(n*o+e%o)*p;for(let e=0;e<p;++e){const n=e+r+u*(a+l*(t+c*y));m[g++]=f[n]}}}return n.makeTensorInfo([i,h,d,p],r.dtype,m)}};function OE(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:s,pad:i,dilations:c,dimRoundingMode:l}=a;BT([r,o],"depthwiseConv2DNative");const u=Hv(r.shape),h=Hv(o.shape);let d=c;null==d&&(d=[1,1]),Ov(mT(s,d),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(s," and dilations '").concat(d,"'")));const p=iT(r.shape,o.shape,s,d,i,l,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:b}=p,v=b.left,x=b.top,w=p.outChannels/p.inChannels,k=new zk(p.outShape,r.dtype),S=n.data.get(r.dataId).values,I=n.data.get(o.dataId).values,T=k.values;for(let C=0;C<p.batchSize;++C){const e=C*u[0],t=C*k.strides[0];for(let n=0;n<p.outHeight;++n){const a=t+n*k.strides[1],r=n*p.strideHeight-x;for(let t=0;t<f;++t){const n=r+t*g;if(n<0||n>=p.inHeight)continue;const o=t*h[0],s=e+n*u[1];for(let e=0;e<p.outWidth;++e){const t=a+e*k.strides[2],n=e*p.strideWidth-v;for(let e=0;e<m;++e){const a=n+e*y;if(a<0||a>=p.inWidth)continue;const r=o+e*h[1],i=s+a*p.inChannels;let c=t,l=r;for(let e=0;e<p.inChannels;++e){const t=S[i+e];for(let e=0;e<w;++e)T[c+e]+=t*I[l+e];c+=w,l+=w}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const FE={kernelName:"DepthwiseConv2dNative",backendName:"cpu",kernelFunc:OE};const DE={kernelName:"DepthwiseConv2dNativeBackpropFilter",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:s,dilations:i,pad:c,dimRoundingMode:l,filterShape:u}=a;BT([r,o],"depthwiseConv2dNativeBackpropFilter");const h=iT(r.shape,u,s,i,c,l,!0),{strideHeight:d,strideWidth:p,filterHeight:f,filterWidth:m}=h,g=new zk(h.filterShape,"float32"),y=h.padInfo.left,b=h.padInfo.top,v=h.outChannels/h.inChannels,x=n.data.get(r.dataId).values,w=new zk(r.shape,r.dtype,x),k=n.data.get(o.dataId).values,S=new zk(o.shape,o.dtype,k);for(let I=0;I<f;++I){const e=Math.max(0,Math.ceil((b-I)/d)),t=Math.min(h.outHeight,(h.inHeight+b-I)/d);for(let n=0;n<m;++n){const a=Math.max(0,Math.ceil((y-n)/p)),r=Math.min(h.outWidth,(h.inWidth+y-n)/p);for(let o=0;o<h.outChannels;++o){const s=Math.trunc(o/v),i=o%v;let c=0;for(let l=0;l<h.batchSize;++l)for(let i=e;i<t;++i){const e=I+i*d-b;for(let t=a;t<r;++t){const a=n+t*p-y;c+=w.get(l,e,a,s)*S.get(l,i,t,o)}}g.set(c,I,n,s,i)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const LE={kernelName:"DepthwiseConv2dNativeBackpropInput",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{strides:s,dilations:i,pad:c,dimRoundingMode:l,inputShape:u}=a;BT([r,o],"depthwiseConv2DNativeBackpropInput");const h=Hv(r.shape),d=Hv(o.shape),p=iT(u,o.shape,s,i,c,l,!0),f=new zk(p.inShape,"float32"),m=f.values,[g,y,b]=f.strides,v=n.data.get(r.dataId).values,[x,w,k]=h,S=n.data.get(o.dataId).values,[I,T,C]=d,{batchSize:E,filterHeight:N,filterWidth:R,inChannels:A,inHeight:_,inWidth:O,outChannels:F,outHeight:D,outWidth:L,strideHeight:M,strideWidth:P}=p,z=N-1-p.padInfo.top,B=R-1-p.padInfo.left,W=F/A;for(let U=0;U<E;++U)for(let e=0;e<A;++e)for(let t=0;t<_;++t){const n=t-z,a=Math.max(0,Math.ceil(n/M)),r=Math.min(D,(N+n)/M);for(let o=0;o<O;++o){const s=o-B,i=Math.max(0,Math.ceil(s/P)),c=Math.min(L,(R+s)/P);let l=0;for(let t=a;t<r;++t){const a=t*M-n;for(let n=i;n<c;++n){const r=x*U+w*t+k*n,o=I*(N-1-a)+T*(R-1-(n*P-s))+C*e;for(let t=0;t<W;++t){l+=v[r+(e*W+t)]*S[o+t]}}}m[g*U+y*t+b*o+e]=l}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const ME={kernelName:"Diag",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,r=Dv(a.shape),o=n.data.get(a.dataId).values,s=HS([r,r],a.dtype),i=s.values;for(let l=0;l<o.length;l++)i[l*r+l]=o[l];const c=[...a.shape,...a.shape];return n.makeTensorInfo(c,s.dtype,s.values)}},PE={kernelName:"Dilation2D",backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:a}=e;const{x:r,filter:o}=t,{strides:s,pad:i,dilations:c}=a,l=n,u=l.data.get(r.dataId).values,h=r.shape.length,d=l.data.get(o.dataId).values,p=o.shape.length,{batchSize:f,inHeight:m,inWidth:g,inChannels:y,outHeight:b,outWidth:v,padInfo:x,strideHeight:w,strideWidth:k,filterHeight:S,filterWidth:I,dilationHeight:T,dilationWidth:C,outShape:E}=rT(r.shape,o.shape,s,i,"NHWC",c),N=Dv(E),R=E.length,A=Wv(r.dtype,N);for(let _=0;_<f;++_)for(let e=0;e<b;++e){const t=e*w-x.top;for(let n=0;n<v;++n){const a=n*k-x.left;for(let s=0;s<y;++s){let i=Number.MIN_SAFE_INTEGER;for(let e=0;e<S;++e){const n=t+e*T;if(n>=0&&n<m)for(let t=0;t<I;++t){const c=a+t*C;if(c>=0&&c<g){const a=Jv([_,n,c,s],h,Hv(r.shape)),l=Jv([e,t,s],p,Hv(o.shape)),f=u[a]+d[l];f>i&&(i=f)}}}A[Jv([_,e,n,s],R,Hv(E))]=i}}}return{dataId:l.write(wk(A,r.dtype),E,r.dtype),shape:E,dtype:r.dtype}}},zE={kernelName:Rx,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:a}=e;const{x:r,filter:o,dy:s}=t,{strides:i,pad:c,dilations:l}=a,u=n,h=qv(r.shape,u.data.get(r.dataId).values),d=qv(o.shape,u.data.get(o.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:y,outWidth:b,padInfo:v,strideHeight:x,strideWidth:w,filterHeight:k,filterWidth:S,dilationHeight:I,dilationWidth:T,outShape:C}=rT(r.shape,o.shape,i,c,"NHWC",l);Ov(s.rank===C.length,(()=>"Error in ".concat(Rx,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(s.rank)));const E=qv(C,u.data.get(s.dataId).values),N=Zv(o.shape,o.dtype);for(let R=0;R<p;++R)for(let e=0;e<y;++e){const t=e*x-v.top;for(let n=0;n<b;++n){const a=n*w-v.left;for(let r=0;r<g;++r){let o=Number.MIN_SAFE_INTEGER,s=0,i=0;for(let e=0;e<k;++e){const n=t+e*I;if(n>=0&&n<f)for(let t=0;t<S;++t){const c=a+t*T;if(c>=0&&c<m){const a=h[R][n][c][r]+d[e][t][r];a>o&&(o=a,s=e,i=t)}}}N[s][i][r]+=E[R][e][n][r]}}}return{dataId:u.write(wk(N,r.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},BE={kernelName:Nx,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:a}=e;const{x:r,filter:o,dy:s}=t,{strides:i,pad:c,dilations:l}=a,u=n,h=qv(r.shape,u.data.get(r.dataId).values),d=qv(o.shape,u.data.get(o.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:y,outWidth:b,padInfo:v,strideHeight:x,strideWidth:w,filterHeight:k,filterWidth:S,dilationHeight:I,dilationWidth:T,outShape:C}=rT(r.shape,o.shape,i,c,"NHWC",l);Ov(s.rank===C.length,(()=>"Error in ".concat(Nx,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(s.rank)));const E=qv(C,u.data.get(s.dataId).values),N=Zv(r.shape,r.dtype);for(let R=0;R<p;++R)for(let e=0;e<y;++e){const t=e*x-v.top;for(let n=0;n<b;++n){const a=n*w-v.left;for(let r=0;r<g;++r){let o=Number.MIN_SAFE_INTEGER,s=t<0?0:t,i=a<0?0:a;for(let e=0;e<k;++e){const n=t+e*I;if(n>=0&&n<f)for(let t=0;t<S;++t){const c=a+t*T;if(c>=0&&c<m){const a=h[R][n][c][r]+d[e][t][r];a>o&&(o=a,s=n,i=c)}}}N[R][s][i][r]+=E[R][e][n][r]}}}return{dataId:u.write(wk(N,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};const WE={kernelName:"Draw",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{image:r}=t,{canvas:o,options:s}=a,{contextOptions:i,imageOptions:c}=s||{},l=(null===c||void 0===c?void 0:c.alpha)||1,u=(null===i||void 0===i?void 0:i.contextType)||"2d";if("2d"!==u)throw new Error("Context type ".concat(i.contextType," is not supported by the CPU backend."));const h=o.getContext(u,(null===i||void 0===i?void 0:i.contextAttributes)||{});if(null==h)throw new Error("Could not get the context with ".concat(u," type."));const[d,p]=r.shape.slice(0,2),f=2===r.shape.length?1:r.shape[2],m=n.data.get(r.dataId).values,g="float32"===r.dtype?255:1,y=new Uint8ClampedArray(p*d*4);for(let v=0;v<d*p;++v){const e=[0,0,0,255*l];for(let n=0;n<f;n++){const t=m[v*f+n];if("float32"===r.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(t,"."))}else if("int32"===r.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(t,"."));1===f?(e[0]=t*g,e[1]=t*g,e[2]=t*g):e[n]=t*g}const t=4*v;y[t+0]=Math.round(e[0]),y[t+1]=Math.round(e[1]),y[t+2]=Math.round(e[2]),y[t+3]=Math.round(e[3])}o.width=p,o.height=d;const b=new ImageData(y,p,d);return h.putImageData(b,0,0),r}},UE=QT(((e,t)=>e*t)),VE=bC(((e,t,n,a)=>({real:e*n-t*a,imag:e*a+t*n}))),GE=yC(sw,UE,VE),jE={kernelName:sw,backendName:"cpu",kernelFunc:GE};function HE(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a;let i;BT(r,"sum"),i="bool"===r.dtype?mC({inputs:{x:r},backend:n,attrs:{dtype:"int32"}}):qT({inputs:{x:r},backend:n});const c=i.shape.length,l=zv(o,i.shape),u=$I(l,c);let h=l,d=i;null!=u&&(d=DC({inputs:{x:i},backend:n,attrs:{perm:u}}),h=tT(h.length,c)),JI("sum",h,d.shape.length);const[p,f]=ZI(d.shape,h);let m=hC(n,p,Qk(d.dtype,"int32"));const g=Dv(f),y=n.data.get(m.dataId).values,b=n.data.get(d.dataId).values;for(let v=0;v<y.length;++v){const e=v*g;let t=0;for(let n=0;n<g;++n)t+=b[e+n];y[v]=t}if(s){const e=m;m=SC({inputs:{x:m},backend:n,attrs:{shape:QI(m.shape,l)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(i),null!=u&&n.disposeIntermediateTensorInfo(d),m}const KE={kernelName:"Sum",backendName:"cpu",kernelFunc:HE};const qE={kernelName:_x,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{equation:r}=a,o=t,{allDims:s,summedDims:i,idDims:c}=function(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(ET,"").length)/CT.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(CT,'").'));const[a,r]=e.split(CT);Ov(-1===a.indexOf(RT),(()=>'The ellipsis notation ("'.concat(RT,'") is not supported yet.')));const o=a.split(NT),s=o.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const i=[];for(let h=0;h<r.length;++h){const e=r[h];if(!o.some((t=>-1!==t.indexOf(e))))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===i.indexOf(e)&&i.push(e)}for(let h=0;h<a.length;++h){const e=a[h];-1===i.indexOf(e)&&e!==NT&&i.push(e)}const c=new Array(o.length);for(let h=0;h<s;++h){if(new Set(o[h].split("")).size!==o[h].length)throw new Error("Found duplicate axes in input component ".concat(o[h],". ")+"Support for duplicate axes in input is not implemented yet.");c[h]=[];for(let e=0;e<o[h].length;++e)c[h].push(i.indexOf(o[h][e]))}const l=i.length,u=[];for(let h=r.length;h<l;++h)u.push(h);return{allDims:i,summedDims:u,idDims:c}}(r,o.length);!function(e,t,n){const a=new Array(e);for(let r=0;r<n.length;++r){const e=n[r].shape;for(let n=0;n<t[r].length;++n)void 0===a[t[r][n]]?a[t[r][n]]=e[n]:Ov(a[t[r][n]]===e[n],(()=>"Expected dimension ".concat(a[t[r][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(e),", ")+"but got dimension ".concat(e[n])))}}(s.length,c,o);const{path:l,steps:u}=function(e,t){const n=e,a=[];let r=0;0===e.length&&n.push(-1),r=e.length+1;for(let s=0;s<r;++s)a.push([]);const o=[];for(let s=0;s<n.length;++s){const e=OT(t,n[s]);for(const t of e)-1===o.indexOf(t)&&(a[s].push(t),o.push(t))}return{path:n,steps:a}}(i,c),h=u.length;let d=null,p=s.length;const f=[];for(let m=0;m<h;++m){for(const e of u[m]){const{permutationIndices:t,expandDims:a}=AT(p,c[e]);let r;_T(t)?r=o[e]:(r=DC({inputs:{x:o[e]},backend:n,attrs:{perm:t}}),f.push(r));const s=r.shape.slice();for(let e=0;e<a.length;++e)s.splice(a[e],0,1);Lv(r.shape,s)||(r=SC({inputs:{x:r},backend:n,attrs:{shape:s}}),f.push(r)),null===d?d=r:(d=GE({inputs:{a:r,b:d},backend:n}),f.push(d))}m<h-1&&(l[m]>=0&&(d=HE({inputs:{x:d},backend:n,attrs:{axis:l[m]-(s.length-p),keepDims:!1}}),f.push(d)),p--)}for(const m of f)m!==d&&n.disposeIntermediateTensorInfo(m);return d}};const YE={kernelName:"EluGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:a,y:r}=t;BT([a,r],"eluGrad");const o=new Float32Array(Dv(r.shape)),s=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values;for(let c=0;c<s.length;++c){const e=s[c];o[c]=e>=0?i[c]:i[c]*(e+1)}return n.makeTensorInfo(r.shape,"float32",o)}},XE=QT(((e,t)=>e===t?1:0)),ZE=yC(Fx,XE,null,"bool"),QE={kernelName:Fx,backendName:"cpu",kernelFunc:ZE},JE=GT("Erf",(e=>{const t=Math.sign(e),n=Math.abs(e),a=1/(1+.3275911*n);return t*(1-((((1.061405429*a-1.453152027)*a+1.421413741)*a-.284496736)*a+.254829592)*a*Math.exp(-n*n))})),$E={kernelName:"Erf",backendName:"cpu",kernelFunc:JE},eN=VT((e=>Math.exp(e))),tN=jT(Dx,eN,"float32"),nN={kernelName:Dx,backendName:"cpu",kernelFunc:tN};function aN(e){const{inputs:t,backend:n,attrs:a}=e,{input:r}=t,{dim:o}=a,s=r.shape.length,i=r.shape.slice();let c=o;return o<0&&(Ov(-(s+1)<=o,(()=>"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]"))),c=s+o+1),i.splice(c,0,1),SC({inputs:{x:r},backend:n,attrs:{shape:i}})}const rN={kernelName:Lx,backendName:"cpu",kernelFunc:aN},oN=VT((e=>Math.expm1(e))),sN={kernelName:Mx,backendName:"cpu",kernelFunc:jT(Mx,oN)},iN=QT(((e,t)=>e/t)),cN=yC(Ax,iN),lN={kernelName:Ax,backendName:"cpu",kernelFunc:cN},uN=QT(((e,t)=>e-t)),hN=bC(((e,t,n,a)=>({real:e-n,imag:t-a}))),dN=yC(Gw,uN,hN),pN={kernelName:Gw,backendName:"cpu",kernelFunc:dN};function fN(e,t,n){const a=e.shape,r=a[0],o=a[1],s=n.data.get(e.dataId),i=s.complexTensorInfos.real,c=s.complexTensorInfos.imag,l=[r,o],u=Dv(l),h=Bv("float32",u),d=Bv("float32",u);for(let g=0;g<r;g++){const e=eE({inputs:{x:i},backend:n,attrs:{begin:[g,0],size:[1,o]}}),a=eE({inputs:{x:c},backend:n,attrs:{begin:[g,0],size:[1,o]}}),r=lC({inputs:{real:e,imag:a},backend:n}),{real:s,imag:l}=mN(r,t,n),u=kT(s,l);for(let t=0;t<o;t++){const e=ST(u,t);h[g*o+t]=e.real,d[g*o+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(r)}const p=n.makeTensorInfo(l,"float32",h),f=n.makeTensorInfo(l,"float32",d),m=lC({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}function mN(e,t,n){const a=Dv(e.shape),r=n.data.get(e.dataId),o=n.data.get(r.complexTensorInfos.real.dataId).values,s=n.data.get(r.complexTensorInfos.imag.dataId).values;if(0===((i=a)&i-1)){const r=gN(o,s,a,t,n),i=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(i,"float32",r.real),t=n.makeTensorInfo(i,"float32",r.imag),o=n.makeTensorInfo([],"float32",xk(a,"float32")),s=qT({inputs:{x:o},backend:n}),c=lN.kernelFunc({inputs:{a:e,b:o},backend:n}),l=lN.kernelFunc({inputs:{a:t,b:s},backend:n}),u=n.data.get(c.dataId).values,h=n.data.get(l.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),{real:u,imag:h}}return r}{const e=function(e,t,n){const a=new Float32Array(2*t);for(let r=0;r<t;r++){let o=0,s=0;for(let a=0;a<t;a++){const i=TT(r*a,t,n),c=ST(e,a);o+=c.real*i.real-c.imag*i.imag,s+=c.real*i.imag+c.imag*i.real}n&&(o/=t,s/=t),IT(a,o,s,r)}return a}(kT(o,s),a,t);return function(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let a=0;a<e.length;a+=2)t[a/2]=e[a],n[a/2]=e[a+1];return{real:t,imag:n}}(e)}var i}function gN(e,t,n,a,r){if(1===n)return{real:e,imag:t};const o=kT(e,t),s=n/2,i=function(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),a=new Float32Array(t);for(let r=0;r<e.length;r+=4)n[Math.floor(r/4)]=e[r],a[Math.floor(r/4)]=e[r+1];return{real:n,imag:a}}(o),c=i.real,l=i.imag,u=[c.length],h=r.makeTensorInfo(u,"float32",c),d=r.makeTensorInfo(u,"float32",l),p=lC({inputs:{real:h,imag:d},backend:r}),f=function(e){const t=Math.floor(e.length/4),n=new Float32Array(t),a=new Float32Array(t);for(let r=2;r<e.length;r+=4)n[Math.floor(r/4)]=e[r],a[Math.floor(r/4)]=e[r+1];return{real:n,imag:a}}(o),m=f.real,g=f.imag,y=[m.length],b=r.makeTensorInfo(y,"float32",m),v=r.makeTensorInfo(y,"float32",g),x=lC({inputs:{real:b,imag:v},backend:r}),w=gN(c,l,s,a,r),k=w.real,S=w.imag,I=[k.length],T=r.makeTensorInfo(I,"float32",k),C=r.makeTensorInfo(I,"float32",S),E=lC({inputs:{real:T,imag:C},backend:r}),N=gN(m,g,s,a,r),R=N.real,A=N.imag,_=[R.length],O=r.makeTensorInfo(_,"float32",R),F=r.makeTensorInfo(_,"float32",A),D=lC({inputs:{real:O,imag:F},backend:r}),L=function(e,t){const n=new Float32Array(e/2),a=new Float32Array(e/2);for(let r=0;r<Math.ceil(e/2);r++){const o=(t?2:-2)*Math.PI*(r/e);n[r]=Math.cos(o),a[r]=Math.sin(o)}return{real:n,imag:a}}(n,a),M=[L.real.length],P=r.makeTensorInfo(M,"float32",L.real),z=r.makeTensorInfo(M,"float32",L.imag),B=lC({inputs:{real:P,imag:z},backend:r}),W=GE({inputs:{a:B,b:D},backend:r}),U=wC({inputs:{a:E,b:W},backend:r}),V=dN({inputs:{a:E,b:W},backend:r}),G=dC({inputs:{input:U},backend:r}),j=dC({inputs:{input:V},backend:r}),H=fE({inputs:{input:U},backend:r}),K=fE({inputs:{input:V},backend:r}),q=gE({inputs:[G,j],backend:r,attrs:{axis:0}}),Y=gE({inputs:[H,K],backend:r,attrs:{axis:0}}),X=r.data.get(q.dataId).values,Z=r.data.get(Y.dataId).values;return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(x),r.disposeIntermediateTensorInfo(T),r.disposeIntermediateTensorInfo(C),r.disposeIntermediateTensorInfo(E),r.disposeIntermediateTensorInfo(O),r.disposeIntermediateTensorInfo(F),r.disposeIntermediateTensorInfo(D),r.disposeIntermediateTensorInfo(P),r.disposeIntermediateTensorInfo(z),r.disposeIntermediateTensorInfo(B),r.disposeIntermediateTensorInfo(W),r.disposeIntermediateTensorInfo(U),r.disposeIntermediateTensorInfo(V),r.disposeIntermediateTensorInfo(G),r.disposeIntermediateTensorInfo(H),r.disposeIntermediateTensorInfo(j),r.disposeIntermediateTensorInfo(K),r.disposeIntermediateTensorInfo(q),r.disposeIntermediateTensorInfo(Y),{real:X,imag:Z}}const yN={kernelName:"FFT",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t,r=Dv(a.shape),o=a.shape[a.shape.length-1],s=SC({inputs:{x:a},backend:n,attrs:{shape:[r/o,o]}}),i=fN(s,!1,n),c=SC({inputs:{x:i},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),c}};function bN(e){const{backend:t,attrs:n}=e,{shape:a,value:r,dtype:o}=n,s=o||Gv(r),i=Wv(s,Dv(a));return function(e,t,n){e.fill(t)}(i,r),t.makeTensorInfo(a,s,i)}const vN={kernelName:Px,backendName:"cpu",kernelFunc:bN};const xN={kernelName:zx,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{image:r}=t,o=a,s=Bv(r.dtype,Dv(r.shape)),[i,c,l,u]=r.shape,h=o.data.get(r.dataId).values;for(let d=0;d<i;d++){const e=d*l*c*u;for(let t=0;t<c;t++){const n=t*(l*u);for(let t=0;t<l;t++){const a=t*u;for(let r=0;r<u;r++){const o=Math.round(l-t-1),i=e+n+a+r;let c=h[i];if(o>=0&&o<l){c=h[e+n+o*u+r]}s[i]=c}}}}return{dataId:o.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},wN=VT((e=>Math.floor(e))),kN={kernelName:Bx,backendName:"cpu",kernelFunc:jT(Bx,wN)},SN=QT(((e,t)=>Math.floor(e/t))),IN=yC(Wx,SN,null,"int32"),TN={kernelName:Wx,backendName:"cpu",kernelFunc:IN};const CN={kernelName:"FusedConv2D",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,bias:s,preluActivationWeights:i}=t,{strides:c,pad:l,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=a;let m=bE({inputs:{x:r,filter:o},backend:n,attrs:{strides:c,pad:l,dataFormat:u,dilations:h,dimRoundingMode:d}});if(s){const e=m;if("NCHW"===u&&1===s.shape.length&&1!==s.shape[0]){const e=SC({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=wC({inputs:{a:m,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else m=wC({inputs:{a:m,b:s},backend:n});n.disposeIntermediateTensorInfo(e)}if(p){const e=m;if("NCHW"===u&&"prelu"===p&&1===i.shape.length&&1!==i.shape[0]){const e=SC({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=cC(n,m,p,e,f),n.disposeIntermediateTensorInfo(e)}else m=cC(n,m,p,i,f);n.disposeIntermediateTensorInfo(e)}return m}};const EN={kernelName:"FusedDepthwiseConv2D",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,bias:s,preluActivationWeights:i}=t,{strides:c,pad:l,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=a;let m=OE({inputs:{x:r,filter:o},backend:n,attrs:{strides:c,pad:l,dataFormat:u,dilations:h,dimRoundingMode:d}});if(s){const e=m;m=wC({inputs:{a:m,b:s},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=m;m=cC(n,m,p,i,f),n.disposeIntermediateTensorInfo(e)}return m}};function NN(e,t,n,a,r,o,s,i,c){const l=HS([a,o],n);for(let u=0;u<a;u++){const n=[];let a=0;for(let t=0;t<r;t++){const o=e[u*r+t];a+=o*s[t],n.push(o)}if(a<0||a>=c/o)throw new Error("Invalid indices: ".concat(n," does not index into ").concat(i));for(let e=0;e<o;e++)l.values[u*o+e]=t.get(...t.indexToLoc(a*o+e))}return l}const RN={kernelName:"GatherNd",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:a,indices:r}=t,o=Dv(a.shape),s=r.shape,i=s[s.length-1],[c,l,u,h]=function(e,t){const n=e.shape.length,a=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(a<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(a,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[a-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[a-1]," vs. ").concat(n));if(0===Dv(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));const r=t.shape,o=r[r.length-1];let s=1;for(let h=0;h<r.length-1;++h)s*=r[h];const i=e.shape,c=r.slice();c.pop();let l=1;for(let h=o;h<n;++h)l*=i[h],c.push(i[h]);const u=[...Hv(e.shape).map((e=>e/l)),1].slice(0,o);return[c,s,l,u]}(a,r);if(0===l)return n.makeTensorInfo(c,a.dtype,[]);const d=NN(n.data.get(r.dataId).values,n.bufferSync(a),a.dtype,l,i,u,h,a.shape,o);return n.makeTensorInfo(c,a.dtype,d.values)}};function AN(e,t,n){const a=HS(n,e.dtype);for(let r=0;r<a.size;++r){const n=a.indexToLoc(r).slice(),o=n[0],s=n[2],i=t.locToIndex([o,s]);n[2]=t.values[i];const c=e.locToIndex(n);0<=c&&c<e.values.length&&(a.values[r]=e.values[c])}return a}const _N={kernelName:"GatherV2",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,indices:o}=t,{axis:s,batchDims:i}=a;BT([r,o],"gatherV2");const c=zv(s,r.shape)[0],l=n.data.get(o.dataId).values,u=r.shape[c];for(let v=0;v<l.length;++v){const e=l[v];Ov(e<=u-1&&e>=0,(()=>"GatherV2: the index value ".concat(e," is not in [0, ").concat(u-1,"]")))}let h=i;null==i&&(h=0);const d=Dv(o.shape),p=function(e,t,n,a){const r=t.shape.length,o=e.shape.length;if(0!==a&&(a<-r||a>r))throw new Error("Expect batchDims in the range of [-".concat(r,", ").concat(r,"], but got ").concat(a));if(a<0&&(a+=r),a>o)throw new Error("batchDims (".concat(a,") must be less than rank(x) (\n    ").concat(o,")."));if(n<a)throw new Error("batchDims (".concat(a,") must be less than or equal to axis (").concat(n,")."));for(let h=0;h<a;++h)if(e.shape[h]!==t.shape[h])throw new Error("x.shape[".concat(h,"]: ").concat(e.shape[h]," should be equal to indices.shape[").concat(h,"]: ").concat(t.shape[h],"."));const s=e.shape[n],i=[];let c=1,l=1,u=1;for(let h=0;h<a;++h)i.push(e.shape[h]),c*=e.shape[h];for(let h=a;h<n;h++)i.push(e.shape[h]),l*=e.shape[h];for(let h=a;h<r;h++)i.push(t.shape[h]);for(let h=n+1;h<o;h++)i.push(e.shape[h]),u*=e.shape[h];return{batchSize:c,sliceSize:u,outerSize:l,dimSize:s,outputShape:i}}(r,o,c,h),f=SC({inputs:{x:r},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=SC({inputs:{x:o},backend:n,attrs:{shape:[p.batchSize,d/p.batchSize]}}),g=[p.batchSize,p.outerSize,d/p.batchSize,p.sliceSize],y=n.bufferSync(m),b=AN(n.bufferSync(f),y,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,b.dtype,b.values)}},ON=QT(((e,t)=>e>t?1:0)),FN=yC(Ux,ON,null,"bool"),DN={kernelName:Ux,backendName:"cpu",kernelFunc:FN},LN=QT(((e,t)=>e>=t?1:0)),MN=yC(Vx,LN,null,"bool"),PN={kernelName:Vx,backendName:"cpu",kernelFunc:MN};const zN={kernelName:jx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t,r=Dv(a.shape),o=a.shape[a.shape.length-1],s=SC({inputs:{x:a},backend:n,attrs:{shape:[r/o,o]}}),i=fN(s,!0,n),c=SC({inputs:{x:i},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),c}},BN={kernelName:Kx,backendName:"cpu",kernelFunc:GT(Kx,(e=>Number.isFinite(e)?1:0),"bool")},WN={kernelName:qx,backendName:"cpu",kernelFunc:GT(qx,(e=>Math.abs(e)===1/0?1:0),"bool")},UN={kernelName:Yx,backendName:"cpu",kernelFunc:GT(Yx,(e=>Number.isNaN(e)?1:0),"bool")},VN=QT(((e,t)=>e<t?1:0)),GN=yC(Zx,VN,null,"bool"),jN={kernelName:Zx,backendName:"cpu",kernelFunc:GN},HN=QT(((e,t)=>e<=t?1:0)),KN=yC(Qx,HN,null,"bool"),qN={kernelName:Qx,backendName:"cpu",kernelFunc:KN};function YN(e,t,n){const a=(t-e)/(n-1),r=Xv(n,"float32");r[0]=e;for(let o=1;o<r.length;o++)r[o]=r[o-1]+a;return r}const XN={kernelName:"LinSpace",backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:a,stop:r,num:o}=n,s=YN(a,r,o);return t.makeTensorInfo([s.length],"float32",s)}},ZN=VT((e=>Math.log(e))),QN=jT(Jx,ZN),JN={kernelName:Jx,backendName:"cpu",kernelFunc:QN},$N=GT($x,(e=>Math.log1p(e))),eR={kernelName:$x,backendName:"cpu",kernelFunc:$N},tR=QT(((e,t)=>e&&t)),nR=yC(ew,tR,null,"bool"),aR={kernelName:ew,backendName:"cpu",kernelFunc:nR},rR={kernelName:tw,backendName:"cpu",kernelFunc:GT(tw,(e=>e?0:1),"bool")},oR={kernelName:nw,backendName:"cpu",kernelFunc:yC(nw,QT(((e,t)=>e||t)),null,"bool")};const sR={kernelName:"LRN",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{depthRadius:o,bias:s,alpha:i,beta:c}=a;BT(r,"LRN");const l=r.shape[3],u=l-1,h=n.data.get(r.dataId).values,d=Dv(r.shape),p=new Float32Array(d);function f(e){const t=e%l;let n=e-t+Math.max(0,t-o);const a=e-t+Math.min(t+o,u);let r=0;for(;n<=a;n++){const e=h[n];r+=e*e}return r}for(let m=0;m<d;m++){const e=f(m),t=h[m]*Math.pow(s+i*e,-c);p[m]=t}return n.makeTensorInfo(r.shape,r.dtype,p)}};const iR={kernelName:"LRNGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,y:o,dy:s}=t,{depthRadius:i,bias:c,alpha:l,beta:u}=a;BT(s,"LRNGrad");const h=Dv(s.shape),d=s.shape[3],p=n.data.get(s.dataId).values,f=n.data.get(r.dataId).values,m=n.data.get(o.dataId).values,g=new Float32Array(h),y=h;for(let b=0;b<y;b++){const e=b%d,t=b-e+Math.max(0,e-i),n=b-e+Math.min(d,e+i+1);let a=0;for(let r=t;r<n;r++)a+=Math.pow(f[r],2);a=l*a+c;for(let r=t;r<n;r++){let e=-2*l*u*f[r]*m[b]/a;b===r&&(e+=Math.pow(a,-u)),e*=p[b],g[r]+=e}}return n.makeTensorInfo(s.shape,r.dtype,g)}};function cR(e,t,n,a){const r=Bv(a,Dv(n));for(let o=0;o<r.length;++o){const n=o*t;let a=e[n];for(let r=0;r<t;++r){const t=e[n+r];(Number.isNaN(t)||t>a)&&(a=t)}r[o]=a}return r}function lR(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reductionIndices:o,keepDims:s}=a,i=n;let c=r.shape;const l=c.length,u=zv(o,c);let h=u;const d=$I(h,l);let p=i.data.get(r.dataId).values;if(null!=d){const e=new Array(l);for(let t=0;t<e.length;t++)e[t]=c[d[t]];p=FC(p,c,r.dtype,d,e),h=tT(h.length,l),c=e}BT(r,"max"),JI("max",h,l);const[f,m]=ZI(c,h),g=cR(p,Dv(m),f,r.dtype),y=i.write(g,f,r.dtype);let b=f;if(s){b=QI(f,u)}return{dataId:y,shape:b,dtype:r.dtype}}const uR={kernelName:"Max",backendName:"cpu",kernelFunc:lR},hR=QT(((e,t)=>Math.max(e,t))),dR=yC(aw,hR),pR={kernelName:aw,backendName:"cpu",kernelFunc:dR};const fR={kernelName:"MaxPool",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;BT(r,"maxPool");const{filterSize:o,strides:s,pad:i,dimRoundingMode:c}=a;Ov(mT(s,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'")));const l=oT(r.shape,o,s,1,i,c);let u;if(1===l.filterWidth&&1===l.filterHeight&&Lv(l.inShape,l.outShape))u=qT({inputs:{x:r},backend:n});else{const e=n.data.get(r.dataId).values,t=Hv(r.shape),a=HC(e,r.shape,r.dtype,t,l,"max");u=n.makeTensorInfo(l.outShape,r.dtype,a.values)}return u}};const mR={kernelName:"MaxPool3D",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:s,pad:i,dimRoundingMode:c,dataFormat:l}=a;BT(r,"maxPool3d");const u=sT(r.shape,o,s,1,i,c,l),h=qC(n.data.get(r.dataId).values,r.shape,r.dtype,Hv(r.shape),u,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}};const gR={kernelName:"MaxPool3DGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,{filterSize:s,strides:i,pad:c,dimRoundingMode:l}=a;BT([r,o],"maxPool3DGrad");const u=sT(o.shape,s,i,1,c,l),h=function(e,t){const n=HS(t.outShape,"int32"),a=t.strideDepth,r=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,i=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,u=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let y=0;y<t.outDepth;++y){const b=y*a-d;let v=b;for(;v<0;)v+=s;const x=Math.min(t.inDepth,l+b);for(let a=0;a<t.outHeight;++a){const l=a*r-p;let d=l;for(;d<0;)d+=i;const w=Math.min(t.inHeight,u+l);for(let r=0;r<t.outWidth;++r){const p=r*o-f;let k=p;for(;k<0;)k+=c;const S=Math.min(t.inWidth,h+p);let I=Number.NEGATIVE_INFINITY,T=-1;for(let t=v;t<x;t+=s){const n=t-b;for(let a=d;a<w;a+=i){const r=a-l;for(let o=k;o<S;o+=c){const s=o-p,i=e.get(m,t,a,o,g);i>=I&&(I=i,T=n*u*h+r*u+s)}}}n.set(T,m,y,a,r,g)}}}return n}(n.bufferSync(o),u),d=u.strideDepth,p=u.strideHeight,f=u.strideWidth,m=u.dilationDepth,g=u.dilationHeight,y=u.dilationWidth,b=u.effectiveFilterDepth,v=u.effectiveFilterHeight,x=u.effectiveFilterWidth,w=b-1-u.padInfo.front,k=x-1-u.padInfo.left,S=v-1-u.padInfo.top,I=HS(o.shape,"float32"),T=n.bufferSync(r);for(let C=0;C<u.batchSize;++C)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let a=0;a<u.inWidth;++a){const r=t-w,o=n-S,s=a-k;let i=0;for(let t=0;t<b;t+=m){const n=(r+t)/d;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let a=0;a<v;a+=g){const r=(o+a)/p;if(!(r<0||r>=u.outHeight||Math.floor(r)!==r))for(let o=0;o<x;o+=y){const c=(s+o)/f;if(c<0||c>=u.outWidth||Math.floor(c)!==c)continue;const l=b*v*x-1-h.get(C,n,r,c,e)===t*v*x+a*x+o?1:0;if(0===l)continue;i+=T.get(C,n,r,c,e)*l}}}I.set(i,C,t,n,a,e)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}};const yR={kernelName:"MaxPoolGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o,output:s}=t,i=o;BT([o,s],"maxPoolGrad");const{filterSize:c,strides:l,pad:u,dimRoundingMode:h}=a,d=oT(i.shape,c,l,1,u,h),p=n.data.get(i.dataId).values,f=HS(d.outShape,i.dtype,KC(p,i.shape,i.dtype,d).values),m=d.strideHeight,g=d.strideWidth,y=d.dilationHeight,b=d.dilationWidth,v=d.effectiveFilterHeight,x=d.effectiveFilterWidth,w=x-1-d.padInfo.left,k=v-1-d.padInfo.top,S=HS(i.shape,"float32"),I=n.data.get(r.dataId).values,T=HS(r.shape,"float32",I);for(let C=0;C<d.batchSize;++C)for(let e=0;e<d.inChannels;++e)for(let t=0;t<d.inHeight;++t)for(let n=0;n<d.inWidth;++n){const a=t-k,r=n-w;let o=0;for(let t=0;t<v;t+=y){const n=(a+t)/m;if(!(n<0||n>=d.outHeight||Math.floor(n)!==n))for(let a=0;a<x;a+=b){const s=(r+a)/g;if(s<0||s>=d.outWidth||Math.floor(s)!==s)continue;const i=v*x-1-f.get(C,n,s,e)===t*x+a?1:0;if(0===i)continue;o+=T.get(C,n,s,e)*i}}S.set(o,C,t,n,e)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};const bR={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{x:r}=t,{filterSize:o,strides:s,pad:i,includeBatchInIndex:c}=n,l=a;BT(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,h=oT(r.shape,o,s,[1,1],i),[d,p]=function(e,t,n,a,r){const o=HC(e,0,n,Hv(t),r,"max"),s=KC(e,t,n,r,!0,a);return[o.values,s.values]}(u,r.shape,r.dtype,c,h),f=l.write(d,h.outShape,r.dtype),m=l.write(p,h.outShape,r.dtype);return[{dataId:f,shape:h.outShape,dtype:r.dtype},{dataId:m,shape:h.outShape,dtype:"int32"}]}};const vR={kernelName:rw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a,i=zv(o,r.shape),c=Dv(ZI(r.shape,i)[1]),l=[],u=n.makeTensorInfo([],"float32",new Float32Array([c]));l.push(u);const h=mC({inputs:{x:r},backend:n,attrs:{dtype:"float32"}});l.push(h);const d=cN({inputs:{a:h,b:u},backend:n});l.push(d);const p=HE({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:s}});return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}};const xR={kernelName:"Min",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a;BT(r,"min");const i=zv(o,r.shape);let c=i;const l=$I(c,r.shape.length);let u=r;null!=l&&(u=DC({inputs:{x:r},backend:n,attrs:{perm:l}}),c=tT(c.length,r.shape.length)),JI("min",c,u.shape.length);const[h,d]=ZI(u.shape,c),p=Dv(d),f=Xv(Dv(h),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const a=m[e+n];(Number.isNaN(a)||a<t)&&(t=a)}f[y]=t}null!=l&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(h,u.dtype,f);if(s){const e=SC({inputs:{x:g},backend:n,attrs:{shape:QI(h,i)}});return n.disposeIntermediateTensorInfo(g),e}return g}},wR=QT(((e,t)=>Math.min(e,t))),kR=yC(ow,wR),SR={kernelName:ow,backendName:"cpu",kernelFunc:kR};const IR={kernelName:"MirrorPad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{paddings:o,mode:s}=a;BT(r,"mirrorPad");const i=o.map(((e,t)=>e[0]+r.shape[t]+e[1])),c=o.map((e=>e[0])),l=o.map(((e,t)=>e[0]+r.shape[t])),u="reflect"===s?0:1,h=n.data.get(r.dataId).values,d=r.shape.length,p=Hv(r.shape),f=Dv(i),m=i.length,g=Hv(i),y=Bv(r.dtype,f);for(let b=0;b<f;b++){let e=$v(b,m,g);for(let n=0;n<m;n++)e[n]<c[n]?e[n]=2*c[n]-e[n]-u:e[n]>=l[n]&&(e[n]=2*(l[n]-1)-e[n]+u);e=e.map(((e,t)=>e-c[t]));const t=Jv(e,d,p);y[b]=h[t]}return{dataId:n.write(y,i,r.dtype),shape:i,dtype:r.dtype}}},TR={kernelName:"Mod",backendName:"cpu",kernelFunc:yC("Mod",QT(((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})))};function CR(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{dim:o}=a,s=r.shape.length;let i=o;if(-1===i&&(i=s-1),i!==s-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(s," and dim was ").concat(i));const c=zv([i],r.shape),l=lR({inputs:{x:r},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),u=QI(l.shape,c),h=SC({inputs:{x:l},backend:n,attrs:{shape:u}}),d=dN({inputs:{a:r,b:h},backend:n}),p=tN({inputs:{x:d},backend:n}),f=HE({inputs:{x:p},backend:n,attrs:{axis:c,keepDims:!1}}),m=SC({inputs:{x:f},backend:n,attrs:{shape:u}}),g=cN({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const ER={kernelName:"Softmax",backendName:"cpu",kernelFunc:CR};const NR={kernelName:"Multinomial",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{numSamples:o,seed:s,normalized:i}=a;BT(r,"multinomial");const c=i?r:CR({inputs:{logits:r},backend:n,attrs:{dim:-1}}),l=c.shape[0],u=c.shape[1],h=n.data.get(c.dataId).values,d=[l,o],p=Xv(Dv(d),"int32");for(let f=0;f<l;++f){const e=f*u,t=new Float32Array(u-1);t[0]=h[e];for(let r=1;r<t.length;++r)t[r]=t[r-1]+h[e+r];const n=Ai.alea(s.toString()),a=f*o;for(let r=0;r<o;++r){const e=n();p[a+r]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){p[a+r]=n;break}}}return i||n.disposeIntermediateTensorInfo(c),n.makeTensorInfo(d,"int32",p)}};function RR(e,t,n){const a=xk(-1,n);return UE([],t,a,e,n)}const AR={kernelName:"Neg",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t;BT(a,"neg");const r=n.data.get(a.dataId).values,[o,s]=RR(r,a.shape,a.dtype);return n.makeTensorInfo(s,a.dtype,o)}},_R=VI;const OR={kernelName:cw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:s,iouThreshold:i,scoreThreshold:c}=a;BT(r,"NonMaxSuppression");const l=n.data.get(r.dataId).values,u=n.data.get(o.dataId).values,{selectedIndices:h}=_R(l,u,s,i,c);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},FR=GI;const DR={kernelName:lw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:s,iouThreshold:i,scoreThreshold:c,padToMaxOutputSize:l}=a;BT(r,"NonMaxSuppressionPadded");const u=n.data.get(r.dataId).values,h=n.data.get(o.dataId).values,{selectedIndices:d,validOutputs:p}=FR(u,h,s,i,c,l);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},LR=jI;const MR={kernelName:uw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:s,iouThreshold:i,scoreThreshold:c,softNmsSigma:l}=a;BT(r,"NonMaxSuppressionWithScore");const u=n.data.get(r.dataId).values,h=n.data.get(o.dataId).values,d=s,p=i,f=c,m=l,{selectedIndices:g,selectedScores:y}=LR(u,h,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},PR=QT(((e,t)=>e!==t?1:0)),zR=yC(iw,PR,null,"bool"),BR={kernelName:iw,backendName:"cpu",kernelFunc:zR};const WR={kernelName:"OneHot",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{indices:r}=t,{dtype:o,depth:s,onValue:i,offValue:c}=a;BT(r,"oneHot");const l=Dv(r.shape),u=new Float32Array(l*s);u.fill(c);const h=n.data.get(r.dataId).values;for(let d=0;d<l;++d)h[d]>=0&&h[d]<s&&(u[d*s+h[d]]=i);return n.makeTensorInfo([...r.shape,s],o,u)}};function UR(e){const{inputs:t,backend:n}=e,{x:a}=t;if("string"===a.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===a.dtype){const e=dC({inputs:{input:a},backend:n}),t=UR({inputs:{x:e},backend:n}),r=fE({inputs:{input:a},backend:n}),o=UR({inputs:{x:r},backend:n}),s=lC({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),s}return bN({backend:n,attrs:{shape:a.shape,value:0,dtype:a.dtype}})}const VR={kernelName:Xw,backendName:"cpu",kernelFunc:UR};const GR={kernelName:"OnesLike",backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:a}=t,{x:r}=n;if("string"===r.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===r.dtype){const t=dC({inputs:{input:r},backend:a}),n=e({inputs:{x:t},backend:a}),o=fE({inputs:{input:r},backend:a}),s=UR({inputs:{x:o},backend:a}),i=lC({inputs:{real:n,imag:s},backend:a});return a.disposeIntermediateTensorInfo(t),a.disposeIntermediateTensorInfo(n),a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(s),i}return bN({backend:a,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}};function jR(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a;if(1===t.length)return aN({inputs:{input:t[0]},backend:n,attrs:{dim:r}});const o=t[0].shape,s=t[0].dtype;t.forEach((e=>{Fv(o,e.shape,"All tensors passed to stack must have matching shapes"),Ov(s===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const i=[],c=gE({inputs:t.map((e=>{const t=aN({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}const HR={kernelName:hw,backendName:"cpu",kernelFunc:jR};const KR={kernelName:"PadV2",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{paddings:o,constantValue:s}=a;BT(r,"pad");const i=o.map(((e,t)=>e[0]+r.shape[t]+e[1])),c=o.map((e=>e[0])),l=n.data.get(r.dataId).values,u=Dv(r.shape),h=r.shape.length,d=Hv(r.shape),p=Dv(i),f=i.length,m=Hv(i),g=Bv(r.dtype,p);0!==s&&g.fill(s);for(let y=0;y<u;y++){g[Jv($v(y,h,d).map(((e,t)=>e+c[t])),f,m)]=l[y]}return{dataId:n.write(g,i,r.dtype),shape:i,dtype:r.dtype}}},qR=QT(((e,t)=>Math.pow(e,t))),YR=yC(dw,qR),XR={kernelName:dw,backendName:"cpu",kernelFunc:YR};function ZR(e,t,n,a){const[r,o]=ZI(e,a),s=Qk(t,"int32"),i=Xv(Dv(r),s),c=Dv(o);for(let l=0;l<i.length;++l){const e=l*c;let t=1;for(let a=0;a<c;++a)t*=n[e+a];i[l]=t}return{outVals:i,outShape:r,outDtype:s}}const QR={kernelName:"Prod",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a;BT(r,"prod");const i=r.shape.length,c=zv(o,r.shape),l=$I(c,i);let u=c,h=r;const d=[];null!=l&&(h=DC({inputs:{x:r},backend:n,attrs:{perm:l}}),d.push(h),u=tT(u.length,i));const p=n.data.get(h.dataId).values,{outVals:f,outShape:m,outDtype:g}=ZR(h.shape,h.dtype,p,u);let y=m;return s&&(y=QI(m,c)),d.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(y,g,f)}};function JR(e,t,n,a){const r=[];let o=0;const s=t.length-1+n.length,i=new Array(s).fill(null).map((()=>[0]));!function(e,t){for(let n=0;n<e.length;++n){const a=e[n],r=n===e.length-1?t:e[n+1].length;if(0===a.length)throw new Error("Ragged splits may not be empty");if(a[0]<0)throw new Error("Ragged splits must be non-negative");if(a[a.length-1]>r)throw new Error("Ragged splits must not point past values");for(let e=1;e<a.length;++e)if(a[e-1]>a[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,a);let c=1;for(let l=0;l<t.length-1;++l){c*=t[l];const e=t[l+1];for(let t=1;t<c+1;++t)i[l].push(t*e)}for(let l=0;l<e.length;++l){let a=e[l],s=e[l]+1;for(let e=0;e<n.length;++e){const r=n[e],o=e+t.length-1;if(o>=0){const e=i[o],t=e[e.length-1]-r[a];for(let n=a;n<s;++n)i[o].push(r[n+1]+t)}a=r[a],s=r[s]}s!==a&&(r.push([a,s]),o+=s-a)}return{outSplits:i,valueSlices:r,numValues:o}}function $R(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let a=t;a<e.length;a++)n[t-1]*=e[a];return n}function eA(e,t,n,a,r){const o=t.slice();o[0]=r;const s=Wv(n,Dv(o)),i=e.length;return function(e,t,n,a,r,o){const s=$R(t,2)[1],i=$R(o,2)[1];let c=0;for(const l of n)for(let t=l[0];t<l[1];++t){for(let n=0;n<a;++n)r[c*i+n]=e[t*s+n];++c}}(e,t,a,0===i?0:i/t[0],s,o),[s,o]}function tA(e,t,n,a,r,o,s,i){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach(((e,a)=>{if(e<0||e>=n){const r=$v(a,t.length,Hv(t)).join(",");throw new Error("indices[".concat(r,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(o,s,t[0][0]-1),0===a.length)throw new Error("params.rank must be nonzero");const c=a[0],{outSplits:l,valueSlices:u,numValues:h}=JR(o,s,e,c),d=function(e){const t=[];for(let n=0;n<e.length;++n){const a=Wv("int32",e[n].length);t.push(a),e[n].forEach(((e,t)=>a[t]=e))}return t}(l),p=eA(n,a,r,u,h);return[d,p[0],p[1]]}const nA={kernelName:"RaggedGather",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{paramsNestedSplits:r,paramsDenseValues:o,indices:s}=t,{outputRaggedRank:i}=a,c=r.map((e=>n.data.get(e.dataId).values)),l=r.map((e=>e.shape)),u=n.data.get(o.dataId).values,h=n.data.get(s.dataId).values,[d,p,f]=tA(c,l,u,o.shape,o.dtype,h,s.shape),m=d.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(f,o.dtype,p);return m.concat([g])}},aA=2147483647;function rA(e,t,n,a,r,o,s){if(t.length>1)throw new Error("starts must be a scalar or vector");if(r.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");const i=0===t.length,c=0===r.length,l=0===s.length,u=[];i||u.push(t[0]),c||u.push(r[0]),l||u.push(s[0]);for(let m=1;m<u.length;++m)if(u[m]!==u[m-1])throw new Error("starts, limits, and deltas must have the same shape");const h=0===u.length?1:u[0],d=Wv("int32",h+1);d[0]=0;for(let m=0;m<h;++m){const t=i?e[0]:e[m],n=c?a[0]:a[m],r=l?o[0]:o[m];if(0===r)throw new Error("Requires delta != 0");let s;if(r>0&&n<t||r<0&&n>t)s=0;else if(s=Math.ceil(Math.abs((n-t)/r)),s>aA)throw new Error("Requires ((limit - start) / delta) <= ".concat(aA));d[m+1]=d[m]+s}const p=Wv(n,d[h]);let f=0;for(let m=0;m<h;++m){const t=d[m+1]-d[m];let n=i?e[0]:e[m];const a=l?o[0]:o[m];for(let e=0;e<t;++e)p[f++]=n,n+=a}return[d,p]}const oA={kernelName:"RaggedRange",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:a,limits:r,deltas:o}=t,s=n.data.get(a.dataId).values,i=n.data.get(r.dataId).values,c=n.data.get(o.dataId).values,[l,u]=rA(s,a.shape,a.dtype,i,r.shape,c,o.shape);return[n.makeTensorInfo([l.length],"int32",l),n.makeTensorInfo([u.length],a.dtype,u)]}};var sA=yT;class iA{constructor(e,t,n,a,r,o,s,i,c,l){var u;this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=a,this.valuesDType=r,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=i,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=function(e){const t={FIRST_DIM_SIZE:yT.FIRST_DIM_SIZE,VALUE_ROWIDS:yT.VALUE_ROWIDS,ROW_LENGTHS:yT.ROW_LENGTHS,ROW_SPLITS:yT.ROW_SPLITS,ROW_LIMITS:yT.ROW_LIMITS,ROW_STARTS:yT.ROW_STARTS},n=[];for(const a of e){if(!(a in t))break;n.push(t[a])}return n}(l),this.raggedRank=0===(u=this.rowPartitionTypes).length?0:u[0]===yT.FIRST_DIM_SIZE?u.length-1:u.length}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===sA.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===sA.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case sA.VALUE_ROWIDS:return iA.getMaxWidthValueRowID(t);case sA.ROW_SPLITS:return iA.getMaxWidthRowSplit(t);default:throw new Error("Cannot handle partition type ".concat(sA[this.getRowPartitionTypeByDimension(e-1)]))}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let a=0;a<t-1;++a){const t=e[a+1]-e[a];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,a=e[0],r=0;for(let o=1;o<t;++o){const t=e[o];t!==a&&(a=t,r=Math.max(o-n,r),n=o)}return Math.max(t-n,r)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return lA(e,n)}calculateOutputSize(e){const t=this.valuesShape;!function(e,t){if(null==e||null==t)return;const n=e.length,a=t.length;if(n>=a)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(a,")"));for(let r=0;r<Math.min(n,a-1);++r){const n=e[r],a=t[r+1];if(n>=0&&a>=0&&1!==n&&n!==a)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(r-e.length,"] = ").concat(n," but ragged tensor input.flatValues.shape[").concat(r-e.length,"] = ").concat(a))}}(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=function(e,t,n){let a=new Array;if(null==n&&null==t)return a;if(null==t)for(;a.length<e+n.length;)a.push(-1);else a=t.slice();if(null==n)return a;if(e+n.length!==a.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(a.length));for(let r=1;r<n.length;++r){const o=n[r],s=a[a.length-n.length+r],i=a[s];if(o>=0)if(i>=0){if(i!==o)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(r+e,"] = ").concat(o," but shape[").concat(r+e,"] = ").concat(i))}else a[s]=o}return a}(this.raggedRank,n,t),r=a;r[0]<0&&(r[0]=e);for(let o=1;o<=this.raggedRank;++o)r[o]<0&&(r[o]=this.getMaxWidth(o));return r}calculateFirstParentOutputIndex(e,t,n){const a=Math.min(e,n),r=[];let o=0;for(let s=0;s<a;++s,o+=t)r.push(o);for(let s=a;s<e;++s)r.push(-1);return Ov(r.length===e,(()=>"Final length of result must be equal to firstDimension.")),r}calculateOutputIndexRowSplit(e,t,n,a){const r=e.length,o=[];for(let s=0;s<r-1;++s){const r=e[s+1]-e[s];let i=Math.min(a,r),c=t[s];-1===c&&(i=0);for(let e=0;e<i;++e)o.push(c),c+=n;for(let e=0;e<r-i;++e)o.push(-1)}if(r>0&&o.length!==e[r-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,t,n,a){const r=e.length,o=[];if(0===r)return[];let s=0,i=e[0];if(i>=t.length)throw new Error("Got currentValueRowId=".concat(i,", which is not less than ").concat(t.length));let c=t[i];o.push(c);for(let l=1;l<r;++l){const r=e[l];if(r===i)c>=0&&(++s,s<a?c+=n:c=-1);else{if(s=0,i=r,r>=t.length)throw new Error("Got nextValueRowId=".concat(r," which is not less than ").concat(t.length));c=t[r]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,t,n,a){const r=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case sA.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(r,t,n,a);case sA.ROW_SPLITS:if(r.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(r.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(r,t,n,a);default:throw new Error("Unsupported partition type: ".concat(sA[o]))}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case sA.FIRST_DIM_SIZE:return e[0];case sA.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case sA.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(sA[t]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let o=n.length-2;o>=0;--o)n[o]=n[o+1]*t[o+1];const a=lA(t,!1),r=Wv(this.valuesDType,Dv(a));if(n[0]*t[0]>0){let o=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){o=this.calculateOutputIndex(e-1,o,n[e],t[e])}this.setOutput(this.raggedRank,o,r,a)}return[a,r]}setOutput(e,t,n,a){if(0===n.length)return;const r=this.values,o=n;let s=a.slice();s=s.slice(e+1);const i=Dv(s),c=t.length;let l=this.defaultValue;if(l.length!==i&&1!==l.length){const e=this.defaultValueShape;eI((()=>{const t=zI(l,e),n=BI(t,s);l=n.dataSync()}))}let u=0,h=0,d=0;for(let p=0;p<=c;++p){let e=p<c?t[p]:-1;if(e!==d){if(h<d){const e=r.subarray(u*i);cA(o.subarray(h*i),e,(d-h)*i)}if(p>=c){const t=n.length;e=Math.floor(t/i)}if(e>d)if(1===this.defaultValue.length)o.subarray(d*i,e*i).fill(this.defaultValue[0]),d=e;else for(;e>d;){cA(o.slice(d*i),l,i),++d}e<0?(u=p+1,h=d):(u=p,h=d,d=h+1)}else++d}}}function cA(e,t,n){for(let a=0;a<n;a++)e[a]=t[a]}function lA(e,t){const n=[];for(let a of e){if(a<0){if(!t)throw new Error("Dimension ".concat(a," must be >= 0"));if(a<-1)throw new Error("Dimension ".concat(a," must be >= -1"));a=-1}n.push(a)}return n}function uA(e,t,n,a,r,o,s,i,c,l){return new iA(e,t,n,a,r,o,s,i,c,l).compute()}const hA={kernelName:"RaggedTensorToTensor",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{shape:r,values:o,defaultValue:s,rowPartitionTensors:i}=t,{rowPartitionTypes:c}=a,l=n.data.get(r.dataId).values,u=n.data.get(o.dataId).values,h=n.data.get(s.dataId).values,d=i.map((e=>n.data.get(e.dataId).values)),p=i.map((e=>e.shape)),[f,m]=uA(l,r.shape,u,o.shape,o.dtype,h,s.shape,d,p,c);return n.makeTensorInfo(f,o.dtype,m)}};function dA(e,t,n,a){if(e===t||e<t&&n<0||t<e&&n>1)return Xv(0,a);const r=Xv(Math.abs(Math.ceil((t-e)/n)),a);t<e&&1===n&&(n=-1),r[0]=e;for(let o=1;o<r.length;o++)r[o]=r[o-1]+n;return r}const pA={kernelName:fw,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:a,stop:r,dtype:o,step:s}=n,i=dA(a,r,s,o);return t.makeTensorInfo([i.length],o,i)}},fA={kernelName:gw,backendName:"cpu",kernelFunc:GT(gw,(e=>1/e))};const mA={kernelName:xw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:o,halfPixelCenters:s,size:i}=a;BT(r,"resizeBilinear");const c=Hv(r.shape),[l,u]=i,[h,d,p,f]=r.shape,m=n.data.get(r.dataId).values,g=new Float32Array(Dv([h,l,u,f])),y=[o&&l>1?d-1:d,o&&u>1?p-1:p],b=[o&&l>1?l-1:l,o&&u>1?u-1:u];let v=0;const x=y[0]/b[0],w=y[1]/b[1];for(let k=0;k<h;k++)for(let e=0;e<l;e++){let t;t=s?x*(e+.5)-.5:x*e;const n=Math.max(0,Math.floor(t)),a=t-n,r=Math.min(d-1,Math.ceil(t)),o=k*c[0]+n*c[1],i=k*c[0]+r*c[1];for(let e=0;e<u;e++){let t;t=s?w*(e+.5)-.5:w*e;const n=Math.max(0,Math.floor(t)),r=t-n,l=Math.min(p-1,Math.ceil(t)),u=o+n*c[2],h=i+n*c[2],d=o+l*c[2],y=i+l*c[2];for(let e=0;e<f;e++){const t=m[u+e],n=m[h+e],o=t+(m[d+e]-t)*r,s=o+(n+(m[y+e]-n)*r-o)*a;g[v++]=s}}}return n.makeTensorInfo([h,l,u,f],"float32",g)}};const gA={kernelName:"ResizeBilinearGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:s}=a;BT([o,r],"resizeBilinearGrad");const i=Hv(r.shape),[c,l,u,h]=r.shape,[,d,p]=o.shape,f=new Float32Array(c*l*u*h),m=[s&&d>1?l-1:l,s&&p>1?u-1:u],g=[s&&d>1?d-1:d,s&&p>1?p-1:p],y=m[0]/g[0],b=m[1]/g[1],v=n.data.get(o.dataId).values;let x=0;for(let w=0;w<c;w++){const e=w*i[0];for(let t=0;t<d;t++){const n=t*y,a=Math.floor(n),r=Math.min(Math.ceil(n),l-1),o=e+a*i[1],s=e+r*i[1],c=n-a,d=1-c;for(let e=0;e<p;e++){const t=e*b,n=Math.floor(t),a=Math.min(Math.ceil(t),u-1),r=t-n,l=1-r,p=o+n*i[2],m=o+a*i[2],g=s+n*i[2],y=s+a*i[2],w=d*l,k=d*r,S=c*l,I=c*r;for(let e=0;e<h;e++){const t=v[x++];f[p+e]+=t*w,f[m+e]+=t*k,f[g+e]+=t*S,f[y+e]+=t*I}}}}return n.makeTensorInfo([c,u,l,h],"float32",f)}};const yA={kernelName:vw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:o,halfPixelCenters:s,size:i}=a;BT(r,"resizeNearestNeighbor");const c=Hv(r.shape),[l,u]=i,[h,d,p,f]=r.shape,m=n.data.get(r.dataId).values,g=new Float32Array(h*l*u*f),y=[o&&l>1?d-1:d,o&&u>1?p-1:p],b=[o&&l>1?l-1:l,o&&u>1?u-1:u],v=y[0]/b[0],x=y[1]/b[1];let w=0;for(let k=0;k<h;k++){const e=k*c[0];for(let t=0;t<l;t++){const n=s?v*(t+.5):v*t;let a=Math.min(d-1,o?Math.round(n):Math.floor(n));s&&(a=Math.max(0,a));const r=e+a*c[1];for(let e=0;e<u;e++){const t=s?x*(e+.5):x*e;let n=Math.min(p-1,o?Math.round(t):Math.floor(t));s&&(n=Math.max(0,n));const a=r+n*c[2];for(let e=0;e<f;e++){const t=m[a+e];g[w++]=t}}}}return n.makeTensorInfo([h,l,u,f],r.dtype,g)}};const bA={kernelName:"ResizeNearestNeighborGrad",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:s}=a;BT([o,r],"resizeNearestNeighborGrad");const i=Hv(r.shape),c=Hv(o.shape),[l,u,h,d]=r.shape,[,p,f]=o.shape,m=new Float32Array(l*u*h*d),g=n.data.get(o.dataId).values,y=[s&&p>1?u-1:u,s&&f>1?h-1:h],b=[s&&p>1?p-1:p,s&&f>1?f-1:f],v=y[0]/b[0],x=y[1]/b[1],w=1/v,k=1/x,S=2*Math.ceil(w)+2,I=2*Math.ceil(k)+2;for(let T=0;T<l;T++){const e=T*i[0];for(let t=0;t<u;t++){const n=e+t*i[1],a=Math.floor(t*w),r=Math.floor(a-S/2);for(let o=0;o<h;o++){const a=n+o*i[2],l=Math.floor(o*k),y=Math.floor(l-I/2);for(let n=0;n<d;n++){let i=0;for(let a=0;a<S;a++){const l=a+r;if(l<0||l>=p)continue;const d=e+l*c[1],m=l*v;if(t===Math.min(u-1,s?Math.round(m):Math.floor(m)))for(let e=0;e<I;e++){const t=e+y;if(t<0||t>=f)continue;const a=d+t*c[2],r=t*x;o===Math.min(h-1,s?Math.round(r):Math.floor(r))&&(i+=g[a+n])}}m[a+n]=i}}}}return n.makeTensorInfo(r.shape,r.dtype,m)}};const vA={kernelName:kw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{dims:o}=a;BT(r,"reverse");const s=r.shape.length,i=zv(o,r.shape);if(0===s)return qT({inputs:{x:r},backend:n});const c=new zk(r.shape,r.dtype),l=n.bufferSync(r);for(let u=0;u<c.size;u++){const e=c.indexToLoc(u),t=e.slice();i.forEach((e=>t[e]=r.shape[e]-1-t[e])),c.set(l.get(...t),...e)}return n.makeTensorInfo(c.shape,c.dtype,c.values)}},xA={kernelName:Qw,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{image:r}=t,{radians:o,fillValue:s,center:i}=n,c=a,l=Bv(r.dtype,Dv(r.shape)),[u,h,d,p]=r.shape,[f,m]=function(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}(i,h,d),g=Math.sin(o),y=Math.cos(o),b=c.data.get(r.dataId).values;for(let v=0;v<u;v++){const e=v*d*h*p;for(let t=0;t<h;t++){const n=t*(d*p);for(let a=0;a<d;a++){const r=a*p;for(let o=0;o<p;o++){const i=[u,t,a,o],c=i[2],v=i[1];let x=(c-f)*y-(v-m)*g,w=(c-f)*g+(v-m)*y;x=Math.round(x+f),w=Math.round(w+m);let k=s;if("number"!==typeof s&&(k=3===o?255:s[o]),x>=0&&x<d&&w>=0&&w<h){k=b[e+w*(d*p)+x*p+o]}l[e+n+r+o]=k}}}}return{dataId:c.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},wA=GT(Sw,(e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),kA={kernelName:Sw,backendName:"cpu",kernelFunc:wA},SA=VT((e=>1/Math.sqrt(e))),IA={kernelName:Iw,backendName:"cpu",kernelFunc:jT(Iw,SA)};function TA(e,t,n,a,r,o,s,i,c,l){const u=[a/r,r],h=e.values,d=t.values;if(0===a)return HS(n,t.dtype);const p=c instanceof zk?c:HS(u,t.dtype);"string"===typeof c||"number"===typeof c?p.values.fill(c):"boolean"===typeof c&&p.values.fill(+c);for(let f=0;f<o;f++){const e=[];let o=0;for(let t=0;t<s;t++){const n=h[f*s+t];e.push(n),o+=n*i[t]}if(o<0||o>=a/r)throw new Error("Invalid indices: ".concat(e," does not index into ").concat(n));for(let n=0;n<r;n++)l?p.values[o*r+n]+=d[f*r+n]:p.values[o*r+n]=0===t.rank?d[0]:d[f*r+n]}return p}const CA={kernelName:"ScatterNd",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{indices:r,updates:o}=t,{shape:s}=a,{sliceRank:i,numUpdates:c,sliceSize:l,strides:u,outputSize:h}=wT(0,r,s),d=TA(n.bufferSync(r),n.bufferSync(o),s,h,l,c,i,u,0,!0);return n.makeTensorInfo(s,d.dtype,d.values)}};function EA(e,t){let n=0,a=e.length,r=0;for(;n<a;)r=Math.floor((n+a)/2),e[r]<t?n=r+1:a=r;return a}function NA(e,t){let n=0,a=e.length,r=0;for(;n<a;)r=Math.floor((n+a)/2),e[r]<=t?n=r+1:a=r;return a}const RA={kernelName:"SearchSorted",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sortedSequence:r,values:o}=t,{side:s}=a,i=function(e,t,n,a,r,o){const s=Wv("int32",n*r);for(let i=0;i<n;++i){const n=e.slice(i*a,(i+1)*a),c=i*r;for(let e=0;e<r;++e)s[c+e]="left"===o?EA(n,t[e+c]):NA(n,t[e+c])}return s}(n.data.get(r.dataId).values,n.data.get(o.dataId).values,r.shape[0],r.shape[1],o.shape[1],s);return n.makeTensorInfo(o.shape,"int32",i)}};const AA={kernelName:Tw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:a,t:r,e:o}=t;BT([a,r,o],"select");const s=a.shape.length,i=n.data.get(a.dataId).values,c=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,u=Qk(r.dtype,o.dtype),h=Xv(Dv(r.shape),u);let d=0;const p=0===s||s>1||1===r.shape.length?1:Dv(r.shape.slice(1));for(let f=0;f<i.length;f++)for(let e=0;e<p;e++)1===i[f]?h[d++]=c[f]:h[d++]=l[f];return n.makeTensorInfo(r.shape,u,h)}},_A={kernelName:Cw,backendName:"cpu",kernelFunc:GT(Cw,(e=>e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)))},OA={kernelName:Rw,backendName:"cpu",kernelFunc:GT(Rw,(e=>e<0?-1:e>0?1:0))},FA={kernelName:"Sin",backendName:"cpu",kernelFunc:GT("Sin",(e=>Math.sin(e)))},DA={kernelName:Nw,backendName:"cpu",kernelFunc:GT(Nw,(e=>Math.sinh(e)))},LA=Math.log(1.1920928955078125e-7)+2,MA={kernelName:_w,backendName:"cpu",kernelFunc:GT(_w,(e=>{const t=e>-LA,n=e<LA,a=Math.exp(e);let r;return r=n?a:t?e:Math.log(1+a),r}))};const PA={kernelName:"SpaceToBatchND",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:o,paddings:s}=a;BT([r],"spaceToBatchND");const i=Dv(o),c=[[0,0]];c.push(...s);for(let g=1+o.length;g<r.shape.length;++g)c.push([0,0]);const l=KR.kernelFunc({inputs:{x:r},backend:n,attrs:{paddings:c,constantValue:0}}),u=bT(l.shape,o,i,!1),h=vT(u.length,o.length,!1),d=xT(l.shape,o,i,!1),p=SC({inputs:{x:l},backend:n,attrs:{shape:u}}),f=DC({inputs:{x:p},backend:n,attrs:{perm:h}}),m=SC({inputs:{x:f},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}};function zA(e,t,n,a,r,o,s){const i=t[0],c=o[0],l=new Array(c),u=new Array(i),h=t[1];if(0===c){if(0!==i)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(i));return[Wv(n,0),[0,h],Wv(r,0),l,u]}let d=!0,p=0;const f=new Array(c).fill(0);for(let g=0;g<i;++g){const t=e[g*h];if(t<0)throw new Error(FT(g,t));if(t>=c)throw new Error(DT(g,t,c));++f[t],d=d&&t>=p,p=t}let m=!0;for(let g=0;g<c;++g){const e=0===f[g];l[g]=e,m=m&&!e,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&d){const t=e,n=a;for(let e=0;e<i;++e)u[e]=e;return[t,[i,h],n,l,u]}{const t=f[c-1],o=Wv(n,t*h),d=Wv(r,t),p=new Array(c).fill(0);for(let n=0;n<i;++n){const t=e[n*h],r=p[t],s=(0===t?0:f[t-1])+r;p[t]++;for(let a=0;a<h;++a)o[s*h+a]=e[n*h+a];d[s]=a[n],u[n]=s}for(let e=0;e<c;++e){if(0===p[e]){const t=0===e?0:f[e-1];o[t*h+0]=e;for(let e=1;e<h;++e)o[t*h+e]=0;d[t]=s}}return[o,[t,h],d,l,u]}}const BA={kernelName:Dw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:a,values:r,denseShape:o,defaultValue:s}=t;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(o.shape));if(2!==a.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(a.shape));if(1!==r.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(r.shape));if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));const i=n.data.get(a.dataId).values,c=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values[0],[h,d,p,f,m]=zA(i,a.shape,a.dtype,c,r.dtype,l,u);return[n.makeTensorInfo(d,a.dtype,h),n.makeTensorInfo([d[0]],r.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],a.dtype,new Int32Array(m))]}};function WA(e,t,n,a,r){const o=Dv(a),s=t[0],i=r.length,c=[];let l=1,u=-1;for(let g=0;g<i;++g){const e=r[g];if(-1===e){if(-1!==u)throw new Error((h=g,"only one output dimension may be -1, not both ".concat(u," and ").concat(h)));u=g,c.push(1)}else{if(e<0)throw new Error(LT(g,e));l*=e,c.push(e)}}var h;if(-1!==u){if(l<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(o/l);if(l*e!==o)throw new Error(function(e,t){const n=Dv(e),a=Dv(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(a,". inputShape=").concat(e," outputShape= ").concat(t)}(a,c));c[u]=e}if(Dv(c)!==o)throw new Error(function(e,t){const n=Dv(e),a=Dv(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(a,". inputShape=").concat(e," outputShape=").concat(t)}(a,c));const d=a.length,p=[];if(d>0){p[d-1]=1;for(let e=d-2;e>=0;--e)p[e]=p[e+1]*a[e+1]}const f=[];if(i>0){f[i-1]=1;for(let e=i-2;e>=0;--e)f[e]=f[e+1]*c[e+1]}const m=Wv(n,s*i);for(let g=0;g<s;++g){let t=0;for(let n=0;n<d;++n)t+=e[g*d+n]*p[n];for(let e=0;e<i;++e)m[g*i+e]=Math.trunc(t/f[e]),t%=f[e]}return[m,[s,i],c]}const UA={kernelName:Lw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:a,inputShape:r,newShape:o}=t;if(2!==a.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(a.shape));if(1!==r.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(r.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));const s=Array.from(n.data.get(r.dataId).values),i=n.data.get(a.dataId).values,c=Array.from(n.data.get(o.dataId).values),[l,u,h]=WA(i,a.shape,a.dtype,s,c);return[n.makeTensorInfo(u,a.dtype,l),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}};function VA(e,t,n,a,r){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const i=a.length,c=[t[0],e.length/t[0]],l=c[1],u=i>0?r[i-1]+1:0;if(u<0)throw new Error("segment ids must be >= 0");const h=t.slice();h[0]=u;const d=Wv(n,h.reduce(((e,t)=>e*t),1));if(0===i)return u>0&&d.fill(s),[d,h];if(u<=0)throw new Error("segment ids must be >= 0");let p=0,f=1,m=0,g=r[p];for(;;){let t=0;if(f<i){if(t=r[f],g===t){++f;continue}if(g>=t)throw new Error("segment ids are not increasing")}if(g<0||g>=u)throw new Error(MT(g,u));g>m&&d.fill(s,m*l,g*l);for(let n=p;n<f;++n){const t=a[n];if(t<0||t>=c[0])throw new Error(PT(n,a[n],c[0]));for(let n=0;n<l;n++)d[g*l+n]+=e[t*l+n]}if(o)for(let e=0;e<l;e++)d[g*l+e]/=f-p;if(p=f,++f,m=g+1,g=t,f>i)break}return m<u&&d.fill(s,m*l,u*l),[d,h]}const GA={kernelName:Mw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:o}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(r.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(o.shape));if(r.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(a.dataId).values,i=n.data.get(r.dataId).values,c=n.data.get(o.dataId).values,[l,u]=VA(s,a.shape,a.dtype,i,c,!0);return n.makeTensorInfo(u,a.dtype,l)}};const jA={kernelName:Pw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:o}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(r.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(o.shape));if(r.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(a.dataId).values,i=n.data.get(r.dataId).values,c=n.data.get(o.dataId).values,[l,u]=VA(s,a.shape,a.dtype,i,c);return n.makeTensorInfo(u,a.dtype,l)}};const HA={kernelName:"SparseToDense",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sparseIndices:r,sparseValues:o,defaultValue:s}=t,{outputShape:i}=a,{sliceRank:c,numUpdates:l,sliceSize:u,strides:h,outputSize:d}=wT(0,r,i),p=!1,f=n.bufferSync(r);let m;switch(o.dtype){case"bool":m=TA(f,n.bufferSync(o),i,d,u,l,c,h,Boolean(n.data.get(s.dataId).values[0]),p);break;case"float32":m=TA(f,n.bufferSync(o),i,d,u,l,c,h,n.data.get(s.dataId).values[0],p);break;case"int32":m=TA(f,n.bufferSync(o),i,d,u,l,c,h,n.data.get(s.dataId).values[0],p);break;case"string":m=TA(f,n.bufferSync(o),i,d,u,l,c,h,Ik(n.data.get(s.dataId).values[0]),p);break;default:throw new Error("Unsupported type ".concat(o.dtype))}return n.makeTensorInfo(i,m.dtype,m.values)}};const KA={kernelName:Fw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{numOrSizeSplits:o,axis:s}=a,i=zv(s,r.shape)[0],c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=[];if("number"===typeof t)Ov(e.shape[n]%t===0,(()=>"Number of splits must evenly divide the axis.")),a=new Array(t).fill(e.shape[n]/t);else{const r=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);Ov(r<=1,(()=>"There should be only one negative value in split array."));const o=t.indexOf(-1);if(-1!==o){const a=t.reduce(((e,t)=>t>0?e+t:e));t[o]=e.shape[n]-a}Ov(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),a=t}return a}(r,o,i),l=new Array(r.shape.length).fill(0),u=r.shape.slice();return c.map((e=>{const t=[...u];t[i]=e;const a=eE({inputs:{x:r},backend:n,attrs:{begin:l,size:t}});return l[i]+=e,a}))}},qA=VT((e=>Math.sqrt(e))),YA=GT(Ow,(e=>Math.sqrt(e))),XA={kernelName:Ow,backendName:"cpu",kernelFunc:YA},ZA={kernelName:"Square",backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{x:a}=t,r=n;BT(a,"square");const o=r.data.get(a.dataId).values,s=new Float32Array(o.length);for(let i=0;i<o.length;++i){const e=o[i];s[i]=e*e}return{dataId:r.write(s,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},QA=QT(((e,t)=>{const n=e-t;return n*n})),JA=yC(zw,QA),$A={kernelName:zw,backendName:"cpu",kernelFunc:JA},e_=VT(((e,t)=>{const{pattern:n,replaceGlobal:a,rewrite:r}=t;return e.replace(new RegExp(n,a?"g":""),r)})),t_=jT(Bw,e_),n_={kernelName:Bw,backendName:"cpu",kernelFunc:t_},a_=GT(Zw,((e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),r_={kernelName:Zw,backendName:"cpu",kernelFunc:a_};function o_(e,t,n,a){const r=HS(e,t.dtype);for(let o=0;o<r.size;o++){const e=r.indexToLoc(o),s=new Array(e.length);for(let t=0;t<s.length;t++)s[t]=e[t]*n[t]+a[t];r.set(t.get(...s),...e)}return r}const s_={kernelName:"StridedSlice",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:o,end:s,strides:i,beginMask:c,endMask:l,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=a;BT(r,"stridedSlice");const{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:v,strides:x}=MI(r.shape,o,s,i,c,l,u,h,d);let w;if(m)w=SC({inputs:{x:r},backend:n,attrs:{shape:f}});else if(g||y){Ov(r.shape.length>=1,(()=>"Input must have rank at least 1, got: ".concat(r.shape.length)));const e=function(e,t,n){const a=[];for(let r=0;r<e.length;r++)a[r]=Math.ceil((t[r]-e[r])/n[r]);return a}(b,v,x),t=eE({inputs:{x:r},backend:n,attrs:{begin:b,size:e}});w=SC({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=o_(p,n.bufferSync(r),x,b);w=n.makeTensorInfo(f,e.dtype,e.values)}return w}};class i_{constructor(e,t,n,a,r,o){this.separator=Sk(e),this.nGramWidths=t,this.leftPad=Sk(n),this.rightPad=Sk(a),this.padWidth=r,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,a,r,o){for(let s=0;s<r;++s){const i=this.getPadWidth(o),c=Math.max(0,i-s),l=Math.max(0,i-(r-(s+1))),u=o-(c+l),h=t+(c>0?0:s-i);let d=0;d+=c*this.leftPad.length;for(let t=0;t<u;++t)d+=e[h+t].length;d+=l*this.rightPad.length;d+=(c+l+u-1)*this.separator.length,n[a+s]=new Uint8Array(d);const p=n[a+s];let f=0;const m=e=>e.forEach((e=>p[f++]=e));for(let e=0;e<c;++e)m(this.leftPad),m(this.separator);for(let t=0;t<u-1;++t)m(e[h+t]),m(this.separator);if(u>0){m(e[h+u-1]);for(let e=0;e<l;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<l-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,a=t.length;if(a>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got ".concat(e));for(let r=1;r<a;++r){let a=t[r]>=e;if(a=a&&t[r]<=n,!a)throw new Error("Invalid split value ".concat(t[r],", must be in [").concat(e,", ").concat(n,"]"));e=t[r]}if(e!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(e))}const r=a-1,o=Wv("int32",a);if(0===n||0===a){const e=new Array(n);for(let t=0;t<=r;++t)o[t]=0;return[e,o]}o[0]=0;for(let i=1;i<=r;++i){const e=t[i]-t[i-1];let n=0;this.nGramWidths.forEach((t=>{n+=this.getNumNGrams(e,t)})),this.preserveShort&&e>0&&0===n&&(n=1),o[i]=o[i-1]+n}const s=new Array(o[r]);for(let i=0;i<r;++i){const n=t[i];let a=o[i];if(this.nGramWidths.forEach((r=>{const o=t[i+1]-t[i],c=this.getNumNGrams(o,r);this.createNGrams(e,n,s,a,c,r),a+=c})),this.preserveShort&&a===o[i]){const r=t[i+1]-t[i];if(0===r)continue;const o=r+2*this.padWidth,c=1;this.createNGrams(e,n,s,a,c,o)}}return[s,o]}}function c_(e,t,n,a,r,o,s,i){return new i_(n,a,r,o,s,i).compute(e,t)}const l_={kernelName:Ww,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{separator:r,nGramWidths:o,leftPad:s,rightPad:i,padWidth:c,preserveShortSequences:l}=a,{data:u,dataSplits:h}=t,d=n.data.get(u.dataId).values,p=n.data.get(h.dataId).values,[f,m]=c_(d,p,r,o,s,i,c,l);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",m)]}};function u_(e,t,n,a){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)a.push(e.subarray(t,t+1));return}if(1===t.length){const r=t[0];let o=e.indexOf(r);for(;-1!==o;){const t=e.subarray(0,o);n&&0===t.length||a.push(t),o=(e=e.subarray(o+1)).indexOf(r)}return void(n&&0===e.length||a.push(e))}let r=0;for(let o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){const t=e.subarray(r,o);n&&0===t.length||a.push(t),r=o+1}}function h_(e,t,n){const a=e.length,r=[];let o=0,s=0;const i=new Array(a);for(let d=0;d<a;++d){const a=r.length;u_(e[d],t,n,r);const c=r.length-a;i[d]=c,o+=c,s=Math.max(s,c)}const c=Wv("int32",2*o),l=new Array(o),u=[a,s];let h=0;for(let d=0;d<a;++d)for(let e=0;e<i[d];++e)c[2*h]=d,c[2*h+1]=e,l[h]=r[h],++h;return[c,l,u]}const d_={kernelName:Uw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{skipEmpty:r}=a,{input:o,delimiter:s}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: ".concat(o.shape));if(0!==s.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(s.shape));const i=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values[0],[l,u,h]=h_(i,c,r),d=u.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};function p_(e,t){const n=Wv("int32",e.length);for(let a=0;a<e.length;++a)n[a]=vk(e[a]).modulo(t).getLowBitsUnsigned();return n}const f_={kernelName:Vw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{numBuckets:r}=a,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");const s=p_(n.data.get(o.dataId).values,r);return n.makeTensorInfo(o.shape,"int32",s)}},m_={kernelName:"Tan",backendName:"cpu",kernelFunc:GT("Tan",(e=>Math.tan(e)))},g_=GT(jw,(e=>Math.tanh(e)));function y_(e,t){const n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];const a=HS(n,e.dtype);for(let r=0;r<a.values.length;++r){const t=a.indexToLoc(r),n=new Array(e.rank);for(let a=0;a<n.length;a++)n[a]=t[a]%e.shape[a];const o=e.locToIndex(n);a.values[r]=e.values[o]}return a}const b_=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function v_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;a>n;){if(a-n>600){const r=a-n+1,o=t-n+1,s=Math.log(r),i=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*i*(r-i)/r)*Math.sign(o-r/2);v_(e,t,Math.max(n,Math.floor(t-o*i/r+c)),Math.min(a,Math.floor(t+(r-o)*i/r+c)))}const r=e[t];let o=n,s=a;for(_v(e,n,t),b_(e[a],r)>0&&_v(e,n,a);o<s;){for(_v(e,o,s),o++,s--;b_(e[o],r)<0;)o+=1;for(;b_(e[s],r)>0;)s-=1}0===b_(e[n],r)?_v(e,n,s):(s+=1,_v(e,s,a)),s<=t&&(n=s+1),t<=s&&(a=s-1)}}function x_(e,t,n,a,r){const o=t[t.length-1],[s,i]=[e.length/o,o],c=Bv(n,s*a),l=Bv("int32",s*a);for(let h=0;h<s;h++){const t=h*i,n=e.subarray(t,t+i);let o=new Array(n.length);n.forEach(((e,t)=>o[t]={value:e,index:t})),a<o.length&&(v_(o,a),o=o.slice(0,a)),r&&o.sort(b_);const s=h*a,u=c.subarray(s,s+a),d=l.subarray(s,s+a);for(let e=0;e<a;e++)u[e]=o[e].value,d[e]=o[e].index}const u=t.slice();return u[u.length-1]=a,[HS(u,n,c),HS(u,"int32",l)]}const w_={kernelName:Kw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{image:r,transforms:o}=t,{interpolation:s,fillMode:i,fillValue:c,outputShape:l}=n,[u,h,d,p]=r.shape,[f,m]=null!=l?l:[h,d],g=[u,f,m,p],y=Hv(r.shape),b=y[0],v=y[1],x=y[2],w=Hv(g),k=w[0],S=w[1],I=w[2],T=Bv(r.dtype,Dv(g));T.fill(c);const C=a.data.get(r.dataId).values,E=a.data.get(o.dataId).values;for(let N=0;N<u;++N){const e=1===o.shape[0]?E:E.subarray(8*N,8*N+8);for(let t=0;t<f;++t)for(let n=0;n<m;++n)for(let a=0;a<p;++a){let r;const o=e[6]*n+e[7]*t+1;if(0===o)continue;const l=(e[0]*n+e[1]*t+e[2])/o,u=(e[3]*n+e[4]*t+e[5])/o,p=k_(l,d,i),f=k_(u,h,i);switch(s){case"nearest":r=I_(C,h,d,b,v,x,N,f,p,a,c);break;case"bilinear":r=T_(C,h,d,b,v,x,N,f,p,a,c);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(s))}T[N*k+t*S+n*I+a]=r}return a.makeTensorInfo(g,r.dtype,T)}return{dataId:a.write(T,g,r.dtype),shape:r.shape,dtype:r.dtype}}};function k_(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return Av(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return Av(0,n,t-1)}(e,t);case"nearest":return function(e,t){return Av(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function S_(e,t,n,a,r,o,s,i,c,l,u){return 0<=i&&i<t&&0<=c&&c<n?e[s*a+i*r+c*o+l]:u}function I_(e,t,n,a,r,o,s,i,c,l,u){return S_(e,t,n,a,r,o,s,Math.round(i),Math.round(c),l,u)}function T_(e,t,n,a,r,o,s,i,c,l,u){const h=Math.floor(i),d=Math.floor(c),p=h+1,f=d+1;return(p-i)*((f-c)*S_(e,t,n,a,r,o,s,h,d,l,u)+(c-d)*S_(e,t,n,a,r,o,s,h,f,l,u))+(i-h)*((f-c)*S_(e,t,n,a,r,o,s,p,d,l,u)+(c-d)*S_(e,t,n,a,r,o,s,p,f,l,u))}function C_(e,t,n,a){const r=zv(t,n)[0],o=[1,n[0],1];for(let f=0;f<r;f++)o[0]*=n[f];o[1]=n[r];for(let f=r+1;f<n.length;f++)o[2]*=n[f];const s=new Map,i=new Int32Array(n[r]),c=new zk(o,a,e),l=[],u=1===o[0]&&1===o[2];for(let f=0;f<n[r];f++){let t;if(u)t=e[f].toString();else{const e=[];for(let t=0;t<o[0];t++)for(let n=0;n<o[2];n++)e.push(c.get(t,f,n));t=e.join(",")}const n=s.get(t);if(null!=n)i[f]=n;else{const e=s.size;s.set(t,e),i[f]=e,l.push(f)}}const h=o.slice();h[1]=s.size;const d=new zk(h,a);l.forEach(((e,t)=>{for(let n=0;n<o[0];n++)for(let a=0;a<o[2];a++)d.set(c.get(n,e,a),n,t,a)}));const p=n.slice();return p[r]=h[1],{outputValues:d.values,outputShape:p,indices:i}}const E_={kernelName:"UnsortedSegmentSum",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,segmentIds:o}=t,{numSegments:s}=a;BT(r,"unsortedSegmentSum");const i=[],c=[],l=r.shape.length-o.shape.length;let u=o;for(let d=0;d<l;++d){const e=aN({inputs:{input:u},backend:n,attrs:{dim:d+1}});u=e,c.push(e)}for(let d=0;d<s;++d){const e=xk(d,"int32"),t=n.makeTensorInfo([],"int32",e),a=ZE({inputs:{a:t,b:u},backend:n}),o=mC({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),s=GE({inputs:{a:o,b:r},backend:n}),l=HE({inputs:{x:s},backend:n,attrs:{axis:0,keepDims:!1}});i.push(l),c.push(t),c.push(a),c.push(o),c.push(s),c.push(l)}const h=jR({inputs:i,backend:n,attrs:{axis:0}});return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}},N_=[EC,RC,AC,_C,kC,OC,MC,PC,zC,BC,WC,UC,VC,GC,jC,YC,XC,ZC,QC,CC,JC,nE,oE,iE,cE,gC,uE,hE,uC,dE,yE,vE,xE,wE,kE,SE,IE,TE,CE,EE,NE,RE,AE,_E,FE,DE,LE,ME,PE,zE,BE,WE,qE,KT,YE,QE,$E,nN,rN,sN,yN,vN,xN,kN,TN,CN,EN,RN,_N,DN,PN,YT,zN,mE,BN,WN,UN,ZT,jN,qN,XN,JN,eR,aR,rR,oR,sR,iR,uR,pR,fR,mR,gR,yR,bR,vR,xR,SR,IR,TR,NR,jE,AR,OR,DR,MR,BR,WR,GR,HR,KR,XR,eC,QR,nA,oA,hA,pA,pC,lN,fA,nC,rC,IC,mA,gA,yA,bA,vA,xA,kA,IA,CA,RA,AA,_A,iC,OA,FA,DA,tE,ER,MA,PA,BA,UA,GA,jA,HA,KA,XA,ZA,$A,n_,r_,s_,l_,d_,f_,pN,KE,m_,{kernelName:jw,backendName:"cpu",kernelFunc:g_},{kernelName:"TensorScatterUpdate",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:a,indices:r,updates:o}=t,{sliceRank:s,numUpdates:i,sliceSize:c,strides:l,outputSize:u}=wT(0,r,a.shape),h=n.bufferSync(r),d=n.bufferSync(o),p=n.bufferSync(a),f=TA(h,d,a.shape,u,c,i,s,l,p,!1);return n.makeTensorInfo(a.shape,f.dtype,f.values)}},{kernelName:Hw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reps:o}=a;BT(r,"tile");const s=y_(n.bufferSync(r),o);return n.makeTensorInfo(s.shape,s.dtype,s.values)}},{kernelName:"TopK",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{k:o,sorted:s}=a;BT(r,"topk");const i=n.data.get(r.dataId).values,[c,l]=x_(i,r.shape,r.dtype,o,s);return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}},w_,LC,{kernelName:"Unique",backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{axis:r}=n,{x:o}=t;BT(o,"unique");const s=a.data.get(o.dataId).values,{outputValues:i,outputShape:c,indices:l}=C_(s,r,o.shape,o.dtype);return[a.makeTensorInfo(c,o.dtype,i),a.makeTensorInfo([l.length],"int32",l)]}},{kernelName:Yw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{value:r}=t;let{axis:o}=a;o<0&&(o+=r.shape.length);const s=r.shape.length,i=r.shape[o],c=new Array(s-1);let l=0;for(let p=0;p<s;p++)p!==o&&(c[l++]=r.shape[p]);const u=new Array(s).fill(0),h=r.shape.slice();h[o]=1;const d=new Array(i);for(let p=0;p<d.length;p++){u[o]=p;const e=eE({inputs:{x:r},backend:n,attrs:{begin:u,size:h}});d[p]=SC({inputs:{x:e},backend:n,attrs:{shape:c}}),n.disposeIntermediateTensorInfo(e)}return d}},E_,VR];for(const fU of N_)rk(fU);const R_={},A_={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function __(e,t){if(!(e in R_)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(G().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete R_[e]}),!1),G().getBool("SOFTWARE_WEBGL_ENABLED")&&(A_.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",A_)||n.getContext("experimental-webgl",A_);return n.getContext("webgl2",A_)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;R_[e]=n}const n=R_[e];return null==n||n.isContextLost()?(delete R_[e],__(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),R_[e])}var O_,F_,D_;function L_(e,t){return[t,e]}function M_(e){const t=y(e);return x(Math.ceil(t/4))}function P_(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function z_(e,t){const n=e;let a,r,o,s,i,c,l,u,h,d;return 2===G().getNumber("WEBGL_VERSION")?(a=n.R32F,r=n.R16F,o=n.RGBA16F,s=n.RGBA32F,i=n.RED,l=4,u=1,h=n.HALF_FLOAT,d=n.FLOAT,c=n.RGBA8):(a=e.RGBA,r=e.RGBA,o=e.RGBA,s=n.RGBA,i=e.RGBA,l=4,u=4,h=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,c=e.RGBA),{internalFormatFloat:a,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:s,textureFormatFloat:i,downloadTextureFormat:c,downloadUnpackNumChannels:l,defaultNumChannels:u,textureTypeHalfFloat:h,textureTypeFloat:d}}function B_(e,t){const n=t();return G().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(O_||(O_={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(F_||(F_={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(D_||(D_={}));function W_(e){return!!(G().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function U_(e,t){return Z_(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}const V_=/ERROR: [0-9]+:([0-9]+):/g;function G_(e,t){const n=V_.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);const a=+n[1],r=e.split("\n"),o=r.length.toString().length+2,s=r.map(((e,t)=>w((t+1).toString(),o)+e));let i=0;for(let h=0;h<s.length;h++)i=Math.max(s[h].length,i);const c=s.slice(0,a-1),l=s.slice(a-1,a),u=s.slice(a);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(w(l[0],i)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function j_(e,t){if(B_(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function H_(e,t,n,a,r,o,s){const i=e.getAttribLocation(t,n);return-1!==i&&(B_(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,a))),B_(e,(()=>e.vertexAttribPointer(i,r,e.FLOAT,!1,o,s))),B_(e,(()=>e.enableVertexAttribArray(i))),!0)}function K_(e,t,n,a){B_(e,(()=>function(e,t,n){Q_(e,n),B_(e,(()=>e.activeTexture(e.TEXTURE0+n))),B_(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,a))),B_(e,(()=>e.uniform1i(n,a)))}function q_(e,t,n){B_(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),B_(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function Y_(e,t){B_(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),B_(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function X_(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function Z_(e,t,n){const a=B_(e,(()=>t()));if(null==a)throw new Error(n);return a}function Q_(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,a=t+e.TEXTURE0;if(a<e.TEXTURE0||a>n){const e="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(e,"."))}}function J_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return y(e.slice(0,e.length-t))}function $_(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function eO(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[J_(e),...$_(e)]),t}function tO(e){return e%2===0}function nO(e,t){if(b(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],a=t[t.length-1];if(n===a)return!0;if(tO(n)&&tO(a)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&tO(e[0])&&tO(t[0])}let aO,rO;function oO(e,t){return null!=e.getExtension(t)}function sO(e){try{if(null!=__(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function iO(e){if(0===e)return!1;const t=__(e);if(1!==e){if(oO(t,"EXT_color_buffer_float"))return cO(t);const e="EXT_color_buffer_half_float";if(oO(t,e)){const n=t.getExtension(e);return function(e,t){const n=z_(e,t),a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a);const r=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,r,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(a),e.deleteFramebuffer(s),i}(t,n)}return!1}if(!oO(t,"OES_texture_float"))return!1;if(!oO(t,"WEBGL_color_buffer_float"))return!1;return cO(t)}function cO(e){const t=z_(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const r=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(a),r}function lO(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&f("complex64"!==e.dtype,(()=>"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."))}))}const uO=G();function hO(){let e,t,n,a,r,o,s,i,c,l;return 2===G().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",a="in",r="texture",o="outputColor",s="out vec4 outputColor;",i=G().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",c="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",a="varying",r="texture2D",o="gl_FragColor",s="",i="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",c="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:a,texture2D:r,output:o,defineOutput:s,defineSpecialNaN:i,defineSpecialInf:c,defineRound:l}}function dO(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const a=F(t);return a.map(((t,r)=>{const o="int ".concat(e[r]," = ").concat(n," / ").concat(t),s=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(t):"index -= ".concat(e[r]," * ").concat(t);return"".concat(o,"; ").concat(s,";")})).join("")}function pO(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const a=F(t);return a.map(((t,r)=>{const o="int ".concat(e[r]," = ").concat(n," / outShapeStrides[").concat(r,"]"),s=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * outShapeStrides[").concat(r,"]"):"index -= ".concat(e[r]," * outShapeStrides[").concat(r,"]");return"".concat(o,"; ").concat(s,";")})).join("")}function fO(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const a=function(e,t){const n=e.length,a=e.map((e=>"".concat(t,"[").concat(e,"]"))),r=new Array(n-1);r[n-2]=a[n-1];for(let o=n-3;o>=0;--o)r[o]="(".concat(r[o+1]," * ").concat(a[o+1],")");return r}(e.map(((e,t)=>t)),t);return a.map(((t,r)=>{const o="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),s=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(o,"; ").concat(s,";")})).join("")}function mO(e){const t=F(e).map((e=>e.toString()));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}uO.registerFlag("HAS_WEBGL",(()=>uO.getNumber("WEBGL_VERSION")>0)),uO.registerFlag("WEBGL_VERSION",(()=>sO(2)?2:sO(1)?1:0)),uO.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),uO.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===uO.get("WEBGL_VERSION"))),uO.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),uO.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),uO.registerFlag("WEBGL_PACK",(()=>uO.getBool("HAS_WEBGL"))),uO.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>uO.getBool("WEBGL_PACK"))),uO.registerFlag("WEBGL_PACK_CLIP",(()=>uO.getBool("WEBGL_PACK"))),uO.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>uO.getBool("WEBGL_PACK"))),uO.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>uO.getBool("WEBGL_PACK"))),uO.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>uO.getBool("WEBGL_PACK"))),uO.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>uO.getBool("WEBGL_PACK"))),uO.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>uO.getBool("WEBGL_PACK"))),uO.registerFlag("WEBGL_PACK_REDUCE",(()=>uO.getBool("WEBGL_PACK"))),uO.registerFlag("WEBGL_LAZILY_UNPACK",(()=>uO.getBool("WEBGL_PACK"))),uO.registerFlag("WEBGL_CONV_IM2COL",(()=>uO.getBool("WEBGL_PACK"))),uO.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(()=>uO.getBool("WEBGL_PACK"))),uO.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==aO){const t=__(e);aO=t.getParameter(t.MAX_TEXTURE_SIZE)}return aO}(uO.getNumber("WEBGL_VERSION")))),uO.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==rO){const t=__(e);rO=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,rO)}(uO.getNumber("WEBGL_VERSION")))),uO.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=uO.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=__(e);return t=oO(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:oO(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),uO.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>uO.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!qa())),uO.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=__(e);if(1===e){if(!oO(t,"OES_texture_float"))return!1}else if(!oO(t,"EXT_color_buffer_float"))return!1;return cO(t)}(uO.getNumber("WEBGL_VERSION")))),uO.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!uO.getBool("WEBGL_FORCE_F16_TEXTURES")&&uO.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),uO.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>iO(uO.getNumber("WEBGL_VERSION")))),uO.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=uO.getNumber("WEBGL_VERSION"))&&null!=__(e).fenceSync;var e})),uO.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>uO.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),uO.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if("number"!==typeof e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),uO.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>qa()?1:-1),(e=>{if("number"!==typeof e)throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),uO.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),uO.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),uO.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),uO.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128)),uO.registerFlag("WEBGL_EXP_CONV",(()=>!1)),uO.registerFlag("SOFTWARE_WEBGL_ENABLED",(()=>uO.getBool("IS_TEST"))),uO.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(()=>1/0)),uO.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(()=>!1)),uO.registerFlag("WEBGL2_ISNAN_CUSTOM",(()=>!1)),uO.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));const gO="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:yO}=o;function bO(e,t,n){const a=[];if(e.forEach((e=>{const t=y(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?a.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(a.push("uniform sampler2D ".concat(e.name,";")),a.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){const{uniformShape:t}=NO(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:a.push("uniform int ".concat(e.name,"Shape;"));break;case 2:a.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:a.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:a.push("uniform ivec4 ".concat(e.name,"Shape;"))}a.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:a.push("uniform int outShape;");break;case 2:a.push("uniform ivec2 outShape;"),a.push("uniform int outShapeStrides;");break;case 3:a.push("uniform ivec3 outShape;"),a.push("uniform ivec2 outShapeStrides;");break;case 4:a.push("uniform ivec4 outShape;"),a.push("uniform ivec3 outShapeStrides;")}a.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{a.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));const r=a.join("\n"),o=e.map((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,r="";r+=n?xO(e,a):vO(e,a);const o=e.shapeInfo.logicalShape,s=t.logicalShape;o.length<=s.length&&(r+=n?function(e,t){const n=e.name,a=n.charAt(0).toUpperCase()+n.slice(1),r="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,i=yO(e.shapeInfo.logicalShape,t.logicalShape),c=EO(s),l=s-o;let u;const h=["x","y","z","w","u","v"];u=0===o?"":s<2&&i.length>=1?"coords = 0;":i.map((e=>"coords.".concat(h[e+l]," = 0;"))).join("\n");let d="";d=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>"coords.".concat(h[t+l]))).join(", ");let p="return outputValue;";const f=1===y(e.shapeInfo.logicalShape),m=y(t.logicalShape),g=1===m;if(1!==o||f||g){if(f&&!g)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(i.length){const e=o-2,t=o-1;i.indexOf(e)>-1&&i.indexOf(t)>-1?p="return vec4(outputValue.x);":i.indexOf(e)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":i.indexOf(t)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(r,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(u,"\n      vec4 outputValue = get").concat(a,"(").concat(d,");\n      ").concat(p,"\n    }\n  ")}(e,t):function(e,t){const n=e.name,a=n.charAt(0).toUpperCase()+n.slice(1),r="get"+a+"AtOutCoords",o=t.texShape,s=e.shapeInfo.texShape,i=e.shapeInfo.logicalShape.length,c=t.logicalShape.length;if(!e.shapeInfo.isUniform&&i===c&&null==e.shapeInfo.flatOffset&&b(s,o))return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");const l=EO(c),u=yO(e.shapeInfo.logicalShape,t.logicalShape),h=c-i;let d;const p=["x","y","z","w","u","v"];d=0===i?"":c<2&&u.length>=1?"coords = 0;":u.map((e=>"coords.".concat(p[e+h]," = 0;"))).join("\n");let f="";f=c<2&&i>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>"coords.".concat(p[t+h]))).join(", ");return"\n    float ".concat(r,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(d,"\n      return get").concat(a,"(").concat(f,");\n    }\n  ")}(e,t));return r}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),s=t.texShape,i=hO(),c=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(i);let l,u,h=function(e){const t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(wO,"\n    ").concat(kO,"\n    ").concat(SO,"\n  ");return t}(i);t.isPacked?(l=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===a[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(a[1],".0);\n      }\n    ");if(1===a[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(a[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n      return 2 * (resTexRC.x * ").concat(a[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(b(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(a[0],", ").concat(a[1],"));\n      }\n    ");const r=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),o=r*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),o=r*Math.ceil(e[e.length-2]/2);let s=o,i="",c="b, r, c";for(let l=2;l<e.length-1;l++)s*=e[e.length-l-1],i="\n      int b".concat(l," = index / ").concat(s,";\n      index -= b").concat(l," * ").concat(s,";\n    ")+i,c="b".concat(l,", ")+c;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(a[0],", ").concat(a[1],"));\n      int index = resTexRC.x * ").concat(a[1]," + resTexRC.y;\n\n      ").concat(i,"\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec").concat(e.length,"(").concat(c,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,s,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(i)):(l=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(b(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){const t=pO(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(t,"\n    return ivec3(r, c, d);\n  }\n")}const a=dO(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){const t=pO(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(t,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}const a=dO(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){const n=dO(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){const n=dO(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,s,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(i)),n.packedInputs&&(h+=IO);return[h,c,u,r,l,o,n.userCode].join("\n")}function vO(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(a,"() {return ").concat(n,";}");const[r,o]=e.shapeInfo.texShape;if(1===r&&1===o)return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const s=TO(n);if(t)return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");const[i,c]=e.shapeInfo.texShape;return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(c,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int index) {\n        ").concat(CO(e),"\n      }\n    ");const r=e.shapeInfo.texShape,o=r[0],s=r[1];if(1===s&&1===o)return"\n      float ".concat(a,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const i=TO(n);if(1===s)return t?"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(i,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(i,") + 0.5) / ").concat(o,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===o)return t?"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(i,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(a,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(i,") + 0.5) / ").concat(s,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(a,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(a,"(int index) {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(s,", index + ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=e.shapeInfo.texShape;if(null!=o&&b(n,o)){if(t)return"\n      float ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");const e=o[0],n=o[1];return"\n    float ".concat(r,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(n,".0, ").concat(e,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}const{newShape:s,keptDims:i}=I(n),c=s;if(c.length<n.length){const n=RO(e,c),a=["row","col"];return"\n      ".concat(vO(n,t),"\n      float ").concat(r,"(int row, int col) {\n        return ").concat(r,"(").concat(AO(a,i),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(CO(e),"\n      }\n    ");const l=o[0],u=o[1],h=TO(a);if(1===u)return t?"\n      float ".concat(r,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(a,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(a,"TexShape[0]));\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(l,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");if(1===l)return t?"\n      float ".concat(r,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(a,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(a,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(u,".0, 0.5);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");if(t)return"\n      float ".concat(r,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(a,"Shape[1] + col + ").concat(h,";\n        vec2 uv = uvFromFlat(").concat(a,"TexShape[0], ").concat(a,"TexShape[1], index);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");return"\n  float ".concat(r,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(h,";\n    vec2 uv = uvFromFlat(").concat(l,", ").concat(u,", index);\n    return sampleTexture(").concat(a,", uv);\n  }\n")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n[1]*n[2],s=n[2],{newShape:i,keptDims:c}=I(n),l=i;if(l.length<n.length){const n=RO(e,l),a=["row","col","depth"];return"\n        ".concat(vO(n,t),"\n        float ").concat(r,"(int row, int col, int depth) {\n          return ").concat(r,"(").concat(AO(a,c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(s,", 1)));\n        ").concat(CO(e),"\n      }\n    ");const u=e.shapeInfo.texShape,h=u[0],d=u[1],p=e.shapeInfo.flatOffset;if(d===o&&null==p)return t?"\n      float ".concat(r,"(int row, int col, int depth) {\n        int stride1 = ").concat(a,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n        float ".concat(r,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(s,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(d,".0, ").concat(h,".0);\n          return sampleTexture(").concat(a,", uv);\n        }\n      ");if(d===s&&null==p)return t?"\n      float ".concat(r,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(a,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(r,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(d,".0, ").concat(h,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");const f=TO(a);if(t)return"\n    float ".concat(r,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(a,"Shape[1] * ").concat(a,"Shape[2];\n      int stride1 = ").concat(a,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(a,"TexShape[0], ").concat(a,"TexShape[1], index);\n      return sampleTexture(").concat(a,", uv);\n    }\n    ");return"\n      float ".concat(r,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(s," + depth + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(h,", ").concat(d,", index);\n        return sampleTexture(").concat(a,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n[3],s=n[2]*o,i=n[1]*s,{newShape:c,keptDims:l}=I(n);if(c.length<n.length){const n=RO(e,c),a=["row","col","depth","depth2"];return"\n      ".concat(vO(n,t),"\n      float ").concat(r,"(int row, int col, int depth, int depth2) {\n        return ").concat(r,"(").concat(AO(a,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(i,", ").concat(s,", ").concat(o,", 1)));\n        ").concat(CO(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1],f="int stride2 = ".concat(a,"Shape[3];"),m="int stride1 = ".concat(a,"Shape[2] * stride2;"),g="int stride0 = ".concat(a,"Shape[1] * stride1;");if(p===i&&null==u)return t?"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        ").concat(f,"\n        ").concat(m,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(s,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");if(p===o&&null==u)return t?"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(a,"Shape[1] * ").concat(a,"Shape[2], ").concat(a,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    ");const y=TO(a);if(t)return"\n    float ".concat(r,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(f,"\n      ").concat(m,"\n      ").concat(g,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(a,"TexShape[0], ").concat(a,"TexShape[1], index + ").concat(y,");\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(i," + col * ").concat(s," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index + ").concat(y,");\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=t[4],o=t[3]*r,s=t[2]*o,i=t[1]*s,{newShape:c,keptDims:l}=I(t);if(c.length<t.length){const t=RO(e,c),n=["row","col","depth","depth2","depth3"];return"\n      ".concat(vO(t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(a,"(").concat(AO(n,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(i,", ").concat(s,", ").concat(o,", ").concat(r,")) +\n          depth3;\n        ").concat(CO(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1];if(p===i&&null==u)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(s,", ").concat(o,", ").concat(r,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(p===r&&null==u)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const f=TO(n);return"\n    float ".concat(a,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(i," + col * ").concat(s," + depth * ").concat(o," +\n          depth2 * ").concat(r," + depth3 + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:r,keptDims:o}=I(t);if(r.length<t.length){const t=RO(e,r),n=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(vO(t),"\n      float ").concat(a,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(a,"(").concat(AO(n,o),");\n      }\n    ")}const s=t[5],i=t[4]*s,c=t[3]*i,l=t[2]*c,u=t[1]*l;if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(l,", ").concat(c,", ").concat(i,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(s,", 1)));\n        ").concat(CO(e),"\n      }\n    ");const h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1];if(f===u&&null==h)return"\n      float ".concat(a,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(l,", ").concat(c,", ").concat(i,", ").concat(s,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===s&&null==h)return"\n      float ".concat(a,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const m=TO(n);return"\n    float ".concat(a,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(l," + depth * ").concat(c," +\n          depth2 * ").concat(i," + depth3 * ").concat(s," + depth4 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function xO(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),a=hO();return"\n    vec4 ".concat(n,"() {\n      return ").concat(a.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=e.shapeInfo.texShape,o=hO();if(t)return"\n    vec4 ".concat(a,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");const s=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return"\n    vec4 ".concat(a,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(s[0],", ").concat(s[1],", index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=e.shapeInfo.texShape,s=o[0],i=o[1],c=hO();if(null!=o&&b(n,o))return t?"\n      vec4 ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(a,"TexShape[1], ").concat(a,"TexShape[0]);\n\n        return ").concat(c.texture2D,"(").concat(a,", uv);\n      }\n    "):"\n      vec4 ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(i,".0, ").concat(s,".0);\n\n        return ").concat(c.texture2D,"(").concat(a,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(r,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(a,"TexShape[0]) / 2.0), ceil(float(").concat(a,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(a,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(c.texture2D,"(").concat(a,", uv);\n    }\n  ");const l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],u=Math.ceil(n[1]/2);return"\n    vec4 ".concat(r,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u,", ").concat(l[0],", ").concat(l[1],", row, col);\n      return ").concat(c.texture2D,"(").concat(a,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=e.shapeInfo.texShape,s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){const a=[1,2],o=RO(e,n.slice(1)),s=["b","row","col"];return"\n        ".concat(xO(o,t),"\n        vec4 ").concat(r,"(int b, int row, int col) {\n          return ").concat(r,"(").concat(AO(s,a),");\n        }\n      ")}const i=hO();if(t)return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(a,"TexShape[0]) / 2.0), ceil(float(").concat(a,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(a,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(a,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(i.texture2D,"(").concat(a,", uv);\n    }\n  ");const c=s[0],l=s[1],u=Math.ceil(n[2]/2),h=u*Math.ceil(n[1]/2);return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(c,", ").concat(l,", ").concat(h,", ").concat(u,", b, row, col);\n      return ").concat(i.texture2D,"(").concat(a,", uv);\n    }\n  ")}(e,t);default:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=hO();if(t)return"\n    vec4 ".concat(a,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(r.texture2D,"(").concat(n,", uv);\n    }\n  ");const o=e.shapeInfo.logicalShape,s=o.length,i=e.shapeInfo.texShape,c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],l=c[0],u=c[1],h=Math.ceil(o[s-1]/2);let d=h*Math.ceil(o[s-2]/2),p="int b, int row, int col",f="b * ".concat(d," + (row / 2) * ").concat(h," + (col / 2)");for(let m=2;m<s-1;m++)p="int b".concat(m,", ")+p,d*=o[s-m-1],f="b".concat(m," * ").concat(d," + ")+f;return"\n    vec4 ".concat(a,"(").concat(p,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(l,");\n      return ").concat(r.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}const wO="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",kO="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",SO="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",IO="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function TO(e){return"offset".concat(e)}function CO(e){const t=e.name,n=y(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function EO(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function NO(e,t,n){const{newShape:a,keptDims:r}=I(t),o=t.length,s=e&&3===o&&1===t[0],i=s?t.slice(1):a,c=!e&&o>1&&!b(t,n)&&a.length<o||s;return{useSqueezeShape:c,uniformShape:c?i:t,keptDims:r}}function RO(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function AO(e,t){return t.map((t=>e[t])).join(", ")}function _O(e,t,n,a){const r=n.map(((e,n)=>{const a={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(a.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:a}})),o=r.map((e=>e.shapeInfo)),s={logicalShape:a.shape,texShape:a.texData.texShape,isUniform:!1,isPacked:a.texData.isPacked,flatOffset:null},i=bO(r,s,t),c=function(e,t){const n=Z_(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(B_(e,(()=>e.shaderSource(n,t))),B_(e,(()=>e.compileShader(n))),G().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw G_(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,i),l=e.createProgram(c);return G().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:c,source:i,webGLProgram:l,inShapeInfos:o,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(l),Object.assign({program:t,fragmentShader:c,source:i,webGLProgram:l,inShapeInfos:o,outShapeInfo:s},OO(e,t,l)))}function OO(e,t,n){const a=[],r=[];let o,s,i,c=null,l=null;l=e.getUniformLocation(n,"NAN",!1),1===G().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const h of t.variableNames){const r={name:h,uniform:e.getUniformLocation(n,h,u),offset:e.getUniformLocation(n,"offset".concat(h),u)};t.enableShapeUniforms&&(r.shape=e.getUniformLocation(n,"".concat(h,"Shape"),u),r.texShape=e.getUniformLocation(n,"".concat(h,"TexShape"),u)),a.push(r)}if(t.enableShapeUniforms&&(o=e.getUniformLocation(n,"outShape",u),i=e.getUniformLocation(n,"outShapeStrides",u),s=e.getUniformLocation(n,"outTexShape",u)),t.customUniforms)for(const h of t.customUniforms)r.push(e.getUniformLocation(n,h.name,u));return{variablesLocations:a,customUniformLocations:r,infLoc:c,nanLoc:l,outShapeLocation:o,outShapeStridesLocation:i,outTexShapeLocation:s}}function FO(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach(((e,n)=>{const a=e.logicalShape,r=t[n],o=r.shape;if(!b(a,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(a," and ").concat(o," must match"));if(e.isUniform&&r.isUniform)return;const s=e.texShape,i=r.isUniform?null:r.texData.texShape;if(!b(s,i))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(s," and ").concat(i," must match"))}))}function DO(e){return G().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class LO{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=O_.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=hO();this.outputShape=e,this.enableShapeUniforms=DO(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?pO(["r","c","d"],e):dO(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class MO{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=O_.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=hO();this.outputShape=e,this.enableShapeUniforms=DO(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?pO(["r","c","d"],e):dO(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class PO{constructor(e){this.variableNames=["A"],this.outTexUsage=F_.DOWNLOAD;const t=hO();this.outputShape=e,this.userCode="\n      ".concat(gO,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}class zO{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=F_.DOWNLOAD;const t=hO();this.outputShape=e,this.userCode="\n      ".concat(gO,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}const BO={R:0,G:1,B:2,A:3};class WO{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const a=hO();this.outputShape=e,this.enableShapeUniforms=DO(this.outputShape.length);let r="result";t&&(r="floor(result * 255. + 0.5)");let o="";for(let s=0;s<n.length;s++){const e=n[s];o+="\n          if(offset == ".concat(s,") {\n            result = values[").concat(BO[e],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":mO(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(n.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(n.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(a.texture2D,"(A, uv);\n          ").concat(o,"\n        }\n        ").concat(a.output," = vec4(").concat(r,", 0., 0., 0.);\n      }\n    ")}}class UO{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=hO();this.outputShape=e,this.enableShapeUniforms=DO(this.outputShape.length);let a="",r="result";t&&(r="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let t=0;t<=1;t++){const r=2*o+t;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(t," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(t,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(n.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(r,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(r,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(r,"] = values[2];\n            } else {\n              result[").concat(r,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":mO(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(n.output," = ").concat(r,";\n        }\n    ")}}function VO(e){const t=hO();return function(e,t){const n=Z_(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(B_(e,(()=>e.shaderSource(n,t))),B_(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function GO(e){return function(e,t){const n=Z_(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return B_(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),B_(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function jO(e){return function(e,t){const n=Z_(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return B_(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),B_(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}function HO(e,t,n,a,r,o){!function(e,t){const n=G().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const n="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+n+" is invalid.")}if(e>n||t>n){const a="[".concat(e,"x").concat(t,"]"),r="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+r+".")}}(t,n);const s=function(e){return Z_(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),i=e.TEXTURE_2D;return B_(e,(()=>e.bindTexture(i,s))),B_(e,(()=>e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),B_(e,(()=>e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),B_(e,(()=>e.texParameteri(i,e.TEXTURE_MIN_FILTER,e.NEAREST))),B_(e,(()=>e.texParameteri(i,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===G().getNumber("WEBGL_VERSION")?B_(e,(()=>e.texImage2D(i,0,a,t,n,0,r,o,null))):B_(e,(()=>e.texStorage2D(i,1,a,t,n))),B_(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:s,texShape:[n,t]}}function KO(e){return e.internalFormatFloat}function qO(e){return e.internalFormatHalfFloat}function YO(e){return e.downloadTextureFormat}function XO(e){return e.internalFormatPackedFloat}function ZO(e){return e.internalFormatPackedHalfFloat}function QO(e,t,n,a,r,o,s,i){const c=e,l=new Float32Array(function(e,t){const[n,a]=P_(e,t);return n*a*4}(o,s));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,l),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),l}class JO{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=G().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){R_[e]=t}(t,e)):this.gl=__(t),e=this.gl,2===G().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>B_(t,(()=>t.createVertexArray())),this.bindVertexArray=e=>B_(t,(()=>t.bindVertexArray(e))),this.deleteVertexArray=e=>B_(t,(()=>t.deleteVertexArray(e))),this.getVertexArray=()=>B_(t,(()=>t.getParameter(t.VERTEX_ARRAY_BINDING)))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>B_(e,(()=>t.createVertexArrayOES())),this.bindVertexArray=n=>B_(e,(()=>t.bindVertexArrayOES(n))),this.deleteVertexArray=n=>B_(e,(()=>t.deleteVertexArrayOES(n))),this.getVertexArray=()=>B_(e,(()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES)))}let n="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===G().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=U_(this.gl,e),oO(this.gl,t))this.textureHalfFloatExtension=U_(this.gl,t);else if(G().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),oO(this.gl,a))this.colorBufferHalfFloatExtension=U_(this.gl,a);else if(G().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",oO(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!oO(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=GO(this.gl),this.indexBuffer=jO(this.gl),this.framebuffer=function(e){return Z_(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=z_(this.gl,this.textureHalfFloatExtension)}get debug(){return G().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;B_(e,(()=>e.finish())),B_(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),B_(e,(()=>e.deleteFramebuffer(this.framebuffer))),B_(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),B_(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),B_(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=L_(t,n);return HO(e,r,o,KO(a),a.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=L_(t,n);return HO(e,r,o,qO(a),a.textureFormatFloat,a.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=L_(t,n);return HO(e,r,o,YO(a),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){B_(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===G().getNumber("WEBGL_VERSION")?B_(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):B_(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===G().getNumber("WEBGL_VERSION")?B_(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):B_(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),B_(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,a){this.throwIfDisposed(),function(e,t,n,a,r,o){let s,i,c;B_(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),r instanceof Uint8Array?(s=new Uint8Array(n*a*4),i=e.UNSIGNED_BYTE,c=e.RGBA):(s=new Float32Array(n*a*4),i=e.FLOAT,c=o.internalFormatPackedFloat),s.set(r),2===G().getNumber("WEBGL_VERSION")?B_(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,a,e.RGBA,i,s))):B_(e,(()=>e.texImage2D(e.TEXTURE_2D,0,c,n,a,0,e.RGBA,i,s))),B_(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=P_(t,n);return HO(e,r,o,ZO(a),e.RGBA,a.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=P_(t,n);return HO(e,r,o,XO(a),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(Y_(this.gl,this.framebuffer),this.outputTexture=null),B_(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,a){const[r,o]=L_(t,n),s=new Uint8Array(t*n*4);return B_(e,(()=>e.readPixels(0,0,r,o,a.downloadTextureFormat,e.UNSIGNED_BYTE,s))),new Float32Array(s.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,a,r,o){return QO(this.gl,e,0,0,0,r,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const a=e,r=new Float32Array(n);return a.bindBuffer(a.PIXEL_PACK_BUFFER,t),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,r),a.bindBuffer(a.PIXEL_PACK_BUFFER,null),r}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const a=function(e,t,n,a){const r=e.createBuffer();B_(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,r)));const o=16*t*n;return B_(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ))),B_(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),B_(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),r}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(G().getBool("WEBGL_FENCE_API_ENABLED")){const a=e,r=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=a.clientWaitSync(r,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=r}else G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const a=new Float32Array(t*n*4);return B_(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,a))),a}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=VO(t));const n=function(e){return Z_(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);B_(t,(()=>t.attachShader(n,this.vertexShader))),B_(t,(()=>t.attachShader(n,e))),function(e,t){if(B_(e,(()=>e.linkProgram(t))),!G().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const a=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&j_(t,a),a}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;B_(t,(()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer))),function(e,t,n){B_(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),H_(e,t,"clipSpacePos",n,3,20,0)&&H_(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(B_(this.gl,(()=>this.gl.deleteProgram(e))),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&j_(this.gl,this.program),B_(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return Z_(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),B_(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),K_(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[a,r]=P_(t,n);this.setOutputMatrixTextureDriver(e,a,r)}setOutputMatrixWriteRegion(e,t,n,a){this.setOutputMatrixWriteRegionDriver(n,e,a,t)}setOutputPackedMatrixWriteRegion(e,t,n,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&j_(this.gl,this.program),X_(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}B_(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),B_(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=U_(this.gl,2===G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await k((()=>this.disposed||this.isQueryAvailable(e,G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),a=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),a&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in G().platform&&(n=G().platform.setTimeoutCustom.bind(G().platform)),k((()=>(this.pollItems(),0===this.itemsToPoll.length)),(()=>0),null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),q_(this.gl,e,this.framebuffer),this.debug&&X_(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(q_(this.gl,this.outputTexture,this.framebuffer),this.debug&&X_(this.gl)):Y_(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const a=this.gl;q_(a,e,this.framebuffer),this.debug&&X_(a),this.outputTexture=e,B_(a,(()=>a.viewport(0,0,t,n))),B_(a,(()=>a.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,a){this.throwIfDisposed(),B_(this.gl,(()=>this.gl.scissor(e,t,n,a)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{addImpl:$O,bincountImpl:eF,bincountReduceImpl:tF,bitwiseAndImpl:nF,castImpl:aF,ceilImpl:rF,concatImpl:oF,equalImpl:sF,expImpl:iF,expm1Impl:cF,floorImpl:lF,gatherNdImpl:uF,gatherV2Impl:hF,greaterImpl:dF,greaterEqualImpl:pF,lessImpl:fF,lessEqualImpl:mF,linSpaceImpl:gF,logImpl:yF,maxImpl:bF,maximumImpl:vF,minimumImpl:xF,multiplyImpl:wF,negImpl:kF,notEqualImpl:SF,prodImpl:IF,raggedGatherImpl:TF,raggedRangeImpl:CF,raggedTensorToTensorImpl:EF,rangeImpl:NF,rsqrtImpl:RF,scatterImpl:AF,sigmoidImpl:_F,simpleAbsImpl:OF,sliceImpl:FF,sparseFillEmptyRowsImpl:DF,sparseReshapeImpl:LF,sparseSegmentReductionImpl:MF,sqrtImpl:PF,staticRegexReplaceImpl:zF,stridedSliceImpl:BF,stringNGramsImpl:WF,stringSplitImpl:UF,stringToHashBucketFastImpl:VF,subImpl:GF,tileImpl:jF,topKImpl:HF,transposeImpl:KF,uniqueImpl:qF}=s;function YF(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>"".concat(e,".").concat(t)))}function XF(e,t){return 1===t?[e]:YF(e,t)}class ZF{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=DO(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=XF("rc",this.rank),t=EO(this.rank),n=this.getOutOfBoundsCondition(e),a=this.getSetup(e),r=this.getOutput(e);this.userCode="\n        void main() {\n          ".concat(t," rc = getOutputCoords();\n\n          if(").concat(n,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(a,"\n\n            setOutput(vec4(").concat(r,"));\n          }\n        }\n      ")}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let a=0;a<=1;a++){let r="".concat(0===n?"r":"rp1",", ").concat(0===a?"c":"cp1");for(let t=2;t<this.rank;t++)r="".concat(e[e.length-1-t],",")+r;t.push(r)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let t="";for(let n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],a=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(a,";\n    ")}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){const e=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(e," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}class QF{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=DO(this.outputShape.length);let n="";for(let a=0;a<4;a++){let e="thisRC = rc;";a%2===1&&(e+="thisRC.z += 1;"),a>1&&(e+="thisRC.y += 1;"),n+="\n        ".concat(e,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){const n=t?fO(["r","c","d"],"inputShape"):dO(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(t,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":mO(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(n,"\n\n        setOutput(result);\n      }\n    ")}}class JF{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const a=eD(t,n),r=tD(e,a,n);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const o=$F(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const e=this.freeTextures[r].pop();return this.usedTextures[r].push(e),e}let s;return a===D_.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===D_.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===D_.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===D_.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===D_.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[r].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,t,n,a){if(null==this.freeTextures)return;const r=eD(n,a),o=tD(t,r,a);o in this.freeTextures||(this.freeTextures[o]=[]);const s=$F(t,r,this.gpgpu.gl,this.gpgpu.textureConfig,a),i=G().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==i&&this._numBytesAllocated>i?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const c=this.usedTextures[o],l=c&&c.indexOf(e);if(null==l||l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[l]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));const t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function $F(e,t,n,a,r){const o=function(e,t){switch(e){case D_.PACKED_2X2_FLOAT32:return XO(t);case D_.PACKED_2X2_FLOAT16:return ZO(t);case D_.UNPACKED_FLOAT32:return KO(t);case D_.UNPACKED_FLOAT16:return qO(t);case D_.PACKED_4X1_UNSIGNED_BYTE:return YO(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,a);let s;if(r){const[t,n]=P_(e[0],e[1]);s=t*n}else{const[t,n]=L_(e[0],e[1]);s=t*n}const i=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return s*i}function eD(e,t){if(e===F_.UPLOAD)return D_.PACKED_2X2_FLOAT32;if(e===F_.RENDER||null==e)return function(e){return G().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?D_.PACKED_2X2_FLOAT32:D_.UNPACKED_FLOAT32:e?D_.PACKED_2X2_FLOAT16:D_.UNPACKED_FLOAT16}(t);if(e===F_.DOWNLOAD||e===F_.PIXELS)return D_.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function tD(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}class nD{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=DO(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}const aD="if (isnan(x)) return x;",rD="return x;",oD="return abs(x);";const sD="return (x >= 0.0) ? x : (exp(x) - 1.0);",iD=aD+"\n  return (x < 0.0) ? 0.0 : x;\n",cD=aD+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",lD="return x;",uD="return 1.0 / (1.0 + exp(-1.0 * x));",hD="return x;",dD="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",pD="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",fD="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",mD="return 1.0 / (1.0 + exp(-1.0 * x));";class gD{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=DO(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}class yD{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=DO(this.outputShape.length);const t=e.length,n=XF("rc",t),a=EO(t),r=function(e,t){if(1===e)return"rc";let n="";for(let a=0;a<e;a++)n+=t[a],a<e-1&&(n+=",");return n}(t,n),o=n.slice(-2),s=t<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(r,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")}}const bD=function(e,t){const n=[];for(let o=0;o<t.length;o++)t[o]&&n.push(o);const a=Xr(e,"int32"),r=Xr([n.length,e.length],"int32");for(let o=0;o<n.length;o++){const t=a.indexToLoc(n[o]),s=o*e.length;r.values.set(t,s)}return r.toTensor()},vD={};const xD=G().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class wD extends c{nextDataId(){return wD.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!G().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof JO)t=e;else{const n=__(G().getNumber("WEBGL_VERSION"),e);t=new JO(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=__(G().getNumber("WEBGL_VERSION"));t=new JO(e),this.binaryCache=((n=G().getNumber("WEBGL_VERSION"))in vD||(vD[n]={}),vD[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new JF(this.gpgpu),this.numMBBeforeWarning=null==G().global.screen?1024:G().global.screen.height*G().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new i(this,sr())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,a,r,o){const s=this.makeTensorInfo(t,n),i=this.texData.get(s.dataId);i.isPacked=!1,i.texture={texture:e,texShape:[a,r]},i.texShape=[a,r];const c=eO(t),l=new WO(c,!1,o),u=this.runWebGLProgram(l,[s],n,[[a,r]]);return u.shape=t,i.texture=null,this.disposeIntermediateTensorInfo(s),u.dataId}write(e,t,n){if((G().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||G().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:t,dtype:n,values:e,usage:F_.UPLOAD,refCount:1}),a}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,a,r){if(G().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===a)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:a,values:t,usage:F_.UPLOAD,refCount:r})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:a,complexTensorInfos:r,slice:o,shape:s,isPacked:i}=t;if(null!=o){let t;t=i?new gD(s,lD):new nD(s,lD);const n=this.runWebGLProgram(t,[{dataId:e,shape:s,dtype:a}],a),r=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===a)return n;const c=null!=this.activeTimers;let l,u;if(c&&(l=aa()),"complex64"===a){u=Bl(this.readSync(r.real.dataId),this.readSync(r.imag.dataId))}else u=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=aa()-l),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:a,slice:r,dtype:o,complexTensorInfos:s,isPacked:i}=t;if(null!=r){let t;t=i?new gD(a,lD):new nD(a,lD);const n=this.runWebGLProgram(t,[{dataId:e,shape:a,dtype:o}],o),r=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=n)return this.convertAndCacheOnCPU(e);if(G().getBool("DEBUG")&&!G().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===G().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c,l,u=null;if("complex64"!==o&&G().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const t=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(t.texture.texture,...M_(a))}if(this.pendingRead.set(e,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){const e=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]);l=Bl(e[0],e[1])}else if(null==u)l=this.getValuesFromTexture(e);else{const e=y(a);l=this.gpgpu.downloadFloat32MatrixFromBuffer(u,e)}if(null!=c&&this.disposeIntermediateTensorInfo(c),null!=u){const e=this.gpgpu.gl;B_(e,(()=>e.deleteBuffer(u)))}const h=this.convertAndCacheOnCPU(e,l),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach((e=>e(h))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&sr().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(e),{values:a,shape:r,slice:o,dtype:s,isPacked:i,texture:c}=n;if("complex64"===s)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){let n;n=i?new gD(r,lD):new nD(r,lD);const a=this.runWebGLProgram(n,[{dataId:e,shape:r,dtype:s}],s),o=this.readToGPU(a,t);return this.disposeIntermediateTensorInfo(a),o}if(null==c)throw null!=a?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const l=this.decode(e,t.customTexShape),u=sr().makeTensorFromTensorInfo(l),h=this.texData.get(l.dataId);return Object.assign({tensorRef:u},h.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>oa(e)));return Xr(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return Xr(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!W_(n)){if(G().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:a}=this.texData.get(e),r=y(t);if(G().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),a=this.texData.get(n.dataId),o=this.gpgpu.downloadMatrixFromPackedTexture(a.texture.texture,...M_(t)).subarray(0,r);return this.disposeIntermediateTensorInfo(n),o}const o=G().getBool("WEBGL_PACK")&&!0===a,s=o?eO(t):t,i=o?new zO(s):new PO(s),c=this.runWebGLProgram(i,[{shape:s,dtype:n,dataId:e}],"float32"),l=this.texData.get(c.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(l.texture.texture,l.texShape[0],l.texShape[1]).subarray(0,r);return this.disposeIntermediateTensorInfo(c),u}timerAvailable(){return G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let a=!1;null==this.programTimersStack?(this.programTimersStack=n,a=!0):this.activeTimers.push(n),this.activeTimers=n,e();const r=ia(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),o=ia(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,a&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(r);s.kernelMs=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}(e),s.getExtraProfileInfo=()=>e.map(((e,t)=>({name:o[t],ms:e}))).map((e=>"".concat(e.name,": ").concat(e.ms))).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:aa(),endMs:null}}endTimer(e){return G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=aa(),e)}async getQueryTime(e){if(G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:a,usage:r,isPacked:o,slice:s}=this.texData.get(e),i=s&&s.origDataId||e,c=this.dataRefCount.get(i);c>1?this.dataRefCount.set(i,c-1):(this.dataRefCount.delete(i),null!=t&&(this.numBytesInGPU-=this.computeBytes(a,n),this.textureManager.releaseTexture(t,a,r,o)));const l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xD;return G().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&y(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){Wn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return bD(e.shape,t)}packedUnaryOp(e,t,n){const a=new gD(e.shape,t),r=this.compileAndRun(a,[e],n);return sr().makeTensorFromTensorInfo(r)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=OF(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(G().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,oD,e.dtype);const t=new nD(e.shape,oD),n=this.compileAndRun(t,[e]);return sr().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let a;if("string"===t&&null!=n&&n.length>0&&N(n[0])){const r=n.map((e=>ra(e)));a=this.write(r,e,t)}else a=this.write(n,e,t);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:t}}makeOutput(e,t,n){return sr().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new yD(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new ZF(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[J_(e.shape),...$_(e.shape)],a={dtype:e.dtype,shape:n,dataId:e.dataId},r=[J_(t),...$_(t)],o=new QF(r,n),s=[n],i=this.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:a,shape:r,dtype:o}=n;if(null!=t){f(y(r)<=t[0]*t[1]*4,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."))}const s=eO(r);let i;i=a?new MO(s):new LO(s);const c=[null!=t?t:M_(s)];return{dtype:o,shape:r,dataId:this.runWebGLProgram(i,[{shape:s,dtype:o,dataId:e}],o,c,!0,t).dataId}}runWebGLProgram(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;const s=this.makeTensorInfo(e.outputShape,n),i=this.texData.get(s.dataId);if(e.packedOutput&&(i.isPacked=!0),e.outPackingScheme===O_.DENSE){const t=null!=o?o:M_(e.outputShape);i.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(i.usage=e.outTexUsage),0===y(s.shape))return i.values=T(s.dtype,0),s;const c=[],l=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&y(t.shape)<=G().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),c.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!nO(n.shape,t.shape)){const e=t,a=t.shape;t.shape=n.shape,t=this.packedReshape(t,a),c.push(t),n=this.texData.get(t.dataId),e.shape=a}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);const u={shape:s.shape,texData:i,isUniform:!1},h=function(e,t,n){let a="";t.concat(n).forEach((t=>{const r=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const o=t.texData.texShape,{useSqueezeShape:s,uniformShape:i,keptDims:c}=NO(e.packedInputs,t.shape,o);let l="",u="",h="";if(1===i.length&&e.packedInputs){const e=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];l="".concat(e[0]>1,"_").concat(e[1]>1)}else if(2!==i.length||e.packedInputs){if(i.length>2&&!e.packedInputs){const e=F(i);h="".concat(e[0]===o[1],"_").concat(e[e.length-1]===o[1])}}else u="".concat(i[0]>1,"_").concat(i[1]>1);const d=t.shape.length,p=2===i.length&&b(t.shape,o),f=1===y(t.shape),m=wo(t.shape,n.shape),g=!e.packedInputs&&d===n.shape.length&&b(o,n.texData.texShape),v=e.packedInputs||i.length>2?"":"".concat(o[0]>1,"_").concat(o[1]>1);a+="".concat(d,"_").concat(g,"_").concat(s?c:"","_").concat(i.length,"_").concat(f,"_").concat(m,"_").concat(p,"_").concat(l,"_").concat(u,"_").concat(h,"_").concat(v,"_").concat(r)}else{const e=t.isUniform?"uniform":t.texData.texShape;a+="".concat(t.shape,"_").concat(e,"_").concat(r)}}));const r=e.userCode;let o=e.constructor.name;return o+="_"+a+"_"+r+"".concat(G().getNumber("WEBGL_VERSION")),o}(e,l,u),d=this.getAndSaveBinary(h,(()=>_O(this.gpgpu,e,l,u))),p=null!=this.activeTimers;let f;p&&(f=this.startTimer()),G().get("ENGINE_COMPILE_ONLY")||function(e,t,n,a,r){t.program.enableShapeUniforms||(FO(t.inShapeInfos,n),FO([t.outShapeInfo],[a]));const o=a.texData.texture,s=a.texData.texShape;a.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,s[0],s[1]):e.setOutputMatrixTexture(o.texture,s[0],s[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===G().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let c=0;c<n.length;++c){const a=n[c],{uniform:r,offset:o,shape:s,texShape:i}=t.variablesLocations[c];if(s){const{uniformShape:n}=NO(t.program.packedInputs,a.shape,a.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(s,new Int32Array(n));break;case 2:e.gl.uniform2iv(s,new Int32Array(n));break;case 3:e.gl.uniform3iv(s,new Int32Array(n));break;case 4:e.gl.uniform4iv(s,new Int32Array(n))}}if(i&&e.gl.uniform2i(i,a.texData.texShape[0],a.texData.texShape[1]),null!=r)if(a.isUniform)if(y(a.shape)<2)e.gl.uniform1f(r,a.uniformValues[0]);else{let t=a.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(r,t)}else null!=a.texData.slice&&null!=o&&e.gl.uniform1i(o,a.texData.slice.flatOffset),e.setInputMatrixTexture(a.texData.texture.texture,r,c)}const i=t.outShapeLocation;if(i)switch(a.shape.length){case 1:e.gl.uniform1iv(i,new Int32Array(a.shape));break;case 2:e.gl.uniform2iv(i,new Int32Array(a.shape));break;case 3:e.gl.uniform3iv(i,new Int32Array(a.shape));break;case 4:e.gl.uniform4iv(i,new Int32Array(a.shape))}if(t.outShapeStridesLocation){const n=F(a.shape);switch(a.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,a.texData.texShape[0],a.texData.texShape[1]),t.program.customUniforms&&r)for(let c=0;c<t.program.customUniforms.length;++c){const n=t.program.customUniforms[c],a=t.customUniformLocations[c],o=r[c];if("float"===n.type)e.gl.uniform1fv(a,o);else if("vec2"===n.type)e.gl.uniform2fv(a,o);else if("vec3"===n.type)e.gl.uniform3fv(a,o);else if("vec4"===n.type)e.gl.uniform4fv(a,o);else if("int"===n.type)e.gl.uniform1iv(a,o);else if("ivec2"===n.type)e.gl.uniform2iv(a,o);else if("ivec3"===n.type)e.gl.uniform3iv(a,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(a,o)}}e.executeProgram()}(this.gpgpu,d,l,u,a),c.forEach((e=>this.disposeIntermediateTensorInfo(e))),p&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const m=G().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const e=aa();e-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!G().getBool("WEBGL_LAZILY_UNPACK")&&i.isPacked&&!1===r){const e=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),e}return s}compileAndRun(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,a,r)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!G().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=cr((()=>{if(!G().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=G().getBool("DEBUG");G().set("DEBUG",!1);const t=this.abs(so(1e-8)).dataSync()[0];if(G().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:a,values:r,texture:o,usage:s,isPacked:i}=t;if(null!=o)return;const c=null!=this.activeTimers;let l;c&&(l=aa());let u=t.texShape;if(null==u&&(u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=G().getNumber("WEBGL_MAX_TEXTURE_SIZE"),a=G().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(a===1/0&&G().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(a=n/2),t&&(n*=2,a*=2,1===(e=e.map(((t,n)=>n>=e.length-2?d(e[n]):e[n]))).length&&(e=[2,e[0]])),2!==e.length){const t=I(e);e=t.newShape}let r=y(e),o=null;e.length<=1&&r<=n?o=[1,r]:2===e.length&&e[0]<=n&&e[1]<=n?o=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);const s=null!=o&&Math.max(...o)>a&&Math.min(...o)<=(t?2:1)&&Math.min(...o)>0;if(null==o||s)if(t){const t=J_(e);let n=2,a=2;e.length&&([n,a]=$_(e)),r=t*(n/2)*(a/2),o=x(r).map((e=>2*e))}else o=x(r);return o}(n,i),t.texShape=u),null!=r){const e=eO(n);let o,s=u[1],h=u[0];const d=r instanceof Uint8Array||r instanceof Uint8ClampedArray;!i&&d||([s,h]=P_(u[0],u[1])),o=i?new UO(e,d):new WO(e,d);const p=d?[h,s]:u,f=this.makeTensorInfo(p,a),m=this.texData.get(f.dataId);m.usage=d?F_.PIXELS:F_.UPLOAD,m.texShape=p,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),s,h,r);const g=[[h,s]],y=!0,b=this.runWebGLProgram(o,[f],a,g,y),v=this.texData.get(b.dataId);t.texShape=v.texShape,t.isPacked=v.isPacked,t.usage=v.usage,G().get("ENGINE_COMPILE_ONLY")?this.disposeData(b.dataId):(t.texture=v.texture,t.values=null,this.texData.delete(b.dataId)),this.disposeIntermediateTensorInfo(f),c&&(this.uploadWaitMs+=aa()-l)}else{const e=this.acquireTexture(u,s,a,i);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:a}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype ".concat(t))}(t,a)),n.values}acquireTexture(e,t,n,a){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(e," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,a)}computeBytes(e,t){return e[0]*e[1]*E(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(n){throw n}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await hl(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw G_(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:a,nanLoc:r,outShapeLocation:o,outShapeStridesLocation:s,outTexShapeLocation:i}=OO(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=a,e.nanLoc=r,e.outShapeLocation=o,e.outShapeStridesLocation=s,e.outTexShapeLocation=i}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:a,height:r,width:o,channels:s}=e,i=sr().backend;if(!i.gpgpu.gl.isTexture(a))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=i.writeTexture(a,t,n,r,o,s);return sr().makeTensorFromDataId(c,t,n,i)}}wD.nextDataId=0;Ya()&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;ja.registerBackend(e,t,n)}("webgl",(()=>new wD),2);const kD="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class SD{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=So(t,n),this.enableShapeUniforms=DO(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}}const ID="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class TD{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=So(t,n);const r=this.outputShape.length;this.enableShapeUniforms=DO(r);let o="";if(a)if(0===r||1===y(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const e=EO(r);if(o="\n          ".concat(e," coords = getOutputCoords();\n        "),1===r)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{const e=XF("coords",r);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(e[r-2]," + 1) >= outShape[").concat(r," - 2];\n            bool nextColOutOfBounds =\n              (").concat(e[r-1]," + 1) >= outShape[").concat(r," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(e[r-2]," + 1) >= ").concat(this.outputShape[r-2],";\n            bool nextColOutOfBounds =\n              (").concat(e[r-1]," + 1) >= ").concat(this.outputShape[r-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}}function CD(e){const{inputs:t,backend:n}=e,{x:a}=t;return n.incRef(a.dataId),{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}const ED={kernelName:$e,backendName:"webgl",kernelFunc:CD};function ND(e){const{inputs:t,backend:n}=e,{real:a,imag:r}=t,o=n.makeTensorInfo(a.shape,"complex64"),s=n.texData.get(o.dataId),i=CD({inputs:{x:a},backend:n}),c=CD({inputs:{x:r},backend:n});return s.complexTensorInfos={real:i,imag:c},o}const RD={kernelName:ge,backendName:"webgl",kernelFunc:ND},AD="return (a < 0.) ? b * a : a;",_D="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const OD={kernelName:ot,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{alpha:o}=a,s=n.makeTensorInfo([],"float32",ta(o,"float32")),i=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TD(_D,r.shape,s.shape):new SD(AD,r.shape,s.shape),c=n.runWebGLProgram(i,[r,s],"float32");return n.disposeIntermediateTensorInfo(s),c}},FD="return (a < 0.) ? b * a : a;",DD="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const LD={kernelName:Pt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a,alpha:r}=t,o=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TD(DD,a.shape,r.shape):new SD(FD,a.shape,r.shape);return n.runWebGLProgram(o,[a,r],"float32")}},MD="if (isnan(x)) return x;";function PD(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:a,dtype:r}=e;return e=>{let{inputs:o,backend:s}=e;const{x:i}=o,c=s,l=r||i.dtype;if(c.shouldExecuteOnCPU([i])&&null!=a){const e=c.texData.get(i.dataId),t=a(e.values,l);return c.makeTensorInfo(i.shape,l,t)}let u;return u=G().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new gD(i.shape,n):new nD(i.shape,t),c.runWebGLProgram(u,[i],l)}}function zD(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:a=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:s}=e;return e=>{let{inputs:i,backend:c}=e;const{a:l,b:u}=i,h=c;if(r&&"complex64"===l.dtype){const e=h.texData.get(l.dataId),n=h.texData.get(u.dataId),[a,r]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((e=>{const[n,a]=e,r={dataId:n.dataId,dtype:n.dtype,shape:l.shape},o={dataId:a.dataId,dtype:a.dtype,shape:u.shape},s=new SD(t,l.shape,u.shape);return h.runWebGLProgram(s,[r,o],Oa(n.dtype,a.dtype))})),o=ND({inputs:{real:a,imag:r},backend:h});return h.disposeIntermediateTensorInfo(a),h.disposeIntermediateTensorInfo(r),o}const d=s||Oa(l.dtype,u.dtype);if(("string"===l.dtype||"string"===u.dtype||h.shouldExecuteOnCPU([l,u]))&&null!=o){const e=h.texData.get(l.dataId).values,t=h.texData.get(u.dataId).values,n="string"===l.dtype?vu(e):e,a="string"===l.dtype?vu(t):t,[r,s]=o(l.shape,u.shape,n,a,d),i=h.makeTensorInfo(s,d);return h.texData.get(i.dataId).values=r,i}let p;return p=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new TD(n,l.shape,u.shape,a):new SD(t,l.shape,u.shape),h.runWebGLProgram(p,[l,u],d)}}function BD(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?hD:rD;if("relu"===e)return t?pD:iD;if("elu"===e)return t?dD:sD;if("relu6"===e)return t?fD:cD;if("prelu"===e)return t?DD:FD;if("leakyrelu"===e)return t?_D:AD;if("sigmoid"===e)return t?mD:uD;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}class WD{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,i=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=DO(this.outputShape.length);const l=a?e[1]:e[2],u=Math.ceil(l/2),h=a?"i * 2, rc.y":"rc.y, i * 2",d=r?"rc.z, i * 2":"i * 2, rc.z",p=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";s&&(m=i?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),g="result = activation(result);");const y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let b="rc.x",v="rc.x";e[0]<t[0]?b="imod(rc.x, ".concat(e[0],")"):t[0]<e[0]&&(v="imod(rc.x, ".concat(t[0],")")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(u,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(b,";\n        int batchB = ").concat(v,";\n        for (int i = 0; i < ").concat(u,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(h,");\n          vec4 b = getMatrixB(batchB, ").concat(d,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(f[0],");\n          result += (").concat(p[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")}}const UD={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class VD{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=So(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}}const GD="return a * b;";function jD(e){const{inputs:t,backend:n}=e,{a:a,b:r}=t,o=Oa(a.dtype,r.dtype);if("complex64"===a.dtype){const e=n.texData.get(a.dataId),t=n.texData.get(r.dataId),o=new VD(UD.REAL,a.shape,r.shape),s=new VD(UD.IMAG,a.shape,r.shape),i=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:a.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:r.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:r.shape}],c=n.runWebGLProgram(o,i,"float32"),l=n.runWebGLProgram(s,i,"float32"),u=ND({inputs:{real:c,imag:l},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),u}if(n.shouldExecuteOnCPU([a,r])){const e=n.texData.get(a.dataId),t=n.texData.get(r.dataId),[s,i]=wF(a.shape,r.shape,e.values,t.values,o),c=n.makeTensorInfo(i,o);return n.texData.get(c.dataId).values=s,c}let s;return s=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TD(GD,a.shape,r.shape):new SD(GD,a.shape,r.shape),n.runWebGLProgram(s,[a,r],o)}const HD={kernelName:Ct,backendName:"webgl",kernelFunc:jD};function KD(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{shape:o}=a,s=n,i=y(r.shape),c=function(e,t){let n=1,a=-1;for(let o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==a)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(a," and dim ").concat(o));a=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found ".concat(e[o]," at dim ").concat(o));if(-1===a){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));const r=e.slice();return r[a]=t/n,r}(o,i),l=y(c);f(i===l,(()=>"The new shape (".concat(c,") has ").concat(l," elements and the old ")+"shape (".concat(r.shape,") has ").concat(i," elements. The new shape and old ")+"shape must have the same number of elements."));const u=s.texData.get(r.dataId);return!u.isPacked||nO(r.shape,c)||null!==u.texture&&nO(u.shape,c)?(s.incRef(r.dataId),{dataId:r.dataId,shape:c,dtype:r.dtype}):function(e,t,n){const a=[J_(e.shape),...$_(e.shape)],r={dtype:e.dtype,shape:a,dataId:e.dataId},o=[J_(t),...$_(t)],s=new QF(o,a),i=[a],c=n.runWebGLProgram(s,[r],e.dtype,i,!0);return{dataId:c.dataId,shape:t,dtype:c.dtype}}(r,c,s)}const qD={kernelName:Gt,backendName:"webgl",kernelFunc:KD};class YD{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:a,inSize:r,outSize:o}=e;this.outputShape=[a,o];const s=4*Math.floor(n/4),i=n%4;let c="sumValue += dot(values, ones);";if(null!=t){const e=1/t;c="sumValue += dot(values * ".concat(v(e)?e.toPrecision(2):e,", ones);")}let l="";r%n>0&&(l="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(l,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===i,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===i,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===i,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")}}class XD{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:a,inSize:r,outSize:o}=e;this.outputShape=[a,o];let s="0.0",i="";"prod"===t?s="1.0":"min"===t?(s="1.0 / 1e-20",i="min"):"max"===t&&(s="-1.0 / 1e-20",i="max");let c="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?c="sumValue":"prod"===t?c="prodValue":"all"===t?c="allValue":"any"===t&&(c="anyValue");const l=4*Math.floor(n/4),u=n%4;let h="\n      if (".concat("sum"===t,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===t,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(i,"(values, minMaxValue);\n        if (").concat("min"===t," || ").concat("max"===t,") {\n          minMaxValue = ").concat(i,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),d="vec4";"all"===t?(s="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(s="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";r%n>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(2===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(3===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}}function ZD(e,t,n,a){const r=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],a=xl(n);t.push({inSize:n,windowSize:a,outSize:Math.ceil(n/a)})}return t}(e.shape);let o=e;for(let s=0;s<r.length;s++){const{inSize:i,windowSize:c,outSize:l}=r[s];let u,h;u="mean"===n?0===s?new YD({windowSize:c,inSize:i,batchSize:e.shape[0],outSize:l},i):new YD({windowSize:c,inSize:i,batchSize:e.shape[0],outSize:l}):new XD({windowSize:c,inSize:i,batchSize:e.shape[0],outSize:l},n),h=o,o=a.runWebGLProgram(u,[o],t),h.dataId!==e.dataId&&a.disposeIntermediateTensorInfo(h)}return o}class QD{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[t[o]];this.outputShape=n,this.rank=n.length;const a=EO(this.rank),r=function(e){const t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],a=new Array(t);for(let r=0;r<e.length;r++)a[e[r]]=n[r];return a.join()}(t);this.userCode="\n    void main() {\n      ".concat(a," resRC = getOutputCoords();\n      setOutput(getA(").concat(r,"));\n    }\n    ")}}class JD{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let l=0;l<n.length;l++)n[l]=e[t[l]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));const a=EO(this.rank),r=YF("rc",this.rank),o=new Array(this.rank);for(let l=0;l<t.length;l++)o[t[l]]=r[l];const s="vec2(".concat(o.slice(-2).join(),")"),i="++".concat(r[this.rank-1]," < ").concat(n[this.rank-1]),c="getChannel(getA(".concat(o.join(),"), ").concat(s,")");this.userCode="\n    void main() {\n      ".concat(a," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(c,";\n      if(").concat(i,") {\n        result[1] = ").concat(c,";\n      }\n      --").concat(r[this.rank-1],";\n      if(++").concat(r[this.rank-2]," < ").concat(n[this.rank-2],") {\n        result[2] = ").concat(c,";\n        if(").concat(i,") {\n          result[3] = ").concat(c,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}}function $D(e,t,n){const a=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new JD(e.shape,t):new QD(e.shape,t);return n.runWebGLProgram(a,[e],e.dtype)}function eL(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a;return function(e,t,n,a){const r=t,o=e.shape.length,s=S(r,e.shape);let i=s;const c=ui(i,o),l=null!=c;let u=e;l&&(u=$D(e,c,a),i=di(i.length,o)),li("sum",i,o);const[h,d]=ii(u.shape,i);let p=h;n&&(p=ci(h,s));const f=y(d),m=KD({inputs:{x:u},attrs:{shape:[y(e.shape)/f,f]},backend:a}),g=ZD(m,Fa(e.dtype),"sum",a),b=KD({inputs:{x:g},attrs:{shape:p},backend:a});return a.disposeIntermediateTensorInfo(m),a.disposeIntermediateTensorInfo(g),l&&a.disposeIntermediateTensorInfo(u),b}(r,o,s,n)}const tL={kernelName:cn,backendName:"webgl",kernelFunc:eL};function nL(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{perm:o}=a,s=n,i=r.shape.length,c=new Array(i);for(let u=0;u<c.length;u++)c[u]=r.shape[o[u]];let l;if(s.shouldExecuteOnCPU([r])){const e=s.texData.get(r.dataId).values,t=KF(e,r.shape,r.dtype,o,c);l=s.makeTensorInfo(c,r.dtype);s.texData.get(l.dataId).values=t}else l=$D(r,o,s);return l}const aL={kernelName:Rn,backendName:"webgl",kernelFunc:nL},rL=1e3;function oL(e){let{a:t,b:n,transposeA:a,transposeB:r,backend:o,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:c=0,activation:l=null}=e;const u=t.shape.length,h=n.shape.length,d=a?t.shape[u-2]:t.shape[u-1],p=r?n.shape[h-1]:n.shape[h-2],m=a?t.shape[u-1]:t.shape[u-2],g=r?n.shape[h-2]:n.shape[h-1],b=t.shape.slice(0,-2),v=n.shape.slice(0,-2),x=y(b),w=y(v),k=So(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([m,g]);f(d===p,(()=>"Error in matMul: inner shapes (".concat(d,") and (")+"".concat(p,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(a)+" and transposeB=".concat(r," must match.")));const S=a?[x,d,m]:[x,m,d],I=r?[w,g,p]:[w,p,g],T=KD({inputs:{x:t},backend:o,attrs:{shape:S}}),C=KD({inputs:{x:n},backend:o,attrs:{shape:I}}),E=[T,C],N=Math.max(x,w),R=a?T.shape[1]:T.shape[2],A=null!=s,_=null!=i,O="leakyrelu"===l,F=null!=l?BD(l,!0):null;let D;if((1===m||1===g)&&R>rL&&!1===(A||_||O||null!=F)){let e=T,t=C;a&&(e=nL({inputs:{x:T},backend:o,attrs:{perm:[0,2,1]}}),E.push(e)),r&&(t=nL({inputs:{x:C},backend:o,attrs:{perm:[0,2,1]}}),E.push(t));const n=1===g;let s=e;1!==g&&(s=KD({inputs:{x:e},backend:o,attrs:{shape:[N,R,1]}}),E.push(s));const i=1===g?2:1;let c=t;n&&(c=KD({inputs:{x:t},backend:o,attrs:{shape:[N,1,R]}}),E.push(c));const l=jD({inputs:{a:s,b:c},backend:o});D=eL({inputs:{x:l},backend:o,attrs:{axis:i,keepDims:!0}}),E.push(l)}else{const e=Oa(t.dtype,n.dtype),l=new WD(S,I,[N,m,g],a,r,A,F,_,O),u=[T,C];if(null!=s&&u.push(s),_&&u.push(i),O){const e=o.makeTensorInfo([],"float32",ta(c,"float32"));u.push(e),E.push(e)}D=o.runWebGLProgram(l,u,e)}const L=KD({inputs:{x:D},backend:o,attrs:{shape:k}});E.push(D);for(const f of E)o.disposeIntermediateTensorInfo(f);return L}const sL={kernelName:Pn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o,bias:s,preluActivationWeights:i}=t,{transposeA:c,transposeB:l,activation:u,leakyreluAlpha:h}=a;return oL({a:r,b:o,transposeA:c,transposeB:l,backend:n,bias:s,preluActivationWeights:i,leakyreluAlpha:h,activation:u})}},iL="return abs(x);";const cL={kernelName:Y,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t;if(n.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){const e=n.texData.get(a.dataId),t=OF(e.values);return n.makeTensorInfo(a.shape,a.dtype,t)}let r;return r=G().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new gD(a.shape,iL):new nD(a.shape,iL),n.runWebGLProgram(r,[a],a.dtype)}},lL=PD({opSnippet:aD+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),uL={kernelName:X,backendName:"webgl",kernelFunc:lL},hL=PD({opSnippet:aD+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),dL={kernelName:Z,backendName:"webgl",kernelFunc:hL},pL="return a + b;",fL=zD({opSnippet:pL,packedOpSnippet:pL,supportsComplex:!0,cpuKernelImpl:$O}),mL={kernelName:Q,backendName:"webgl",kernelFunc:fL};class gL{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>"T".concat(t)));const n=[];this.variableNames.forEach((e=>{n.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));const a=this.variableNames.map((e=>"v".concat(e))).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}}class yL{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>"T".concat(t)));const n=[];this.variableNames.forEach((e=>{n.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));const a=this.variableNames.map((e=>"v".concat(e))).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}}const bL={kernelName:J,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:a}=t,r=n;if(1===r.length)return CD({inputs:{x:r[0]},backend:a});if(r.length>G().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(r.length/2),n=e({inputs:r.slice(0,t),backend:a}),o=e({inputs:r.slice(t),backend:a});return e({inputs:[n,o],backend:a})}const o=r.map((e=>e.dtype)).reduce(((e,t)=>Oa(e,t))),s=r.map((e=>e.shape)),i=G().getBool("WEBGL_PACK")?new yL(r[0].shape,s):new gL(r[0].shape,s);return a.runWebGLProgram(i,r,o)}};const vL={kernelName:"All",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a,i=r.shape.length,c=S(o,r.shape);let l=c;const u=ui(l,i);let h=r;null!=u&&(h=nL({inputs:{x:r},backend:n,attrs:{perm:u}}),l=di(l.length,i)),li("all",l,i);const[d,p]=ii(h.shape,l),f=KD({inputs:{x:h},backend:n,attrs:{shape:[-1,y(p)]}}),m=ZD(f,f.dtype,"all",n);let g;if(s){g=KD({inputs:{x:m},backend:n,attrs:{shape:ci(d,c)}})}else g=KD({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(h),g}};const xL={kernelName:"Any",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a,i=r.shape.length,c=S(o,r.shape);let l=c;const u=ui(l,i);let h=r;null!=u&&(h=nL({inputs:{x:r},backend:n,attrs:{perm:u}}),l=di(l.length,i)),li("any",l,i);const[d,p]=ii(h.shape,l),f=KD({inputs:{x:h},backend:n,attrs:{shape:[-1,y(p)]}}),m=ZD(f,f.dtype,"any",n);let g;if(s){g=KD({inputs:{x:m},backend:n,attrs:{shape:ci(d,c)}})}else g=KD({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(h),g}};class wL{constructor(e,t,n){this.variableNames=["A"];const{windowSize:a,batchSize:r,outSize:o}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[r,o];const s="max"===t?">":"<",i=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(i,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}}class kL{constructor(e,t,n,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,f(e.length>2,(()=>"Packed arg".concat(n.charAt(0).toUpperCase()+n.slice(1)," supports only inputs with rank above 2.")));const r=e[e.length-1],o=Math.ceil(r/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");const s=this.outputShape,i=s.length,c=EO(i),l=XF("coords",i);let u,h;if(1===o){h=i+1;const e=EO(h);u="\n        ".concat(e," sourceLocR = ").concat(e,"(").concat(l.join(),", 0);\n        ++").concat(l[i-1],";\n        ").concat(e," sourceLocG = ").concat(e,"(").concat(l.join(),", 0);\n        ++").concat(l[i-2],";\n        ").concat(e," sourceLocA = ").concat(e,"(").concat(l.join(),", 0);\n        --").concat(l[i-1],";\n        ").concat(e," sourceLocB = ").concat(e,"(").concat(l.join(),", 0);\n        --").concat(l[i-2],";")}else h=i,u="\n        ".concat(c," sourceLocR = coords;\n        ++").concat(l[i-1],";\n        ").concat(c," sourceLocG = coords;\n        ++").concat(l[i-2],";\n        ").concat(c," sourceLocA = coords;\n        --").concat(l[i-1],";\n        ").concat(c," sourceLocB = coords;\n        --").concat(l[i-2],";");const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],m=d.map((e=>"int "+e)),g=XF("sourceLocR",h-1).concat("inIdx.r"),y=XF("sourceLocG",h-1).concat("inIdx.g"),b=XF("sourceLocB",h-1).concat("inIdx.b"),v=XF("sourceLocA",h-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(v.join(),")));"),k="vec4(\n            getAChannel(".concat(g.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(v.join(),") : 0.)"),S=a?"":"\n      float getBestIndicesAChannel(".concat(m.join(),") {\n        return getChannel(getBestIndicesA(").concat(d.join(),"),\n                                          vec2(").concat(d.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(m.join(),") {\n        return getChannel(getA(").concat(d.join(),"),\n                               vec2(").concat(d.slice(-2).join(),"));\n      }\n      ").concat(S,"\n      void main() {\n        ").concat(c," coords = getOutputCoords();\n        bool hasNextCol = ").concat(l[i-1]," < ").concat(s[i-1]-1,";\n        bool hasNextRow = ").concat(l[i-2]," < ").concat(s[i-2]-1,";\n        ").concat(u,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(p,", sourceLocG").concat(p,",\n          sourceLocB").concat(p,", sourceLocA").concat(p,") * ").concat(t,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(k,";\n\n        for (int i = 0; i < ").concat(t,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(k,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(x,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}}function SL(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t.shape[0],o=t.shape[1];null!=a&&(r=a.shape[0],o=a.shape[1]);const s=xl(o),i={windowSize:s,inSize:o,batchSize:r,outSize:Math.ceil(o/s)},c=new wL(i,n,null==a),l=[t];null!=a&&l.push(a);const u=e.runWebGLProgram(c,l,"int32");if(1===u.shape[1])return u;const h=SL(e,t,n,u);return e.disposeIntermediateTensorInfo(u),h}function IL(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r=null!=a?a.shape:t.shape,o=xl(r[r.length-1]),s=new kL(r,o,n,null==a),i=null==a?[t]:[t,a],c=e.runWebGLProgram(s,i,"int32");if(c.shape.length===t.shape.length){const a=IL(e,t,n,c);return e.disposeIntermediateTensorInfo(c),a}return c}function TL(e,t,n,a){const r=[n];if(li("arg"+a.charAt(0).toUpperCase()+a.slice(1),r,t.shape.length),!G().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],o=e.texData.get(t.dataId);let s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),n.push(s));const[i,c]=ii(s.shape,r),l=y(c),u=KD({inputs:{x:s},backend:e,attrs:{shape:[-1,l]}});n.push(u);const h=SL(e,u,a);n.push(h);const d=KD({inputs:{x:h},backend:e,attrs:{shape:i}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),d}return IL(e,t,a)}const CL={kernelName:$,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o}=a;let s=S(o,r.shape);const i=ui(s,r.shape.length);let c=r;const l=[];null!=i&&(c=nL({inputs:{x:r},backend:n,attrs:{perm:i}}),l.push(c),s=di(s.length,c.shape.length)),li("argMax",[s[0]],c.shape.length);const u=TL(n,c,s[0],"max");return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}};const EL={kernelName:ee,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o}=a;let s=S(o,r.shape);const i=ui(s,r.shape.length);let c=r;const l=[];null!=i&&(c=nL({inputs:{x:r},backend:n,attrs:{perm:i}}),l.push(c),s=di(s.length,c.shape.length)),li("argMin",[s[0]],c.shape.length);const u=TL(n,c,s[0],"min");return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}},NL=PD({opSnippet:aD+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),RL={kernelName:te,backendName:"webgl",kernelFunc:NL},AL=PD({opSnippet:aD+"return log(x + sqrt(x * x + 1.0));"}),_L={kernelName:ne,backendName:"webgl",kernelFunc:AL},OL=PD({opSnippet:aD+"\n  return atan(x);\n"}),FL={kernelName:ae,backendName:"webgl",kernelFunc:OL},DL=zD({opSnippet:kD+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+ID+"\n  return result;\n"}),LL={kernelName:oe,backendName:"webgl",kernelFunc:DL},ML=PD({opSnippet:aD+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),PL={kernelName:re,backendName:"webgl",kernelFunc:ML};class zL{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,i=e.strideWidth,c=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),g="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d");let y="0.0";if(f||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(i,");\n        const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(t," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?r?m:g:"wR * ".concat(h," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let b="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(b="avgValue / max(count, 1.0)");const v=4*Math.floor(o/4),x=o%4,w="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(v,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(w,"\n          }\n\n          int xC = xCCorner + ").concat(v,";\n          if (").concat(1===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(2===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(3===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(w,"\n          }\n        }\n        setOutput(").concat(b,");\n      }\n    ")}}class BL{constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,i=e.strideHeight,c=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const b="avg"===t;let v="0.0";if(b||(v="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(i,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(d,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(u,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(h,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(t," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?r?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(p," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let x="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(x="avgValue / max(count, 1.0)");const w=4*Math.floor(o/4),k=o%4,S="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(i,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(v,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(v,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(h,", ch)\n              );\n\n              ").concat(S,"\n            }\n\n            int xC = xCCorner + ").concat(w,";\n            if (").concat(1===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(2===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(3===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                initializationValue\n              );\n\n              ").concat(S,"\n            }\n          }\n        }\n        setOutput(").concat(x,");\n      }\n    ")}}const WL={kernelName:se,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;lO(r,"avgPool");const{filterSize:o,strides:s,pad:i,dimRoundingMode:c}=a;f(ys(s,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'")));const l=is(r.shape,o,s,1,i,c);if(1===l.filterWidth&&1===l.filterHeight&&b(l.inShape,l.outShape))return CD({inputs:{x:r},backend:n});const u=new zL(l,"avg",!1);return n.runWebGLProgram(u,[r],"float32")}};const UL={kernelName:ce,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:s,pad:i,dimRoundingMode:c,dataFormat:l}=a,u=cs(r.shape,o,s,[1,1,1],i,c,l),h=new BL(u,"avg",!1);return n.runWebGLProgram(h,[r],"float32")}};class VL{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,a=e.strideHeight,r=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,i=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=i-1-e.padInfo.top,u=c-1-e.padInfo.left,h=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(u,");\n      const float avgMultiplier = float(").concat(h,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class GL{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,a=e.filterWidth,r=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,c=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=u-1-e.padInfo.front,f=h-1-e.padInfo.top,m=d-1-e.padInfo.left,g=1/(t*n*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(f,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n            wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(r,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const jL={kernelName:le,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,s=o,{filterSize:i,strides:c,pad:l,dimRoundingMode:u}=a,h=cs(s.shape,i,c,[1,1,1],l,u),d=new GL(h);return n.runWebGLProgram(d,[r],s.dtype)}};const HL={kernelName:ie,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,s=o;lO([r,o],"avgPoolGrad");const{filterSize:i,strides:c,pad:l}=a,u=is(s.shape,i,c,1,l),h=new VL(u);return n.runWebGLProgram(h,[r],s.dtype)}};const KL={kernelName:ue,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o}=t,{transposeA:s,transposeB:i}=a;return oL({a:r,b:o,transposeA:s,transposeB:i,backend:n})}};class qL{constructor(e,t,n,a,r,o){this.outputShape=[],this.variableNames=["x","mean","variance"],So(e,t),So(e,n);let s="0.0";null!=a&&(So(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let i="1.0";null!=r&&(So(e,r),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(i,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}}class YL{constructor(e,t,n,a,r,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],So(e,t),So(e,n);let s="vec4(0.0)";null!=a&&(So(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let i="vec4(1.0)";null!=r&&(So(e,r),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(i,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}}const XL={kernelName:Xe,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:a}=e;const{x:r,mean:o,variance:s,offset:i,scale:c}=t;f(o.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),f(null==i||o.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),f(null==c||o.shape.length===c.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:l}=a;null==l&&(l=.001);const u=[r,o,s];let h=null;null!=i&&(h=i.shape,u.push(i));let d=null;null!=c&&(d=c.shape,u.push(c));const p=G().getBool("WEBGL_PACK_NORMALIZATION")?new YL(r.shape,o.shape,s.shape,h,d,l):new qL(r.shape,o.shape,s.shape,h,d,l);return n.runWebGLProgram(p,u,u[0].dtype)}};class ZL{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=EO(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return QL.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);let a;const r=e.map(((e,t)=>"sourceLoc.".concat(QL[t]," = start[").concat(t,"] + coords.").concat(QL[t],";")));a="\n        ".concat(t," sourceLoc;\n        ").concat(t," coords = getOutputCoords();\n        ").concat(r.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(a,"\n        setOutput(getSource(").concat(n,"));\n      }\n    ")}}const QL=["x","y","z","w","u","v"];class JL{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=EO(this.rank),n=XF("coords",this.rank),a=XF("sourceLoc",this.rank),r=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(r,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),i=1===this.rank?"":"\n      --".concat(n[this.rank-1],";\n      if (++").concat(n[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(t,"(").concat(e.map(((e,t)=>"start[".concat(t,"]"))).join(),");"):e.map(((e,t)=>"".concat(a[t]," = ").concat(n[t]," + start[").concat(t,"];"))).join("\n");this.userCode="\n      void main() {\n        ".concat(t," coords = getOutputCoords();\n        ").concat(t," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(i,"\n        setOutput(result);\n      }\n    ")}}function $L(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:o,size:s}=a,[i,c]=es(r,o,s);if(Wo(r,i,c),0===y(c))return n.makeTensorInfo(c,r.dtype,[]);if(n.shouldExecuteOnCPU([r])||"string"===r.dtype){const e=n.texData.get(r.dataId),t=FF(e.values,i,c,r.shape,r.dtype);return n.makeTensorInfo(c,r.dtype,t)}const{isPacked:l}=n.texData.get(r.dataId),u=Jo(r.shape,i,c);if(l||!u){const e=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new JL(c):new ZL(c),t=[i];return n.runWebGLProgram(e,[r],r.dtype,t)}return n.uploadToGPU(r.dataId),function(e,t,n,a){const r=a.texData.get(e.dataId),o=a.makeTensorInfo(n,e.dtype),s=a.texData.get(o.dataId);Object.assign(s,r),s.refCount=1,s.shape=n,s.dtype=e.dtype;let i=$o(t,F(e.shape));r.slice&&(i+=r.slice.flatOffset),s.slice={flatOffset:i,origDataId:r.slice&&r.slice.origDataId||e.dataId};const c=a.dataRefCount.get(s.slice.origDataId)||1;return a.dataRefCount.set(s.slice.origDataId,c+1),o}(r,i,c,n)}const eM={kernelName:en,backendName:"webgl",kernelFunc:$L},tM={kernelName:he,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:o,crops:s}=a;f(r.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const i=o.reduce(((e,t)=>e*t)),c=kl(r.shape,o,i),l=Sl(c.length,o.length),u=Il(r.shape,o,i),h=Tl(s,o.length),d=Cl(u,s,o.length),p=[],m=KD({inputs:{x:r},backend:n,attrs:{shape:c}}),g=nL({inputs:{x:m},backend:n,attrs:{perm:l}}),y=KD({inputs:{x:g},backend:n,attrs:{shape:u}}),b=$L({inputs:{x:y},backend:n,attrs:{begin:h,size:d}});return p.push(m),p.push(g),p.push(y),p.forEach((e=>n.disposeIntermediateTensorInfo(e))),b}};const nM={kernelName:de,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:o}=t,{size:s}=a,i=n.readSync(r.dataId),c=n.readSync(o.dataId),l=eF(i,c,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,l)}};const aM={kernelName:"BitwiseAnd",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:a,b:r}=t,o=G().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=G().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([a,r])||1===s){const e=n.texData.get(a.dataId).values,t=n.texData.get(r.dataId).values,[o,s]=nF(a.shape,r.shape,e,t,a.dtype),i=n.makeTensorInfo(s,a.dtype);return n.texData.get(i.dataId).values=o,i}let i;return i=o?new TD("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",a.shape,r.shape,!1):new SD("\n  return float(int(a.r) & int(b.r));\n",a.shape,r.shape),n.runWebGLProgram(i,[a,r],a.dtype)}};const rM={kernelName:"BroadcastArgs",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:a,s1:r}=t,o=n.readSync(a.dataId),s=n.readSync(r.dataId),i=So(Array.from(o),Array.from(s));return n.makeTensorInfo([i.length],"int32",Int32Array.from(i))}},oM=zD({opSnippet:"return float(a != b);",cpuKernelImpl:SF,dtype:"bool"}),sM={kernelName:Nt,backendName:"webgl",kernelFunc:oM};function iM(e){const{inputs:t,backend:n}=e,{input:a}=t;return CD({inputs:{x:n.texData.get(a.dataId).complexTensorInfos.real},backend:n})}const cM={kernelName:Wt,backendName:"webgl",kernelFunc:iM},lM="return float(int(x));";const uM={kernelName:pe,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:a,attrs:r}=t,{x:o}=n,{dtype:s}=r;if("complex64"===s){if("complex64"===o.dtype)return CD({inputs:{x:o},backend:a});const t=Ti(o.shape),n=e({inputs:{x:o},backend:a,attrs:{dtype:"float32"}}),r=ND({inputs:{real:n,imag:t},backend:a});return t.dispose(),a.disposeIntermediateTensorInfo(n),r}if("complex64"===o.dtype){const t=iM({inputs:{input:o},backend:a}),n=e({inputs:{x:t},backend:a,attrs:{dtype:s}});return a.disposeIntermediateTensorInfo(t),n}if(i=o.dtype,"complex64"===(c=s)||"float32"===c&&"complex64"!==i||"int32"===c&&"float32"!==i&&"complex64"!==i||"bool"===c&&"bool"===i){const e=CD({inputs:{x:o},backend:a});return{dataId:e.dataId,shape:e.shape,dtype:s}}var i,c;if(a.shouldExecuteOnCPU([o])){const e=a.texData.get(o.dataId).values,[t,n,r]=aF(e,o.shape,o.dtype,s);return a.makeTensorInfo(t,n,r)}if("int32"===s)return function(e,t){const n=new nD(e.shape,lM),a=t.runWebGLProgram(n,[e],"int32");return{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}(o,a);if("bool"===s){const e=a.makeTensorInfo([],"bool",T("bool",1)),t=oM({inputs:{a:o,b:e},backend:a});return a.disposeIntermediateTensorInfo(e),t}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(s))}},hM="return ceil(x);",dM=PD({opSnippet:hM,packedOpSnippet:hM,cpuKernelImpl:rF}),pM={kernelName:fe,backendName:"webgl",kernelFunc:dM};class fM{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class mM{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const gM={kernelName:me,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{clipValueMin:o,clipValueMax:s}=a;let i;i=G().getBool("WEBGL_PACK_CLIP")?new mM(r.shape):new fM(r.shape);const c=[[o],[s]];return n.runWebGLProgram(i,[r],r.dtype,c)}};class yM{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function bM(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const vM={kernelName:ye,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,r=n.texData.get(a.dataId),o=new yM(a.shape),s=[bM(a,r.complexTensorInfos.real),bM(a,r.complexTensorInfos.imag)];return n.runWebGLProgram(o,s,s[0].dtype)}};class xM{constructor(e){this.outputShape=[],this.outputShape=pl(e,1),this.variableNames=e.map(((e,t)=>"T".concat(t)));const t=new Array(e.length-1);t[0]=e[0][1];for(let o=1;o<t.length;o++)t[o]=t[o-1]+e[o][1];const n=["if (yC < ".concat(t[0],") setOutput(getT0(yR, yC));")];for(let o=1;o<t.length;o++){const e=t[o-1];n.push("else if (yC < ".concat(t[o],") ")+"setOutput(getT".concat(o,"(yR, yC-").concat(e,"));"))}const a=t.length,r=t[t.length-1];n.push("else setOutput(getT".concat(a,"(yR, yC-").concat(r,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(n.join("\n        "),"\n      }\n    ")}}class wM{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=pl(e,t);const n=this.outputShape,a=n.length,r=EO(a),o=XF("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map(((e,t)=>"T".concat(t)));const i=new Array(e.length-1);i[0]=e[0][t];for(let f=1;f<i.length;f++)i[f]=i[f-1]+e[f][t];const c=s[t],l=s.slice(-2),u=s.join();let h="if (".concat(c," < ").concat(i[0],") {\n        return getChannel(\n            getT0(").concat(u,"), vec2(").concat(l.join(),"));\n        }");for(let f=1;f<i.length;f++){const e=i[f-1];h+="\n        if (".concat(c," < ").concat(i[f],"  && ").concat(c," >= ").concat(i[f-1],") {\n          return getChannel(\n            getT").concat(f,"(").concat(kM(s,c,e),"),\n            vec2(").concat(kM(l,c,e),"));\n        }")}const d=i.length,p=i[i.length-1];h+="\n        return getChannel(\n          getT".concat(d,"(").concat(kM(s,c,p),"),\n          vec2(").concat(kM(l,c,p),"));"),this.userCode="\n      float getValue(".concat(s.map((e=>"int "+e)),") {\n        ").concat(h,"\n      }\n\n      void main() {\n        ").concat(r," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(n[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(n[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(n[a-2]," &&\n            ").concat(o[a-1]," < ").concat(n[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}}function kM(e,t,n){const a=e.indexOf(t);return e.map(((e,t)=>t===a?"".concat(e," - ").concat(n):e)).join()}function SM(e){const{inputs:t,backend:n}=e,{input:a}=t;return CD({inputs:{x:n.texData.get(a.dataId).complexTensorInfos.imag},backend:n})}const IM={kernelName:tt,backendName:"webgl",kernelFunc:SM};function TM(e,t,n){const a=e[0].dtype;if("complex64"===a){const a=e.map((e=>iM({inputs:{input:e},backend:n}))),r=e.map((e=>SM({inputs:{input:e},backend:n}))),o=TM(a,t,n),s=TM(r,t,n),i=ND({inputs:{real:o,imag:s},backend:n});return a.forEach((e=>n.disposeIntermediateTensorInfo(e))),r.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),i}let r=n.shouldExecuteOnCPU(e);if("string"===a&&(r=!0),r){const r=e.map((e=>{const a=y(e.shape.slice(t));return KD({inputs:{x:e},backend:n,attrs:{shape:[-1,a]}})})),o=r.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),s=pl(r.map((e=>e.shape)),1),i=1===r[0].shape[0],c=oF(o,s,a,i),l=pl(e.map((e=>e.shape)),t),u=n.makeTensorInfo(l,a,c);return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}const o=e.filter((e=>y(e.shape)>0)),s=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(1===o.length){const t=s?new nD(e[0].shape,lD):new gD(e[0].shape,lD);return n.runWebGLProgram(t,e,a)}const i=G().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>i){const e=[];for(let r=0;r<o.length;r+=i){const a=o.slice(r,r+i);e.push(TM(a,t,n))}const a=TM(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return a}if(s){const e=new wM(o.map((e=>e.shape)),t);return n.runWebGLProgram(e,o,a)}const{tensors2D:c,outShape:l}=function(e,t,n){const a=pl(e.map((e=>e.shape)),t),r=e.map((e=>KD({inputs:{x:e},attrs:{shape:[-1,y(e.shape.slice(t))]},backend:n})));return{tensors2D:r,outShape:a}}(o,t,n),u=new xM(c.map((e=>e.shape))),h=n.runWebGLProgram(u,c,a);c.forEach((e=>n.disposeIntermediateTensorInfo(e)));const d=KD({inputs:{x:h},attrs:{shape:l},backend:n});return n.disposeIntermediateTensorInfo(h),d}function CM(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a,o=S(r,t[0].shape)[0];dl(t.map((e=>e.shape)),o);const s=pl(t.map((e=>e.shape)),o);if(0===y(s))return n.makeTensorInfo(s,t[0].dtype,[]);const i=t.filter((e=>y(e.shape)>0));return 1===i.length?CD({inputs:{x:i[0]},backend:n}):TM(i,o,n)}const EM={kernelName:be,backendName:"webgl",kernelFunc:CM};class NM{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,i=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,y=m?2:3,b=m?3:1;let v="",x="";n&&(v=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):r?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),x="result = activation(result);");const w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(v,"\n\n      const ivec2 strides = ivec2(").concat(i,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(d,"; wC++) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===f,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===f,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===f,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}}class RM{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,a=e.padInfo.left,r=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,c=e.dilationHeight,l=e.dilationWidth,u=e.filterDepth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(r,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(t,", ").concat(n,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(u,"; wF++) {\n          int xF = xFCorner + wF * ").concat(i,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===f,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class AM{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=DO(this.outputShape.length);const o=e.padInfo.left,s=e.strideWidth,i=e.dilationWidth,c=e.filterHeight,l=e.filterWidth,u=l;let h="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let d=0;d<l;d++)h+="\n           vec4 xTexelC".concat(2*d,";\n           int xTexelC").concat(2*d,"Ready;\n           vec4 xTexelC").concat(2*d+1,";\n           int xTexelC").concat(2*d+1,"Ready;\n           vec4 xC").concat(d,";");h+="\n     for (int r = 0; r < ".concat(c,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(let d=0;d<l;d++)h+="\n           xTexelC".concat(2*d," = vec4(0.0);\n           xTexelC").concat(2*d,"Ready = 0;\n           xTexelC").concat(2*d+1," = vec4(0.0);\n           xTexelC").concat(2*d+1,"Ready = 0;\n           xC").concat(d," = vec4(0.0);");h+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let g=0;g<(u+1)/2;g++){const t=2*g;if(h+="\n           xC = xCCorner + ".concat(t*i,";\n           "),1===s){if(t<l&&(o%2===1?(h+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n               "),h+=1===i&&t>0?"\n                 xC".concat(t," = vec4(xTexelC").concat(t-2,".zw, xTexelC").concat(t,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(t," = vec4(previous.zw, xTexelC").concat(t,".xy);\n                   } else {\n                     xC").concat(t," = vec4(0.0, 0.0, xTexelC").concat(t,".xy);\n                   }\n                   ")):h+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xC").concat(t," = xTexelC").concat(t,";\n                 "),t+1<l)){const e=o%2===0?d(i):i;i%2===0&&o%2===1||i%2!==0&&o%2!==1?(h+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(e,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                     xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(t+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(t+1,"Ready = 1;\n                   }\n                   "),h+=i>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(t+1," = vec4(previous.zw, xTexelC").concat(t+1,".xy);\n                     } else {\n                      xC").concat(t+1," = vec4(0.0, 0.0, xTexelC").concat(t+1,".xy);\n                     }\n                     "):"\n                     xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".xy);\n                     ")):h+=1===e?"\n                     xC".concat(t+1," = xTexelC").concat(t,";\n                     "):"\n                     xCOffset = xC + ".concat(e,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                       xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(t+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(t+1,"Ready = 1;\n                     }\n\n                     xC").concat(t+1," = xTexelC").concat(t+1,";\n                     ")}}else t<l&&(o%2===1?(h+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n               "),t+1<l&&(h+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(t+1," = vec4(xTexelC").concat(t+1,".xy, final.xy);\n                 "))):(h+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(\n                   xTexelC").concat(t,".xy, xTexelC").concat(t+1,".xy);\n               "),t+1<l&&(h+="\n                   xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n                 "))));t<l&&(h+="\n             wTexel = getW(r, ".concat(t,", d1, d2);\n             dotProd += xC").concat(t,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(t,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),t+1<l&&(h+="\n               wTexel = getW(r, ".concat(t+1,", d1, d2);\n               dotProd += xC").concat(t+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(t+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}h+="\n     }\n   ",h+="\n     }\n   ",h+="\n     }\n   ";let p="",f="";n&&(p=a?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(n,"\n         }"):r?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(n,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(n,"\n         }"),f="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(p,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(h,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(m,"\n         ").concat(f,"\n         setOutput(result);\n       }\n     ")}}class _M{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=DO(this.outputShape.length);const{dataFormat:n}=t,a=hO(),r="channelsLast"===n,o=r?1:2,s=r?2:3,i=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {");let c="";for(let l=0;l<=1;l++)for(let e=0;e<=1;e++)c+="\n          blockIndex = rc.z + ".concat(e,";\n          pos = rc.y + ").concat(l,";\n\n          ").concat(i,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(r,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+e,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+e,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}}function OM(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function FM(e){let{x:t,filter:n,convInfo:a,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:c=null}=e;const l=t.shape,u=r.texData.get(t.dataId),h=a.inChannels,d=l[0]*l[1]*l[2],p=a.outChannels,m="channelsLast"===a.dataFormat,g=!1;let y;const v=[];if(null!=s){const e=OM(s.shape,m);null!=e&&(s=KD({inputs:{x:s},backend:r,attrs:{shape:e}}),v.push(s))}if(null!=o){const e=OM(o.shape,m);null!=e&&(o=KD({inputs:{x:o},backend:r,attrs:{shape:e}}),v.push(o))}if(!((1===d||1===p)&&h>rL)&&u.isPacked&&m&&null!=u.texture&&l[2]%2!==0&&b(u.shape.slice(-3),l.slice(-3))){const e=l[0]*l[1]*(l[2]+1),h={dataId:t.dataId,shape:[1,e,a.inChannels],dtype:t.dtype},d=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,f(nO(u.shape,h.shape),(()=>"packed reshape ".concat(u.shape," to ").concat(h.shape," isn't free")));const p=KD({inputs:{x:n},backend:r,attrs:{shape:[1,a.inChannels,a.outChannels]}});v.push(p);const m=oL({a:h,b:p,backend:r,transposeA:false,transposeB:g,bias:o,activation:c,preluActivationWeights:s,leakyreluAlpha:i}),b=r.texData.get(m.dataId);f(b.isPacked,(()=>"batchMatMul result is expected to be packed")),u.shape=d,b.shape=a.outShape,y=CD({inputs:{x:m},backend:r}),y.shape=a.outShape,v.push(m)}else{const e=a.outHeight*a.outWidth,l=KD({inputs:{x:t},backend:r,attrs:{shape:m?[a.batchSize,e,a.inChannels]:[a.batchSize,a.inChannels,e]}}),u=KD({inputs:{x:n},backend:r,attrs:{shape:[1,a.inChannels,a.outChannels]}}),h=oL({a:m?l:u,b:m?u:l,transposeA:!m,transposeB:g,backend:r,bias:o,activation:c,preluActivationWeights:s,leakyreluAlpha:i});y=KD({inputs:{x:h},backend:r,attrs:{shape:a.outShape}}),v.push(l),v.push(u),v.push(h)}for(const f of v)r.disposeIntermediateTensorInfo(f);return y}function DM(e){let{x:t,filter:n,convInfo:a,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:c=null}=e;const{filterWidth:l,filterHeight:u,inChannels:h,outWidth:d,outHeight:p,dataFormat:f}=a,m="channelsLast"===f,g=l*u*h,b=p*d,v=[a.batchSize,g,b],x=[];if(null!=s){const e=OM(s.shape,m);null!=e&&(s=KD({inputs:{x:s},backend:r,attrs:{shape:e}}),x.push(s))}if(null!=o){const e=OM(o.shape,m);null!=e&&(o=KD({inputs:{x:o},backend:r,attrs:{shape:e}}),x.push(o))}const w=KD({inputs:{x:n},backend:r,attrs:{shape:[1,g,y(n.shape)/g]}});x.push(w);const k=new _M(v,a),S=[t.shape,[a.padInfo.top,a.padInfo.left],[a.strideHeight,a.strideWidth],[a.dilationHeight,a.dilationWidth],[a.inChannels],[a.filterWidth*a.inChannels],[a.outWidth]],I=r.runWebGLProgram(k,[t],"float32",S),T=KD({inputs:{x:I},backend:r,attrs:{shape:v}});x.push(I),x.push(T);const C=null!=o,E=null!=s,N="leakyrelu"===c,R=c?BD(c,!0):null,A=new WD(m?T.shape:w.shape,m?w.shape:T.shape,m?[a.batchSize,b,a.outChannels]:[a.batchSize,a.outChannels,b],!0,!1,C,R,E,N),_=m?[T,w]:[w,T];if(o&&_.push(o),E&&_.push(s),N){const e=r.makeTensorInfo([],"float32",ta(i,"float32"));_.push(e),x.push(e)}const O=r.runWebGLProgram(A,_,"float32"),F=KD({inputs:{x:O},backend:r,attrs:{shape:a.outShape}});x.push(O);for(const y of x)r.disposeIntermediateTensorInfo(y);return F}const LM={kernelName:ve,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:s,pad:i,dataFormat:c,dilations:l,dimRoundingMode:u}=a,h=vs(c),d=ls(r.shape,o.shape,s,l,i,u,!1,h);let p;if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(d.strideWidth<=2&&"channelsLast"===h&&G().getBool("WEBGL_EXP_CONV")){const e=new AM(d),t=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];p=n.runWebGLProgram(e,[r,o],"float32",t)}else if(G().getBool("WEBGL_CONV_IM2COL"))p=DM({x:r,filter:o,convInfo:d,backend:n});else{const e=new NM(d);p=n.runWebGLProgram(e,[r,o],"float32")}else p=FM({x:r,filter:o,convInfo:d,backend:n});const f=KD({inputs:{x:p},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(p),f}};class MM{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,a=e.padInfo.top,r=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(r,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              ").concat(o?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class PM{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,a=e.strideHeight,r=e.strideWidth,o="channelsLast"===e.dataFormat,s=t-1-e.padInfo.top,i=n-1-e.padInfo.left,c=o?1:2,l=o?2:3,u=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(u,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class zM{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,a=e.strideWidth,r=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t," - ").concat(r,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(n," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class BM{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,a=e.filterWidth,r=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=t-1-e.padInfo.front,c=n-1-e.padInfo.top,l=a-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(i,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(t,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(r,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(t," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(n,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(n," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const WM={kernelName:xe,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:s,pad:i,dataFormat:c,dimRoundingMode:l,filterShape:u}=a,h=vs(c),d=ls(r.shape,u,s,1,i,l,!1,h),p=new MM(d);return n.runWebGLProgram(p,[r,o],"float32")}};class UM{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=DO(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,a=t-1-e.padInfo.top,r=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(r,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(e.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(e.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}}const VM={kernelName:we,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{inputShape:s,strides:i,pad:c,dataFormat:l,dimRoundingMode:u}=a,h=vs(l),d=ls(s,o.shape,i,1,c,u,!1,h);if(G().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===h){const e=[[d.strideHeight,d.strideWidth]],t=new UM(d);return n.runWebGLProgram(t,[r,o],"float32",e)}{const e=new PM(d);return n.runWebGLProgram(e,[r,o],"float32")}}};const GM={kernelName:ke,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:s,pad:i,dilations:c}=a,l=us(r.shape,o.shape,s,c,i),u=new RM(l);return n.runWebGLProgram(u,[r,o],"float32")}};const jM={kernelName:Se,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:s,pad:i,filterShape:c}=a,l=us(r.shape,c,s,1,i),u=new zM(l);return n.runWebGLProgram(u,[r,o],"float32")}};const HM={kernelName:Ie,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{pad:s,strides:i,inputShape:c}=a,l=us(c,o.shape,i,1,s),u=new BM(l);return n.runWebGLProgram(u,[r,o],"float32")}},KM=PD({opSnippet:MD+"\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(ID,"\n  return result;\n")}),qM={kernelName:Te,backendName:"webgl",kernelFunc:KM},YM=PD({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),XM={kernelName:Ce,backendName:"webgl",kernelFunc:YM};class ZM{constructor(e,t,n,a,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,i,c]=e,[l]=t,[u,h]=n;this.outputShape=[l,u,h,c];const d="bilinear"===a?1:0,[p,f]=["".concat(s-1,".0"),"".concat(i-1,".0")],[m,g,y]=u>1?["".concat((s-1)/(u-1)),"(y2-y1) * height_ratio","y1*".concat(p," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(p)],[b,v,x]=h>1?["".concat((i-1)/(h-1)),"(x2-x1) * width_ratio","x1*".concat(f," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(f)];this.userCode="\n      const float height_ratio = float(".concat(m,");\n      const float width_ratio = float(").concat(b,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(o,") {\n          return;\n        }\n\n        float height_scale = ").concat(g,";\n        float width_scale = ").concat(v,";\n\n        float in_y = ").concat(y,";\n        if( in_y < 0.0 || in_y > ").concat(p," ) {\n          setOutput(float(").concat(r,"));\n          return;\n        }\n        float in_x = ").concat(x,";\n        if( in_x < 0.0 || in_x > ").concat(f," ) {\n          setOutput(float(").concat(r,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(d," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}}const QM={kernelName:Re,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{image:r,boxes:o,boxInd:s}=t,{cropSize:i,method:c,extrapolationValue:l}=a,u=new ZM(r.shape,o.shape,i,c,l);return n.runWebGLProgram(u,[r,o,s],"float32")}};var JM;!function(e){e.Prod="*",e.Sum="+"}(JM||(JM={}));class $M{constructor(e,t,n,a){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const r=this.outputShape.length,o=this.op===JM.Prod?"1.0":"0.0",s=n?o:"getX(".concat(eP(r,"coords",this.op),")"),i=this.outputShape[this.outputShape.length-1];let c="",l="";n?(c=a?"end != ".concat(i-1):"end != 0",l=a?"end + 1":"end - 1"):(c=a?"end + pow2 < ".concat(i):"end >= pow2",l=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(EO(r)," coords = getOutputCoords();\n        int end = ").concat(tP(r,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(l,";\n          ").concat(tP(r,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(eP(r,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}}function eP(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function tP(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function nP(e,t,n,a,r,o){const s=t.shape.length,i=ui([a],s);let c=t;null!=i&&(c=nL({inputs:{x:t},backend:n,attrs:{perm:i}}));const l=di(1,s)[0];if(l!==s-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(a));const u=c.shape[l];let h=CD({inputs:{x:c},backend:n});for(let d=0;d<=Math.ceil(Math.log2(u))-1;d++){const t=new $M(e,c.shape,!1,o),a=[[d]],r=h;h=n.runWebGLProgram(t,[h],h.dtype,a),n.disposeIntermediateTensorInfo(r)}if(r){const t=new $M(e,c.shape,r,o),a=h;h=n.runWebGLProgram(t,[h],h.dtype),n.disposeIntermediateTensorInfo(a)}if(null!=i){const e=nL({inputs:{x:h},backend:n,attrs:{perm:hi(i)}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(c),e}return h}const aP={kernelName:Ee,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,exclusive:s,reverse:i}=a;return nP(JM.Prod,r,n,o,s,i)}};const rP={kernelName:Ne,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,exclusive:s,reverse:i}=a;return nP(JM.Sum,r,n,o,s,i)}};const oP={kernelName:Ae,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:o}=t,{size:s,binaryOutput:i}=a;if(1===r.shape.length){const e=n.readSync(r.dataId),t=n.readSync(o.dataId),a=eF(e,t,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,a)}if(2===r.shape.length){const e=n.bufferSync(r),t=n.bufferSync(o),a=tF(e,t,s,i);return n.makeTensorInfo(a.shape,o.dtype,a.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(r.shape.length,"."))}};class sP{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(t,";\n      int offset_h = imod(h, ").concat(t,");\n      int in_w = w / ").concat(t,";\n      int offset_w = imod(w, ").concat(t,");\n      int offset_d = (offset_h * ").concat(t," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const iP={kernelName:_e,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockSize:o,dataFormat:s}=a,i=r.shape[0],c=("NHWC"===s?r.shape[1]:r.shape[2])*o,l=("NHWC"===s?r.shape[2]:r.shape[3])*o,u=("NHWC"===s?r.shape[3]:r.shape[1])/(o*o),h=new sP("NHWC"===s?[i,c,l,u]:[i,u,c,l],o,s);return n.runWebGLProgram(h,[r],r.dtype)}};class cP{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=DO(this.outputShape.length);const o=e.filterHeight,s=e.filterWidth,i=e.outChannels/e.inChannels;let c="",l="";n&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):r?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),l="result = activation(result);");const u=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(u,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")}}class lP{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=DO(this.outputShape.length);const o=e.outChannels/e.inChannels,s=e.padInfo.left,i=e.strideWidth,c=e.dilationWidth,l=e.filterHeight,u=e.filterWidth,h=u;let p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let d=0;d<u;d++)p+="\n          vec4 xTexelC".concat(2*d,";\n          int xTexelC").concat(2*d,"Ready;\n          vec4 xTexelC").concat(2*d+1,";\n          int xTexelC").concat(2*d+1,"Ready;\n          vec4 xC").concat(d,";");p+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(let d=0;d<u;d++)p+="\n          xTexelC".concat(2*d," = vec4(0.0);\n          xTexelC").concat(2*d,"Ready = 0;\n          xTexelC").concat(2*d+1," = vec4(0.0);\n          xTexelC").concat(2*d+1,"Ready = 0;\n          xC").concat(d," = vec4(0.0);");p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let y=0;y<(h+1)/2;y++){const e=2*y;if(p+="\n          xC = xCCorner + ".concat(e*c,";\n          "),1===i){if(e<u&&(s%2===1?(p+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n              "),p+=1===c&&e>0?"\n                xC".concat(e," = vec4(xTexelC").concat(e-2,".zw, xTexelC").concat(e,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(e," = vec4(previous.zw, xTexelC").concat(e,".xy);\n                  } else {\n                    xC").concat(e," = vec4(0.0, 0.0, xTexelC").concat(e,".xy);\n                  }\n                  ")):p+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xC").concat(e," = xTexelC").concat(e,";\n                "),e+1<u)){const t=s%2===0?d(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(p+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(t,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                    xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(e+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(e+1,"Ready = 1;\n                  }\n                  "),p+=c>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(e+1," = vec4(previous.zw, xTexelC").concat(e+1,".xy);\n                    } else {\n                     xC").concat(e+1," = vec4(0.0, 0.0, xTexelC").concat(e+1,".xy);\n                    }\n                    "):"\n                    xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".xy);\n                    ")):p+=1===t?"\n                    xC".concat(e+1," = xTexelC").concat(e,";\n                    "):"\n                    xCOffset = xC + ".concat(t,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                      xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(e+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(e+1,"Ready = 1;\n                    }\n\n                    xC").concat(e+1," = xTexelC").concat(e+1,";\n                    ")}}else e<u&&(s%2===1?(p+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n              "),e+1<u&&(p+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(e+1," = vec4(xTexelC").concat(e+1,".xy, final.xy);\n                "))):(p+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(\n                  xTexelC").concat(e,".xy, xTexelC").concat(e+1,".xy);\n              "),e+1<u&&(p+="\n                  xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n                "))));e<u&&(p+="\n            wTexel = getW(r, ".concat(e,", d1, q);\n            dotProd += xC").concat(e," * vec4(wTexel.xz, wTexel.xz);\n          "),e+1<u&&(p+="\n              wTexel = getW(r, ".concat(e+1,", d1, q);\n              dotProd += xC").concat(e+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}p+="\n    }\n  ",p+="\n      }\n    ";let f="",m="";n&&(f=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):r?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(n,"\n        }"),m="result = activation(result);");const g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(f,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(p,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(g,"\n        ").concat(m,"\n        setOutput(result);\n      }\n    ")}}const uP={kernelName:Oe,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:s,pad:i,dilations:c,dimRoundingMode:l}=a;let u=c;null==u&&(u=[1,1]),f(ys(s,u),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(s," and dilations '").concat(u,"'")));const h=ls(r.shape,o.shape,s,u,i,l,!0);let d;d=G().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new lP(h):new cP(h);const p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(d,[r,o],"float32",p)}};class hP{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,a=e.padInfo.top,r=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(r,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class dP{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,a=e.strideHeight,r=e.strideWidth,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(i,"; dm++) {\n              int d2 = d1 * ").concat(i," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const pP={kernelName:Fe,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:s,dilations:i,pad:c,dimRoundingMode:l,filterShape:u}=a,h=ls(r.shape,u,s,i,c,l,!0),d=new hP(h);return n.runWebGLProgram(d,[r,o],"float32")}};const fP={kernelName:De,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{strides:s,dilations:i,pad:c,dimRoundingMode:l,inputShape:u}=a,h=ls(u,o.shape,s,i,c,l,!0),d=new dP(h);return n.runWebGLProgram(d,[r,o],"float32")}};class mP{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const gP={kernelName:"Diag",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,r=[...a.shape,...a.shape],o=y(a.shape),s=KD({inputs:{x:a},backend:n,attrs:{shape:[o]}}),i=new mP(o),c=n.runWebGLProgram(i,[s],s.dtype),l=KD({inputs:{x:c},backend:n,attrs:{shape:r}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),l}};class yP{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:a,strideHeight:r,strideWidth:o,filterHeight:s,filterWidth:i,dilationHeight:c,dilationWidth:l}=e,{top:u,left:h}=a;this.userCode="\n      const ivec2 strides = ivec2(".concat(r,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(h,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(t,") {\n            for (int w = 0; w < ").concat(i,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(n,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}}const bP={kernelName:Le,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:s,pad:i,dilations:c}=a,l=ss(r.shape,o.shape,s,i,"NHWC",c);let u;const h=new yP(l);u=n.runWebGLProgram(h,[r,o],"float32");const d=KD({inputs:{x:u},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(u),d}};const vP={kernelName:Pe,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{equation:r}=a,o=t,{allDims:s,summedDims:i,idDims:c}=Ql(r,o.length);$l(s.length,c,o);const{path:l,steps:u}=eu(i,c),h=u.length;let d=null,p=s.length;const f=[];for(let m=0;m<h;++m){for(const e of u[m]){const{permutationIndices:t,expandDims:a}=Jl(p,c[e]);let r;tu(t)?r=o[e]:(r=nL({inputs:{x:o[e]},backend:n,attrs:{perm:t}}),f.push(r));const s=r.shape.slice();for(let e=0;e<a.length;++e)s.splice(a[e],0,1);b(r.shape,s)||(r=KD({inputs:{x:r},backend:n,attrs:{shape:s}}),f.push(r)),null===d?d=r:(d=jD({inputs:{a:r,b:d},backend:n}),f.push(d))}m<h-1&&(l[m]>=0&&(d=eL({inputs:{x:d},backend:n,attrs:{axis:l[m]-(s.length-p),keepDims:!1}}),f.push(d)),p--)}for(const m of f)m!==d&&n.disposeIntermediateTensorInfo(m);return d}},xP=PD({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),wP={kernelName:ze,backendName:"webgl",kernelFunc:xP},kP={kernelName:Be,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:a,y:r}=t,o=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TD("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",a.shape,r.shape):new SD("return (b >= 0.0) ? a : a * (b + 1.0);",a.shape,r.shape);return n.runWebGLProgram(o,[a,r],a.dtype)}},SP=zD({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:sF}),IP={kernelName:Ue,backendName:"webgl",kernelFunc:SP},TP=PD({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(Fl,";\n  float a1 = ").concat(Dl,";\n  float a2 = ").concat(Ll,";\n  float a3 = ").concat(Ml,";\n  float a4 = ").concat(Pl,";\n  float a5 = ").concat(zl,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),CP={kernelName:We,backendName:"webgl",kernelFunc:TP},EP=PD({opSnippet:MD+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:iF,dtype:"float32"}),NP={kernelName:Ve,backendName:"webgl",kernelFunc:EP};function RP(e){const{inputs:t,attrs:n,backend:a}=e,{dim:r}=n,{input:o}=t,s=o.shape.length,i=o.shape.slice();let c=r;return r<0&&(f(-(s+1)<=r,(()=>"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]"))),c=s+r+1),i.splice(c,0,1),KD({inputs:{x:o},backend:a,attrs:{shape:i}})}const AP={kernelName:Ge,backendName:"webgl",kernelFunc:RP},_P="return exp(x) - 1.0;",OP=PD({opSnippet:_P,packedOpSnippet:_P,cpuKernelImpl:cF}),FP={kernelName:je,backendName:"webgl",kernelFunc:OP};class DP{constructor(e,t,n){this.variableNames=["real","imag"];const a=t[1];this.outputShape=t;const r=n?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),o=n?"".concat(a,".0"):"1.0";let s;if("real"===e)s="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));s="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(r,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(s,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(o,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}}function LP(e,t,n){const a=n.texData.get(e.dataId),r=y(e.shape),o=e.shape[e.shape.length-1],s=KD({inputs:{x:e},backend:n,attrs:{shape:[r/o,o]}}),i=s.shape,c=new DP("real",i,t),l=new DP("imag",i,t),u=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:i},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:i}],h=n.runWebGLProgram(c,u,"float32"),d=n.runWebGLProgram(l,u,"float32"),p=ND({inputs:{real:h,imag:d},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d);const f=KD({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(p),f}const MP={kernelName:"FFT",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t;return LP(a,!1,n)}};class PP{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function zP(e){const{backend:t,attrs:n}=e,{shape:a,value:r}=n;let{dtype:o}=n;if(o=o||A(r),"string"===o){const e=C(o,y(a));return e.fill(r),t.makeTensorInfo(a,o,e)}{const e=new PP(a,r),n=[[r]];return t.runWebGLProgram(e,[],o,n)}}const BP={kernelName:He,backendName:"webgl",kernelFunc:zP};class WP{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(t," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(t,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const UP={kernelName:Ke,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:a}=t,r=n,o=new WP(a.shape);return r.runWebGLProgram(o,[a],a.dtype)}},VP="return floor(x);",GP=PD({opSnippet:VP,packedOpSnippet:VP,cpuKernelImpl:lF}),jP={kernelName:qe,backendName:"webgl",kernelFunc:GP},HP=zD({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),KP={kernelName:Ye,backendName:"webgl",kernelFunc:HP};class qP{constructor(e){this.variableNames=["A"];const t=hO(),[n,a]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(a,".0, ").concat(n,".0);\n\n        vec4 values = ").concat(t.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}}class YP{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=hO(),[n,a]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(a,".0, ").concat(n,".0);\n            vec4 values = ").concat(t.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}const XP={kernelName:Ln,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e;let{pixels:r}=t;const{numChannels:o}=a,s="undefined"!==typeof HTMLVideoElement&&r instanceof HTMLVideoElement,i="undefined"!==typeof HTMLImageElement&&r instanceof HTMLImageElement,[c,l]=s?[r.videoWidth,r.videoHeight]:[r.width,r.height],u=[l,c],h=[l,c,o];if(i||s){const e=G().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=ZP&&e===QP||(QP=e,ZP=document.createElement("canvas").getContext("2d",{willReadFrequently:QP})),ZP.canvas.width=c,ZP.canvas.height=l,ZP.drawImage(r,0,0,c,l),r=ZP.canvas}const d=n.makeTensorInfo(u,"int32");n.texData.get(d.dataId).usage=F_.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),r);const p=G().getBool("WEBGL_PACK")?new YP(h):new qP(h),f=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),f}};let ZP,QP=G().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const JP={kernelName:zn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,bias:s,preluActivationWeights:i}=t,{strides:c,pad:l,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=a,m=vs(u),g=ls(r.shape,o.shape,c,h,l,d,!1,m);let y;const b=[],v=null!=s,x=null!=i,w="leakyrelu"===p,k=()=>{const e=[r,o],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=KD({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return b.push(t),t}return e};if(v&&e.push(t(s,u)),x&&e.push(t(i,u)),w){const t=n.makeTensorInfo([],"float32",ta(f,"float32"));e.push(t),b.push(t)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&G().getBool("WEBGL_EXP_CONV")){const e=p?BD(p,!0):null,t=new AM(g,v,e,x,w),a=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],r=k();y=n.runWebGLProgram(t,r,"float32",a)}else if(G().getBool("WEBGL_CONV_IM2COL"))y=DM({x:r,filter:o,convInfo:g,backend:n,bias:s,activation:p,preluActivationWeights:i,leakyreluAlpha:f});else{const e=p?BD(p,!1):null,t=new NM(g,v,e,x,w),a=k();y=n.runWebGLProgram(t,a,"float32")}else y=FM({x:r,filter:o,convInfo:g,backend:n,bias:s,activation:p,preluActivationWeights:i,leakyreluAlpha:f});const S=KD({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return b.push(y),b.forEach((e=>n.disposeIntermediateTensorInfo(e))),S}};const $P={kernelName:Bn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,bias:s,preluActivationWeights:i}=t,{strides:c,pad:l,dilations:u,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=a,m=[];let g=u;null==g&&(g=[1,1]),f(ys(c,g),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(c," and dilations '").concat(g,"'")));const y=ls(r.shape,o.shape,c,g,l,h,!0),b=G().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,v=d?BD(d,b):null,x=[r,o],w=null!=s,k=null!=i,S="leakyrelu"===d;if(w&&x.push(s),k&&x.push(i),S){const e=n.makeTensorInfo([],"float32",ta(p,"float32"));x.push(e),m.push(e)}let I;I=b?new lP(y,w,v,k,S):new cP(y,w,v,k,S);const T=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],C=n.runWebGLProgram(I,x,"float32",T);return m.forEach((e=>n.disposeIntermediateTensorInfo(e))),C}};class ez{constructor(e,t,n,a){this.sliceDim=e,this.strides=t,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=n;const r=EO(n.length);let o="\n    int index;";for(let s=0;s<this.sliceDim;s++)o+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(r," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(o,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}}const tz={kernelName:"GatherNd",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:a,indices:r}=t,o=r.shape,s=o[o.length-1],i=y(a.shape),[c,l,u,h]=El(a,r),d=KD({inputs:{x:r},backend:n,attrs:{shape:[l,s]}}),p=KD({inputs:{x:a},backend:n,attrs:{shape:[y(a.shape)/u,u]}});if(n.shouldExecuteOnCPU([a,r])||"string"===a.dtype){const e=n.readSync(r.dataId),t=n.bufferSync(a),o=uF(e,t,a.dtype,l,s,u,h,a.shape,i);return n.makeTensorInfo(c,a.dtype,o.values)}const f=new ez(s,h,[l,u],a.shape),m=n.runWebGLProgram(f,[p,d],p.dtype),g=KD({inputs:{x:m},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}};class nz{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=EO(this.rank),a=function(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[];for(let r=0;r<e.length;r++)2===r?a.push("index"):a.push("".concat(n[r]));return a.join()}(e);this.userCode="\n      void main() {\n        ".concat(n," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}}function az(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,indices:o}=t,{axis:s,batchDims:i}=a,c=S(s,r.shape)[0];if(G().get("DEBUG")){const e=n.readSync(o.dataId),t=r.shape[c];for(let n=0;n<e.length;++n){const a=e[n];f(a<=t-1&&a>=0,(()=>"GatherV2: the index value ".concat(a," is not in [0, ").concat(t-1,"]")))}}const l=bu(r,o,c,i),u=y(o.shape),h=[],d=KD({inputs:{x:r},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),p=KD({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,u/l.batchSize]}});h.push(d),h.push(p);const m=[l.batchSize,l.outerSize,u/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([r,o])||"string"===r.dtype){const e=n.bufferSync(p),t=n.bufferSync(d),a=hF(t,e,m);return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(l.outputShape,a.dtype,a.values)}const g=new nz(d.shape,m),b=n.runWebGLProgram(g,[d,p],d.dtype);h.push(b);const v=KD({inputs:{x:b},backend:n,attrs:{shape:l.outputShape}});return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}const rz={kernelName:Ze,backendName:"webgl",kernelFunc:az},oz=zD({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:dF,dtype:"bool"}),sz={kernelName:Qe,backendName:"webgl",kernelFunc:oz},iz=zD({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:pF}),cz={kernelName:Je,backendName:"webgl",kernelFunc:iz};const lz={kernelName:et,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t;return LP(a,!0,n)}},uz=PD({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),hz={kernelName:nt,backendName:"webgl",kernelFunc:uz},dz=PD({opSnippet:"return float(isinf(x));",dtype:"bool"}),pz={kernelName:at,backendName:"webgl",kernelFunc:dz},fz=PD({opSnippet:"return float(isnan(x));",dtype:"bool"}),mz={kernelName:rt,backendName:"webgl",kernelFunc:fz},gz=zD({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:fF,dtype:"bool"}),yz={kernelName:st,backendName:"webgl",kernelFunc:gz},bz=zD({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:mF,dtype:"bool"}),vz={kernelName:it,backendName:"webgl",kernelFunc:bz};const xz={kernelName:"LinSpace",backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:a,stop:r,num:o}=n,s=gF(a,r,o);return t.makeTensorInfo([s.length],"float32",s)}},wz=PD({opSnippet:MD+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:yF}),kz={kernelName:ct,backendName:"webgl",kernelFunc:wz},Sz=PD({opSnippet:MD+"\n  return log(1.0 + x);\n"}),Iz={kernelName:lt,backendName:"webgl",kernelFunc:Sz},Tz=zD({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),Cz={kernelName:ut,backendName:"webgl",kernelFunc:Tz},Ez=PD({opSnippet:"return float(!(x >= 1.0));"}),Nz={kernelName:ht,backendName:"webgl",kernelFunc:Ez},Rz=zD({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),Az={kernelName:dt,backendName:"webgl",kernelFunc:Rz};class _z{constructor(e,t,n,a,r){this.variableNames=["x"],this.outputShape=[];const o=t,s=e[3]-1;let i;this.outputShape=e;const c="float(".concat(n,") + float(").concat(a,") * sum");i=.5===r?"inversesqrt(".concat(c,")"):1===r?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(r,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(o,"; j <= ").concat(o,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(s,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(i,";\n        setOutput(val);\n      }\n    ")}}class Oz{constructor(e,t,n,a,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=t,s=e[3]-1;let i;this.outputShape=e;const c="float(".concat(n,") + float(").concat(a,") * sum");i=.5===r?"inversesqrt(".concat(c,")"):1===r?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(r,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(o,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(o,"; j <= ").concat(o,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(s,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(i,";\n        setOutput(result);\n      }\n    ")}}const Fz={kernelName:pt,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{depthRadius:o,bias:s,alpha:i,beta:c}=a,l=G().getBool("WEBGL_PACK_NORMALIZATION")?new Oz(r.shape,o,s,i,c):new _z(r.shape,o,s,i,c);return n.runWebGLProgram(l,[r],r.dtype)}};class Dz{constructor(e,t,n,a,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=a,this.beta=r,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(t,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(t," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(n,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(r,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(r,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}}const Lz={kernelName:ft,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r,y:o,dy:s}=t,{depthRadius:i,bias:c,alpha:l,beta:u}=a,h=new Dz(r.shape,i,c,l,u);return n.runWebGLProgram(h,[r,o,s],r.dtype)}};function Mz(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reductionIndices:o,keepDims:s}=a,i=r.shape.length,c=S(o,r.shape);let l=c;const u=ui(l,i),h=null!=u,d=n.shouldExecuteOnCPU([r]);let p=r;if(h){if(d){const e=n.texData.get(p.dataId).values,t=new Array(i);for(let n=0;n<t.length;n++)t[n]=r.shape[u[n]];const a=KF(e,r.shape,r.dtype,u,t);p=n.makeTensorInfo(t,r.dtype);n.texData.get(p.dataId).values=a}else p=$D(r,u,n);l=di(l.length,i)}li("max",l,i);const[f,m]=ii(p.shape,l);let g,b=f;if(s&&(b=ci(f,c)),d){const e=n.texData.get(p.dataId).values,t=bF(e,y(m),b,r.dtype);g=n.makeTensorInfo(b,r.dtype);n.texData.get(g.dataId).values=t}else g=function(e,t,n,a){const r=y(t),o=KD({inputs:{x:e},attrs:{shape:[y(e.shape)/r,r]},backend:a}),s=ZD(o,e.dtype,"max",a),i=KD({inputs:{x:s},attrs:{shape:n},backend:a});return a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(s),i}(p,m,b,n);return h&&n.disposeIntermediateTensorInfo(p),g}const Pz={kernelName:mt,backendName:"webgl",kernelFunc:Mz},zz=zD({opSnippet:kD+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+ID+"\n  return result;\n",cpuKernelImpl:vF}),Bz={kernelName:gt,backendName:"webgl",kernelFunc:zz};const Wz={kernelName:yt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;lO(r,"maxPool");const{filterSize:o,strides:s,pad:i,dimRoundingMode:c}=a;f(ys(s,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'")));const l=is(r.shape,o,s,1,i,c);if(1===l.filterWidth&&1===l.filterHeight&&b(l.inShape,l.outShape))return CD({inputs:{x:r},backend:n});const u=new zL(l,"max",!1);return n.runWebGLProgram(u,[r],r.dtype)}};const Uz={kernelName:vt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:s,pad:i,dataFormat:c,dimRoundingMode:l}=a,u=cs(r.shape,o,s,[1,1,1],i,l,c),h=new BL(u,"max",!1);return n.runWebGLProgram(h,[r],r.dtype)}};class Vz{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,a=e.dilationHeight,r=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=r-1-e.padInfo.top,i=o-1-e.padInfo.left,c=r*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(r,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(n,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class Gz{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,a=e.strideWidth,r=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,i=e.effectiveFilterDepth,c=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=i-1-e.padInfo.front,h=c-1-e.padInfo.top,d=l-1-e.padInfo.left,p=i*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(h,", ").concat(d,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(i,";\n           wD += ").concat(r,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const jz={kernelName:xt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,s=o,{filterSize:i,strides:c,pad:l,dimRoundingMode:u}=a,h=cs(s.shape,i,c,[1,1,1],l,u),d=new BL(h,"max",!0),p=n.runWebGLProgram(d,[s],s.dtype),f=new Gz(h),m=n.runWebGLProgram(f,[r,p],s.dtype);return n.disposeIntermediateTensorInfo(p),m}};const Hz={kernelName:bt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o,output:s}=t,i=o;lO([o,s],"maxPoolGrad");const{filterSize:c,strides:l,pad:u,dimRoundingMode:h}=a,d=is(i.shape,c,l,1,u,h),p=new zL(d,"max",!0),f=n.runWebGLProgram(p,[i],i.dtype),m=new Vz(d),g=n.runWebGLProgram(m,[r,f],i.dtype);return n.disposeIntermediateTensorInfo(f),g}};const Kz={kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{x:r}=t,{filterSize:o,strides:s,pad:i,includeBatchInIndex:c}=n,l=a;f(4===r.shape.length,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(r.shape.length,".")));const u=[1,1];f(ys(s,u),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(u,"'")));const h=is(r.shape,o,s,u,i),[d,p]=function(e,t,n,a){let r=new zL(n,"max",!1);const o=a.runWebGLProgram(r,[e],"float32");return r=new zL(n,"max",!0,!0,t),[o,a.runWebGLProgram(r,[e],"float32")]}(r,c,h,l);return[d,p]}};const qz={kernelName:wt,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{x:r}=t,{keepDims:o,axis:s}=n,i=a,c=r.shape.length,l=S(s,r.shape);let u=l;const h=ui(u,c),d=null!=h,p=i.shouldExecuteOnCPU([r]),f=[];let m=r;if(d){if(p){const e=i.texData.get(m.dataId).values,t=new Array(c);for(let a=0;a<t.length;a++)t[a]=r.shape[h[a]];const n=KF(e,r.shape,r.dtype,h,t);m=i.makeTensorInfo(t,r.dtype);i.texData.get(m.dataId).values=n}else m=$D(r,h,i);f.push(m),u=di(u.length,c)}li("sum",u,c);const[g,b]=ii(m.shape,u);let v=g;o&&(v=ci(g,l));const x=function(e,t,n,a){const r=y(t),o=KD({inputs:{x:e},attrs:{shape:[y(e.shape)/r,r]},backend:a}),s=ZD(o,"float32","mean",a),i=KD({inputs:{x:s},attrs:{shape:n},backend:a});return a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(s),i}(m,b,v,i);for(const y of f)i.disposeIntermediateTensorInfo(y);return x}};const Yz={kernelName:kt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a,i=r.shape.length,c=S(o,r.shape);let l=c;const u=ui(l,i);let h=r;null!=u&&(h=nL({inputs:{x:r},backend:n,attrs:{perm:u}}),l=di(l.length,r.shape.length)),li("min",l,i);const[d,p]=ii(h.shape,l),f=KD({inputs:{x:h},backend:n,attrs:{shape:[-1,y(p)]}}),m=ZD(f,f.dtype,"min",n);let g;if(s){g=KD({inputs:{x:m},backend:n,attrs:{shape:ci(d,c)}})}else g=KD({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(h),g}},Xz=zD({opSnippet:kD+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+ID+"\n  return result;\n",cpuKernelImpl:xF}),Zz={kernelName:St,backendName:"webgl",kernelFunc:Xz};class Qz{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=EO(a),o=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),i=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===n?0:1;this.userCode=1!==a?"\n      ".concat(r," start = ").concat(r,"(").concat(o,");\n      ").concat(r," end = ").concat(r,"(").concat(s,");\n\n      void main() {\n        ").concat(r," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(r," coords = outC - start;\n        setOutput(getX(").concat(i,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")}}class Jz{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=EO(a),o=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),i=XF("rc",a),c=XF("source",a),l="".concat(i[a-1]," < ").concat(this.outputShape[a-1]),u=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),h="reflect"===n?0:1;let d="";if(1===a){const e="\n        ".concat(r," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(h,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(h,";\n        }\n        source -= start;\n      ");d="\n        ".concat(r," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        ").concat(i[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        }\n      ")}else{const e="\n        ".concat(r," source = rc;\n        ").concat(r," lt = ").concat(r,"(lessThan(source, start));\n        ").concat(r," gte = ").concat(r,"(greaterThanEqual(source, end));\n        ").concat(r," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(h,") +\n                gte * ((end - 1) * 2 - source + ").concat(h,");\n        source -= start;\n      ");d="\n        ".concat(r," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        ").concat(i[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        }\n        rc = outputLoc;\n        ").concat(i[a-2]," += 1;\n        if(").concat(i[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(e,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n          ").concat(i[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(e,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(r," start = ").concat(r,"(").concat(o,");\n      const ").concat(r," end = ").concat(r,"(").concat(s,");\n\n      void main() {\n        ").concat(r," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")}}const $z={kernelName:It,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:a}=e;const{x:r}=t,{paddings:o,mode:s}=a,i=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Jz(r.shape,o,s):new Qz(r.shape,o,s);return n.runWebGLProgram(i,[r],r.dtype)}},eB=zD({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+ID+"\n  return result;\n"}),tB={kernelName:Tt,backendName:"webgl",kernelFunc:eB};class nB{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(t-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(t-1,"));\n      }\n    ")}}const aB=zD({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),rB={kernelName:Me,backendName:"webgl",kernelFunc:aB},oB="return a - b;",sB=zD({opSnippet:oB,packedOpSnippet:oB,supportsComplex:!0,cpuKernelImpl:GF}),iB={kernelName:Sn,backendName:"webgl",kernelFunc:sB};function cB(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{dim:o}=a,s=S([o],r.shape),i=Mz({inputs:{x:r},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),c=ci(i.shape,s),l=KD({inputs:{x:i},backend:n,attrs:{shape:c}}),u=sB({inputs:{a:r,b:l},backend:n}),h=EP({inputs:{x:u},backend:n}),d=eL({inputs:{x:h},backend:n,attrs:{axis:s,keepDims:!1}}),p=KD({inputs:{x:d},backend:n,attrs:{shape:c}}),f=aB({inputs:{a:h,b:p},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}const lB={kernelName:hn,backendName:"webgl",kernelFunc:cB};const uB={kernelName:"Multinomial",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{numSamples:o,seed:s,normalized:i}=a,c=i?r:cB({inputs:{logits:r},backend:n,attrs:{dim:r.shape.length-1}}),l=c.shape[0],u=c.shape[1],h=new nB(l,u,o),d=[[s]],p=n.runWebGLProgram(h,[c],"int32",d);return i||n.disposeIntermediateTensorInfo(c),p}},hB=aD+"\n  return -x;\n";const dB={kernelName:Et,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t;if(n.shouldExecuteOnCPU([a])){const e=n.texData.get(a.dataId),[t,r]=kF(e.values,a.shape,a.dtype);return n.makeTensorInfo(r,a.dtype,t)}let r;return r=G().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new gD(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new nD(a.shape,hB),n.runWebGLProgram(r,[a],a.dtype)}},pB=Fc;const fB={kernelName:Rt,backendName:"webgl",kernelFunc:function(e){Wn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:s,iouThreshold:i,scoreThreshold:c}=a,l=n.readSync(r.dataId),u=n.readSync(o.dataId),{selectedIndices:h}=pB(l,u,s,i,c);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},mB=Dc;const gB={kernelName:At,backendName:"webgl",kernelFunc:function(e){Wn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:s,iouThreshold:i,scoreThreshold:c,padToMaxOutputSize:l}=a,u=n.readSync(r.dataId),h=n.readSync(o.dataId),{selectedIndices:d,validOutputs:p}=mB(u,h,s,i,c,l);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},yB=Lc;const bB={kernelName:_t,backendName:"webgl",kernelFunc:function(e){Wn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:s,iouThreshold:i,scoreThreshold:c,softNmsSigma:l}=a,u=n.readSync(r.dataId),h=n.readSync(o.dataId),d=s,p=i,f=c,m=l,{selectedIndices:g,selectedScores:y}=yB(u,h,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class vB{constructor(e,t,n,a){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(n,"),\n                      float(index == coords.y)));\n      }\n    ")}}const xB={kernelName:Ft,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{indices:r}=t,{dtype:o,depth:s,onValue:i,offValue:c}=a,l=y(r.shape),u=new vB(l,s,i,c),h=KD({inputs:{x:r},backend:n,attrs:{shape:[l]}}),d=n.runWebGLProgram(u,[h],o);n.disposeIntermediateTensorInfo(h);const p=KD({inputs:{x:d},backend:n,attrs:{shape:[...r.shape,s]}});return n.disposeIntermediateTensorInfo(d),p}};function wB(e){const{inputs:t,backend:n}=e,{x:a}=t;if("complex64"===a.dtype){const e=iM({inputs:{input:a},backend:n}),t=wB({inputs:{x:e},backend:n}),r=SM({inputs:{input:a},backend:n}),o=wB({inputs:{x:r},backend:n}),s=ND({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),s}return zP({attrs:{shape:a.shape,dtype:a.dtype,value:"string"===a.dtype?"":0},backend:n})}const kB={kernelName:Fn,backendName:"webgl",kernelFunc:wB};const SB={kernelName:Ot,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:a}=t,{x:r}=n;if("string"===r.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===r.dtype){const t=iM({inputs:{input:r},backend:a}),n=e({inputs:{x:t},backend:a}),o=SM({inputs:{input:r},backend:a}),s=wB({inputs:{x:o},backend:a}),i=ND({inputs:{real:n,imag:s},backend:a});return a.disposeIntermediateTensorInfo(t),a.disposeIntermediateTensorInfo(n),a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(s),i}return zP({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:a})}};const IB={kernelName:Dt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a;if(1===t.length)return RP({inputs:{input:t[0]},backend:n,attrs:{dim:r}});const o=t[0].shape,s=t[0].dtype;t.forEach((e=>{m(o,e.shape,"All tensors passed to stack must have matching shapes"),f(s===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const i=[],c=CM({inputs:t.map((e=>{const t=RP({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}};class TB{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=EO(a),o=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),i=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(r," start = ").concat(r,"(").concat(o,");\n      ").concat(r," end = ").concat(r,"(").concat(s,");\n\n      void main() {\n        ").concat(r," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(r," coords = outC - start;\n          setOutput(getX(").concat(i,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}}class CB{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=EO(a),o=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),i=XF("rc",a),c=XF("source",a),l="".concat(i[a-1]," < ").concat(this.outputShape[a-1]),u=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),h=["".concat(r," rc = outputLoc;"),"".concat(i[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(i[a-2]," += 1;\n       if(").concat(i[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(i[a-1]," += 1;\n         if(").concat(l,") {")],d=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,m=1===a?2:4;f<m;f++)p+="\n        ".concat(h[f],"\n        if (").concat(d,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(r," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        }\n      ");p+=1===a?"} ":"}}",this.userCode="\n      const ".concat(r," start = ").concat(r,"(").concat(o,");\n      const ").concat(r," end = ").concat(r,"(").concat(s,");\n\n      void main() {\n        ").concat(r," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}}const EB=e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{paddings:o,constantValue:s}=a;if(0===y(r.shape)){const e=o.map(((e,t)=>e[0]+r.shape[t]+e[1]));return zP({backend:n,attrs:{shape:e,value:s,dtype:r.dtype}})}const i=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new CB(r.shape,o,s):new TB(r.shape,o,s),c=[[s]];return n.runWebGLProgram(i,[r],r.dtype,c)},NB={kernelName:Lt,backendName:"webgl",kernelFunc:EB},RB=zD({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+ID+"\n  return result;\n"}),AB={kernelName:Mt,backendName:"webgl",kernelFunc:RB};const _B={kernelName:zt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a,i=r.shape.length,c=[],l=S(o,r.shape);let u=l;const h=ui(u,i);let d,p=r;if(null!=h&&(p=nL({inputs:{x:r},backend:n,attrs:{perm:h}}),u=di(u.length,i),c.push(p)),li("prod",u,i),n.shouldExecuteOnCPU([p])){const e=n.texData.get(p.dataId).values,{outVals:t,outShape:a,outDtype:r}=IF(p.shape,p.dtype,e,u);d=n.makeTensorInfo(a,r,t)}else{const[e,t]=ii(p.shape,u),a=y(t),o=KD({inputs:{x:p},backend:n,attrs:{shape:[-1,a]}}),s=ZD(o,Fa(r.dtype),"prod",n);d=KD({inputs:{x:s},backend:n,attrs:{shape:e}}),c.push(o),c.push(s)}if(s){c.push(d);const e=ci(d.shape,l);d=KD({inputs:{x:d},backend:n,attrs:{shape:e}})}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}};const OB={kernelName:"RaggedGather",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{paramsNestedSplits:r,paramsDenseValues:o,indices:s}=t,{outputRaggedRank:i}=a,c=r.map((e=>n.readSync(e.dataId))),l=r.map((e=>e.shape)),u=n.readSync(o.dataId),h=n.readSync(s.dataId),[d,p,f]=TF(c,l,u,o.shape,o.dtype,h,s.shape,i),m=d.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(f,o.dtype,p);return m.concat([g])}};const FB={kernelName:"RaggedRange",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:a,limits:r,deltas:o}=t,s=n.readSync(a.dataId),i=n.readSync(r.dataId),c=n.readSync(o.dataId),[l,u]=CF(s,a.shape,a.dtype,i,r.shape,c,o.shape);return[n.makeTensorInfo([l.length],"int32",l),n.makeTensorInfo([u.length],a.dtype,u)]}};const DB={kernelName:"RaggedTensorToTensor",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{shape:r,values:o,defaultValue:s,rowPartitionTensors:i}=t,{rowPartitionTypes:c}=a,l=n.readSync(r.dataId),u=n.readSync(o.dataId),h=n.readSync(s.dataId),d=i.map((e=>n.readSync(e.dataId))),p=i.map((e=>e.shape)),[f,m]=EF(l,r.shape,u,o.shape,o.dtype,h,s.shape,d,p,c);return n.makeTensorInfo(f,o.dtype,m)}},LB=e=>{const{backend:t,attrs:n}=e,{start:a,stop:r,step:o,dtype:s}=n,i=NF(a,r,o,s);return t.makeTensorInfo([i.length],s,i)},MB={kernelName:Bt,backendName:"webgl",kernelFunc:LB},PB=PD({opSnippet:"return 1.0 / x;"}),zB={kernelName:Ut,backendName:"webgl",kernelFunc:PB},BB=PD({opSnippet:aD+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),WB={kernelName:Vt,backendName:"webgl",kernelFunc:BB},UB=PD({opSnippet:aD+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),VB={kernelName:Yt,backendName:"webgl",kernelFunc:UB};class GB{constructor(e,t,n,a,r){this.variableNames=["A"],this.outputShape=[];const[o,s,i,c]=e;this.outputShape=[o,t,n,c];const l=[a&&t>1?s-1:s,a&&n>1?i-1:i],u=[a&&t>1?t-1:t,a&&n>1?n-1:n];let h;h=r?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(i,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}}class jB{constructor(e,t,n,a,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,i,c]=e;this.outputShape=[o,t,n,c];const l=[a&&t>1?s-1:s,a&&n>1?i-1:i],u=[a&&t>1?t-1:t,a&&n>1?n-1:n];let h;h=r?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],",\n          ").concat(l[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(i,".0,\n                                     ").concat(i,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}}const HB={kernelName:Kt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:o,halfPixelCenters:s,size:i}=a,[c,l]=i,u=G().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new jB(r.shape,c,l,o,s):new GB(r.shape,c,l,o,s);return n.runWebGLProgram(u,[r],"float32")}};class KB{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,a,r]=t,[,o,s]=e,i=[n&&o>1?a-1:a,n&&s>1?r-1:r],c=[n&&o>1?o-1:o,n&&s>1?s-1:s],l=i[0]/c[0],u=i[1]/c[1],h=1/l,d=1/u,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(l,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(d,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(s,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(a-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(r-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const qB={kernelName:qt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:s}=a,i=new KB(o.shape,r.shape,s);return n.runWebGLProgram(i,[o],o.dtype)}};class YB{constructor(e,t,n,a,r){this.variableNames=["A"],this.outputShape=[];const[o,s,i,c]=e;this.outputShape=[o,t,n,c];const l=[a&&t>1?s-1:s,a&&n>1?i-1:i],u=[a&&t>1?t-1:t,a&&n>1?n-1:n],h=a?"0.5":"0.0";let d;d=r?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(i,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}}class XB{constructor(e,t,n,a,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,i,c]=e;this.outputShape=[o,t,n,c];const l=[a&&t>1?s-1:s,a&&n>1?i-1:i],u=[a&&t>1?t-1:t,a&&n>1?n-1:n],h=a?"0.5":"0.0";let d;d=r?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],",\n          ").concat(l[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(i,".0,\n                                     ").concat(i,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}}const ZB={kernelName:jt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:o,halfPixelCenters:s,size:i}=a,[c,l]=i,u=G().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new XB(r.shape,c,l,o,s):new YB(r.shape,c,l,o,s);return n.runWebGLProgram(u,[r],r.dtype)}};class QB{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,a,r]=t,[,o,s]=e,i=[n&&o>1?a-1:a,n&&s>1?r-1:r],c=[n&&o>1?o-1:o,n&&s>1?s-1:s],l=i[0]/c[0],u=i[1]/c[1],h=1/l,d=1/u,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(l,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(d,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(s,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(i[0],") *\n                (float(dyR) / float(").concat(c[0],"));\n\n            float sourceFracCol =\n                float(").concat(i[1],") *\n                  (float(dyC) / float(").concat(c[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(a,") - 1),\n                ").concat(n," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(n," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const JB={kernelName:Ht,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:s}=a,i=new QB(o.shape,r.shape,s);return n.runWebGLProgram(i,[o],o.dtype)}};class $B{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));if(this.outputShape=e,1===n)return void(this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      "));const a=e.map(((n,a)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - coords[").concat(n,"] - 1"):"coords[".concat(n,"]"))(a))).join(","),r=EO(n);this.userCode="\n      void main() {\n        ".concat(r," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}}class eW{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));this.outputShape=e;const a=XF("rc",n),r="".concat(a[n-1]," + 1 < ").concat(this.outputShape[n-1]),o="".concat(a[n-2]," + 1 < ").concat(this.outputShape[n-2]),s=EO(n);function i(n){const a=e.map(((a,r)=>function(n,a){return-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - ").concat(a[n]," - 1"):"".concat(a[n])}(r,n))),r=a.join(","),o=a.slice(-2).join(",");return"getChannel(getX(".concat(r,"), vec2(").concat(o,"))")}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(r,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return i(e)}(a.slice()),";\n          if(").concat(r,"){\n            result.g = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",i(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[n-2]="("+e[n-2]+" + 1)",i(e)}(a.slice()),";\n            if(").concat(r,") {\n              result.a = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",i(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}}const tW={kernelName:Xt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{dims:o}=a,s=r.shape.length,i=S(o,r.shape);if(0===s)return CD({inputs:{x:r},backend:n});const c=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new eW(r.shape,i):new $B(r.shape,i);return n.runWebGLProgram(c,[r],r.dtype)}};class nW{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],a=e[2];this.outputShape=e;let r="";r="number"===typeof t?"float outputValue = ".concat(t.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(t.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(r,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(n,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const aW={kernelName:Mn,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:a}=e;const{image:r}=t,{radians:o,fillValue:s,center:i}=n,c=a,l=new nW(r.shape,s),[u,h]=wl(i,r.shape[1],r.shape[2]),d=[[u,h,Math.sin(o),Math.cos(o)]];return c.runWebGLProgram(l,[r],r.dtype,d)}},rW=PD({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),oW={kernelName:Zt,backendName:"webgl",kernelFunc:rW},sW=PD({opSnippet:"return inversesqrt(x);",cpuKernelImpl:RF}),iW={kernelName:Qt,backendName:"webgl",kernelFunc:sW};class cW{constructor(e,t,n,a,r,o){let s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const i=EO(r.length),c=EO(o.length);let l="";1===n?l="i":2===n&&(l="i, j");const u="getIndices(".concat(l,")");let h="";1===a?h="i":2===a&&(h="i, coords[1]");const d="getUpdates(".concat(h,")");let p="";s&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),m=t>1?"strides[j]":"strides";this.userCode="\n        ".concat(i," strides = ").concat(i,"(").concat(r,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(t,"; j++) {\n              int index = round(").concat(u,");\n              flattenedIndex += index * ").concat(m,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(d,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(f,", sum, float(found)));\n        }\n      ")}}class lW{constructor(e,t,n,a,r,o){let s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const i=EO(r.length),c=EO(o.length);let l="";1===n?l="i":2===n&&(l="i, j");const u="getIndices(".concat(l,")");let h="";1===a?h="i":2===a&&(h="i, coords[1]");const d="getUpdates(".concat(h,")");let p="";s&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),m=t>1?"strides[j]":"strides",g=t>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(i," strides = ").concat(i,"(").concat(r,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(e,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(t,"; j+=2) {\n              ivec4 index = round(").concat(u,");\n              flattenedIndex += index.xz * ").concat(m,";\n              if (j + 1 < ").concat(t,") {\n                flattenedIndex += index.yw * ").concat(g,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(d,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(f,", sum, found));\n        }\n      ")}}const uW={kernelName:"ScatterNd",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{indices:r,updates:o}=t,{shape:s}=a,{sliceRank:i,numUpdates:c,sliceSize:l,strides:u,outputSize:h}=Al(0,r,s),d=[h/l,l];if(0===h)return n.makeTensorInfo(s,r.dtype);const p=KD({inputs:{x:r},backend:n,attrs:{shape:[c,i]}}),f=KD({inputs:{x:o},backend:n,attrs:{shape:[c,l]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;g=G().getBool("WEBGL_PACK")?new lW(c,i,p.shape.length,f.shape.length,u,d):new cW(c,i,p.shape.length,f.shape.length,u,d);const y=n.runWebGLProgram(g,[f,p,m],f.dtype),b=KD({inputs:{x:y},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),b}};class hW{constructor(e,t,n,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const r="for (int i = 0; i < ".concat(Math.ceil(Math.log2(t+1)),"; ++i) { if (left >= right) break;"),o=2===G().getNumber("WEBGL_VERSION")?"while (left < right) {":r,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}}const dW={kernelName:"SearchSorted",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sortedSequence:r,values:o}=t,{side:s}=a,i=new hW(r.shape[0],r.shape[1],o.shape[1],s),c=[[r.shape[1]]];return n.runWebGLProgram(i,[r,o],"int32",c)}};class pW{constructor(e,t,n){let a,r;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank ".concat(n," is not yet supported"));if(1===n)r="resRC",a="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[];for(let a=0;a<t.length;a++)s.push("".concat(n[a])),a<e&&o.push("".concat(n[a]));a=o.join(),r=s.join()}const o=EO(n);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(r,"));\n        } else {\n          setOutput(getB(").concat(r,"));\n        }\n      }\n    ")}}const fW={kernelName:Jt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:a,t:r,e:o}=t,s=new pW(a.shape.length,r.shape,r.shape.length);return n.runWebGLProgram(s,[a,r,o],Oa(r.dtype,o.dtype))}},mW=PD({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(_l,";\n  float scale = ").concat(Ol,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),gW={kernelName:$t,backendName:"webgl",kernelFunc:mW},yW=PD({opSnippet:MD+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:_F}),bW={kernelName:rn,backendName:"webgl",kernelFunc:yW},vW=PD({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),xW={kernelName:an,backendName:"webgl",kernelFunc:vW},wW=PD({opSnippet:MD+"\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(ID,"\n  return result;\n")}),kW={kernelName:tn,backendName:"webgl",kernelFunc:wW},SW=PD({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),IW={kernelName:nn,backendName:"webgl",kernelFunc:SW},TW=PD({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),CW={kernelName:on,backendName:"webgl",kernelFunc:TW},EW={kernelName:ln,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:o,paddings:s}=a;f(r.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const i=o.reduce(((e,t)=>e*t)),c=[[0,0]];c.push(...s);for(let f=1+o.length;f<r.shape.length;++f)c.push([0,0]);const l=[],u=EB({inputs:{x:r},backend:n,attrs:{paddings:c,constantValue:0}}),h=kl(u.shape,o,i,!1),d=Sl(h.length,o.length,!1),p=Il(u.shape,o,i,!1),m=KD({inputs:{x:u},backend:n,attrs:{shape:h}}),g=nL({inputs:{x:m},backend:n,attrs:{perm:d}}),y=KD({inputs:{x:g},backend:n,attrs:{shape:p}});return l.push(u),l.push(m),l.push(g),l.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}};const NW={kernelName:dn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:a,values:r,denseShape:o,defaultValue:s}=t;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(o.shape));if(2!==a.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(a.shape));if(1!==r.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(r.shape));if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));const i=n.readSync(a.dataId),c=n.readSync(r.dataId),l=n.readSync(o.dataId),u=n.readSync(s.dataId)[0],[h,d,p,f,m]=DF(i,a.shape,a.dtype,c,r.dtype,l,u);return[n.makeTensorInfo(d,a.dtype,h),n.makeTensorInfo([d[0]],r.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],a.dtype,new Int32Array(m))]}};const RW={kernelName:pn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:a,inputShape:r,newShape:o}=t;if(2!==a.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(a.shape));if(1!==r.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(r.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));const s=Array.from(n.readSync(r.dataId)),i=n.readSync(a.dataId),c=Array.from(n.readSync(o.dataId)),[l,u,h]=LF(i,a.shape,a.dtype,s,c);return[n.makeTensorInfo(u,a.dtype,l),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}};const AW={kernelName:fn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:o}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(r.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(o.shape));const s=n.readSync(a.dataId),i=n.readSync(r.dataId),c=n.readSync(o.dataId),[l,u]=MF(s,a.shape,a.dtype,i,c,!0);return n.makeTensorInfo(u,a.dtype,l)}};const _W={kernelName:mn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:o}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(r.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(o.shape));const s=n.readSync(a.dataId),i=n.readSync(r.dataId),c=n.readSync(o.dataId),[l,u]=MF(s,a.shape,a.dtype,i,c);return n.makeTensorInfo(u,a.dtype,l)}};const OW={kernelName:"SparseToDense",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sparseIndices:r,sparseValues:o,defaultValue:s}=t,{outputShape:i}=a,{sliceRank:c,numUpdates:l,sliceSize:u,strides:h,outputSize:d}=Al(0,r,i),p=!1;if("string"===o.dtype){const e=n.bufferSync(r),t=n.bufferSync(o),a=oa(n.readSync(s.dataId)[0]),f=AF(e,t,i,d,u,l,c,h,a,p);return n.makeTensorInfo(i,f.dtype,f.values)}const f=new cW(l,c,r.shape.length,o.shape.length,h,[d,1],p),m=n.runWebGLProgram(f,[o,r,s],o.dtype),g=KD({inputs:{x:m},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(m),g}};const FW={kernelName:un,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{numOrSizeSplits:o,axis:s}=a,i=S(s,r.shape)[0],c=au(r,o,i),l=r.shape.length,u=new Array(l).fill(0),h=r.shape.slice();return c.map((e=>{const t=[...h];t[i]=e;const a=$L({inputs:{x:r},backend:n,attrs:{begin:u,size:t}});return u[i]+=e,a}))}},DW="return sqrt(x);",LW=PD({opSnippet:DW,packedOpSnippet:DW,cpuKernelImpl:PF}),MW={kernelName:sn,backendName:"webgl",kernelFunc:LW},PW={kernelName:yn,backendName:"webgl",kernelFunc:PD({opSnippet:"return x * x;"})},zW="return (a - b) * (a - b);",BW=zD({opSnippet:zW,packedOpSnippet:zW}),WW={kernelName:gn,backendName:"webgl",kernelFunc:BW};const UW={kernelName:bn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;if("string"!==r.dtype)throw new Error("Input must be of datatype string");const o=vu(n.readSync(r.dataId)),s=zF(o,"string",a);return n.makeTensorInfo(r.shape,"string",s)}};const VW={kernelName:Dn,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:a}=e;const{x:r}=t,o=aD+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),s=new nD(r.shape,o);return a.runWebGLProgram(s,[r],r.dtype)}};class GW{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const a=n.length,r=EO(n.length),o=EO(n.length);let s="";if(1===a)s="coords * strides + begin";else{let e=0;s=n.map(((t,a)=>(e++,1===n.length?"coords * strides[".concat(a,"] + begin[").concat(a,"]"):"coords[".concat(e-1,"] * strides[").concat(a,"] + begin[").concat(a,"]")))).join(",")}this.userCode="\n      ".concat(r," begin = ").concat(r,"(").concat(e,");\n      ").concat(r," strides = ").concat(r,"(").concat(t,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}}const jW={kernelName:vn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:o,end:s,strides:i,beginMask:c,endMask:l,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=a,{finalShapeSparse:p,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:b,begin:v,end:x,strides:w}=ts(r.shape,o,s,i,c,l,u,h,d);let k;if(g)k=KD({inputs:{x:r},backend:n,attrs:{shape:m}});else if(y||b){f(r.shape.length>=1,(()=>"Input must have rank at least 1, got: ".concat(r.shape.length)));const e=Vo(v,x,w),t=$L({inputs:{x:r},backend:n,attrs:{begin:v,size:e}});k=KD({inputs:{x:t},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([r])){const e=n.readSync(r.dataId),t=Xr(r.shape,r.dtype,e),a=BF(p,t,w,v);k=n.makeTensorInfo(m,r.dtype,a.values)}else{const e=new GW(v,w,p);k=n.runWebGLProgram(e,[r],r.dtype)}}const S=KD({inputs:{x:k},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(k),S}};const HW={kernelName:xn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{separator:r,nGramWidths:o,leftPad:s,rightPad:i,padWidth:c,preserveShortSequences:l}=a,{data:u,dataSplits:h}=t,d=n.readSync(u.dataId),p=n.readSync(h.dataId),[f,m]=WF(d,p,r,o,s,i,c,l);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",m)]}};const KW={kernelName:wn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{skipEmpty:r}=a,{input:o,delimiter:s}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: ".concat(o.shape));if(0!==s.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(s.shape));const i=n.readSync(o.dataId),c=n.readSync(s.dataId)[0],[l,u,h]=UF(i,c,r),d=u.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};const qW={kernelName:kn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{numBuckets:r}=a,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");const s=n.readSync(o.dataId),i=VF(s,r);return n.makeTensorInfo(o.shape,"int32",i)}},YW=PD({opSnippet:"return tan(x);"}),XW={kernelName:In,backendName:"webgl",kernelFunc:YW},ZW=PD({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),QW={kernelName:Tn,backendName:"webgl",kernelFunc:ZW};const JW={kernelName:"TensorScatterUpdate",backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{tensor:r,indices:o,updates:s}=t,{}=a,{sliceRank:i,numUpdates:c,sliceSize:l,strides:u,outputSize:h}=Al(0,o,r.shape),d=[h/l,l];if(0===h)return n.makeTensorInfo(r.shape,o.dtype);const p=KD({inputs:{x:o},backend:n,attrs:{shape:[c,i]}}),f=KD({inputs:{x:s},backend:n,attrs:{shape:[c,l]}}),m=KD({inputs:{x:r},backend:n,attrs:{shape:d}}),g=new cW(c,i,p.shape.length,f.shape.length,u,d,!1,!0),y=n.runWebGLProgram(g,[f,p,m],m.dtype),b=KD({inputs:{x:y},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),b}};class $W{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[o]*t[o];this.outputShape=n,this.rank=n.length;const a=EO(this.rank),r=function(e){const t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],a=[];for(let r=0;r<e.length;r++)a.push("imod(".concat(n[r],", ").concat(e[r],")"));return a.join()}(e);this.userCode="\n      void main() {\n        ".concat(a," resRC = getOutputCoords();\n        setOutput(getA(").concat(r,"));\n      }\n    ")}}function eU(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reps:o}=a;if("string"===r.dtype||r.shape.length>5){const e=n.readSync(r.dataId),t="string"===r.dtype?e.map((e=>oa(e))):e,a=Xr(r.shape,r.dtype,t),s=jF(a,o);return n.makeTensorInfo(s.shape,s.dtype,s.values)}const s=new $W(r.shape,o);return n.runWebGLProgram(s,[r],r.dtype)}const tU={kernelName:Cn,backendName:"webgl",kernelFunc:eU};class nU{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class aU{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function rU(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function oU(e){let t=1;for(;t<e;)t*=2;return t}const sU={kernelName:En,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{k:o,sorted:s}=a,i=G().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=G().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=r.shape,u=l[l.length-1];if(n.shouldExecuteOnCPU([r])||u<i||o>c){const e=n.readSync(r.dataId),[t,a]=HF(e,l,r.dtype,o,s);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(a.shape,a.dtype,a.values)]}if(0===o)return l[l.length-1]=0,[n.makeTensorInfo(l,r.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(1===u)return[r,zP({attrs:{shape:l,dtype:"int32",value:0},backend:n})];const h=n.texData.get(r.dataId),d=null!==h&&h.isPacked,p=d?n.unpackTensor(r):r,f=y(l)/u,m=KD({inputs:{x:p},attrs:{shape:[f,u]},backend:n});d&&rU(n,p);const g=oU(o),b=oU(u);let v=null;const x=()=>null===v?[m,m]:[m,v],w=(e,t,a)=>{const r=x(),o=new nU(a),s=[[u],[null===v?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],i=v;v=n.runWebGLProgram(o,r,"int32",s),rU(n,i)};for(let y=1;y<g;y*=2){const e=2*y;for(let t=y;t>=1;t/=2)w(e,t,[f,b])}for(let y=b;y>g;y/=2){const e=x(),t=new aU([f,y/2]),a=[[u],[null===v?1:0],[g]],r=v;v=n.runWebGLProgram(t,e,"int32",a),rU(n,r);const o=g/2,s=2*o;for(let n=o;n>=1;n/=2)w(s,n,v.shape)}let k=v;v=$L({inputs:{x:v},backend:n,attrs:{begin:0,size:[f,o]}}),rU(n,k);let S=az({inputs:{x:m,indices:v},backend:n,attrs:{axis:1,batchDims:1}});rU(n,m);const I=l.slice(0,-1);I.push(o),k=v,v=KD({inputs:{x:v},attrs:{shape:I},backend:n}),rU(n,k);const T=S;return S=KD({inputs:{x:S},attrs:{shape:I},backend:n}),rU(n,T),[S,v]}};class iU{constructor(e,t,n,a,r,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const s="nearest"===n?1:2;let i;switch(a){case"constant":default:i=1;break;case"reflect":i=2;break;case"wrap":i=3;break;case"nearest":i=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(i," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(i," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(i," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(t,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(r,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(r,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(t,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(s," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}}const cU={kernelName:Nn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{image:r,transforms:o}=t,{interpolation:s,fillMode:i,fillValue:c,outputShape:l}=a,[u,h,d,p]=r.shape,[f,m]=null!=l?l:[h,d],g=new iU(h,d,s,i,c,[u,f,m,p]);return n.runWebGLProgram(g,[r,o],"float32")}};const lU={kernelName:An,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{axis:r}=n,{x:o}=t;lO(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const s=a.readSync(o.dataId),{outputValues:i,outputShape:c,indices:l}=qF(s,r,o.shape,o.dtype);return[a.makeTensorInfo(c,o.dtype,i),a.makeTensorInfo([l.length],"int32",l)]}};const uU={kernelName:_n,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{value:r}=t;let{axis:o}=a;o<0&&(o+=r.shape.length);const s=r,i=s.shape.length,c=r.shape[o],l=new Array(i-1);let u=0;for(let m=0;m<i;m++)m!==o&&(l[u++]=s.shape[m]);const h=[],d=new Array(i).fill(0),p=s.shape.slice();p[o]=1;const f=new Array(c);for(let m=0;m<f.length;m++){d[o]=m;const e=$L({inputs:{x:s},backend:n,attrs:{begin:d,size:p}}),t=KD({inputs:{x:e},backend:n,attrs:{shape:l}});f[m]=t,h.push(e)}return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};class hU{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,a=e.batchSize,r=e.inSize,o=e.numSegments,s=o*Math.ceil(r/n);this.outputShape=[a,s];const i=4*Math.floor(n/4),c=n%4,l="\n        sumValue += dot(values, segFilter);\n    ";let u="";r%n>0&&(u="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return initializationValue;\n        }\n      "));let h="";r%n>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(r,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(u,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(h,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(n,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(i,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(i,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}}const dU=[sL,cL,uL,dL,mL,bL,vL,xL,CL,EL,RL,_L,FL,LL,PL,WL,UL,jL,HL,KL,XL,tM,nM,aM,rM,uM,pM,gM,RD,vM,EM,LM,WM,VM,GM,jM,HM,qM,XM,QM,aP,rP,oP,iP,uP,pP,fP,gP,bP,vP,wP,kP,IP,CP,NP,AP,FP,MP,BP,UP,jP,KP,XP,JP,$P,tz,rz,sz,cz,ED,lz,IM,hz,pz,mz,OD,yz,vz,xz,kz,Iz,Cz,Nz,Az,Fz,Lz,Pz,Bz,Wz,Uz,jz,Hz,Kz,qz,Yz,Zz,$z,tB,uB,HD,dB,fB,gB,bB,sM,xB,SB,IB,NB,AB,LD,_B,OB,FB,DB,MB,cM,rB,zB,WB,VB,qD,HB,qB,ZB,JB,tW,aW,oW,iW,uW,dW,fW,gW,bW,xW,kW,IW,eM,lB,CW,EW,NW,RW,AW,_W,OW,FW,MW,PW,WW,UW,VW,jW,HW,KW,qW,iB,tL,XW,QW,JW,tU,sU,cU,aL,lU,uU,{kernelName:On,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,segmentIds:o}=t,{numSegments:s}=a,i=r.shape.length,c=[];let l=0;const u=ui([l],i);let h=r;null!=u&&(h=nL({inputs:{x:r},backend:n,attrs:{perm:u}}),c.push(h),l=di(1,i)[0]);const d=yu(h.shape,l,s),p=y([h.shape[l]]),f=KD({inputs:{x:h},backend:n,attrs:{shape:[-1,p]}});c.push(f);const m=Fa(r.dtype),g=(e,t,a,r,o)=>{const s=e.shape[0],i=e.shape[1],l=gu(i,o),u=new hU({windowSize:l,inSize:i,batchSize:s,numSegments:o},t),h=n.compileAndRun(u,[e,a],r);if(c.push(h),h.shape[1]===o)return h;const d=LB({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=eU({inputs:{x:d},backend:n,attrs:{reps:[i/l]}});c.push(d),c.push(p);return g(h,t,p,r,o)},b=KD({inputs:{x:g(f,"unsortedSegmentSum",o,m,s)},backend:n,attrs:{shape:d}});let v=b;if(null!=u){c.push(b);const e=hi(u);v=nL({inputs:{x:v},backend:n,attrs:{perm:e}})}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}},kB];for(const fU of dU)qn(fU)},9020:()=>{!function(){"use strict";if("object"===typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(e){for(var t=window.document,n=r(t);n;)n=r(t=n.ownerDocument);return t}(),t=[],n=null,a=null;s.prototype.THROTTLE_TIMEOUT=100,s.prototype.POLL_INTERVAL=null,s.prototype.USE_MUTATION_OBSERVER=!0,s._setupCrossOriginUpdater=function(){return n||(n=function(e,n){a=e&&n?d(e,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),n},s._resetCrossOriginUpdater=function(){n=null,a=null},s.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},s.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},s.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},s.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},s.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},s.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},s.prototype._monitorIntersections=function(t){var n=t.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(t)){var a=this._checkForIntersections,o=null,s=null;this.POLL_INTERVAL?o=n.setInterval(a,this.POLL_INTERVAL):(i(n,"resize",a,!0),i(t,"scroll",a,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(s=new n.MutationObserver(a)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(o&&e.clearInterval(o),c(e,"resize",a,!0)),c(t,"scroll",a,!0),s&&s.disconnect()}));var l=this.root&&(this.root.ownerDocument||this.root)||e;if(t!=l){var u=r(t);u&&this._monitorIntersections(u.ownerDocument)}}},s.prototype._unmonitorIntersections=function(t){var n=this._monitoringDocuments.indexOf(t);if(-1!=n){var a=this.root&&(this.root.ownerDocument||this.root)||e,o=this._observationTargets.some((function(e){var n=e.element.ownerDocument;if(n==t)return!0;for(;n&&n!=a;){var o=r(n);if((n=o&&o.ownerDocument)==t)return!0}return!1}));if(!o){var s=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),s(),t!=a){var i=r(t);i&&this._unmonitorIntersections(i.ownerDocument)}}}},s.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},s.prototype._checkForIntersections=function(){if(this.root||!n||a){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(a){var r=a.element,s=u(r),i=this._rootContainsTarget(r),c=a.entry,l=e&&i&&this._computeTargetAndRootIntersection(r,s,t),h=null;this._rootContainsTarget(r)?n&&!this.root||(h=t):h={top:0,bottom:0,left:0,right:0,width:0,height:0};var d=a.entry=new o({time:window.performance&&performance.now&&performance.now(),target:r,boundingClientRect:s,rootBounds:h,intersectionRect:l});c?e&&i?this._hasCrossedThreshold(c,d)&&this._queuedEntries.push(d):c&&c.isIntersecting&&this._queuedEntries.push(d):this._queuedEntries.push(d)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},s.prototype._computeTargetAndRootIntersection=function(t,r,o){if("none"!=window.getComputedStyle(t).display){for(var s=r,i=f(t),c=!1;!c&&i;){var h=null,p=1==i.nodeType?window.getComputedStyle(i):{};if("none"==p.display)return null;if(i==this.root||9==i.nodeType)if(c=!0,i==this.root||i==e)n&&!this.root?!a||0==a.width&&0==a.height?(i=null,h=null,s=null):h=a:h=o;else{var m=f(i),g=m&&u(m),y=m&&this._computeTargetAndRootIntersection(m,g,o);g&&y?(i=m,h=d(g,y)):(i=null,s=null)}else{var b=i.ownerDocument;i!=b.body&&i!=b.documentElement&&"visible"!=p.overflow&&(h=u(i))}if(h&&(s=l(h,s)),!s)break;i=i&&f(i)}return s}},s.prototype._getRootRect=function(){var t;if(this.root&&!m(this.root))t=u(this.root);else{var n=m(this.root)?this.root:e,a=n.documentElement,r=n.body;t={top:0,left:0,right:a.clientWidth||r.clientWidth,width:a.clientWidth||r.clientWidth,bottom:a.clientHeight||r.clientHeight,height:a.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(t)},s.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},s.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,a=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==a)for(var r=0;r<this.thresholds.length;r++){var o=this.thresholds[r];if(o==n||o==a||o<n!==o<a)return!0}},s.prototype._rootIsInDom=function(){return!this.root||p(e,this.root)},s.prototype._rootContainsTarget=function(t){var n=this.root&&(this.root.ownerDocument||this.root)||e;return p(n,t)&&(!this.root||n==t.ownerDocument)},s.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},s.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=s,window.IntersectionObserverEntry=o}function r(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(t){return null}}function o(e){this.time=e.time,this.target=e.target,this.rootBounds=h(e.rootBounds),this.boundingClientRect=h(e.boundingClientRect),this.intersectionRect=h(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,a=this.intersectionRect,r=a.width*a.height;this.intersectionRatio=n?Number((r/n).toFixed(4)):this.isIntersecting?1:0}function s(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType&&9!=n.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=function(e,t){var n=null;return function(){n||(n=setTimeout((function(){e(),n=null}),t))}}(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function i(e,t,n,a){"function"==typeof e.addEventListener?e.addEventListener(t,n,a||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function c(e,t,n,a){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,a||!1):"function"==typeof e.detachEvent&&e.detachEvent("on"+t,n)}function l(e,t){var n=Math.max(e.top,t.top),a=Math.min(e.bottom,t.bottom),r=Math.max(e.left,t.left),o=Math.min(e.right,t.right),s=o-r,i=a-n;return s>=0&&i>=0&&{top:n,bottom:a,left:r,right:o,width:s,height:i}||null}function u(e){var t;try{t=e.getBoundingClientRect()}catch(n){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function h(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function d(e,t){var n=t.top-e.top,a=t.left-e.left;return{top:n,left:a,height:t.height,width:t.width,bottom:n+t.height,right:a+t.width}}function p(e,t){for(var n=t;n;){if(n==e)return!0;n=f(n)}return!1}function f(t){var n=t.parentNode;return 9==t.nodeType&&t!=e?r(t):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&11==n.nodeType&&n.host?n.host:n)}function m(e){return e&&9===e.nodeType}}()},3282:(e,t,n)=>{e.exports=n(6050)},6050:(e,t,n)=>{const a=["ar","cs","da","de","en","es","fa","fr","gl","it","ko","nl","pl","pt","ro","ru","sv","tr","vi"],r=n(141);function o(e){let t=(e=e||{}).language||"en";return t=s(t),r[t]}function s(e){const t="Language must be one of ["+a.join(", ")+"]";if("string"!==typeof e)throw new Error(t);const n=2===e.length?e:function(e){if("string"!==typeof e)return"";return{arabic:"ar",czech:"cs",danish:"da",dutch:"nl",english:"en",french:"fr",galician:"gl",german:"de",italian:"it",korean:"ko",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",spanish:"es",swedish:"sv",turkish:"tr",vietnam:"vt"}[e]||""}(e);if(a.indexOf(n)<0)throw new Error(t);return n}e.exports={getStopwords:o,extract:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{remove_digits:!0,return_changed_case:!0};if(!e)return[];const n=t.return_changed_case,a=t.return_chained_words,r=t.remove_digits;let i=t.language||"en";const c=t.remove_duplicates||!1,l=t.return_max_ngrams;i=s(i);const u=e.replace(/(<([^>]+)>)/gi,"").trim();if(u){const e=u.split(/\s/),s=[],h=[];for(let t=0;t<e.length;t++){let n=e[t].match(/https?:\/\/.*[\r\n]*/g)?e[t]:e[t].replace(/\.|,|;|!|\?|\(|\)|:|"|^'|'$|\u201c|\u201d|\u2018|\u2019/g,"");1===n.length&&(n=n.replace(/_|@|&|#/g,""));const a=n.match(/\d/g);r&&a&&a.length===n.length&&(n=""),n.length>0&&(h.push(n.toLowerCase()),s.push(n))}let d=[];const p=t.stopwords||o({language:i});let f=0,m=0,g=!1;for(let t=0;t<h.length;t++)if(p.indexOf(h[t])<0){f!==t-1?(m=t,g=!1):g=!0;const e=n&&!s[t].match(/https?:\/\/.*[\r\n]*/g)?h[t]:s[t];if(l&&g&&!a&&l>t-m&&f===t-1){const t=d.length-1<0?0:d.length-1;d[t]=d[t]?d[t]+" "+e:e}else if(a&&f===t-1){const t=d.length-1<0?0:d.length-1;d[t]=d[t]?d[t]+" "+e:e}else d.push(e);f=t}else g=!1;return c&&(d=d.filter(((e,t,n)=>n.indexOf(e)===t))),d}return[]},supported_language_codes:a}},8893:e=>{e.exports={stopwords:["\u060c","\u0621","\u0621\u064e","\u0622","\u0622\u0628","\u0622\u0630\u0627\u0631","\u0622\u0636","\u0622\u0644","\u0622\u0645\u064a\u0646\u064e","\u0622\u0646\u0627\u0621","\u0622\u0646\u0641\u0627","\u0622\u0647","\u0622\u0647\u0627\u064b","\u0622\u0647\u064d","\u0622\u0647\u0650","\u0623","\u0623\u0628\u062f\u0627","\u0623\u0628\u0631\u064a\u0644","\u0623\u0628\u0648","\u0623\u0628\u064c","\u0623\u062c\u0644","\u0623\u062c\u0645\u0639","\u0623\u062d\u062f","\u0623\u062e\u0628\u0631","\u0623\u062e\u0630","\u0623\u062e\u0648","\u0623\u062e\u064c","\u0623\u0631\u0628\u0639","\u0623\u0631\u0628\u0639\u0627\u0621","\u0623\u0631\u0628\u0639\u0629","\u0623\u0631\u0628\u0639\u0645\u0626\u0629","\u0623\u0631\u0628\u0639\u0645\u0627\u0626\u0629","\u0623\u0631\u0649","\u0623\u0633\u0643\u0646","\u0623\u0635\u0628\u062d","\u0623\u0635\u0644\u0627","\u0623\u0636\u062d\u0649","\u0623\u0637\u0639\u0645","\u0623\u0639\u0637\u0649","\u0623\u0639\u0644\u0645","\u0623\u063a\u0633\u0637\u0633","\u0623\u0641\u0631\u064a\u0644","\u0623\u0641\u0639\u0644 \u0628\u0647","\u0623\u0641\u064d\u0651","\u0623\u0642\u0628\u0644","\u0623\u0643\u062a\u0648\u0628\u0631","\u0623\u0644","\u0623\u0644\u0627","\u0623\u0644\u0641","\u0623\u0644\u0641\u0649","\u0623\u0645","\u0623\u0645\u0627","\u0623\u0645\u0627\u0645","\u0623\u0645\u0627\u0645\u0643","\u0623\u0645\u0627\u0645\u0643\u064e","\u0623\u0645\u062f","\u0623\u0645\u0633","\u0623\u0645\u0633\u0649","\u0623\u0645\u0651\u0627","\u0623\u0646","\u0623\u0646\u0627","\u0623\u0646\u0628\u0623","\u0623\u0646\u062a","\u0623\u0646\u062a\u0645","\u0623\u0646\u062a\u0645\u0627","\u0623\u0646\u062a\u0646","\u0623\u0646\u062a\u0650","\u0623\u0646\u0634\u0623","\u0623\u0646\u0647","\u0623\u0646\u064b\u0651","\u0623\u0646\u0651\u0649","\u0623\u0647\u0644\u0627","\u0623\u0648","\u0623\u0648\u062a","\u0623\u0648\u0634\u0643","\u0623\u0648\u0644","\u0623\u0648\u0644\u0626\u0643","\u0623\u0648\u0644\u0627\u0621","\u0623\u0648\u0644\u0627\u0644\u0643","\u0623\u0648\u0651\u0647\u0652","\u0623\u0649","\u0623\u064a","\u0623\u064a\u0627","\u0623\u064a\u0627\u0631","\u0623\u064a\u0636\u0627","\u0623\u064a\u0644\u0648\u0644","\u0623\u064a\u0646","\u0623\u064a\u0651","\u0623\u064a\u0651\u0627\u0646","\u0623\u064f\u0641\u064d\u0651","\u0624","\u0625\u062d\u062f\u0649","\u0625\u0630","\u0625\u0630\u0627","\u0625\u0630\u0627\u064b","\u0625\u0630\u0645\u0627","\u0625\u0630\u0646","\u0625\u0632\u0627\u0621","\u0625\u0644\u0649","\u0625\u0644\u064a","\u0625\u0644\u064a\u0643\u0645","\u0625\u0644\u064a\u0643\u0645\u0627","\u0625\u0644\u064a\u0643\u0646\u0651","\u0625\u0644\u064a\u0643\u064e","\u0625\u0644\u064e\u064a\u0652\u0643\u064e","\u0625\u0644\u0651\u0627","\u0625\u0645\u0651\u0627","\u0625\u0646","\u0625\u0646\u064e\u0651","\u0625\u0649","\u0625\u064a\u0627\u0643","\u0625\u064a\u0627\u0643\u0645","\u0625\u064a\u0627\u0643\u0645\u0627","\u0625\u064a\u0627\u0643\u0646","\u0625\u064a\u0627\u0646\u0627","\u0625\u064a\u0627\u0647","\u0625\u064a\u0627\u0647\u0627","\u0625\u064a\u0627\u0647\u0645","\u0625\u064a\u0627\u0647\u0645\u0627","\u0625\u064a\u0627\u0647\u0646","\u0625\u064a\u0627\u064a","\u0625\u064a\u0647\u064d","\u0626","\u0627","\u0627?","\u0627?\u0649","\u0627\u0627\u0644\u0627","\u0627\u0627\u0644\u062a\u0649","\u0627\u0628\u062a\u062f\u0623","\u0627\u0628\u064a\u0646","\u0627\u062a\u062e\u0630","\u0627\u062b\u0631","\u0627\u062b\u0646\u0627","\u0627\u062b\u0646\u0627\u0646","\u0627\u062b\u0646\u064a","\u0627\u062b\u0646\u064a\u0646","\u0627\u062c\u0644","\u0627\u062d\u062f","\u0627\u062e\u0631\u0649","\u0627\u062e\u0644\u0648\u0644\u0642","\u0627\u0630\u0627","\u0627\u0631\u0628\u0639\u0629","\u0627\u0631\u0628\u0639\u0648\u0646","\u0627\u0631\u0628\u0639\u064a\u0646","\u0627\u0631\u062a\u062f\u0651","\u0627\u0633\u062a\u062d\u0627\u0644","\u0627\u0635\u0628\u062d","\u0627\u0636\u062d\u0649","\u0627\u0637\u0627\u0631","\u0627\u0639\u0627\u062f\u0629","\u0627\u0639\u0644\u0646\u062a","\u0627\u0641","\u0627\u0643\u062b\u0631","\u0627\u0643\u062f","\u0627\u0644\u0622\u0646","\u0627\u0644\u0623\u0644\u0627\u0621","\u0627\u0644\u0623\u0644\u0649","\u0627\u0644\u0627","\u0627\u0644\u0627\u062e\u064a\u0631\u0629","\u0627\u0644\u0627\u0646","\u0627\u0644\u0627\u0648\u0644","\u0627\u0644\u0627\u0648\u0644\u0649","\u0627\u0644\u062a\u0649","\u0627\u0644\u062a\u064a","\u0627\u0644\u062b\u0627\u0646\u064a","\u0627\u0644\u062b\u0627\u0646\u064a\u0629","\u0627\u0644\u062d\u0627\u0644\u064a","\u0627\u0644\u0630\u0627\u062a\u064a","\u0627\u0644\u0630\u0649","\u0627\u0644\u0630\u064a","\u0627\u0644\u0630\u064a\u0646","\u0627\u0644\u0633\u0627\u0628\u0642","\u0627\u0644\u0641","\u0627\u0644\u0644\u0627\u062a\u064a","\u0627\u0644\u0644\u062a\u0627\u0646","\u0627\u0644\u0644\u062a\u064a\u0627","\u0627\u0644\u0644\u062a\u064a\u0646","\u0627\u0644\u0644\u0630\u0627\u0646","\u0627\u0644\u0644\u0630\u064a\u0646","\u0627\u0644\u0644\u0648\u0627\u062a\u064a","\u0627\u0644\u0645\u0627\u0636\u064a","\u0627\u0644\u0645\u0642\u0628\u0644","\u0627\u0644\u0648\u0642\u062a","\u0627\u0644\u0649","\u0627\u0644\u064a","\u0627\u0644\u064a\u0647","\u0627\u0644\u064a\u0647\u0627","\u0627\u0644\u064a\u0648\u0645","\u0627\u0645\u0627","\u0627\u0645\u0627\u0645","\u0627\u0645\u0633","\u0627\u0645\u0633\u0649","\u0627\u0646","\u0627\u0646\u0628\u0631\u0649","\u0627\u0646\u0642\u0644\u0628","\u0627\u0646\u0647","\u0627\u0646\u0647\u0627","\u0627\u0648","\u0627\u0648\u0644","\u0627\u064a","\u0627\u064a\u0627\u0631","\u0627\u064a\u0627\u0645","\u0627\u064a\u0636\u0627","\u0628","\u0628\u0624\u0633\u0627","\u0628\u0625\u0646","\u0628\u0626\u0633","\u0628\u0627\u0621","\u0628\u0627\u062a","\u0628\u0627\u0633\u0645","\u0628\u0627\u0646","\u0628\u062e\u064d","\u0628\u062f","\u0628\u062f\u0644\u0627","\u0628\u0631\u0633","\u0628\u0633\u0628\u0628","\u0628\u0633\u0651","\u0628\u0634\u0643\u0644","\u0628\u0636\u0639","\u0628\u0637\u0622\u0646","\u0628\u0639\u062f","\u0628\u0639\u062f\u0627","\u0628\u0639\u0636","\u0628\u063a\u062a\u0629","\u0628\u0644","\u0628\u0644\u0649","\u0628\u0646","\u0628\u0647","\u0628\u0647\u0627","\u0628\u0647\u0630\u0627","\u0628\u064a\u062f","\u0628\u064a\u0646","\u0628\u064e\u0633\u0652","\u0628\u064e\u0644\u0652\u0647\u064e","\u0629","\u062a","\u062a\u0627\u0621","\u062a\u0627\u0631\u0629","\u062a\u0627\u0633\u0639","\u062a\u0627\u0646\u0650","\u062a\u0627\u0646\u0650\u0643","\u062a\u0628\u062f\u0651\u0644","\u062a\u062c\u0627\u0647","\u062a\u062d\u062a","\u062a\u062d\u0648\u0651\u0644","\u062a\u062e\u0630","\u062a\u0631\u0643","\u062a\u0633\u0639","\u062a\u0633\u0639\u0629","\u062a\u0633\u0639\u0645\u0626\u0629","\u062a\u0633\u0639\u0645\u0627\u0626\u0629","\u062a\u0633\u0639\u0648\u0646","\u062a\u0633\u0639\u064a\u0646","\u062a\u0634\u0631\u064a\u0646","\u062a\u0639\u0633\u0627","\u062a\u0639\u0644\u064e\u0651\u0645","\u062a\u0641\u0639\u0644\u0627\u0646","\u062a\u0641\u0639\u0644\u0648\u0646","\u062a\u0641\u0639\u0644\u064a\u0646","\u062a\u0643\u0648\u0646","\u062a\u0644\u0642\u0627\u0621","\u062a\u0644\u0643","\u062a\u0645","\u062a\u0645\u0648\u0632","\u062a\u064a\u0646\u0643","\u062a\u064e\u064a\u0652\u0646\u0650","\u062a\u0650\u0647","\u062a\u0650\u064a","\u062b","\u062b\u0627\u0621","\u062b\u0627\u0644\u062b","\u062b\u0627\u0645\u0646","\u062b\u0627\u0646","\u062b\u0627\u0646\u064a","\u062b\u0644\u0627\u062b","\u062b\u0644\u0627\u062b\u0627\u0621","\u062b\u0644\u0627\u062b\u0629","\u062b\u0644\u0627\u062b\u0645\u0626\u0629","\u062b\u0644\u0627\u062b\u0645\u0627\u0626\u0629","\u062b\u0644\u0627\u062b\u0648\u0646","\u062b\u0644\u0627\u062b\u064a\u0646","\u062b\u0645","\u062b\u0645\u0627\u0646","\u062b\u0645\u0627\u0646\u0645\u0626\u0629","\u062b\u0645\u0627\u0646\u0648\u0646","\u062b\u0645\u0627\u0646\u064a","\u062b\u0645\u0627\u0646\u064a\u0629","\u062b\u0645\u0627\u0646\u064a\u0646","\u062b\u0645\u0646\u0645\u0626\u0629","\u062b\u0645\u064e\u0651","\u062b\u0645\u0651","\u062b\u0645\u0651\u0629","\u062c","\u062c\u0627\u0646\u0641\u064a","\u062c\u062f\u0627","\u062c\u0639\u0644","\u062c\u0644\u0644","\u062c\u0645\u0639\u0629","\u062c\u0645\u064a\u0639","\u062c\u0646\u064a\u0647","\u062c\u0648\u0627\u0646","\u062c\u0648\u064a\u0644\u064a\u0629","\u062c\u064a\u0631","\u062c\u064a\u0645","\u062d","\u062d\u0627\u0621","\u062d\u0627\u062f\u064a","\u062d\u0627\u0631","\u062d\u0627\u0634\u0627","\u062d\u0627\u0644\u064a\u0627","\u062d\u0627\u064a","\u062d\u0628\u0630\u0627","\u062d\u0628\u064a\u0628","\u062d\u062a\u0649","\u062d\u062c\u0627","\u062d\u062f\u064e\u062b","\u062d\u0631\u0649","\u062d\u0632\u064a\u0631\u0627\u0646","\u062d\u0633\u0628","\u062d\u0642\u0627","\u062d\u0645\u062f\u0627","\u062d\u0645\u0648","\u062d\u0645\u064c","\u062d\u0648\u0627\u0644\u0649","\u062d\u0648\u0644","\u062d\u064a\u062b","\u062d\u064a\u062b\u0645\u0627","\u062d\u064a\u0646","\u062d\u064a\u064e\u0651","\u062d\u064e\u0630\u0627\u0631\u0650","\u062e","\u062e\u0627\u0621","\u062e\u0627\u0635\u0629","\u062e\u0627\u0644","\u062e\u0627\u0645\u0633","\u062e\u0628\u064e\u0651\u0631","\u062e\u0644\u0627","\u062e\u0644\u0627\u0641\u0627","\u062e\u0644\u0627\u0644","\u062e\u0644\u0641","\u062e\u0645\u0633","\u062e\u0645\u0633\u0629","\u062e\u0645\u0633\u0645\u0626\u0629","\u062e\u0645\u0633\u0645\u0627\u0626\u0629","\u062e\u0645\u0633\u0648\u0646","\u062e\u0645\u0633\u064a\u0646","\u062e\u0645\u064a\u0633","\u062f","\u062f\u0627\u0644","\u062f\u0631\u0647\u0645","\u062f\u0631\u0649","\u062f\u0648\u0627\u0644\u064a\u0643","\u062f\u0648\u0644\u0627\u0631","\u062f\u0648\u0646","\u062f\u0648\u0646\u0643","\u062f\u064a\u0633\u0645\u0628\u0631","\u062f\u064a\u0646\u0627\u0631","\u0630","\u0630\u0627","\u0630\u0627\u062a","\u0630\u0627\u0643","\u0630\u0627\u0644","\u0630\u0627\u0646\u0643","\u0630\u0627\u0646\u0650","\u0630\u0644\u0643","\u0630\u0647\u0628","\u0630\u0648","\u0630\u064a\u062a","\u0630\u064a\u0646\u0643","\u0630\u064e\u064a\u0652\u0646\u0650","\u0630\u0650\u0647","\u0630\u0650\u064a","\u0631","\u0631\u0623\u0649","\u0631\u0627\u0621","\u0631\u0627\u0628\u0639","\u0631\u0627\u062d","\u0631\u062c\u0639","\u0631\u0632\u0642","\u0631\u0648\u064a\u062f\u0643","\u0631\u064a\u0627\u0644","\u0631\u064a\u062b","\u0631\u064f\u0628\u064e\u0651","\u0632","\u0632\u0627\u064a","\u0632\u0639\u0645","\u0632\u0648\u062f","\u0632\u064a\u0627\u0631\u0629","\u0633","\u0633\u0627\u0621","\u0633\u0627\u0628\u0639","\u0633\u0627\u062f\u0633","\u0633\u0628\u062a","\u0633\u0628\u062a\u0645\u0628\u0631","\u0633\u0628\u062d\u0627\u0646","\u0633\u0628\u0639","\u0633\u0628\u0639\u0629","\u0633\u0628\u0639\u0645\u0626\u0629","\u0633\u0628\u0639\u0645\u0627\u0626\u0629","\u0633\u0628\u0639\u0648\u0646","\u0633\u0628\u0639\u064a\u0646","\u0633\u062a","\u0633\u062a\u0629","\u0633\u062a\u0643\u0648\u0646","\u0633\u062a\u0645\u0626\u0629","\u0633\u062a\u0645\u0627\u0626\u0629","\u0633\u062a\u0648\u0646","\u0633\u062a\u064a\u0646","\u0633\u062d\u0642\u0627","\u0633\u0631\u0627","\u0633\u0631\u0639\u0627\u0646","\u0633\u0642\u0649","\u0633\u0645\u0639\u0627","\u0633\u0646\u0629","\u0633\u0646\u062a\u064a\u0645","\u0633\u0646\u0648\u0627\u062a","\u0633\u0648\u0641","\u0633\u0648\u0649","\u0633\u064a\u0646","\u0634","\u0634\u0628\u0627\u0637","\u0634\u0628\u0647","\u0634\u062a\u0627\u0646\u064e","\u0634\u062e\u0635\u0627","\u0634\u0631\u0639","\u0634\u0645\u0627\u0644","\u0634\u064a\u0643\u0644","\u0634\u064a\u0646","\u0634\u064e\u062a\u064e\u0651\u0627\u0646\u064e","\u0635","\u0635\u0627\u062f","\u0635\u0627\u0631","\u0635\u0628\u0627\u062d","\u0635\u0628\u0631","\u0635\u0628\u0631\u0627","\u0635\u062f\u0642\u0627","\u0635\u0631\u0627\u062d\u0629","\u0635\u0641\u0631","\u0635\u0647\u064d","\u0635\u0647\u0652","\u0636","\u0636\u0627\u062f","\u0636\u062d\u0648\u0629","\u0636\u062f","\u0636\u0645\u0646","\u0637","\u0637\u0627\u0621","\u0637\u0627\u0642","\u0637\u0627\u0644\u0645\u0627","\u0637\u0631\u0627","\u0637\u0641\u0642","\u0637\u064e\u0642","\u0638","\u0638\u0627\u0621","\u0638\u0644","\u0638\u0644\u0651","\u0638\u0646\u064e\u0651","\u0639","\u0639\u0627\u062f","\u0639\u0627\u0634\u0631","\u0639\u0627\u0645","\u0639\u0627\u0645\u0627","\u0639\u0627\u0645\u0629","\u0639\u062c\u0628\u0627","\u0639\u062f\u0627","\u0639\u062f\u0629","\u0639\u062f\u062f","\u0639\u062f\u0645","\u0639\u062f\u064e\u0651","\u0639\u0633\u0649","\u0639\u0634\u0631","\u0639\u0634\u0631\u0629","\u0639\u0634\u0631\u0648\u0646","\u0639\u0634\u0631\u064a\u0646","\u0639\u0644","\u0639\u0644\u0642","\u0639\u0644\u0645","\u0639\u0644\u0649","\u0639\u0644\u064a","\u0639\u0644\u064a\u0643","\u0639\u0644\u064a\u0647","\u0639\u0644\u064a\u0647\u0627","\u0639\u0644\u064b\u0651","\u0639\u0646","\u0639\u0646\u062f","\u0639\u0646\u062f\u0645\u0627","\u0639\u0646\u0647","\u0639\u0646\u0647\u0627","\u0639\u0648\u0636","\u0639\u064a\u0627\u0646\u0627","\u0639\u064a\u0646","\u0639\u064e\u062f\u064e\u0633\u0652","\u063a","\u063a\u0627\u062f\u0631","\u063a\u0627\u0644\u0628\u0627","\u063a\u062f\u0627","\u063a\u062f\u0627\u0629","\u063a\u064a\u0631","\u063a\u064a\u0646","\u0640","\u0641","\u0641\u0625\u0646","\u0641\u0627\u0621","\u0641\u0627\u0646","\u0641\u0627\u0646\u0647","\u0641\u0628\u0631\u0627\u064a\u0631","\u0641\u0631\u0627\u062f\u0649","\u0641\u0636\u0644\u0627","\u0641\u0642\u062f","\u0641\u0642\u0637","\u0641\u0643\u0627\u0646","\u0641\u0644\u0627\u0646","\u0641\u0644\u0633","\u0641\u0647\u0648","\u0641\u0648","\u0641\u0648\u0642","\u0641\u0649","\u0641\u064a","\u0641\u064a\u0641\u0631\u064a","\u0641\u064a\u0647","\u0641\u064a\u0647\u0627","\u0642","\u0642\u0627\u0637\u0628\u0629","\u0642\u0627\u0641","\u0642\u0627\u0644","\u0642\u0627\u0645","\u0642\u0628\u0644","\u0642\u062f","\u0642\u0631\u0634","\u0642\u0637\u0651","\u0642\u0644\u0645\u0627","\u0642\u0648\u0629","\u0643","\u0643\u0623\u0646","\u0643\u0623\u0646\u0651","\u0643\u0623\u064a\u0651","\u0643\u0623\u064a\u0651\u0646","\u0643\u0627\u062f","\u0643\u0627\u0641","\u0643\u0627\u0646","\u0643\u0627\u0646\u062a","\u0643\u0627\u0646\u0648\u0646","\u0643\u062b\u064a\u0631\u0627","\u0643\u0630\u0627","\u0643\u0630\u0644\u0643","\u0643\u0631\u0628","\u0643\u0633\u0627","\u0643\u0644","\u0643\u0644\u062a\u0627","\u0643\u0644\u0645","\u0643\u0644\u064e\u0651\u0627","\u0643\u0644\u0651\u0645\u0627","\u0643\u0645","\u0643\u0645\u0627","\u0643\u0646","\u0643\u0649","\u0643\u064a\u062a","\u0643\u064a\u0641","\u0643\u064a\u0641\u0645\u0627","\u0643\u0650\u062e","\u0644","\u0644\u0623\u0646","\u0644\u0627","\u0644\u0627 \u0633\u064a\u0645\u0627","\u0644\u0627\u062a","\u0644\u0627\u0632\u0627\u0644","\u0644\u0627\u0633\u064a\u0645\u0627","\u0644\u0627\u0645","\u0644\u0627\u064a\u0632\u0627\u0644","\u0644\u0628\u064a\u0643","\u0644\u062f\u0646","\u0644\u062f\u0649","\u0644\u062f\u064a","\u0644\u0630\u0644\u0643","\u0644\u0639\u0644","\u0644\u0639\u0644\u064e\u0651","\u0644\u0639\u0645\u0631","\u0644\u0642\u0627\u0621","\u0644\u0643\u0646","\u0644\u0643\u0646\u0647","\u0644\u0643\u0646\u064e\u0651","\u0644\u0644\u0627\u0645\u0645","\u0644\u0645","\u0644\u0645\u0627","\u0644\u0645\u0651\u0627","\u0644\u0646","\u0644\u0647","\u0644\u0647\u0627","\u0644\u0647\u0630\u0627","\u0644\u0647\u0645","\u0644\u0648","\u0644\u0648\u0643\u0627\u0644\u0629","\u0644\u0648\u0644\u0627","\u0644\u0648\u0645\u0627","\u0644\u064a\u062a","\u0644\u064a\u0631\u0629","\u0644\u064a\u0633","\u0644\u064a\u0633\u0628","\u0645","\u0645\u0626\u0629","\u0645\u0626\u062a\u0627\u0646","\u0645\u0627","\u0645\u0627 \u0623\u0641\u0639\u0644\u0647","\u0645\u0627 \u0627\u0646\u0641\u0643","\u0645\u0627 \u0628\u0631\u062d","\u0645\u0627\u0626\u0629","\u0645\u0627\u0627\u0646\u0641\u0643","\u0645\u0627\u0628\u0631\u062d","\u0645\u0627\u062f\u0627\u0645","\u0645\u0627\u0630\u0627","\u0645\u0627\u0631\u0633","\u0645\u0627\u0632\u0627\u0644","\u0645\u0627\u0641\u062a\u0626","\u0645\u0627\u064a","\u0645\u0627\u064a\u0632\u0627\u0644","\u0645\u0627\u064a\u0648","\u0645\u062a\u0649","\u0645\u062b\u0644","\u0645\u0630","\u0645\u0631\u0651\u0629","\u0645\u0633\u0627\u0621","\u0645\u0639","\u0645\u0639\u0627\u0630","\u0645\u0639\u0647","\u0645\u0642\u0627\u0628\u0644","\u0645\u0643\u0627\u0646\u0643\u0645","\u0645\u0643\u0627\u0646\u0643\u0645\u0627","\u0645\u0643\u0627\u0646\u0643\u0646\u0651","\u0645\u0643\u0627\u0646\u064e\u0643","\u0645\u0644\u064a\u0627\u0631","\u0645\u0644\u064a\u0645","\u0645\u0644\u064a\u0648\u0646","\u0645\u0645\u0627","\u0645\u0646","\u0645\u0646\u0630","\u0645\u0646\u0647","\u0645\u0646\u0647\u0627","\u0645\u0647","\u0645\u0647\u0645\u0627","\u0645\u064a\u0645","\u0646","\u0646\u0627","\u0646\u0628\u064e\u0651\u0627","\u0646\u062d\u0646","\u0646\u062d\u0648","\u0646\u0639\u0645","\u0646\u0641\u0633","\u0646\u0641\u0633\u0647","\u0646\u0647\u0627\u064a\u0629","\u0646\u0648\u0641\u0645\u0628\u0631","\u0646\u0648\u0646","\u0646\u064a\u0633\u0627\u0646","\u0646\u064a\u0641","\u0646\u064e\u062e\u0652","\u0646\u064e\u0651","\u0647","\u0647\u0624\u0644\u0627\u0621","\u0647\u0627","\u0647\u0627\u0621","\u0647\u0627\u0643\u064e","\u0647\u0628\u0651","\u0647\u0630\u0627","\u0647\u0630\u0647","\u0647\u0644","\u0647\u0644\u0644\u0629","\u0647\u0644\u0645","\u0647\u0644\u0651\u0627","\u0647\u0645","\u0647\u0645\u0627","\u0647\u0645\u0632\u0629","\u0647\u0646","\u0647\u0646\u0627","\u0647\u0646\u0627\u0643","\u0647\u0646\u0627\u0644\u0643","\u0647\u0648","\u0647\u064a","\u0647\u064a\u0627","\u0647\u064a\u0647\u0627\u062a","\u0647\u064a\u0651\u0627","\u0647\u064e\u0624\u0644\u0627\u0621","\u0647\u064e\u0627\u062a\u0627\u0646\u0650","\u0647\u064e\u0627\u062a\u064e\u064a\u0652\u0646\u0650","\u0647\u064e\u0627\u062a\u0650\u0647","\u0647\u064e\u0627\u062a\u0650\u064a","\u0647\u064e\u062c\u0652","\u0647\u064e\u0630\u0627","\u0647\u064e\u0630\u0627\u0646\u0650","\u0647\u064e\u0630\u064e\u064a\u0652\u0646\u0650","\u0647\u064e\u0630\u0650\u0647","\u0647\u064e\u0630\u0650\u064a","\u0647\u064e\u064a\u0652\u0647\u0627\u062a","\u0648","\u06486","\u0648\u0623\u0628\u0648","\u0648\u0623\u0646","\u0648\u0627","\u0648\u0627\u062d\u062f","\u0648\u0627\u0636\u0627\u0641","\u0648\u0627\u0636\u0627\u0641\u062a","\u0648\u0627\u0643\u062f","\u0648\u0627\u0644\u062a\u064a","\u0648\u0627\u0644\u0630\u064a","\u0648\u0627\u0646","\u0648\u0627\u0647\u0627\u064b","\u0648\u0627\u0648","\u0648\u0627\u0648\u0636\u062d","\u0648\u0628\u064a\u0646","\u0648\u062b\u064a","\u0648\u062c\u062f","\u0648\u0631\u0627\u0621\u064e\u0643","\u0648\u0631\u062f","\u0648\u0639\u0644\u0649","\u0648\u0641\u064a","\u0648\u0642\u0627\u0644","\u0648\u0642\u0627\u0644\u062a","\u0648\u0642\u062f","\u0648\u0642\u0641","\u0648\u0643\u0627\u0646","\u0648\u0643\u0627\u0646\u062a","\u0648\u0644\u0627","\u0648\u0644\u0627\u064a\u0632\u0627\u0644","\u0648\u0644\u0643\u0646","\u0648\u0644\u0645","\u0648\u0644\u0647","\u0648\u0644\u064a\u0633","\u0648\u0645\u0639","\u0648\u0645\u0646","\u0648\u0647\u0628","\u0648\u0647\u0630\u0627","\u0648\u0647\u0648","\u0648\u0647\u064a","\u0648\u064e\u064a\u0652","\u0648\u064f\u0634\u0652\u0643\u064e\u0627\u0646\u064e","\u0649","\u064a","\u064a\u0627\u0621","\u064a\u0641\u0639\u0644\u0627\u0646","\u064a\u0641\u0639\u0644\u0648\u0646","\u064a\u0643\u0648\u0646","\u064a\u0644\u064a","\u064a\u0645\u0643\u0646","\u064a\u0645\u064a\u0646","\u064a\u0646","\u064a\u0646\u0627\u064a\u0631","\u064a\u0648\u0627\u0646","\u064a\u0648\u0631\u0648","\u064a\u0648\u0644\u064a\u0648","\u064a\u0648\u0645","\u064a\u0648\u0646\u064a\u0648","\u0651\u0623\u064a\u0651\u0627\u0646"]}},9768:e=>{e.exports={stopwords:["a","aby","ahoj","aj","ale","anebo","ani","ani\u017e","ano","asi","aspo\u0148","atd","atp","az","a\u010dkoli","a\u017e","bez","beze","bl\xedzko","bohu\u017eel","brzo","bude","budem","budeme","budes","budete","bude\u0161","budou","budu","by","byl","byla","byli","bylo","byly","bys","byt","b\xfdt","b\u011bhem","chce","chceme","chcete","chce\u0161","chci","cht\xedt","cht\u011bj\xed","chut'","chuti","ci","clanek","clanku","clanky","co","coz","co\u017e","cz","daleko","dalsi","dal\u0161\xed","den","deset","design","devaten\xe1ct","dev\u011bt","dnes","do","dobr\xfd","docela","dva","dvacet","dvan\xe1ct","dv\u011b","d\xe1l","d\xe1le","d\u011bkovat","d\u011bkujeme","d\u011bkuji","email","ho","hodn\u011b","i","jak","jakmile","jako","jako\u017e","jde","je","jeden","jeden\xe1ct","jedna","jedno","jednou","jedou","jeho","jeho\u017e","jej","jeji","jejich","jej\xed","jeliko\u017e","jemu","jen","jenom","jen\u017e","jeste","jestli","jestli\u017ee","je\u0161t\u011b","je\u017e","ji","jich","jimi","jinak","jine","jin\xe9","jiz","ji\u017e","jsem","jses","jse\u0161","jsi","jsme","jsou","jste","j\xe1","j\xed","j\xedm","j\xed\u017e","j\u0161te","k","kam","ka\u017ed\xfd","kde","kdo","kdy","kdyz","kdy\u017e","ke","kolik","krom\u011b","ktera","ktere","kteri","kterou","ktery","kter\xe1","kter\xe9","kter\xfd","kte\u0159i","kte\u0159\xed","ku","kv\u016fli","ma","maj\xed","mate","me","mezi","mi","mit","mne","mnou","mn\u011b","moc","mohl","mohou","moje","moji","mo\u017en\xe1","muj","mus\xed","muze","my","m\xe1","m\xe1lo","m\xe1m","m\xe1me","m\xe1te","m\xe1\u0161","m\xe9","m\xed","m\xedt","m\u011b","m\u016fj","m\u016f\u017ee","na","nad","nade","nam","napiste","napi\u0161te","naproti","nas","nasi","na\u010de\u017e","na\u0161e","na\u0161i","ne","nebo","nebyl","nebyla","nebyli","nebyly","nech\u0165","ned\u011blaj\xed","ned\u011bl\xe1","ned\u011bl\xe1m","ned\u011bl\xe1me","ned\u011bl\xe1te","ned\u011bl\xe1\u0161","neg","nejsi","nejsou","nemaj\xed","nem\xe1me","nem\xe1te","nem\u011bl","neni","nen\xed","nesta\u010d\xed","nevad\xed","nez","ne\u017e","nic","nich","nimi","nove","novy","nov\xe9","nov\xfd","nula","n\xe1","n\xe1m","n\xe1mi","n\xe1s","n\xe1\u0161","n\xed","n\xedm","n\u011b","n\u011bco","n\u011bjak","n\u011bkde","n\u011bkdo","n\u011bmu","n\u011bmu\u017e","o","od","ode","on","ona","oni","ono","ony","osm","osmn\xe1ct","pak","patn\xe1ct","po","pod","podle","pokud","potom","pouze","pozd\u011b","po\u0159\xe1d","prave","prav\xe9","pred","pres","pri","pro","proc","prost\u011b","pros\xedm","proti","proto","protoze","proto\u017ee","pro\u010d","prvni","prvn\xed","pr\xe1ve","pta","p\u011bt","p\u0159ed","p\u0159ede","p\u0159es","p\u0159ese","p\u0159i","p\u0159i\u010dem\u017e","re","rovn\u011b","s","se","sedm","sedmn\xe1ct","si","sice","skoro","sm\xed","sm\u011bj\xed","snad","spolu","sta","sto","strana","st\xe9","sve","svych","svym","svymi","sv\xe9","sv\xfdch","sv\xfdm","sv\xfdmi","sv\u016fj","ta","tady","tak","take","takhle","taky","takze","tak\xe9","tak\u017ee","tam","tamhle","tamhleto","tamto","tato","te","tebe","tebou","ted'","tedy","tema","ten","tento","teto","ti","tim","timto","tipy","tis\xedc","tis\xedce","to","tob\u011b","tohle","toho","tohoto","tom","tomto","tomu","tomuto","toto","tro\u0161ku","tu","tuto","tvoje","tv\xe1","tv\xe9","tv\u016fj","ty","tyto","t\xe9ma","t\xe9to","t\xedm","t\xedmto","t\u011b","t\u011bm","t\u011bma","t\u011bmu","t\u0159eba","t\u0159i","t\u0159in\xe1ct","u","ur\u010dit\u011b","uz","u\u017e","v","vam","vas","vase","va\u0161e","va\u0161i","ve","vedle","ve\u010der","vice","vlastn\u011b","vsak","vy","v\xe1m","v\xe1mi","v\xe1s","v\xe1\u0161","v\xedce","v\u0161ak","v\u0161echen","v\u0161echno","v\u0161ichni","v\u016fbec","v\u017edy","z","za","zat\xedmco","za\u010d","zda","zde","ze","zpet","zpravy","zpr\xe1vy","zp\u011bt","\u010dau","\u010di","\u010dl\xe1nek","\u010dl\xe1nku","\u010dl\xe1nky","\u010dtrn\xe1ct","\u010dty\u0159i","\u0161est","\u0161estn\xe1ct","\u017ee"]}},4873:e=>{e.exports={stopwords:["ad","af","aldrig","alle","alt","altid","anden","andet","andre","at","bagved","begge","blev","blive","bliver","da","de","dem","den","denne","der","deres","det","dette","dig","din","disse","dog","du","efter","ej","eller","en","end","endnu","ene","eneste","enhver","er","et","fem","fire","fjernt","flere","fleste","for","foran","fordi","forrige","fra","f\xe5","f\xf8r","gennem","god","ham","han","hans","har","havde","have","hende","hendes","her","hos","hovfor","hun","hurtig","hvad","hvem","hver","hvilken","hvis","hvon\xe5r","hvor","hvordan","hvorfor","hvorhen","hvorn\xe5r","i","ikke","imod","ind","ingen","intet","ja","jeg","jer","jeres","jo","kan","kom","kommer","kunne","langsom","lav","lidt","lille","man","mand","mange","med","meget","mellem","men","mens","mere","mig","min","mindre","mine","mit","mod","m\xe5ske","ned","nede","nej","ni","nogen","noget","nogle","nok","nu","ny","nyt","n\xe5r","n\xe6r","n\xe6ste","n\xe6sten","og","ogs\xe5","om","op","oppe","os","otte","over","p\xe5","rask","sammen","se","seks","selv","ses","sig","sin","sine","sit","skal","skulle","som","stor","store","syv","s\xe5dan","temmelig","thi","ti","til","to","tre","ud","uden","udenfor","under","var","ved","vi","vil","ville","vor","v\xe6re","v\xe6ret"]}},7621:e=>{e.exports={stopwords:["a","ab","aber","ach","acht","achte","achten","achter","achtes","ag","alle","allein","allem","allen","aller","allerdings","alles","allgemeinen","als","also","am","an","andere","anderen","andern","anders","au","auch","auf","aus","ausser","au\xdfer","ausserdem","au\xdferdem","b","bald","bei","beide","beiden","beim","beispiel","bekannt","bereits","besonders","besser","besten","bin","bis","bisher","bist","c","d","da","dabei","dadurch","daf\xfcr","dagegen","daher","dahin","dahinter","damals","damit","danach","daneben","dank","dann","daran","darauf","daraus","darf","darfst","darin","dar\xfcber","darum","darunter","das","dasein","daselbst","dass","da\xdf","dasselbe","davon","davor","dazu","dazwischen","dein","deine","deinem","deiner","dem","dementsprechend","demgegen\xfcber","demgem\xe4ss","demgem\xe4\xdf","demselben","demzufolge","den","denen","denn","denselben","der","deren","derjenige","derjenigen","dermassen","derma\xdfen","derselbe","derselben","des","deshalb","desselben","dessen","deswegen","d.h","dich","die","diejenige","diejenigen","dies","diese","dieselbe","dieselben","diesem","diesen","dieser","dieses","dir","doch","dort","drei","drin","dritte","dritten","dritter","drittes","du","durch","durchaus","d\xfcrfen","d\xfcrft","durfte","durften","e","eben","ebenso","ehrlich","ei","ei,","eigen","eigene","eigenen","eigener","eigenes","ein","einander","eine","einem","einen","einer","eines","einige","einigen","einiger","einiges","einmal","eins","elf","en","ende","endlich","entweder","er","Ernst","erst","erste","ersten","erster","erstes","es","etwa","etwas","euch","f","fr\xfcher","f\xfcnf","f\xfcnfte","f\xfcnften","f\xfcnfter","f\xfcnftes","f\xfcr","g","gab","ganz","ganze","ganzen","ganzer","ganzes","gar","gedurft","gegen","gegen\xfcber","gehabt","gehen","geht","gekannt","gekonnt","gemacht","gemocht","gemusst","genug","gerade","gern","gesagt","geschweige","gewesen","gewollt","geworden","gibt","ging","gleich","gott","gross","gro\xdf","grosse","gro\xdfe","grossen","gro\xdfen","grosser","gro\xdfer","grosses","gro\xdfes","gut","gute","guter","gutes","h","habe","haben","habt","hast","hat","hatte","h\xe4tte","hatten","h\xe4tten","heisst","her","heute","hier","hin","hinter","hoch","i","ich","ihm","ihn","ihnen","ihr","ihre","ihrem","ihren","ihrer","ihres","im","immer","in","indem","infolgedessen","ins","irgend","ist","j","ja","jahr","jahre","jahren","je","jede","jedem","jeden","jeder","jedermann","jedermanns","jedoch","jemand","jemandem","jemanden","jene","jenem","jenen","jener","jenes","jetzt","k","kam","kann","kannst","kaum","kein","keine","keinem","keinen","keiner","kleine","kleinen","kleiner","kleines","kommen","kommt","k\xf6nnen","k\xf6nnt","konnte","k\xf6nnte","konnten","kurz","l","lang","lange","leicht","leide","lieber","los","m","machen","macht","machte","mag","magst","mahn","man","manche","manchem","manchen","mancher","manches","mann","mehr","mein","meine","meinem","meinen","meiner","meines","mensch","menschen","mich","mir","mit","mittel","mochte","m\xf6chte","mochten","m\xf6gen","m\xf6glich","m\xf6gt","morgen","muss","mu\xdf","m\xfcssen","musst","m\xfcsst","musste","mussten","n","na","nach","nachdem","nahm","nat\xfcrlich","neben","nein","neue","neuen","neun","neunte","neunten","neunter","neuntes","nicht","nichts","nie","niemand","niemandem","niemanden","noch","nun","nur","o","ob","oben","oder","offen","oft","ohne","Ordnung","p","q","r","recht","rechte","rechten","rechter","rechtes","richtig","rund","s","sa","sache","sagt","sagte","sah","satt","schlecht","Schluss","schon","sechs","sechste","sechsten","sechster","sechstes","sehr","sei","seid","seien","sein","seine","seinem","seinen","seiner","seines","seit","seitdem","selbst","sich","sie","sieben","siebente","siebenten","siebenter","siebentes","sind","so","solang","solche","solchem","solchen","solcher","solches","soll","sollen","sollte","sollten","sondern","sonst","sowie","sp\xe4ter","statt","t","tag","tage","tagen","tat","teil","tel","tritt","trotzdem","tun","u","\xfcber","\xfcberhaupt","\xfcbrigens","uhr","um","und","und?","uns","unser","unsere","unserer","unter","v","vergangenen","viel","viele","vielem","vielen","vielleicht","vier","vierte","vierten","vierter","viertes","vom","von","vor","w","wahr?","w\xe4hrend","w\xe4hrenddem","w\xe4hrenddessen","wann","war","w\xe4re","waren","wart","warum","was","wegen","weil","weit","weiter","weitere","weiteren","weiteres","welche","welchem","welchen","welcher","welches","wem","wen","wenig","wenige","weniger","weniges","wenigstens","wenn","wer","werde","werden","werdet","wessen","wie","wieder","will","willst","wir","wird","wirklich","wirst","wo","wohl","wollen","wollt","wollte","wollten","worden","wurde","w\xfcrde","wurden","w\xfcrden","x","y","z","z.b","zehn","zehnte","zehnten","zehnter","zehntes","zeit","zu","zuerst","zugleich","zum","zun\xe4chst","zur","zur\xfcck","zusammen","zwanzig","zwar","zwei","zweite","zweiten","zweiter","zweites","zwischen","zw\xf6lf","\ufeffaber","euer","eure","hattest","hattet","jedes","mu\xdft","m\xfc\xdft","sollst","sollt","soweit","weshalb","wieso","woher","wohin"]}},7613:e=>{e.exports={stopwords:["a","a's","able","about","above","according","accordingly","across","actually","after","afterwards","again","against","ain't","all","allow","allows","almost","alone","along","already","also","although","always","am","among","amongst","an","and","another","any","anybody","anyhow","anyone","anything","anyway","anyways","anywhere","apart","appear","appreciate","appropriate","are","aren't","around","as","aside","ask","asking","associated","at","available","away","awfully","b","be","became","because","become","becomes","becoming","been","before","beforehand","behind","being","believe","below","beside","besides","best","better","between","beyond","both","brief","but","by","c","c'mon","c's","came","can","can't","cannot","cant","cause","causes","certain","certainly","changes","clearly","co","com","come","comes","concerning","consequently","consider","considering","contain","containing","contains","corresponding","could","couldn't","course","currently","d","definitely","described","despite","did","didn't","different","do","does","doesn't","doing","don't","done","down","downwards","during","e","each","edu","eg","eight","either","else","elsewhere","enough","entirely","especially","et","etc","even","ever","every","everybody","everyone","everything","everywhere","ex","exactly","example","except","f","far","few","fifth","first","five","followed","following","follows","for","former","formerly","forth","four","from","further","furthermore","g","get","gets","getting","given","gives","go","goes","going","gone","got","gotten","greetings","h","had","hadn't","happens","hardly","has","hasn't","have","haven't","having","he","he's","hello","help","hence","her","here","here's","hereafter","hereby","herein","hereupon","hers","herself","hi","him","himself","his","hither","hopefully","how","howbeit","however","i","i'd","i'll","i'm","i've","ie","if","ignored","immediate","in","inasmuch","inc","indeed","indicate","indicated","indicates","inner","insofar","instead","into","inward","is","isn't","it","it'd","it'll","it's","its","itself","j","just","k","keep","keeps","kept","know","knows","known","l","last","lately","later","latter","latterly","least","less","lest","let","let's","like","liked","likely","little","look","looking","looks","ltd","m","mainly","many","may","maybe","me","mean","meanwhile","merely","might","more","moreover","most","mostly","much","must","my","myself","n","name","namely","nd","near","nearly","necessary","need","needs","neither","never","nevertheless","new","next","nine","no","nobody","non","none","noone","nor","normally","not","nothing","novel","now","nowhere","o","obviously","of","off","often","oh","ok","okay","old","on","once","one","ones","only","onto","or","other","others","otherwise","ought","our","ours","ourselves","out","outside","over","overall","own","p","particular","particularly","per","perhaps","placed","please","plus","possible","presumably","probably","provides","q","que","quite","qv","r","rather","rd","re","really","reasonably","regarding","regardless","regards","relatively","respectively","right","s","said","same","saw","say","saying","says","second","secondly","see","seeing","seem","seemed","seeming","seems","seen","self","selves","sensible","sent","serious","seriously","seven","several","shall","she","should","shouldn't","since","six","so","some","somebody","somehow","someone","something","sometime","sometimes","somewhat","somewhere","soon","sorry","specified","specify","specifying","still","sub","such","sup","sure","t","t's","take","taken","tell","tends","th","than","thank","thanks","thanx","that","that's","thats","the","their","theirs","them","themselves","then","thence","there","there's","thereafter","thereby","therefore","therein","theres","thereupon","these","they","they'd","they'll","they're","they've","think","third","this","thorough","thoroughly","those","though","three","through","throughout","thru","thus","to","together","too","took","toward","towards","tried","tries","truly","try","trying","twice","two","u","un","under","unfortunately","unless","unlikely","until","unto","up","upon","us","use","used","useful","uses","using","usually","uucp","v","value","various","very","via","viz","vs","w","want","wants","was","wasn't","way","we","we'd","we'll","we're","we've","welcome","well","went","were","weren't","what","what's","whatever","when","whence","whenever","where","where's","whereafter","whereas","whereby","wherein","whereupon","wherever","whether","which","while","whither","who","who's","whoever","whole","whom","whose","why","will","willing","wish","with","within","without","won't","wonder","would","would","wouldn't","x","y","yes","yet","you","you'd","you'll","you're","you've","your","yours","yourself","yourselves","z","zero"]}},4474:e=>{e.exports={stopwords:["0","1","2","3","4","5","6","7","8","9","_","a","actualmente","acuerdo","adelante","ademas","adem\xe1s","adrede","afirm\xf3","agreg\xf3","ahi","ahora","ah\xed","al","algo","alguna","algunas","alguno","algunos","alg\xfan","alli","all\xed","alrededor","ambos","ampleamos","antano","anta\xf1o","ante","anterior","antes","apenas","aproximadamente","aquel","aquella","aquellas","aquello","aquellos","aqui","aqu\xe9l","aqu\xe9lla","aqu\xe9llas","aqu\xe9llos","aqu\xed","arriba","arribaabajo","asegur\xf3","asi","as\xed","atras","aun","aunque","ayer","a\xf1adi\xf3","a\xfan","b","bajo","bastante","bien","breve","buen","buena","buenas","bueno","buenos","c","cada","casi","cerca","cierta","ciertas","cierto","ciertos","cinco","claro","coment\xf3","como","con","conmigo","conocer","conseguimos","conseguir","considera","consider\xf3","consigo","consigue","consiguen","consigues","contigo","contra","cosas","creo","cual","cuales","cualquier","cuando","cuanta","cuantas","cuanto","cuantos","cuatro","cuenta","cu\xe1l","cu\xe1les","cu\xe1ndo","cu\xe1nta","cu\xe1ntas","cu\xe1nto","cu\xe1ntos","c\xf3mo","d","da","dado","dan","dar","de","debajo","debe","deben","debido","decir","dej\xf3","del","delante","demasiado","dem\xe1s","dentro","deprisa","desde","despacio","despues","despu\xe9s","detras","detr\xe1s","dia","dias","dice","dicen","dicho","dieron","diferente","diferentes","dijeron","dijo","dio","donde","dos","durante","d\xeda","d\xedas","d\xf3nde","e","ejemplo","el","ella","ellas","ello","ellos","embargo","empleais","emplean","emplear","empleas","empleo","en","encima","encuentra","enfrente","enseguida","entonces","entre","era","erais","eramos","eran","eras","eres","es","esa","esas","ese","eso","esos","esta","estaba","estabais","estaban","estabas","estad","estada","estadas","estado","estados","estais","estamos","estan","estando","estar","estaremos","estar\xe1","estar\xe1n","estar\xe1s","estar\xe9","estar\xe9is","estar\xeda","estar\xedais","estar\xedamos","estar\xedan","estar\xedas","estas","este","estemos","esto","estos","estoy","estuve","estuviera","estuvierais","estuvieran","estuvieras","estuvieron","estuviese","estuvieseis","estuviesen","estuvieses","estuvimos","estuviste","estuvisteis","estuvi\xe9ramos","estuvi\xe9semos","estuvo","est\xe1","est\xe1bamos","est\xe1is","est\xe1n","est\xe1s","est\xe9","est\xe9is","est\xe9n","est\xe9s","ex","excepto","existe","existen","explic\xf3","expres\xf3","f","fin","final","fue","fuera","fuerais","fueran","fueras","fueron","fuese","fueseis","fuesen","fueses","fui","fuimos","fuiste","fuisteis","fu\xe9ramos","fu\xe9semos","g","general","gran","grandes","gueno","h","ha","haber","habia","habida","habidas","habido","habidos","habiendo","habla","hablan","habremos","habr\xe1","habr\xe1n","habr\xe1s","habr\xe9","habr\xe9is","habr\xeda","habr\xedais","habr\xedamos","habr\xedan","habr\xedas","hab\xe9is","hab\xeda","hab\xedais","hab\xedamos","hab\xedan","hab\xedas","hace","haceis","hacemos","hacen","hacer","hacerlo","haces","hacia","haciendo","hago","han","has","hasta","hay","haya","hayamos","hayan","hayas","hay\xe1is","he","hecho","hemos","hicieron","hizo","horas","hoy","hube","hubiera","hubierais","hubieran","hubieras","hubieron","hubiese","hubieseis","hubiesen","hubieses","hubimos","hubiste","hubisteis","hubi\xe9ramos","hubi\xe9semos","hubo","i","igual","incluso","indic\xf3","informo","inform\xf3","intenta","intentais","intentamos","intentan","intentar","intentas","intento","ir","j","junto","k","l","la","lado","largo","las","le","lejos","les","lleg\xf3","lleva","llevar","lo","los","luego","lugar","m","mal","manera","manifest\xf3","mas","mayor","me","mediante","medio","mejor","mencion\xf3","menos","menudo","mi","mia","mias","mientras","mio","mios","mis","misma","mismas","mismo","mismos","modo","momento","mucha","muchas","mucho","muchos","muy","m\xe1s","m\xed","m\xeda","m\xedas","m\xedo","m\xedos","n","nada","nadie","ni","ninguna","ningunas","ninguno","ningunos","ning\xfan","no","nos","nosotras","nosotros","nuestra","nuestras","nuestro","nuestros","nueva","nuevas","nuevo","nuevos","nunca","o","ocho","os","otra","otras","otro","otros","p","pais","para","parece","parte","partir","pasada","pasado","pa\xecs","peor","pero","pesar","poca","pocas","poco","pocos","podeis","podemos","poder","podria","podr\xeda","podriais","podriamos","podrian","podrias","podr\xe1","podr\xe1n","podr\xeda","podr\xedan","poner","por","por qu\xe9","porque","posible","primer","primera","primero","primeros","principalmente","pronto","propia","propias","propio","propios","proximo","pr\xf3ximo","pr\xf3ximos","pudo","pueda","puede","pueden","puedo","pues","q","qeu","que","qued\xf3","queremos","quien","quienes","quiere","quiza","quizas","quiz\xe1","quiz\xe1s","qui\xe9n","qui\xe9nes","qu\xe9","r","raras","realizado","realizar","realiz\xf3","repente","respecto","s","sabe","sabeis","sabemos","saben","saber","sabes","sal","salvo","se","sea","seamos","sean","seas","segun","segunda","segundo","seg\xfan","seis","ser","sera","seremos","ser\xe1","ser\xe1n","ser\xe1s","ser\xe9","ser\xe9is","ser\xeda","ser\xedais","ser\xedamos","ser\xedan","ser\xedas","se\xe1is","se\xf1al\xf3","si","sido","siempre","siendo","siete","sigue","siguiente","sin","sino","sobre","sois","sola","solamente","solas","solo","solos","somos","son","soy","soyos","su","supuesto","sus","suya","suyas","suyo","suyos","s\xe9","s\xed","s\xf3lo","t","tal","tambien","tambi\xe9n","tampoco","tan","tanto","tarde","te","temprano","tendremos","tendr\xe1","tendr\xe1n","tendr\xe1s","tendr\xe9","tendr\xe9is","tendr\xeda","tendr\xedais","tendr\xedamos","tendr\xedan","tendr\xedas","tened","teneis","tenemos","tener","tenga","tengamos","tengan","tengas","tengo","teng\xe1is","tenida","tenidas","tenido","tenidos","teniendo","ten\xe9is","ten\xeda","ten\xedais","ten\xedamos","ten\xedan","ten\xedas","tercera","ti","tiempo","tiene","tienen","tienes","toda","todas","todavia","todav\xeda","todo","todos","total","trabaja","trabajais","trabajamos","trabajan","trabajar","trabajas","trabajo","tras","trata","trav\xe9s","tres","tu","tus","tuve","tuviera","tuvierais","tuvieran","tuvieras","tuvieron","tuviese","tuvieseis","tuviesen","tuvieses","tuvimos","tuviste","tuvisteis","tuvi\xe9ramos","tuvi\xe9semos","tuvo","tuya","tuyas","tuyo","tuyos","t\xfa","u","ultimo","un","una","unas","uno","unos","usa","usais","usamos","usan","usar","usas","uso","usted","ustedes","v","va","vais","valor","vamos","van","varias","varios","vaya","veces","ver","verdad","verdadera","verdadero","vez","vosotras","vosotros","voy","vuestra","vuestras","vuestro","vuestros","w","x","y","ya","yo","z","\xe9l","\xe9ramos","\xe9sa","\xe9sas","\xe9se","\xe9sos","\xe9sta","\xe9stas","\xe9ste","\xe9stos","\xfaltima","\xfaltimas","\xfaltimo","\xfaltimos"]}},7007:e=>{e.exports={stopwords:["1","2","3","4","5","6","7","8","9","0","\u06f1","\u06f2","\u06f3","\u06f4","\u06f5","\u06f6","\u06f7","\u06f8","\u06f9","\u06f0","\u060c","!",'"',"'","`","\xbb","\xab","{","}","(",")","%","\u062f\u0631\u0635\u062f","\u0641\u06cc\u0635\u062f","-",";","\u061b","\u061b","\u064b","\u064c","\u064d","","\u064e","\u064f","\u0650","\u0651","]","[","@","#","$","%","&","*","\u0627\u062a","\u0627\u062a\u0641\u0627\u0642\u0627","\u0627\u062c\u0631\u0627\u0633\u062a","\u0627\u062d\u062a\u0645\u0627\u0644\u0627","\u0627\u062d\u064a\u0627\u0646\u0627","\u0627\u062e","\u0627\u062e\u062a\u0635\u0627\u0631\u0627","\u0627\u062e\u0631","\u0627\u062e\u0631\u0647\u0627","\u0627\u062e\u0647","\u0627\u062e\u064a\u0631\u0627","\u0627\u062f\u0645\u0647\u0627\u0633\u062a","\u0627\u0631\u0627\u0633\u062a\u0647","\u0627\u0631\u0627\u0645","\u0627\u0631\u0632\u0627\u0646\u062a\u0631","\u0627\u0631\u0632\u0648\u0645\u0646\u062f\u0627\u0646\u0647","\u0627\u0631\u0646\u0647","\u0627\u0631\u0647","\u0627\u0632","\u0627\u0632\u0627\u062f\u0627\u0646\u0647","\u0627\u0632\u0627\u0646","\u0627\u0632\u0627\u0646\u062c\u0627","\u0627\u0632\u0627\u0646\u062c\u0627\u0643\u0647","\u0627\u0632\u0627\u064a\u0646","\u0627\u0632\u0627\u064a\u0646\u0631\u0648","\u0627\u0632\u0628\u0647","\u0627\u0632\u062c\u0645\u0644\u0647","\u0627\u0632\u0631\u0648\u064a","\u0627\u0632\u0633\u0631","\u0627\u0632\u0634","\u0627\u0632\u0642\u0628\u064a\u0644","\u0627\u0632\u0644\u062d\u0627\u0638","\u0627\u0632\u0646\u0638\u0631","\u0627\u0632\u0648","\u0627\u0632\u064a\u0643","\u0627\u0633\u0627\u0633","\u0627\u0633\u0627\u0633\u0627","\u0627\u0633\u0627\u0646","\u0627\u0633\u0627\u0646\u062a\u0631","\u0627\u0633\u0627\u0646\u064a","\u0627\u0633\u062a","\u0627\u0633\u062a\u0648\u0627\u0631\u062a\u0631","\u0627\u0633\u064a\u0628\u067e\u0630\u064a\u0631\u0646\u062f","\u0627\u0634","\u0627\u0634\u0627\u0646","\u0627\u0634\u062a\u0628\u0627\u0647\u0627","\u0627\u0634\u0641\u062a\u0647","\u0627\u0634\u0643\u0627\u0631","\u0627\u0634\u0643\u0627\u0631\u0627","\u0627\u0634\u0643\u0627\u0631\u062a\u0631","\u0627\u0634\u0646\u0627\u064a\u0646\u062f","\u0627\u0635\u0637\u0644\u0627\u062d\u0627","\u0627\u0635\u0644\u0627","\u0627\u0635\u0648\u0644\u0627","\u0627\u0637\u0644\u0627\u0639\u0646\u062f","\u0627\u063a\u0644\u0628","\u0627\u0641\u0632\u0648\u062f\u0646","\u0627\u0641\u0633\u0648\u0633","\u0627\u0641\u0642\u064a","\u0627\u0642\u0644","\u0627\u0642\u0644\u0627","\u0627\u0642\u0644\u064a\u062a","\u0627\u0643\u062a\u0633\u0627\u0628\u0627","\u0627\u0643\u062b\u0631","\u0627\u0643\u062b\u0631\u0627","\u0627\u0643\u062b\u0631\u064a\u062a","\u0627\u0643\u0646\u0648\u0646","\u0627\u0644\u0627","\u0627\u0644\u0627\u0633\u0641","\u0627\u0644\u0627\u0646","\u0627\u0644\u0628\u062a\u0647","\u0627\u0644\u0632\u0627\u0645\u0627","\u0627\u0644\u0638\u0627\u0647\u0631","\u0627\u0644\u0645\u0642\u062f\u0648\u0631","\u0627\u0644\u0647\u064a","\u0627\u0644\u064a","\u0627\u0645","\u0627\u0645\u0627","\u0627\u0645\u0627\u0646","\u0627\u0645\u0631\u0627\u0646\u0647","\u0627\u0645\u0631\u0648\u0632","\u0627\u0645\u0631\u0648\u0632\u0647","\u0627\u0645\u0633\u0627\u0644","\u0627\u0645\u0634\u0628","\u0627\u0645\u064a\u062f\u0648\u0627\u0631\u0645","\u0627\u0645\u064a\u062f\u0648\u0627\u0631\u0646\u062f","\u0627\u0645\u064a\u062f\u0648\u0627\u0631\u064a\u0645","\u0627\u0646","\u0627\u0646\u0627\u0646","\u0627\u0646\u0627\u0646\u064a","\u0627\u0646\u062c\u0627","\u0627\u0646\u062f","\u0627\u0646\u062f\u0643","\u0627\u0646\u062f\u0643\u064a","\u0627\u0646\u0631\u0627","\u0627\u0646\u0634\u0627\u0627\u0644\u0644\u0647","\u0627\u0646\u0642\u062f\u0631","\u0627\u0646\u0643\u0633","\u0627\u0646\u0643\u0647","\u0627\u0646\u0645","\u0627\u0646\u0647\u0627","\u0627\u0646\u0647\u0627\u0633\u062a","\u0627\u0646\u0648\u0642\u062a","\u0627\u0646\u0686\u0646\u0627\u0646","\u0627\u0646\u0686\u0647","\u0627\u0646\u06af\u0627\u0631","\u0627\u0646\u06af\u0627\u0647","\u0627\u0646\u06af\u0647","\u0627\u0646\u06af\u0648\u0646\u0647","\u0627\u0647\u0627\u0646","\u0627\u0647\u0627\u064a","\u0627\u0648","\u0627\u0648\u0631\u062f","\u0627\u0648\u0631\u062f\u0646","\u0627\u0648\u0633\u062a","\u0627\u0648\u0644","\u0627\u0648\u0644\u0627","\u0627\u0648\u0644\u0634","\u0627\u0648\u0646","\u0627\u0648\u0646\u0647\u0645\u0647","\u0627\u0648\u0647","\u0627\u0648\u064a\u064a","\u0627\u064a","\u0627\u064a\u0627","\u0627\u064a\u0634\u0627\u0646","\u0627\u064a\u0645","\u0627\u064a\u0646","\u0627\u064a\u0646\u0627\u0646","\u0627\u064a\u0646\u062c\u0627","\u0627\u064a\u0646\u062c\u0627\u0633\u062a","\u0627\u064a\u0646\u062c\u0648\u0631\u064a","\u0627\u064a\u0646\u0631\u0648","\u0627\u064a\u0646\u0633\u062a","\u0627\u064a\u0646\u0637\u0648\u0631","\u0627\u064a\u0646\u0642\u062f\u0631","\u0627\u064a\u0646\u0643","\u0627\u064a\u0646\u0643\u0647","\u0627\u064a\u0646\u0647\u0627","\u0627\u064a\u0646\u0647\u0627\u0633\u062a","\u0627\u064a\u0646\u0647\u0645\u0647","\u0627\u064a\u0646\u0648","\u0627\u064a\u0646\u0686\u0646\u064a\u0646","\u0627\u064a\u0646\u06af\u0648\u0646\u0647","\u0627\u06af\u0627\u0647\u0627\u0646\u0647","\u0627\u06af\u0631","\u0627\u06af\u0631\u0646\u0647","\u0627\u06af\u0631\u0686\u0647","\u0627\u06af\u0647","\u0628","\u0628\u0627","\u0628\u0627\u0627\u0637\u0645\u064a\u0646\u0627\u0646","\u0628\u0627\u0627\u0646\u0643\u0647","\u0628\u0627\u0627\u064a\u0646","\u0628\u0627\u0627\u064a\u0646\u0643\u0647","\u0628\u0627\u0631","\u0628\u0627\u0631\u0647","\u0628\u0627\u0631\u0647\u0627","\u0628\u0627\u0631\u0647\u0627\u0648\u0628\u0627\u0631\u0647\u0627","\u0628\u0627\u0632","\u0628\u0627\u0632\u0627\u0646\u062f\u064a\u0634\u0627\u0646\u0647","\u0628\u0627\u0632\u0647\u0645","\u0628\u0627\u0632\u064a\u06af\u0648\u0634\u0627\u0646\u0647","\u0628\u0627\u0633\u062a\u062b\u0646\u0627\u064a","\u0628\u0627\u0634","\u0628\u0627\u0634\u062f","\u0628\u0627\u0639\u0644\u0627\u0642\u0647","\u0628\u0627\u0644\u0627","\u0628\u0627\u0644\u0627\u062a\u0631","\u0628\u0627\u0644\u0627\u062e\u0631\u0647","\u0628\u0627\u0644\u0627\u062e\u0635","\u0628\u0627\u0644\u0627\u0633\u062a","\u0628\u0627\u0644\u0627\u064a","\u0628\u0627\u0644\u0636\u0631\u0648\u0631","\u0628\u0627\u0644\u0637\u0628\u0639","\u0628\u0627\u0644\u0639\u0643\u0633","\u0628\u0627\u0644\u0642\u0648\u0647","\u0628\u0627\u0644\u0644\u0647","\u0628\u0627\u0644\u0646\u062a\u064a\u062c\u0647","\u0628\u0627\u0644\u0646\u0633\u0628\u0647","\u0628\u0627\u0647\u0645","\u0628\u0627\u0648\u062c\u0648\u062f","\u0628\u0627\u0648\u062c\u0648\u062f\u0627\u0646\u0643\u0647","\u0628\u0627\u0648\u062c\u0648\u062f\u0627\u064a\u0646\u0643\u0647","\u0628\u0627\u0648\u062c\u0648\u062f\u064a\u0643\u0647","\u0628\u0627\u0648\u0631\u0646\u062f","\u0628\u0627\u064a\u062f","\u0628\u0627\u064a\u0633\u062a\u064a","\u0628\u062a\u0627\u0632\u06af\u064a","\u0628\u062a\u062f\u0631\u064a\u062c","\u0628\u062a\u0645\u0627\u0645\u064a","\u0628\u062c\u0627","\u0628\u062c\u0627\u064a","\u0628\u062c\u0632","\u0628\u062e\u0627\u0637\u0631","\u0628\u062e\u0627\u0637\u0631\u0627\u064a\u0646\u0643\u0647","\u0628\u062e\u0631\u062f\u0627\u0646\u0647","\u0628\u062e\u0634\u0647","\u0628\u062e\u0635\u0648\u0635","\u0628\u062e\u0648\u0628\u064a","\u0628\u062f","\u0628\u062f\u0627\u0646","\u0628\u062f\u0627\u0646\u062c\u0627","\u0628\u062f\u0627\u0646\u0647\u0627","\u0628\u062f\u0628\u064a\u0646\u0627\u0646\u0647","\u0628\u062f\u062e\u0648\u0627\u0647\u0627\u0646\u0647","\u0628\u062f\u0631\u0633\u062a\u064a","\u0628\u062f\u0631\u0634\u062a\u064a","\u0628\u062f\u0644\u062e\u0648\u0627\u0647","\u0628\u062f\u0648\u0646","\u0628\u062f\u064a\u0646","\u0628\u062f\u064a\u0646\u062c\u0627","\u0628\u062f\u064a\u0646\u0633\u0627\u0646","\u0628\u0631","\u0628\u0631\u0627","\u0628\u0631\u0627\u062b\u0631","\u0628\u0631\u0627\u0633\u0627\u0633","\u0628\u0631\u0627\u0633\u062a\u064a","\u0628\u0631\u0627\u0646","\u0628\u0631\u0627\u0646\u0646\u062f","\u0628\u0631\u0627\u0646\u0647\u0627\u0633\u062a","\u0628\u0631\u0627\u064a","\u0628\u0631\u0627\u064a\u062a","\u0628\u0631\u0627\u064a\u0634","\u0628\u0631\u0627\u064a\u0634\u0627\u0646","\u0628\u0631\u0627\u064a\u0645","\u0628\u0631\u0627\u064a\u0645\u0627\u0646","\u0628\u0631\u062d\u0633\u0628","\u0628\u0631\u062e\u0644\u0627\u0641","\u0628\u0631\u062e\u0648\u0631\u062f\u0627\u0631\u0646\u062f","\u0628\u0631\u062e\u064a","\u0628\u0631\u062f\u0627\u0634\u062a\u0646","\u0628\u0631\u062f\u0646","\u0628\u0631\u0631\u0648\u064a","\u0628\u0631\u0639\u0643\u0633","\u0628\u0631\u063a\u0645","\u0628\u0631\u0645\u064a","\u0628\u0631\u0646\u0645\u064a","\u0628\u0631\u0648","\u0628\u0631\u0648\u0634\u0646\u064a","\u0628\u0631\u067e\u0627","\u0628\u0632\u0639\u0645","\u0628\u0632\u0648\u062f\u064a","\u0628\u0633","\u0628\u0633\u0627","\u0628\u0633\u0627\u062f\u06af\u064a","\u0628\u0633\u062a\u0647","\u0628\u0633\u062e\u062a\u064a","\u0628\u0633\u0631\u0639\u062a","\u0628\u0633\u0647\u0648\u0644\u062a","\u0628\u0633\u0648\u064a","\u0628\u0633\u064a","\u0628\u0633\u064a\u0627\u0631","\u0628\u0633\u064a\u0627\u0631\u064a","\u0628\u0634\u0627\u0646","\u0628\u0634\u062f\u062a","\u0628\u0635\u0648\u0631\u062a","\u0628\u0637\u0628\u0639","\u0628\u0637\u0648\u0631","\u0628\u0637\u0648\u0631\u0643\u0644\u064a","\u0628\u0637\u0648\u0631\u064a","\u0628\u0637\u0648\u0631\u064a\u0643\u0647","\u0628\u0639\u062f","\u0628\u0639\u062f\u0627","\u0628\u0639\u062f\u0627\u0632","\u0628\u0639\u062f\u0627\u0632\u0627\u0646","\u0628\u0639\u062f\u0627\u0632\u0627\u064a\u0646","\u0628\u0639\u062f\u0627\u0632\u0638\u0647\u0631","\u0628\u0639\u062f\u0647\u0627","\u0628\u0639\u062f\u064a","\u0628\u0639\u0636\u064a","\u0628\u0639\u0636\u064a\u0634\u0627\u0646","\u0628\u0639\u0636\u064a\u0647\u0627","\u0628\u0639\u0636\u064a\u0647\u0627\u0634\u0627\u0646","\u0628\u0639\u0636\u064a\u0647\u0627\u064a\u0634\u0627\u0646","\u0628\u0639\u0644\u0627\u0648\u0647","\u0628\u0639\u064a\u062f","\u0628\u0641\u0647\u0645\u064a","\u0628\u0642\u062f\u0631\u064a","\u0628\u0643\u0627\u0631","\u0628\u0643\u0631\u0627\u062a","\u0628\u0644\u0627\u062f\u0631\u0646\u06af","\u0628\u0644\u0627\u0641\u0627\u0635\u0644\u0647","\u0628\u0644\u0643\u0647","\u0628\u0644\u0647","\u0628\u0645\u0631\u0627\u062a\u0628","\u0628\u0645\u0648\u062c\u0628","\u0628\u0645\u0648\u0642\u0639","\u0628\u0646\u0627\u0628\u0631\u0627\u064a\u0646","\u0628\u0646\u0627\u0628\u0647","\u0628\u0646\u0627\u0686\u0627\u0631","\u0628\u0646\u062f\u0631\u062a","\u0628\u0647","\u0628\u0647\u062a","\u0628\u0647\u062a\u0631","\u0628\u0647\u0631\u062d\u0627\u0644","\u0628\u0647\u0634","\u0628\u0647\u064a\u0686","\u0628\u0648\u062f","\u0628\u0648\u062f\u0646","\u0628\u0648\u0636\u0648\u062d","\u0628\u0648\u064a\u0698\u0647","\u0628\u064a","\u0628\u064a\u0631\u0648\u0646","\u0628\u064a\u0634","\u0628\u064a\u0634\u062a\u0631","\u0628\u064a\u0646","\u0628\u064a\u0646\u0627\u0628\u064a\u0646","\u0628\u064a\u0647\u0648\u062f\u0647","\u0628\u064a\u06af\u0645\u0627\u0646","\u0628\u067e\u0627","\u0628\u06af\u0631\u0645\u064a","\u062a","\u062a\u0627","\u062a\u0627\u0627\u0646\u062c\u0627","\u062a\u0627\u0627\u0646\u062c\u0627\u0643\u0647","\u062a\u0627\u0627\u0646\u0643\u0647","\u062a\u0627\u0627\u064a\u0646\u062c\u0627","\u062a\u0627\u0627\u064a\u0646\u0643\u0647","\u062a\u0627\u0628\u0647","\u062a\u0627\u062c\u0627\u064a\u064a\u0643\u0647","\u062a\u0627\u062d\u062f\u0648\u062f\u064a","\u062a\u0627\u062d\u062f\u064a","\u062a\u0627\u0632\u0647","\u062a\u0627\u0632\u06af\u064a","\u062a\u0627\u0643\u0646\u0648\u0646","\u062a\u0627\u0648\u0642\u062a\u064a","\u062a\u0627\u0648\u0642\u062a\u064a\u0643\u0647","\u062a\u062d\u062a","\u062a\u062f\u0631\u064a\u062c","\u062a\u062f\u0631\u064a\u062c\u0627","\u062a\u062f\u0631\u064a\u062c\u064a","\u062a\u0631","\u062a\u0631\u062a\u064a\u0628","\u062a\u0631\u062c\u064a\u062d\u0627","\u062a\u0631\u062f\u064a\u062f","\u062a\u0631\u0646\u062f","\u062a\u0631\u064a","\u062a\u0631\u064a\u0646","\u062a\u0635\u0631\u064a\u062d\u0627","\u062a\u0639\u062f\u0627\u062f\u064a","\u062a\u0639\u0645\u062f\u0627","\u062a\u0641\u0627\u0648\u062a","\u062a\u0641\u0627\u0648\u062a\u0646\u062f","\u062a\u0641\u0646\u0646\u064a","\u062a\u0642\u0631\u064a\u0628\u0627","\u062a\u0643","\u062a\u0644\u0648\u064a\u062d\u0627","\u062a\u0645\u0627\u0645","\u062a\u0645\u0627\u0645\u0627","\u062a\u0645\u0627\u0645\u0634\u0627\u0646","\u062a\u0645\u0627\u0645\u064a","\u062a\u0646\u062f","\u062a\u0646\u0647\u0627","\u062a\u0646\u0647\u0627\u064a\u064a","\u062a\u0646\u06af\u0627\u062a\u0646\u06af","\u062a\u0648","\u062a\u0648\u0633\u0637","\u062a\u0648\u0648\u0645\u0627","\u062a\u0648\u064a","\u062a\u0648\u064a\u064a","\u062b","\u062b\u0627\u0644\u062b\u0627","\u062b\u0627\u0646\u064a","\u062b\u0627\u0646\u064a\u0627","\u062c","\u062c\u0627","\u062c\u0627\u064a","\u062c\u0627\u064a\u064a","\u062c\u0628\u0631\u06af\u0631\u0627\u064a\u0627\u0646\u0647","\u062c\u062f\u0627","\u062c\u062f\u0627\u0627\u0632","\u062c\u062f\u0627\u0627\u0632\u0647\u0645","\u062c\u062f\u0627\u06af\u0627\u0646\u0647","\u062c\u062f\u064a","\u062c\u062f\u064a\u062f\u0627","\u062c\u0631\u0645\u0632\u0627\u0633\u062a","\u062c\u0632","\u062c\u0632\u062c\u0632","\u062c\u0633\u0648\u0631\u0627\u0646\u0647","\u062c\u0644\u0648","\u062c\u0644\u0648\u062a\u0631","\u062c\u0644\u0648\u064a","\u062c\u0645\u0639","\u062c\u0645\u0639\u0627","\u062c\u0645\u0639\u064a","\u062c\u0646\u0627\u0628\u0639\u0627\u0644\u064a","\u062c\u0646\u0633","\u062c\u0647\u062a","\u062c\u0648\u0631","\u062c\u0648\u0631\u064a","\u062d","\u062d\u0627\u0634\u0627","\u062d\u0627\u0634\u0627\u0648\u0643\u0644\u0627","\u062d\u0627\u0634\u064a\u0647","\u062d\u0627\u0636\u0631","\u062d\u0627\u0636\u0631\u0645","\u062d\u0627\u0643\u064a\u0633\u062a","\u062d\u0627\u0644","\u062d\u0627\u0644\u0627","\u062d\u0627\u0644\u0643\u0647","\u062d\u0627\u0644\u064a","\u062d\u062a\u0645\u0627","\u062d\u062a\u064a","\u062d\u062f\u0627\u0642\u0644","\u062d\u062f\u0627\u0643\u062b\u0631","\u062d\u062f\u0648\u062f","\u062d\u0631\u0641","\u062d\u0633\u0627\u0628\u064a","\u062d\u0633\u0627\u0628\u06af\u0631\u0627\u0646\u0647","\u062d\u0633\u0628","\u062d\u0636\u0631\u062a\u0639\u0627\u0644\u064a","\u062d\u0642\u064a\u0631\u0627\u0646\u0647","\u062d\u0642\u064a\u0642\u062a\u0627","\u062d\u0643\u0645\u0627","\u062d\u0643\u064a\u0645\u0627\u0646\u0647","\u062d\u0648\u0644","\u062e","\u062e\u0627\u0644\u0635","\u062e\u0627\u0644\u0635\u0627\u0646\u0647","\u062e\u0627\u0644\u064a","\u062e\u0627\u0645","\u062e\u0627\u0645\u0633\u0627","\u062e\u0628","\u062e\u062f\u0627\u062d\u0627\u0641\u0638","\u062e\u062f\u0627\u0633\u062a","\u062e\u062f\u0627\u06af\u0648\u0646\u0647","\u062e\u0631\u062f\u0645\u0646\u062f\u0627\u0646\u0647","\u062e\u0633\u062a\u0647","\u062e\u0634\u0645\u06af\u064a\u0646","\u062e\u0635\u0645\u0627\u0646\u0647","\u062e\u0635\u0648\u0635\u0627","\u062e\u0644\u0627\u0642\u0627\u0646\u0647","\u062e\u0648\u0627\u0633\u062a\u0647","\u062e\u0648\u0627\u0647","\u062e\u0648\u0627\u0647\u062f","\u062e\u0648\u0628","\u062e\u0648\u0628\u062a\u0631","\u062e\u0648\u0628\u0633\u062a","\u062e\u0648\u0628\u064a","\u062e\u0648\u062f","\u062e\u0648\u062f\u0627\u0646\u062f","\u062e\u0648\u062f\u0627\u06af\u0627\u0647\u0627\u0646\u0647","\u062e\u0648\u062f\u0628\u0647","\u062e\u0648\u062f\u062a","\u062e\u0648\u062f\u062a\u0627\u0646","\u062e\u0648\u062f\u062a\u0648","\u062e\u0648\u062f\u0631\u0627","\u062e\u0648\u062f\u0634","\u062e\u0648\u062f\u0634\u0627\u0646","\u062e\u0648\u062f\u0645","\u062e\u0648\u062f\u0645\u0627\u0646","\u062e\u0648\u062f\u0645\u062e\u062a\u0627\u0631\u0627\u0646\u0647","\u062e\u0648\u062f\u0645\u0648","\u062e\u0648\u062f\u0646\u0645\u0627\u064a\u0627\u0646\u0647","\u062e\u0648\u062f\u064a","\u062e\u0648\u0634","\u062e\u0648\u0634\u0628\u062e\u062a\u0627\u0646\u0647","\u062e\u0648\u0634\u0628\u064a\u0646\u0627\u0646\u0647","\u062e\u0648\u0634\u062d\u0627\u0644","\u062e\u0648\u064a\u0634","\u062e\u0648\u064a\u0634\u062a\u0646\u0645","\u062e\u0648\u06af\u064a\u0631\u0627\u0646\u0647","\u062e\u064a\u0631","\u062e\u064a\u0631\u0647","\u062e\u064a\u0644\u064a","\u062f","\u062f\u0627","\u062f\u0627\u0627\u0645","\u062f\u0627\u0627\u0645\u0627","\u062f\u0627\u062e\u0644","\u062f\u0627\u062f\u0646","\u062f\u0627\u0631\u0627","\u062f\u0627\u0631\u0627\u0633\u062a","\u062f\u0627\u0631\u0627\u064a","\u062f\u0627\u0631\u062f","\u062f\u0627\u0634\u062a\u0646","\u062f\u0627\u0648\u0637\u0644\u0628\u0627\u0646\u0647","\u062f\u0627\u064a\u0645","\u062f\u0627\u064a\u0645\u0627","\u062f\u062e\u062a\u0631\u0627\u0646\u0647","\u062f\u0631\u0627\u062b\u0631","\u062f\u0631\u0627\u0632\u0627","\u062f\u0631\u0627\u0632\u0627\u064a","\u062f\u0631\u0627\u0646","\u062f\u0631\u0627\u064a\u0646","\u062f\u0631\u0628\u0627\u0628","\u062f\u0631\u0628\u0627\u0631\u0647","\u062f\u0631\u0628\u062f\u0631","\u062f\u0631\u0628\u0631","\u062f\u0631\u0628\u0631\u0627\u0628\u0631","\u062f\u0631\u0628\u0647","\u062f\u0631\u062a\u062e\u062a","\u062f\u0631\u062b\u0627\u0646\u064a","\u062f\u0631\u062d\u0627\u0644","\u062f\u0631\u062d\u0627\u0644\u064a","\u062f\u0631\u062d\u0627\u0644\u064a\u0643\u0647","\u062f\u0631\u062f\u0643\u0634\u0627\u0646","\u062f\u0631\u0631\u0627\u0633\u062a\u0627\u064a","\u062f\u0631\u0633\u062a","\u062f\u0631\u0633\u062a\u0647","\u062f\u0631\u0634\u062a","\u062f\u0631\u0634\u062a\u064a","\u062f\u0631\u0635\u0648\u0631\u062a\u064a","\u062f\u0631\u0635\u0648\u0631\u062a\u064a\u0643\u0647","\u062f\u0631\u0637\u064a","\u062f\u0631\u0639\u064a\u0646","\u062f\u0631\u0643\u0644","\u062f\u0631\u0643\u0646\u0627\u0631","\u062f\u0631\u0645\u062c\u0645\u0648\u0639","\u062f\u0631\u0645\u0642\u0627\u0628\u0644","\u062f\u0631\u0645\u0648\u0631\u062f","\u062f\u0631\u0645\u064a\u0627\u0646","\u062f\u0631\u0646\u062a\u064a\u062c\u0647","\u062f\u0631\u0646\u0647\u0627\u064a\u062a","\u062f\u0631\u0647\u0631","\u062f\u0631\u0647\u0631\u062d\u0627\u0644","\u062f\u0631\u0647\u0631\u0635\u0648\u0631\u062a","\u062f\u0631\u0648\u0627\u0642\u0639","\u062f\u0631\u064a\u063a","\u062f\u0631\u064a\u063a\u0627","\u062f\u0631\u067e\u064a","\u062f\u0633\u062a\u0647","\u062f\u0634\u0645\u0646\u064a\u0645","\u062f\u0634\u0648\u0627\u0631","\u062f\u0634\u0648\u0627\u0631\u062a\u0631","\u062f\u0642\u064a\u0642","\u062f\u0642\u064a\u0642\u0627","\u062f\u0644\u062e\u0648\u0627\u0647","\u062f\u0644\u062e\u0648\u0634","\u062f\u0644\u0634\u0627\u062f","\u062f\u0645","\u062f\u0647\u062f","\u062f\u0648","\u062f\u0648\u0628\u0627\u0631\u0647","\u062f\u0648\u062a\u0627","\u062f\u0648\u062a\u0627\u062f\u0648\u062a\u0627","\u062f\u0648\u0631","\u062f\u0648\u0631\u0627\u0632","\u062f\u0648\u0631\u062a\u0631","\u062f\u0648\u0633\u0627\u0644\u0647","\u062f\u0648\u0633\u062a\u0627\u0646\u0647","\u062f\u0648\u0645","\u062f\u064a\u0631","\u062f\u064a\u0631\u062a","\u062f\u064a\u0631\u0645","\u062f\u064a\u0631\u0648\u0632","\u062f\u064a\u0631\u0648\u0632\u0628\u0647","\u062f\u064a\u0634\u0628","\u062f\u064a\u0648\u0627\u0646\u0647","\u062f\u064a\u0648\u064a","\u062f\u064a\u06af\u0631","\u062f\u064a\u06af\u0631\u0627\u0646","\u062f\u064a\u06af\u0631\u062a\u0627","\u062f\u064a\u06af\u0631\u064a","\u062f\u064a\u06af\u0647","\u062f\u06af\u0631\u0628\u0627\u0631","\u062f\u06af\u0631\u0628\u0627\u0631\u0647","\u062f\u06af\u0631\u06af\u0648\u0646","\u0630","\u0630\u0627\u062a\u0627","\u0630\u0627\u0644\u0643","\u0630\u064a\u0644","\u0630\u064a\u0644\u0627","\u0631","\u0631\u0627","\u0631\u0627\u0627\u0632","\u0631\u0627\u0628\u0647","\u0631\u0627\u062c\u0639","\u0631\u0627\u062d\u062a","\u0631\u0627\u062d\u062a\u0631","\u0631\u0627\u062f\u0631","\u0631\u0627\u0633\u0627","\u0631\u0627\u0633\u062a","\u0631\u0627\u0633\u062a\u0627","\u0631\u0627\u0633\u062a\u064a","\u0631\u0633\u0645\u0627","\u0631\u0634\u062a\u0647","\u0631\u063a\u0645","\u0631\u0641\u062a\u0627\u0631\u0647\u0627\u0633\u062a","\u0631\u0646\u062c\u0646\u062f","\u0631\u0646\u062f\u0627\u0646\u0647","\u0631\u0647\u06af\u0634\u0627\u0633\u062a","\u0631\u0648","\u0631\u0648\u0627\u0633\u062a","\u0631\u0648\u0628\u0631\u0648","\u0631\u0648\u0628\u0631\u0648\u0633\u062a","\u0631\u0648\u0628\u0647","\u0631\u0648\u0632","\u0631\u0648\u0632\u0627\u0646\u0647","\u0631\u0648\u0632\u0628\u0631\u0648\u0632","\u0631\u0648\u0632\u0645\u0631\u0647","\u0631\u0648\u0634","\u0631\u0648\u0634\u0646","\u0631\u0648\u0634\u0646\u064a","\u0631\u0648\u064a","\u0631\u0648\u064a\u0634","\u0631\u064a\u0627\u0643\u0627\u0631\u0627\u0646\u0647","\u0631\u064a\u0632","\u0631\u064a\u0632\u0627\u0646","\u0632","\u0632\u062f","\u0632\u062f\u0646","\u0632\u062f\u0647","\u0632\u0634\u062a","\u0632\u0645\u0627\u0646\u064a","\u0632\u0646\u0646\u062f","\u0632\u0647\u064a","\u0632\u0648","\u0632\u0648\u062f","\u0632\u0648\u062f\u062a\u0631","\u0632\u0648\u062f\u064a","\u0632\u064a\u0627\u062f","\u0632\u064a\u0627\u062f\u062a\u0631","\u0632\u064a\u0627\u062f\u0647","\u0632\u064a\u0628\u0627","\u0632\u064a\u0628\u0627\u062a\u0631","\u0632\u064a\u0631","\u0632\u064a\u0631\u0627","\u0632\u064a\u0631\u0627\u0643\u0647","\u0632\u064a\u0631\u0643\u0627\u0646\u0647","\u0632\u064a\u0631\u0646\u062f","\u0632\u064a\u0631\u0686\u0634\u0645\u064a","\u0632\u064a\u0646","\u0633","\u0633\u0627\u0628\u0642\u0627","\u0633\u0627\u062e\u062a\u0646","\u0633\u0627\u062f\u0647","\u0633\u0627\u062f\u06af\u064a","\u0633\u0627\u0632\u0627\u0646","\u0633\u0627\u0632\u0647\u0627\u0633\u062a","\u0633\u0627\u0632\u064a","\u0633\u0627\u0632\u06af\u0627\u0631\u0627\u0646\u0647","\u0633\u0627\u0643\u0646\u0646\u062f","\u0633\u0627\u0644\u0627\u0646\u0647","\u0633\u0627\u0644\u062a\u0647","\u0633\u0627\u0644\u0645","\u0633\u0627\u0644\u0647\u0627\u0633\u062a","\u0633\u0627\u0644\u064a\u0627\u0646\u0647","\u0633\u0627\u064a\u0631","\u0633\u0627\u064a\u0631\u0627\u0646","\u0633\u0627\u064a\u0631\u064a\u0646","\u0633\u062a","\u0633\u062e\u062a","\u0633\u062e\u062a\u062a\u0631","\u0633\u062e\u062a\u0647","\u0633\u0631","\u0633\u0631\u0627\u0633\u0631","\u0633\u0631\u0627\u0646\u062c\u0627\u0645","\u0633\u0631\u0627\u067e\u0627","\u0633\u0631\u064a","\u0633\u0631\u064a\u0639","\u0633\u0631\u064a\u0639\u0627","\u0633\u0639\u0627\u062f\u062a\u0645\u0646\u062f\u0627\u0646\u0647","\u0633\u0646\u06af\u062f\u0644\u0627\u0646\u0647","\u0633\u0646\u06af\u064a\u0646","\u0633\u0647","\u0633\u0647\u0648\u0627","\u0633\u0648\u0645","\u0633\u064a\u0627\u0647","\u0633\u064a\u062e","\u0633\u067e\u0633","\u0634","\u0634\u0627\u0627\u0627\u0644\u0644\u0647","\u0634\u0627\u062f","\u0634\u0627\u062f\u062a\u0631","\u0634\u0627\u062f\u0645\u0627\u0646","\u0634\u0627\u0643\u0644\u0647","\u0634\u0627\u0646","\u0634\u0627\u0647\u062f\u0646\u062f","\u0634\u0627\u0647\u062f\u064a\u0645","\u0634\u0627\u064a\u062f","\u0634\u0628\u0627\u0646\u0647","\u0634\u0628\u0647\u0627\u0633\u062a","\u0634\u062a\u0627\u0628\u0627\u0646","\u0634\u062a\u0627\u0628\u0632\u062f\u0647","\u0634\u062c\u0627\u0639\u0627\u0646\u0647","\u0634\u062e\u0635\u0627","\u0634\u062f","\u0634\u062f\u062a","\u0634\u062f\u0646","\u0634\u062f\u0647","\u0634\u062f\u064a\u062f\u0627","\u0634\u0645\u0627","\u0634\u0645\u0627\u0631\u064a","\u0634\u0645\u0627\u0633\u062a","\u0634\u0645\u0627\u064a\u0646\u062f","\u0634\u0648\u062f","\u0634\u0648\u0631\u0627\u0633\u062a","\u0634\u0648\u0642\u0645","\u0634\u064a\u0631\u064a\u0646","\u0634\u064a\u0631\u064a\u0646\u0647","\u0634\u064a\u0643","\u0635","\u0635\u0627\u062f\u0642\u0627\u0646\u0647","\u0635\u0627\u0641","\u0635\u062f","\u0635\u062f\u0627\u0644\u0628\u062a\u0647","\u0635\u062f\u062f\u0631\u0635\u062f","\u0635\u0631\u0627\u062d\u062a\u0627","\u0635\u0631\u0641\u0627","\u0635\u0631\u064a\u062d","\u0635\u0631\u064a\u062d\u0627","\u0635\u0631\u064a\u062d\u062a\u0631","\u0635\u0645\u064a\u0645\u0627\u0646\u0647","\u0635\u0646\u062f\u0648\u0642","\u0636","\u0636\u0631\u0648\u0631\u062a\u0627","\u0636\u0639\u064a\u0641","\u0636\u0639\u064a\u0641\u062a\u0631","\u0636\u0645\u0646","\u0636\u0645\u0646\u0627","\u0637","\u0637\u0628\u0639\u0627","\u0637\u0628\u064a\u0639\u062a\u0627","\u0637\u0644\u0628\u0643\u0627\u0631\u0627\u0646\u0647","\u0637\u0648\u0631","\u0637\u0648\u0631\u064a","\u0637\u064a","\u0638","\u0638\u0627\u0647\u0631\u0627","\u0639","\u0639\u0627\u062c\u0632\u0627\u0646\u0647","\u0639\u0627\u062f\u0644\u0627\u0646\u0647","\u0639\u0627\u0642\u0628\u062a","\u0639\u0627\u0642\u0644\u0627\u0646\u0647","\u0639\u0627\u0644\u0645\u0627\u0646\u0647","\u0639\u0627\u0644\u064a","\u0639\u0628\u0627\u0631\u062a\u0646\u062f","\u0639\u062c\u0628","\u0639\u062c\u0648\u0644\u0627\u0646\u0647","\u0639\u0631\u0641\u0627\u0646\u064a","\u0639\u0632\u064a\u0632","\u0639\u0642\u0628","\u0639\u0642\u0628\u062a\u0631","\u0639\u0644\u0627\u0648\u0647","\u0639\u0644\u0646\u0627","\u0639\u0644\u064a\u0631\u063a\u0645","\u0639\u0644\u064a\u0647","\u0639\u0645\u062f\u0627","\u0639\u0645\u062f\u062a\u0627","\u0639\u0645\u062f\u0647","\u0639\u0645\u062f\u064a","\u0639\u0645\u0644\u0627","\u0639\u0645\u0644\u064a","\u0639\u0645\u0644\u06af\u0631\u0627\u064a\u0627\u0646\u0647","\u0639\u0645\u0648\u0645","\u0639\u0645\u0648\u0645\u0627","\u0639\u0645\u064a\u0642\u0627","\u0639\u0646","\u0639\u0646\u0642\u0631\u064a\u0628","\u0639\u064a\u0646\u0627","\u063a","\u063a\u0627\u0644\u0628\u0627","\u063a\u0632\u0627\u0644\u0627\u0646","\u063a\u064a\u0631","\u063a\u064a\u0631\u0627\u0632","\u063a\u064a\u0631\u0627\u0632\u0627\u0646","\u063a\u064a\u0631\u0627\u0632\u0627\u064a\u0646","\u063a\u064a\u0631\u062a\u0635\u0627\u062f\u0641\u064a","\u063a\u064a\u0631\u0637\u0628\u064a\u0639\u064a","\u063a\u064a\u0631\u0639\u0645\u062f\u064a","\u063a\u064a\u0631\u0645\u0633\u062a\u0642\u064a\u0645","\u063a\u064a\u0631\u064a\u0643\u0633\u0627\u0646","\u0641","\u0641\u0627\u0642\u062f","\u0641\u0628\u0647\u0627","\u0641\u0631","\u0641\u0631\u0627\u062a\u0631","\u0641\u0631\u0627\u062a\u0631\u0627\u0632","\u0641\u0631\u0627\u0648\u0627\u0646","\u0641\u0631\u062f\u0627","\u0641\u0639\u0627\u0644\u0627\u0646\u0647","\u0641\u0639\u0644\u0627","\u0641\u0642\u0637","\u0641\u0643\u0648\u0631\u0627\u0646\u0647","\u0641\u0644\u0627\u0646","\u0641\u0644\u0630\u0627","\u0641\u0646\u0627\u0648\u0631\u0627\u0646\u0647","\u0641\u0647\u0631\u0633\u062a\u0648\u0627\u0631","\u0641\u0648\u0631\u0627","\u0641\u0648\u0631\u064a","\u0641\u0648\u0642","\u0642","\u0642\u0627\u0627\u0644\u0646\u062f","\u0642\u0627\u0628\u0644","\u0642\u0627\u0637\u0628\u0647","\u0642\u0627\u0637\u0639\u0627\u0646\u0647","\u0642\u0627\u0639\u062f\u062a\u0627","\u0642\u0627\u0646\u0648\u0646\u0627","\u0642\u0628\u0644","\u0642\u0628\u0644\u0627","\u0642\u0628\u0644\u0646\u062f","\u0642\u062f","\u0642\u062f\u0631","\u0642\u062f\u0631\u0645\u0633\u0644\u0645","\u0642\u062f\u0631\u064a","\u0642\u0631\u0627\u0631","\u0642\u0631\u0627\u0631\u062f\u0627\u062f\u0646","\u0642\u0631\u064a\u0628","\u0642\u0636\u0627\u064a\u0627\u0633\u062a","\u0642\u0637\u0639\u0627","\u0642\u064a\u0644\u0627","\u0643","\u0643\u0627\u0631\u0627\u0641\u0631\u064a\u0646\u0627\u0646\u0647","\u0643\u0627\u0631\u0628\u0631\u0645\u062f\u0627\u0631\u0627\u0646\u0647","\u0643\u0627\u0631\u0646\u062f","\u0643\u0627\u0634","\u0643\u0627\u0634\u0643\u064a","\u0643\u0627\u0645\u0644\u0627","\u0643\u0627\u0645\u0644\u062a\u0631","\u0643\u0627\u0646","\u0643\u0627\u064a\u0646","\u0643\u062c\u0627","\u0643\u062c\u0627\u0633\u062a","\u0643\u062f\u0627\u0645","\u0643\u062f\u0627\u0645\u0646\u062f","\u0643\u062f\u0627\u0645\u064a\u0643","\u0643\u0631\u0627\u062a","\u0643\u0631\u062f","\u0643\u0631\u062f\u0646","\u0643\u0631\u062f\u0647","\u0643\u0632","\u0643\u0632\u064a\u0646","\u0643\u0633","\u0643\u0633\u0627\u0646\u064a","\u0643\u0633\u064a","\u0643\u0634\u064a\u062f\u0646","\u0643\u0644","\u0643\u0644\u0627","\u0643\u0644\u064a","\u0643\u0644\u064a\u0634\u0647","\u0643\u0645","\u0643\u0645\u0627\x7f\u0627\u064a\u0646\u0643\u0647","\u0643\u0645\u0627\u0628\u064a\u0634","\u0643\u0645\u0627\u0643\u0627\u0646","\u0643\u0645\u062a\u0631","\u0643\u0645\u062a\u0631\u0647","\u0643\u0645\u064a","\u0643\u0646\u0627\u0631","\u0643\u0646\u0627\u0631\u0634","\u0643\u0646\u0627\u0646","\u0643\u0646\u0627\u064a\u0647","\u0643\u0646\u062f","\u0643\u0646\u0645","\u0643\u0646\u0646\u062f","\u0643\u0646\u0646\u062f\u0647","\u0643\u0647","\u0643\u0648\u062f\u0643\u0627\u0646\u0647","\u0643\u0648\u0631\u0643\u0648\u0631\u0627\u0646\u0647","\u0643\u064a","\u0643\u064a\u0633\u062a","\u0644","\u0644\u0627","\u0644\u0627\u0627\u0642\u0644","\u0644\u0627\u062c\u0631\u0645","\u0644\u0628","\u0644\u0630\u0627","\u0644\u0632\u0648\u0645\u0627","\u0644\u0637\u0641\u0627","\u0644\u064a\u0643\u0646","\u0645","\u0645\u0627","\u0645\u0627\u062a","\u0645\u0627\u062f\u0627\u0645","\u0645\u0627\u062f\u0627\u0645\u064a","\u0645\u0627\u062f\u0627\u0645\u064a\u0643\u0647","\u0645\u0627\u0633\u062a","\u0645\u0627\u0634\u064a\u0646\u0648\u0627\u0631","\u0645\u0627\u0642\u0628\u0644","\u0645\u0627\u0644\u0627","\u0645\u0627\u0644\u0627\u0645\u0627\u0644","\u0645\u0627\u0645\u0627\u0646","\u0645\u0627\u0646\u0646\u062f","\u0645\u0627\u0647\u0631\u0627\u0646\u0647","\u0645\u0627\u0647\u064a\u062a\u0627","\u0645\u0627\u064a\u064a","\u0645\u0628\u0627\u062f\u0627","\u0645\u062a\u0627\u0633\u0641\u0627\u0646\u0647","\u0645\u062a\u0639\u0627\u0642\u0628\u0627","\u0645\u062a\u0641\u0627\u0648\u062a\u0646\u062f","\u0645\u062a\u0641\u0643\u0631\u0627\u0646\u0647","\u0645\u062a\u0642\u0627\u0628\u0644\u0627","\u0645\u062a\u0648\u0627\u0644\u064a","\u0645\u062a\u0648\u0633\u0641\u0627\u0646\u0647","\u0645\u062b\u0627\u0628\u0647","\u0645\u062b\u0644","\u0645\u062b\u0644\u0627","\u0645\u062c\u0628\u0648\u0631\u0646\u062f","\u0645\u062c\u062f\u062f\u0627","\u0645\u062c\u0631\u0645\u0627\u0646\u0647","\u0645\u062c\u0645\u0648\u0639","\u0645\u062c\u0645\u0648\u0639\u0627","\u0645\u062d\u062a\u0627\u062c\u0646\u062f","\u0645\u062d\u062a\u0627\u0637","\u0645\u062d\u062a\u0627\u0637\u0627\u0646\u0647","\u0645\u062d\u0643\u0645","\u0645\u062e\u0627\u0644\u0641\u0646\u062f","\u0645\u062e\u062a\u0635\u0631","\u0645\u062e\u062a\u0635\u0631\u0627","\u0645\u062e\u0635\u0648\u0635\u0627","\u0645\u062f\u0627\u0645","\u0645\u062f\u0627\u0648\u0645","\u0645\u062f\u0628\u0631","\u0645\u062f\u0628\u0631\u0627\u0646\u0647","\u0645\u062f\u062a\u0647\u0627\u0633\u062a","\u0645\u062f\u062a\u064a","\u0645\u0631\u0627","\u0645\u0631\u0627\u062a\u0628","\u0645\u0631\u062a\u0628","\u0645\u0631\u062a\u0628\u0627","\u0645\u0631\u062f\u0627\u0646\u0647","\u0645\u0633\u062a\u062d\u0636\u0631\u064a\u062f","\u0645\u0633\u062a\u0639\u062f","\u0645\u0633\u062a\u0642\u0644\u0627","\u0645\u0633\u062a\u0642\u064a\u0645","\u0645\u0633\u062a\u0642\u064a\u0645\u0627","\u0645\u0633\u062a\u0645\u0631","\u0645\u0633\u062a\u0645\u0631\u0627","\u0645\u0633\u062a\u0646\u062f","\u0645\u0633\u0644\u0645","\u0645\u0633\u0644\u0645\u0627","\u0645\u0633\u064a\u0648\u0644\u0627\u0646\u0647","\u0645\u0634\u062a","\u0645\u0634\u062a\u0631\u0643\u0627","\u0645\u0634\u062e\u0635","\u0645\u0634\u063a\u0648\u0644","\u0645\u0634\u063a\u0648\u0644\u0646\u062f","\u0645\u0634\u0643\u0644","\u0645\u0634\u0643\u0644\u062a\u0631","\u0645\u0637\u0644\u0642","\u0645\u0637\u0644\u0642\u0627","\u0645\u0637\u0645\u0627\u0646\u0627","\u0645\u0637\u0645\u0627\u0646\u0645","\u0645\u0637\u0645\u0646\u0627","\u0645\u0639","\u0645\u0639\u062a\u0642\u062f\u0645","\u0645\u0639\u062a\u0642\u062f\u0646\u062f","\u0645\u0639\u062a\u0642\u062f\u064a\u0645","\u0645\u0639\u062f\u0648\u062f","\u0645\u0639\u0630\u0648\u0631\u064a\u0645","\u0645\u0639\u0644\u0642","\u0645\u0639\u0644\u0648\u0645\u0647","\u0645\u0639\u0645\u0648\u0644\u0627","\u0645\u0639\u0645\u0648\u0644\u064a","\u0645\u063a\u0631\u0636\u0627\u0646\u0647","\u0645\u063a\u0644\u0648\u0628","\u0645\u0641\u064a\u062f\u0646\u062f","\u0645\u0642\u062f\u0627\u0631","\u0645\u0642\u0635\u0631","\u0645\u0642\u0635\u0631\u064a","\u0645\u0642\u0644\u0648\u0628","\u0645\u0643\u0631\u0631","\u0645\u0643\u0631\u0631\u0627","\u0645\u0644\u0632\u0645","\u0645\u0645\u064a\u0632\u064a\u0647\u0627\u0633\u062a","\u0645\u0646","\u0645\u0646\u062a\u0647\u064a","\u0645\u0646\u062d\u0635\u0631","\u0645\u0646\u062d\u0635\u0631\u0627","\u0645\u0646\u062d\u0635\u0631\u0628\u0641\u0631\u062f","\u0645\u0646\u0635\u0641\u0627\u0646\u0647","\u0645\u0646\u0637\u0642\u0627","\u0645\u0646\u0637\u0642\u064a","\u0645\u0646\u064a","\u0645\u0648\u0627\u062c\u0647\u0646\u062f","\u0645\u0648\u062c\u0628","\u0645\u0648\u062c\u0648\u062f\u0646\u062f","\u0645\u0648\u062e\u0631","\u0645\u0648\u0631\u062f","\u0645\u0648\u0642\u0639\u064a\u0643\u0647","\u0645\u064a","\u0645\u064a\u0627\u0646","\u0645\u064a\u0632\u0627\u0646","\u0645\u06af\u0631","\u0645\u06af\u0631\u0627\u0646\u0643\u0647","\u0645\u06af\u0631\u0627\u064a\u0646\u0643\u0647","\u0646","\u0646\u0627\u0627\u0645\u064a\u062f","\u0646\u0627\u0627\u06af\u0627\u0647\u0627\u0646\u0647","\u0646\u0627\u062a\u0648\u0627\u0646","\u0646\u0627\u062e\u0648\u0627\u0633\u062a\u0647","\u0646\u0627\u062e\u0648\u0627\u0646\u062f\u0647","\u0646\u0627\u062f\u064a\u062f\u0647","\u0646\u0627\u0631\u0627\u0636\u064a","\u0646\u0627\u0633\u0627\u0632\u06af\u0627\u0631\u0627\u0646\u0647","\u0646\u0627\u0634\u0646\u0627\u062e\u062a\u0647","\u0646\u0627\u0643\u0627\u0645","\u0646\u0627\u0647\u0634\u064a\u0627\u0631","\u0646\u0627\u067e\u0630\u064a\u0631","\u0646\u0627\u0686\u0627\u0631","\u0646\u0627\u06af\u0632\u064a\u0631","\u0646\u0627\u06af\u0647\u0627\u0646","\u0646\u0628\u0627\u064a\u062f","\u0646\u0628\u0634","\u0646\u062a\u064a\u062c\u062a\u0627","\u0646\u062e\u0633\u062a","\u0646\u062e\u0648\u062f\u064a","\u0646\u062f\u0627\u0631\u062f","\u0646\u062f\u0631\u062a","\u0646\u062f\u0631\u062a\u0627","\u0646\u0631\u0645","\u0646\u0631\u0645\u064a","\u0646\u0632\u062f","\u0646\u0632\u062f\u064a\u0643","\u0646\u0632\u062f\u064a\u0643\u062a\u0631","\u0646\u0633\u0628\u062a","\u0646\u0638\u0631\u0627","\u0646\u0638\u0631\u0628\u0647","\u0646\u0638\u064a\u0631","\u0646\u0641\u0631\u0646\u062f","\u0646\u0641\u0647\u0645\u064a","\u0646\u0642\u0627\u062f\u0627\u0646\u0647","\u0646\u0645\u064a","\u0646\u0647","\u0646\u0647\u0627\u0646","\u0646\u0647\u0627\u064a\u062a","\u0646\u0647\u0627\u064a\u062a\u0627","\u0646\u0648\u0627\u0648\u0631\u0627\u0646\u0647","\u0646\u0648\u0639","\u0646\u0648\u0639\u0627","\u0646\u0648\u0645\u064a\u062f","\u0646\u064a\u0627\u0632\u0645\u0646\u062f\u0627\u0646\u0647","\u0646\u064a\u0627\u0632\u0645\u0646\u062f\u0646\u062f","\u0646\u064a\u0632","\u0646\u064a\u0633\u062a","\u0646\u064a\u0643","\u0646\u064a\u0645\u064a","\u0647","\u0647\u0627","\u0647\u0627\u0633\u062a","\u0647\u0627\u0646","\u0647\u0627\u064a\u064a","\u0647\u062f\u0641","\u0647\u0631","\u0647\u0631\u0627\u0632\u0686\u0646\u062f\u06af\u0627\u0647\u064a","\u0647\u0631\u0627\u0646\u0686\u0647","\u0647\u0631\u062c\u0627","\u0647\u0631\u0632\u0686\u0646\u062f\u06af\u0627\u0647\u064a","\u0647\u0631\u0633\u0627\u0644\u0647","\u0647\u0631\u0642\u062f\u0631","\u0647\u0631\u0643\u062f\u0627\u0645","\u0647\u0631\u0643\u0633","\u0647\u0631\u0643\u0633\u064a","\u0647\u0631\u0643\u0647","\u0647\u0631\u0648\u0642\u062a","\u0647\u0631\u0686\u0642\u062f\u0631","\u0647\u0631\u0686\u0646\u062f","\u0647\u0631\u0686\u0647","\u0647\u0631\u06af\u0627\u0647","\u0647\u0631\u06af\u0632","\u0647\u0631\u06af\u0648\u0646\u0647","\u0647\u0632\u0627\u0631\u0647\u0627","\u0647\u0633\u062a","\u0647\u0633\u062a\u0646\u062f","\u0647\u0634\u064a\u0627\u0631\u0627\u0646\u0647","\u0647\u0642","\u0647\u0645","\u0647\u0645\u0627\u0646","\u0647\u0645\u0627\u0646\u0627","\u0647\u0645\u0627\u0646\u0637\u0648\u0631","\u0647\u0645\u0627\u0646\u0637\u0648\u0631\u0643\u0647","\u0647\u0645\u0627\u0646\u0637\u0648\u0631\u064a","\u0647\u0645\u0627\u0646\u0637\u0648\u0631\u064a\u0643\u0647","\u0647\u0645\u0627\u0646\u0642\u062f\u0631","\u0647\u0645\u0627\u0646\u0646\u062f","\u0647\u0645\u0627\u0646\u0647\u0627","\u0647\u0645\u0627\u0646\u064a","\u0647\u0645\u0627\u0647\u0646\u06af\u062a\u0631","\u0647\u0645\u062e\u0648\u0627\u0646","\u0647\u0645\u062f\u0644\u0627\u0646\u0647","\u0647\u0645\u062f\u064a\u06af\u0631","\u0647\u0645\u0632\u0645\u0627\u0646","\u0647\u0645\u0633\u0648","\u0647\u0645\u0633\u0648\u0628\u0627","\u0647\u0645\u0643\u0627\u0631\u0627\u0646\u0647","\u0647\u0645\u0646\u0648\u0627","\u0647\u0645\u0647","\u0647\u0645\u0648\u0627\u0631\u0647","\u0647\u0645\u064a","\u0647\u0645\u064a\u0634\u0647","\u0647\u0645\u064a\u0634\u06af\u064a","\u0647\u0645\u064a\u0646","\u0647\u0645\u064a\u0646\u0637\u0648\u0631","\u0647\u0645\u064a\u0646\u0637\u0648\u0631\u0643\u0647","\u0647\u0645\u064a\u0646\u0637\u0648\u0631\u064a","\u0647\u0645\u064a\u0646\u0637\u0648\u0631\u064a\u0643\u0647","\u0647\u0645\u064a\u0646\u0643\u0647","\u0647\u0645\u0686\u0646\u0627\u0646","\u0647\u0645\u0686\u0646\u0627\u0646\u0643\u0647","\u0647\u0645\u0686\u0646\u064a\u0646","\u0647\u0645\u0686\u0648\u0646","\u0647\u0645\u0686\u064a\u0646","\u0647\u0645\u06af\u0627\u0645","\u0647\u0645\u06af\u0627\u0646","\u0647\u0645\u06af\u064a","\u0647\u0646\u0648\u0632","\u0647\u0646\u06af\u0627\u0645\u064a\u0643\u0647","\u0647\u0648\u0634\u0645\u0646\u062f\u0627\u0646\u0647","\u0647\u0648\u0634\u064a\u0627\u0631\u0627\u0646\u0647","\u0647\u0648\u064a","\u0647\u064a","\u0647\u064a\u0686","\u0647\u064a\u0686\u0643\u062f\u0627\u0645","\u0647\u064a\u0686\u0643\u0633","\u0647\u064a\u0686\u064a","\u0647\u064a\u0686\u064a\u0643","\u0647\u064a\u0686\u06af\u0627\u0647","\u0647\u064a\u0686\u06af\u0648\u0646\u0647","\u0648\u0627\u0628\u0633\u062a\u0647","\u0648\u0627\u0636\u062d","\u0648\u0627\u0636\u062d\u062a\u0631","\u0648\u0627\u0642\u0639","\u0648\u0627\u0642\u0639\u0627","\u0648\u0627\u0642\u0639\u064a","\u0648\u0627\u0642\u0641\u0646\u062f","\u0648\u0627\u064a","\u0648\u062c\u0647","\u0648\u062c\u0648\u062f","\u0648\u062c\u0648\u062f\u064a\u0643\u0647","\u0648\u062d\u0634\u062a","\u0648\u0631","\u0648\u0631\u0627","\u0648\u0631\u0627\u064a","\u0648\u0632\u0648","\u0648\u0636\u0648\u062d","\u0648\u0642\u062a\u064a","\u0648\u0642\u062a\u064a\u0643\u0647","\u0648\u0644\u064a","\u0648\u0644\u064a\u0643\u0646","\u0648\u0647\u0645\u064a\u0646","\u0648\u064a","\u0648\u064a\u0627","\u0648\u064a\u0698\u0647","\u0648\u06af\u0631","\u0648\u06af\u0631\u0646\u0647","\u064a\u0627","\u064a\u0627\u0627\u0632","\u064a\u0627\u0627\u0646\u0643\u0647","\u064a\u0627\u0627\u064a\u0646\u0643\u0647","\u064a\u0627\u0628\u062f","\u064a\u0627\u0631\u0628","\u064a\u0627\u0641\u062a\u0646","\u064a\u0639\u0646\u064a","\u064a\u0642\u064a\u0646\u0627","\u064a\u0643","\u064a\u0643\u0627\u064a\u0643","\u064a\u0643\u0628\u0627\u0631","\u064a\u0643\u0628\u0627\u0631\u0647","\u064a\u0643\u062c\u0627","\u064a\u0643\u062c\u0627\u0646\u0628\u0647","\u064a\u0643\u062c\u0648\u0631","\u064a\u0643\u062c\u0648\u0631\u064a","\u064a\u0643\u062f\u0645","\u064a\u0643\u062f\u064a\u06af\u0631","\u064a\u0643\u0631\u064a\u0632","\u064a\u0643\u0632\u0645\u0627\u0646","\u064a\u0643\u0633\u0627\u0644","\u064a\u0643\u0633\u0631\u0647","\u064a\u0643\u0633\u0631\u064a","\u064a\u0643\u0637\u0631\u0641\u0647","\u064a\u0643\u0646\u0648\u0627\u062e\u062a","\u064a\u0643\u064a","\u064a\u0643\u067e\u0627\u0631\u0686\u0647","\u064a\u0647","\u064a\u0648\u0627\u0634","\u067e","\u067e\u0627\u0631\u0633\u0627\u0644","\u067e\u0627\u0631\u0633\u0627\u064a\u0627\u0646\u0647","\u067e\u0627\u0631\u0647","\u067e\u0627\u064a\u064a\u0646","\u067e\u062f\u0631\u0627\u0646\u0647","\u067e\u062f\u0631\u067e\u064a","\u067e\u062f\u064a\u062f\u0647","\u067e\u0630\u064a\u0631","\u067e\u0630\u064a\u0631\u0646\u062f","\u067e\u0631\u0627\u0643\u0646\u062f\u0647","\u067e\u0631\u062a\u062d\u0631\u0643","\u067e\u0631\u062e\u0627\u0634\u06af\u0631\u0627\u0646\u0647","\u067e\u0631\u0633\u0627\u0646","\u067e\u0631\u0634\u062a\u0627\u0628","\u067e\u0631\u0634\u0648\u0631","\u067e\u0631\u0648\u0631\u062f\u06af\u0627\u0631\u0627","\u067e\u0631\u064a\u0631\u0648\u0632","\u067e\u0633","\u067e\u0634\u062a","\u067e\u0634\u062a\u0648\u0627\u0646\u0647","\u067e\u0634\u064a\u0645\u0648\u0646\u064a","\u067e\u0646\u0647\u0627\u0646","\u067e\u0647\u0646","\u067e\u064a","\u067e\u064a\u0627\u0645\u0628\u0631\u0627\u0646\u0647","\u067e\u064a\u062f\u0627\u0633\u062a","\u067e\u064a\u062f\u0631\u067e\u064a","\u067e\u064a\u0631\u0627\u0645\u0648\u0646","\u067e\u064a\u0634","\u067e\u064a\u0634\u0627\u067e\u064a\u0634","\u067e\u064a\u0634\u062a\u0631","\u067e\u064a\u0648\u0633\u062a\u0647","\u067e\u064a\u06af\u064a\u0631","\u0686","\u0686\u0627\u0631\u062f\u0647","\u0686\u0627\u0644\u0647","\u0686\u0627\u067e\u0644\u0648\u0633\u0627\u0646\u0647","\u0686\u062a","\u0686\u062a\u0647","\u0686\u0631\u0627","\u0686\u0631\u0627\u0643\u0647","\u0686\u0637\u0648\u0631","\u0686\u0642\u062f\u0631","\u0686\u0643\u0627\u0631","\u0686\u0646\u0627\u0646","\u0686\u0646\u0627\u0646\u0643\u0647","\u0686\u0646\u0627\u0646\u0686\u0647","\u0686\u0646\u062f","\u0686\u0646\u062f\u0627\u0646","\u0686\u0646\u062f\u0627\u0646\u064a","\u0686\u0646\u062f\u0631\u0648\u0632\u0647","\u0686\u0646\u062f\u0645\u0627\u0647\u0647","\u0686\u0646\u062f\u0645\u064a\u0646","\u0686\u0646\u062f\u0647","\u0686\u0646\u062f\u064a\u0646","\u0686\u0646\u064a\u0646","\u0686\u0647","\u0686\u0647\u0627\u0631\u0647\u0632\u0627\u0631","\u0686\u0648","\u0686\u0648\u0646","\u0686\u064a","\u0686\u064a\u0632","\u0686\u064a\u0632\u0647\u0627\u0633\u062a","\u0686\u064a\u0632\u064a\u0633\u062a","\u0686\u064a\u0633\u062a","\u0686\u064a\u0647","\u0686\u06af\u0648\u0646\u0647","\u0698","\u06af","\u06af\u0627\u0647","\u06af\u0627\u0647\u064a","\u06af\u0630\u0627\u0631\u0627\u0646","\u06af\u0630\u0627\u0631\u064a","\u06af\u0630\u0627\u0634\u062a\u0646","\u06af\u0631","\u06af\u0631\u062f\u064a\u062f","\u06af\u0631\u0641\u062a\u0627\u0631\u0646\u062f","\u06af\u0631\u0641\u062a\u0646","\u06af\u0631\u0645\u064a","\u06af\u0631\u0646\u0647","\u06af\u0631\u0686\u0647","\u06af\u0641\u062a","\u06af\u0645\u0627\u0646","\u06af\u0647\u06af\u0627\u0647","\u06af\u0648\u0646\u0647","\u06af\u0648\u064a\u0627","\u06af\u0648\u064a\u0627\u0646","\u06af\u0648\u064a\u064a","\u0627\u0628\u0644\u0647\u0627\u0646\u0647 \u0647\u0627","?","",":","\u0648","NULL","\u062f\u0631","\u0628\u0647","\u0627\u0632","\u0643\u0647","\u0645\u064a","\u0627\u064a\u0646","\u0627\u0633\u062a","\u0631\u0627","\u0628\u0627","\u0647\u0627\u064a","\u0628\u0631\u0627\u064a","\u0622\u0646","\u064a\u0643","\u0634\u0648\u062f","\u0634\u062f\u0647","\u062e\u0648\u062f","\u0647\u0627","\u0643\u0631\u062f","\u0634\u062f","\u0627\u064a","\u062a\u0627","\u0643\u0646\u062f","\u0628\u0631","\u0628\u0648\u062f","\u06af\u0641\u062a","\u0646\u064a\u0632","\u0648\u064a","\u0647\u0645","\u0643\u0646\u0646\u062f","\u062f\u0627\u0631\u062f","\u0645\u0627","\u0643\u0631\u062f\u0647","\u064a\u0627","\u0627\u0645\u0627","\u0628\u0627\u064a\u062f","\u062f\u0648","\u0627\u0646\u062f","\u0647\u0631","\u062e\u0648\u0627\u0647\u062f","\u0627\u0648","\u0645\u0648\u0631\u062f","\u0622\u0646\u0647\u0627","\u0628\u0627\u0634\u062f","\u062f\u064a\u06af\u0631","\u0645\u0631\u062f\u0645","\u0646\u0645\u064a","\u0628\u064a\u0646","\u067e\u064a\u0634","\u067e\u0633","\u0627\u06af\u0631","\u0647\u0645\u0647","\u0635\u0648\u0631\u062a","\u064a\u0643\u064a","\u0647\u0633\u062a\u0646\u062f","\u0628\u064a","\u0645\u0646","\u062f\u0647\u062f","\u0647\u0632\u0627\u0631","\u0646\u064a\u0633\u062a","\u0627\u0633\u062a\u0641\u0627\u062f\u0647","\u062f\u0627\u062f","\u062f\u0627\u0634\u062a\u0647","\u062f\u0627\u0634\u062a","\u0686\u0647","\u0647\u0645\u0686\u0646\u064a\u0646","\u0643\u0631\u062f\u0646\u062f","\u062f\u0627\u062f\u0647","\u0628\u0648\u062f\u0647","\u062f\u0627\u0631\u0646\u062f","\u0647\u0645\u064a\u0646","\u0645\u064a\u0644\u064a\u0648\u0646","\u0633\u0648\u064a","\u0634\u0648\u0646\u062f","\u0628\u064a\u0634\u062a\u0631","\u0628\u0633\u064a\u0627\u0631","\u0631\u0648\u064a","\u06af\u0631\u0641\u062a\u0647","\u0647\u0627\u064a\u064a","\u062a\u0648\u0627\u0646\u062f","\u0627\u0648\u0644","\u0646\u0627\u0645","\u0647\u064a\u0686","\u0686\u0646\u062f","\u062c\u062f\u064a\u062f","\u0628\u064a\u0634","\u0634\u062f\u0646","\u0643\u0631\u062f\u0646","\u0643\u0646\u064a\u0645","\u0646\u0634\u0627\u0646","\u062d\u062a\u064a","\u0627\u064a\u0646\u0643\u0647","\u0648\u0644?","\u062a\u0648\u0633\u0637","\u0686\u0646\u064a\u0646","\u0628\u0631\u062e\u064a","\u0646\u0647","\u062f\u064a\u0631\u0648\u0632","\u062f\u0648\u0645","\u062f\u0631\u0628\u0627\u0631\u0647","\u0628\u0639\u062f","\u0645\u062e\u062a\u0644\u0641","\u06af\u064a\u0631\u062f","\u0634\u0645\u0627","\u06af\u0641\u062a\u0647","\u0622\u0646\u0627\u0646","\u0628\u0627\u0631","\u0637\u0648\u0631","\u06af\u0631\u0641\u062a","\u062f\u0647\u0646\u062f","\u06af\u0630\u0627\u0631\u064a","\u0628\u0633\u064a\u0627\u0631\u064a","\u0637\u064a","\u0628\u0648\u062f\u0646\u062f","\u0645\u064a\u0644\u064a\u0627\u0631\u062f","\u0628\u062f\u0648\u0646","\u062a\u0645\u0627\u0645","\u0643\u0644","\u062a\u0631","\u0628\u0631\u0627\u0633\u0627\u0633","\u0634\u062f\u0646\u062f","\u062a\u0631\u064a\u0646","\u0627\u0645\u0631\u0648\u0632","\u0628\u0627\u0634\u0646\u062f","\u0646\u062f\u0627\u0631\u062f","\u0686\u0648\u0646","\u0642\u0627\u0628\u0644","\u06af\u0648\u064a\u062f","\u062f\u064a\u06af\u0631\u064a","\u0647\u0645\u0627\u0646","\u062e\u0648\u0627\u0647\u0646\u062f","\u0642\u0628\u0644","\u0622\u0645\u062f\u0647","\u0627\u0643\u0646\u0648\u0646","\u062a\u062d\u062a","\u0637\u0631\u064a\u0642","\u06af\u064a\u0631\u064a","\u062c\u0627\u064a","\u0647\u0646\u0648\u0632","\u0686\u0631\u0627","\u0627\u0644\u0628\u062a\u0647","\u0643\u0646\u064a\u062f","\u0633\u0627\u0632\u064a","\u0633\u0648\u0645","\u0643\u0646\u0645","\u0628\u0644\u0643\u0647","\u0632\u064a\u0631","\u062a\u0648\u0627\u0646\u0646\u062f","\u0636\u0645\u0646","\u0641\u0642\u0637","\u0628\u0648\u062f\u0646","\u062d\u0642","\u0622\u064a\u062f","\u0648\u0642\u062a\u064a","\u0627\u0634","\u064a\u0627\u0628\u062f","\u0646\u062e\u0633\u062a\u064a\u0646","\u0645\u0642\u0627\u0628\u0644","\u062e\u062f\u0645\u0627\u062a","\u0627\u0645\u0633\u0627\u0644","\u062a\u0627\u0643\u0646\u0648\u0646","\u0645\u0627\u0646\u0646\u062f","\u062a\u0627\u0632\u0647","\u0622\u0648\u0631\u062f","\u0641\u0643\u0631","\u0622\u0646\u0686\u0647","\u0646\u062e\u0633\u062a","\u0646\u0634\u062f\u0647","\u0634\u0627\u064a\u062f","\u0686\u0647\u0627\u0631","\u062c\u0631\u064a\u0627\u0646","\u067e\u0646\u062c","\u0633\u0627\u062e\u062a\u0647","\u0632\u064a\u0631\u0627","\u0646\u0632\u062f\u064a\u0643","\u0628\u0631\u062f\u0627\u0631\u064a","\u0643\u0633\u064a","\u0631\u064a\u0632\u064a","\u0631\u0641\u062a","\u06af\u0631\u062f\u062f","\u0645\u062b\u0644","\u0622\u0645\u062f","\u0627\u0645","\u0628\u0647\u062a\u0631\u064a\u0646","\u062f\u0627\u0646\u0633\u062a","\u0643\u0645\u062a\u0631","\u062f\u0627\u062f\u0646","\u062a\u0645\u0627\u0645\u064a","\u062c\u0644\u0648\u06af\u064a\u0631\u064a","\u0628\u064a\u0634\u062a\u0631\u064a","\u0627\u064a\u0645","\u0646\u0627\u0634\u064a","\u0686\u064a\u0632\u064a","\u0622\u0646\u0643\u0647","\u0628\u0627\u0644\u0627","\u0628\u0646\u0627\u0628\u0631\u0627\u064a\u0646","\u0627\u064a\u0634\u0627\u0646","\u0628\u0639\u0636\u064a","\u062f\u0627\u062f\u0646\u062f","\u062f\u0627\u0634\u062a\u0646\u062f","\u0628\u0631\u062e\u0648\u0631\u062f\u0627\u0631","\u0646\u062e\u0648\u0627\u0647\u062f","\u0647\u0646\u06af\u0627\u0645","\u0646\u0628\u0627\u064a\u062f","\u063a\u064a\u0631","\u0646\u0628\u0648\u062f","\u062f\u064a\u062f\u0647","\u0648\u06af\u0648","\u062f\u0627\u0631\u064a\u0645","\u0686\u06af\u0648\u0646\u0647","\u0628\u0646\u062f\u064a","\u062e\u0648\u0627\u0633\u062a","\u0641\u0648\u0642","\u062f\u0647","\u0646\u0648\u0639\u064a","\u0647\u0633\u062a\u064a\u0645","\u062f\u064a\u06af\u0631\u0627\u0646","\u0647\u0645\u0686\u0646\u0627\u0646","\u0633\u0631\u0627\u0633\u0631","\u0646\u062f\u0627\u0631\u0646\u062f","\u06af\u0631\u0648\u0647\u064a","\u0633\u0639\u064a","\u0631\u0648\u0632\u0647\u0627\u064a","\u0622\u0646\u062c\u0627","\u064a\u0643\u062f\u064a\u06af\u0631","\u0643\u0631\u062f\u0645","\u0628\u064a\u0633\u062a","\u0628\u0631\u0648\u0632","\u0633\u067e\u0633","\u0631\u0641\u062a\u0647","\u0622\u0648\u0631\u062f\u0647","\u0646\u0645\u0627\u064a\u062f","\u0628\u0627\u0634\u064a\u0645","\u06af\u0648\u064a\u0646\u062f","\u0632\u064a\u0627\u062f","\u062e\u0648\u064a\u0634","\u0647\u0645\u0648\u0627\u0631\u0647","\u06af\u0630\u0627\u0634\u062a\u0647","\u0634\u0634","\u0646\u062f\u0627\u0634\u062a\u0647","\u0634\u0646\u0627\u0633\u064a","\u062e\u0648\u0627\u0647\u064a\u0645","\u0622\u0628\u0627\u062f","\u062f\u0627\u0634\u062a\u0646","\u0646\u0638\u064a\u0631","\u0647\u0645\u0686\u0648\u0646","\u0628\u0627\u0631\u0647","\u0646\u0643\u0631\u062f\u0647","\u0634\u0627\u0646","\u0633\u0627\u0628\u0642","\u0647\u0641\u062a","\u062f\u0627\u0646\u0646\u062f","\u062c\u0627\u064a\u064a","\u0628?","\u062c\u0632","\u0632?\u0631\u0650","\u0631\u0648?\u0650","\u0633\u0631?\u0650","\u062a\u0648?\u0650","\u062c\u0644\u0648?\u0650","\u067e?\u0634\u0650","\u0639\u0642\u0628\u0650","\u0628\u0627\u0644\u0627?\u0650","\u062e\u0627\u0631\u062c\u0650","\u0648\u0633\u0637\u0650","\u0628?\u0631\u0648\u0646\u0650","\u0633\u0648?\u0650","\u0643\u0646\u0627\u0631\u0650","\u067e\u0627\u0639?\u0646\u0650","\u0646\u0632\u062f\u0650","\u0646\u0632\u062f?\u0643\u0650","\u062f\u0646\u0628\u0627\u0644\u0650","\u062d\u062f\u0648\u062f\u0650","\u0628\u0631\u0627\u0628\u0631\u0650","\u0637\u0628\u0642\u0650","\u0645\u0627\u0646\u0646\u062f\u0650","\u0636\u062f\u0651\u0650","\u0647\u0646\u06af\u0627\u0645\u0650","\u0628\u0631\u0627?\u0650","\u0645\u062b\u0644\u0650","\u0628\u0627\u0631\u0629","\u0627\u062b\u0631\u0650","\u062a\u0648\u0644\u0650","\u0639\u0644\u0651\u062a\u0650","\u0633\u0645\u062a\u0650","\u0639\u0646\u0648\u0627\u0646\u0650","\u0642\u0635\u062f\u0650","\u0631\u0648\u0628","\u062c\u062f\u0627","\u0643?","\u0643\u0647","\u0686?\u0633\u062a","\u0647\u0633\u062a","\u0643\u062c\u0627","\u0643\u062c\u0627\u0633\u062a","\u0643\u064e?","\u0686\u0637\u0648\u0631","\u0643\u062f\u0627\u0645","\u0622?\u0627","\u0645\u06af\u0631","\u0686\u0646\u062f?\u0646","?\u0643","\u0686?\u0632?","\u062f?\u06af\u0631","\u0643\u0633?","\u0628\u0639\u0631?","\u0647?\u0686","\u0686?\u0632","\u062c\u0627","\u0643\u0633","\u0647\u0631\u06af\u0632","?\u0627","\u062a\u0646\u0647\u0627","\u0628\u0644\u0643\u0647","\u062e?\u0627\u0647","\u0628\u0644\u0647","\u0628\u0644?","\u0622\u0631\u0647","\u0622\u0631?","\u0645\u0631\u0633?","\u0627\u0644\u0628\u062a\u0651\u0647","\u0644\u0637\u0641\u0627\u064b","\u0651\u0647","\u0627\u0646\u0643\u0647","\u0648\u0642\u062a?\u0643\u0647","\u0647\u0645?\u0646","\u067e?\u0634","\u0645\u062f\u0651\u062a?","\u0647\u0646\u06af\u0627\u0645?","\u0645\u0627\u0646","\u062a\u0627\u0646","?","\u0648\u0631","\u0647\u0645\u0645\u0648\u0646","\u0648?","\u0643\u0646\u0646   ","\u0643\u0646\u0646\u062f   ","\u0645?\u200c\u0643\u0646\u0646\u062f   ","\u0645?\u200c\u0643\u0646\u0646   ","\u0647\u0645\u0645\u0648\u0646   ","\u0646\u0632\u062f?\u0645   ","\u0646\u0645?\u0645\u0648\u0646?\u062f   ","\u062f\u0627\u0631\u0627?","\u062e\u0648\u062f?","\u0648\u06af\u0631\u062f","\u0647\u0645\u0627\u0646\u0646\u062f","\u0628\u0634\u0648\u0646\u062f","\u0646\u0645?\u200c\u0643\u0646\u0646\u062f   ","\u0627\u0646\u0647\u0627","\u0628\u0627\u0632\u0645","\u067e?\u0634\u0634\u0648\u0646   ","?\u06af\u0631\u062f?   ","\u0648\u0646\u0646","\u0631\u0648?\u0645","\u0627\u0628\u062f\u0627","\u0639\u0645\u062f\u062a\u0627","\u0628\u0646\u062f?","\u0645?\u200c\u06af\u0646   ","\u0645\u0646\u062f","\u0622\u062e\u0647","\u0622\u0648\u0631\u062f\u0647   ","\u0631\u0627\u0628\u0633?\u0627\u0631   ","\u0645?\u200c\u0628\u0627\u0634\u062f   ","\u0633\u0627\u062e\u062a\u0647\u200c\u0627\u0645   ","\u0645?\u200c\u06af\u0631\u062f\u062f   ","\u062f\u0631\u0628\u0627\u0631\u0647   ","\u0648\u0628\u0631\u0627?   ","\u0645?\u200c\u062f\u0647?\u0645  ","\u062e\u0648?\u0634","\u062f\u0648\u0628\u0627\u0631\u0647\u200c\u0627?","\u067e\u0631\u0627\u0632","\u0647\u0634\u0627\u0646","\u0628\u062a\u0648\u0627\u0646","\u0645?\u200c\u0646\u0648\u0634\u0646\u062f","\u0646\u0631?\u0645","\u0646\u062f?\u062f?","\u062f\u0627\u0634\u062a\u0646\u062f","\u0628\u062e\u0648\u0628?","\u0645?\u200c\u062e\u0648\u0627\u0633\u062a\u0646","\u062f\u0631","\u062a\u0648?","\u0628\u0627","\u0643\u0647","\u0628\u0647","\u062a\u0648","\u0634\u062f","\u0631\u0627 ","\u0634\u062f\u0647","\u0627\u0633\u062a","\u0647\u0645","\u0627\u0632","\u0646\u0645?\u200c\u06af?\u0631\u0646\u062f","\u0628?\u0646","\u0628?\u0646\u0645\u0627\u0646","\u0645\u0647\u0645\u062a\u0631\u0647","\u0628?\u0627\u0631?\u0645","\u0648\u0627\u0633\u0634","\u0628\u062f\u0647?\u062f","\u0646\u0643\u0646\u0646\u062f","\u06af\u0630\u0627\u0631?","\u0645\u0627\u0627","\u0646\u0645?\u200c\u0627\u0648\u0631\u0645","\u062e\u0627\u0633\u062a","\u0631\u0641\u062a\u0647\u200c\u0627\u0645","\u0646\u0645?\u200c\u0627\u0648\u0631\u0645","\u0647\u0627?\u062a","\u0646\u0645?\u200c\u0628\u0631\u062f","\u0647\u0645\u0686\u0646\u0627\u0646\u0643\u0647","\u0628\u0634?\u062f","\u0646\u0645?\u200c\u0631\u0648\u0645","\u062a\u0627\u0646","\u0646\u0645?\u0645\u0648\u0646?\u062f","\u0647\u0645\u0645\u0648\u0646","\u0648\u0631","\u062a\u0646\u0647\u0627","\u0645?\u200c\u062e\u0648\u0627\u0647\u0646\u062f","\u062f\u0686\u0627\u0631","\u0634\u0646\u0627\u0633?\u062f","\u062e\u0648\u062f?","\u0648\u06af\u0631\u062f","\u0628\u0648\u062c\u0648\u062f","\u0647\u0645\u0627\u0646\u0646\u062f","\u062f\u0627\u0631\u0627?","\u0628\u0631?\u0632?\u062f","\u0628\u0634\u0645","\u0643\u0646\u0647","\u0643\u0646\u064a\u0645","\u064a","\u0643\u0646\u0646\u062f","\u0648","\u0643\u0646\u064a","\u0645\u064a\u0643\u0646\u0645","\u0643\u0646\u0645","\u0645?","\u0627?\u0646","\u062f\u0627\u0631\u0647","\u0686\u064a","\u062a\u0648\u0646","\u0628\u0647\u0645","\u0628\u0639\u062f\u0627","\u0647\u0627\u0634","\u0628\u0634\u064a","\u0645\u064a\u0643\u0646\u062f","\u0643\u0631\u062f\u0647","\u0627?\u062f","\u06af\u0631\u0686\u0647","\u0627\u0632\u0634","\u0645\u064a\u0643\u0646\u0647","\u0645\u064a\u200c\u0631\u0645","\u0643\u0646\u0647","\u0643\u0631\u062f","\u0628\u0627\u0634\u0647","\u062f\u0648\u0646?\u062f","\u064a\u0643","\u0628\u06af\u064a\u0631\u0645","\u0634\u062f\u064a\u062f","\u0628\u0632\u0646\u064a\u062f","\u0646\u0634\u0648\u0646","\u0631\u0648\u0649","\u0631\u0633\u064a\u062f","\u0628\u0634\u0646","\u0628\u0631\u064a","\u062f\u0627\u0631\u0645","\u0627\u0644\u064a","\u06af\u0647","\u0627\u064a\u0646\u0637\u0648\u0631\u064a","\u0643\u0644\u064a","\u062a\u0648\u0646\u0633\u062a","\u062f\u0627\u0631\u0645","\u064a\u0647","\u0646\u062f\u0627\u0631\u0647","\u0628\u064a\u0627\u062f","\u062c\u0648\u0631","\u0643\u0631\u062f\u0647","\u0628\u0648\u062f\u0645","\u062a\u0648\u064a","\u0643\u0631\u062f\u064a\u062f","\u0647\u0633\u062a\u0646","\u0627\u0648\u0646","\u0645\u064a\u0634\u0647","\u0634\u0648","\u0628\u0634\u0645","\u0628\u0631\u064a\u062f","\u0628\u0631\u064a\u0645","\u0628\u0648\u062f?\u062f","\u0686\u064a\u0647","\u0628\u0627\u0634\u0647","\u0648\u0627\u0642\u0639\u0627","\u0631\u0648","\u0647\u0633\u062a?\u062f","\u0627\u064a\u0646\u062c\u0627","\u0648\u0627\u0631\u062f","\u062a\u0648\u0634","\u0627\u064a\u0646\u0643\u0647","\u0622\u064a\u0627","\u0628\u062f\u0645","\u0628\u0627\u0634\u0647","\u0628\u0647\u0634\u0648\u0646","\u064a\u0639\u0646\u064a","\u0645\u0648\u0646","\u0634\u0631\u0637","\u0627\u064a\u0646\u0627","\u0643\u0631\u062f\u0645","\u0628\u062f\u0627\u0646","\u0646\u0628\u0627\u0634","\u0646\u062f\u0627\u062f","\u0645\u064a\u200c\u0643\u0646\u0646","\u0643\u0631\u062f\u0646","\u0643\u0631\u062f\u0647","\u0627\u0648\u0646","\u0645\u064a\u0631\u0646","\u0634\u062f\u064a\u0645","\u0628\u0631\u0627?","\u0645\u064a\u0643\u0646\u064a\u0645","\u0643\u0646?\u0645","\u062e\u0648\u062f\u0645","\u060c","\u0649","\u0639\u0644\u0627\u0631\u063a\u0645","\u060c","\u0646\u0645\u064a\u0643\u0646\u0646","\u0645\u064a\u0631\u0648\u0645","\u0627\u0648\u0646\u062c\u0627",".","\u0627\u0648\u0646\u0627","\u0627\u0647","\u0627\u064a\u0646\u062c\u0648\u0631","\u0627\u062a","\u062e\u0648\u0627\u0647\u064a\u0645\u0643\u0631\u062f","\u0645\u064a\u200c\u06af\u064a\u0631\u0647","\u0645\u064a\u062f\u0647\u0645","\u062e\u064a\u0644\u064a","\u0645?\u200c\u0643\u0646\u0646\u062f","\u0643\u0646\u0646","\u0646\u0643\u0646\u0647","\u061f","?","\u0645?\u200c\u0643\u0646\u062f","\u0634\u062f\u0647\u200c\u0627\u0646\u062f","\u0628\u0627\u0634\u0645","\u0646\u0627","\u062d\u062a?","\u0645?\u200c\u062f\u0627\u062f","\u0645?\u200c\u0634\u0648\u0646\u062f","\u0643\u0631\u062f\u0646\u062f","\u0645?\u200c\u0643\u0646\u0645","\u0645?\u200c\u062f\u0647\u062f","\u0643\u0631\u062f\u064a\u0645","\u0643\u0646\u064a\u062f","_","\u0628\u0631\u0627\u0649","\u0647\u0627?","\u0647\u0627?a","\u061b","\u060c",".","\u2026","","\u0648","\u062f\u0631","\u0628\u0647","\u0627\u0632","\u0643\u0647","\u0645\u064a","\u0627\u064a\u0646","\u0627\u0633\u062a","\u0631\u0627","\u0628\u0627","\u0647\u0627\u064a","\u0628\u0631\u0627\u064a","\u0622\u0646","\u064a\u0643","\u0634\u0648\u062f","\u0634\u062f\u0647","\u062e\u0648\u062f","\u0647\u0627","\u0643\u0631\u062f","\u0634\u062f","\u0627\u064a","\u062a\u0627","\u0643\u0646\u062f","\u0628\u0631","\u0628\u0648\u062f","\u06af\u0641\u062a","\u0646\u064a\u0632","\u0648\u064a","\u0647\u0645","\u0643\u0646\u0646\u062f","\u062f\u0627\u0631\u062f","\u0645\u0627","\u0643\u0631\u062f\u0647","\u064a\u0627","\u0627\u0645\u0627","\u0628\u0627\u064a\u062f","\u062f\u0648","\u0627\u0646\u062f","\u0647\u0631","\u062e\u0648\u0627\u0647\u062f","\u0627\u0648","\u0645\u0648\u0631\u062f","\u0622\u0646\u0647\u0627","\u0628\u0627\u0634\u062f","\u062f\u064a\u06af\u0631","\u0645\u0631\u062f\u0645","\u0646\u0645\u064a","\u0628\u064a\u0646","\u067e\u064a\u0634","\u067e\u0633","\u0627\u06af\u0631","\u0647\u0645\u0647","\u0635\u0648\u0631\u062a","\u064a\u0643\u064a","\u0647\u0633\u062a\u0646\u062f","\u0628\u064a","\u0645\u0646","\u062f\u0647\u062f","\u0647\u0632\u0627\u0631","\u0646\u064a\u0633\u062a","\u0627\u0633\u062a\u0641\u0627\u062f\u0647","\u062f\u0627\u062f","\u062f\u0627\u0634\u062a\u0647","\u062f\u0627\u0634\u062a","\u0686\u0647","\u0647\u0645\u0686\u0646\u064a\u0646","\u0643\u0631\u062f\u0646\u062f","\u062f\u0627\u062f\u0647","\u0628\u0648\u062f\u0647","\u062f\u0627\u0631\u0646\u062f","\u0647\u0645\u064a\u0646","\u0645\u064a\u0644\u064a\u0648\u0646","\u0633\u0648\u064a","\u0634\u0648\u0646\u062f","\u0628\u064a\u0634\u062a\u0631","\u0628\u0633\u064a\u0627\u0631","\u0631\u0648\u064a","\u06af\u0631\u0641\u062a\u0647","\u0647\u0627\u064a\u064a","\u062a\u0648\u0627\u0646\u062f","\u0627\u0648\u0644","\u0646\u0627\u0645","\u0647\u064a\u0686","\u0686\u0646\u062f","\u062c\u062f\u064a\u062f","\u0628\u064a\u0634","\u0634\u062f\u0646","\u0643\u0631\u062f\u0646","\u0643\u0646\u064a\u0645","\u0646\u0634\u0627\u0646","\u062d\u062a\u064a","\u0627\u064a\u0646\u0643\u0647","\u0648\u0644\u06cc","\u062a\u0648\u0633\u0637","\u0686\u0646\u064a\u0646","\u0628\u0631\u062e\u064a","\u0646\u0647","\u062f\u064a\u0631\u0648\u0632","\u062f\u0648\u0645","\u062f\u0631\u0628\u0627\u0631\u0647","\u0628\u0639\u062f","\u0645\u062e\u062a\u0644\u0641","\u06af\u064a\u0631\u062f","\u0634\u0645\u0627","\u06af\u0641\u062a\u0647","\u0622\u0646\u0627\u0646","\u0628\u0627\u0631","\u0637\u0648\u0631","\u06af\u0631\u0641\u062a","\u062f\u0647\u0646\u062f","\u06af\u0630\u0627\u0631\u064a","\u0628\u0633\u064a\u0627\u0631\u064a","\u0637\u064a","\u0628\u0648\u062f\u0646\u062f","\u0645\u064a\u0644\u064a\u0627\u0631\u062f","\u0628\u062f\u0648\u0646","\u062a\u0645\u0627\u0645","\u0643\u0644","\u062a\u0631\t\u0628\u0631\u0627\u0633\u0627\u0633","\u0634\u062f\u0646\u062f","\u062a\u0631\u064a\u0646","\u0627\u0645\u0631\u0648\u0632","\u0628\u0627\u0634\u0646\u062f","\u0646\u062f\u0627\u0631\u062f","\u0686\u0648\u0646","\u0642\u0627\u0628\u0644","\u06af\u0648\u064a\u062f","\u062f\u064a\u06af\u0631\u064a","\u0647\u0645\u0627\u0646","\u062e\u0648\u0627\u0647\u0646\u062f","\u0642\u0628\u0644","\u0622\u0645\u062f\u0647","\u0627\u0643\u0646\u0648\u0646","\u062a\u062d\u062a","\u0637\u0631\u064a\u0642","\u06af\u064a\u0631\u064a","\u062c\u0627\u064a","\u0647\u0646\u0648\u0632","\u0686\u0631\u0627","\u0627\u0644\u0628\u062a\u0647","\u0643\u0646\u064a\u062f","\u0633\u0627\u0632\u064a","\u0633\u0648\u0645","\u0643\u0646\u0645","\u0628\u0644\u0643\u0647","\u0632\u064a\u0631","\u062a\u0648\u0627\u0646\u0646\u062f","\u0636\u0645\u0646","\u0641\u0642\u0637","\u0628\u0648\u062f\u0646","\u062d\u0642","\u0622\u064a\u062f","\u0648\u0642\u062a\u064a","\u0627\u0634","\u064a\u0627\u0628\u062f","\u0646\u062e\u0633\u062a\u064a\u0646","\u0645\u0642\u0627\u0628\u0644","\u062e\u062f\u0645\u0627\u062a","\u0627\u0645\u0633\u0627\u0644","\u062a\u0627\u0643\u0646\u0648\u0646","\u0645\u0627\u0646\u0646\u062f","\u062a\u0627\u0632\u0647","\u0622\u0648\u0631\u062f","\u0641\u0643\u0631","\u0622\u0646\u0686\u0647","\u0646\u062e\u0633\u062a","\u0646\u0634\u062f\u0647","\u0634\u0627\u064a\u062f","\u0686\u0647\u0627\u0631","\u062c\u0631\u064a\u0627\u0646","\u067e\u0646\u062c","\u0633\u0627\u062e\u062a\u0647","\u0632\u064a\u0631\u0627","\u0646\u0632\u062f\u064a\u0643","\u0628\u0631\u062f\u0627\u0631\u064a","\u0643\u0633\u064a","\u0631\u064a\u0632\u064a","\u0631\u0641\u062a","\u06af\u0631\u062f\u062f","\u0645\u062b\u0644","\u0622\u0645\u062f","\u0627\u0645","\u0628\u0647\u062a\u0631\u064a\u0646","\u062f\u0627\u0646\u0633\u062a","\u0643\u0645\u062a\u0631","\u062f\u0627\u062f\u0646","\u062a\u0645\u0627\u0645\u064a","\u062c\u0644\u0648\u06af\u064a\u0631\u064a","\u0628\u064a\u0634\u062a\u0631\u064a","\u0627\u064a\u0645","\u0646\u0627\u0634\u064a","\u0686\u064a\u0632\u064a","\u0622\u0646\u0643\u0647","\u0628\u0627\u0644\u0627","\u0628\u0646\u0627\u0628\u0631\u0627\u064a\u0646","\u0627\u064a\u0634\u0627\u0646","\u0628\u0639\u0636\u064a","\u062f\u0627\u062f\u0646\u062f","\u062f\u0627\u0634\u062a\u0646\u062f","\u0628\u0631\u062e\u0648\u0631\u062f\u0627\u0631","\u0646\u062e\u0648\u0627\u0647\u062f","\u0647\u0646\u06af\u0627\u0645","\u0646\u0628\u0627\u064a\u062f","\u063a\u064a\u0631","\u0646\u0628\u0648\u062f","\u062f\u064a\u062f\u0647","\u0648\u06af\u0648","\u062f\u0627\u0631\u064a\u0645","\u0686\u06af\u0648\u0646\u0647","\u0628\u0646\u062f\u064a","\u062e\u0648\u0627\u0633\u062a","\u0641\u0648\u0642","\u062f\u0647","\u0646\u0648\u0639\u064a","\u0647\u0633\u062a\u064a\u0645","\u062f\u064a\u06af\u0631\u0627\u0646","\u0647\u0645\u0686\u0646\u0627\u0646","\u0633\u0631\u0627\u0633\u0631","\u0646\u062f\u0627\u0631\u0646\u062f","\u06af\u0631\u0648\u0647\u064a","\u0633\u0639\u064a","\u0631\u0648\u0632\u0647\u0627\u064a","\u0622\u0646\u062c\u0627","\u064a\u0643\u062f\u064a\u06af\u0631","\u0643\u0631\u062f\u0645","\u0628\u064a\u0633\u062a","\u0628\u0631\u0648\u0632","\u0633\u067e\u0633","\u0631\u0641\u062a\u0647","\u0622\u0648\u0631\u062f\u0647","\u0646\u0645\u0627\u064a\u062f","\u0628\u0627\u0634\u064a\u0645","\u06af\u0648\u064a\u0646\u062f","\u0632\u064a\u0627\u062f","\u062e\u0648\u064a\u0634","\u0647\u0645\u0648\u0627\u0631\u0647","\u06af\u0630\u0627\u0634\u062a\u0647","\u0634\u0634\t\u0646\u062f\u0627\u0634\u062a\u0647","\u0634\u0646\u0627\u0633\u064a","\u062e\u0648\u0627\u0647\u064a\u0645","\u0622\u0628\u0627\u062f","\u062f\u0627\u0634\u062a\u0646","\u0646\u0638\u064a\u0631","\u0647\u0645\u0686\u0648\u0646","\u0628\u0627\u0631\u0647","\u0646\u0643\u0631\u062f\u0647","\u0634\u0627\u0646","\u0633\u0627\u0628\u0642","\u0647\u0641\u062a","\u062f\u0627\u0646\u0646\u062f","\u062c\u0627\u064a\u064a","\u0628\u06cc","\u062c\u0632","\u0632\u06cc\u0631\u0650","\u0631\u0648\u06cc\u0650","\u0633\u0631\u06cc\u0650","\u062a\u0648\u06cc\u0650","\u062c\u0644\u0648\u06cc\u0650","\u067e\u06cc\u0634\u0650","\u0639\u0642\u0628\u0650","\u0628\u0627\u0644\u0627\u06cc\u0650","\u062e\u0627\u0631\u062c\u0650","\u0648\u0633\u0637\u0650","\u0628\u06cc\u0631\u0648\u0646\u0650","\u0633\u0648\u06cc\u0650","\u06a9\u0646\u0627\u0631\u0650","\u067e\u0627\u0639\u06cc\u0646\u0650","\u0646\u0632\u062f\u0650","\u0646\u0632\u062f\u06cc\u06a9\u0650","\u062f\u0646\u0628\u0627\u0644\u0650","\u062d\u062f\u0648\u062f\u0650","\u0628\u0631\u0627\u0628\u0631\u0650","\u0637\u0628\u0642\u0650","\u0645\u0627\u0646\u0646\u062f\u0650","\u0636\u062f\u0651\u0650","\u0647\u0646\u06af\u0627\u0645\u0650","\u0628\u0631\u0627\u06cc\u0650","\u0645\u062b\u0644\u0650","\u0628\u0627\u0631\u0629","\u0627\u062b\u0631\u0650","\u062a\u0648\u0644\u0650","\u0639\u0644\u0651\u062a\u0650","\u0633\u0645\u062a\u0650","\u0639\u0646\u0648\u0627\u0646\u0650","\u0642\u0635\u062f\u0650","\u0631\u0648\u0628","\u062c\u062f\u0627","\u06a9\u06cc","\u06a9\u0647","\u0686\u06cc\u0633\u062a","\u0647\u0633\u062a","\u06a9\u062c\u0627","\u06a9\u062c\u0627\u0633\u062a","\u06a9\u064e\u06cc","\u0686\u0637\u0648\u0631","\u06a9\u062f\u0627\u0645","\u0622\u06cc\u0627","\u0645\u06af\u0631","\u0686\u0646\u062f\u06cc\u0646","\u06cc\u06a9","\u0686\u06cc\u0632\u06cc","\u062f\u06cc\u06af\u0631","\u06a9\u0633\u06cc","\u0628\u0639\u0631\u06cc","\u0647\u06cc\u0686","\u0686\u06cc\u0632","\u062c\u0627","\u06a9\u0633","\u0647\u0631\u06af\u0632","\u06cc\u0627","\u062a\u0646\u0647\u0627","\u0628\u0644\u06a9\u0647","\u062e\u06cc\u0627\u0647","\u0628\u0644\u0647","\u0628\u0644\u06cc","\u0622\u0631\u0647","\u0622\u0631\u06cc","\u0645\u0631\u0633\u06cc","\u0627\u0644\u0628\u062a\u0651\u0647","\u0644\u0637\u0641\u0627\u064b","\u0651\u0647","\u0627\u0646\u06a9\u0647","\u0648\u0642\u062a\u06cc\u06a9\u0647","\u0647\u0645\u06cc\u0646","\u067e\u06cc\u0634","\u0645\u062f\u0651\u062a\u06cc","\u0647\u0646\u06af\u0627\u0645\u06cc","\u0645\u0627\u0646","\u062a\u0627\u0646","!",'"',"#","(",")","*",",","-",".","/",":","[","]","\xab","\xbb","\u060c","\u061b","\u061f","\u0622\u0628\u0627\u062f","\u0622\u062e","\u0622\u062e\u0631","\u0622\u062e\u0631\u0647\u0627","\u0622\u062e\u0647","\u0622\u062f\u0645\u0647\u0627\u0633\u062a","\u0622\u0631\u0627\u0645","\u0622\u0631\u0627\u0645 \u0622\u0631\u0627\u0645","\u0622\u0631\u0647","\u0622\u0631\u06cc","\u0622\u0632\u0627\u062f\u0627\u0646\u0647","\u0622\u0633\u0627\u0646","\u0622\u0633\u06cc\u0628 \u067e\u0630\u06cc\u0631\u0646\u062f","\u0622\u0634\u0646\u0627\u06cc\u0646\u062f","\u0622\u0634\u06a9\u0627\u0631\u0627","\u0622\u0642\u0627","\u0622\u0642\u0627\u06cc","\u0622\u0642\u0627\u06cc\u0627\u0646","\u0622\u0645\u062f","\u0622\u0645\u062f\u0646","\u0622\u0645\u062f\u0647","\u0622\u0645\u0631\u0627\u0646\u0647","\u0622\u0646","\u0622\u0646 \u06af\u0627\u0647","\u0622\u0646\u0627\u0646","\u0622\u0646\u0627\u0646\u06cc","\u0622\u0646\u062c\u0627","\u0622\u0646\u0631\u0627","\u0622\u0646\u0637\u0648\u0631","\u0622\u0646\u0642\u062f\u0631","\u0622\u0646\u0647\u0627","\u0622\u0646\u0647\u0627\u0633\u062a","\u0622\u0646\u0686\u0646\u0627\u0646","\u0622\u0646\u0686\u0646\u0627\u0646 \u06a9\u0647","\u0622\u0646\u0686\u0647","\u0622\u0646\u06a9\u0647","\u0622\u0646\u06af\u0627\u0647","\u0622\u0646\u200c\u0647\u0627","\u0622\u0647\u0627\u0646","\u200c\u0647\u0627\u06cc","\u0622\u0647\u0627\u06cc","\u0622\u0648\u0631","\u0622\u0648\u0631\u062f","\u0622\u0648\u0631\u062f\u0646","\u0622\u0648\u0631\u062f\u0647","\u0622\u0648\u0647","\u0622\u06cc","\u0622\u06cc\u0627","\u0622\u06cc\u062f","\u0622\u06cc\u0646\u062f","\u0627","\u0627\u062a\u0641\u0627\u0642\u0627","\u0627\u062b\u0631\u0650","\u0627\u062c\u0631\u0627\u0633\u062a","\u0627\u062d\u062a\u0631\u0627\u0645\u0627","\u0627\u062d\u062a\u0645\u0627\u0644\u0627","\u0627\u062d\u06cc\u0627\u0646\u0627\u064b","\u0627\u062e\u06cc\u0631","\u0627\u062e\u06cc\u0631\u0627\u064b","\u0627\u0631\u06cc","\u0627\u0632","\u0627\u0632 \u0622\u0646 \u067e\u0633","\u0627\u0632 \u062c\u0645\u0644\u0647","\u0627\u0632\u0627\u06cc\u0646 \u0631\u0648","\u0627\u0632\u062c\u0645\u0644\u0647","\u0627\u0632\u0634","\u0627\u0633\u0627\u0633\u0627","\u0627\u0633\u0627\u0633\u0627\u064b","\u0627\u0633\u062a","\u0627\u0633\u062a\u0641\u0627\u062f","\u0627\u0633\u062a\u0641\u0627\u062f\u0647","\u0627\u0633\u0644\u0627\u0645\u06cc \u0627\u0646\u062f","\u0627\u0634","\u0627\u0634\u062a\u0628\u0627\u0647\u0627","\u0627\u0634\u06a9\u0627\u0631\u0627","\u0627\u0635\u0644\u0627","\u0627\u0635\u0644\u0627\u064b","\u0627\u0635\u0648\u0644\u0627","\u0627\u0635\u0648\u0644\u0627\u064b","\u0627\u0639\u0644\u0627\u0645","\u0627\u063a\u0644\u0628","\u0627\u0641\u0632\u0648\u062f","\u0627\u0641\u0633\u0648\u0633","\u0627\u0642\u0644","\u0627\u0642\u0644\u06cc\u062a","\u0627\u0644\u0627","\u0627\u0644\u0627\u0646","\u0627\u0644\u0628\u062a\u0647","\u0627\u0644\u0628\u062a\u0651\u0647","\u0627\u0644\u0647\u06cc","\u0627\u0644\u06cc","\u0627\u0645","\u0627\u0645\u0627","\u0627\u0645\u0631\u0648\u0632","\u0627\u0645\u0631\u0648\u0632\u0647","\u0627\u0645\u0633\u0627\u0644","\u0627\u0645\u0634\u0628","\u0627\u0645\u0648\u0631","\u0627\u0645\u06cc\u062f\u0648\u0627\u0631\u0645","\u0627\u0645\u06cc\u062f\u0648\u0627\u0631\u0646\u062f","\u0627\u0645\u06cc\u062f\u0648\u0627\u0631\u06cc\u0645","\u0627\u0646","\u0627\u0646 \u0634\u0627\u0623\u0627\u0644\u0644\u0647","\u0627\u0646\u062a\u0647\u0627","\u0627\u0646\u062c\u0627\u0645","\u0627\u0646\u062f","\u0627\u0646\u062f\u06a9\u06cc","\u0627\u0646\u0634\u0627\u0627\u0644\u0644\u0647","\u0627\u0646\u0635\u0627\u0641\u0627","\u0627\u0646\u0637\u0648\u0631","\u0627\u0646\u0642\u062f\u0631","\u0627\u0646\u0647\u0627","\u0627\u0646\u0686\u0646\u0627\u0646","\u0627\u0646\u06a9\u0647","\u0627\u0646\u06af\u0627\u0631","\u0627\u0648","\u0627\u0648\u0633\u062a","\u0627\u0648\u0644","\u0627\u0648\u0644\u0627","\u0627\u0648\u0644\u0627\u064b","\u0627\u0648\u0644\u06cc\u0646","\u0627\u0648\u0646","\u0627\u06a9\u062b\u0631","\u0627\u06a9\u062b\u0631\u0627","\u0627\u06a9\u062b\u0631\u0627\u064b","\u0627\u06a9\u062b\u0631\u06cc\u062a","\u0627\u06a9\u0646\u0648\u0646","\u0627\u06af\u0631","\u0627\u06af\u0631 \u0686\u0647","\u0627\u06af\u0631\u0686\u0647","\u0627\u06af\u0647","\u0627\u06cc","\u0627\u06cc\u0627","\u0627\u06cc\u062f","\u0627\u06cc\u0634\u0627\u0646","\u0627\u06cc\u0645","\u0627\u06cc\u0646","\u0627\u06cc\u0646 \u062c\u0648\u0631\u06cc","\u0627\u06cc\u0646 \u0642\u062f\u0631","\u0627\u06cc\u0646 \u06af\u0648\u0646\u0647","\u0627\u06cc\u0646\u0627\u0646","\u0627\u06cc\u0646\u062c\u0627","\u0627\u06cc\u0646\u062c\u0627\u0633\u062a","\u0627\u06cc\u0646\u062f","\u0627\u06cc\u0646\u0637\u0648\u0631","\u0627\u06cc\u0646\u0642\u062f\u0631","\u0627\u06cc\u0646\u0647\u0627","\u0627\u06cc\u0646\u0647\u0627\u0633\u062a","\u0627\u06cc\u0646\u0648","\u0627\u06cc\u0646\u0686\u0646\u06cc\u0646","\u0627\u06cc\u0646\u06a9","\u0627\u06cc\u0646\u06a9\u0647","\u0627\u06cc\u0646\u06af\u0648\u0646\u0647","\u0628 ","\u0628\u0627","\u0628\u0627\u0627\u06cc\u0646 \u062d\u0627\u0644","\u0628\u0627\u0627\u06cc\u0646 \u0648\u062c\u0648\u062f","\u0628\u0627\u062f","\u0628\u0627\u0631","\u0628\u0627\u0631\u0629","\u0628\u0627\u0631\u0647","\u0628\u0627\u0631\u0647\u0627","\u0628\u0627\u0632","\u0628\u0627\u0632 \u0647\u0645","\u0628\u0627\u0632\u0647\u0645","\u0628\u0627\u0632\u06cc \u06a9\u0646\u0627\u0646","\u0628\u0627\u0632\u06cc\u06af\u0648\u0634\u0627\u0646\u0647","\u0628\u0627\u0634","\u0628\u0627\u0634\u062f","\u0628\u0627\u0634\u0645","\u0628\u0627\u0634\u0646\u062f","\u0628\u0627\u0634\u06cc","\u0628\u0627\u0634\u06cc\u062f","\u0628\u0627\u0634\u06cc\u0645","\u0628\u0627\u0644\u0627","\u0628\u0627\u0644\u0627\u062e\u0631\u0647","\u0628\u0627\u0644\u0627\u062e\u0635","\u0628\u0627\u0644\u0627\u0633\u062a","\u0628\u0627\u0644\u0627\u06cc","\u0628\u0627\u0644\u0627\u06cc\u0650","\u0628\u0627\u0644\u0637\u0628\u0639","\u0628\u0627\u0644\u0639\u06a9\u0633","\u0628\u0627\u0648\u062c\u0648\u062f\u06cc \u06a9\u0647","\u0628\u0627\u0648\u0631\u0646\u062f","\u0628\u0627\u06cc\u062f","\u0628\u062a\u062f\u0631\u06cc\u062c","\u0628\u062a\u0648\u0627\u0646","\u0628\u062a\u0648\u0627\u0646\u062f","\u0628\u062a\u0648\u0627\u0646\u06cc","\u0628\u062a\u0648\u0627\u0646\u06cc\u0645","\u0628\u062c\u0632","\u0628\u062e\u0634","\u0628\u062e\u0634\u0647","\u0628\u062e\u0634\u06cc","\u0628\u062e\u0635\u0648\u0635","\u0628\u062e\u0648\u0627\u0647","\u0628\u062e\u0648\u0627\u0647\u062f","\u0628\u062e\u0648\u0627\u0647\u0645","\u0628\u062e\u0648\u0627\u0647\u0646\u062f","\u0628\u062e\u0648\u0627\u0647\u06cc","\u0628\u062e\u0648\u0627\u0647\u06cc\u062f","\u0628\u062e\u0648\u0627\u0647\u06cc\u0645","\u0628\u062e\u0648\u0628\u06cc","\u0628\u062f","\u0628\u062f\u0627\u0646","\u0628\u062f\u0627\u0646\u062c\u0627","\u0628\u062f\u0627\u0646\u0647\u0627","\u0628\u062f\u0647\u06cc\u062f","\u0628\u062f\u0648\u0646","\u0628\u062f\u06cc\u0646","\u0628\u062f\u06cc\u0646 \u062a\u0631\u062a\u06cc\u0628","\u0628\u062f\u06cc\u0646\u062c\u0627","\u0628\u0631","\u0628\u0631\u0622\u0646\u0646\u062f","\u0628\u0631\u0627","\u0628\u0631\u0627\u0628\u0631","\u0628\u0631\u0627\u0628\u0631\u0650","\u0628\u0631\u0627\u062d\u062a\u06cc","\u0628\u0631\u0627\u0633\u0627\u0633","\u0628\u0631\u0627\u0633\u062a\u06cc","\u0628\u0631\u0627\u06cc","\u0628\u0631\u0627\u06cc\u062a","\u0628\u0631\u0627\u06cc\u0634","\u0628\u0631\u0627\u06cc\u0634\u0627\u0646","\u0628\u0631\u0627\u06cc\u0645","\u0628\u0631\u0627\u06cc\u0645\u0627\u0646","\u0628\u0631\u0627\u06cc\u0650","\u0628\u0631\u062e\u0648\u0631\u062f\u0627\u0631","\u0628\u0631\u062e\u0648\u0631\u062f\u0627\u0631\u0646\u062f","\u0628\u0631\u062e\u06cc","\u0628\u0631\u062f\u0627\u0631\u06cc","\u0628\u0631\u0639\u06a9\u0633","\u0628\u0631\u0646\u0627\u0645\u0647 \u0633\u0627\u0632\u0647\u0627\u0633\u062a","\u0628\u0631\u0648\u0632","\u0628\u0631\u0648\u0634\u0646\u06cc","\u0628\u0632\u0631\u06af","\u0628\u0632\u0648\u062f\u06cc","\u0628\u0633","\u0628\u0633\u0627","\u0628\u0633\u0627\u062f\u06af\u06cc","\u0628\u0633\u062e\u062a\u06cc","\u0628\u0633\u0648\u06cc","\u0628\u0633\u06cc","\u0628\u0633\u06cc\u0627\u0631","\u0628\u0633\u06cc\u0627\u0631\u06cc","\u0628\u0634\u062f\u062a","\u0628\u0637\u0648\u0631","\u0628\u0637\u0648\u0631\u06cc \u06a9\u0647","\u0628\u0639\u062f","\u0628\u0639\u062f \u0627\u0632 \u0627\u06cc\u0646 \u06a9\u0647","\u0628\u0639\u062f\u0627","\u0628\u0639\u062f\u0627\u0632\u0638\u0647\u0631","\u0628\u0639\u062f\u0627\u064b","\u0628\u0639\u062f\u0647\u0627","\u0628\u0639\u0631\u06cc","\u0628\u0639\u0636\u0627","\u0628\u0639\u0636\u06cc","\u0628\u0639\u0636\u06cc \u0634\u0627\u0646","\u0628\u0639\u0636\u06cc\u0647\u0627\u06cc\u0634\u0627\u0646","\u0628\u0639\u0636\u06cc\u200c\u0647\u0627","\u0628\u0639\u0644\u0627\u0648\u0647","\u0628\u0639\u06cc\u062f","\u0628\u0641\u0647\u0645\u06cc \u0646\u0641\u0647\u0645\u06cc","\u0628\u0644\u0627\u0641\u0627\u0635\u0644\u0647","\u0628\u0644\u0647","\u0628\u0644\u06a9\u0647","\u0628\u0644\u06cc","\u0628\u0645\u0627\u0646\u062f","\u0628\u0646\u0627\u0628\u0631\u0627\u06cc\u0646","\u0628\u0646\u062f\u06cc","\u0628\u0647","\u0628\u0647 \u0622\u0633\u0627\u0646\u06cc","\u0628\u0647 \u062a\u0627\u0632\u06af\u06cc","\u0628\u0647 \u062a\u062f\u0631\u06cc\u062c","\u0628\u0647 \u062a\u0645\u0627\u0645\u06cc","\u0628\u0647 \u062c\u0627\u06cc","\u0628\u0647 \u062c\u0632","\u0628\u0647 \u062e\u0648\u0628\u06cc","\u0628\u0647 \u062f\u0631\u0634\u062a\u06cc","\u0628\u0647 \u062f\u0644\u062e\u0648\u0627\u0647","\u0628\u0647 \u0631\u0627\u0633\u062a\u06cc","\u0628\u0647 \u0631\u063a\u0645","\u0628\u0647 \u0631\u0648\u0634\u0646\u06cc","\u0628\u0647 \u0632\u0648\u062f\u06cc","\u0628\u0647 \u0633\u0627\u062f\u06af\u06cc","\u0628\u0647 \u0633\u0631\u0639\u062a","\u0628\u0647 \u0634\u0627\u0646","\u0628\u0647 \u0634\u062f\u062a","\u0628\u0647 \u0637\u0648\u0631 \u06a9\u0644\u06cc","\u0628\u0647 \u0637\u0648\u0631\u06cc \u06a9\u0647","\u0628\u0647 \u0639\u0644\u0627\u0648\u0647","\u0628\u0647 \u0642\u062f\u0631\u06cc","\u0628\u0647 \u0645\u0631\u0627\u062a\u0628","\u0628\u0647 \u0646\u0627\u0686\u0627\u0631","\u0628\u0647 \u0647\u0631\u062d\u0627\u0644","\u0628\u0647 \u0647\u06cc\u0686 \u0648\u062c\u0647","\u0628\u0647 \u0648\u0636\u0648\u062d","\u0628\u0647 \u0648\u06cc\u0698\u0647","\u0628\u0647 \u06a9\u0631\u0627\u062a","\u0628\u0647 \u06af\u0631\u0645\u06cc","\u0628\u0647\u062a","\u0628\u0647\u062a\u0631","\u0628\u0647\u062a\u0631\u06cc\u0646","\u0628\u0647\u0634","\u0628\u0648\u062f","\u0628\u0648\u062f\u0645","\u0628\u0648\u062f\u0646","\u0628\u0648\u062f\u0646\u062f","\u0628\u0648\u062f\u0647","\u0628\u0648\u062f\u06cc","\u0628\u0648\u062f\u06cc\u062f","\u0628\u0648\u062f\u06cc\u0645","\u0628\u0648\u06cc\u0698\u0647","\u0628\u067e\u0627","\u0628\u06a9\u0627\u0631","\u0628\u06a9\u0646","\u0628\u06a9\u0646\u062f","\u0628\u06a9\u0646\u0645","\u0628\u06a9\u0646\u0646\u062f","\u0628\u06a9\u0646\u06cc","\u0628\u06a9\u0646\u06cc\u062f","\u0628\u06a9\u0646\u06cc\u0645","\u0628\u06af\u0630\u0627\u0631\u06cc\u0645","\u0628\u06af\u0648","\u0628\u06af\u0648\u06cc\u062f","\u0628\u06af\u0648\u06cc\u0645","\u0628\u06af\u0648\u06cc\u0646\u062f","\u0628\u06af\u0648\u06cc\u06cc","\u0628\u06af\u0648\u06cc\u06cc\u062f","\u0628\u06af\u0648\u06cc\u06cc\u0645","\u0628\u06af\u06cc\u0631","\u0628\u06af\u06cc\u0631\u062f","\u0628\u06af\u06cc\u0631\u0645","\u0628\u06af\u06cc\u0631\u0646\u062f","\u0628\u06af\u06cc\u0631\u06cc","\u0628\u06af\u06cc\u0631\u06cc\u062f","\u0628\u06af\u06cc\u0631\u06cc\u0645","\u0628\u06cc","\u0628\u06cc \u0622\u0646\u06a9\u0647","\u0628\u06cc \u0627\u0637\u0644\u0627\u0639\u0646\u062f","\u0628\u06cc \u062a\u0631\u062f\u06cc\u062f","\u0628\u06cc \u062a\u0641\u0627\u0648\u062a\u0646\u062f","\u0628\u06cc \u0646\u06cc\u0627\u0632\u0645\u0646\u062f\u0627\u0646\u0647","\u0628\u06cc \u0647\u062f\u0641","\u0628\u06cc\u0627","\u0628\u06cc\u0627\u0628","\u0628\u06cc\u0627\u0628\u062f","\u0628\u06cc\u0627\u0628\u0645","\u0628\u06cc\u0627\u0628\u0646\u062f","\u0628\u06cc\u0627\u0628\u06cc","\u0628\u06cc\u0627\u0628\u06cc\u062f","\u0628\u06cc\u0627\u0628\u06cc\u0645","\u0628\u06cc\u0627\u0648\u0631","\u0628\u06cc\u0627\u0648\u0631\u062f","\u0628\u06cc\u0627\u0648\u0631\u0645","\u0628\u06cc\u0627\u0648\u0631\u0646\u062f","\u0628\u06cc\u0627\u0648\u0631\u06cc","\u0628\u06cc\u0627\u0648\u0631\u06cc\u062f","\u0628\u06cc\u0627\u0648\u0631\u06cc\u0645","\u0628\u06cc\u0627\u06cc\u062f","\u0628\u06cc\u0627\u06cc\u0645","\u0628\u06cc\u0627\u06cc\u0646\u062f","\u0628\u06cc\u0627\u06cc\u06cc","\u0628\u06cc\u0627\u06cc\u06cc\u062f","\u0628\u06cc\u0627\u06cc\u06cc\u0645","\u0628\u06cc\u0631\u0648\u0646","\u0628\u06cc\u0631\u0648\u0646\u0650","\u0628\u06cc\u0633\u062a","\u0628\u06cc\u0634","\u0628\u06cc\u0634\u062a\u0631","\u0628\u06cc\u0634\u062a\u0631\u06cc","\u0628\u06cc\u0646","\u0628\u06cc\u06af\u0645\u0627\u0646","\u062a","\u062a\u0627","\u062a\u0627\u0632\u0647","\u062a\u0627\u0646","\u062a\u0627\u06a9\u0646\u0648\u0646","\u062a\u062d\u062a","\u062a\u062d\u0631\u06cc\u0645 \u0647\u0627\u0633\u062a","\u062a\u0631","\u062a\u0631 \u0628\u0631\u0627\u0633\u0627\u0633","\u062a\u0631\u06cc\u0644\u06cc\u0627\u0631\u062f","\u062a\u0631\u06cc\u0644\u06cc\u0648\u0646","\u062a\u0631\u06cc\u0646","\u062a\u0635\u0631\u06cc\u062d\u0627\u064b","\u062a\u0639\u062f\u0627\u062f\u06cc","\u062a\u0639\u0645\u062f\u0627","\u062a\u0642\u0631\u06cc\u0628\u0627","\u062a\u0642\u0631\u06cc\u0628\u0627\u064b","\u062a\u0644\u0648\u06cc\u062d\u0627","\u062a\u0644\u0648\u06cc\u062d\u0627\u064b","\u062a\u0645\u0627\u0645","\u062a\u0645\u0627\u0645 \u0642\u062f","\u062a\u0645\u0627\u0645\u0627","\u062a\u0645\u0627\u0645\u0634\u0627\u0646","\u062a\u0645\u0627\u0645\u06cc","\u062a\u0646\u062f \u062a\u0646\u062f","\u062a\u0646\u0647\u0627","\u062a\u0648","\u062a\u0648\u0624\u0645\u0627\u064b","\u062a\u0648\u0627\u0646","\u062a\u0648\u0627\u0646\u062f","\u062a\u0648\u0627\u0646\u0633\u062a","\u062a\u0648\u0627\u0646\u0633\u062a\u0645","\u062a\u0648\u0627\u0646\u0633\u062a\u0646","\u062a\u0648\u0627\u0646\u0633\u062a\u0646\u062f","\u062a\u0648\u0627\u0646\u0633\u062a\u0647","\u062a\u0648\u0627\u0646\u0633\u062a\u06cc","\u062a\u0648\u0627\u0646\u0633\u062a\u06cc\u0645","\u062a\u0648\u0627\u0646\u0645","\u062a\u0648\u0627\u0646\u0646\u062f","\u062a\u0648\u0627\u0646\u06cc","\u062a\u0648\u0627\u0646\u06cc\u062f","\u062a\u0648\u0627\u0646\u06cc\u0645","\u062a\u0648\u0633\u0637","\u062a\u0648\u0644\u0650","\u062a\u0648\u06cc","\u062a\u0648\u06cc\u0650","\u062a\u06a9 \u062a\u06a9","\u062b","\u062b\u0627\u0644\u062b\u0627\u064b","\u062b\u0627\u0646\u06cc\u0627","\u062b\u0627\u0646\u06cc\u0627\u064b","\u062c","\u062c\u0627","\u062c\u0627\u06cc","\u062c\u0627\u06cc\u06cc","\u062c\u062f\u0627","\u062c\u062f\u0627\u064b","\u062c\u062f\u0627\u06af\u0627\u0646\u0647","\u062c\u062f\u06cc\u062f","\u062c\u062f\u06cc\u062f\u0627","\u062c\u0631\u0645\u0632\u0627\u0633\u062a","\u062c\u0631\u06cc\u0627\u0646","\u062c\u0632","\u062c\u0644\u0648","\u062c\u0644\u0648\u06af\u06cc\u0631\u06cc","\u062c\u0644\u0648\u06cc","\u062c\u0644\u0648\u06cc\u0650","\u062c\u0645\u0639 \u0627\u0646\u062f","\u062c\u0645\u0639\u0627","\u062c\u0645\u0639\u06cc","\u062c\u0646\u0627\u0628\u0639\u0627\u0644\u06cc","\u062c\u0646\u0627\u062d","\u062c\u0646\u0633 \u0627\u0646\u062f","\u062c\u0647\u062a","\u062c\u0648\u0631","\u062d","\u062d\u0627\u0634\u06cc\u0647\u200c\u0627\u06cc","\u062d\u0627\u0636\u0631","\u062d\u0627\u0636\u0631\u0645","\u062d\u0627\u0644","\u062d\u0627\u0644\u0627","\u062d\u0627\u06a9\u06cc\u0633\u062a","\u062d\u062a\u0645\u0627","\u062d\u062a\u0645\u0627\u064b","\u062d\u062a\u06cc","\u062d\u062f\u0627\u0642\u0644","\u062d\u062f\u0627\u06a9\u062b\u0631","\u062d\u062f\u0648\u062f","\u062d\u062f\u0648\u062f\u0627","\u062d\u062f\u0648\u062f\u0650","\u062d\u0633\u0627\u0628\u06af\u0631\u0627\u0646\u0647","\u062d\u0636\u0631\u062a\u0639\u0627\u0644\u06cc","\u062d\u0642","\u062d\u0642\u06cc\u0631\u0627\u0646\u0647","\u062d\u0642\u06cc\u0642\u062a\u0627","\u062d\u0648\u0644","\u062d\u06a9\u0645\u0627\u064b","\u062e","\u062e\u0627\u0631\u062c\u0650","\u062e\u0627\u0644\u0635\u0627\u0646\u0647","\u062e\u0628","\u062e\u062f\u0627\u062d\u0627\u0641\u0638","\u062e\u062f\u0627\u0633\u062a","\u062e\u062f\u0645\u0627\u062a","\u062e\u0633\u062a\u0647\u200c\u0627\u06cc","\u062e\u0635\u0648\u0635\u0627","\u062e\u0635\u0648\u0635\u0627\u064b","\u062e\u0644\u0627\u0635\u0647","\u062e\u0648\u0627\u0633\u062a","\u062e\u0648\u0627\u0633\u062a\u0645","\u062e\u0648\u0627\u0633\u062a\u0646","\u062e\u0648\u0627\u0633\u062a\u0646\u062f","\u062e\u0648\u0627\u0633\u062a\u0647","\u062e\u0648\u0627\u0633\u062a\u06cc","\u062e\u0648\u0627\u0633\u062a\u06cc\u062f","\u062e\u0648\u0627\u0633\u062a\u06cc\u0645","\u062e\u0648\u0627\u0647","\u062e\u0648\u0627\u0647\u062f","\u062e\u0648\u0627\u0647\u0645","\u062e\u0648\u0627\u0647\u0646\u062f","\u062e\u0648\u0627\u0647\u06cc","\u062e\u0648\u0627\u0647\u06cc\u062f","\u062e\u0648\u0627\u0647\u06cc\u0645","\u062e\u0648\u0628","\u062e\u0648\u062f","\u062e\u0648\u062f \u0628\u0647 \u062e\u0648\u062f","\u062e\u0648\u062f\u0628\u0647 \u062e\u0648\u062f\u06cc","\u062e\u0648\u062f\u062a","\u062e\u0648\u062f\u062a\u0627\u0646","\u062e\u0648\u062f\u062a\u0648","\u062e\u0648\u062f\u0634","\u062e\u0648\u062f\u0634\u0627\u0646","\u062e\u0648\u062f\u0645","\u062e\u0648\u062f\u0645\u0627\u0646","\u062e\u0648\u062f\u0645\u0648","\u062e\u0648\u0634","\u062e\u0648\u0634\u0628\u062e\u062a\u0627\u0646\u0647","\u062e\u0648\u06cc\u0634","\u062e\u0648\u06cc\u0634\u062a\u0646","\u062e\u0648\u06cc\u0634\u062a\u0646\u0645","\u062e\u06cc\u0627\u0647","\u062e\u06cc\u0631","\u062e\u06cc\u0631\u0647","\u062e\u06cc\u0644\u06cc","\u062f","\u062f\u0627","\u062f\u0627\u0627\u0645","\u062f\u0627\u0627\u0645\u0627","\u062f\u0627\u062e\u0644","\u062f\u0627\u062f","\u062f\u0627\u062f\u0645","\u062f\u0627\u062f\u0646","\u062f\u0627\u062f\u0646\u062f","\u062f\u0627\u062f\u0647","\u062f\u0627\u062f\u06cc","\u062f\u0627\u062f\u06cc\u062f","\u062f\u0627\u062f\u06cc\u0645","\u062f\u0627\u0631","\u062f\u0627\u0631\u0627\u0633\u062a","\u062f\u0627\u0631\u062f","\u062f\u0627\u0631\u0645","\u062f\u0627\u0631\u0646\u062f","\u062f\u0627\u0631\u06cc","\u062f\u0627\u0631\u06cc\u062f","\u062f\u0627\u0631\u06cc\u0645","\u062f\u0627\u0634\u062a","\u062f\u0627\u0634\u062a\u0645","\u062f\u0627\u0634\u062a\u0646","\u062f\u0627\u0634\u062a\u0646\u062f","\u062f\u0627\u0634\u062a\u0647","\u062f\u0627\u0634\u062a\u06cc","\u062f\u0627\u0634\u062a\u06cc\u062f","\u062f\u0627\u0634\u062a\u06cc\u0645","\u062f\u0627\u0645\u0645","\u062f\u0627\u0646\u0633\u062a","\u062f\u0627\u0646\u0646\u062f","\u062f\u0627\u06cc\u0645","\u062f\u0627\u06cc\u0645\u0627","\u062f\u0631","\u062f\u0631 \u0628\u0627\u0631\u0647","\u062f\u0631 \u0628\u0627\u0631\u0647\u064c","\u062f\u0631 \u062b\u0627\u0646\u06cc","\u062f\u0631 \u0645\u062c\u0645\u0648\u0639","\u062f\u0631 \u0646\u0647\u0627\u06cc\u062a","\u062f\u0631 \u0648\u0627\u0642\u0639","\u062f\u0631 \u06a9\u0644","\u062f\u0631 \u06a9\u0646\u0627\u0631","\u062f\u0631\u0627\u06cc\u0646 \u0645\u06cc\u0627\u0646","\u062f\u0631\u0628\u0627\u0631\u0647","\u062f\u0631\u062d\u0627\u0644\u06cc \u06a9\u0647","\u062f\u0631\u062d\u0627\u0644\u06cc\u06a9\u0647","\u062f\u0631\u0633\u062a","\u062f\u0631\u0633\u062a \u0648 \u062d\u0633\u0627\u0628\u06cc","\u062f\u0631\u0633\u062a\u0647","\u062f\u0631\u0635\u0648\u0631\u062a\u06cc \u06a9\u0647","\u062f\u0631\u0639\u06cc\u0646 \u062d\u0627\u0644","\u062f\u0631\u0645\u062c\u0645\u0648\u0639","\u062f\u0631\u0648\u0627\u0642\u0639","\u062f\u0631\u0648\u0646","\u062f\u0631\u06cc\u063a","\u062f\u0631\u06cc\u063a\u0627","\u062f\u0631\u06cc\u0646","\u062f\u0633\u062a\u0647 \u062f\u0633\u062a\u0647","\u062f\u0634\u0645\u0646\u06cc\u0645","\u062f\u0642\u06cc\u0642\u0627","\u062f\u0645","\u062f\u0646\u0628\u0627\u0644\u0650","\u062f\u0647","\u062f\u0647\u062f","\u062f\u0647\u0645","\u062f\u0647\u0646\u062f","\u062f\u0647\u06cc","\u062f\u0647\u06cc\u062f","\u062f\u0647\u06cc\u0645","\u062f\u0648","\u062f\u0648 \u0631\u0648\u0632\u0647","\u062f\u0648\u0628\u0627\u0631\u0647","\u062f\u0648\u0645","\u062f\u06cc\u062f\u0647","\u062f\u06cc\u0631","\u062f\u06cc\u0631\u062a","\u062f\u06cc\u0631\u0645","\u062f\u06cc\u0631\u0648\u0632","\u062f\u06cc\u0634\u0628","\u062f\u06cc\u0648\u0627\u0646\u0647\u200c\u0627\u06cc","\u062f\u06cc\u0648\u06cc","\u062f\u06cc\u06af\u0631","\u062f\u06cc\u06af\u0631\u0627\u0646","\u062f\u06cc\u06af\u0631\u06cc","\u062f\u06cc\u06af\u0647","\u0630","\u0630\u0627\u062a\u0627\u064b","\u0631","\u0631\u0627","\u0631\u0627\u062c\u0639 \u0628\u0647","\u0631\u0627\u062d\u062a","\u0631\u0627\u0633\u0627","\u0631\u0627\u0633\u062a","\u0631\u0627\u0633\u062a\u06cc","\u0631\u0633\u0645\u0627","\u0631\u0633\u06cc\u062f","\u0631\u0633\u06cc\u062f\u0647","\u0631\u0634\u062a\u0647","\u0631\u0641\u062a","\u0631\u0641\u062a\u0627\u0631\u0647\u0627\u0633\u062a","\u0631\u0641\u062a\u0647","\u0631\u0646\u062c\u0646\u062f","\u0631\u0647\u06af\u0634\u0627\u0633\u062a","\u0631\u0648","\u0631\u0648\u0627\u0633\u062a","\u0631\u0648\u0628","\u0631\u0648\u0628\u0631\u0648\u0633\u062a","\u0631\u0648\u0632","\u0631\u0648\u0632 \u0628\u0647 \u0631\u0648\u0632","\u0631\u0648\u0632\u0627\u0646\u0647","\u0631\u0648\u0632\u0647 \u0627\u06cc\u0645","\u0631\u0648\u0632\u0647 \u0633\u062a","\u0631\u0648\u0632\u0647 \u0645","\u0631\u0648\u0632\u0647\u0627\u06cc","\u0631\u0648\u0632\u0647\u200c\u0627\u06cc","\u0631\u0648\u0634","\u0631\u0648\u06cc","\u0631\u0648\u06cc\u0634","\u0631\u0648\u06cc\u0650","\u0631\u06cc\u0632\u06cc","\u0632","\u0632\u0634\u062a\u06a9\u0627\u0631\u0627\u0646\u0646\u062f","\u0632\u0645\u0627\u0646","\u0632\u0645\u0627\u0646\u06cc","\u0632\u0645\u06cc\u0646\u0647","\u0632\u0646\u0646\u062f","\u0632\u0647\u06cc","\u0632\u0648\u062f","\u0632\u0648\u062f\u062a\u0631","\u0632\u06cc\u0627\u062f","\u0632\u06cc\u0627\u062f\u0647","\u0632\u06cc\u0631","\u0632\u06cc\u0631\u0627","\u0632\u06cc\u0631\u0650","\u0632\u06cc\u0631\u0686\u0634\u0645\u06cc","\u0633","\u0633\u0627\u0628\u0642","\u0633\u0627\u062e\u062a\u0647","\u0633\u0627\u062f\u0647 \u0627\u0646\u062f","\u0633\u0627\u0632\u06cc","\u0633\u0627\u0644\u0627\u0646\u0647","\u0633\u0627\u0644\u062a\u0647","\u0633\u0627\u0644\u0645\u200c\u062a\u0631","\u0633\u0627\u0644\u0647\u0627\u0633\u062a","\u0633\u0627\u0644\u06cc\u0627\u0646\u0647","\u0633\u0627\u06a9\u0646\u0646\u062f","\u0633\u0627\u06cc\u0631","\u0633\u062e\u062a","\u0633\u062e\u062a\u0647","\u0633\u0631","\u0633\u0631\u0627\u0633\u0631","\u0633\u0631\u0627\u0646\u062c\u0627\u0645","\u0633\u0631\u0627\u067e\u0627","\u0633\u0631\u06cc","\u0633\u0631\u06cc\u0639","\u0633\u0631\u06cc\u0639\u0627","\u0633\u0631\u06cc\u0639\u0627\u064b","\u0633\u0631\u06cc\u0650","\u0633\u0639\u06cc","\u0633\u0645\u062a\u0650","\u0633\u0647 \u0628\u0627\u0631\u0647","\u0633\u0647\u0648\u0627\u064b","\u0633\u0648\u0645","\u0633\u0648\u06cc","\u0633\u0648\u06cc\u0650","\u0633\u067e\u0633","\u0633\u06cc\u0627\u0647 \u0686\u0627\u0644\u0647 \u0647\u0627\u0633\u062a","\u0633\u06cc\u062e","\u0634","\u0634\u0627\u0646","\u0634\u0627\u0647\u062f\u0646\u062f","\u0634\u0627\u0647\u062f\u06cc\u0645","\u0634\u0627\u06cc\u062f","\u0634\u0628\u0647\u0627\u0633\u062a","\u0634\u062e\u0635\u0627","\u0634\u062e\u0635\u0627\u064b","\u0634\u062f","\u0634\u062f\u0645","\u0634\u062f\u0646","\u0634\u062f\u0646\u062f","\u0634\u062f\u0647","\u0634\u062f\u06cc","\u0634\u062f\u06cc\u062f","\u0634\u062f\u06cc\u062f\u0627","\u0634\u062f\u06cc\u062f\u0627\u064b","\u0634\u062f\u06cc\u0645","\u0634\u0634","\u0634\u0634 \u0646\u062f\u0627\u0634\u062a\u0647","\u0634\u0645\u0627","\u0634\u0645\u0627\u0631\u06cc","\u0634\u0645\u0627\u0633\u062a","\u0634\u0645\u0627\u06cc\u0646\u062f","\u0634\u0646\u0627\u0633\u06cc","\u0634\u0648","\u0634\u0648\u062f","\u0634\u0648\u0631\u0627\u0633\u062a","\u0634\u0648\u0642\u0645","\u0634\u0648\u0645","\u0634\u0648\u0646\u062f","\u0634\u0648\u0646\u062f\u0647","\u0634\u0648\u06cc","\u0634\u0648\u06cc\u062f","\u0634\u0648\u06cc\u0645","\u0634\u06cc\u0631\u06cc\u0646","\u0634\u06cc\u0631\u06cc\u0646\u0647","\u0634\u06cc\u06a9","\u0635","\u0635\u062f","\u0635\u062f\u062f\u0631\u0635\u062f","\u0635\u0631\u0641\u0627","\u0635\u0631\u0641\u0627\u064b","\u0635\u0631\u06cc\u062d\u0627\u064b","\u0635\u0646\u062f\u0648\u0642 \u0647\u0627\u0633\u062a","\u0635\u0648\u0631\u062a","\u0636","\u0636\u062f\u0650\u0651","\u0636\u062f\u0651\u0650","\u0636\u0645\u0646","\u0636\u0645\u0646\u0627\u064b","\u0637","\u0637\u0628\u0639\u0627","\u0637\u0628\u0639\u0627\u064b","\u0637\u0628\u0642\u0650","\u0637\u0628\u06cc\u0639\u062a\u0627","\u0637\u0631\u0641","\u0637\u0631\u06cc\u0642","\u0637\u0644\u0628\u06a9\u0627\u0631\u0627\u0646\u0647","\u0637\u0648\u0631","\u0637\u06cc","\u0638","\u0638\u0627\u0647\u0631\u0627","\u0638\u0627\u0647\u0631\u0627\u064b","\u0639","\u0639\u0627\u062c\u0632\u0627\u0646\u0647","\u0639\u0627\u0642\u0628\u062a","\u0639\u0628\u0627\u0631\u062a\u0646\u062f","\u0639\u062c\u0628","\u0639\u062c\u0648\u0644\u0627\u0646\u0647","\u0639\u062f\u0645","\u0639\u0631\u0641\u0627\u0646\u06cc","\u0639\u0642\u0628","\u0639\u0642\u0628\u0650","\u0639\u0644\u0627\u0648\u0647 \u0628\u0631","\u0639\u0644\u0627\u0648\u0647 \u0628\u0631 \u0622\u0646","\u0639\u0644\u0627\u0648\u0647 \u0628\u0631\u0622\u0646","\u0639\u0644\u0646\u0627\u064b","\u0639\u0644\u0651\u062a\u0650","\u0639\u0644\u06cc \u0627\u0644\u0638\u0627\u0647\u0631","\u0639\u0644\u06cc \u0631\u063a\u0645","\u0639\u0644\u06cc\u0631\u063a\u0645","\u0639\u0644\u06cc\u0647","\u0639\u0645\u062f\u0627","\u0639\u0645\u062f\u0627\u064b","\u0639\u0645\u062f\u062a\u0627","\u0639\u0645\u062f\u062a\u0627\u064b","\u0639\u0645\u062f\u0647","\u0639\u0645\u0644","\u0639\u0645\u0644\u0627","\u0639\u0645\u0644\u0627\u064b","\u0639\u0645\u0644\u06cc \u0627\u0646\u062f","\u0639\u0645\u0648\u0645","\u0639\u0645\u0648\u0645\u0627","\u0639\u0645\u0648\u0645\u0627\u064b","\u0639\u0646\u0642\u0631\u06cc\u0628","\u0639\u0646\u0648\u0627\u0646","\u0639\u0646\u0648\u0627\u0646\u0650","\u0639\u06cc\u0646\u0627\u064b","\u063a","\u063a\u0627\u0644\u0628\u0627","\u063a\u0632\u0627\u0644\u0627\u0646","\u063a\u06cc\u0631","\u063a\u06cc\u0631\u0642\u0627\u0646\u0648\u0646\u06cc","\u0641","\u0641\u0627\u0642\u062f","\u0641\u0628\u0647\u0627","\u0641\u0631","\u0641\u0631\u062f\u0627","\u0641\u0639\u0644\u0627","\u0641\u0639\u0644\u0627\u064b","\u0641\u0642\u0637","\u0641\u0644\u0627\u0646","\u0641\u0644\u0630\u0627","\u0641\u0648\u0642","\u0641\u06a9\u0631","\u0642","\u0642\u0627\u0627\u0644\u0646\u062f","\u0642\u0627\u0628\u0644","\u0642\u0627\u0637\u0628\u0647","\u0642\u0627\u0637\u0639\u0627\u0646\u0647","\u0642\u0627\u0639\u062f\u062a\u0627\u064b","\u0642\u0627\u0646\u0648\u0646\u0627\u064b","\u0642\u0628\u0644","\u0642\u0628\u0644\u0627","\u0642\u0628\u0644\u0627\u064b","\u0642\u0628\u0644\u0646\u062f","\u0642\u062f\u0631","\u0642\u062f\u0631\u06cc","\u0642\u0635\u062f\u0650","\u0642\u0636\u0627\u06cc\u0627\u0633\u062a","\u0642\u0637\u0639\u0627","\u0642\u0637\u0639\u0627\u064b","\u0644","\u0644\u0627\u0627\u0642\u0644","\u0644\u0627\u062c\u0631\u0645","\u0644\u0628","\u0644\u0630\u0627","\u0644\u0632\u0648\u0645\u0627\u064b","\u0644\u0637\u0641\u0627","\u0644\u0637\u0641\u0627\u064b","\u0644\u06cc\u06a9\u0646","\u0645","\u0645\u0627","\u0645\u0627\u062f\u0627\u0645\u06cc","\u0645\u0627\u0633\u062a","\u0645\u0627\u0645\u0627\u0646 \u0645\u0627\u0645\u0627\u0646 \u06af\u0648\u06cc\u0627\u0646","\u0645\u0627\u0646","\u0645\u0627\u0646\u0646\u062f","\u0645\u0627\u0646\u0646\u062f\u0650","\u0645\u0628\u0627\u062f\u0627","\u0645\u062a\u0624\u0633\u0641\u0627\u0646\u0647","\u0645\u062a\u0627\u0633\u0641\u0627\u0646\u0647","\u0645\u062a\u0639\u0627\u0642\u0628\u0627","\u0645\u062a\u0641\u0627\u0648\u062a\u0646\u062f","\u0645\u062b\u0644","\u0645\u062b\u0644\u0627","\u0645\u062b\u0644\u0650","\u0645\u062c\u0627\u0646\u06cc","\u0645\u062c\u0628\u0648\u0631\u0646\u062f","\u0645\u062c\u062f\u062f\u0627","\u0645\u062c\u062f\u062f\u0627\u064b","\u0645\u062c\u0645\u0648\u0639\u0627","\u0645\u062c\u0645\u0648\u0639\u0627\u064b","\u0645\u062d\u062a\u0627\u062c\u0646\u062f","\u0645\u062d\u06a9\u0645","\u0645\u062d\u06a9\u0645\u200c\u062a\u0631","\u0645\u062e\u0627\u0644\u0641\u0646\u062f","\u0645\u062e\u062a\u0644\u0641","\u0645\u062e\u0635\u0648\u0635\u0627\u064b","\u0645\u062f\u0627\u0645","\u0645\u062f\u062a","\u0645\u062f\u062a\u0647\u0627\u0633\u062a","\u0645\u062f\u0651\u062a\u06cc","\u0645\u0630\u0647\u0628\u06cc \u0627\u0646\u062f","\u0645\u0631\u0627","\u0645\u0631\u062a\u0628","\u0645\u0631\u062f\u0627\u0646\u0647","\u0645\u0631\u062f\u0645","\u0645\u0631\u062f\u0645 \u0627\u0646\u062f","\u0645\u0631\u0633\u06cc","\u0645\u0633\u062a\u062d\u0636\u0631\u06cc\u062f","\u0645\u0633\u062a\u0642\u06cc\u0645\u0627","\u0645\u0633\u062a\u0646\u062f","\u0645\u0633\u0644\u0645\u0627","\u0645\u0634\u062a","\u0645\u0634\u062a\u0631\u06a9\u0627\u064b","\u0645\u0634\u063a\u0648\u0644\u0646\u062f","\u0645\u0637\u0645\u0627\u0646\u0627","\u0645\u0637\u0645\u0627\u0646\u0645","\u0645\u0637\u0645\u06cc\u0646\u0627","\u0645\u0639 \u0627\u0644\u0627\u0633\u0641","\u0645\u0639 \u0630\u0644\u06a9","\u0645\u0639\u062a\u0642\u062f\u0645","\u0645\u0639\u062a\u0642\u062f\u0646\u062f","\u0645\u0639\u062a\u0642\u062f\u06cc\u0645","\u0645\u0639\u062f\u0648\u062f","\u0645\u0639\u0630\u0648\u0631\u06cc\u0645","\u0645\u0639\u0644\u0648\u0645\u0647","\u0645\u0639\u0645\u0648\u0644\u0627","\u0645\u0639\u0645\u0648\u0644\u0627\u064b","\u0645\u0639\u0645\u0648\u0644\u06cc","\u0645\u063a\u0631\u0636\u0627\u0646\u0647","\u0645\u0641\u06cc\u062f\u0646\u062f","\u0645\u0642\u0627\u0628\u0644","\u0645\u0642\u062f\u0627\u0631","\u0645\u0642\u0635\u0631\u0646\u062f","\u0645\u0642\u0635\u0631\u06cc","\u0645\u0644\u06cc\u0627\u0631\u062f","\u0645\u0644\u06cc\u0648\u0646","\u0645\u0645\u06a9\u0646","\u0645\u0645\u06cc\u0632\u06cc\u0647\u0627\u0633\u062a","\u0645\u0646","\u0645\u0646\u062a\u0647\u06cc","\u0645\u0646\u0637\u0642\u06cc","\u0645\u0646\u06cc","\u0645\u0648\u0627\u062c\u0647\u0646\u062f","\u0645\u0648\u0627\u0631\u062f","\u0645\u0648\u062c\u0648\u062f\u0646\u062f","\u0645\u0648\u0631\u062f","\u0645\u0648\u0642\u062a\u0627","\u0645\u06a9\u0631\u0631","\u0645\u06a9\u0631\u0631\u0627\u064b","\u0645\u06af\u0631","\u0645\u06af\u0631 \u0622\u0646 \u06a9\u0647","\u0645\u06af\u0631 \u0627\u06cc\u0646 \u06a9\u0647","\u0645\u06af\u0648","\u0645\u06cc","\u0645\u06cc\u0627\u0646","\u0645\u06cc\u0632\u0627\u0646","\u0645\u06cc\u0644\u06cc\u0627\u0631\u062f","\u0645\u06cc\u0644\u06cc\u0648\u0646","\u0645\u06cc\u06a9\u0646\u062f","\u0645\u06cc\u06a9\u0646\u0645","\u0645\u06cc\u06a9\u0646\u0646\u062f","\u0645\u06cc\u06a9\u0646\u06cc","\u0645\u06cc\u06a9\u0646\u06cc\u062f","\u0645\u06cc\u06a9\u0646\u06cc\u0645","\u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u062f","\u0645\u06cc\u200c\u062e\u0648\u0627\u0647\u06cc\u0645","\u0645\u06cc\u200c\u062f\u0627\u0646\u062f","\u0645\u06cc\u200c\u0631\u0633\u062f","\u0645\u06cc\u200c\u0631\u0648\u062f","\u0645\u06cc\u200c\u0634\u0648\u062f","\u0645\u06cc\u200c\u06a9\u0646\u0645","\u0645\u06cc\u200c\u06a9\u0646\u0646\u062f","\u0645\u06cc\u200c\u06a9\u0646\u06cc\u0645","\u0646","\u0646\u0627\u0627\u0645\u06cc\u062f","\u0646\u0627\u062e\u0648\u0627\u0633\u062a\u0647","\u0646\u0627\u0631\u0627\u0636\u06cc \u0627\u0646\u062f","\u0646\u0627\u0634\u06cc","\u0646\u0627\u0645","\u0646\u0627\u06af\u0627\u0647","\u0646\u0627\u06af\u0632\u06cc\u0631","\u0646\u0627\u06af\u0647\u0627\u0646","\u0646\u0627\u06af\u0647\u0627\u0646\u06cc","\u0646\u0628\u0627\u06cc\u062f","\u0646\u0628\u0634","\u0646\u0628\u0648\u062f","\u0646\u062e\u0633\u062a","\u0646\u062e\u0633\u062a\u06cc\u0646","\u0646\u062e\u0648\u0627\u0647\u062f","\u0646\u062e\u0648\u0627\u0647\u0645","\u0646\u062e\u0648\u0627\u0647\u0646\u062f","\u0646\u062e\u0648\u0627\u0647\u06cc","\u0646\u062e\u0648\u0627\u0647\u06cc\u062f","\u0646\u062e\u0648\u0627\u0647\u06cc\u0645","\u0646\u062e\u0648\u062f\u06cc","\u0646\u062f\u0627\u0631\u062f","\u0646\u062f\u0627\u0631\u0645","\u0646\u062f\u0627\u0631\u0646\u062f","\u0646\u062f\u0627\u0631\u06cc","\u0646\u062f\u0627\u0631\u06cc\u062f","\u0646\u062f\u0627\u0631\u06cc\u0645","\u0646\u062f\u0627\u0634\u062a","\u0646\u062f\u0627\u0634\u062a\u0645","\u0646\u062f\u0627\u0634\u062a\u0646\u062f","\u0646\u062f\u0627\u0634\u062a\u0647","\u0646\u062f\u0627\u0634\u062a\u06cc","\u0646\u062f\u0627\u0634\u062a\u06cc\u062f","\u0646\u062f\u0627\u0634\u062a\u06cc\u0645","\u0646\u0632\u062f","\u0646\u0632\u062f\u0650","\u0646\u0632\u062f\u06cc\u06a9","\u0646\u0632\u062f\u06cc\u06a9\u0650","\u0646\u0633\u0628\u062a\u0627","\u0646\u0634\u0627\u0646","\u0646\u0634\u062f\u0647","\u0646\u0638\u06cc\u0631","\u0646\u0641\u0631\u0646\u062f","\u0646\u0645\u0627\u06cc\u062f","\u0646\u0645\u0648\u062f\u0647","\u0646\u0645\u06cc","\u0646\u0645\u06cc\u200c\u0634\u0648\u062f","\u0646\u0645\u06cc\u200c\u06a9\u0646\u062f","\u0646\u0647","\u0646\u0647 \u062a\u0646\u0647\u0627","\u0646\u0647\u0627\u06cc\u062a\u0627","\u0646\u0647\u0627\u06cc\u062a\u0627\u064b","\u0646\u0648\u0639","\u0646\u0648\u0639\u0627\u064b","\u0646\u0648\u0639\u06cc","\u0646\u06a9\u0631\u062f\u0647","\u0646\u06a9\u0646","\u0646\u06a9\u0646\u062f","\u0646\u06a9\u0646\u0645","\u0646\u06a9\u0646\u0646\u062f","\u0646\u06a9\u0646\u06cc","\u0646\u06a9\u0646\u06cc\u062f","\u0646\u06a9\u0646\u06cc\u0645","\u0646\u06af\u0627\u0647","\u0646\u06af\u0648","\u0646\u06cc\u0627\u0632\u0645\u0646\u062f\u0646\u062f","\u0646\u06cc\u0632","\u0646\u06cc\u0633\u062a","\u0646\u06cc\u0633\u062a\u0645","\u0646\u06cc\u0633\u062a\u0646\u062f","\u0646\u06cc\u0633\u062a\u06cc\u0645","\u0646\u06cc\u0645\u06cc","\u0647","\u0647\u0627","\u0647\u0627\u06cc","\u0647\u0627\u06cc\u06cc","\u0647\u0628\u0686","\u0647\u0631","\u0647\u0631 \u0627\u0632 \u06af\u0627\u0647\u06cc","\u0647\u0631 \u0686\u0646\u062f","\u0647\u0631 \u0686\u0646\u062f \u06a9\u0647","\u0647\u0631 \u0686\u0647","\u0647\u0631\u0686\u0646\u062f","\u0647\u0631\u0686\u0647","\u0647\u0631\u06a9\u0633","\u0647\u0631\u06af\u0627\u0647","\u0647\u0631\u06af\u0632","\u0647\u0632\u0627\u0631","\u0647\u0633\u062a","\u0647\u0633\u062a\u0645","\u0647\u0633\u062a\u0646\u062f","\u0647\u0633\u062a\u06cc","\u0647\u0633\u062a\u06cc\u062f","\u0647\u0633\u062a\u06cc\u0645","\u0647\u0641\u062a","\u0647\u0642 \u0647\u0642 \u06a9\u0646\u0627\u0646","\u0647\u0645","\u0647\u0645 \u0627\u06a9\u0646\u0648\u0646","\u0647\u0645 \u0627\u06cc\u0646\u06a9","\u0647\u0645\u0627\u0646","\u0647\u0645\u0627\u0646 \u0637\u0648\u0631 \u06a9\u0647","\u0647\u0645\u0627\u0646 \u06af\u0648\u0646\u0647 \u06a9\u0647","\u0647\u0645\u0627\u0646\u0627","\u0647\u0645\u0627\u0646\u0646\u062f","\u0647\u0645\u0627\u0646\u0647\u0627","\u0647\u0645\u062f\u06cc\u06af\u0631","\u0647\u0645\u0632\u0645\u0627\u0646","\u0647\u0645\u0647","\u0647\u0645\u0647 \u0631\u0648\u0632\u0647","\u0647\u0645\u0647 \u0633\u0627\u0644\u0647","\u0647\u0645\u0647 \u0634\u0627\u0646","\u0647\u0645\u0647\u064c","\u0647\u0645\u0647\u200c\u0627\u0634","\u0647\u0645\u0648\u0627\u0631\u0647","\u0647\u0645\u0686\u0646\u0627\u0646","\u0647\u0645\u0686\u0646\u0627\u0646 \u06a9\u0647","\u0647\u0645\u0686\u0646\u06cc\u0646","\u0647\u0645\u0686\u0648\u0646","\u0647\u0645\u0686\u06cc\u0646","\u0647\u0645\u06af\u0627\u0646","\u0647\u0645\u06af\u06cc","\u0647\u0645\u06cc\u0634\u0647","\u0647\u0645\u06cc\u0646","\u0647\u0645\u06cc\u0646 \u06a9\u0647","\u0647\u0646\u0648\u0632","\u0647\u0646\u06af\u0627\u0645","\u0647\u0646\u06af\u0627\u0645\u0650","\u0647\u0646\u06af\u0627\u0645\u06cc","\u0647\u0646\u06af\u0627\u0645\u06cc \u06a9\u0647","\u0647\u0648\u06cc","\u0647\u06cc","\u0647\u06cc\u0686","\u0647\u06cc\u0686 \u06af\u0627\u0647","\u0647\u06cc\u0686\u06a9\u062f\u0627\u0645","\u0647\u06cc\u0686\u06a9\u0633","\u0647\u06cc\u0686\u06af\u0627\u0647","\u0647\u06cc\u0686\u06af\u0648\u0646\u0647","\u0647\u06cc\u0686\u06cc","\u0648","\u0648 \u0644\u0627 \u063a\u06cc\u0631","\u0648\u0627\u0628\u0633\u062a\u0647 \u0627\u0646\u062f","\u0648\u0627\u0642\u0639\u0627","\u0648\u0627\u0642\u0639\u0627\u064b","\u0648\u0627\u0642\u0639\u06cc","\u0648\u0627\u0642\u0641\u0646\u062f","\u0648\u0627\u0645\u0627","\u0648\u0627\u06cc","\u0648\u062c\u0648\u062f","\u0648\u062d\u0634\u062a \u0632\u062f\u0647","\u0648\u0633\u0637\u0650","\u0648\u0636\u0639","\u0648\u0642\u062a\u06cc","\u0648\u0642\u062a\u06cc \u06a9\u0647","\u0648\u0642\u062a\u06cc\u06a9\u0647","\u0648\u0644\u06cc","\u0648\u06af\u0631\u0646\u0647","\u0648\u06af\u0648","\u0648\u06cc","\u0648\u06cc\u0627","\u0648\u06cc\u0698\u0647","\u0651\u0647","\u066a","\u067e","\u067e\u0627\u0631\u0633\u0627\u0644","\u067e\u0627\u0631\u0633\u0627\u06cc\u0627\u0646\u0647","\u067e\u0627\u0631\u0647\u200c\u0627\u06cc","\u067e\u0627\u0639\u06cc\u0646\u0650","\u067e\u0627\u06cc\u06cc\u0646 \u062a\u0631\u0646\u062f","\u067e\u062f\u0631\u0627\u0646\u0647","\u067e\u0631\u0633\u0627\u0646","\u067e\u0631\u0648\u0631\u062f\u06af\u0627\u0631\u0627","\u067e\u0631\u06cc\u0631\u0648\u0632","\u067e\u0633","\u067e\u0633 \u0627\u0632","\u067e\u0633 \u0641\u0631\u062f\u0627","\u067e\u0634\u062a","\u067e\u0634\u062a\u0648\u0627\u0646\u0647 \u0627\u0646\u062f","\u067e\u0634\u06cc\u0645\u0648\u0646\u06cc","\u067e\u0646\u062c","\u067e\u0647\u0646 \u0634\u062f\u0647","\u067e\u06cc","\u067e\u06cc \u062f\u0631\u067e\u06cc","\u067e\u06cc\u062f\u0627","\u067e\u06cc\u062f\u0627\u0633\u062a","\u067e\u06cc\u0631\u0627\u0645\u0648\u0646","\u067e\u06cc\u0634","\u067e\u06cc\u0634\u0627\u067e\u06cc\u0634","\u067e\u06cc\u0634\u062a\u0631","\u067e\u06cc\u0634\u0650","\u067e\u06cc\u0648\u0633\u062a\u0647","\u0686","\u0686\u0627\u067e\u0644\u0648\u0633\u0627\u0646\u0647","\u0686\u062a","\u0686\u062a\u0647","\u0686\u0631\u0627","\u0686\u0631\u0627 \u06a9\u0647","\u0686\u0634\u0645 \u0628\u0633\u062a\u0647","\u0686\u0637\u0648\u0631","\u0686\u0642\u062f\u0631","\u0686\u0646\u0627\u0646","\u0686\u0646\u0627\u0646\u0686\u0647","\u0686\u0646\u0627\u0646\u06a9\u0647","\u0686\u0646\u062f","\u0686\u0646\u062f \u0631\u0648\u0632\u0647","\u0686\u0646\u062f\u0627\u0646","\u0686\u0646\u062f\u0647","\u0686\u0646\u062f\u06cc\u0646","\u0686\u0646\u06cc\u0646","\u0686\u0647","\u0686\u0647 \u0628\u0633\u0627","\u0686\u0647 \u0637\u0648\u0631","\u0686\u0647\u0627\u0631","\u0686\u0648","\u0686\u0648\u0646","\u0686\u06a9\u0627\u0631","\u0686\u06af\u0648\u0646\u0647","\u0686\u06cc","\u0686\u06cc\u0632","\u0686\u06cc\u0632\u06cc","\u0686\u06cc\u0632\u06cc\u0633\u062a","\u0686\u06cc\u0633\u062a","\u0686\u06cc\u0647","\u0698","\u06a9","\u06a9\u0627\u0631\u0646\u062f","\u06a9\u0627\u0634","\u06a9\u0627\u0634\u06a9\u06cc","\u06a9\u0627\u0645\u0644","\u06a9\u0627\u0645\u0644\u0627","\u06a9\u0627\u0645\u0644\u0627\u064b","\u06a9\u062a\u0628\u0627","\u06a9\u062c\u0627","\u06a9\u062c\u0627\u0633\u062a","\u06a9\u062f\u0627\u0645","\u06a9\u0631\u062f","\u06a9\u0631\u062f\u0645","\u06a9\u0631\u062f\u0646","\u06a9\u0631\u062f\u0646\u062f","\u06a9\u0631\u062f\u0647","\u06a9\u0631\u062f\u06cc","\u06a9\u0631\u062f\u06cc\u062f","\u06a9\u0631\u062f\u06cc\u0645","\u06a9\u0633","\u06a9\u0633\u0627\u0646\u06cc","\u06a9\u0633\u06cc","\u06a9\u0644","\u06a9\u0644\u0627","\u06a9\u0644\u06cc","\u06a9\u0644\u06cc\u0647","\u06a9\u0645","\u06a9\u0645 \u06a9\u0645","\u06a9\u0645\u0627\x7f\u0627\u06cc\u0646\u06a9\u0647","\u06a9\u0645\u0627\u06a9\u0627\u0646","\u06a9\u0645\u062a\u0631","\u06a9\u0645\u062a\u0631\u0647","\u06a9\u0645\u062a\u0631\u06cc","\u06a9\u0645\u06cc","\u06a9\u0646","\u06a9\u0646\u0627\u0631","\u06a9\u0646\u0627\u0631\u0634","\u06a9\u0646\u0627\u0631\u0650","\u06a9\u0646\u0627\u06cc\u0647\u200c\u0627\u06cc","\u06a9\u0646\u062f","\u06a9\u0646\u0645","\u06a9\u0646\u0646\u062f","\u06a9\u0646\u0646\u062f\u0647","\u06a9\u0646\u0648\u0646","\u06a9\u0646\u0648\u0646\u06cc","\u06a9\u0646\u06cc","\u06a9\u0646\u06cc\u062f","\u06a9\u0646\u06cc\u0645","\u06a9\u0647","\u06a9\u0648","\u06a9\u064e\u06cc","\u06a9\u06cc","\u06af","\u06af\u0627\u0647","\u06af\u0627\u0647\u06cc","\u06af\u0630\u0627\u0631\u06cc","\u06af\u0630\u0627\u0634\u062a\u0647","\u06af\u0630\u0634\u062a\u0647","\u06af\u0631\u062f\u062f","\u06af\u0631\u062f\u0646\u062f","\u06af\u0631\u0641\u062a","\u06af\u0631\u0641\u062a\u0627\u0631\u0646\u062f","\u06af\u0631\u0641\u062a\u0645","\u06af\u0631\u0641\u062a\u0646","\u06af\u0631\u0641\u062a\u0646\u062f","\u06af\u0631\u0641\u062a\u0647","\u06af\u0631\u0641\u062a\u06cc","\u06af\u0631\u0641\u062a\u06cc\u062f","\u06af\u0631\u0641\u062a\u06cc\u0645","\u06af\u0631\u0648\u0647\u06cc","\u06af\u0631\u0686\u0647","\u06af\u0641\u062a","\u06af\u0641\u062a\u0645","\u06af\u0641\u062a\u0646","\u06af\u0641\u062a\u0646\u062f","\u06af\u0641\u062a\u0647","\u06af\u0641\u062a\u06cc","\u06af\u0641\u062a\u06cc\u062f","\u06af\u0641\u062a\u06cc\u0645","\u06af\u0647","\u06af\u0647\u06af\u0627\u0647","\u06af\u0648","\u06af\u0648\u0646\u0647","\u06af\u0648\u06cc","\u06af\u0648\u06cc\u0627","\u06af\u0648\u06cc\u062f","\u06af\u0648\u06cc\u0645","\u06af\u0648\u06cc\u0646\u062f","\u06af\u0648\u06cc\u06cc","\u06af\u0648\u06cc\u06cc\u062f","\u06af\u0648\u06cc\u06cc\u0645","\u06af\u06cc\u0631","\u06af\u06cc\u0631\u062f","\u06af\u06cc\u0631\u0645","\u06af\u06cc\u0631\u0646\u062f","\u06af\u06cc\u0631\u06cc","\u06af\u06cc\u0631\u06cc\u062f","\u06af\u06cc\u0631\u06cc\u0645","\u06cc","\u06cc\u0627","\u06cc\u0627\u0628","\u06cc\u0627\u0628\u062f","\u06cc\u0627\u0628\u0645","\u06cc\u0627\u0628\u0646\u062f","\u06cc\u0627\u0628\u06cc","\u06cc\u0627\u0628\u06cc\u062f","\u06cc\u0627\u0628\u06cc\u0645","\u06cc\u0627\u0631\u0628","\u06cc\u0627\u0641\u062a","\u06cc\u0627\u0641\u062a\u0645","\u06cc\u0627\u0641\u062a\u0646","\u06cc\u0627\u0641\u062a\u0647","\u06cc\u0627\u0641\u062a\u06cc","\u06cc\u0627\u0641\u062a\u06cc\u062f","\u06cc\u0627\u0641\u062a\u06cc\u0645","\u06cc\u0639\u0646\u06cc","\u06cc\u0642\u06cc\u0646\u0627","\u06cc\u0642\u06cc\u0646\u0627\u064b","\u06cc\u0647","\u06cc\u0648\u0627\u0634 \u06cc\u0648\u0627\u0634","\u06cc\u06a9","\u06cc\u06a9 \u062c\u0648\u0631\u06cc","\u06cc\u06a9 \u06a9\u0645","\u06cc\u06a9 \u06a9\u0645\u06cc","\u06cc\u06a9\u062f\u06cc\u06af\u0631","\u06cc\u06a9\u0631\u06cc\u0632","\u06cc\u06a9\u0633\u0627\u0644","\u06cc\u06a9\u0647\u0632\u0627\u0631","\u06cc\u06a9\u06cc","\u06f0","\u06f1","\u06f2","\u06f3","\u06f4","\u06f5","\u06f6","\u06f7","\u06f8","\u06f9","\u2026","\ufeff\u0648","\u06a9\u0646","\u06a9\u0631\u062f","\u06a9\u0631\u062f\u0646","\u0628\u0627\u0634","\u0628\u0648\u062f","\u0628\u0648\u062f\u0646","\u0634\u0648","\u0634\u062f","\u0634\u062f\u0646","\u062f\u0627\u0631","\u062f\u0627\u0634\u062a","\u062f\u0627\u0634\u062a\u0646","\u062e\u0648\u0627\u0647","\u062e\u0648\u0627\u0633\u062a","\u062e\u0648\u0627\u0633\u062a\u0646","\u06af\u0648\u06cc","\u06af\u0641\u062a","\u06af\u0641\u062a\u0646","\u06af\u06cc\u0631","\u06af\u0631\u0641\u062a","\u06af\u0631\u0641\u062a\u0646","\u0622\u06cc","\u0622\u0645\u062f","\u0622\u0645\u062f\u0646","\u062a\u0648\u0627\u0646","\u062a\u0648\u0627\u0646\u0633\u062a","\u062a\u0648\u0627\u0646\u0633\u062a\u0646","\u06cc\u0627\u0628","\u06cc\u0627\u0641\u062a","\u06cc\u0627\u0641\u062a\u0646","\u0622\u0648\u0631","\u0622\u0648\u0631\u062f","\u0622\u0648\u0631\u062f\u0646","\u062f\u06cc\u06af\u0631\u0627\u0646","\u0647\u0645\u0686\u0646\u0627\u0646","\u0645\u062f\u062a","\u0686\u06cc\u0632","\u0633\u0627\u06cc\u0631","\u062c\u0627","\u0637\u06cc","\u06a9\u0644","\u06a9\u0646\u0648\u0646\u06cc","\u0628\u06cc\u0631\u0648\u0646","\u0645\u062b\u0644\u0627","\u06a9\u0627\u0645\u0644","\u06a9\u0627\u0645\u0644\u0627","\u0622\u0646\u06a9\u0647","\u0645\u0648\u0627\u0631\u062f","\u0648\u0627\u0642\u0639\u06cc","\u0627\u0645\u0648\u0631","\u0627\u06a9\u0646\u0648\u0646","\u0628\u0637\u0648\u0631","\u0628\u062e\u0634\u06cc","\u062a\u062d\u062a","\u0686\u06af\u0648\u0646\u0647","\u0639\u062f\u0645","\u0646\u0648\u0639\u06cc","\u062d\u0627\u0636\u0631","\u0648\u0636\u0639","\u0645\u0642\u0627\u0628\u0644","\u06a9\u0646\u0627\u0631","\u062e\u0648\u06cc\u0634","\u0646\u06af\u0627\u0647","\u062f\u0631\u0648\u0646","\u0632\u0645\u0627\u0646\u06cc","\u0628\u0646\u0627\u0628\u0631\u0627\u06cc\u0646","\u062a\u0648","\u062e\u06cc\u0644\u06cc","\u0628\u0632\u0631\u06af","\u062e\u0648\u062f\u0634","\u062c\u0632","\u0627\u06cc\u0646\u062c\u0627","\u0645\u062e\u062a\u0644\u0641","\u062a\u0648\u0633\u0637","\u0646\u0648\u0639","\u0647\u0645\u0686\u0646\u06cc\u0646","\u0622\u0646\u062c\u0627","\u0642\u0628\u0644","\u062c\u0646\u0627\u062d","\u0627\u06cc\u0646\u0647\u0627","\u0637\u0648\u0631","\u0634\u0627\u06cc\u062f","\u0627\u06cc\u0634\u0627\u0646","\u062c\u0647\u062a","\u0637\u0631\u06cc\u0642","\u0645\u0627\u0646\u0646\u062f","\u067e\u06cc\u062f\u0627","\u0645\u0645\u06a9\u0646","\u06a9\u0633\u0627\u0646\u06cc","\u062c\u0627\u06cc","\u06a9\u0633\u06cc","\u063a\u06cc\u0631","\u0628\u06cc","\u0642\u0627\u0628\u0644","\u062f\u0631\u0628\u0627\u0631\u0647","\u062c\u062f\u06cc\u062f","\u0648\u0642\u062a\u06cc","\u0627\u062e\u06cc\u0631","\u0686\u0631\u0627","\u0628\u06cc\u0634","\u0631\u0648\u06cc","\u0637\u0631\u0641","\u062c\u0631\u06cc\u0627\u0646","\u0632\u06cc\u0631","\u0622\u0646\u0686\u0647","\u0627\u0644\u0628\u062a\u0647","\u0641\u0642\u0637","\u0686\u06cc\u0632\u06cc","\u0686\u0648\u0646","\u0628\u0631\u0627\u0628\u0631","\u0647\u0646\u0648\u0632","\u0628\u062e\u0634","\u0632\u0645\u06cc\u0646\u0647","\u0628\u06cc\u0646","\u0628\u062f\u0648\u0646","\u0627\u0633\u062a\u0641\u0627\u062f","\u0647\u0645\u0627\u0646","\u0646\u0634\u0627\u0646","\u0628\u0633\u06cc\u0627\u0631\u06cc","\u0628\u0639\u062f","\u0639\u0645\u0644","\u0631\u0648\u0632","\u0627\u0639\u0644\u0627\u0645","\u0686\u0646\u062f","\u0622\u0646\u0627\u0646","\u0628\u0644\u06a9\u0647","\u0627\u0645\u0631\u0648\u0632","\u062a\u0645\u0627\u0645","\u0628\u06cc\u0634\u062a\u0631","\u0622\u06cc\u0627","\u0628\u0631\u062e\u06cc","\u0639\u0644\u06cc\u0647","\u062f\u06cc\u06af\u0631\u06cc","\u0648\u06cc\u0698\u0647","\u06af\u0630\u0634\u062a\u0647","\u0627\u0646\u062c\u0627\u0645","\u062d\u062a\u06cc","\u062f\u0627\u062f\u0647","\u0633\u0648\u06cc","\u0648\u0644\u06cc","\u0632\u0645\u0627\u0646","\u062d\u0627\u0644","\u062a\u0646\u0647\u0627","\u0628\u0633\u06cc\u0627\u0631","\u06cc\u0639\u0646\u06cc","\u0639\u0646\u0648\u0627\u0646","\u0647\u0645\u06cc\u0646","\u0647\u0628\u0686","\u067e\u06cc\u0634","\u0648\u06cc","\u06cc\u06a9\u06cc","\u0627\u06cc\u0646\u06a9\u0647","\u0648\u062c\u0648\u062f","\u0634\u0645\u0627","\u067e\u0633","\u0686\u0646\u06cc\u0646","\u0645\u06cc\u0627\u0646","\u0645\u0648\u0631\u062f","\u0686\u0647","\u0627\u06af\u0631","\u0647\u0645\u0647","\u0646\u0647","\u062f\u06cc\u06af\u0631","\u0622\u0646\u0647\u0627","\u0628\u0627\u06cc\u062f","\u0647\u0631","\u0627\u0648","\u0645\u0627","\u0645\u0646","\u062a\u0627","\u0646\u06cc\u0632","\u0627\u0645\u0627","\u06cc\u06a9","\u062e\u0648\u062f","\u0628\u0631","\u06cc\u0627","\u0647\u0645","\u0631\u0627","\u0627\u06cc\u0646","\u0628\u0627","\u0622\u0646","\u0628\u0631\u0627\u06cc","\u0648","\u062f\u0631","\u0628\u0647","\u06a9\u0647","\u0627\u0632","!",'"',"#","(",")","*","-",".","/",":","[","]","\xab","\xbb","\u060c","\u061b","\u061f","\u06f0","\u06f1","\u06f2","\u06f3","\u06f4","\u06f5","\u06f6","\u06f7","\u06f8","\u06f9","\u2026","$","","\u0648","\u062f\u0631","\u0628\u0647","\u0627\u0632","\u0643\u0647","\u0645\u064a","\u0627\u064a\u0646","\u0627\u0633\u062a","\u0631\u0627","\u0628\u0627","\u0647\u0627\u064a","\u0628\u0631\u0627\u064a","\u0622\u0646","\u064a\u0643","\u0634\u0648\u062f","\u0634\u062f\u0647","\u062e\u0648\u062f","\u0647\u0627","\u0643\u0631\u062f","\u0634\u062f","\u0627\u064a","\u062a\u0627","\u0643\u0646\u062f","\u0628\u0631","\u0628\u0648\u062f","\u06af\u0641\u062a","\u0646\u064a\u0632","\u0648\u064a","\u0647\u0645","\u0643\u0646\u0646\u062f","\u062f\u0627\u0631\u062f","\u0645\u0627","\u0643\u0631\u062f\u0647","\u064a\u0627","\u0627\u0645\u0627","\u0628\u0627\u064a\u062f","\u062f\u0648","\u0627\u0646\u062f","\u0647\u0631","\u062e\u0648\u0627\u0647\u062f","\u0627\u0648","\u0645\u0648\u0631\u062f","\u0622\u0646\u0647\u0627","\u0628\u0627\u0634\u062f","\u062f\u064a\u06af\u0631","\u0645\u0631\u062f\u0645","\u0646\u0645\u064a","\u0628\u064a\u0646","\u067e\u064a\u0634","\u067e\u0633","\u0627\u06af\u0631","\u0647\u0645\u0647","\u0635\u0648\u0631\u062a","\u064a\u0643\u064a","\u0647\u0633\u062a\u0646\u062f","\u0628\u064a","\u0645\u0646","\u062f\u0647\u062f","\u0647\u0632\u0627\u0631","\u0646\u064a\u0633\u062a","\u0627\u0633\u062a\u0641\u0627\u062f\u0647","\u062f\u0627\u062f","\u062f\u0627\u0634\u062a\u0647","\u062f\u0627\u0634\u062a","\u0686\u0647","\u0647\u0645\u0686\u0646\u064a\u0646","\u0643\u0631\u062f\u0646\u062f","\u062f\u0627\u062f\u0647","\u0628\u0648\u062f\u0647","\u062f\u0627\u0631\u0646\u062f","\u0647\u0645\u064a\u0646","\u0645\u064a\u0644\u064a\u0648\u0646","\u0633\u0648\u064a","\u0634\u0648\u0646\u062f","\u0628\u064a\u0634\u062a\u0631","\u0628\u0633\u064a\u0627\u0631","\u0631\u0648\u064a","\u06af\u0631\u0641\u062a\u0647","\u0647\u0627\u064a\u064a","\u062a\u0648\u0627\u0646\u062f","\u0627\u0648\u0644","\u0646\u0627\u0645","\u0647\u064a\u0686","\u0686\u0646\u062f","\u062c\u062f\u064a\u062f","\u0628\u064a\u0634","\u0634\u062f\u0646","\u0643\u0631\u062f\u0646","\u0643\u0646\u064a\u0645","\u0646\u0634\u0627\u0646","\u062d\u062a\u064a","\u0627\u064a\u0646\u0643\u0647","\u0648\u0644\u06cc","\u062a\u0648\u0633\u0637","\u0686\u0646\u064a\u0646","\u0628\u0631\u062e\u064a","\u0646\u0647","\u062f\u064a\u0631\u0648\u0632","\u062f\u0648\u0645","\u062f\u0631\u0628\u0627\u0631\u0647","\u0628\u0639\u062f","\u0645\u062e\u062a\u0644\u0641","\u06af\u064a\u0631\u062f","\u0634\u0645\u0627","\u06af\u0641\u062a\u0647","\u0622\u0646\u0627\u0646","\u0628\u0627\u0631","\u0637\u0648\u0631","\u06af\u0631\u0641\u062a","\u062f\u0647\u0646\u062f","\u06af\u0630\u0627\u0631\u064a","\u0628\u0633\u064a\u0627\u0631\u064a","\u0637\u064a","\u0628\u0648\u062f\u0646\u062f","\u0645\u064a\u0644\u064a\u0627\u0631\u062f","\u0628\u062f\u0648\u0646","\u062a\u0645\u0627\u0645","\u0643\u0644","\u062a\u0631  \u0628\u0631\u0627\u0633\u0627\u0633","\u0634\u062f\u0646\u062f","\u062a\u0631\u064a\u0646","\u0627\u0645\u0631\u0648\u0632","\u0628\u0627\u0634\u0646\u062f","\u0646\u062f\u0627\u0631\u062f","\u0686\u0648\u0646","\u0642\u0627\u0628\u0644","\u06af\u0648\u064a\u062f","\u062f\u064a\u06af\u0631\u064a","\u0647\u0645\u0627\u0646","\u062e\u0648\u0627\u0647\u0646\u062f","\u0642\u0628\u0644","\u0622\u0645\u062f\u0647","\u0627\u0643\u0646\u0648\u0646","\u062a\u062d\u062a","\u0637\u0631\u064a\u0642","\u06af\u064a\u0631\u064a","\u062c\u0627\u064a","\u0647\u0646\u0648\u0632","\u0686\u0631\u0627","\u0627\u0644\u0628\u062a\u0647","\u0643\u0646\u064a\u062f","\u0633\u0627\u0632\u064a","\u0633\u0648\u0645","\u0643\u0646\u0645","\u0628\u0644\u0643\u0647","\u0632\u064a\u0631","\u062a\u0648\u0627\u0646\u0646\u062f","\u0636\u0645\u0646","\u0641\u0642\u0637","\u0628\u0648\u062f\u0646","\u062d\u0642","\u0622\u064a\u062f","\u0648\u0642\u062a\u064a","\u0627\u0634","\u064a\u0627\u0628\u062f","\u0646\u062e\u0633\u062a\u064a\u0646","\u0645\u0642\u0627\u0628\u0644","\u062e\u062f\u0645\u0627\u062a","\u0627\u0645\u0633\u0627\u0644","\u062a\u0627\u0643\u0646\u0648\u0646","\u0645\u0627\u0646\u0646\u062f","\u062a\u0627\u0632\u0647","\u0622\u0648\u0631\u062f","\u0641\u0643\u0631","\u0622\u0646\u0686\u0647","\u0646\u062e\u0633\u062a","\u0646\u0634\u062f\u0647","\u0634\u0627\u064a\u062f","\u0686\u0647\u0627\u0631","\u062c\u0631\u064a\u0627\u0646","\u067e\u0646\u062c","\u0633\u0627\u062e\u062a\u0647","\u0632\u064a\u0631\u0627","\u0646\u0632\u062f\u064a\u0643","\u0628\u0631\u062f\u0627\u0631\u064a","\u0643\u0633\u064a","\u0631\u064a\u0632\u064a","\u0631\u0641\u062a","\u06af\u0631\u062f\u062f","\u0645\u062b\u0644","\u0622\u0645\u062f","\u0627\u0645","\u0628\u0647\u062a\u0631\u064a\u0646","\u062f\u0627\u0646\u0633\u062a","\u0643\u0645\u062a\u0631","\u062f\u0627\u062f\u0646","\u062a\u0645\u0627\u0645\u064a","\u062c\u0644\u0648\u06af\u064a\u0631\u064a","\u0628\u064a\u0634\u062a\u0631\u064a","\u0627\u064a\u0645","\u0646\u0627\u0634\u064a","\u0686\u064a\u0632\u064a","\u0622\u0646\u0643\u0647","\u0628\u0627\u0644\u0627","\u0628\u0646\u0627\u0628\u0631\u0627\u064a\u0646","\u0627\u064a\u0634\u0627\u0646","\u0628\u0639\u0636\u064a","\u062f\u0627\u062f\u0646\u062f","\u062f\u0627\u0634\u062a\u0646\u062f","\u0628\u0631\u062e\u0648\u0631\u062f\u0627\u0631","\u0646\u062e\u0648\u0627\u0647\u062f","\u0647\u0646\u06af\u0627\u0645","\u0646\u0628\u0627\u064a\u062f","\u063a\u064a\u0631","\u0646\u0628\u0648\u062f","\u062f\u064a\u062f\u0647","\u0648\u06af\u0648","\u062f\u0627\u0631\u064a\u0645","\u0686\u06af\u0648\u0646\u0647","\u0628\u0646\u062f\u064a","\u062e\u0648\u0627\u0633\u062a","\u0641\u0648\u0642","\u062f\u0647","\u0646\u0648\u0639\u064a","\u0647\u0633\u062a\u064a\u0645","\u062f\u064a\u06af\u0631\u0627\u0646","\u0647\u0645\u0686\u0646\u0627\u0646","\u0633\u0631\u0627\u0633\u0631","\u0646\u062f\u0627\u0631\u0646\u062f","\u06af\u0631\u0648\u0647\u064a","\u0633\u0639\u064a","\u0631\u0648\u0632\u0647\u0627\u064a","\u0622\u0646\u062c\u0627","\u064a\u0643\u062f\u064a\u06af\u0631","\u0643\u0631\u062f\u0645","\u0628\u064a\u0633\u062a","\u0628\u0631\u0648\u0632","\u0633\u067e\u0633","\u0631\u0641\u062a\u0647","\u0622\u0648\u0631\u062f\u0647","\u0646\u0645\u0627\u064a\u062f","\u0628\u0627\u0634\u064a\u0645","\u06af\u0648\u064a\u0646\u062f","\u0632\u064a\u0627\u062f","\u062e\u0648\u064a\u0634","\u0647\u0645\u0648\u0627\u0631\u0647","\u06af\u0630\u0627\u0634\u062a\u0647","\u0634\u0634  \u0646\u062f\u0627\u0634\u062a\u0647","\u0634\u0646\u0627\u0633\u064a","\u062e\u0648\u0627\u0647\u064a\u0645","\u0622\u0628\u0627\u062f","\u062f\u0627\u0634\u062a\u0646","\u0646\u0638\u064a\u0631","\u0647\u0645\u0686\u0648\u0646","\u0628\u0627\u0631\u0647","\u0646\u0643\u0631\u062f\u0647","\u0634\u0627\u0646","\u0633\u0627\u0628\u0642","\u0647\u0641\u062a","\u062f\u0627\u0646\u0646\u062f","\u062c\u0627\u064a\u064a","\u0628\u06cc","\u062c\u0632","\u0632\u06cc\u0631\u0650","\u0631\u0648\u06cc\u0650","\u0633\u0631\u06cc\u0650","\u062a\u0648\u06cc\u0650","\u062c\u0644\u0648\u06cc\u0650","\u067e\u06cc\u0634\u0650","\u0639\u0642\u0628\u0650","\u0628\u0627\u0644\u0627\u06cc\u0650","\u062e\u0627\u0631\u062c\u0650","\u0648\u0633\u0637\u0650","\u0628\u06cc\u0631\u0648\u0646\u0650","\u0633\u0648\u06cc\u0650","\u06a9\u0646\u0627\u0631\u0650","\u067e\u0627\u0639\u06cc\u0646\u0650","\u0646\u0632\u062f\u0650","\u0646\u0632\u062f\u06cc\u06a9\u0650","\u062f\u0646\u0628\u0627\u0644\u0650","\u062d\u062f\u0648\u062f\u0650","\u0628\u0631\u0627\u0628\u0631\u0650","\u0637\u0628\u0642\u0650","\u0645\u0627\u0646\u0646\u062f\u0650","\u0636\u062f\u0651\u0650","\u0647\u0646\u06af\u0627\u0645\u0650","\u0628\u0631\u0627\u06cc\u0650","\u0645\u062b\u0644\u0650","\u0628\u0627\u0631\u0629","\u0627\u062b\u0631\u0650","\u062a\u0648\u0644\u0650","\u0639\u0644\u0651\u062a\u0650","\u0633\u0645\u062a\u0650","\u0639\u0646\u0648\u0627\u0646\u0650","\u0642\u0635\u062f\u0650","\u0631\u0648\u0628","\u062c\u062f\u0627","\u06a9\u06cc","\u06a9\u0647","\u0686\u06cc\u0633\u062a","\u0647\u0633\u062a","\u06a9\u062c\u0627","\u06a9\u062c\u0627\u0633\u062a","\u06a9\u064e\u06cc","\u0686\u0637\u0648\u0631","\u06a9\u062f\u0627\u0645","\u0622\u06cc\u0627","\u0645\u06af\u0631","\u0686\u0646\u062f\u06cc\u0646","\u06cc\u06a9","\u0686\u06cc\u0632\u06cc","\u062f\u06cc\u06af\u0631","\u06a9\u0633\u06cc","\u0628\u0639\u0631\u06cc","\u0647\u06cc\u0686","\u0686\u06cc\u0632","\u062c\u0627","\u06a9\u0633","\u0647\u0631\u06af\u0632","\u06cc\u0627","\u062a\u0646\u0647\u0627","\u0628\u0644\u06a9\u0647","\u062e\u06cc\u0627\u0647","\u0628\u0644\u0647","\u0628\u0644\u06cc","\u0622\u0631\u0647","\u0622\u0631\u06cc","\u0645\u0631\u0633\u06cc","\u0627\u0644\u0628\u062a\u0651\u0647","\u0644\u0637\u0641\u0627\u064b","\u0651\u0647","\u0627\u0646\u06a9\u0647","\u0648\u0642\u062a\u06cc\u06a9\u0647","\u0647\u0645\u06cc\u0646","\u067e\u06cc\u0634","\u0645\u062f\u0651\u062a\u06cc","\u0647\u0646\u06af\u0627\u0645\u06cc","\u0645\u0627\u0646","\u062a\u0627\u0646"]}},2082:e=>{e.exports={stopwords:["a","\xe0","\xe2","abord","afin","ah","ai","aie","ainsi","allaient","allo","all\xf4","allons","apr\xe8s","assez","attendu","au","aucun","aucune","aujourd","aujourd'hui","auquel","aura","auront","aussi","autre","autres","aux","auxquelles","auxquels","avaient","avais","avait","avant","avec","avoir","ayant","b","bah","beaucoup","bien","bigre","boum","bravo","brrr","c","\xe7a","car","ce","ceci","cela","celle","celle-ci","celle-l\xe0","celles","celles-ci","celles-l\xe0","celui","celui-ci","celui-l\xe0","cent","cependant","certain","certaine","certaines","certains","certes","ces","cet","cette","ceux","ceux-ci","ceux-l\xe0","chacun","chaque","cher","ch\xe8re","ch\xe8res","chers","chez","chiche","chut","ci","cinq","cinquantaine","cinquante","cinquanti\xe8me","cinqui\xe8me","clac","clic","combien","comme","comment","compris","concernant","contre","couic","crac","d","da","dans","de","debout","dedans","dehors","del\xe0","depuis","derri\xe8re","des","d\xe8s","d\xe9sormais","desquelles","desquels","dessous","dessus","deux","deuxi\xe8me","deuxi\xe8mement","devant","devers","devra","diff\xe9rent","diff\xe9rente","diff\xe9rentes","diff\xe9rents","dire","divers","diverse","diverses","dix","dix-huit","dixi\xe8me","dix-neuf","dix-sept","doit","doivent","donc","dont","douze","douzi\xe8me","dring","du","duquel","durant","e","effet","eh","elle","elle-m\xeame","elles","elles-m\xeames","en","encore","entre","envers","environ","es","\xe8s","est","et","etant","\xe9taient","\xe9tais","\xe9tait","\xe9tant","etc","\xe9t\xe9","etre","\xeatre","eu","euh","eux","eux-m\xeames","except\xe9","f","fa\xe7on","fais","faisaient","faisant","fait","feront","fi","flac","floc","font","g","gens","h","ha","h\xe9","hein","h\xe9las","hem","hep","hi","ho","hol\xe0","hop","hormis","hors","hou","houp","hue","hui","huit","huiti\xe8me","hum","hurrah","i","il","ils","importe","j","je","jusqu","jusque","k","l","la","l\xe0","laquelle","las","le","lequel","les","l\xe8s","lesquelles","lesquels","leur","leurs","longtemps","lorsque","lui","lui-m\xeame","m","ma","maint","mais","malgr\xe9","me","m\xeame","m\xeames","merci","mes","mien","mienne","miennes","miens","mille","mince","moi","moi-m\xeame","moins","mon","moyennant","n","na","ne","n\xe9anmoins","neuf","neuvi\xe8me","ni","nombreuses","nombreux","non","nos","notre","n\xf4tre","n\xf4tres","nous","nous-m\xeames","nul","o","o|","\xf4","oh","oh\xe9","ol\xe9","oll\xe9","on","ont","onze","onzi\xe8me","ore","ou","o\xf9","ouf","ouias","oust","ouste","outre","p","paf","pan","par","parmi","partant","particulier","particuli\xe8re","particuli\xe8rement","pas","pass\xe9","pendant","personne","peu","peut","peuvent","peux","pff","pfft","pfut","pif","plein","plouf","plus","plusieurs","plut\xf4t","pouah","pour","pourquoi","premier","premi\xe8re","premi\xe8rement","pr\xe8s","proche","psitt","puisque","q","qu","quand","quant","quanta","quant-\xe0-soi","quarante","quatorze","quatre","quatre-vingt","quatri\xe8me","quatri\xe8mement","que","quel","quelconque","quelle","quelles","quelque","quelques","quelqu'un","quels","qui","quiconque","quinze","quoi","quoique","r","revoici","revoil\xe0","rien","s","sa","sacrebleu","sans","sapristi","sauf","se","seize","selon","sept","septi\xe8me","sera","seront","ses","si","sien","sienne","siennes","siens","sinon","six","sixi\xe8me","soi","soi-m\xeame","soit","soixante","son","sont","sous","stop","suis","suivant","sur","surtout","t","ta","tac","tant","te","t\xe9","tel","telle","tellement","telles","tels","tenant","tes","tic","tien","tienne","tiennes","tiens","toc","toi","toi-m\xeame","ton","touchant","toujours","tous","tout","toute","toutes","treize","trente","tr\xe8s","trois","troisi\xe8me","troisi\xe8mement","trop","tsoin","tsouin","tu","u","un","une","unes","uns","v","va","vais","vas","v\xe9","vers","via","vif","vifs","vingt","vivat","vive","vives","vlan","voici","voil\xe0","vont","vos","votre","v\xf4tre","v\xf4tres","vous","vous-m\xeames","vu","w","x","y","z","zut","\ufeffalors","aucuns","bon","devrait","dos","droite","d\xe9but","essai","faites","fois","force","haut","ici","juste","maintenant","mine","mot","nomm\xe9s","nouveaux","parce","parole","personnes","pi\xe8ce","plupart","seulement","soyez","sujet","tandis","valeur","voie","voient","\xe9tat","\xe9tions"]}},2681:e=>{e.exports={stopwords:["a","a\xednda","al\xed","aquel","aquela","aquelas","aqueles","aquilo","aqu\xed","ao","aos","as","as\xed","\xe1","ben","cando","che","co","coa","comigo","con","connosco","contigo","convosco","coas","cos","cun","cuns","cunha","cunhas","da","dalgunha","dalgunhas","dalg\xfan","dalg\xfans","das","de","del","dela","delas","deles","desde","deste","do","dos","dun","duns","dunha","dunhas","e","el","ela","elas","eles","en","era","eran","esa","esas","ese","eses","esta","estar","estaba","est\xe1","est\xe1n","este","estes","estiven","estou","eu","\xe9","facer","foi","foron","fun","hab\xeda","hai","iso","isto","la","las","lle","lles","lo","los","mais","me","meu","meus","min","mi\xf1a","mi\xf1as","moi","na","nas","neste","nin","no","non","nos","nosa","nosas","noso","nosos","n\xf3s","nun","nunha","nuns","nunhas","o","os","ou","\xf3","\xf3s","para","pero","pode","pois","pola","polas","polo","polos","por","que","se","sen\xf3n","ser","seu","seus","sexa","sido","sobre","s\xfaa","s\xfaas","tam\xe9n","tan","te","ten","te\xf1en","te\xf1o","ter","teu","teus","ti","tido","ti\xf1a","tiven","t\xfaa","t\xfaas","un","unha","unhas","uns","vos","vosa","vosas","voso","vosos","v\xf3s"]}},8119:e=>{e.exports={stopwords:["a","adesso","ai","al","alla","allo","allora","altre","altri","altro","anche","ancora","avere","aveva","avevano","ben","buono","che","chi","cinque","comprare","con","consecutivi","consecutivo","cosa","cui","da","del","della","dello","dentro","deve","devo","di","doppio","due","e","ecco","fare","fine","fino","fra","gente","giu","ha","hai","hanno","ho","il","indietro","invece","io","la","lavoro","le","lei","lo","loro","lui","lungo","ma","me","meglio","molta","molti","molto","nei","nella","no","noi","nome","nostro","nove","nuovi","nuovo","o","oltre","ora","otto","peggio","pero","persone","piu","poco","primo","promesso","qua","quarto","quasi","quattro","quello","questo","qui","quindi","quinto","rispetto","sara","secondo","sei","sembra","sembrava","senza","sette","sia","siamo","siete","solo","sono","sopra","soprattutto","sotto","stati","stato","stesso","su","subito","sul","sulla","tanto","te","tempo","terzo","tra","tre","triplo","ultimo","un","una","uno","va","vai","voi","volte","vostro","a","abbastanza","accidenti","ad","affinche","agli","ahime","ahim\xc3","alcuna","alcuni","alcuno","all","alle","altrimenti","altrui","anni","anno","ansa","assai","attesa","avanti","avendo","avente","aver","avete","avuta","avute","avuti","avuto","basta","bene","benissimo","berlusconi","brava","bravo","c","casa","caso","cento","certa","certe","certi","certo","chicchessia","chiunque","ci","ciascuna","ciascuno","cima","cio","ci\xc3","cioe","cio\xc3","circa","citta","citt\xc3","codesta","codesti","codesto","cogli","coi","col","colei","coll","coloro","colui","come","concernente","consiglio","contro","cortesia","cos","cosi","cos\xc3","d","dagli","dai","dal","dall","dalla","dalle","dallo","davanti","degli","dei","dell","delle","detto","dice","dietro","dire","dirimpetto","dopo","dove","dovra","dovr\xc3","dunque","durante","\xc3","ed","egli","ella","eppure","era","erano","esse","essendo","esser","essere","essi","ex","fa","fatto","favore","fin","finalmente","finche","forse","fuori","gia","gi\xc3","giacche","giorni","giorno","gli","gliela","gliele","glieli","glielo","gliene","grande","grazie","gruppo","i","ieri","improvviso","in","infatti","insieme","intanto","intorno","l","l\xc3","li","lontano","macche","magari","mai","male","malgrado","malissimo","medesimo","mediante","meno","mentre","mesi","mezzo","mi","mia","mie","miei","mila","miliardi","milioni","ministro","mio","moltissimo","ne","negli","nel","nell","nelle","nello","nemmeno","neppure","nessuna","nessuno","niente","non","nondimeno","nostra","nostre","nostri","nulla","od","oggi","ogni","ognuna","ognuno","oppure","ore","osi","ossia","paese","parecchi","parecchie","parecchio","parte","partendo","peccato","per","perche","perch\xc3","percio","perci\xc3","perfino","per\xc3","piedi","pieno","piglia","pi\xc3","po","pochissimo","poi","poiche","press","prima","proprio","puo","pu\xc3","pure","purtroppo","qualche","qualcuna","qualcuno","quale","quali","qualunque","quando","quanta","quante","quanti","quanto","quantunque","quel","quella","quelli","quest","questa","queste","questi","riecco","salvo","sar\xc3","sarebbe","scopo","scorso","se","seguente","sempre","si","solito","sta","staranno","stata","state","sua","successivo","sue","sugli","sui","sull","sulle","sullo","suo","suoi","tale","talvolta","ti","tranne","troppo","tu","tua","tue","tuo","tuoi","tutta","tuttavia","tutte","tutti","tutto","uguali","uomo","vale","varia","varie","vario","verso","vi","via","vicino","visto","vita","volta","vostra","vostre","vostri"]}},8631:e=>{e.exports={stopwords:["\uc544","\ud734","\uc544\uc774\uad6c","\uc544\uc774\ucfe0","\uc544\uc774\uace0","\uc5b4","\ub098","\uc6b0\ub9ac","\uc800\ud76c","\ub530\ub77c","\uc758\ud574","\uc744","\ub97c","\uc5d0","\uc758","\uac00","\uc73c\ub85c","\ub85c","\uc5d0\uac8c","\ubfd0\uc774\ub2e4","\uc758\uac70\ud558\uc5ec","\uadfc\uac70\ud558\uc5ec","\uc785\uac01\ud558\uc5ec","\uae30\uc900\uc73c\ub85c","\uc608\ud558\uba74","\uc608\ub97c \ub4e4\uba74","\uc608\ub97c \ub4e4\uc790\uba74","\uc800","\uc18c\uc778","\uc18c\uc0dd","\uc800\ud76c","\uc9c0\ub9d0\uace0","\ud558\uc9c0\ub9c8","\ud558\uc9c0\ub9c8\ub77c","\ub2e4\ub978","\ubb3c\ub860","\ub610\ud55c","\uadf8\ub9ac\uace0","\ube44\uae38\uc218 \uc5c6\ub2e4","\ud574\uc11c\ub294 \uc548\ub41c\ub2e4","\ubfd0\ub9cc \uc544\ub2c8\ub77c","\ub9cc\uc774 \uc544\ub2c8\ub2e4","\ub9cc\uc740 \uc544\ub2c8\ub2e4","\ub9c9\ub860\ud558\uace0","\uad00\uacc4\uc5c6\uc774","\uadf8\uce58\uc9c0 \uc54a\ub2e4","\uadf8\ub7ec\ub098","\uadf8\ub7f0\ub370","\ud558\uc9c0\ub9cc","\ub4e0\uac04\uc5d0","\ub17c\ud558\uc9c0 \uc54a\ub2e4","\ub530\uc9c0\uc9c0 \uc54a\ub2e4","\uc124\uc0ac","\ube44\ub85d","\ub354\ub77c\ub3c4","\uc544\ub2c8\uba74","\ub9cc \ubabb\ud558\ub2e4","\ud558\ub294 \ud3b8\uc774 \ub0ab\ub2e4","\ubd88\ubb38\ud558\uace0","\ud5a5\ud558\uc5ec","\ud5a5\ud574\uc11c","\ud5a5\ud558\ub2e4","\ucabd\uc73c\ub85c","\ud2c8\ud0c0","\uc774\uc6a9\ud558\uc5ec","\ud0c0\ub2e4","\uc624\ub974\ub2e4","\uc81c\uc678\ud558\uace0","\uc774 \uc678\uc5d0","\uc774 \ubc16\uc5d0","\ud558\uc5ec\uc57c","\ube44\ub85c\uc18c","\ud55c\ub2e4\uba74 \ubab0\ub77c\ub3c4","\uc678\uc5d0\ub3c4","\uc774\uacf3","\uc5ec\uae30","\ubd80\ud130","\uae30\uc810\uc73c\ub85c","\ub530\ub77c\uc11c","\ud560 \uc0dd\uac01\uc774\ub2e4","\ud558\ub824\uace0\ud558\ub2e4","\uc774\ub9ac\ud558\uc5ec","\uadf8\ub9ac\ud558\uc5ec","\uadf8\ub807\uac8c \ud568\uc73c\ub85c\uc368","\ud558\uc9c0\ub9cc","\uc77c\ub54c","\ud560\ub54c","\uc55e\uc5d0\uc11c","\uc911\uc5d0\uc11c","\ubcf4\ub294\ub370\uc11c","\uc73c\ub85c\uc368","\ub85c\uc368","\uae4c\uc9c0","\ud574\uc57c\ud55c\ub2e4","\uc77c\uac83\uc774\ub2e4","\ubc18\ub4dc\uc2dc","\ud560\uc904\uc54c\ub2e4","\ud560\uc218\uc788\ub2e4","\ud560\uc218\uc788\uc5b4","\uc784\uc5d0 \ud2c0\ub9bc\uc5c6\ub2e4","\ud55c\ub2e4\uba74","\ub4f1","\ub4f1\ub4f1","\uc81c","\uaca8\uc6b0","\ub2e8\uc9c0","\ub2e4\ub9cc","\ud560\ubfd0","\ub529\ub3d9","\ub315\uadf8","\ub300\ud574\uc11c","\ub300\ud558\uc5ec","\ub300\ud558\uba74","\ud6e8\uc52c","\uc5bc\ub9c8\ub098","\uc5bc\ub9c8\ub9cc\ud07c","\uc5bc\ub9c8\ud07c","\ub0a8\uc9d3","\uc5ec","\uc5bc\ub9c8\uac04","\uc57d\uac04","\ub2e4\uc18c","\uc880","\uc870\uae08","\ub2e4\uc218","\uba87","\uc5bc\ub9c8","\uc9c0\ub9cc","\ud558\ubb3c\uba70","\ub610\ud55c","\uadf8\ub7ec\ub098","\uadf8\ub807\uc9c0\ub9cc","\ud558\uc9c0\ub9cc","\uc774\uc678\uc5d0\ub3c4","\ub300\ud574 \ub9d0\ud558\uc790\uba74","\ubfd0\uc774\ub2e4","\ub2e4\uc74c\uc5d0","\ubc18\ub300\ub85c","\ubc18\ub300\ub85c \ub9d0\ud558\uc790\uba74","\uc774\uc640 \ubc18\ub300\ub85c","\ubc14\uafb8\uc5b4\uc11c \ub9d0\ud558\uba74","\ubc14\uafb8\uc5b4\uc11c \ud55c\ub2e4\uba74","\ub9cc\uc57d","\uadf8\ub807\uc9c0\uc54a\uc73c\uba74","\uae4c\uc545","\ud22d","\ub531","\uc090\uac71\uac70\ub9ac\ub2e4","\ubcf4\ub4dc\ub4dd","\ube44\uac71\uac70\ub9ac\ub2e4","\uaf48\ub2f9","\uc751\ub2f9","\ud574\uc57c\ud55c\ub2e4","\uc5d0 \uac00\uc11c","\uac01","\uac01\uac01","\uc5ec\ub7ec\ubd84","\uac01\uc885","\uac01\uc790","\uc81c\uac01\uae30","\ud558\ub3c4\ub85d\ud558\ub2e4","\uc640","\uacfc","\uadf8\ub7ec\ubbc0\ub85c","\uadf8\ub798\uc11c","\uace0\ub85c","\ud55c \uae4c\ub2ed\uc5d0","\ud558\uae30 \ub54c\ubb38\uc5d0","\uac70\ub2c8\uc640","\uc774\uc9c0\ub9cc","\ub300\ud558\uc5ec","\uad00\ud558\uc5ec","\uad00\ud55c","\uacfc\uc5f0","\uc2e4\ub85c","\uc544\ub2c8\ub098\ub2e4\ub97c\uac00","\uc0dd\uac01\ud55c\ub300\ub85c","\uc9c4\uc9dc\ub85c","\ud55c\uc801\uc774\uc788\ub2e4","\ud558\uace4\ud558\uc600\ub2e4","\ud558","\ud558\ud558","\ud5c8\ud5c8","\uc544\ud558","\uac70\ubc14","\uc640","\uc624","\uc65c","\uc5b4\uc9f8\uc11c","\ubb34\uc5c7\ub54c\ubb38\uc5d0","\uc5b4\ucc0c","\ud558\uaca0\ub294\uac00","\ubb34\uc2a8","\uc5b4\ub514","\uc5b4\ub290\uacf3","\ub354\uad70\ub2e4\ub098","\ud558\ubb3c\uba70","\ub354\uc6b1\uc774\ub294","\uc5b4\ub290\ub54c","\uc5b8\uc81c","\uc57c","\uc774\ubd10","\uc5b4\uc774","\uc5ec\ubcf4\uc2dc\uc624","\ud750\ud750","\ud765","\ud734","\ud5c9\ud5c9","\ud5d0\ub5a1\ud5d0\ub5a1","\uc601\ucc28","\uc5ec\ucc28","\uc5b4\uae30\uc5ec\ucc28","\ub059\ub059","\uc544\uc57c","\uc557","\uc544\uc57c","\ucf78\ucf78","\uc878\uc878","\uc88d\uc88d","\ub69d\ub69d","\uc8fc\ub8e9\uc8fc\ub8e9","\uc1a8","\uc6b0\ub974\ub974","\uadf8\ub798\ub3c4","\ub610","\uadf8\ub9ac\uace0","\ubc14\uafb8\uc5b4\ub9d0\ud558\uba74","\ubc14\uafb8\uc5b4\ub9d0\ud558\uc790\uba74","\ud639\uc740","\ud639\uc2dc","\ub2f5\ub2e4","\ubc0f","\uadf8\uc5d0 \ub530\ub974\ub294","\ub54c\uac00 \ub418\uc5b4","\uc989","\uc9c0\ub4e0\uc9c0","\uc124\ub839","\uac00\ub839","\ud558\ub354\ub77c\ub3c4","\ud560\uc9c0\ub77c\ub3c4","\uc77c\uc9c0\ub77c\ub3c4","\uc9c0\ub4e0\uc9c0","\uba87","\uac70\uc758","\ud558\ub9c8\ud130\uba74","\uc778\uc820","\uc774\uc820","\ub41c\ubc14\uc5d0\uc57c","\ub41c\uc774\uc0c1","\ub9cc\ud07c","\uc5b4\ucc0c\ub40f\ub4e0","\uadf8\uc704\uc5d0","\uac8c\ub2e4\uac00","\uc810\uc5d0\uc11c \ubcf4\uc544","\ube44\ucd94\uc5b4 \ubcf4\uc544","\uace0\ub824\ud558\uba74","\ud558\uac8c\ub420\uac83\uc774\ub2e4","\uc77c\uac83\uc774\ub2e4","\ube44\uad50\uc801","\uc880","\ubcf4\ub2e4\ub354","\ube44\ud558\uba74","\uc2dc\ud0a4\ub2e4","\ud558\uac8c\ud558\ub2e4","\ud560\ub9cc\ud558\ub2e4","\uc758\ud574\uc11c","\uc5f0\uc774\uc11c","\uc774\uc5b4\uc11c","\uc787\ub530\ub77c","\ub4a4\ub530\ub77c","\ub4a4\uc774\uc5b4","\uacb0\uad6d","\uc758\uc9c0\ud558\uc5ec","\uae30\ub300\uc5ec","\ud1b5\ud558\uc5ec","\uc790\ub9c8\uc790","\ub354\uc6b1\ub354","\ubd88\uad6c\ud558\uace0","\uc5bc\ub9c8\ub4e0\uc9c0","\ub9c8\uc74c\ub300\ub85c","\uc8fc\uc800\ud558\uc9c0 \uc54a\uace0","\uace7","\uc989\uc2dc","\ubc14\ub85c","\ub2f9\uc7a5","\ud558\uc790\ub9c8\uc790","\ubc16\uc5d0 \uc548\ub41c\ub2e4","\ud558\uba74\ub41c\ub2e4","\uadf8\ub798","\uadf8\ub807\uc9c0","\uc694\ucee8\ub300","\ub2e4\uc2dc \ub9d0\ud558\uc790\uba74","\ubc14\uafd4 \ub9d0\ud558\uba74","\uc989","\uad6c\uccb4\uc801\uc73c\ub85c","\ub9d0\ud558\uc790\uba74","\uc2dc\uc791\ud558\uc5ec","\uc2dc\ucd08\uc5d0","\uc774\uc0c1","\ud5c8","\ud5c9","\ud5c8\uac71","\ubc14\uc640\uac19\uc774","\ud574\ub3c4\uc88b\ub2e4","\ud574\ub3c4\ub41c\ub2e4","\uac8c\ub2e4\uac00","\ub354\uad6c\ub098","\ud558\ubb3c\uba70","\uc640\ub974\ub974","\ud30d","\ud37d","\ud384\ub801","\ub3d9\uc548","\uc774\ub798","\ud558\uace0\uc788\uc5c8\ub2e4","\uc774\uc5c8\ub2e4","\uc5d0\uc11c","\ub85c\ubd80\ud130","\uae4c\uc9c0","\uc608\ud558\uba74","\ud588\uc5b4\uc694","\ud574\uc694","\ud568\uaed8","\uac19\uc774","\ub354\ubd88\uc5b4","\ub9c8\uc800","\ub9c8\uc800\ub3c4","\uc591\uc790","\ubaa8\ub450","\uc2b5\ub2c8\ub2e4","\uac00\uae4c\uc2a4\ub85c","\ud558\ub824\uace0\ud558\ub2e4","\uc988\uc74c\ud558\uc5ec","\ub2e4\ub978","\ub2e4\ub978 \ubc29\uba74\uc73c\ub85c","\ud574\ubd10\uc694","\uc2b5\ub2c8\uae4c","\ud588\uc5b4\uc694","\ub9d0\ud560\uac83\ub3c4 \uc5c6\uace0","\ubb34\ub98e\uc4f0\uace0","\uac1c\uc758\uce58\uc54a\uace0","\ud558\ub294\uac83\ub9cc \ubabb\ud558\ub2e4","\ud558\ub294\uac83\uc774 \ub0ab\ub2e4","\ub9e4","\ub9e4\ubc88","\ub4e4","\ubaa8","\uc5b4\ub290\uac83","\uc5b4\ub290","\ub85c\uc368","\uac16\uace0\ub9d0\ud558\uc790\uba74","\uc5b4\ub514","\uc5b4\ub290\ucabd","\uc5b4\ub290\uac83","\uc5b4\ub290\ud574","\uc5b4\ub290 \ub144\ub3c4","\ub77c \ud574\ub3c4","\uc5b8\uc820\uac00","\uc5b4\ub5a4\uac83","\uc5b4\ub290\uac83","\uc800\uae30","\uc800\ucabd","\uc800\uac83","\uadf8\ub54c","\uadf8\ub7fc","\uadf8\ub7ec\uba74","\uc694\ub9cc\ud55c\uac78","\uadf8\ub798","\uadf8\ub54c","\uc800\uac83\ub9cc\ud07c","\uadf8\uc800","\uc774\ub974\uae30\uae4c\uc9c0","\ud560 \uc904 \uc548\ub2e4","\ud560 \ud798\uc774 \uc788\ub2e4","\ub108","\ub108\ud76c","\ub2f9\uc2e0","\uc5b4\ucc0c","\uc124\ub9c8","\ucc28\ub77c\ub9ac","\ud560\uc9c0\uc5b8\uc815","\ud560\uc9c0\ub77c\ub3c4","\ud560\ub9dd\uc815","\ud560\uc9c0\uc5b8\uc815","\uad6c\ud1a0\ud558\ub2e4","\uac8c\uc6b0\ub2e4","\ud1a0\ud558\ub2e4","\uba54\uc4f0\uac81\ub2e4","\uc606\uc0ac\ub78c","\ud264","\uccc7","\uc758\uac70\ud558\uc5ec","\uadfc\uac70\ud558\uc5ec","\uc758\ud574","\ub530\ub77c","\ud798\uc785\uc5b4","\uadf8","\ub2e4\uc74c","\ubc84\uae08","\ub450\ubc88\uc9f8\ub85c","\uae30\ud0c0","\uccab\ubc88\uc9f8\ub85c","\ub098\uba38\uc9c0\ub294","\uadf8\uc911\uc5d0\uc11c","\uacac\uc9c0\uc5d0\uc11c","\ud615\uc2dd\uc73c\ub85c \uc4f0\uc5ec","\uc785\uc7a5\uc5d0\uc11c","\uc704\ud574\uc11c","\ub2e8\uc9c0","\uc758\ud574\ub418\ub2e4","\ud558\ub3c4\ub85d\uc2dc\ud0a4\ub2e4","\ubfd0\ub9cc\uc544\ub2c8\ub77c","\ubc18\ub300\ub85c","\uc804\ud6c4","\uc804\uc790","\uc55e\uc758\uac83","\uc7a0\uc2dc","\uc7a0\uae50","\ud558\uba74\uc11c","\uadf8\ub807\uc9c0\ub9cc","\ub2e4\uc74c\uc5d0","\uadf8\ub7ec\ud55c\uc989","\uadf8\ub7f0\uc989","\ub0a8\ub4e4","\uc544\ubb34\uac70\ub098","\uc5b4\ucc0c\ud558\ub4e0\uc9c0","\uac19\ub2e4","\ube44\uc2b7\ud558\ub2e4","\uc608\ucee8\ub300","\uc774\ub7f4\uc815\ub3c4\ub85c","\uc5b4\ub5bb\uac8c","\ub9cc\uc57d","\ub9cc\uc77c","\uc704\uc5d0\uc11c \uc11c\uc220\ud55c\ubc14\uc640\uac19\uc774","\uc778 \ub4ef\ud558\ub2e4","\ud558\uc9c0 \uc54a\ub294\ub2e4\uba74","\ub9cc\uc57d\uc5d0","\ubb34\uc5c7","\ubb34\uc2a8","\uc5b4\ub290","\uc5b4\ub5a4","\uc544\ub798\uc717","\uc870\ucc28","\ud55c\ub370","\uadf8\ub7fc\uc5d0\ub3c4 \ubd88\uad6c\ud558\uace0","\uc5ec\uc804\ud788","\uc2ec\uc9c0\uc5b4","\uae4c\uc9c0\ub3c4","\uc870\ucc28\ub3c4","\ud558\uc9c0 \uc54a\ub3c4\ub85d","\uc54a\uae30 \uc704\ud558\uc5ec","\ub54c","\uc2dc\uac01","\ubb34\ub835","\uc2dc\uac04","\ub3d9\uc548","\uc5b4\ub54c","\uc5b4\ub5a0\ud55c","\ud558\uc5ec\uae08","\ub124","\uc608","\uc6b0\uc120","\ub204\uad6c","\ub204\uac00 \uc54c\uaca0\ub294\uac00","\uc544\ubb34\ub3c4","\uc904\uc740\ubaa8\ub978\ub2e4","\uc904\uc740 \ubab0\ub78f\ub2e4","\ud558\ub294 \uae40\uc5d0","\uacb8\uc0ac\uacb8\uc0ac","\ud558\ub294\ubc14","\uadf8\ub7f0 \uae4c\ub2ed\uc5d0","\ud55c \uc774\uc720\ub294","\uadf8\ub7ec\ub2c8","\uadf8\ub7ec\ub2c8\uae4c","\ub54c\ubb38\uc5d0","\uadf8","\ub108\ud76c","\uadf8\ub4e4","\ub108\ud76c\ub4e4","\ud0c0\uc778","\uac83","\uac83\ub4e4","\ub108","\uc704\ud558\uc5ec","\uacf5\ub3d9\uc73c\ub85c","\ub3d9\uc2dc\uc5d0","\ud558\uae30 \uc704\ud558\uc5ec","\uc5b4\ucc0c\ud558\uc5ec","\ubb34\uc5c7\ub54c\ubb38\uc5d0","\ubd95\ubd95","\uc719\uc719","\ub098","\uc6b0\ub9ac","\uc5c9\uc5c9","\ud718\uc775","\uc719\uc719","\uc624\ud638","\uc544\ud558","\uc5b4\uca0b\ub4e0","\ub9cc \ubabb\ud558\ub2e4","\ud558\uae30\ubcf4\ub2e4\ub294","\ucc28\ub77c\ub9ac","\ud558\ub294 \ud3b8\uc774 \ub0ab\ub2e4","\ud750\ud750","\ub180\ub77c\ub2e4","\uc0c1\ub300\uc801\uc73c\ub85c \ub9d0\ud558\uc790\uba74","\ub9c8\uce58","\uc544\ub2c8\ub77c\uba74","\uc27f","\uadf8\ub807\uc9c0 \uc54a\uc73c\uba74","\uadf8\ub807\uc9c0 \uc54a\ub2e4\uba74","\uc548 \uadf8\ub7ec\uba74","\uc544\ub2c8\uc5c8\ub2e4\uba74","\ud558\ub4e0\uc9c0","\uc544\ub2c8\uba74","\uc774\ub77c\uba74","\uc88b\uc544","\uc54c\uc558\uc5b4","\ud558\ub294\uac83\ub3c4","\uadf8\ub9cc\uc774\ub2e4","\uc5b4\uca54\uc218 \uc5c6\ub2e4","\ud558\ub098","\uc77c","\uc77c\ubc18\uc801\uc73c\ub85c","\uc77c\ub2e8","\ud55c\ucf20\uc73c\ub85c\ub294","\uc624\uc790\ub9c8\uc790","\uc774\ub807\uac8c\ub418\uba74","\uc774\uc640\uac19\ub2e4\uba74","\uc804\ubd80","\ud55c\ub9c8\ub514","\ud55c\ud56d\ubaa9","\uadfc\uac70\ub85c","\ud558\uae30\uc5d0","\uc544\uc6b8\ub7ec","\ud558\uc9c0 \uc54a\ub3c4\ub85d","\uc54a\uae30 \uc704\ud574\uc11c","\uc774\ub974\uae30\uae4c\uc9c0","\uc774 \ub418\ub2e4","\ub85c \uc778\ud558\uc5ec","\uae4c\ub2ed\uc73c\ub85c","\uc774\uc720\ub9cc\uc73c\ub85c","\uc774\ub85c \uc778\ud558\uc5ec","\uadf8\ub798\uc11c","\uc774 \ub54c\ubb38\uc5d0","\uadf8\ub7ec\ubbc0\ub85c","\uadf8\ub7f0 \uae4c\ub2ed\uc5d0","\uc54c \uc218 \uc788\ub2e4","\uacb0\ub860\uc744 \ub0bc \uc218 \uc788\ub2e4","\uc73c\ub85c \uc778\ud558\uc5ec","\uc788\ub2e4","\uc5b4\ub5a4\uac83","\uad00\uacc4\uac00 \uc788\ub2e4","\uad00\ub828\uc774 \uc788\ub2e4","\uc5f0\uad00\ub418\ub2e4","\uc5b4\ub5a4\uac83\ub4e4","\uc5d0 \ub300\ud574","\uc774\ub9ac\ud558\uc5ec","\uadf8\ub9ac\ud558\uc5ec","\uc5ec\ubd80","\ud558\uae30\ubcf4\ub2e4\ub294","\ud558\ub290\ub2c8","\ud558\uba74 \ud560\uc218\ub85d","\uc6b4\uc6b4","\uc774\ub7ec\uc774\ub7ec\ud558\ub2e4","\ud558\uad6c\ub098","\ud558\ub3c4\ub2e4","\ub2e4\uc2dc\ub9d0\ud558\uba74","\ub2e4\uc74c\uc73c\ub85c","\uc5d0 \uc788\ub2e4","\uc5d0 \ub2ec\ub824 \uc788\ub2e4","\uc6b0\ub9ac","\uc6b0\ub9ac\ub4e4","\uc624\ud788\ub824","\ud558\uae30\ub294\ud55c\ub370","\uc5b4\ub5bb\uac8c","\uc5b4\ub5bb\ud574","\uc5b4\ucc0c\ub40f\uc5b4","\uc5b4\ub54c","\uc5b4\uc9f8\uc11c","\ubcf8\ub300\ub85c","\uc790","\uc774","\uc774\ucabd","\uc5ec\uae30","\uc774\uac83","\uc774\ubc88","\uc774\ub807\uac8c\ub9d0\ud558\uc790\uba74","\uc774\ub7f0","\uc774\ub7ec\ud55c","\uc774\uc640 \uac19\uc740","\uc694\ub9cc\ud07c","\uc694\ub9cc\ud55c \uac83","\uc5bc\ub9c8 \uc548 \ub418\ub294 \uac83","\uc774\ub9cc\ud07c","\uc774 \uc815\ub3c4\uc758","\uc774\ub807\uac8c \ub9ce\uc740 \uac83","\uc774\uc640 \uac19\ub2e4","\uc774\ub54c","\uc774\ub807\uad6c\ub098","\uac83\uacfc \uac19\uc774","\ub07c\uc775","\uc090\uac71","\ub530\uc704","\uc640 \uac19\uc740 \uc0ac\ub78c\ub4e4","\ubd80\ub958\uc758 \uc0ac\ub78c\ub4e4","\uc65c\ub0d0\ud558\uba74","\uc911\uc758\ud558\ub098","\uc624\uc9c1","\uc624\ub85c\uc9c0","\uc5d0 \ud55c\ud558\ub2e4","\ud558\uae30\ub9cc \ud558\uba74","\ub3c4\ucc29\ud558\ub2e4","\uae4c\uc9c0 \ubbf8\uce58\ub2e4","\ub3c4\ub2ec\ud558\ub2e4","\uc815\ub3c4\uc5d0 \uc774\ub974\ub2e4","\ud560 \uc9c0\uacbd\uc774\ub2e4","\uacb0\uacfc\uc5d0 \uc774\ub974\ub2e4","\uad00\ud574\uc11c\ub294","\uc5ec\ub7ec\ubd84","\ud558\uace0 \uc788\ub2e4","\ud55c \ud6c4","\ud63c\uc790","\uc790\uae30","\uc790\uae30\uc9d1","\uc790\uc2e0","\uc6b0\uc5d0 \uc885\ud569\ud55c\uac83\uacfc\uac19\uc774","\ucd1d\uc801\uc73c\ub85c \ubcf4\uba74","\ucd1d\uc801\uc73c\ub85c \ub9d0\ud558\uba74","\ucd1d\uc801\uc73c\ub85c","\ub300\ub85c \ud558\ub2e4","\uc73c\ub85c\uc11c","\ucc38","\uadf8\ub9cc\uc774\ub2e4","\ud560 \ub530\ub984\uc774\ub2e4","\ucff5","\ud0d5\ud0d5","\ucf85\ucf85","\ub465\ub465","\ubd10","\ubd10\ub77c","\uc544\uc774\uc57c","\uc544\ub2c8","\uc640\uc544","\uc751","\uc544\uc774","\ucc38\ub098","\ub144","\uc6d4","\uc77c","\ub839","\uc601","\uc77c","\uc774","\uc0bc","\uc0ac","\uc624","\uc721","\ub959","\uce60","\ud314","\uad6c","\uc774\ucc9c\uc721","\uc774\ucc9c\uce60","\uc774\ucc9c\ud314","\uc774\ucc9c\uad6c","\ud558\ub098","\ub458","\uc14b","\ub137","\ub2e4\uc12f","\uc5ec\uc12f","\uc77c\uacf1","\uc5ec\ub35f","\uc544\ud649","\ub839","\uc601"]}},8708:e=>{e.exports={stopwords:["aan","af","al","als","bij","dan","dat","die","dit","een","en","er","had","heb","hem","het","hij","hoe","hun","ik","in","is","je","kan","me","men","met","mij","nog","nu","of","ons","ook","te","tot","uit","van","was","wat","we","wel","wij","zal","ze","zei","zij","zo","zou","aan","aangaande","aangezien","achter","achterna","afgelopen","al","aldaar","aldus","alhoewel","alias","alle","allebei","alleen","alsnog","altijd","altoos","ander","andere","anders","anderszins","behalve","behoudens","beide","beiden","ben","beneden","bent","bepaald","betreffende","bij","binnen","binnenin","boven","bovenal","bovendien","bovengenoemd","bovenstaand","bovenvermeld","buiten","daar","daarheen","daarin","daarna","daarnet","daarom","daarop","daarvanlangs","dan","dat","de","die","dikwijls","dit","door","doorgaand","dus","echter","eer","eerdat","eerder","eerlang","eerst","elk","elke","en","enig","enigszins","enkel","er","erdoor","even","eveneens","evenwel","gauw","gedurende","geen","gehad","gekund","geleden","gelijk","gemoeten","gemogen","geweest","gewoon","gewoonweg","haar","had","hadden","hare","heb","hebben","hebt","heeft","hem","hen","het","hierbeneden","hierboven","hij","hoe","hoewel","hun","hunne","ik","ikzelf","in","inmiddels","inzake","is","jezelf","jij","jijzelf","jou","jouw","jouwe","juist","jullie","kan","klaar","kon","konden","krachtens","kunnen","kunt","later","liever","maar","mag","meer","met","mezelf","mij","mijn","mijnent","mijner","mijzelf","misschien","mocht","mochten","moest","moesten","moet","moeten","mogen","na","naar","nadat","net","niet","noch","nog","nogal","nu","of","ofschoon","om","omdat","omhoog","omlaag","omstreeks","omtrent","omver","onder","ondertussen","ongeveer","ons","onszelf","onze","ook","op","opnieuw","opzij","over","overeind","overigens","pas","precies","reeds","rond","rondom","sedert","sinds","sindsdien","slechts","sommige","spoedig","steeds","tamelijk","tenzij","terwijl","thans","tijdens","toch","toen","toenmaals","toenmalig","tot","totdat","tussen","uit","uitgezonderd","vaakwat","van","vandaan","vanuit","vanwege","veeleer","verder","vervolgens","vol","volgens","voor","vooraf","vooral","vooralsnog","voorbij","voordat","voordezen","voordien","voorheen","voorop","vooruit","vrij","vroeg","waar","waarom","wanneer","want","waren","was","weer","weg","wegens","wel","weldra","welk","welke","wie","wiens","wier","wij","wijzelf","zal","ze","zelfs","zichzelf","zij","zijn","zijne","zo","zodra","zonder","zou","zouden","zowat","zulke","zullen","zult"]}},9770:e=>{e.exports={stopwords:["a","aby","ach","acz","aczkolwiek","aj","albo","ale","alez","ale\u017c","ani","az","a\u017c","bardziej","bardzo","bo","bowiem","by","byli","bynajmniej","byc","by\u0107","byl","by\u0142","byla","bylo","byly","by\u0142a","by\u0142o","by\u0142y","bedzie","b\u0119dzie","beda","b\u0119d\u0105","cali","cala","ca\u0142a","caly","ca\u0142y","ci","cie","ci\u0119","ciebie","co","cokolwiek","cos","co\u015b","czasami","czasem","czemu","czy","czyli","daleko","dla","dlaczego","dlatego","do","dobrze","dokad","dok\u0105d","dosc","do\u015b\u0107","duzo","du\u017co","dwa","dwaj","dwie","dwoje","dzis","dzi\u015b","dzisiaj","gdy","gdyby","gdyz","gdy\u017c","gdzie","gdziekolwiek","gdzies","gdzie\u015b","go","i","ich","ile","im","inna","inne","inny","innych","iz","i\u017c","ja","j\u0105","jak","jakas","jaka\u015b","jakby","jaki","jakichs","jakich\u015b","jakie","jakis","jaki\u015b","jakiz","jaki\u017c","jakkolwiek","jako","jakos","jako\u015b","je","jeden","jedna","jedno","jednak","jednakze","jednak\u017ce","jego","jej","jemu","jest","jestem","jeszcze","jesli","je\u015bli","jezeli","je\u017celi","juz","ju\u017c","kazdy","ka\u017cdy","kiedy","kilka","kims","kim\u015b","kto","ktokolwiek","ktos","kto\u015b","ktora","ktore","kt\xf3re","ktorego","ktorej","ktory","ktorych","ktorym","ktorzy","kt\xf3ra","kt\xf3rego","kt\xf3rej","kt\xf3ry","kt\xf3rych","kt\xf3rym","kt\xf3rzy","ku","lat","lecz","lub","ma","maj\u0105","ma\u0142o","mam","mi","mimo","miedzy","mi\u0119dzy","mna","mn\u0105","mnie","moga","mog\u0105","moi","moim","moja","moje","moze","mo\u017ce","mozliwe","mozna","mo\u017cliwe","mo\u017cna","moj","m\xf3j","mu","musi","my","na","nad","nam","nami","nas","nasi","nasz","nasza","nasze","naszego","naszych","natomiast","natychmiast","nawet","nia","ni\u0105","nic","nich","nie","niech","niego","niej","niemu","nigdy","nim","nimi","niz","ni\u017c","no","o","obok","od","oko\u0142o","on","ona","one","oni","ono","oraz","oto","owszem","pan","pana","pani","po","pod","podczas","pomimo","ponad","poniewaz","poniewa\u017c","powinien","powinna","powinni","powinno","poza","prawie","przeciez","przecie\u017c","przed","przede","przedtem","przez","przy","roku","rowniez","r\xf3wnie\u017c","sam","sama","s\u0105","sie","si\u0119","skad","sk\u0105d","sobie","soba","sob\u0105","sposob","spos\xf3b","swoje","ta","tak","taka","taki","takie","takze","tak\u017ce","tam","te","tego","tej","ten","teraz","te\u017c","to","toba","tob\u0105","tobie","totez","tote\u017c","trzeba","tu","tutaj","twoi","twoim","twoja","twoje","twym","twoj","tw\xf3j","ty","tych","tylko","tym","u","w","wam","wami","was","wasz","wasza","wasze","we","wed\u0142ug","wiele","wielu","wi\u0119c","wi\u0119cej","wszyscy","wszystkich","wszystkie","wszystkim","wszystko","wtedy","wy","wlasnie","w\u0142a\u015bnie","z","za","zapewne","zawsze","ze","znowu","znow","zn\xf3w","zostal","zosta\u0142","zaden","zadna","zadne","zadnych","ze","zeby","\u017caden","\u017cadna","\u017cadne","\u017cadnych","\u017ce","\u017ceby"]}},8002:e=>{e.exports={stopwords:["a","\xe0","adeus","agora","a\xed","ainda","al\xe9m","algo","algumas","alguns","ali","ano","anos","antes","ao","aos","apenas","apoio","ap\xf3s","aquela","aquelas","aquele","aqueles","aqui","aquilo","\xe1rea","as","\xe0s","assim","at\xe9","atr\xe1s","atrav\xe9s","baixo","bastante","bem","boa","boas","bom","bons","breve","c\xe1","cada","catorze","cedo","cento","certamente","certeza","cima","cinco","coisa","com","como","conselho","contra","custa","da","d\xe1","d\xe3o","daquela","daquelas","daquele","daqueles","dar","das","de","debaixo","demais","dentro","depois","desde","dessa","dessas","desse","desses","desta","destas","deste","destes","deve","dever\xe1","dez","dezanove","dezasseis","dezassete","dezoito","dia","diante","diz","dizem","dizer","do","dois","dos","doze","duas","d\xfavida","e","\xe9","ela","elas","ele","eles","em","embora","entre","era","\xe9s","essa","essas","esse","esses","esta","est\xe1","est\xe3o","estar","estas","est\xe1s","estava","este","estes","esteve","estive","estivemos","estiveram","estiveste","estivestes","estou","eu","exemplo","fa\xe7o","falta","favor","faz","fazeis","fazem","fazemos","fazer","fazes","fez","fim","final","foi","fomos","for","foram","forma","foste","fostes","fui","geral","grande","grandes","grupo","h\xe1","hoje","hora","horas","isso","isto","j\xe1","l\xe1","lado","local","logo","longe","lugar","maior","maioria","mais","mal","mas","m\xe1ximo","me","meio","menor","menos","m\xeas","meses","meu","meus","mil","minha","minhas","momento","muito","muitos","na","nada","n\xe3o","naquela","naquelas","naquele","naqueles","nas","nem","nenhuma","nessa","nessas","nesse","nesses","nesta","nestas","neste","nestes","n\xedvel","no","noite","nome","nos","n\xf3s","nossa","nossas","nosso","nossos","nova","novas","nove","novo","novos","num","numa","n\xfamero","nunca","o","obra","obrigada","obrigado","oitava","oitavo","oito","onde","ontem","onze","os","ou","outra","outras","outro","outros","para","parece","parte","partir","paucas","pela","pelas","pelo","pelos","perto","pode","p\xf4de","podem","poder","p\xf5e","p\xf5em","ponto","pontos","por","porque","porqu\xea","posi\xe7\xe3o","poss\xedvel","possivelmente","posso","pouca","pouco","poucos","primeira","primeiras","primeiro","primeiros","pr\xf3pria","pr\xf3prias","pr\xf3prio","pr\xf3prios","pr\xf3xima","pr\xf3ximas","pr\xf3ximo","pr\xf3ximos","puderam","qu\xe1is","qual","quando","quanto","quarta","quarto","quatro","que","qu\xea","quem","quer","quereis","querem","queremas","queres","quero","quest\xe3o","quinta","quinto","quinze","rela\xe7\xe3o","sabe","sabem","s\xe3o","se","segunda","segundo","sei","seis","sem","sempre","ser","seria","sete","s\xe9tima","s\xe9timo","seu","seus","sexta","sexto","sim","sistema","sob","sobre","sois","somos","sou","sua","suas","tal","talvez","tamb\xe9m","tanta","tantas","tanto","t\xe3o","tarde","te","tem","t\xeam","temos","tendes","tenho","tens","ter","terceira","terceiro","teu","teus","teve","tive","tivemos","tiveram","tiveste","tivestes","toda","todas","todo","todos","trabalho","tr\xeas","treze","tu","tua","tuas","tudo","um","uma","umas","uns","vai","vais","v\xe3o","v\xe1rios","vem","v\xeam","vens","ver","vez","vezes","viagem","vindo","vinte","voc\xea","voc\xeas","vos","v\xf3s","vossa","vossas","vosso","vossos","zero"]}},6625:e=>{e.exports={stopwords:["a","abia","acea","aceasta","aceast\u0103","aceea","aceeasi","acei","aceia","acel","acela","acelasi","acele","acelea","acest","acesta","aceste","acestea","acestei","acestia","acestui","ace\u015fti","ace\u015ftia","acolo","acord","acum","adica","ai","aia","aib\u0103","aici","aiurea","al","ala","alaturi","ale","alea","alt","alta","altceva","altcineva","alte","altfel","alti","altii","altul","am","anume","apoi","ar","are","as","asa","asemenea","asta","astazi","astea","astfel","ast\u0103zi","asupra","atare","atat","atata","atatea","atatia","ati","atit","atita","atitea","atitia","atunci","au","avea","avem","ave\u0163i","avut","azi","a\u015f","a\u015fadar","a\u0163i","b","ba","bine","bucur","bun\u0103","c","ca","cam","cand","capat","care","careia","carora","caruia","cat","catre","caut","ce","cea","ceea","cei","ceilalti","cel","cele","celor","ceva","chiar","ci","cinci","cind","cine","cineva","cit","cita","cite","citeva","citi","citiva","conform","contra","cu","cui","cum","cumva","cur\xe2nd","cur\xeend","c\xe2nd","c\xe2t","c\xe2te","c\xe2tva","c\xe2\u0163i","c\xeend","c\xeet","c\xeete","c\xeetva","c\xee\u0163i","c\u0103","c\u0103ci","c\u0103rei","c\u0103ror","c\u0103rui","c\u0103tre","d","da","daca","dac\u0103","dar","dat","datorit\u0103","dat\u0103","dau","de","deasupra","deci","decit","degraba","deja","deoarece","departe","desi","despre","de\u015fi","din","dinaintea","dintr","dintr-","dintre","doar","doi","doilea","dou\u0103","drept","dupa","dup\u0103","d\u0103","e","ea","ei","el","ele","era","eram","este","eu","exact","e\u015fti","f","face","fara","fata","fel","fi","fie","fiecare","fii","fim","fiu","fi\u0163i","foarte","fost","frumos","f\u0103r\u0103","g","geaba","gra\u0163ie","h","halb\u0103","i","ia","iar","ieri","ii","il","imi","in","inainte","inapoi","inca","incit","insa","intr","intre","isi","iti","j","k","l","la","le","li","lor","lui","l\xe2ng\u0103","l\xeeng\u0103","m","ma","mai","mare","mea","mei","mele","mereu","meu","mi","mie","mine","mod","mult","multa","multe","multi","mult\u0103","mul\u0163i","mul\u0163umesc","m\xe2ine","m\xeeine","m\u0103","n","ne","nevoie","ni","nici","niciodata","nic\u0103ieri","nimeni","nimeri","nimic","niste","ni\u015fte","noastre","noastr\u0103","noi","noroc","nostri","nostru","nou","noua","nou\u0103","no\u015ftri","nu","numai","o","opt","or","ori","oricare","orice","oricine","oricum","oric\xe2nd","oric\xe2t","oric\xeend","oric\xeet","oriunde","p","pai","parca","patra","patru","patrulea","pe","pentru","peste","pic","pina","plus","poate","pot","prea","prima","primul","prin","printr-","putini","pu\u0163in","pu\u0163ina","pu\u0163in\u0103","p\xe2n\u0103","p\xeen\u0103","r","rog","s","sa","sa-mi","sa-ti","sai","sale","sau","se","si","sint","sintem","spate","spre","sub","sunt","suntem","sunte\u0163i","sus","sut\u0103","s\xeent","s\xeentem","s\xeente\u0163i","s\u0103","s\u0103i","s\u0103u","t","ta","tale","te","ti","timp","tine","toata","toate","toat\u0103","tocmai","tot","toti","totul","totusi","totu\u015fi","to\u0163i","trei","treia","treilea","tu","tuturor","t\u0103i","t\u0103u","u","ul","ului","un","una","unde","undeva","unei","uneia","unele","uneori","unii","unor","unora","unu","unui","unuia","unul","v","va","vi","voastre","voastr\u0103","voi","vom","vor","vostru","vou\u0103","vo\u015ftri","vreme","vreo","vreun","v\u0103","x","z","zece","zero","zi","zice","\xeei","\xeel","\xeemi","\xeempotriva","\xeen","\xeenainte","\xeenaintea","\xeencotro","\xeenc\xe2t","\xeenc\xeet","\xeentre","\xeentruc\xe2t","\xeentruc\xeet","\xee\u0163i","\u0103la","\u0103lea","\u0103sta","\u0103stea","\u0103\u015ftia","\u015fapte","\u015fase","\u015fi","\u015ftiu","\u0163i","\u0163ie"]}},1799:e=>{e.exports={stopwords:["\u0430","\u0435","\u0438","\u0436","\u043c","\u043e","\u043d\u0430","\u043d\u0435","\u043d\u0438","\u043e\u0431","\u043d\u043e","\u043e\u043d","\u043c\u043d\u0435","\u043c\u043e\u0438","\u043c\u043e\u0436","\u043e\u043d\u0430","\u043e\u043d\u0438","\u043e\u043d\u043e","\u043c\u043d\u043e\u0439","\u043c\u043d\u043e\u0433\u043e","\u043c\u043d\u043e\u0433\u043e\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u0435","\u043c\u043d\u043e\u0433\u043e\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u0430\u044f","\u043c\u043d\u043e\u0433\u043e\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u044b\u0435","\u043c\u043d\u043e\u0433\u043e\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u044b\u0439","\u043c\u043d\u043e\u044e","\u043c\u043e\u0439","\u043c\u043e\u0433","\u043c\u043e\u0433\u0443\u0442","\u043c\u043e\u0436\u043d\u043e","\u043c\u043e\u0436\u0435\u0442","\u043c\u043e\u0436\u0445\u043e","\u043c\u043e\u0440","\u043c\u043e\u044f","\u043c\u043e\u0451","\u043c\u043e\u0447\u044c","\u043d\u0430\u0434","\u043d\u0435\u0435","\u043e\u0431\u0430","\u043d\u0430\u043c","\u043d\u0435\u043c","\u043d\u0430\u043c\u0438","\u043d\u0438\u043c\u0438","\u043c\u0438\u043c\u043e","\u043d\u0435\u043c\u043d\u043e\u0433\u043e","\u043e\u0434\u043d\u043e\u0439","\u043e\u0434\u043d\u043e\u0433\u043e","\u043c\u0435\u043d\u0435\u0435","\u043e\u0434\u043d\u0430\u0436\u0434\u044b","\u043e\u0434\u043d\u0430\u043a\u043e","\u043c\u0435\u043d\u044f","\u043d\u0435\u043c\u0443","\u043c\u0435\u043d\u044c\u0448\u0435","\u043d\u0435\u0439","\u043d\u0430\u0432\u0435\u0440\u0445\u0443","\u043d\u0435\u0433\u043e","\u043d\u0438\u0436\u0435","\u043c\u0430\u043b\u043e","\u043d\u0430\u0434\u043e","\u043e\u0434\u0438\u043d","\u043e\u0434\u0438\u043d\u043d\u0430\u0434\u0446\u0430\u0442\u044c","\u043e\u0434\u0438\u043d\u043d\u0430\u0434\u0446\u0430\u0442\u044b\u0439","\u043d\u0430\u0437\u0430\u0434","\u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435","\u043d\u0435\u0434\u0430\u0432\u043d\u043e","\u043c\u0438\u043b\u043b\u0438\u043e\u043d\u043e\u0432","\u043d\u0435\u0434\u0430\u043b\u0435\u043a\u043e","\u043c\u0435\u0436\u0434\u0443","\u043d\u0438\u0437\u043a\u043e","\u043c\u0435\u043b\u044f","\u043d\u0435\u043b\u044c\u0437\u044f","\u043d\u0438\u0431\u0443\u0434\u044c","\u043d\u0435\u043f\u0440\u0435\u0440\u044b\u0432\u043d\u043e","\u043d\u0430\u043a\u043e\u043d\u0435\u0446","\u043d\u0438\u043a\u043e\u0433\u0434\u0430","\u043d\u0438\u043a\u0443\u0434\u0430","\u043d\u0430\u0441","\u043d\u0430\u0448","\u043d\u0435\u0442","\u043d\u0435\u044e","\u043d\u0435\u0451","\u043d\u0438\u0445","\u043c\u0438\u0440\u0430","\u043d\u0430\u0448\u0430","\u043d\u0430\u0448\u0435","\u043d\u0430\u0448\u0438","\u043d\u0438\u0447\u0435\u0433\u043e","\u043d\u0430\u0447\u0430\u043b\u0430","\u043d\u0435\u0440\u0435\u0434\u043a\u043e","\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e","\u043e\u0431\u044b\u0447\u043d\u043e","\u043e\u043f\u044f\u0442\u044c","\u043e\u043a\u043e\u043b\u043e","\u043c\u044b","\u043d\u0443","\u043d\u0445","\u043e\u0442","\u043e\u0442\u043e\u0432\u0441\u044e\u0434\u0443","\u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e","\u043d\u0443\u0436\u043d\u043e","\u043e\u0447\u0435\u043d\u044c","\u043e\u0442\u0441\u044e\u0434\u0430","\u0432","\u0432\u043e","\u0432\u043e\u043d","\u0432\u043d\u0438\u0437","\u0432\u043d\u0438\u0437\u0443","\u0432\u043e\u043a\u0440\u0443\u0433","\u0432\u043e\u0442","\u0432\u043e\u0441\u0435\u043c\u043d\u0430\u0434\u0446\u0430\u0442\u044c","\u0432\u043e\u0441\u0435\u043c\u043d\u0430\u0434\u0446\u0430\u0442\u044b\u0439","\u0432\u043e\u0441\u0435\u043c\u044c","\u0432\u043e\u0441\u044c\u043c\u043e\u0439","\u0432\u0432\u0435\u0440\u0445","\u0432\u0430\u043c","\u0432\u0430\u043c\u0438","\u0432\u0430\u0436\u043d\u043e\u0435","\u0432\u0430\u0436\u043d\u0430\u044f","\u0432\u0430\u0436\u043d\u044b\u0435","\u0432\u0430\u0436\u043d\u044b\u0439","\u0432\u0434\u0430\u043b\u0438","\u0432\u0435\u0437\u0434\u0435","\u0432\u0435\u0434\u044c","\u0432\u0430\u0441","\u0432\u0430\u0448","\u0432\u0430\u0448\u0430","\u0432\u0430\u0448\u0435","\u0432\u0430\u0448\u0438","\u0432\u043f\u0440\u043e\u0447\u0435\u043c","\u0432\u0435\u0441\u044c","\u0432\u0434\u0440\u0443\u0433","\u0432\u044b","\u0432\u0441\u0435","\u0432\u0442\u043e\u0440\u043e\u0439","\u0432\u0441\u0435\u043c","\u0432\u0441\u0435\u043c\u0438","\u0432\u0440\u0435\u043c\u0435\u043d\u0438","\u0432\u0440\u0435\u043c\u044f","\u0432\u0441\u0435\u043c\u0443","\u0432\u0441\u0435\u0433\u043e","\u0432\u0441\u0435\u0433\u0434\u0430","\u0432\u0441\u0435\u0445","\u0432\u0441\u0435\u044e","\u0432\u0441\u044e","\u0432\u0441\u044f","\u0432\u0441\u0451","\u0432\u0441\u044e\u0434\u0443","\u0433","\u0433\u043e\u0434","\u0433\u043e\u0432\u043e\u0440\u0438\u043b","\u0433\u043e\u0432\u043e\u0440\u0438\u0442","\u0433\u043e\u0434\u0430","\u0433\u043e\u0434\u0443","\u0433\u0434\u0435","\u0434\u0430","\u0435\u0435","\u0437\u0430","\u0438\u0437","\u043b\u0438","\u0436\u0435","\u0438\u043c","\u0434\u043e","\u043f\u043e","\u0438\u043c\u0438","\u043f\u043e\u0434","\u0438\u043d\u043e\u0433\u0434\u0430","\u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e","\u0438\u043c\u0435\u043d\u043d\u043e","\u0434\u043e\u043b\u0433\u043e","\u043f\u043e\u0437\u0436\u0435","\u0431\u043e\u043b\u0435\u0435","\u0434\u043e\u043b\u0436\u043d\u043e","\u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430","\u0437\u043d\u0430\u0447\u0438\u0442","\u0438\u043c\u0435\u0442\u044c","\u0431\u043e\u043b\u044c\u0448\u0435","\u043f\u043e\u043a\u0430","\u0435\u043c\u0443","\u0438\u043c\u044f","\u043f\u043e\u0440","\u043f\u043e\u0440\u0430","\u043f\u043e\u0442\u043e\u043c","\u043f\u043e\u0442\u043e\u043c\u0443","\u043f\u043e\u0441\u043b\u0435","\u043f\u043e\u0447\u0435\u043c\u0443","\u043f\u043e\u0447\u0442\u0438","\u043f\u043e\u0441\u0440\u0435\u0434\u0438","\u0435\u0439","\u0434\u0432\u0430","\u0434\u0432\u0435","\u0434\u0432\u0435\u043d\u0430\u0434\u0446\u0430\u0442\u044c","\u0434\u0432\u0435\u043d\u0430\u0434\u0446\u0430\u0442\u044b\u0439","\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044c","\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044b\u0439","\u0434\u0432\u0443\u0445","\u0435\u0433\u043e","\u0434\u0435\u043b","\u0438\u043b\u0438","\u0431\u0435\u0437","\u0434\u0435\u043d\u044c","\u0437\u0430\u043d\u044f\u0442","\u0437\u0430\u043d\u044f\u0442\u0430","\u0437\u0430\u043d\u044f\u0442\u043e","\u0437\u0430\u043d\u044f\u0442\u044b","\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e","\u0434\u0430\u0432\u043d\u043e","\u0434\u0435\u0432\u044f\u0442\u043d\u0430\u0434\u0446\u0430\u0442\u044c","\u0434\u0435\u0432\u044f\u0442\u043d\u0430\u0434\u0446\u0430\u0442\u044b\u0439","\u0434\u0435\u0432\u044f\u0442\u044c","\u0434\u0435\u0432\u044f\u0442\u044b\u0439","\u0434\u0430\u0436\u0435","\u0430\u043b\u043b\u043e","\u0436\u0438\u0437\u043d\u044c","\u0434\u0430\u043b\u0435\u043a\u043e","\u0431\u043b\u0438\u0437\u043a\u043e","\u0437\u0434\u0435\u0441\u044c","\u0434\u0430\u043b\u044c\u0448\u0435","\u0434\u043b\u044f","\u043b\u0435\u0442","\u0437\u0430\u0442\u043e","\u0434\u0430\u0440\u043e\u043c","\u043f\u0435\u0440\u0432\u044b\u0439","\u043f\u0435\u0440\u0435\u0434","\u0437\u0430\u0442\u0435\u043c","\u0437\u0430\u0447\u0435\u043c","\u043b\u0438\u0448\u044c","\u0434\u0435\u0441\u044f\u0442\u044c","\u0434\u0435\u0441\u044f\u0442\u044b\u0439","\u0435\u044e","\u0435\u0451","\u0438\u0445","\u0431\u044b","\u0435\u0449\u0435","\u043f\u0440\u0438","\u0431\u044b\u043b","\u043f\u0440\u043e","\u043f\u0440\u043e\u0446\u0435\u043d\u0442\u043e\u0432","\u043f\u0440\u043e\u0442\u0438\u0432","\u043f\u0440\u043e\u0441\u0442\u043e","\u0431\u044b\u0432\u0430\u0435\u0442","\u0431\u044b\u0432\u044c","\u0435\u0441\u043b\u0438","\u043b\u044e\u0434\u0438","\u0431\u044b\u043b\u0430","\u0431\u044b\u043b\u0438","\u0431\u044b\u043b\u043e","\u0431\u0443\u0434\u0435\u043c","\u0431\u0443\u0434\u0435\u0442","\u0431\u0443\u0434\u0435\u0442\u0435","\u0431\u0443\u0434\u0435\u0448\u044c","\u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u043e","\u0431\u0443\u0434\u0443","\u0431\u0443\u0434\u044c","\u0431\u0443\u0434\u0442\u043e","\u0431\u0443\u0434\u0443\u0442","\u0435\u0449\u0451","\u043f\u044f\u0442\u043d\u0430\u0434\u0446\u0430\u0442\u044c","\u043f\u044f\u0442\u043d\u0430\u0434\u0446\u0430\u0442\u044b\u0439","\u0434\u0440\u0443\u0433\u043e","\u0434\u0440\u0443\u0433\u043e\u0435","\u0434\u0440\u0443\u0433\u043e\u0439","\u0434\u0440\u0443\u0433\u0438\u0435","\u0434\u0440\u0443\u0433\u0430\u044f","\u0434\u0440\u0443\u0433\u0438\u0445","\u0435\u0441\u0442\u044c","\u043f\u044f\u0442\u044c","\u0431\u044b\u0442\u044c","\u043b\u0443\u0447\u0448\u0435","\u043f\u044f\u0442\u044b\u0439","\u043a","\u043a\u043e\u043c","\u043a\u043e\u043d\u0435\u0447\u043d\u043e","\u043a\u043e\u043c\u0443","\u043a\u043e\u0433\u043e","\u043a\u043e\u0433\u0434\u0430","\u043a\u043e\u0442\u043e\u0440\u043e\u0439","\u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e","\u043a\u043e\u0442\u043e\u0440\u0430\u044f","\u043a\u043e\u0442\u043e\u0440\u044b\u0435","\u043a\u043e\u0442\u043e\u0440\u044b\u0439","\u043a\u043e\u0442\u043e\u0440\u044b\u0445","\u043a\u0435\u043c","\u043a\u0430\u0436\u0434\u043e\u0435","\u043a\u0430\u0436\u0434\u0430\u044f","\u043a\u0430\u0436\u0434\u044b\u0435","\u043a\u0430\u0436\u0434\u044b\u0439","\u043a\u0430\u0436\u0435\u0442\u0441\u044f","\u043a\u0430\u043a","\u043a\u0430\u043a\u043e\u0439","\u043a\u0430\u043a\u0430\u044f","\u043a\u0442\u043e","\u043a\u0440\u043e\u043c\u0435","\u043a\u0443\u0434\u0430","\u043a\u0440\u0443\u0433\u043e\u043c","\u0441","\u0442","\u0443","\u044f","\u0442\u0430","\u0442\u0435","\u0443\u0436","\u0441\u043e","\u0442\u043e","\u0442\u043e\u043c","\u0441\u043d\u043e\u0432\u0430","\u0442\u043e\u043c\u0443","\u0441\u043e\u0432\u0441\u0435\u043c","\u0442\u043e\u0433\u043e","\u0442\u043e\u0433\u0434\u0430","\u0442\u043e\u0436\u0435","\u0441\u043e\u0431\u043e\u0439","\u0442\u043e\u0431\u043e\u0439","\u0441\u043e\u0431\u043e\u044e","\u0442\u043e\u0431\u043e\u044e","\u0441\u043d\u0430\u0447\u0430\u043b\u0430","\u0442\u043e\u043b\u044c\u043a\u043e","\u0443\u043c\u0435\u0442\u044c","\u0442\u043e\u0442","\u0442\u043e\u044e","\u0445\u043e\u0440\u043e\u0448\u043e","\u0445\u043e\u0442\u0435\u0442\u044c","\u0445\u043e\u0447\u0435\u0448\u044c","\u0445\u043e\u0442\u044c","\u0445\u043e\u0442\u044f","\u0441\u0432\u043e\u0435","\u0441\u0432\u043e\u0438","\u0442\u0432\u043e\u0439","\u0441\u0432\u043e\u0435\u0439","\u0441\u0432\u043e\u0435\u0433\u043e","\u0441\u0432\u043e\u0438\u0445","\u0441\u0432\u043e\u044e","\u0442\u0432\u043e\u044f","\u0442\u0432\u043e\u0451","\u0440\u0430\u0437","\u0443\u0436\u0435","\u0441\u0430\u043c","\u0442\u0430\u043c","\u0442\u0435\u043c","\u0447\u0435\u043c","\u0441\u0430\u043c\u0430","\u0441\u0430\u043c\u0438","\u0442\u0435\u043c\u0438","\u0441\u0430\u043c\u043e","\u0440\u0430\u043d\u043e","\u0441\u0430\u043c\u043e\u043c","\u0441\u0430\u043c\u043e\u043c\u0443","\u0441\u0430\u043c\u043e\u0439","\u0441\u0430\u043c\u043e\u0433\u043e","\u0441\u0435\u043c\u043d\u0430\u0434\u0446\u0430\u0442\u044c","\u0441\u0435\u043c\u043d\u0430\u0434\u0446\u0430\u0442\u044b\u0439","\u0441\u0430\u043c\u0438\u043c","\u0441\u0430\u043c\u0438\u043c\u0438","\u0441\u0430\u043c\u0438\u0445","\u0441\u0430\u043c\u0443","\u0441\u0435\u043c\u044c","\u0447\u0435\u043c\u0443","\u0440\u0430\u043d\u044c\u0448\u0435","\u0441\u0435\u0439\u0447\u0430\u0441","\u0447\u0435\u0433\u043e","\u0441\u0435\u0433\u043e\u0434\u043d\u044f","\u0441\u0435\u0431\u0435","\u0442\u0435\u0431\u0435","\u0441\u0435\u0430\u043e\u0439","\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0440\u0430\u0437\u0432\u0435","\u0442\u0435\u043f\u0435\u0440\u044c","\u0441\u0435\u0431\u044f","\u0442\u0435\u0431\u044f","\u0441\u0435\u0434\u044c\u043c\u043e\u0439","\u0441\u043f\u0430\u0441\u0438\u0431\u043e","\u0441\u043b\u0438\u0448\u043a\u043e\u043c","\u0442\u0430\u043a","\u0442\u0430\u043a\u043e\u0435","\u0442\u0430\u043a\u043e\u0439","\u0442\u0430\u043a\u0438\u0435","\u0442\u0430\u043a\u0436\u0435","\u0442\u0430\u043a\u0430\u044f","\u0441\u0438\u0445","\u0442\u0435\u0445","\u0447\u0430\u0449\u0435","\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u044b\u0439","\u0447\u0435\u0440\u0435\u0437","\u0447\u0430\u0441\u0442\u043e","\u0448\u0435\u0441\u0442\u043e\u0439","\u0448\u0435\u0441\u0442\u043d\u0430\u0434\u0446\u0430\u0442\u044c","\u0448\u0435\u0441\u0442\u043d\u0430\u0434\u0446\u0430\u0442\u044b\u0439","\u0448\u0435\u0441\u0442\u044c","\u0447\u0435\u0442\u044b\u0440\u0435","\u0447\u0435\u0442\u044b\u0440\u043d\u0430\u0434\u0446\u0430\u0442\u044c","\u0447\u0435\u0442\u044b\u0440\u043d\u0430\u0434\u0446\u0430\u0442\u044b\u0439","\u0441\u043a\u043e\u043b\u044c\u043a\u043e","\u0441\u043a\u0430\u0437\u0430\u043b","\u0441\u043a\u0430\u0437\u0430\u043b\u0430","\u0441\u043a\u0430\u0437\u0430\u0442\u044c","\u0442\u0443","\u0442\u044b","\u0442\u0440\u0438","\u044d\u0442\u0430","\u044d\u0442\u0438","\u0447\u0442\u043e","\u044d\u0442\u043e","\u0447\u0442\u043e\u0431","\u044d\u0442\u043e\u043c","\u044d\u0442\u043e\u043c\u0443","\u044d\u0442\u043e\u0439","\u044d\u0442\u043e\u0433\u043e","\u0447\u0442\u043e\u0431\u044b","\u044d\u0442\u043e\u0442","\u0441\u0442\u0430\u043b","\u0442\u0443\u0434\u0430","\u044d\u0442\u0438\u043c","\u044d\u0442\u0438\u043c\u0438","\u0440\u044f\u0434\u043e\u043c","\u0442\u0440\u0438\u043d\u0430\u0434\u0446\u0430\u0442\u044c","\u0442\u0440\u0438\u043d\u0430\u0434\u0446\u0430\u0442\u044b\u0439","\u044d\u0442\u0438\u0445","\u0442\u0440\u0435\u0442\u0438\u0439","\u0442\u0443\u0442","\u044d\u0442\u0443","\u0441\u0443\u0442\u044c","\u0447\u0443\u0442\u044c","\u0442\u044b\u0441\u044f\u0447"]}},141:(e,t,n)=>{e.exports={ar:n(8893).stopwords,cs:n(9768).stopwords,da:n(4873).stopwords,de:n(7621).stopwords,en:n(7613).stopwords,es:n(4474).stopwords,fa:n(7007).stopwords,fr:n(2082).stopwords,gl:n(2681).stopwords,it:n(8119).stopwords,ko:n(8631).stopwords,nl:n(8708).stopwords,pl:n(9770).stopwords,pt:n(8002).stopwords,ro:n(6625).stopwords,ru:n(1799).stopwords,sv:n(4747).stopwords,tr:n(1536).stopwords,vi:n(9975).stopwords}},4747:e=>{e.exports={stopwords:["aderton","adertonde","adj\xf6","aldrig","alla","allas","allt","alltid","allts\xe5","\xe4n","andra","andras","annan","annat","\xe4nnu","artonde","artonn","\xe5tminstone","att","\xe5tta","\xe5ttio","\xe5ttionde","\xe5ttonde","av","\xe4ven","b\xe5da","b\xe5das","bakom","bara","b\xe4st","b\xe4ttre","beh\xf6va","beh\xf6vas","beh\xf6vde","beh\xf6vt","beslut","beslutat","beslutit","bland","blev","bli","blir","blivit","bort","borta","bra","d\xe5","dag","dagar","dagarna","dagen","d\xe4r","d\xe4rf\xf6r","de","del","delen","dem","den","deras","dess","det","detta","dig","din","dina","dit","ditt","dock","du","efter","eftersom","elfte","eller","elva","en","enkel","enkelt","enkla","enligt","er","era","ert","ett","ettusen","f\xe5","fanns","f\xe5r","f\xe5tt","fem","femte","femtio","femtionde","femton","femtonde","fick","fin","finnas","finns","fj\xe4rde","fjorton","fjortonde","fler","flera","flesta","f\xf6ljande","f\xf6r","f\xf6re","f\xf6rl\xe5t","f\xf6rra","f\xf6rsta","fram","framf\xf6r","fr\xe5n","fyra","fyrtio","fyrtionde","g\xe5","g\xe4lla","g\xe4ller","g\xe4llt","g\xe5r","g\xe4rna","g\xe5tt","genast","genom","gick","gjorde","gjort","god","goda","godare","godast","g\xf6r","g\xf6ra","gott","ha","hade","haft","han","hans","har","h\xe4r","heller","hellre","helst","helt","henne","hennes","hit","h\xf6g","h\xf6ger","h\xf6gre","h\xf6gst","hon","honom","hundra","hundraen","hundraett","hur","i","ibland","idag","ig\xe5r","igen","imorgon","in","inf\xf6r","inga","ingen","ingenting","inget","innan","inne","inom","inte","inuti","ja","jag","j\xe4mf\xf6rt","kan","kanske","knappast","kom","komma","kommer","kommit","kr","kunde","kunna","kunnat","kvar","l\xe4nge","l\xe4ngre","l\xe5ngsam","l\xe5ngsammare","l\xe5ngsammast","l\xe5ngsamt","l\xe4ngst","l\xe5ngt","l\xe4tt","l\xe4ttare","l\xe4ttast","legat","ligga","ligger","lika","likst\xe4lld","likst\xe4llda","lilla","lite","liten","litet","man","m\xe5nga","m\xe5ste","med","mellan","men","mer","mera","mest","mig","min","mina","mindre","minst","mitt","mittemot","m\xf6jlig","m\xf6jligen","m\xf6jligt","m\xf6jligtvis","mot","mycket","n\xe5gon","n\xe5gonting","n\xe5got","n\xe5gra","n\xe4r","n\xe4sta","ned","nederst","nedersta","nedre","nej","ner","ni","nio","nionde","nittio","nittionde","nitton","nittonde","n\xf6dv\xe4ndig","n\xf6dv\xe4ndiga","n\xf6dv\xe4ndigt","n\xf6dv\xe4ndigtvis","nog","noll","nr","nu","nummer","och","ocks\xe5","ofta","oftast","olika","olikt","om","oss","\xf6ver","\xf6vermorgon","\xf6verst","\xf6vre","p\xe5","rakt","r\xe4tt","redan","redigera","s\xe5","sade","s\xe4ga","s\xe4ger","sagt","samma","s\xe4mre","s\xe4mst","se","sedan","senare","senast","sent","sex","sextio","sextionde","sexton","sextonde","sig","sin","sina","sist","sista","siste","sitt","sj\xe4tte","sju","sjunde","sjuttio","sjuttionde","sjutton","sjuttonde","ska","skall","skulle","slutligen","sm\xe5","sm\xe5tt","snart","som","stor","stora","st\xf6rre","st\xf6rst","stort","tack","tidig","tidigare","tidigast","tidigt","till","tills","tillsammans","tio","tionde","tjugo","tjugoen","tjugoett","tjugonde","tjugotre","tjugotv\xe5","tjungo","tolfte","tolv","tre","tredje","trettio","trettionde","tretton","trettonde","tv\xe5","tv\xe5hundra","under","upp","ur","urs\xe4kt","ut","utan","utanf\xf6r","ute","vad","v\xe4nster","v\xe4nstra","v\xe5r","vara","v\xe5ra","varf\xf6r","varifr\xe5n","varit","varken","v\xe4rre","vars\xe5god","vart","v\xe5rt","vem","vems","verkligen","vi","vid","vidare","viktig","viktigare","viktigast","viktigt","vilka","vilken","vilket","vill","\xe4r","\xe5r","\xe4ven","dessa","wikitext","wikipedia","tyngre","tung","tyngst","kall","var","minimum","min","max","maximum","\xf6kning","\xf6ka","kallar","hj\xe4lp","anv\xe4nder","betydligt","s\xe4tt","denna","detta","det","hj\xe4lpa","anv\xe4nds","best\xe5r","tr\xe4nger","igenom","denna","ut\xf6ka","utarmat","ungef\xe4r","sprids","betydligt","omgivande","via","huvudartikel","exempel","exempelvis","vanligt","per","st\xf6rsta","stor","ord","ordet","kallas","p\xe5b\xf6rjad","h\xf6ra","fr\xe4mst","ihop","antalet","the","uttryck","uttrycket","\xe4ndra","presenteras","presenterades","t\xe4nka","delar","s\xf6ka","h\xe4mta","inneh\xe5ll","definera","anv\xe4nda","pekar","ist\xe4llet","st\xe4llet","pekar","standard","vanligaste","heter","precist","felaktigt","k\xe4llor","h\xf6ga","mottagare","eng","bildade","bytte","bildades","grundades","svar","betyder","betydelse","m\xf6jligheter","m\xf6jlig","m\xf6jlighet","syfte","gamla","tio\xe5rig","\xe5r","\xf6verg\xe5ngsperiod","ers\xe4ttas","anv\xe4ndes","anv\xe4nds","utg\xf6rs","drygt","alla","allt","allts\xe5","andra","att","bara","bli","blir","borde","bra","mitt","ser","dem","den","denna","det","detta","dig","din","dock","dom","d\xe4r","edit","efter","eftersom","eller","ett","fast","fel","fick","finns","fram","fr\xe5n","f\xe5r","f\xe5tt","f\xf6r","f\xf6rsta","genom","ger","g\xe5r","g\xf6r","g\xf6ra","hade","han","har","hela","helt","honom","hur","h\xe4r","iaf","igen","ingen","inget","inte","jag","kan","kanske","kommer","lika","lite","man","med","men","mer","mig","min","mot","mycket","m\xe5nga","m\xe5ste","nog","n\xe4r","n\xe5gon","n\xe5got","n\xe5gra","n\xe5n","n\xe5t","och","ocks\xe5","r\xe4tt","samma","sedan","sen","sig","sin","sj\xe4lv","ska","skulle","som","s\xe4tt","tar","till","tror","tycker","typ","upp","utan","vad","var","vara","vet","vid","vilket","vill","v\xe4l","\xe4ven","\xf6ver","f\xf6rekommer","varierar","representera","representerar","itu","p\xe5b\xf6rjades","le","\xe5tg\xe4rder","\xe5tg\xe4rd","s\xe5dant","s\xe4rskilt","eftersom","som","efter","syftet","syfte","ersatts","ers\xe4tts","ersatt","ers\xe4tt","tagits","byter","ben\xe4mningar","ler","\xe4rvs","\xe4rv","\xe4rvd","januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december","on","\xf6vriga","anv\xe4nts","anv\xe4nd","anv\xe4nds","anv\xe4nt","syftar","ex","sv\xe5rt","sv\xe5r","l\xe4tt","l\xe4tta","l\xe4ttast","l\xe4ttare","sv\xe5rare","sv\xe5rast","list","anv\xe4ndningsomr\xe5de","anv\xe4ndningsomr\xe5den","vissa","ii","hembyggda","krav","lugnt","\xe4nd\xe5","stycken","styck","l\xe5nga","korta","sm\xe5","stora","smala","tjocka","b\xf6rjan","tungt","l\xe4tt","tim","st","kg","km","tid","ny","gammal","nyare","antal","snabbare","b\xf6rjade","ansvar","ansvarar","b\xe5de","ca","l\xe5g","h\xf6g","ro","ton","kap","of","and","vars","kr/km","r\xf6r","g\xe4llande","placeras","placerades","t\xe4ckt","samt","hos","s\xe5dana","endast","tillst\xe5nd","beror","p\xe5","marken","minska","orsaker","l\xf6sningar","problem","namn","f\xf6rv\xe4ntas","f\xf6rv\xe4ntan","f\xf6rv\xe4ntats","varning","utf\xe4rdas","utf\xe4rda","km/h","n\xe5dde","stod","omr\xe5det","omr\xe5den","k\xe4lla","beh\xf6vs","drabbade","drabbat","which","top","that","l\xe4gre","allm\xe4nt","drog","drar","enorma","\xe4nda","enda","officiella","bekr\xe4ftats","bekr\xe4ftas","fall","sjunker","ned\xe5t","v\xe4rms","samtidigt","efterf\xf6ljd","problematik","upp\xe5t","utom","f\xf6rutom","h\xf6rnet","s\xf6t","salt","svag","stark","ren","smutsig","f\xf6rr","tiden","m\xe5ngdag","tisdag","onsdag","torsdag","fredag","l\xf6rdag","s\xf6ndag","m\xe5ndagar","tisdagar","onsdagar","torsdagar","fredagar","l\xf6rdagar","s\xf6ndagar","efterlikna","som","lik","bergis","bekymmer","s\xe5","lista","dig","dej","mig","mej","fri","vanlig","ovanlig","s\xe4llan","ofta","avskiljs","use","sl\xe4kte","sl\xe4ktet","sl\xe4kt","kategori","kategoriseras","rensas","renas","timmar","minuter","sekunder"]}},1536:e=>{e.exports={stopwords:["a","acaba","alt\u0131","altm\u0131\u015f","ama","ancak","arada","art\u0131k","asla","asl\u0131nda","asl\u0131nda","ayr\u0131ca","az","bana","bazen","baz\u0131","baz\u0131lar\u0131","belki","ben","benden","beni","benim","beri","be\u015f","bile","bilhassa","bin","bir","biraz","bir\xe7o\u011fu","bir\xe7ok","biri","birisi","birka\xe7","bir\u015fey","biz","bizden","bize","bizi","bizim","b\xf6yle","b\xf6ylece","bu","buna","bunda","bundan","bunlar","bunlar\u0131","bunlar\u0131n","bunu","bunun","burada","b\xfct\xfcn","\xe7o\u011fu","\xe7o\u011funu","\xe7ok","\xe7\xfcnk\xfc","da","daha","dahi","dan","de","defa","de\u011fil","di\u011fer","di\u011feri","di\u011ferleri","diye","doksan","dokuz","dolay\u0131","dolay\u0131s\u0131yla","d\xf6rt","e","edecek","eden","ederek","edilecek","ediliyor","edilmesi","ediyor","e\u011fer","elbette","elli","en","etmesi","etti","etti\u011fi","etti\u011fini","fakat","falan","filan","gene","gere\u011fi","gerek","gibi","g\xf6re","hala","halde","halen","hangi","hangisi","hani","hatta","hem","hen\xfcz","hep","hepsi","her","herhangi","herkes","herkese","herkesi","herkesin","hi\xe7","hi\xe7bir","hi\xe7biri","i","\u0131","i\xe7in","i\xe7inde","iki","ile","ilgili","ise","i\u015fte","itibaren","itibariyle","ka\xe7","kadar","kar\u015f\u0131n","kendi","kendilerine","kendine","kendini","kendisi","kendisine","kendisini","kez","ki","kim","kime","kimi","kimin","kimisi","kimse","k\u0131rk","madem","mi","m\u0131","milyar","milyon","mu","m\xfc","nas\u0131l","ne","neden","nedenle","nerde","nerede","nereye","neyse","ni\xe7in","nin","n\u0131n","niye","nun","n\xfcn","o","\xf6b\xfcr","olan","olarak","oldu","oldu\u011fu","oldu\u011funu","olduklar\u0131n\u0131","olmad\u0131","olmad\u0131\u011f\u0131","olmak","olmas\u0131","olmayan","olmaz","olsa","olsun","olup","olur","olur","olursa","oluyor","on","\xf6n","ona","\xf6nce","ondan","onlar","onlara","onlardan","onlar\u0131","onlar\u0131n","onu","onun","orada","\xf6te","\xf6t\xfcr\xfc","otuz","\xf6yle","oysa","pek","ra\u011fmen","sana","sanki","sanki","\u015fayet","\u015fekilde","sekiz","seksen","sen","senden","seni","senin","\u015fey","\u015feyden","\u015feye","\u015feyi","\u015feyler","\u015fimdi","siz","siz","sizden","sizden","size","sizi","sizi","sizin","sizin","sonra","\u015f\xf6yle","\u015fu","\u015funa","\u015funlar\u0131","\u015funu","ta","tabii","tam","tamam","tamamen","taraf\u0131ndan","trilyon","t\xfcm","t\xfcm\xfc","u","\xfc","\xfc\xe7","un","\xfcn","\xfczere","var","vard\u0131","ve","veya","ya","yani","yapacak","yap\u0131lan","yap\u0131lmas\u0131","yap\u0131yor","yapmak","yapt\u0131","yapt\u0131\u011f\u0131","yapt\u0131\u011f\u0131n\u0131","yapt\u0131klar\u0131","ye","yedi","yerine","yetmi\u015f","yi","y\u0131","yine","yirmi","yoksa","yu","y\xfcz","zaten","zira"]}},9975:e=>{e.exports={stopwords:["a l\xf4","a ha","ai","ai ai","ai n\u1ea5y","ai \u0111\xf3","al\xf4","amen","anh","anh \u1ea5y","ba","ba ba","ba b\u1ea3n","ba c\xf9ng","ba h\u1ecd","ba ng\xe0y","ba ng\xf4i","ba t\u0103ng","bao gi\u1edd","bao l\xe2u","bao nhi\xeau","bao n\u1ea3","bay bi\u1ebfn","bi\u1ebft","bi\u1ebft bao","bi\u1ebft bao nhi\xeau","bi\u1ebft ch\u1eafc","bi\u1ebft ch\u1eebng n\xe0o","bi\u1ebft m\xecnh","bi\u1ebft m\u1ea5y","bi\u1ebft th\u1ebf","bi\u1ebft tr\u01b0\u1edbc","bi\u1ebft vi\u1ec7c","bi\u1ebft \u0111\xe2u","bi\u1ebft \u0111\xe2u ch\u1eebng","bi\u1ebft \u0111\xe2u \u0111\u1ea5y","bi\u1ebft \u0111\u01b0\u1ee3c","bu\u1ed5i","bu\u1ed5i l\xe0m","bu\u1ed5i m\u1edbi","bu\u1ed5i ng\xe0y","bu\u1ed5i s\u1edbm","b\xe0","b\xe0 \u1ea5y","b\xe0i","b\xe0i b\xe1c","b\xe0i b\u1ecf","b\xe0i c\xe1i","b\xe1c","b\xe1n","b\xe1n c\u1ea5p","b\xe1n d\u1ea1","b\xe1n th\u1ebf","b\xe2y b\u1ea9y","b\xe2y ch\u1eeb","b\xe2y gi\u1edd","b\xe2y nhi\xeau","b\xe8n","b\xe9ng","b\xean","b\xean b\u1ecb","b\xean c\xf3","b\xean c\u1ea1nh","b\xf4ng","b\u01b0\u1edbc","b\u01b0\u1edbc kh\u1ecfi","b\u01b0\u1edbc t\u1edbi","b\u01b0\u1edbc \u0111i","b\u1ea1n","b\u1ea3n","b\u1ea3n b\u1ed9","b\u1ea3n ri\xeang","b\u1ea3n th\xe2n","b\u1ea3n \xfd","b\u1ea5t ch\u1ee3t","b\u1ea5t c\u1ee9","b\u1ea5t gi\xe1c","b\u1ea5t k\xec","b\u1ea5t k\u1ec3","b\u1ea5t k\u1ef3","b\u1ea5t lu\u1eadn","b\u1ea5t ng\u1edd","b\u1ea5t nh\u01b0\u1ee3c","b\u1ea5t qu\xe1","b\u1ea5t qu\xe1 ch\u1ec9","b\u1ea5t th\xecnh l\xecnh","b\u1ea5t t\u1eed","b\u1ea5t \u0111\u1ed3","b\u1ea5y","b\u1ea5y ch\u1ea7y","b\u1ea5y ch\u1eeb","b\u1ea5y gi\u1edd","b\u1ea5y l\xe2u","b\u1ea5y l\xe2u nay","b\u1ea5y nay","b\u1ea5y nhi\xeau","b\u1eadp b\xe0 b\u1eadp b\xf5m","b\u1eadp b\xf5m","b\u1eaft \u0111\u1ea7u","b\u1eaft \u0111\u1ea7u t\u1eeb","b\u1eb1ng","b\u1eb1ng c\u1ee9","b\u1eb1ng kh\xf4ng","b\u1eb1ng ng\u01b0\u1eddi","b\u1eb1ng nhau","b\u1eb1ng nh\u01b0","b\u1eb1ng n\xe0o","b\u1eb1ng n\u1ea5y","b\u1eb1ng v\xe0o","b\u1eb1ng \u0111\u01b0\u1ee3c","b\u1eb1ng \u1ea5y","b\u1ec3n","b\u1ec7t","b\u1ecb","b\u1ecb ch\xfa","b\u1ecb v\xec","b\u1ecf","b\u1ecf b\xe0","b\u1ecf cha","b\u1ecf cu\u1ed9c","b\u1ecf kh\xf4ng","b\u1ecf l\u1ea1i","b\u1ecf m\xecnh","b\u1ecf m\u1ea5t","b\u1ecf m\u1eb9","b\u1ecf nh\u1ecf","b\u1ecf qu\xe1","b\u1ecf ra","b\u1ecf ri\xeang","b\u1ecf vi\u1ec7c","b\u1ecf xa","b\u1ed7ng","b\u1ed7ng ch\u1ed1c","b\u1ed7ng d\u01b0ng","b\u1ed7ng kh\xf4ng","b\u1ed7ng nhi\xean","b\u1ed7ng nh\u01b0ng","b\u1ed7ng th\u1ea5y","b\u1ed7ng \u0111\xe2u","b\u1ed9","b\u1ed9 thu\u1ed9c","b\u1ed9 \u0111i\u1ec1u","b\u1ed9i ph\u1ea7n","b\u1edb","b\u1edfi","b\u1edfi ai","b\u1edfi ch\u01b0ng","b\u1edfi nh\u01b0ng","b\u1edfi sao","b\u1edfi th\u1ebf","b\u1edfi th\u1ebf cho n\xean","b\u1edfi t\u1ea1i","b\u1edfi v\xec","b\u1edfi v\u1eady","b\u1edfi \u0111\xe2u","b\u1ee9c","cao","cao l\xe2u","cao r\xe1o","cao r\u0103ng","cao sang","cao s\u1ed1","cao th\u1ea5p","cao th\u1ebf","cao xa","cha","cha ch\u1ea3","chao \xf4i","chia s\u1ebb","chi\u1ebfc","cho","cho bi\u1ebft","cho ch\u1eafc","cho hay","cho nhau","cho n\xean","cho r\u1eb1ng","cho r\u1ed3i","cho th\u1ea5y","cho tin","cho t\u1edbi","cho t\u1edbi khi","cho v\u1ec1","cho \u0103n","cho \u0111ang","cho \u0111\u01b0\u1ee3c","cho \u0111\u1ebfn","cho \u0111\u1ebfn khi","cho \u0111\u1ebfn n\u1ed7i","choa","chu cha","chui cha","chung","chung cho","chung chung","chung cu\u1ed9c","chung c\u1ee5c","chung nhau","chung qui","chung quy","chung quy l\u1ea1i","chung \xe1i","chuy\u1ec3n","chuy\u1ec3n t\u1ef1","chuy\u1ec3n \u0111\u1ea1t","chuy\u1ec7n","chu\u1ea9n b\u1ecb","ch\xe0nh ch\u1ea1nh","ch\xed ch\u1ebft","ch\xednh","ch\xednh b\u1ea3n","ch\xednh gi\u1eefa","ch\xednh l\xe0","ch\xednh th\u1ecb","ch\xednh \u0111i\u1ec3m","ch\xf9n ch\xf9n","ch\xf9n ch\u0169n","ch\xfa","ch\xfa d\u1eabn","ch\xfa kh\xe1ch","ch\xfa m\xe0y","ch\xfa m\xecnh","ch\xfang","ch\xfang m\xecnh","ch\xfang ta","ch\xfang t\xf4i","ch\xfang \xf4ng","ch\u0103n ch\u1eafn","ch\u0103ng","ch\u0103ng ch\u1eafc","ch\u0103ng n\u1eefa","ch\u01a1i","ch\u01a1i h\u1ecd","ch\u01b0a","ch\u01b0a bao gi\u1edd","ch\u01b0a ch\u1eafc","ch\u01b0a c\xf3","ch\u01b0a c\u1ea7n","ch\u01b0a d\xf9ng","ch\u01b0a d\u1ec5","ch\u01b0a k\u1ec3","ch\u01b0a t\xednh","ch\u01b0a t\u1eebng","ch\u1ea7m ch\u1eadp","ch\u1eadc","ch\u1eafc","ch\u1eafc ch\u1eafn","ch\u1eafc d\u1ea1","ch\u1eafc h\u1eb3n","ch\u1eafc l\xf2ng","ch\u1eafc ng\u01b0\u1eddi","ch\u1eafc v\xe0o","ch\u1eafc \u0103n","ch\u1eb3ng l\u1ebd","ch\u1eb3ng nh\u1eefng","ch\u1eb3ng n\u1eefa","ch\u1eb3ng ph\u1ea3i","ch\u1ebft n\u1ed7i","ch\u1ebft th\u1eadt","ch\u1ebft ti\u1ec7t","ch\u1ec9","ch\u1ec9 ch\xednh","ch\u1ec9 c\xf3","ch\u1ec9 l\xe0","ch\u1ec9 t\xean","ch\u1ec9n","ch\u1ecb","ch\u1ecb b\u1ed9","ch\u1ecb \u1ea5y","ch\u1ecbu","ch\u1ecbu ch\u01b0a","ch\u1ecbu l\u1eddi","ch\u1ecbu t\u1ed1t","ch\u1ecbu \u0103n","ch\u1ecdn","ch\u1ecdn b\xean","ch\u1ecdn ra","ch\u1ed1c ch\u1ed1c","ch\u1edb","ch\u1edb chi","ch\u1edb g\xec","ch\u1edb kh\xf4ng","ch\u1edb k\u1ec3","ch\u1edb nh\u01b0","ch\u1ee3t","ch\u1ee3t nghe","ch\u1ee3t nh\xecn","ch\u1ee7n","ch\u1ee9","ch\u1ee9 ai","ch\u1ee9 c\xf2n","ch\u1ee9 g\xec","ch\u1ee9 kh\xf4ng","ch\u1ee9 kh\xf4ng ph\u1ea3i","ch\u1ee9 l\u1ea1i","ch\u1ee9 l\u1ecb","ch\u1ee9 nh\u01b0","ch\u1ee9 sao","coi b\u1ed9","coi m\xf2i","con","con con","con d\u1ea1","con nh\xe0","con t\xednh","cu c\u1eadu","cu\u1ed1i","cu\u1ed1i c\xf9ng","cu\u1ed1i \u0111i\u1ec3m","cu\u1ed1n","cu\u1ed9c","c\xe0ng","c\xe0ng c\xe0ng","c\xe0ng hay","c\xe1 nh\xe2n","c\xe1c","c\xe1c c\u1eadu","c\xe1ch","c\xe1ch b\u1ee9c","c\xe1ch kh\xf4ng","c\xe1ch nhau","c\xe1ch \u0111\u1ec1u","c\xe1i","c\xe1i g\xec","c\xe1i h\u1ecd","c\xe1i \u0111\xe3","c\xe1i \u0111\xf3","c\xe1i \u1ea5y","c\xe2u h\u1ecfi","c\xe2y","c\xe2y n\u01b0\u1edbc","c\xf2n","c\xf2n nh\u01b0","c\xf2n n\u1eefa","c\xf2n th\u1eddi gian","c\xf2n v\u1ec1","c\xf3","c\xf3 ai","c\xf3 chuy\u1ec7n","c\xf3 ch\u0103ng","c\xf3 ch\u0103ng l\xe0","c\xf3 ch\u1ee9","c\xf3 c\u01a1","c\xf3 d\u1ec5","c\xf3 h\u1ecd","c\xf3 khi","c\xf3 ng\xe0y","c\xf3 ng\u01b0\u1eddi","c\xf3 nhi\u1ec1u","c\xf3 nh\xe0","c\xf3 ph\u1ea3i","c\xf3 s\u1ed1","c\xf3 th\xe1ng","c\xf3 th\u1ebf","c\xf3 th\u1ec3","c\xf3 v\u1ebb","c\xf3 \xfd","c\xf3 \u0103n","c\xf3 \u0111i\u1ec1u","c\xf3 \u0111i\u1ec1u ki\u1ec7n","c\xf3 \u0111\xe1ng","c\xf3 \u0111\xe2u","c\xf3 \u0111\u01b0\u1ee3c","c\xf3c kh\xf4","c\xf4","c\xf4 m\xecnh","c\xf4 qu\u1ea3","c\xf4 t\u0103ng","c\xf4 \u1ea5y","c\xf4ng nhi\xean","c\xf9ng","c\xf9ng chung","c\xf9ng c\u1ef1c","c\xf9ng nhau","c\xf9ng tu\u1ed5i","c\xf9ng t\u1ed9t","c\xf9ng v\u1edbi","c\xf9ng \u0103n","c\u0103n","c\u0103n c\xe1i","c\u0103n c\u1eaft","c\u0103n t\xednh","c\u0169ng","c\u0169ng nh\u01b0","c\u0169ng n\xean","c\u0169ng th\u1ebf","c\u0169ng v\u1eady","c\u0169ng v\u1eady th\xf4i","c\u0169ng \u0111\u01b0\u1ee3c","c\u01a1","c\u01a1 ch\u1ec9","c\u01a1 ch\u1eebng","c\u01a1 c\xf9ng","c\u01a1 d\u1eabn","c\u01a1 h\u1ed3","c\u01a1 h\u1ed9i","c\u01a1 m\xe0","c\u01a1n","c\u1ea3","c\u1ea3 nghe","c\u1ea3 ngh\u0129","c\u1ea3 ng\xe0y","c\u1ea3 ng\u01b0\u1eddi","c\u1ea3 nh\xe0","c\u1ea3 n\u0103m","c\u1ea3 th\u1ea3y","c\u1ea3 th\u1ec3","c\u1ea3 tin","c\u1ea3 \u0103n","c\u1ea3 \u0111\u1ebfn","c\u1ea3m th\u1ea5y","c\u1ea3m \u01a1n","c\u1ea5p","c\u1ea5p s\u1ed1","c\u1ea5p tr\u1ef1c ti\u1ebfp","c\u1ea7n","c\u1ea7n c\u1ea5p","c\u1ea7n g\xec","c\u1ea7n s\u1ed1","c\u1eadt l\u1ef1c","c\u1eadt s\u1ee9c","c\u1eadu","c\u1ed5 lai","c\u1ee5 th\u1ec3","c\u1ee5 th\u1ec3 l\xe0","c\u1ee5 th\u1ec3 nh\u01b0","c\u1ee7a","c\u1ee7a ng\u1ecdt","c\u1ee7a tin","c\u1ee9","c\u1ee9 nh\u01b0","c\u1ee9 vi\u1ec7c","c\u1ee9 \u0111i\u1ec3m","c\u1ef1c l\u1ef1c","do","do v\xec","do v\u1eady","do \u0111\xf3","duy","duy ch\u1ec9","duy c\xf3","d\xe0i","d\xe0i l\u1eddi","d\xe0i ra","d\xe0nh","d\xe0nh d\xe0nh","d\xe0o","d\xec","d\xf9","d\xf9 cho","d\xf9 d\xec","d\xf9 g\xec","d\xf9 r\u1eb1ng","d\xf9 sao","d\xf9ng","d\xf9ng cho","d\xf9ng h\u1ebft","d\xf9ng l\xe0m","d\xf9ng \u0111\u1ebfn","d\u01b0\u1edbi","d\u01b0\u1edbi n\u01b0\u1edbc","d\u1ea1","d\u1ea1 b\xe1n","d\u1ea1 con","d\u1ea1 d\xe0i","d\u1ea1 d\u1ea1","d\u1ea1 kh\xe1ch","d\u1ea7n d\xe0","d\u1ea7n d\u1ea7n","d\u1ea7u sao","d\u1eabn","d\u1eabu","d\u1eabu m\xe0","d\u1eabu r\u1eb1ng","d\u1eabu sao","d\u1ec5","d\u1ec5 d\xf9ng","d\u1ec5 g\xec","d\u1ec5 khi\u1ebfn","d\u1ec5 nghe","d\u1ec5 ng\u01b0\u01a1i","d\u1ec5 nh\u01b0 ch\u01a1i","d\u1ec5 s\u1ee3","d\u1ec5 s\u1eed d\u1ee5ng","d\u1ec5 th\u01b0\u1eddng","d\u1ec5 th\u1ea5y","d\u1ec5 \u0103n","d\u1ec5 \u0111\xe2u","d\u1edf ch\u1eebng","d\u1eef","d\u1eef c\xe1ch","em","em em","gi\xe1 tr\u1ecb","gi\xe1 tr\u1ecb th\u1ef1c t\u1ebf","gi\u1ea3m","gi\u1ea3m ch\xednh","gi\u1ea3m th\u1ea5p","gi\u1ea3m th\u1ebf","gi\u1ed1ng","gi\u1ed1ng ng\u01b0\u1eddi","gi\u1ed1ng nhau","gi\u1ed1ng nh\u01b0","gi\u1edd","gi\u1edd l\xe2u","gi\u1edd n\xe0y","gi\u1edd \u0111i","gi\u1edd \u0111\xe2y","gi\u1edd \u0111\u1ebfn","gi\u1eef","gi\u1eef l\u1ea5y","gi\u1eef \xfd","gi\u1eefa","gi\u1eefa l\xfac","g\xe2y","g\xe2y cho","g\xe2y gi\u1ed1ng","g\xe2y ra","g\xe2y th\xeam","g\xec","g\xec g\xec","g\xec \u0111\xf3","g\u1ea7n","g\u1ea7n b\xean","g\u1ea7n h\u1ebft","g\u1ea7n ng\xe0y","g\u1ea7n nh\u01b0","g\u1ea7n xa","g\u1ea7n \u0111\xe2y","g\u1ea7n \u0111\u1ebfn","g\u1eb7p","g\u1eb7p kh\xf3 kh\u0103n","g\u1eb7p ph\u1ea3i","g\u1ed3m","hay","hay bi\u1ebft","hay hay","hay kh\xf4ng","hay l\xe0","hay l\xe0m","hay nh\u1ec9","hay n\xf3i","hay sao","hay tin","hay \u0111\xe2u","hi\u1ec3u","hi\u1ec7n nay","hi\u1ec7n t\u1ea1i","ho\xe0n to\xe0n","ho\u1eb7c","ho\u1eb7c l\xe0","h\xe3y","h\xe3y c\xf2n","h\u01a1n","h\u01a1n c\u1ea3","h\u01a1n h\u1ebft","h\u01a1n l\xe0","h\u01a1n n\u1eefa","h\u01a1n tr\u01b0\u1edbc","h\u1ea7u h\u1ebft","h\u1ebft","h\u1ebft chuy\u1ec7n","h\u1ebft c\u1ea3","h\u1ebft c\u1ee7a","h\u1ebft n\xf3i","h\u1ebft r\xe1o","h\u1ebft r\u1ed3i","h\u1ebft \xfd","h\u1ecd","h\u1ecd g\u1ea7n","h\u1ecd xa","h\u1ecfi","h\u1ecfi l\u1ea1i","h\u1ecfi xem","h\u1ecfi xin","h\u1ed7 tr\u1ee3","khi","khi kh\xe1c","khi kh\xf4ng","khi n\xe0o","khi n\xean","khi tr\u01b0\u1edbc","khi\u1ebfn","kho\u1ea3ng","kho\u1ea3ng c\xe1ch","kho\u1ea3ng kh\xf4ng","kh\xe1","kh\xe1 t\u1ed1t","kh\xe1c","kh\xe1c g\xec","kh\xe1c kh\xe1c","kh\xe1c nhau","kh\xe1c n\xe0o","kh\xe1c th\u01b0\u1eddng","kh\xe1c xa","kh\xe1ch","kh\xf3","kh\xf3 bi\u1ebft","kh\xf3 ch\u01a1i","kh\xf3 kh\u0103n","kh\xf3 l\xe0m","kh\xf3 m\u1edf","kh\xf3 nghe","kh\xf3 ngh\u0129","kh\xf3 n\xf3i","kh\xf3 th\u1ea5y","kh\xf3 tr\xe1nh","kh\xf4ng","kh\xf4ng ai","kh\xf4ng bao gi\u1edd","kh\xf4ng bao l\xe2u","kh\xf4ng bi\u1ebft","kh\xf4ng b\xe1n","kh\xf4ng ch\u1ec9","kh\xf4ng c\xf2n","kh\xf4ng c\xf3","kh\xf4ng c\xf3 g\xec","kh\xf4ng c\xf9ng","kh\xf4ng c\u1ea7n","kh\xf4ng c\u1ee9","kh\xf4ng d\xf9ng","kh\xf4ng g\xec","kh\xf4ng hay","kh\xf4ng kh\u1ecfi","kh\xf4ng k\u1ec3","kh\xf4ng ngo\xe0i","kh\xf4ng nh\u1eadn","kh\xf4ng nh\u1eefng","kh\xf4ng ph\u1ea3i","kh\xf4ng ph\u1ea3i kh\xf4ng","kh\xf4ng th\u1ec3","kh\xf4ng t\xednh","kh\xf4ng \u0111i\u1ec1u ki\u1ec7n","kh\xf4ng \u0111\u01b0\u1ee3c","kh\xf4ng \u0111\u1ea7y","kh\xf4ng \u0111\u1ec3","kh\u1eb3ng \u0111\u1ecbnh","kh\u1ecfi","kh\u1ecfi n\xf3i","k\u1ec3","k\u1ec3 c\u1ea3","k\u1ec3 nh\u01b0","k\u1ec3 t\u1edbi","k\u1ec3 t\u1eeb","li\xean quan","lo\u1ea1i","lo\u1ea1i t\u1eeb","lu\xf4n","lu\xf4n c\u1ea3","lu\xf4n lu\xf4n","lu\xf4n tay","l\xe0","l\xe0 c\xf9ng","l\xe0 l\xe0","l\xe0 nhi\u1ec1u","l\xe0 ph\u1ea3i","l\xe0 th\u1ebf n\xe0o","l\xe0 v\xec","l\xe0 \xedt","l\xe0m","l\xe0m b\u1eb1ng","l\xe0m cho","l\xe0m d\u1ea7n d\u1ea7n","l\xe0m g\xec","l\xe0m l\xf2ng","l\xe0m l\u1ea1i","l\xe0m l\u1ea5y","l\xe0m m\u1ea5t","l\xe0m ngay","l\xe0m nh\u01b0","l\xe0m n\xean","l\xe0m ra","l\xe0m ri\xeang","l\xe0m sao","l\xe0m theo","l\xe0m th\u1ebf n\xe0o","l\xe0m tin","l\xe0m t\xf4i","l\xe0m t\u0103ng","l\xe0m t\u1ea1i","l\xe0m t\u1eafp l\u1ef1","l\xe0m v\xec","l\xe0m \u0111\xfang","l\xe0m \u0111\u01b0\u1ee3c","l\xe2u","l\xe2u c\xe1c","l\xe2u l\xe2u","l\xe2u nay","l\xe2u ng\xe0y","l\xean","l\xean cao","l\xean c\u01a1n","l\xean m\u1ea1nh","l\xean ng\xf4i","l\xean n\u01b0\u1edbc","l\xean s\u1ed1","l\xean xu\u1ed1ng","l\xean \u0111\u1ebfn","l\xf2ng","l\xf2ng kh\xf4ng","l\xfac","l\xfac kh\xe1c","l\xfac l\xe2u","l\xfac n\xe0o","l\xfac n\xe0y","l\xfac s\xe1ng","l\xfac tr\u01b0\u1edbc","l\xfac \u0111i","l\xfac \u0111\xf3","l\xfac \u0111\u1ebfn","l\xfac \u1ea5y","l\xfd do","l\u01b0\u1ee3ng","l\u01b0\u1ee3ng c\u1ea3","l\u01b0\u1ee3ng s\u1ed1","l\u01b0\u1ee3ng t\u1eeb","l\u1ea1i","l\u1ea1i b\u1ed9","l\u1ea1i c\xe1i","l\u1ea1i c\xf2n","l\u1ea1i gi\u1ed1ng","l\u1ea1i l\xe0m","l\u1ea1i ng\u01b0\u1eddi","l\u1ea1i n\xf3i","l\u1ea1i n\u1eefa","l\u1ea1i qu\u1ea3","l\u1ea1i th\xf4i","l\u1ea1i \u0103n","l\u1ea1i \u0111\xe2y","l\u1ea5y","l\u1ea5y c\xf3","l\u1ea5y c\u1ea3","l\u1ea5y gi\u1ed1ng","l\u1ea5y l\xe0m","l\u1ea5y l\xfd do","l\u1ea5y l\u1ea1i","l\u1ea5y ra","l\u1ea5y r\xe1o","l\u1ea5y sau","l\u1ea5y s\u1ed1","l\u1ea5y th\xeam","l\u1ea5y th\u1ebf","l\u1ea5y v\xe0o","l\u1ea5y xu\u1ed1ng","l\u1ea5y \u0111\u01b0\u1ee3c","l\u1ea5y \u0111\u1ec3","l\u1ea7n","l\u1ea7n kh\xe1c","l\u1ea7n l\u1ea7n","l\u1ea7n n\xe0o","l\u1ea7n n\xe0y","l\u1ea7n sang","l\u1ea7n sau","l\u1ea7n theo","l\u1ea7n tr\u01b0\u1edbc","l\u1ea7n t\xecm","l\u1edbn","l\u1edbn l\xean","l\u1edbn nh\u1ecf","l\u1eddi","l\u1eddi ch\xfa","l\u1eddi n\xf3i","mang","mang l\u1ea1i","mang mang","mang n\u1eb7ng","mang v\u1ec1","mu\u1ed1n","m\xe0","m\xe0 c\u1ea3","m\xe0 kh\xf4ng","m\xe0 l\u1ea1i","m\xe0 th\xf4i","m\xe0 v\u1eabn","m\xecnh","m\u1ea1nh","m\u1ea5t","m\u1ea5t c\xf2n","m\u1ecdi","m\u1ecdi gi\u1edd","m\u1ecdi khi","m\u1ecdi l\xfac","m\u1ecdi ng\u01b0\u1eddi","m\u1ecdi n\u01a1i","m\u1ecdi s\u1ef1","m\u1ecdi th\u1ee9","m\u1ecdi vi\u1ec7c","m\u1ed1i","m\u1ed7i","m\u1ed7i l\xfac","m\u1ed7i l\u1ea7n","m\u1ed7i m\u1ed9t","m\u1ed7i ng\xe0y","m\u1ed7i ng\u01b0\u1eddi","m\u1ed9t","m\u1ed9t c\xe1ch","m\u1ed9t c\u01a1n","m\u1ed9t khi","m\u1ed9t l\xfac","m\u1ed9t s\u1ed1","m\u1ed9t v\xe0i","m\u1ed9t \xedt","m\u1edbi","m\u1edbi hay","m\u1edbi r\u1ed3i","m\u1edbi \u0111\xe2y","m\u1edf","m\u1edf mang","m\u1edf n\u01b0\u1edbc","m\u1edf ra","m\u1ee3","m\u1ee9c","nay","ngay","ngay b\xe2y gi\u1edd","ngay c\u1ea3","ngay khi","ngay khi \u0111\u1ebfn","ngay l\xfac","ngay l\xfac n\xe0y","ngay l\u1eadp t\u1ee9c","ngay th\u1eadt","ngay t\u1ee9c kh\u1eafc","ngay t\u1ee9c th\xec","ngay t\u1eeb","nghe","nghe ch\u1eebng","nghe hi\u1ec3u","nghe kh\xf4ng","nghe l\u1ea1i","nghe nh\xecn","nghe nh\u01b0","nghe n\xf3i","nghe ra","nghe r\xf5","nghe th\u1ea5y","nghe tin","nghe tr\u1ef1c ti\u1ebfp","nghe \u0111\xe2u","nghe \u0111\xe2u nh\u01b0","nghe \u0111\u01b0\u1ee3c","nghen","nghi\u1ec5m nhi\xean","ngh\u0129","ngh\u0129 l\u1ea1i","ngh\u0129 ra","ngh\u0129 t\u1edbi","ngh\u0129 xa","ngh\u0129 \u0111\u1ebfn","ngh\u1ec9m","ngo\xe0i","ngo\xe0i n\xe0y","ngo\xe0i ra","ngo\xe0i xa","ngo\u1ea3i","ngu\u1ed3n","ng\xe0y","ng\xe0y c\xe0ng","ng\xe0y c\u1ea5p","ng\xe0y gi\u1edd","ng\xe0y ng\xe0y","ng\xe0y n\xe0o","ng\xe0y n\xe0y","ng\xe0y n\u1ecd","ng\xe0y qua","ng\xe0y r\xe0y","ng\xe0y th\xe1ng","ng\xe0y x\u01b0a","ng\xe0y x\u1eeda","ng\xe0y \u0111\u1ebfn","ng\xe0y \u1ea5y","ng\xf4i","ng\xf4i nh\xe0","ng\xf4i th\u1ee9","ng\xf5 h\u1ea7u","ng\u0103n ng\u1eaft","ng\u01b0\u01a1i","ng\u01b0\u1eddi","ng\u01b0\u1eddi h\u1ecfi","ng\u01b0\u1eddi kh\xe1c","ng\u01b0\u1eddi kh\xe1ch","ng\u01b0\u1eddi m\xecnh","ng\u01b0\u1eddi nghe","ng\u01b0\u1eddi ng\u01b0\u1eddi","ng\u01b0\u1eddi nh\u1eadn","ng\u1ecdn","ng\u1ecdn ngu\u1ed3n","ng\u1ecdt","ng\u1ed3i","ng\u1ed3i b\u1ec7t","ng\u1ed3i kh\xf4ng","ng\u1ed3i sau","ng\u1ed3i tr\u1ec7t","ng\u1ed9 nh\u1ee1","nhanh","nhanh l\xean","nhanh tay","nhau","nhi\xean h\u1eadu","nhi\u1ec1u","nhi\u1ec1u \xedt","nhi\u1ec7t li\u1ec7t","nhung nh\u0103ng","nh\xe0","nh\xe0 chung","nh\xe0 kh\xf3","nh\xe0 l\xe0m","nh\xe0 ngo\xe0i","nh\xe0 ng\u01b0\u01a1i","nh\xe0 t\xf4i","nh\xe0 vi\u1ec7c","nh\xe2n d\u1ecbp","nh\xe2n ti\u1ec7n","nh\xe9","nh\xecn","nh\xecn chung","nh\xecn l\u1ea1i","nh\xecn nh\u1eadn","nh\xecn theo","nh\xecn th\u1ea5y","nh\xecn xu\u1ed1ng","nh\xf3m","nh\xf3n nh\xe9n","nh\u01b0","nh\u01b0 ai","nh\u01b0 ch\u01a1i","nh\u01b0 kh\xf4ng","nh\u01b0 l\xe0","nh\u01b0 nhau","nh\u01b0 qu\u1ea3","nh\u01b0 sau","nh\u01b0 th\u01b0\u1eddng","nh\u01b0 th\u1ebf","nh\u01b0 th\u1ebf n\xe0o","nh\u01b0 th\u1ec3","nh\u01b0 tr\xean","nh\u01b0 tr\u01b0\u1edbc","nh\u01b0 tu\u1ed3ng","nh\u01b0 v\u1eady","nh\u01b0 \xfd","nh\u01b0ng","nh\u01b0ng m\xe0","nh\u01b0\u1ee3c b\u1eb1ng","nh\u1ea5t","nh\u1ea5t lo\u1ea1t","nh\u1ea5t lu\u1eadt","nh\u1ea5t l\xe0","nh\u1ea5t m\u1ef1c","nh\u1ea5t nh\u1ea5t","nh\u1ea5t quy\u1ebft","nh\u1ea5t sinh","nh\u1ea5t thi\u1ebft","nh\u1ea5t th\xec","nh\u1ea5t t\xe2m","nh\u1ea5t t\u1ec1","nh\u1ea5t \u0111\xe1n","nh\u1ea5t \u0111\u1ecbnh","nh\u1eadn","nh\u1eadn bi\u1ebft","nh\u1eadn h\u1ecd","nh\u1eadn l\xe0m","nh\u1eadn nhau","nh\u1eadn ra","nh\u1eadn th\u1ea5y","nh\u1eadn vi\u1ec7c","nh\u1eadn \u0111\u01b0\u1ee3c","nh\u1eb1m","nh\u1eb1m khi","nh\u1eb1m l\xfac","nh\u1eb1m v\xe0o","nh\u1eb1m \u0111\u1ec3","nh\u1ec9","nh\u1ecf","nh\u1ecf ng\u01b0\u1eddi","nh\u1edb","nh\u1edb b\u1eadp b\xf5m","nh\u1edb l\u1ea1i","nh\u1edb l\u1ea5y","nh\u1edb ra","nh\u1edd","nh\u1edd chuy\u1ec3n","nh\u1edd c\xf3","nh\u1edd nh\u1edd","nh\u1edd \u0111\xf3","nh\u1ee1 ra","nh\u1eefng","nh\u1eefng ai","nh\u1eefng khi","nh\u1eefng l\xe0","nh\u1eefng l\xfac","nh\u1eefng mu\u1ed1n","nh\u1eefng nh\u01b0","n\xe0o","n\xe0o c\u0169ng","n\xe0o hay","n\xe0o l\xe0","n\xe0o ph\u1ea3i","n\xe0o \u0111\xe2u","n\xe0o \u0111\xf3","n\xe0y","n\xe0y n\u1ecd","n\xean","n\xean chi","n\xean ch\u0103ng","n\xean l\xe0m","n\xean ng\u01b0\u1eddi","n\xean tr\xe1nh","n\xf3","n\xf3c","n\xf3i","n\xf3i b\xf4ng","n\xf3i chung","n\xf3i kh\xf3","n\xf3i l\xe0","n\xf3i l\xean","n\xf3i l\u1ea1i","n\xf3i nh\u1ecf","n\xf3i ph\u1ea3i","n\xf3i qua","n\xf3i ra","n\xf3i ri\xeang","n\xf3i r\xf5","n\xf3i th\xeam","n\xf3i th\u1eadt","n\xf3i to\u1eb9t","n\xf3i tr\u01b0\u1edbc","n\xf3i t\u1ed1t","n\xf3i v\u1edbi","n\xf3i xa","n\xf3i \xfd","n\xf3i \u0111\u1ebfn","n\xf3i \u0111\u1ee7","n\u0103m","n\u0103m th\xe1ng","n\u01a1i","n\u01a1i n\u01a1i","n\u01b0\u1edbc","n\u01b0\u1edbc b\xe0i","n\u01b0\u1edbc c\xf9ng","n\u01b0\u1edbc l\xean","n\u01b0\u1edbc n\u1eb7ng","n\u01b0\u1edbc qu\u1ea3","n\u01b0\u1edbc xu\u1ed1ng","n\u01b0\u1edbc \u0103n","n\u01b0\u1edbc \u0111\u1ebfn","n\u1ea5y","n\u1eb7ng","n\u1eb7ng c\u0103n","n\u1eb7ng m\xecnh","n\u1eb7ng v\u1ec1","n\u1ebfu","n\u1ebfu c\xf3","n\u1ebfu c\u1ea7n","n\u1ebfu kh\xf4ng","n\u1ebfu m\xe0","n\u1ebfu nh\u01b0","n\u1ebfu th\u1ebf","n\u1ebfu v\u1eady","n\u1ebfu \u0111\u01b0\u1ee3c","n\u1ec1n","n\u1ecd","n\u1edb","n\u1ee9c n\u1edf","n\u1eefa","n\u1eefa khi","n\u1eefa l\xe0","n\u1eefa r\u1ed3i","oai o\xe1i","o\xe1i","pho","ph\xe8","ph\xe8 ph\xe8","ph\xeda","ph\xeda b\xean","ph\xeda b\u1ea1n","ph\xeda d\u01b0\u1edbi","ph\xeda sau","ph\xeda trong","ph\xeda tr\xean","ph\xeda tr\u01b0\u1edbc","ph\xf3c","ph\xf3t","ph\xf9 h\u1ee3p","ph\u0103n ph\u1eaft","ph\u01b0\u01a1ng chi","ph\u1ea3i","ph\u1ea3i bi\u1ebft","ph\u1ea3i chi","ph\u1ea3i ch\u0103ng","ph\u1ea3i c\xe1ch","ph\u1ea3i c\xe1i","ph\u1ea3i gi\u1edd","ph\u1ea3i khi","ph\u1ea3i kh\xf4ng","ph\u1ea3i l\u1ea1i","ph\u1ea3i l\u1eddi","ph\u1ea3i ng\u01b0\u1eddi","ph\u1ea3i nh\u01b0","ph\u1ea3i r\u1ed3i","ph\u1ea3i tay","ph\u1ea7n","ph\u1ea7n l\u1edbn","ph\u1ea7n nhi\u1ec1u","ph\u1ea7n n\xe0o","ph\u1ea7n sau","ph\u1ea7n vi\u1ec7c","ph\u1eaft","ph\u1ec9 phui","ph\u1ecfng","ph\u1ecfng nh\u01b0","ph\u1ecfng n\u01b0\u1edbc","ph\u1ecfng theo","ph\u1ecfng t\xednh","ph\u1ed1c","ph\u1ee5t","ph\u1ee9t","qua","qua chuy\u1ec7n","qua kh\u1ecfi","qua l\u1ea1i","qua l\u1ea7n","qua ng\xe0y","qua tay","qua th\xec","qua \u0111i","quan tr\u1ecdng","quan tr\u1ecdng v\u1ea5n \u0111\u1ec1","quan t\xe2m","quay","quay b\u01b0\u1edbc","quay l\u1ea1i","quay s\u1ed1","quay \u0111i","qu\xe1","qu\xe1 b\xe1n","qu\xe1 b\u1ed9","qu\xe1 gi\u1edd","qu\xe1 l\u1eddi","qu\xe1 m\u1ee9c","qu\xe1 nhi\u1ec1u","qu\xe1 tay","qu\xe1 th\xec","qu\xe1 tin","qu\xe1 tr\xecnh","qu\xe1 tu\u1ed5i","qu\xe1 \u0111\xe1ng","qu\xe1 \u01b0","qu\u1ea3","qu\u1ea3 l\xe0","qu\u1ea3 th\u1eadt","qu\u1ea3 th\u1ebf","qu\u1ea3 v\u1eady","qu\u1eadn","ra","ra b\xe0i","ra b\u1ed9","ra ch\u01a1i","ra g\xec","ra l\u1ea1i","ra l\u1eddi","ra ng\xf4i","ra ng\u01b0\u1eddi","ra sao","ra tay","ra v\xe0o","ra \xfd","ra \u0111i\u1ec1u","ra \u0111\xe2y","ren r\xe9n","riu r\xedu","ri\xeang","ri\xeang t\u1eebng","ri\u1ec7t","r\xe0y","r\xe1o","r\xe1o c\u1ea3","r\xe1o n\u01b0\u1edbc","r\xe1o tr\u1ecdi","r\xe9n","r\xe9n b\u01b0\u1edbc","r\xedch","r\xf3n r\xe9n","r\xf5","r\xf5 l\xe0","r\xf5 th\u1eadt","r\xfat c\u1ee5c","r\u0103ng","r\u0103ng r\u0103ng","r\u1ea5t","r\u1ea5t l\xe2u","r\u1eb1ng","r\u1eb1ng l\xe0","r\u1ed1t cu\u1ed9c","r\u1ed1t c\u1ee5c","r\u1ed3i","r\u1ed3i n\u1eefa","r\u1ed3i ra","r\u1ed3i sao","r\u1ed3i sau","r\u1ed3i tay","r\u1ed3i th\xec","r\u1ed3i xem","r\u1ed3i \u0111\xe2y","r\u1ee9a","sa s\u1ea3","sang","sang n\u0103m","sang s\xe1ng","sang tay","sao","sao b\u1ea3n","sao b\u1eb1ng","sao cho","sao v\u1eady","sao \u0111ang","sau","sau ch\xf3t","sau cu\u1ed1i","sau c\xf9ng","sau h\u1ebft","sau n\xe0y","sau n\u1eefa","sau sau","sau \u0111\xe2y","sau \u0111\xf3","so","so v\u1edbi","song le","su\xfdt","su\xfdt n\u1eefa","s\xe1ng","s\xe1ng ng\xe0y","s\xe1ng r\xf5","s\xe1ng th\u1ebf","s\xe1ng \xfd","s\xec","s\xec s\xec","s\u1ea5t","s\u1eafp","s\u1eafp \u0111\u1eb7t","s\u1ebd","s\u1ebd bi\u1ebft","s\u1ebd hay","s\u1ed1","s\u1ed1 cho bi\u1ebft","s\u1ed1 c\u1ee5 th\u1ec3","s\u1ed1 lo\u1ea1i","s\u1ed1 l\xe0","s\u1ed1 ng\u01b0\u1eddi","s\u1ed1 ph\u1ea7n","s\u1ed1 thi\u1ebfu","s\u1ed1t s\u1ed9t","s\u1edbm","s\u1edbm ng\xe0y","s\u1edf d\u0129","s\u1eed d\u1ee5ng","s\u1ef1","s\u1ef1 th\u1ebf","s\u1ef1 vi\u1ec7c","tanh","tanh tanh","tay","tay quay","tha h\u1ed3","tha h\u1ed3 ch\u01a1i","tha h\u1ed3 \u0103n","than \xf4i","thanh","thanh ba","thanh chuy\u1ec3n","thanh kh\xf4ng","thanh thanh","thanh t\xednh","thanh \u0111i\u1ec1u ki\u1ec7n","thanh \u0111i\u1ec3m","thay \u0111\u1ed5i","thay \u0111\u1ed5i t\xecnh tr\u1ea1ng","theo","theo b\u01b0\u1edbc","theo nh\u01b0","theo tin","thi tho\u1ea3ng","thi\u1ebfu","thi\u1ebfu g\xec","thi\u1ebfu \u0111i\u1ec3m","tho\u1ea1t","tho\u1ea1t nghe","tho\u1ea1t nhi\xean","tho\u1eaft","thu\u1ea7n","thu\u1ea7n \xe1i","thu\u1ed9c","thu\u1ed9c b\xe0i","thu\u1ed9c c\xe1ch","thu\u1ed9c l\u1ea1i","thu\u1ed9c t\u1eeb","th\xe0","th\xe0 l\xe0","th\xe0 r\u1eb1ng","th\xe0nh ra","th\xe0nh th\u1eed","th\xe1i qu\xe1","th\xe1ng","th\xe1ng ng\xe0y","th\xe1ng n\u0103m","th\xe1ng th\xe1ng","th\xeam","th\xeam chuy\u1ec7n","th\xeam gi\u1edd","th\xeam v\xe0o","th\xec","th\xec gi\u1edd","th\xec l\xe0","th\xec ph\u1ea3i","th\xec ra","th\xec th\xf4i","th\xecnh l\xecnh","th\xedch","th\xedch c\u1ee9","th\xedch thu\u1ed9c","th\xedch t\u1ef1","th\xedch \xfd","th\xedm","th\xf4i","th\xf4i vi\u1ec7c","th\xfang th\u1eafng","th\u01b0\u01a1ng \xf4i","th\u01b0\u1eddng","th\u01b0\u1eddng b\u1ecb","th\u01b0\u1eddng hay","th\u01b0\u1eddng khi","th\u01b0\u1eddng s\u1ed1","th\u01b0\u1eddng s\u1ef1","th\u01b0\u1eddng th\xf4i","th\u01b0\u1eddng th\u01b0\u1eddng","th\u01b0\u1eddng t\xednh","th\u01b0\u1eddng t\u1ea1i","th\u01b0\u1eddng xu\u1ea5t hi\u1ec7n","th\u01b0\u1eddng \u0111\u1ebfn","th\u1ea3o h\xe8n","th\u1ea3o n\xe0o","th\u1ea5p","th\u1ea5p c\u01a1","th\u1ea5p th\u1ecfm","th\u1ea5p xu\u1ed1ng","th\u1ea5y","th\u1ea5y th\xe1ng","th\u1ea9y","th\u1eadm","th\u1eadm ch\xed","th\u1eadm c\u1ea5p","th\u1eadm t\u1eeb","th\u1eadt","th\u1eadt ch\u1eafc","th\u1eadt l\xe0","th\u1eadt l\u1ef1c","th\u1eadt qu\u1ea3","th\u1eadt ra","th\u1eadt s\u1ef1","th\u1eadt th\xe0","th\u1eadt t\u1ed1t","th\u1eadt v\u1eady","th\u1ebf","th\u1ebf chu\u1ea9n b\u1ecb","th\u1ebf l\xe0","th\u1ebf l\u1ea1i","th\u1ebf m\xe0","th\u1ebf n\xe0o","th\u1ebf n\xean","th\u1ebf ra","th\u1ebf s\u1ef1","th\u1ebf th\xec","th\u1ebf th\xf4i","th\u1ebf th\u01b0\u1eddng","th\u1ebf th\u1ebf","th\u1ebf \xe0","th\u1ebf \u0111\xf3","th\u1ebfch","th\u1ec9nh tho\u1ea3ng","th\u1ecfm","th\u1ed1c","th\u1ed1c th\xe1o","th\u1ed1t","th\u1ed1t nhi\xean","th\u1ed1t n\xf3i","th\u1ed1t th\xf4i","th\u1ed9c","th\u1eddi gian","th\u1eddi gian s\u1eed d\u1ee5ng","th\u1eddi gian t\xednh","th\u1eddi \u0111i\u1ec3m","th\u1ee5c m\u1ea1ng","th\u1ee9","th\u1ee9 b\u1ea3n","th\u1ee9 \u0111\u1ebfn","th\u1eeda","th\u1ef1c hi\u1ec7n","th\u1ef1c hi\u1ec7n \u0111\xfang","th\u1ef1c ra","th\u1ef1c s\u1ef1","th\u1ef1c t\u1ebf","th\u1ef1c v\u1eady","tin","tin th\xeam","tin v\xe0o","ti\u1ebfp theo","ti\u1ebfp t\u1ee5c","ti\u1ebfp \u0111\xf3","ti\u1ec7n th\u1ec3","to\xe0","to\xe9 kh\xf3i","to\u1eb9t","trong","trong khi","trong l\xfac","trong m\xecnh","trong ngo\xe0i","trong n\xe0y","trong s\u1ed1","trong v\xf9ng","trong \u0111\xf3","trong \u1ea5y","tr\xe1nh","tr\xe1nh kh\u1ecfi","tr\xe1nh ra","tr\xe1nh t\xecnh tr\u1ea1ng","tr\xe1nh xa","tr\xean","tr\xean b\u1ed9","tr\xean d\u01b0\u1edbi","tr\u01b0\u1edbc","tr\u01b0\u1edbc h\u1ebft","tr\u01b0\u1edbc khi","tr\u01b0\u1edbc kia","tr\u01b0\u1edbc nay","tr\u01b0\u1edbc ng\xe0y","tr\u01b0\u1edbc nh\u1ea5t","tr\u01b0\u1edbc sau","tr\u01b0\u1edbc ti\xean","tr\u01b0\u1edbc tu\u1ed5i","tr\u01b0\u1edbc \u0111\xe2y","tr\u01b0\u1edbc \u0111\xf3","tr\u1ea3","tr\u1ea3 c\u1ee7a","tr\u1ea3 l\u1ea1i","tr\u1ea3 ngay","tr\u1ea3 tr\u01b0\u1edbc","tr\u1ebfu tr\xe1o","tr\u1ec3n","tr\u1ec7t","tr\u1ec7u tr\u1ea1o","tr\u1ecfng","tr\u1eddi \u0111\u1ea5t \u01a1i","tr\u1edf th\xe0nh","tr\u1eeb phi","tr\u1ef1c ti\u1ebfp","tr\u1ef1c ti\u1ebfp l\xe0m","tuy","tuy c\xf3","tuy l\xe0","tuy nhi\xean","tuy r\u1eb1ng","tuy th\u1ebf","tuy v\u1eady","tuy \u0111\xe3","tuy\u1ec7t nhi\xean","tu\u1ea7n t\u1ef1","tu\u1ed1t lu\u1ed1t","tu\u1ed1t tu\u1ed3n tu\u1ed9t","tu\u1ed1t tu\u1ed9t","tu\u1ed5i","tu\u1ed5i c\u1ea3","tu\u1ed5i t\xf4i","t\xe0 t\xe0","t\xean","t\xean ch\xednh","t\xean c\xe1i","t\xean h\u1ecd","t\xean t\u1ef1","t\xeanh","t\xeanh t\xeanh","t\xecm","t\xecm b\u1ea1n","t\xecm c\xe1ch","t\xecm hi\u1ec3u","t\xecm ra","t\xecm vi\u1ec7c","t\xecnh tr\u1ea1ng","t\xednh","t\xednh c\xe1ch","t\xednh c\u0103n","t\xednh ng\u01b0\u1eddi","t\xednh ph\u1ecfng","t\xednh t\u1eeb","t\xedt m\xf9","t\xf2 te","t\xf4i","t\xf4i con","t\xf4ng t\u1ed1c","t\xf9 t\xec","t\u0103m t\u1eafp","t\u0103ng","t\u0103ng ch\xfang","t\u0103ng c\u1ea5p","t\u0103ng gi\u1ea3m","t\u0103ng th\xeam","t\u0103ng th\u1ebf","t\u1ea1i","t\u1ea1i l\xf2ng","t\u1ea1i n\u01a1i","t\u1ea1i sao","t\u1ea1i t\xf4i","t\u1ea1i v\xec","t\u1ea1i \u0111\xe2u","t\u1ea1i \u0111\xe2y","t\u1ea1i \u0111\xf3","t\u1ea1o","t\u1ea1o c\u01a1 h\u1ed9i","t\u1ea1o n\xean","t\u1ea1o ra","t\u1ea1o \xfd","t\u1ea1o \u0111i\u1ec1u ki\u1ec7n","t\u1ea5m","t\u1ea5m b\u1ea3n","t\u1ea5m c\xe1c","t\u1ea5n","t\u1ea5n t\u1edbi","t\u1ea5t c\u1ea3","t\u1ea5t c\u1ea3 bao nhi\xeau","t\u1ea5t th\u1ea3y","t\u1ea5t t\u1ea7n t\u1eadt","t\u1ea5t t\u1eadt","t\u1eadp trung","t\u1eafp","t\u1eafp l\u1ef1","t\u1eafp t\u1eafp","t\u1ecdt","t\u1ecf ra","t\u1ecf v\u1ebb","t\u1ed1c t\u1ea3","t\u1ed1i \u01b0","t\u1ed1t","t\u1ed1t b\u1ea1n","t\u1ed1t b\u1ed9","t\u1ed1t h\u01a1n","t\u1ed1t m\u1ed1i","t\u1ed1t ng\xe0y","t\u1ed9t","t\u1ed9t c\xf9ng","t\u1edb","t\u1edbi","t\u1edbi g\u1ea7n","t\u1edbi m\u1ee9c","t\u1edbi n\u01a1i","t\u1edbi th\xec","t\u1ee9c th\xec","t\u1ee9c t\u1ed1c","t\u1eeb","t\u1eeb c\u0103n","t\u1eeb gi\u1edd","t\u1eeb khi","t\u1eeb lo\u1ea1i","t\u1eeb nay","t\u1eeb th\u1ebf","t\u1eeb t\xednh","t\u1eeb t\u1ea1i","t\u1eeb t\u1eeb","t\u1eeb \xe1i","t\u1eeb \u0111i\u1ec1u","t\u1eeb \u0111\xf3","t\u1eeb \u1ea5y","t\u1eebng","t\u1eebng c\xe1i","t\u1eebng gi\u1edd","t\u1eebng nh\xe0","t\u1eebng ph\u1ea7n","t\u1eebng th\u1eddi gian","t\u1eebng \u0111\u01a1n v\u1ecb","t\u1eebng \u1ea5y","t\u1ef1","t\u1ef1 cao","t\u1ef1 khi","t\u1ef1 l\u01b0\u1ee3ng","t\u1ef1 t\xednh","t\u1ef1 t\u1ea1o","t\u1ef1 v\xec","t\u1ef1 \xfd","t\u1ef1 \u0103n","t\u1ef1u trung","veo","veo veo","vi\u1ec7c","vi\u1ec7c g\xec","vung thi\xean \u0111\u1ecba","vung t\xe0n t\xe1n","vung t\xe1n t\xe0n","v\xe0","v\xe0i","v\xe0i ba","v\xe0i ng\u01b0\u1eddi","v\xe0i nh\xe0","v\xe0i n\u01a1i","v\xe0i t\xean","v\xe0i \u0111i\u1ec1u","v\xe0o","v\xe0o g\u1eb7p","v\xe0o kho\u1ea3ng","v\xe0o l\xfac","v\xe0o v\xf9ng","v\xe0o \u0111\u1ebfn","v\xe2ng","v\xe2ng ch\u1ecbu","v\xe2ng d\u1ea1","v\xe2ng v\xe2ng","v\xe2ng \xfd","v\xe8o","v\xe8o v\xe8o","v\xec","v\xec ch\u01b0ng","v\xec r\u1eb1ng","v\xec sao","v\xec th\u1ebf","v\xec v\u1eady","v\xed b\u1eb1ng","v\xed d\xf9","v\xed ph\u1ecfng","v\xed th\u1eed","v\xf4 h\xecnh trung","v\xf4 k\u1ec3","v\xf4 lu\u1eadn","v\xf4 v\xe0n","v\xf9ng","v\xf9ng l\xean","v\xf9ng n\u01b0\u1edbc","v\u0103ng t\xea","v\u01b0\u1ee3t","v\u01b0\u1ee3t kh\u1ecfi","v\u01b0\u1ee3t qu\xe1","v\u1ea1n nh\u1ea5t","v\u1ea3 ch\u0103ng","v\u1ea3 l\u1ea1i","v\u1ea5n \u0111\u1ec1","v\u1ea5n \u0111\u1ec1 quan tr\u1ecdng","v\u1eabn","v\u1eabn th\u1ebf","v\u1eady","v\u1eady l\xe0","v\u1eady m\xe0","v\u1eady n\xean","v\u1eady ra","v\u1eady th\xec","v\u1eady \u01b0","v\u1ec1","v\u1ec1 kh\xf4ng","v\u1ec1 n\u01b0\u1edbc","v\u1ec1 ph\u1ea7n","v\u1ec1 sau","v\u1ec1 tay","v\u1ecb tr\xed","v\u1ecb t\u1ea5t","v\u1ed1n d\u0129","v\u1edbi","v\u1edbi l\u1ea1i","v\u1edbi nhau","v\u1edf","v\u1ee5t","v\u1eeba","v\u1eeba khi","v\u1eeba l\xfac","v\u1eeba m\u1edbi","v\u1eeba qua","v\u1eeba r\u1ed3i","v\u1eeba v\u1eeba","xa","xa c\xe1ch","xa g\u1ea7n","xa nh\xe0","xa tanh","xa t\u1eafp","xa xa","xa x\u1ea3","xem","xem l\u1ea1i","xem ra","xem s\u1ed1","xin","xin g\u1eb7p","xin v\xe2ng","xi\u1ebft bao","xon x\xf3n","xo\xe0nh xo\u1ea1ch","xo\xe9t","xo\u1eb3n","xo\u1eb9t","xu\u1ea5t hi\u1ec7n","xu\u1ea5t k\xec b\u1ea5t \xfd","xu\u1ea5t k\u1ef3 b\u1ea5t \xfd","xu\u1ec3","xu\u1ed1ng","x\u0103m x\xfai","x\u0103m x\u0103m","x\u0103m x\u1eafm","x\u1ea3y ra","x\u1ec1nh x\u1ec7ch","x\u1ec7p","x\u1eed l\xfd","y\xeau c\u1ea7u","\xe0","\xe0 n\xe0y","\xe0 \u01a1i","\xe0o","\xe0o v\xe0o","\xe0o \xe0o","\xe1","\xe1 \xe0","\xe1i","\xe1i ch\xe0","\xe1i d\xe0","\xe1ng","\xe1ng nh\u01b0","\xe2u l\xe0","\xedt","\xedt bi\u1ebft","\xedt c\xf3","\xedt h\u01a1n","\xedt khi","\xedt l\xe2u","\xedt nhi\u1ec1u","\xedt nh\u1ea5t","\xedt n\u1eefa","\xedt qu\xe1","\xedt ra","\xedt th\xf4i","\xedt th\u1ea5y","\xf4 hay","\xf4 h\xf4","\xf4 k\xea","\xf4 k\xeca","\xf4i chao","\xf4i th\xf4i","\xf4ng","\xf4ng nh\u1ecf","\xf4ng t\u1ea1o","\xf4ng t\u1eeb","\xf4ng \u1ea5y","\xf4ng \u1ed5ng","\xfai","\xfai ch\xe0","\xfai d\xe0o","\xfd","\xfd ch\u1eebng","\xfd da","\xfd ho\u1eb7c","\u0103n","\u0103n chung","\u0103n ch\u1eafc","\u0103n ch\u1ecbu","\u0103n cu\u1ed9c","\u0103n h\u1ebft","\u0103n h\u1ecfi","\u0103n l\xe0m","\u0103n ng\u01b0\u1eddi","\u0103n ng\u1ed3i","\u0103n qu\xe1","\u0103n ri\xeang","\u0103n s\xe1ng","\u0103n tay","\u0103n tr\xean","\u0103n v\u1ec1","\u0111ang","\u0111ang tay","\u0111ang th\xec","\u0111i\u1ec1u","\u0111i\u1ec1u g\xec","\u0111i\u1ec1u ki\u1ec7n","\u0111i\u1ec3m","\u0111i\u1ec3m ch\xednh","\u0111i\u1ec3m g\u1eb7p","\u0111i\u1ec3m \u0111\u1ea7u ti\xean","\u0111\xe0nh \u0111\u1ea1ch","\u0111\xe1ng","\u0111\xe1ng k\u1ec3","\u0111\xe1ng l\xed","\u0111\xe1ng l\xfd","\u0111\xe1ng l\u1ebd","\u0111\xe1ng s\u1ed1","\u0111\xe1nh gi\xe1","\u0111\xe1nh \u0111\xf9ng","\u0111\xe1o \u0111\u1ec3","\u0111\xe2u","\u0111\xe2u c\xf3","\u0111\xe2u c\u0169ng","\u0111\xe2u nh\u01b0","\u0111\xe2u n\xe0o","\u0111\xe2u ph\u1ea3i","\u0111\xe2u \u0111\xe2u","\u0111\xe2u \u0111\xe2y","\u0111\xe2u \u0111\xf3","\u0111\xe2y","\u0111\xe2y n\xe0y","\u0111\xe2y r\u1ed3i","\u0111\xe2y \u0111\xf3","\u0111\xe3","\u0111\xe3 hay","\u0111\xe3 kh\xf4ng","\u0111\xe3 l\xe0","\u0111\xe3 l\xe2u","\u0111\xe3 th\u1ebf","\u0111\xe3 v\u1eady","\u0111\xe3 \u0111\u1ee7","\u0111\xf3","\u0111\xf3 \u0111\xe2y","\u0111\xfang","\u0111\xfang ng\xe0y","\u0111\xfang ra","\u0111\xfang tu\u1ed5i","\u0111\xfang v\u1edbi","\u0111\u01a1n v\u1ecb","\u0111\u01b0a","\u0111\u01b0a cho","\u0111\u01b0a chuy\u1ec7n","\u0111\u01b0a em","\u0111\u01b0a ra","\u0111\u01b0a tay","\u0111\u01b0a tin","\u0111\u01b0a t\u1edbi","\u0111\u01b0a v\xe0o","\u0111\u01b0a v\u1ec1","\u0111\u01b0a xu\u1ed1ng","\u0111\u01b0a \u0111\u1ebfn","\u0111\u01b0\u1ee3c","\u0111\u01b0\u1ee3c c\xe1i","\u0111\u01b0\u1ee3c l\u1eddi","\u0111\u01b0\u1ee3c n\u01b0\u1edbc","\u0111\u01b0\u1ee3c tin","\u0111\u1ea1i lo\u1ea1i","\u0111\u1ea1i nh\xe2n","\u0111\u1ea1i ph\xe0m","\u0111\u1ea1i \u0111\u1ec3","\u0111\u1ea1t","\u0111\u1ea3m b\u1ea3o","\u0111\u1ea7u ti\xean","\u0111\u1ea7y","\u0111\u1ea7y n\u0103m","\u0111\u1ea7y ph\xe8","\u0111\u1ea7y tu\u1ed5i","\u0111\u1eb7c bi\u1ec7t","\u0111\u1eb7t","\u0111\u1eb7t l\xe0m","\u0111\u1eb7t m\xecnh","\u0111\u1eb7t m\u1ee9c","\u0111\u1eb7t ra","\u0111\u1eb7t tr\u01b0\u1edbc","\u0111\u1eb7t \u0111\u1ec3","\u0111\u1ebfn","\u0111\u1ebfn bao gi\u1edd","\u0111\u1ebfn c\xf9ng","\u0111\u1ebfn c\xf9ng c\u1ef1c","\u0111\u1ebfn c\u1ea3","\u0111\u1ebfn gi\u1edd","\u0111\u1ebfn g\u1ea7n","\u0111\u1ebfn hay","\u0111\u1ebfn khi","\u0111\u1ebfn l\xfac","\u0111\u1ebfn l\u1eddi","\u0111\u1ebfn nay","\u0111\u1ebfn ng\xe0y","\u0111\u1ebfn n\u01a1i","\u0111\u1ebfn n\u1ed7i","\u0111\u1ebfn th\xec","\u0111\u1ebfn th\u1ebf","\u0111\u1ebfn tu\u1ed5i","\u0111\u1ebfn xem","\u0111\u1ebfn \u0111i\u1ec1u","\u0111\u1ebfn \u0111\xe2u","\u0111\u1ec1u","\u0111\u1ec1u b\u01b0\u1edbc","\u0111\u1ec1u nhau","\u0111\u1ec1u \u0111\u1ec1u","\u0111\u1ec3","\u0111\u1ec3 cho","\u0111\u1ec3 gi\u1ed1ng","\u0111\u1ec3 kh\xf4ng","\u0111\u1ec3 l\xf2ng","\u0111\u1ec3 l\u1ea1i","\u0111\u1ec3 m\xe0","\u0111\u1ec3 ph\u1ea7n","\u0111\u1ec3 \u0111\u01b0\u1ee3c","\u0111\u1ec3 \u0111\u1ebfn n\u1ed7i","\u0111\u1ed1i v\u1edbi","\u0111\u1ed3ng th\u1eddi","\u0111\u1ee7","\u0111\u1ee7 d\xf9ng","\u0111\u1ee7 n\u01a1i","\u0111\u1ee7 s\u1ed1","\u0111\u1ee7 \u0111i\u1ec1u","\u0111\u1ee7 \u0111i\u1ec3m","\u01a1","\u01a1 hay","\u01a1 k\xeca","\u01a1i","\u01a1i l\xe0","\u01b0","\u1ea1","\u1ea1 \u01a1i","\u1ea5y","\u1ea5y l\xe0","\u1ea7u \u01a1","\u1eaft","\u1eaft h\u1eb3n","\u1eaft l\xe0","\u1eaft ph\u1ea3i","\u1eaft th\u1eadt","\u1ed1i d\xe0o","\u1ed1i gi\u1eddi","\u1ed1i gi\u1eddi \u01a1i","\u1ed3","\u1ed3 \u1ed3","\u1ed5ng","\u1edb","\u1edb n\xe0y","\u1edd","\u1edd \u1edd","\u1edf","\u1edf l\u1ea1i","\u1edf nh\u01b0","\u1edf nh\u1edd","\u1edf n\u0103m","\u1edf tr\xean","\u1edf v\xe0o","\u1edf \u0111\xe2y","\u1edf \u0111\xf3","\u1edf \u0111\u01b0\u1ee3c","\u1ee7a","\u1ee9 h\u1ef1","\u1ee9 \u1eeb","\u1eeb","\u1eeb nh\xe9","\u1eeb th\xec","\u1eeb \xe0o","\u1eeb \u1eeb","\u1eed"]}},7353:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(T){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=a;var r={},o={};function s(e,t){var n,a,s;return t?(s=0<=(e>>>=0)&&e<256)&&(a=o[e])?a:(n=c(e,(0|e)<0?-1:0,!0),s&&(o[e]=n),n):(s=-128<=(e|=0)&&e<128)&&(a=r[e])?a:(n=c(e,e<0?-1:0,!1),s&&(r[e]=n),n)}function i(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=p)return k}else{if(e<=-f)return S;if(e+1>=f)return w}return e<0?i(-e,t).neg():c(e%d|0,e/d|0,t)}function c(e,t,a){return new n(e,t,a)}n.fromInt=s,n.fromNumber=i,n.fromBits=c;var l=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var a;if((a=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===a)return u(e.substring(1),t,n).neg();for(var r=i(l(n,8)),o=g,s=0;s<e.length;s+=8){var c=Math.min(8,e.length-s),h=parseInt(e.substring(s,s+c),n);if(c<8){var d=i(l(n,c));o=o.mul(d).add(i(h))}else o=(o=o.mul(r)).add(i(h))}return o.unsigned=t,o}function h(e,t){return"number"===typeof e?i(e,t):"string"===typeof e?u(e,t):c(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=u,n.fromValue=h;var d=4294967296,p=d*d,f=p/2,m=s(1<<24),g=s(0);n.ZERO=g;var y=s(0,!0);n.UZERO=y;var b=s(1);n.ONE=b;var v=s(1,!0);n.UONE=v;var x=s(-1);n.NEG_ONE=x;var w=c(-1,2147483647,!1);n.MAX_VALUE=w;var k=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var S=c(0,-2147483648,!1);n.MIN_VALUE=S;var I=n.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=i(e),n=this.div(t),a=n.mul(t).sub(this);return n.toString(e)+a.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=i(l(e,6),this.unsigned),o=this,s="";;){var c=o.div(r),u=(o.sub(c.mul(r)).toInt()>>>0).toString(e);if((o=c).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1===(1&this.low)},I.isEven=function(){return 0===(1&this.low)},I.equals=function(e){return a(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(a(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(b)},I.neg=I.negate,I.add=function(e){a(e)||(e=h(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,i=65535&e.high,l=e.low>>>16,u=0,d=0,p=0,f=0;return p+=(f+=o+(65535&e.low))>>>16,d+=(p+=r+l)>>>16,u+=(d+=n+i)>>>16,u+=t+s,c((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},I.subtract=function(e){return a(e)||(e=h(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return g;if(a(e)||(e=h(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(S))return e.isOdd()?S:g;if(e.eq(S))return this.isOdd()?S:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return i(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,o=this.low>>>16,s=65535&this.low,l=e.high>>>16,u=65535&e.high,d=e.low>>>16,p=65535&e.low,f=0,y=0,b=0,v=0;return b+=(v+=s*p)>>>16,y+=(b+=o*p)>>>16,b&=65535,y+=(b+=s*d)>>>16,f+=(y+=r*p)>>>16,y&=65535,f+=(y+=o*d)>>>16,y&=65535,f+=(y+=s*u)>>>16,f+=n*p+r*d+o*u+s*l,c((b&=65535)<<16|(v&=65535),(f&=65535)<<16|(y&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(a(e)||(e=h(e)),e.isZero())throw Error("division by zero");var n,r,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return v;o=y}else{if(this.eq(S))return e.eq(b)||e.eq(x)?S:e.eq(S)?b:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?b:x:(r=this.sub(e.mul(n)),o=n.add(r.div(e)));if(e.eq(S))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=g}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),u=s<=48?1:l(2,s-48),d=i(n),p=d.mul(e);p.isNegative()||p.gt(r);)p=(d=i(n-=u,this.unsigned)).mul(e);d.isZero()&&(d=b),o=o.add(d),r=r.sub(p)}return o},I.div=I.divide,I.modulo=function(e){return a(e)||(e=h(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return c(~this.low,~this.high,this.unsigned)},I.and=function(e){return a(e)||(e=h(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return a(e)||(e=h(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return a(e)||(e=h(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,a){return a?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},1497:(e,t,n)=>{"use strict";var a=n(3218);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,s){if(s!==a){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},5173:(e,t,n)=>{e.exports=n(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7212:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(5043),s=(a=o)&&a.__esModule?a:{default:a};var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){return s.default.createElement("div",{className:"adsbybaidu"},"TODO")}}]),t}(s.default.Component);t.default=i},724:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=s(n(5043)),o=s(n(5173));function s(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){window&&(window.adsbygoogle=window.adsbygoogle||[]).push({})}},{key:"render",value:function(){return r.default.createElement("ins",{className:this.props.className+" adsbygoogle",style:this.props.style,"data-ad-client":this.props.client,"data-ad-slot":this.props.slot,"data-ad-layout":this.props.layout,"data-ad-layout-key":this.props.layoutKey,"data-ad-format":this.props.format,"data-full-width-responsive":this.props.responsive})}}]),t}(r.default.Component);t.default=i,i.propTypes={className:o.default.string,style:o.default.object,client:o.default.string.isRequired,slot:o.default.string.isRequired,layout:o.default.string,layoutKey:o.default.string,format:o.default.string,responsive:o.default.string},i.defaultProps={className:"",style:{display:"block"},format:"auto",layout:"",layoutKey:"",responsive:"false"}},6139:(e,t,n)=>{"use strict";var a=o(n(724)),r=o(n(7212));function o(e){return e&&e.__esModule?e:{default:e}}a.default,r.default},2892:(e,t,n)=>{"use strict";n.d(t,{Yb:()=>h});var a=n(5043);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r.apply(this,arguments)}"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var o="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?a.useLayoutEffect:a.useEffect,s={status:"not-requested",loading:!1,result:void 0,error:void 0},i={status:"loading",loading:!0,result:void 0,error:void 0},c=function(){},l={initialState:function(e){return e&&e.executeOnMount?i:s},executeOnMount:!0,executeOnUpdate:!0,setLoading:function(e){return i},setResult:function(e,t){return{status:"success",loading:!1,result:e,error:void 0}},setError:function(e,t){return{status:"error",loading:!1,result:void 0,error:e}},onSuccess:c,onError:c},u=function(e,t,n){!t&&(t=[]);var s=function(e){return r({},l,{},e)}(n),i=(0,a.useState)(null),c=i[0],u=i[1],h=function(e){var t=(0,a.useState)((function(){return e.initialState(e)})),n=t[0],o=t[1],s=(0,a.useCallback)((function(){return o(e.initialState(e))}),[o,e]),i=(0,a.useCallback)((function(){return o(e.setLoading(n))}),[n,o]),c=(0,a.useCallback)((function(t){return o(e.setResult(t,n))}),[n,o]),l=(0,a.useCallback)((function(t){return o(e.setError(t,n))}),[n,o]),u=(0,a.useCallback)((function(e){return o(r({},n,{},e))}),[n,o]);return{value:n,set:o,merge:u,reset:s,setLoading:i,setResult:c,setError:l}}(s),d=function(){var e=(0,a.useRef)(!1);return(0,a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),function(){return e.current}}(),p=function(){var e=(0,a.useRef)(null);return{set:function(t){return e.current=t},get:function(){return e.current},is:function(t){return e.current===t}}}(),f=function(e){return d()&&p.is(e)},m=function(e){var t=(0,a.useRef)(e);return o((function(){t.current=e})),(0,a.useCallback)((function(){return t.current}),[t])}((function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=function(){try{return Promise.resolve(e.apply(void 0,n))}catch(t){return Promise.reject(t)}}();return u(n),p.set(r),h.setLoading(),r.then((function(e){f(r)&&h.setResult(e),s.onSuccess(e,{isCurrent:function(){return p.is(r)}})}),(function(e){f(r)&&h.setError(e),s.onError(e,{isCurrent:function(){return p.is(r)}})})),r})),g=(0,a.useCallback)((function(){return m().apply(void 0,arguments)}),[m]),y=!d();return(0,a.useEffect)((function(){var e=function(){return m().apply(void 0,t)};y&&s.executeOnMount&&e(),!y&&s.executeOnUpdate&&e()}),t),r({},h.value,{set:h.set,merge:h.merge,reset:h.reset,execute:g,currentPromise:p.get(),currentParams:c})};function h(e,t,n){return u(e,t,n)}},2730:(e,t,n)=>{"use strict";var a=n(5043),r=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(i[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,a,r,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,n,a){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,a){if(null===t||"undefined"===typeof t||function(e,t,n,a){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,a))return!0;if(a)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,a)&&(n=null),a||null===r?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,a=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var F=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,P=Object.assign;function z(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var B=!1;function W(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var a=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){a=l}e.call(t.prototype)}else{try{throw Error()}catch(l){a=l}e()}}catch(l){if(l&&a&&"string"===typeof l.stack){for(var r=l.stack.split("\n"),o=a.stack.split("\n"),s=r.length-1,i=o.length-1;1<=s&&0<=i&&r[s]!==o[i];)i--;for(;1<=s&&0<=i;s--,i--)if(r[s]!==o[i]){if(1!==s||1!==i)do{if(s--,0>--i||r[s]!==o[i]){var c="\n"+r[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=s&&0<=i);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function U(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case T:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function j(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){a=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=H(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return P({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;n=j(null!=t.value?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=j(t.value),a=t.type;if(null!=n)"number"===a?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,j(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,a){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&a&&(e[n].defaultSelected=!0)}else{for(n=""+j(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(a&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return P({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:j(n)}}function oe(e,t){var n=j(t.value),a=j(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=a&&(e.defaultValue=""+a)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,a){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var a=0===n.indexOf("--"),r=me(n,t[n],a);"float"===n&&(n="cssFloat"),a?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=P({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Ie=null;function Te(e){if(e=vr(e)){if("function"!==typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=wr(t),ke(e.stateNode,e.type,t))}}function Ce(e){Se?Ie?Ie.push(e):Ie=[e]:Se=e}function Ee(){if(Se){var e=Se,t=Ie;if(Ie=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ne(e,t){return e(t)}function Re(){}var Ae=!1;function _e(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ne(e,t,n)}finally{Ae=!1,(null!==Se||null!==Ie)&&(Re(),Ee())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var a=wr(n);if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Fe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Fe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Fe=!1}function Le(e,t,n,a,r,o,s,i,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Me=!1,Pe=null,ze=!1,Be=null,We={onError:function(e){Me=!0,Pe=e}};function Ue(e,t,n,a,r,o,s,i,c){Me=!1,Pe=null,Le.apply(We,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function je(e){if(Ve(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,a=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(a=r.return)){n=a;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return je(r),e;if(s===a)return je(r),t;s=s.sibling}throw Error(o(188))}if(n.return!==a.return)n=r,a=s;else{for(var i=!1,c=r.child;c;){if(c===n){i=!0,n=r,a=s;break}if(c===a){i=!0,a=r,n=s;break}c=c.sibling}if(!i){for(c=s.child;c;){if(c===n){i=!0,n=s,a=r;break}if(c===a){i=!0,a=s,n=r;break}c=c.sibling}if(!i)throw Error(o(189))}}if(n.alternate!==a)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var qe=r.unstable_scheduleCallback,Ye=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,Ze=r.unstable_requestPaint,Qe=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,$e=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,at=r.unstable_IdlePriority,rt=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(it(e)/ct|0)|0},it=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var a=0,r=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var i=s&~r;0!==i?a=ht(i):0!==(o&=s)&&(a=ht(o))}else 0!==(s=n&~r)?a=ht(s):0!==o&&(a=ht(o));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&r)&&((r=a&-a)>=(o=t&-t)||16===r&&0!==(4194240&o)))return t;if(0!==(4&a)&&(a|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)r=1<<(n=31-st(t)),a|=e[n],t&=~r;return a}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-st(n),r=1<<a;r&t|e[a]&t&&(e[a]|=t),n&=~r}}var vt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,St,It,Tt,Ct=!1,Et=[],Nt=null,Rt=null,At=null,_t=new Map,Ot=new Map,Ft=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":_t.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,a,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=vr(t))&&kt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Pt(e){var t=br(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void Tt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vr(n))&&kt(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);xe=a,n.target.dispatchEvent(a),xe=null,t.shift()}return!0}function Bt(e,t,n){zt(e)&&n.delete(t)}function Wt(){Ct=!1,null!==Nt&&zt(Nt)&&(Nt=null),null!==Rt&&zt(Rt)&&(Rt=null),null!==At&&zt(At)&&(At=null),_t.forEach(Bt),Ot.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Wt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var n=1;n<Et.length;n++){var a=Et[n];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Nt&&Ut(Nt,e),null!==Rt&&Ut(Rt,e),null!==At&&Ut(At,e),_t.forEach(t),Ot.forEach(t),n=0;n<Ft.length;n++)(a=Ft[n]).blockedOn===e&&(a.blockedOn=null);for(;0<Ft.length&&null===(n=Ft[0]).blockedOn;)Pt(n),null===n.blockedOn&&Ft.shift()}var Gt=x.ReactCurrentBatchConfig,jt=!0;function Ht(e,t,n,a){var r=vt,o=Gt.transition;Gt.transition=null;try{vt=1,qt(e,t,n,a)}finally{vt=r,Gt.transition=o}}function Kt(e,t,n,a){var r=vt,o=Gt.transition;Gt.transition=null;try{vt=4,qt(e,t,n,a)}finally{vt=r,Gt.transition=o}}function qt(e,t,n,a){if(jt){var r=Xt(e,t,n,a);if(null===r)ja(e,t,a,Yt,n),Lt(e,a);else if(function(e,t,n,a,r){switch(t){case"focusin":return Nt=Mt(Nt,e,t,n,a,r),!0;case"dragenter":return Rt=Mt(Rt,e,t,n,a,r),!0;case"mouseover":return At=Mt(At,e,t,n,a,r),!0;case"pointerover":var o=r.pointerId;return _t.set(o,Mt(_t.get(o)||null,e,t,n,a,r)),!0;case"gotpointercapture":return o=r.pointerId,Ot.set(o,Mt(Ot.get(o)||null,e,t,n,a,r)),!0}return!1}(r,e,t,n,a))a.stopPropagation();else if(Lt(e,a),4&t&&-1<Dt.indexOf(e)){for(;null!==r;){var o=vr(r);if(null!==o&&wt(o),null===(o=Xt(e,t,n,a))&&ja(e,t,a,Yt,n),o===r)break;r=o}null!==r&&a.stopPropagation()}else ja(e,t,a,null,n)}}var Yt=null;function Xt(e,t,n,a){if(Yt=null,null!==(e=br(e=we(a))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case at:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,$t=null;function en(){if($t)return $t;var e,t,n=Jt,a=n.length,r="value"in Qt?Qt.value:Qt.textContent,o=r.length;for(e=0;e<a&&n[e]===r[e];e++);var s=a-e;for(t=1;t<=s&&n[a-t]===r[o-t];t++);return $t=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function an(){return!1}function rn(e){function t(t,n,a,r,o){for(var s in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:an,this.isPropagationStopped=an,this}return P(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(ln),hn=P({},ln,{view:0,detail:0}),dn=rn(hn),pn=P({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,sn=e.screenY-cn.screenY):sn=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=rn(pn),mn=rn(P({},pn,{dataTransfer:0})),gn=rn(P({},hn,{relatedTarget:0})),yn=rn(P({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=P({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=rn(bn),xn=rn(P({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return In}var Cn=P({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=rn(Cn),Nn=rn(P({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=rn(P({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=rn(P({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=P({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=rn(_n),Fn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Pn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),zn=String.fromCharCode(32),Bn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==Fn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Hn(e,t,n,a){Ce(a),0<(t=Ka(t,"onChange")).length&&(n=new un("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Kn=null,qn=null;function Yn(e){za(e,0)}function Xn(e){if(q(xr(e)))return e}function Zn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Jn;if(u){var $n="oninput"in document;if(!$n){var ea=document.createElement("div");ea.setAttribute("oninput","return;"),$n="function"===typeof ea.oninput}Jn=$n}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function ta(){Kn&&(Kn.detachEvent("onpropertychange",na),qn=Kn=null)}function na(e){if("value"===e.propertyName&&Xn(qn)){var t=[];Hn(t,qn,e,we(e)),_e(Yn,t)}}function aa(e,t,n){"focusin"===e?(ta(),qn=n,(Kn=t).attachEvent("onpropertychange",na)):"focusout"===e&&ta()}function ra(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(qn)}function oa(e,t){if("click"===e)return Xn(t)}function sa(e,t){if("input"===e||"change"===e)return Xn(t)}var ia="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ca(e,t){if(ia(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!h.call(t,r)||!ia(e[r],t[r]))return!1}return!0}function la(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ua(e,t){var n,a=la(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=la(a)}}function ha(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ha(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function da(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fa(e){var t=da(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ha(n.ownerDocument.documentElement,n)){if(null!==a&&pa(n))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(a.start,r);a=void 0===a.end?o:Math.min(a.end,r),!e.extend&&o>a&&(r=a,a=o,o=r),r=ua(n,o);var s=ua(n,a);r&&s&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>a?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ma=u&&"documentMode"in document&&11>=document.documentMode,ga=null,ya=null,ba=null,va=!1;function xa(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;va||null==ga||ga!==Y(a)||("selectionStart"in(a=ga)&&pa(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ba&&ca(ba,a)||(ba=a,0<(a=Ka(ya,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=ga)))}function wa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ka={animationend:wa("Animation","AnimationEnd"),animationiteration:wa("Animation","AnimationIteration"),animationstart:wa("Animation","AnimationStart"),transitionend:wa("Transition","TransitionEnd")},Sa={},Ia={};function Ta(e){if(Sa[e])return Sa[e];if(!ka[e])return e;var t,n=ka[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ia)return Sa[e]=n[t];return e}u&&(Ia=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);var Ca=Ta("animationend"),Ea=Ta("animationiteration"),Na=Ta("animationstart"),Ra=Ta("transitionend"),Aa=new Map,_a="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oa(e,t){Aa.set(e,t),c(t,[e])}for(var Fa=0;Fa<_a.length;Fa++){var Da=_a[Fa];Oa(Da.toLowerCase(),"on"+(Da[0].toUpperCase()+Da.slice(1)))}Oa(Ca,"onAnimationEnd"),Oa(Ea,"onAnimationIteration"),Oa(Na,"onAnimationStart"),Oa("dblclick","onDoubleClick"),Oa("focusin","onFocus"),Oa("focusout","onBlur"),Oa(Ra,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var La="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ma=new Set("cancel close invalid load scroll toggle".split(" ").concat(La));function Pa(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,a,r,s,i,c,l){if(Ue.apply(this,arguments),Me){if(!Me)throw Error(o(198));var u=Pe;Me=!1,Pe=null,ze||(ze=!0,Be=u)}}(a,t,void 0,e),e.currentTarget=null}function za(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var a=e[n],r=a.event;a=a.listeners;e:{var o=void 0;if(t)for(var s=a.length-1;0<=s;s--){var i=a[s],c=i.instance,l=i.currentTarget;if(i=i.listener,c!==o&&r.isPropagationStopped())break e;Pa(r,i,l),o=c}else for(s=0;s<a.length;s++){if(c=(i=a[s]).instance,l=i.currentTarget,i=i.listener,c!==o&&r.isPropagationStopped())break e;Pa(r,i,l),o=c}}}if(ze)throw e=Be,ze=!1,Be=null,e}function Ba(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var a=e+"__bubble";n.has(a)||(Ga(t,e,2,!1),n.add(a))}function Wa(e,t,n){var a=0;t&&(a|=4),Ga(n,e,a,t)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function Va(e){if(!e[Ua]){e[Ua]=!0,s.forEach((function(t){"selectionchange"!==t&&(Ma.has(t)||Wa(t,!1,e),Wa(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ua]||(t[Ua]=!0,Wa("selectionchange",!1,t))}}function Ga(e,t,n,a){switch(Zt(t)){case 1:var r=Ht;break;case 4:r=Kt;break;default:r=qt}n=r.bind(null,t,n,e),r=void 0,!Fe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),a?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function ja(e,t,n,a,r){var o=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var s=a.tag;if(3===s||4===s){var i=a.stateNode.containerInfo;if(i===r||8===i.nodeType&&i.parentNode===r)break;if(4===s)for(s=a.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===r||8===c.nodeType&&c.parentNode===r))return;s=s.return}for(;null!==i;){if(null===(s=br(i)))return;if(5===(c=s.tag)||6===c){a=o=s;continue e}i=i.parentNode}}a=a.return}_e((function(){var a=o,r=we(n),s=[];e:{var i=Aa.get(e);if(void 0!==i){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=En;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Rn;break;case Ca:case Ea:case Na:c=yn;break;case Ra:c=An;break;case"scroll":c=dn;break;case"wheel":c=On;break;case"copy":case"cut":case"paste":c=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Nn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==i?i+"Capture":null:i;u=[];for(var p,f=a;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Oe(f,d))&&u.push(Ha(f,m,p)))),h)break;f=f.return}0<u.length&&(i=new c(i,l,null,n,r),s.push({event:i,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||n===xe||!(l=n.relatedTarget||n.fromElement)||!br(l)&&!l[fr])&&(c||i)&&(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,c?(c=a,null!==(l=(l=n.relatedTarget||n.toElement)?br(l):null)&&(l!==(h=Ve(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=a),c!==l)){if(u=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==c?i:xr(c),p=null==l?i:xr(l),(i=new u(m,f+"leave",c,n,r)).target=h,i.relatedTarget=p,m=null,br(r)===a&&((u=new u(d,f+"enter",l,n,r)).target=p,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,f=0,p=u=c;p;p=qa(p))f++;for(p=0,m=d;m;m=qa(m))p++;for(;0<f-p;)u=qa(u),f--;for(;0<p-f;)d=qa(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=qa(u),d=qa(d)}u=null}else u=null;null!==c&&Ya(s,i,c,u,!1),null!==l&&null!==h&&Ya(s,h,l,u,!0)}if("select"===(c=(i=a?xr(a):window).nodeName&&i.nodeName.toLowerCase())||"input"===c&&"file"===i.type)var g=Zn;else if(jn(i))if(Qn)g=sa;else{g=ra;var y=aa}else(c=i.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(g=oa);switch(g&&(g=g(e,a))?Hn(s,g,n,r):(y&&y(e,i,a),"focusout"===e&&(y=i._wrapperState)&&y.controlled&&"number"===i.type&&ee(i,"number",i.value)),y=a?xr(a):window,e){case"focusin":(jn(y)||"true"===y.contentEditable)&&(ga=y,ya=a,ba=null);break;case"focusout":ba=ya=ga=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,xa(s,n,r);break;case"selectionchange":if(ma)break;case"keydown":case"keyup":xa(s,n,r)}var b;if(Dn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Vn?Wn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Pn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Vn&&(b=en()):(Jt="value"in(Qt=r)?Qt.value:Qt.textContent,Vn=!0)),0<(y=Ka(a,v)).length&&(v=new xn(v,e,null,n,r),s.push({event:v,listeners:y}),b?v.data=b:null!==(b=Un(n))&&(v.data=b))),(b=Mn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,zn);case"textInput":return(e=t.data)===zn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Dn&&Wn(e,t)?(e=en(),$t=Jt=Qt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(a=Ka(a,"onBeforeInput")).length&&(r=new xn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:a}),r.data=b))}za(s,t)}))}function Ha(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ka(e,t){for(var n=t+"Capture",a=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Oe(e,n))&&a.unshift(Ha(e,o,r)),null!=(o=Oe(e,t))&&a.push(Ha(e,o,r))),e=e.return}return a}function qa(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ya(e,t,n,a,r){for(var o=t._reactName,s=[];null!==n&&n!==a;){var i=n,c=i.alternate,l=i.stateNode;if(null!==c&&c===a)break;5===i.tag&&null!==l&&(i=l,r?null!=(c=Oe(n,o))&&s.unshift(Ha(n,c,i)):r||null!=(c=Oe(n,o))&&s.push(Ha(n,c,i))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Xa=/\r\n?/g,Za=/\u0000|\uFFFD/g;function Qa(e){return("string"===typeof e?e:""+e).replace(Xa,"\n").replace(Za,"")}function Ja(e,t,n){if(t=Qa(t),Qa(e)!==t&&n)throw Error(o(425))}function $a(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ar="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,sr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(e){return or.resolve(null).then(e).catch(ir)}:ar;function ir(e){setTimeout((function(){throw e}))}function cr(e,t){var n=t,a=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===a)return e.removeChild(r),void Vt(t);a--}else"$"!==n&&"$?"!==n&&"$!"!==n||a++;n=r}while(n);Vt(t)}function lr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,pr="__reactProps$"+hr,fr="__reactContainer$"+hr,mr="__reactEvents$"+hr,gr="__reactListeners$"+hr,yr="__reactHandles$"+hr;function br(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[dr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function vr(e){return!(e=e[dr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wr(e){return e[pr]||null}var kr=[],Sr=-1;function Ir(e){return{current:e}}function Tr(e){0>Sr||(e.current=kr[Sr],kr[Sr]=null,Sr--)}function Cr(e,t){Sr++,kr[Sr]=e.current,e.current=t}var Er={},Nr=Ir(Er),Rr=Ir(!1),Ar=Er;function _r(e,t){var n=e.type.contextTypes;if(!n)return Er;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Or(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Fr(){Tr(Rr),Tr(Nr)}function Dr(e,t,n){if(Nr.current!==Er)throw Error(o(168));Cr(Nr,t),Cr(Rr,n)}function Lr(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return n;for(var r in a=a.getChildContext())if(!(r in t))throw Error(o(108,G(e)||"Unknown",r));return P({},n,a)}function Mr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Er,Ar=Nr.current,Cr(Nr,e),Cr(Rr,Rr.current),!0}function Pr(e,t,n){var a=e.stateNode;if(!a)throw Error(o(169));n?(e=Lr(e,t,Ar),a.__reactInternalMemoizedMergedChildContext=e,Tr(Rr),Tr(Nr),Cr(Nr,e)):Tr(Rr),Cr(Rr,n)}var zr=null,Br=!1,Wr=!1;function Ur(e){null===zr?zr=[e]:zr.push(e)}function Vr(){if(!Wr&&null!==zr){Wr=!0;var e=0,t=vt;try{var n=zr;for(vt=1;e<n.length;e++){var a=n[e];do{a=a(!0)}while(null!==a)}zr=null,Br=!1}catch(r){throw null!==zr&&(zr=zr.slice(e+1)),qe($e,Vr),r}finally{vt=t,Wr=!1}}return null}var Gr=[],jr=0,Hr=null,Kr=0,qr=[],Yr=0,Xr=null,Zr=1,Qr="";function Jr(e,t){Gr[jr++]=Kr,Gr[jr++]=Hr,Hr=e,Kr=t}function $r(e,t,n){qr[Yr++]=Zr,qr[Yr++]=Qr,qr[Yr++]=Xr,Xr=e;var a=Zr;e=Qr;var r=32-st(a)-1;a&=~(1<<r),n+=1;var o=32-st(t)+r;if(30<o){var s=r-r%5;o=(a&(1<<s)-1).toString(32),a>>=s,r-=s,Zr=1<<32-st(t)+r|n<<r|a,Qr=o+e}else Zr=1<<o|n<<r|a,Qr=e}function eo(e){null!==e.return&&(Jr(e,1),$r(e,1,0))}function to(e){for(;e===Hr;)Hr=Gr[--jr],Gr[jr]=null,Kr=Gr[--jr],Gr[jr]=null;for(;e===Xr;)Xr=qr[--Yr],qr[Yr]=null,Qr=qr[--Yr],qr[Yr]=null,Zr=qr[--Yr],qr[Yr]=null}var no=null,ao=null,ro=!1,oo=null;function so(e,t){var n=Ol(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function io(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ao=lr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ao=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xr?{id:Zr,overflow:Qr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ol(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ao=null,!0);default:return!1}}function co(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(ro){var t=ao;if(t){var n=t;if(!io(e,t)){if(co(e))throw Error(o(418));t=lr(n.nextSibling);var a=no;t&&io(e,t)?so(a,n):(e.flags=-4097&e.flags|2,ro=!1,no=e)}}else{if(co(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!ro)return uo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=ao)){if(co(e))throw po(),Error(o(418));for(;t;)so(e,t),t=lr(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ao=lr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ao=null}}else ao=no?lr(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ao;e;)e=lr(e.nextSibling)}function fo(){ao=no=null,ro=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=P({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var bo=Ir(null),vo=null,xo=null,wo=null;function ko(){wo=xo=vo=null}function So(e){var t=bo.current;Tr(bo),e._currentValue=t}function Io(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function To(e,t){vo=e,wo=xo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xi=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(wo!==e)if(e={context:e,memoizedValue:t,next:null},null===xo){if(null===vo)throw Error(o(308));xo=e,vo.dependencies={lanes:0,firstContext:e}}else xo=xo.next=e;return t}var Eo=null;function No(e){null===Eo?Eo=[e]:Eo.push(e)}function Ro(e,t,n,a){var r=t.interleaved;return null===r?(n.next=n,No(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ao(e,a)}function Ao(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var _o=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Do(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Rc)){var r=a.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),a.pending=t,Ao(e,n)}return null===(r=a.interleaved)?(t.next=t,No(a)):(t.next=r.next,r.next=t),a.interleaved=t,Ao(e,n)}function Mo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Po(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:a.shared,effects:a.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zo(e,t,n,a){var r=e.updateQueue;_o=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,i=r.shared.pending;if(null!==i){r.shared.pending=null;var c=i,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var u=e.alternate;null!==u&&((i=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===i?u.firstBaseUpdate=l:i.next=l,u.lastBaseUpdate=c))}if(null!==o){var h=r.baseState;for(s=0,u=l=c=null,i=o;;){var d=i.lane,p=i.eventTime;if((a&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var f=e,m=i;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=P({},h,d);break e;case 2:_o=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[i]:d.push(i))}else p={eventTime:p,lane:d,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===u?(l=u=p,c=h):u=u.next=p,s|=d;if(null===(i=i.next)){if(null===(i=r.shared.pending))break;i=(d=i).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(c=h),r.baseState=c,r.firstBaseUpdate=l,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{s|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);Pc|=s,e.lanes=s,e.memoizedState=h}}function Bo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],r=a.callback;if(null!==r){if(a.callback=null,a=n,"function"!==typeof r)throw Error(o(191,r));r.call(a)}}}var Wo=(new a.Component).refs;function Uo(e,t,n,a){n=null===(n=n(a,t=e.memoizedState))||void 0===n?t:P({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Vo={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=tl(),r=nl(e),o=Do(a,r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,r))&&(al(t,e,r,a),Mo(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=tl(),r=nl(e),o=Do(a,r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,r))&&(al(t,e,r,a),Mo(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),a=nl(e),r=Do(n,a);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Lo(e,r,a))&&(al(t,e,a,n),Mo(t,e,a))}};function Go(e,t,n,a,r,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!ca(n,a)||!ca(r,o))}function jo(e,t,n){var a=!1,r=Er,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(r=Or(t)?Ar:Nr.current,o=(a=null!==(a=t.contextTypes)&&void 0!==a)?_r(e,r):Er),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vo,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ho(e,t,n,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function Ko(e,t,n,a){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=Wo,Oo(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=Co(o):(o=Or(t)?Ar:Nr.current,r.context=_r(e,o)),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Uo(e,t,o,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Vo.enqueueReplaceState(r,r.state,null),zo(e,n,r,a),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function qo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var a=n.stateNode}if(!a)throw Error(o(147,e));var r=a,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;t===Wo&&(t=r.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xo(e){return(0,e._init)(e._payload)}function Zo(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Dl(e,t)).index=0,e.sibling=null,e}function s(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=2,n):a:(t.flags|=2,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,a){return null===t||6!==t.tag?((t=zl(n,e.mode,a)).return=e,t):((t=r(t,n)).return=e,t)}function l(e,t,n,a){var o=n.type;return o===S?h(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&Xo(o)===t.type)?((a=r(t,n.props)).ref=qo(e,t,n),a.return=e,a):((a=Ll(n.type,n.key,n.props,null,e.mode,a)).ref=qo(e,t,n),a.return=e,a)}function u(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bl(n,e.mode,a)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,a,o){return null===t||7!==t.tag?((t=Ml(n,e.mode,a,o)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=qo(e,null,t),n.return=e,n;case k:return(t=Bl(t,e.mode,n)).return=e,t;case O:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ml(t,e.mode,n,null)).return=e,t;Yo(e,t)}return null}function p(e,t,n,a){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:c(e,t,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?l(e,t,n,a):null;case k:return n.key===r?u(e,t,n,a):null;case O:return p(e,t,(r=n._init)(n._payload),a)}if(te(n)||L(n))return null!==r?null:h(e,t,n,a,null);Yo(e,n)}return null}function f(e,t,n,a,r){if("string"===typeof a&&""!==a||"number"===typeof a)return c(t,e=e.get(n)||null,""+a,r);if("object"===typeof a&&null!==a){switch(a.$$typeof){case w:return l(t,e=e.get(null===a.key?n:a.key)||null,a,r);case k:return u(t,e=e.get(null===a.key?n:a.key)||null,a,r);case O:return f(e,t,n,(0,a._init)(a._payload),r)}if(te(a)||L(a))return h(t,e=e.get(n)||null,a,r,null);Yo(t,a)}return null}function m(r,o,i,c){for(var l=null,u=null,h=o,m=o=0,g=null;null!==h&&m<i.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(r,h,i[m],c);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(r,h),o=s(y,o,m),null===u?l=y:u.sibling=y,u=y,h=g}if(m===i.length)return n(r,h),ro&&Jr(r,m),l;if(null===h){for(;m<i.length;m++)null!==(h=d(r,i[m],c))&&(o=s(h,o,m),null===u?l=h:u.sibling=h,u=h);return ro&&Jr(r,m),l}for(h=a(r,h);m<i.length;m++)null!==(g=f(h,r,m,i[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(r,e)})),ro&&Jr(r,m),l}function g(r,i,c,l){var u=L(c);if("function"!==typeof u)throw Error(o(150));if(null==(c=u.call(c)))throw Error(o(151));for(var h=u=null,m=i,g=i=0,y=null,b=c.next();null!==m&&!b.done;g++,b=c.next()){m.index>g?(y=m,m=null):y=m.sibling;var v=p(r,m,b.value,l);if(null===v){null===m&&(m=y);break}e&&m&&null===v.alternate&&t(r,m),i=s(v,i,g),null===h?u=v:h.sibling=v,h=v,m=y}if(b.done)return n(r,m),ro&&Jr(r,g),u;if(null===m){for(;!b.done;g++,b=c.next())null!==(b=d(r,b.value,l))&&(i=s(b,i,g),null===h?u=b:h.sibling=b,h=b);return ro&&Jr(r,g),u}for(m=a(r,m);!b.done;g++,b=c.next())null!==(b=f(m,r,g,b.value,l))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),i=s(b,i,g),null===h?u=b:h.sibling=b,h=b);return e&&m.forEach((function(e){return t(r,e)})),ro&&Jr(r,g),u}return function e(a,o,s,c){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var l=s.key,u=o;null!==u;){if(u.key===l){if((l=s.type)===S){if(7===u.tag){n(a,u.sibling),(o=r(u,s.props.children)).return=a,a=o;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===O&&Xo(l)===u.type){n(a,u.sibling),(o=r(u,s.props)).ref=qo(a,u,s),o.return=a,a=o;break e}n(a,u);break}t(a,u),u=u.sibling}s.type===S?((o=Ml(s.props.children,a.mode,c,s.key)).return=a,a=o):((c=Ll(s.type,s.key,s.props,null,a.mode,c)).ref=qo(a,o,s),c.return=a,a=c)}return i(a);case k:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(a,o.sibling),(o=r(o,s.children||[])).return=a,a=o;break e}n(a,o);break}t(a,o),o=o.sibling}(o=Bl(s,a.mode,c)).return=a,a=o}return i(a);case O:return e(a,o,(u=s._init)(s._payload),c)}if(te(s))return m(a,o,s,c);if(L(s))return g(a,o,s,c);Yo(a,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(a,o.sibling),(o=r(o,s)).return=a,a=o):(n(a,o),(o=zl(s,a.mode,c)).return=a,a=o),i(a)):n(a,o)}}var Qo=Zo(!0),Jo=Zo(!1),$o={},es=Ir($o),ts=Ir($o),ns=Ir($o);function as(e){if(e===$o)throw Error(o(174));return e}function rs(e,t){switch(Cr(ns,t),Cr(ts,e),Cr(es,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Tr(es),Cr(es,t)}function os(){Tr(es),Tr(ts),Tr(ns)}function ss(e){as(ns.current);var t=as(es.current),n=ce(t,e.type);t!==n&&(Cr(ts,e),Cr(es,n))}function is(e){ts.current===e&&(Tr(es),Tr(ts))}var cs=Ir(0);function ls(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function hs(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var ds=x.ReactCurrentDispatcher,ps=x.ReactCurrentBatchConfig,fs=0,ms=null,gs=null,ys=null,bs=!1,vs=!1,xs=0,ws=0;function ks(){throw Error(o(321))}function Ss(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ia(e[n],t[n]))return!1;return!0}function Is(e,t,n,a,r,s){if(fs=s,ms=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?ii:ci,e=n(a,r),vs){s=0;do{if(vs=!1,xs=0,25<=s)throw Error(o(301));s+=1,ys=gs=null,t.updateQueue=null,ds.current=li,e=n(a,r)}while(vs)}if(ds.current=si,t=null!==gs&&null!==gs.next,fs=0,ys=gs=ms=null,bs=!1,t)throw Error(o(300));return e}function Ts(){var e=0!==xs;return xs=0,e}function Cs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ys?ms.memoizedState=ys=e:ys=ys.next=e,ys}function Es(){if(null===gs){var e=ms.alternate;e=null!==e?e.memoizedState:null}else e=gs.next;var t=null===ys?ms.memoizedState:ys.next;if(null!==t)ys=t,gs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gs=e).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===ys?ms.memoizedState=ys=e:ys=ys.next=e}return ys}function Ns(e,t){return"function"===typeof t?t(e):t}function Rs(e){var t=Es(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var a=gs,r=a.baseQueue,s=n.pending;if(null!==s){if(null!==r){var i=r.next;r.next=s.next,s.next=i}a.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,a=a.baseState;var c=i=null,l=null,u=s;do{var h=u.lane;if((fs&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),a=u.hasEagerState?u.eagerState:e(a,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,i=a):l=l.next=d,ms.lanes|=h,Pc|=h}u=u.next}while(null!==u&&u!==s);null===l?i=a:l.next=c,ia(a,t.memoizedState)||(xi=!0),t.memoizedState=a,t.baseState=i,t.baseQueue=l,n.lastRenderedState=a}if(null!==(e=n.interleaved)){r=e;do{s=r.lane,ms.lanes|=s,Pc|=s,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function As(e){var t=Es(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var a=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var i=r=r.next;do{s=e(s,i.action),i=i.next}while(i!==r);ia(s,t.memoizedState)||(xi=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,a]}function _s(){}function Os(e,t){var n=ms,a=Es(),r=t(),s=!ia(a.memoizedState,r);if(s&&(a.memoizedState=r,xi=!0),a=a.queue,js(Ls.bind(null,n,a,e),[e]),a.getSnapshot!==t||s||null!==ys&&1&ys.memoizedState.tag){if(n.flags|=2048,Bs(9,Ds.bind(null,n,a,r,t),void 0,null),null===Ac)throw Error(o(349));0!==(30&fs)||Fs(n,t,r)}return r}function Fs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ds(e,t,n,a){t.value=n,t.getSnapshot=a,Ms(t)&&Ps(e)}function Ls(e,t,n){return n((function(){Ms(t)&&Ps(e)}))}function Ms(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ia(e,n)}catch(a){return!0}}function Ps(e){var t=Ao(e,1);null!==t&&al(t,e,1,-1)}function zs(e){var t=Cs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:e},t.queue=e,e=e.dispatch=ni.bind(null,ms,e),[t.memoizedState,e]}function Bs(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Ws(){return Es().memoizedState}function Us(e,t,n,a){var r=Cs();ms.flags|=e,r.memoizedState=Bs(1|t,n,void 0,void 0===a?null:a)}function Vs(e,t,n,a){var r=Es();a=void 0===a?null:a;var o=void 0;if(null!==gs){var s=gs.memoizedState;if(o=s.destroy,null!==a&&Ss(a,s.deps))return void(r.memoizedState=Bs(t,n,o,a))}ms.flags|=e,r.memoizedState=Bs(1|t,n,o,a)}function Gs(e,t){return Us(8390656,8,e,t)}function js(e,t){return Vs(2048,8,e,t)}function Hs(e,t){return Vs(4,2,e,t)}function Ks(e,t){return Vs(4,4,e,t)}function qs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ys(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vs(4,4,qs.bind(null,t,e),n)}function Xs(){}function Zs(e,t){var n=Es();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&Ss(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Qs(e,t){var n=Es();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&Ss(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function Js(e,t,n){return 0===(21&fs)?(e.baseState&&(e.baseState=!1,xi=!0),e.memoizedState=n):(ia(n,t)||(n=mt(),ms.lanes|=n,Pc|=n,e.baseState=!0),t)}function $s(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var a=ps.transition;ps.transition={};try{e(!1),t()}finally{vt=n,ps.transition=a}}function ei(){return Es().memoizedState}function ti(e,t,n){var a=nl(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},ai(e))ri(t,n);else if(null!==(n=Ro(e,t,n,a))){al(n,e,a,tl()),oi(n,t,a)}}function ni(e,t,n){var a=nl(e),r={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(ai(e))ri(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,i=o(s,n);if(r.hasEagerState=!0,r.eagerState=i,ia(i,s)){var c=t.interleaved;return null===c?(r.next=r,No(t)):(r.next=c.next,c.next=r),void(t.interleaved=r)}}catch(l){}null!==(n=Ro(e,t,r,a))&&(al(n,e,a,r=tl()),oi(n,t,a))}}function ai(e){var t=e.alternate;return e===ms||null!==t&&t===ms}function ri(e,t){vs=bs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oi(e,t,n){if(0!==(4194240&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,bt(e,n)}}var si={readContext:Co,useCallback:ks,useContext:ks,useEffect:ks,useImperativeHandle:ks,useInsertionEffect:ks,useLayoutEffect:ks,useMemo:ks,useReducer:ks,useRef:ks,useState:ks,useDebugValue:ks,useDeferredValue:ks,useTransition:ks,useMutableSource:ks,useSyncExternalStore:ks,useId:ks,unstable_isNewReconciler:!1},ii={readContext:Co,useCallback:function(e,t){return Cs().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:Gs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Us(4194308,4,qs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Us(4194308,4,e,t)},useInsertionEffect:function(e,t){return Us(4,2,e,t)},useMemo:function(e,t){var n=Cs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=Cs();return t=void 0!==n?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=ti.bind(null,ms,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},Cs().memoizedState=e},useState:zs,useDebugValue:Xs,useDeferredValue:function(e){return Cs().memoizedState=e},useTransition:function(){var e=zs(!1),t=e[0];return e=$s.bind(null,e[1]),Cs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=ms,r=Cs();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ac)throw Error(o(349));0!==(30&fs)||Fs(a,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Gs(Ls.bind(null,a,s,e),[e]),a.flags|=2048,Bs(9,Ds.bind(null,a,s,n,t),void 0,null),n},useId:function(){var e=Cs(),t=Ac.identifierPrefix;if(ro){var n=Qr;t=":"+t+"R"+(n=(Zr&~(1<<32-st(Zr)-1)).toString(32)+n),0<(n=xs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ws++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ci={readContext:Co,useCallback:Zs,useContext:Co,useEffect:js,useImperativeHandle:Ys,useInsertionEffect:Hs,useLayoutEffect:Ks,useMemo:Qs,useReducer:Rs,useRef:Ws,useState:function(){return Rs(Ns)},useDebugValue:Xs,useDeferredValue:function(e){return Js(Es(),gs.memoizedState,e)},useTransition:function(){return[Rs(Ns)[0],Es().memoizedState]},useMutableSource:_s,useSyncExternalStore:Os,useId:ei,unstable_isNewReconciler:!1},li={readContext:Co,useCallback:Zs,useContext:Co,useEffect:js,useImperativeHandle:Ys,useInsertionEffect:Hs,useLayoutEffect:Ks,useMemo:Qs,useReducer:As,useRef:Ws,useState:function(){return As(Ns)},useDebugValue:Xs,useDeferredValue:function(e){var t=Es();return null===gs?t.memoizedState=e:Js(t,gs.memoizedState,e)},useTransition:function(){return[As(Ns)[0],Es().memoizedState]},useMutableSource:_s,useSyncExternalStore:Os,useId:ei,unstable_isNewReconciler:!1};function ui(e,t){try{var n="",a=t;do{n+=U(a),a=a.return}while(a);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r,digest:null}}function hi(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function di(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var pi="function"===typeof WeakMap?WeakMap:Map;function fi(e,t,n){(n=Do(-1,n)).tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Hc||(Hc=!0,Kc=a),di(0,t)},n}function mi(e,t,n){(n=Do(-1,n)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var r=t.value;n.payload=function(){return a(r)},n.callback=function(){di(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){di(0,t),"function"!==typeof a&&(null===qc?qc=new Set([this]):qc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gi(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new pi;var r=new Set;a.set(t,r)}else void 0===(r=a.get(t))&&(r=new Set,a.set(t,r));r.has(n)||(r.add(n),e=Cl.bind(null,e,t,n),t.then(e,e))}function yi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bi(e,t,n,a,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Do(-1,1)).tag=2,Lo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var vi=x.ReactCurrentOwner,xi=!1;function wi(e,t,n,a){t.child=null===e?Jo(t,null,n,a):Qo(t,e.child,n,a)}function ki(e,t,n,a,r){n=n.render;var o=t.ref;return To(t,r),a=Is(e,t,n,a,o,r),n=Ts(),null===e||xi?(ro&&n&&eo(t),t.flags|=1,wi(e,t,a,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Hi(e,t,r))}function Si(e,t,n,a,r){if(null===e){var o=n.type;return"function"!==typeof o||Fl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,a,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ii(e,t,o,a,r))}if(o=e.child,0===(e.lanes&r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:ca)(s,a)&&e.ref===t.ref)return Hi(e,t,r)}return t.flags|=1,(e=Dl(o,a)).ref=t.ref,e.return=t,t.child=e}function Ii(e,t,n,a,r){if(null!==e){var o=e.memoizedProps;if(ca(o,a)&&e.ref===t.ref){if(xi=!1,t.pendingProps=a=o,0===(e.lanes&r))return t.lanes=e.lanes,Hi(e,t,r);0!==(131072&e.flags)&&(xi=!0)}}return Ei(e,t,n,a,r)}function Ti(e,t,n){var a=t.pendingProps,r=a.children,o=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(Dc,Fc),Fc|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(Dc,Fc),Fc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==o?o.baseLanes:n,Cr(Dc,Fc),Fc|=a}else null!==o?(a=o.baseLanes|n,t.memoizedState=null):a=n,Cr(Dc,Fc),Fc|=a;return wi(e,t,r,n),t.child}function Ci(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ei(e,t,n,a,r){var o=Or(n)?Ar:Nr.current;return o=_r(t,o),To(t,r),n=Is(e,t,n,a,o,r),a=Ts(),null===e||xi?(ro&&a&&eo(t),t.flags|=1,wi(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Hi(e,t,r))}function Ni(e,t,n,a,r){if(Or(n)){var o=!0;Mr(t)}else o=!1;if(To(t,r),null===t.stateNode)ji(e,t),jo(t,n,a),Ko(t,n,a,r),a=!0;else if(null===e){var s=t.stateNode,i=t.memoizedProps;s.props=i;var c=s.context,l=n.contextType;"object"===typeof l&&null!==l?l=Co(l):l=_r(t,l=Or(n)?Ar:Nr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(i!==a||c!==l)&&Ho(t,s,a,l),_o=!1;var d=t.memoizedState;s.state=d,zo(t,a,s,r),c=t.memoizedState,i!==a||d!==c||Rr.current||_o?("function"===typeof u&&(Uo(t,n,u,a),c=t.memoizedState),(i=_o||Go(t,n,i,a,d,c,l))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),s.props=a,s.state=c,s.context=l,a=i):("function"===typeof s.componentDidMount&&(t.flags|=4194308),a=!1)}else{s=t.stateNode,Fo(e,t),i=t.memoizedProps,l=t.type===t.elementType?i:yo(t.type,i),s.props=l,h=t.pendingProps,d=s.context,"object"===typeof(c=n.contextType)&&null!==c?c=Co(c):c=_r(t,c=Or(n)?Ar:Nr.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(i!==h||d!==c)&&Ho(t,s,a,c),_o=!1,d=t.memoizedState,s.state=d,zo(t,a,s,r);var f=t.memoizedState;i!==h||d!==f||Rr.current||_o?("function"===typeof p&&(Uo(t,n,p,a),f=t.memoizedState),(l=_o||Go(t,n,l,a,d,f,c)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(a,f,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(a,f,c)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=f),s.props=a,s.state=f,s.context=c,a=l):("function"!==typeof s.componentDidUpdate||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),a=!1)}return Ri(e,t,n,a,o,r)}function Ri(e,t,n,a,r,o){Ci(e,t);var s=0!==(128&t.flags);if(!a&&!s)return r&&Pr(t,n,!1),Hi(e,t,o);a=t.stateNode,vi.current=t;var i=s&&"function"!==typeof n.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&s?(t.child=Qo(t,e.child,null,o),t.child=Qo(t,null,i,o)):wi(e,t,i,o),t.memoizedState=a.state,r&&Pr(t,n,!0),t.child}function Ai(e){var t=e.stateNode;t.pendingContext?Dr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Dr(0,t.context,!1),rs(e,t.containerInfo)}function _i(e,t,n,a,r){return fo(),mo(r),t.flags|=256,wi(e,t,n,a),t.child}var Oi,Fi,Di,Li,Mi={dehydrated:null,treeContext:null,retryLane:0};function Pi(e){return{baseLanes:e,cachePool:null,transitions:null}}function zi(e,t,n){var a,r=t.pendingProps,s=cs.current,i=!1,c=0!==(128&t.flags);if((a=c)||(a=(null===e||null!==e.memoizedState)&&0!==(2&s)),a?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Cr(cs,1&s),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=r.children,e=r.fallback,i?(r=t.mode,i=t.child,c={mode:"hidden",children:c},0===(1&r)&&null!==i?(i.childLanes=0,i.pendingProps=c):i=Pl(c,r,0,null),e=Ml(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Pi(n),t.memoizedState=Mi,e):Bi(t,c));if(null!==(s=e.memoizedState)&&null!==(a=s.dehydrated))return function(e,t,n,a,r,s,i){if(n)return 256&t.flags?(t.flags&=-257,Wi(e,t,i,a=hi(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=a.fallback,r=t.mode,a=Pl({mode:"visible",children:a.children},r,0,null),(s=Ml(s,r,i,null)).flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,0!==(1&t.mode)&&Qo(t,e.child,null,i),t.child.memoizedState=Pi(i),t.memoizedState=Mi,s);if(0===(1&t.mode))return Wi(e,t,i,null);if("$!"===r.data){if(a=r.nextSibling&&r.nextSibling.dataset)var c=a.dgst;return a=c,Wi(e,t,i,a=hi(s=Error(o(419)),a,void 0))}if(c=0!==(i&e.childLanes),xi||c){if(null!==(a=Ac)){switch(i&-i){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(a.suspendedLanes|i))?0:r)&&r!==s.retryLane&&(s.retryLane=r,Ao(e,r),al(a,e,r,-1))}return gl(),Wi(e,t,i,a=hi(Error(o(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Nl.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,ao=lr(r.nextSibling),no=t,ro=!0,oo=null,null!==e&&(qr[Yr++]=Zr,qr[Yr++]=Qr,qr[Yr++]=Xr,Zr=e.id,Qr=e.overflow,Xr=t),t=Bi(t,a.children),t.flags|=4096,t)}(e,t,c,r,a,s,n);if(i){i=r.fallback,c=t.mode,a=(s=e.child).sibling;var l={mode:"hidden",children:r.children};return 0===(1&c)&&t.child!==s?((r=t.child).childLanes=0,r.pendingProps=l,t.deletions=null):(r=Dl(s,l)).subtreeFlags=14680064&s.subtreeFlags,null!==a?i=Dl(a,i):(i=Ml(i,c,n,null)).flags|=2,i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,c=null===(c=e.child.memoizedState)?Pi(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},i.memoizedState=c,i.childLanes=e.childLanes&~n,t.memoizedState=Mi,r}return e=(i=e.child).sibling,r=Dl(i,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Bi(e,t){return(t=Pl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Wi(e,t,n,a){return null!==a&&mo(a),Qo(t,e.child,null,n),(e=Bi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ui(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Io(e.return,t,n)}function Vi(e,t,n,a,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=a,o.tail=n,o.tailMode=r)}function Gi(e,t,n){var a=t.pendingProps,r=a.revealOrder,o=a.tail;if(wi(e,t,a.children,n),0!==(2&(a=cs.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ui(e,n,t);else if(19===e.tag)Ui(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Cr(cs,a),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ls(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Vi(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ls(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Vi(t,!0,n,null,o);break;case"together":Vi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ji(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hi(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Pc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ki(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function qi(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=14680064&r.subtreeFlags,a|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Yi(e,t,n){var a=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qi(t),null;case 1:case 17:return Or(t.type)&&Fr(),qi(t),null;case 3:return a=t.stateNode,os(),Tr(Rr),Tr(Nr),hs(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(il(oo),oo=null))),Fi(e,t),qi(t),null;case 5:is(t);var r=as(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)Di(e,t,n,a,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(o(166));return qi(t),null}if(e=as(es.current),ho(t)){a=t.stateNode,n=t.type;var s=t.memoizedProps;switch(a[dr]=t,a[pr]=s,e=0!==(1&t.mode),n){case"dialog":Ba("cancel",a),Ba("close",a);break;case"iframe":case"object":case"embed":Ba("load",a);break;case"video":case"audio":for(r=0;r<La.length;r++)Ba(La[r],a);break;case"source":Ba("error",a);break;case"img":case"image":case"link":Ba("error",a),Ba("load",a);break;case"details":Ba("toggle",a);break;case"input":Z(a,s),Ba("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!s.multiple},Ba("invalid",a);break;case"textarea":re(a,s),Ba("invalid",a)}for(var c in be(n,s),r=null,s)if(s.hasOwnProperty(c)){var l=s[c];"children"===c?"string"===typeof l?a.textContent!==l&&(!0!==s.suppressHydrationWarning&&Ja(a.textContent,l,e),r=["children",l]):"number"===typeof l&&a.textContent!==""+l&&(!0!==s.suppressHydrationWarning&&Ja(a.textContent,l,e),r=["children",""+l]):i.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Ba("scroll",a)}switch(n){case"input":K(a),$(a,s,!0);break;case"textarea":K(a),se(a);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(a.onclick=$a)}a=r,t.updateQueue=a,null!==a&&(t.flags|=4)}else{c=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=c.createElement(n,{is:a.is}):(e=c.createElement(n),"select"===n&&(c=e,a.multiple?c.multiple=!0:a.size&&(c.size=a.size))):e=c.createElementNS(e,n),e[dr]=t,e[pr]=a,Oi(e,t,!1,!1),t.stateNode=e;e:{switch(c=ve(n,a),n){case"dialog":Ba("cancel",e),Ba("close",e),r=a;break;case"iframe":case"object":case"embed":Ba("load",e),r=a;break;case"video":case"audio":for(r=0;r<La.length;r++)Ba(La[r],e);r=a;break;case"source":Ba("error",e),r=a;break;case"img":case"image":case"link":Ba("error",e),Ba("load",e),r=a;break;case"details":Ba("toggle",e),r=a;break;case"input":Z(e,a),r=X(e,a),Ba("invalid",e);break;case"option":default:r=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},r=P({},a,{value:void 0}),Ba("invalid",e);break;case"textarea":re(e,a),r=ae(e,a),Ba("invalid",e)}for(s in be(n,r),l=r)if(l.hasOwnProperty(s)){var u=l[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(i.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Ba("scroll",e):null!=u&&v(e,s,u,c))}switch(n){case"input":K(e),$(e,a,!1);break;case"textarea":K(e),se(e);break;case"option":null!=a.value&&e.setAttribute("value",""+j(a.value));break;case"select":e.multiple=!!a.multiple,null!=(s=a.value)?ne(e,!!a.multiple,s,!1):null!=a.defaultValue&&ne(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=$a)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qi(t),null;case 6:if(e&&null!=t.stateNode)Li(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(o(166));if(n=as(ns.current),as(es.current),ho(t)){if(a=t.stateNode,n=t.memoizedProps,a[dr]=t,(s=a.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Ja(a.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ja(a.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(a=(9===n.nodeType?n:n.ownerDocument).createTextNode(a))[dr]=t,t.stateNode=a}return qi(t),null;case 13:if(Tr(cs),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==ao&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,s=!1;else if(s=ho(t),null!==a&&null!==a.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[dr]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qi(t),s=!1}else null!==oo&&(il(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&cs.current)?0===Lc&&(Lc=3):gl())),null!==t.updateQueue&&(t.flags|=4),qi(t),null);case 4:return os(),Fi(e,t),null===e&&Va(t.stateNode.containerInfo),qi(t),null;case 10:return So(t.type._context),qi(t),null;case 19:if(Tr(cs),null===(s=t.memoizedState))return qi(t),null;if(a=0!==(128&t.flags),null===(c=s.rendering))if(a)Ki(s,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ls(e))){for(t.flags|=128,Ki(s,!1),null!==(a=c.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;null!==n;)e=a,(s=n).flags&=14680066,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cr(cs,1&cs.current|2),t.child}e=e.sibling}null!==s.tail&&Qe()>Gc&&(t.flags|=128,a=!0,Ki(s,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=ls(c))){if(t.flags|=128,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ki(s,!0),null===s.tail&&"hidden"===s.tailMode&&!c.alternate&&!ro)return qi(t),null}else 2*Qe()-s.renderingStartTime>Gc&&1073741824!==n&&(t.flags|=128,a=!0,Ki(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=s.last)?n.sibling=c:t.child=c,s.last=c)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,n=cs.current,Cr(cs,a?1&n|2:1&n),t):(qi(t),null);case 22:case 23:return dl(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Fc)&&(qi(t),6&t.subtreeFlags&&(t.flags|=8192)):qi(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xi(e,t){switch(to(t),t.tag){case 1:return Or(t.type)&&Fr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Tr(Rr),Tr(Nr),hs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return is(t),null;case 13:if(Tr(cs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Tr(cs),null;case 4:return os(),null;case 10:return So(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Oi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Fi=function(){},Di=function(e,t,n,a){var r=e.memoizedProps;if(r!==a){e=t.stateNode,as(es.current);var o,s=null;switch(n){case"input":r=X(e,r),a=X(e,a),s=[];break;case"select":r=P({},r,{value:void 0}),a=P({},a,{value:void 0}),s=[];break;case"textarea":r=ae(e,r),a=ae(e,a),s=[];break;default:"function"!==typeof r.onClick&&"function"===typeof a.onClick&&(e.onclick=$a)}for(u in be(n,a),n=null,r)if(!a.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var c=r[u];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(i.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in a){var l=a[u];if(c=null!=r?r[u]:void 0,a.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(i.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Ba("scroll",e),s||c===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Li=function(e,t,n,a){n!==a&&(t.flags|=4)};var Zi=!1,Qi=!1,Ji="function"===typeof WeakSet?WeakSet:Set,$i=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(a){Tl(e,t,a)}else n.current=null}function tc(e,t,n){try{n()}catch(a){Tl(e,t,a)}}var nc=!1;function ac(e,t,n){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var r=a=a.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&tc(t,n,o)}r=r.next}while(r!==a)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function oc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sc(e){var t=e.alternate;null!==t&&(e.alternate=null,sc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[pr],delete t[mr],delete t[gr],delete t[yr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ic(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ic(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lc(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$a));else if(4!==a&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}function uc(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var hc=null,dc=!1;function pc(e,t,n){for(n=n.child;null!==n;)fc(e,t,n),n=n.sibling}function fc(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,n)}catch(i){}switch(n.tag){case 5:Qi||ec(n,t);case 6:var a=hc,r=dc;hc=null,pc(e,t,n),dc=r,null!==(hc=a)&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hc.removeChild(n.stateNode));break;case 18:null!==hc&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?cr(e.parentNode,n):1===e.nodeType&&cr(e,n),Vt(e)):cr(hc,n.stateNode));break;case 4:a=hc,r=dc,hc=n.stateNode.containerInfo,dc=!0,pc(e,t,n),hc=a,dc=r;break;case 0:case 11:case 14:case 15:if(!Qi&&(null!==(a=n.updateQueue)&&null!==(a=a.lastEffect))){r=a=a.next;do{var o=r,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tc(n,t,s),r=r.next}while(r!==a)}pc(e,t,n);break;case 1:if(!Qi&&(ec(n,t),"function"===typeof(a=n.stateNode).componentWillUnmount))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(i){Tl(n,t,i)}pc(e,t,n);break;case 21:pc(e,t,n);break;case 22:1&n.mode?(Qi=(a=Qi)||null!==n.memoizedState,pc(e,t,n),Qi=a):pc(e,t,n);break;default:pc(e,t,n)}}function mc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ji),t.forEach((function(t){var a=Rl.bind(null,e,t);n.has(t)||(n.add(t),t.then(a,a))}))}}function gc(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var r=n[a];try{var s=e,i=t,c=i;e:for(;null!==c;){switch(c.tag){case 5:hc=c.stateNode,dc=!1;break e;case 3:case 4:hc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===hc)throw Error(o(160));fc(s,i,r),hc=null,dc=!1;var l=r.alternate;null!==l&&(l.return=null),r.return=null}catch(u){Tl(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yc(t,e),t=t.sibling}function yc(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),bc(e),4&a){try{ac(3,e,e.return),rc(3,e)}catch(g){Tl(e,e.return,g)}try{ac(5,e,e.return)}catch(g){Tl(e,e.return,g)}}break;case 1:gc(t,e),bc(e),512&a&&null!==n&&ec(n,n.return);break;case 5:if(gc(t,e),bc(e),512&a&&null!==n&&ec(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(g){Tl(e,e.return,g)}}if(4&a&&null!=(r=e.stateNode)){var s=e.memoizedProps,i=null!==n?n.memoizedProps:s,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===s.type&&null!=s.name&&Q(r,s),ve(c,i);var u=ve(c,s);for(i=0;i<l.length;i+=2){var h=l[i],d=l[i+1];"style"===h?ge(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):v(r,h,d,u)}switch(c){case"input":J(r,s);break;case"textarea":oe(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(r,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(r,!!s.multiple,s.defaultValue,!0):ne(r,!!s.multiple,s.multiple?[]:"",!1))}r[pr]=s}catch(g){Tl(e,e.return,g)}}break;case 6:if(gc(t,e),bc(e),4&a){if(null===e.stateNode)throw Error(o(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(g){Tl(e,e.return,g)}}break;case 3:if(gc(t,e),bc(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Tl(e,e.return,g)}break;case 4:default:gc(t,e),bc(e);break;case 13:gc(t,e),bc(e),8192&(r=e.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||(Vc=Qe())),4&a&&mc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Qi=(u=Qi)||h,gc(t,e),Qi=u):gc(t,e),bc(e),8192&a){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for($i=e,h=e.child;null!==h;){for(d=$i=h;null!==$i;){switch(f=(p=$i).child,p.tag){case 0:case 11:case 14:case 15:ac(4,p,p.return);break;case 1:ec(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){a=p,n=p.return;try{t=a,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tl(a,n,g)}}break;case 5:ec(p,p.return);break;case 22:if(null!==p.memoizedState){kc(d);continue}}null!==f?(f.return=p,$i=f):kc(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(c=d.stateNode,i=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",i))}catch(g){Tl(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tl(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gc(t,e),bc(e),4&a&&mc(e);case 21:}}function bc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ic(n)){var a=n;break e}n=n.return}throw Error(o(160))}switch(a.tag){case 5:var r=a.stateNode;32&a.flags&&(de(r,""),a.flags&=-33),uc(e,cc(e),r);break;case 3:case 4:var s=a.stateNode.containerInfo;lc(e,cc(e),s);break;default:throw Error(o(161))}}catch(i){Tl(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vc(e,t,n){$i=e,xc(e,t,n)}function xc(e,t,n){for(var a=0!==(1&e.mode);null!==$i;){var r=$i,o=r.child;if(22===r.tag&&a){var s=null!==r.memoizedState||Zi;if(!s){var i=r.alternate,c=null!==i&&null!==i.memoizedState||Qi;i=Zi;var l=Qi;if(Zi=s,(Qi=c)&&!l)for($i=r;null!==$i;)c=(s=$i).child,22===s.tag&&null!==s.memoizedState?Sc(r):null!==c?(c.return=s,$i=c):Sc(r);for(;null!==o;)$i=o,xc(o,t,n),o=o.sibling;$i=r,Zi=i,Qi=l}wc(e)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,$i=o):wc(e)}}function wc(e){for(;null!==$i;){var t=$i;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qi||rc(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Qi)if(null===n)a.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);a.componentDidUpdate(r,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Bo(t,s,a);break;case 3:var i=t.updateQueue;if(null!==i){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bo(t,i,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(o(163))}Qi||512&t.flags&&oc(t)}catch(p){Tl(t,t.return,p)}}if(t===e){$i=null;break}if(null!==(n=t.sibling)){n.return=t.return,$i=n;break}$i=t.return}}function kc(e){for(;null!==$i;){var t=$i;if(t===e){$i=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$i=n;break}$i=t.return}}function Sc(e){for(;null!==$i;){var t=$i;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(c){Tl(t,n,c)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var r=t.return;try{a.componentDidMount()}catch(c){Tl(t,r,c)}}var o=t.return;try{oc(t)}catch(c){Tl(t,o,c)}break;case 5:var s=t.return;try{oc(t)}catch(c){Tl(t,s,c)}}}catch(c){Tl(t,t.return,c)}if(t===e){$i=null;break}var i=t.sibling;if(null!==i){i.return=t.return,$i=i;break}$i=t.return}}var Ic,Tc=Math.ceil,Cc=x.ReactCurrentDispatcher,Ec=x.ReactCurrentOwner,Nc=x.ReactCurrentBatchConfig,Rc=0,Ac=null,_c=null,Oc=0,Fc=0,Dc=Ir(0),Lc=0,Mc=null,Pc=0,zc=0,Bc=0,Wc=null,Uc=null,Vc=0,Gc=1/0,jc=null,Hc=!1,Kc=null,qc=null,Yc=!1,Xc=null,Zc=0,Qc=0,Jc=null,$c=-1,el=0;function tl(){return 0!==(6&Rc)?Qe():-1!==$c?$c:$c=Qe()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Rc)&&0!==Oc?Oc&-Oc:null!==go.transition?(0===el&&(el=mt()),el):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function al(e,t,n,a){if(50<Qc)throw Qc=0,Jc=null,Error(o(185));yt(e,n,a),0!==(2&Rc)&&e===Ac||(e===Ac&&(0===(2&Rc)&&(zc|=n),4===Lc&&cl(e,Oc)),rl(e,a),1===n&&0===Rc&&0===(1&t.mode)&&(Gc=Qe()+500,Br&&Vr()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),i=1<<s,c=r[s];-1===c?0!==(i&n)&&0===(i&a)||(r[s]=pt(i,t)):c<=t&&(e.expiredLanes|=i),o&=~i}}(e,t);var a=dt(e,e===Ac?Oc:0);if(0===a)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Br=!0,Ur(e)}(ll.bind(null,e)):Ur(ll.bind(null,e)),sr((function(){0===(6&Rc)&&Vr()})),n=null;else{switch(xt(a)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=at}n=Al(n,ol.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ol(e,t){if($c=-1,el=0,0!==(6&Rc))throw Error(o(327));var n=e.callbackNode;if(Sl()&&e.callbackNode!==n)return null;var a=dt(e,e===Ac?Oc:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=yl(e,a);else{t=a;var r=Rc;Rc|=2;var s=ml();for(Ac===e&&Oc===t||(jc=null,Gc=Qe()+500,pl(e,t));;)try{vl();break}catch(c){fl(e,c)}ko(),Cc.current=s,Rc=r,null!==_c?t=0:(Ac=null,Oc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(a=r,t=sl(e,r))),1===t)throw n=Mc,pl(e,0),cl(e,a),rl(e,Qe()),n;if(6===t)cl(e,a);else{if(r=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var a=0;a<n.length;a++){var r=n[a],o=r.getSnapshot;r=r.value;try{if(!ia(o(),r))return!1}catch(i){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=yl(e,a))&&(0!==(s=ft(e))&&(a=s,t=sl(e,s))),1===t))throw n=Mc,pl(e,0),cl(e,a),rl(e,Qe()),n;switch(e.finishedWork=r,e.finishedLanes=a,t){case 0:case 1:throw Error(o(345));case 2:case 5:kl(e,Uc,jc);break;case 3:if(cl(e,a),(130023424&a)===a&&10<(t=Vc+500-Qe())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&a)!==a){tl(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ar(kl.bind(null,e,Uc,jc),t);break}kl(e,Uc,jc);break;case 4:if(cl(e,a),(4194240&a)===a)break;for(t=e.eventTimes,r=-1;0<a;){var i=31-st(a);s=1<<i,(i=t[i])>r&&(r=i),a&=~s}if(a=r,10<(a=(120>(a=Qe()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Tc(a/1960))-a)){e.timeoutHandle=ar(kl.bind(null,e,Uc,jc),a);break}kl(e,Uc,jc);break;default:throw Error(o(329))}}}return rl(e,Qe()),e.callbackNode===n?ol.bind(null,e):null}function sl(e,t){var n=Wc;return e.current.memoizedState.isDehydrated&&(pl(e,t).flags|=256),2!==(e=yl(e,t))&&(t=Uc,Uc=n,null!==t&&il(t)),e}function il(e){null===Uc?Uc=e:Uc.push.apply(Uc,e)}function cl(e,t){for(t&=~Bc,t&=~zc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),a=1<<n;e[n]=-1,t&=~a}}function ll(e){if(0!==(6&Rc))throw Error(o(327));Sl();var t=dt(e,0);if(0===(1&t))return rl(e,Qe()),null;var n=yl(e,t);if(0!==e.tag&&2===n){var a=ft(e);0!==a&&(t=a,n=sl(e,a))}if(1===n)throw n=Mc,pl(e,0),cl(e,t),rl(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kl(e,Uc,jc),rl(e,Qe()),null}function ul(e,t){var n=Rc;Rc|=1;try{return e(t)}finally{0===(Rc=n)&&(Gc=Qe()+500,Br&&Vr())}}function hl(e){null!==Xc&&0===Xc.tag&&0===(6&Rc)&&Sl();var t=Rc;Rc|=1;var n=Nc.transition,a=vt;try{if(Nc.transition=null,vt=1,e)return e()}finally{vt=a,Nc.transition=n,0===(6&(Rc=t))&&Vr()}}function dl(){Fc=Dc.current,Tr(Dc)}function pl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==_c)for(n=_c.return;null!==n;){var a=n;switch(to(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Fr();break;case 3:os(),Tr(Rr),Tr(Nr),hs();break;case 5:is(a);break;case 4:os();break;case 13:case 19:Tr(cs);break;case 10:So(a.type._context);break;case 22:case 23:dl()}n=n.return}if(Ac=e,_c=e=Dl(e.current,null),Oc=Fc=t,Lc=0,Mc=null,Bc=zc=Pc=0,Uc=Wc=null,null!==Eo){for(t=0;t<Eo.length;t++)if(null!==(a=(n=Eo[t]).interleaved)){n.interleaved=null;var r=a.next,o=n.pending;if(null!==o){var s=o.next;o.next=r,a.next=s}n.pending=a}Eo=null}return e}function fl(e,t){for(;;){var n=_c;try{if(ko(),ds.current=si,bs){for(var a=ms.memoizedState;null!==a;){var r=a.queue;null!==r&&(r.pending=null),a=a.next}bs=!1}if(fs=0,ys=gs=ms=null,vs=!1,xs=0,Ec.current=null,null===n||null===n.return){Lc=1,Mc=t,_c=null;break}e:{var s=e,i=n.return,c=n,l=t;if(t=Oc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=yi(i);if(null!==f){f.flags&=-257,bi(f,i,c,0,t),1&f.mode&&gi(s,u,t),l=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){gi(s,u,t),gl();break e}l=Error(o(426))}else if(ro&&1&c.mode){var y=yi(i);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),bi(y,i,c,0,t),mo(ui(l,c));break e}}s=l=ui(l,c),4!==Lc&&(Lc=2),null===Wc?Wc=[s]:Wc.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Po(s,fi(0,l,t));break e;case 1:c=l;var b=s.type,v=s.stateNode;if(0===(128&s.flags)&&("function"===typeof b.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===qc||!qc.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t,Po(s,mi(s,c,t));break e}}s=s.return}while(null!==s)}wl(n)}catch(x){t=x,_c===n&&null!==n&&(_c=n=n.return);continue}break}}function ml(){var e=Cc.current;return Cc.current=si,null===e?si:e}function gl(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Ac||0===(268435455&Pc)&&0===(268435455&zc)||cl(Ac,Oc)}function yl(e,t){var n=Rc;Rc|=2;var a=ml();for(Ac===e&&Oc===t||(jc=null,pl(e,t));;)try{bl();break}catch(r){fl(e,r)}if(ko(),Rc=n,Cc.current=a,null!==_c)throw Error(o(261));return Ac=null,Oc=0,Lc}function bl(){for(;null!==_c;)xl(_c)}function vl(){for(;null!==_c&&!Xe();)xl(_c)}function xl(e){var t=Ic(e.alternate,e,Fc);e.memoizedProps=e.pendingProps,null===t?wl(e):_c=t,Ec.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yi(n,t,Fc)))return void(_c=n)}else{if(null!==(n=Xi(n,t)))return n.flags&=32767,void(_c=n);if(null===e)return Lc=6,void(_c=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(_c=t);_c=t=e}while(null!==t);0===Lc&&(Lc=5)}function kl(e,t,n){var a=vt,r=Nc.transition;try{Nc.transition=null,vt=1,function(e,t,n,a){do{Sl()}while(null!==Xc);if(0!==(6&Rc))throw Error(o(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-st(n),o=1<<r;t[r]=0,a[r]=-1,e[r]=-1,n&=~o}}(e,s),e===Ac&&(_c=Ac=null,Oc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yc||(Yc=!0,Al(tt,(function(){return Sl(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Nc.transition,Nc.transition=null;var i=vt;vt=1;var c=Rc;Rc|=4,Ec.current=null,function(e,t){if(er=jt,pa(e=da())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var r=a.anchorOffset,s=a.focusNode;a=a.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var i=0,c=-1,l=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==r&&3!==d.nodeType||(c=i+r),d!==s||0!==a&&3!==d.nodeType||(l=i+a),3===d.nodeType&&(i+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===r&&(c=i),p===s&&++h===a&&(l=i),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},jt=!1,$i=t;null!==$i;)if(e=(t=$i).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$i=e;else for(;null!==$i;){t=$i;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:yo(t.type,g),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(w){Tl(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$i=e;break}$i=t.return}m=nc,nc=!1}(e,n),yc(n,e),fa(tr),jt=!!er,tr=er=null,e.current=n,vc(n,e,r),Ze(),Rc=c,vt=i,Nc.transition=s}else e.current=n;if(Yc&&(Yc=!1,Xc=e,Zc=r),s=e.pendingLanes,0===s&&(qc=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Qe()),null!==t)for(a=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],a(r.value,{componentStack:r.stack,digest:r.digest});if(Hc)throw Hc=!1,e=Kc,Kc=null,e;0!==(1&Zc)&&0!==e.tag&&Sl(),s=e.pendingLanes,0!==(1&s)?e===Jc?Qc++:(Qc=0,Jc=e):Qc=0,Vr()}(e,t,n,a)}finally{Nc.transition=r,vt=a}return null}function Sl(){if(null!==Xc){var e=xt(Zc),t=Nc.transition,n=vt;try{if(Nc.transition=null,vt=16>e?16:e,null===Xc)var a=!1;else{if(e=Xc,Xc=null,Zc=0,0!==(6&Rc))throw Error(o(331));var r=Rc;for(Rc|=4,$i=e.current;null!==$i;){var s=$i,i=s.child;if(0!==(16&$i.flags)){var c=s.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for($i=u;null!==$i;){var h=$i;switch(h.tag){case 0:case 11:case 15:ac(8,h,s)}var d=h.child;if(null!==d)d.return=h,$i=d;else for(;null!==$i;){var p=(h=$i).sibling,f=h.return;if(sc(h),h===u){$i=null;break}if(null!==p){p.return=f,$i=p;break}$i=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}$i=s}}if(0!==(2064&s.subtreeFlags)&&null!==i)i.return=s,$i=i;else e:for(;null!==$i;){if(0!==(2048&(s=$i).flags))switch(s.tag){case 0:case 11:case 15:ac(9,s,s.return)}var b=s.sibling;if(null!==b){b.return=s.return,$i=b;break e}$i=s.return}}var v=e.current;for($i=v;null!==$i;){var x=(i=$i).child;if(0!==(2064&i.subtreeFlags)&&null!==x)x.return=i,$i=x;else e:for(i=v;null!==$i;){if(0!==(2048&(c=$i).flags))try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(k){Tl(c,c.return,k)}if(c===i){$i=null;break e}var w=c.sibling;if(null!==w){w.return=c.return,$i=w;break e}$i=c.return}}if(Rc=r,Vr(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(k){}a=!0}return a}finally{vt=n,Nc.transition=t}}return!1}function Il(e,t,n){e=Lo(e,t=fi(0,t=ui(n,t),1),1),t=tl(),null!==e&&(yt(e,1,t),rl(e,t))}function Tl(e,t,n){if(3===e.tag)Il(e,e,n);else for(;null!==t;){if(3===t.tag){Il(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===qc||!qc.has(a))){t=Lo(t,e=mi(t,e=ui(n,e),1),1),e=tl(),null!==t&&(yt(t,1,e),rl(t,e));break}}t=t.return}}function Cl(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Ac===e&&(Oc&n)===n&&(4===Lc||3===Lc&&(130023424&Oc)===Oc&&500>Qe()-Vc?pl(e,0):Bc|=n),rl(e,t)}function El(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tl();null!==(e=Ao(e,t))&&(yt(e,t,n),rl(e,n))}function Nl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),El(e,n)}function Rl(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(o(314))}null!==a&&a.delete(t),El(e,n)}function Al(e,t){return qe(e,t)}function _l(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(e,t,n,a){return new _l(e,t,n,a)}function Fl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dl(e,t){var n=e.alternate;return null===n?((n=Ol(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,a,r,s){var i=2;if(a=e,"function"===typeof e)Fl(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case S:return Ml(n.children,r,s,t);case I:i=8,r|=8;break;case T:return(e=Ol(12,n,t,2|r)).elementType=T,e.lanes=s,e;case R:return(e=Ol(13,n,t,r)).elementType=R,e.lanes=s,e;case A:return(e=Ol(19,n,t,r)).elementType=A,e.lanes=s,e;case F:return Pl(n,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:i=10;break e;case E:i=9;break e;case N:i=11;break e;case _:i=14;break e;case O:i=16,a=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ol(i,n,t,r)).elementType=e,t.type=a,t.lanes=s,t}function Ml(e,t,n,a){return(e=Ol(7,e,a,t)).lanes=n,e}function Pl(e,t,n,a){return(e=Ol(22,e,a,t)).elementType=F,e.lanes=n,e.stateNode={isHidden:!1},e}function zl(e,t,n){return(e=Ol(6,e,null,t)).lanes=n,e}function Bl(e,t,n){return(t=Ol(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wl(e,t,n,a,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=a,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ul(e,t,n,a,r,o,s,i,c){return e=new Wl(e,t,n,i,c),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ol(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),e}function Vl(e){if(!e)return Er;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Or(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Or(n))return Lr(e,n,t)}return t}function Gl(e,t,n,a,r,o,s,i,c){return(e=Ul(n,a,!0,e,0,o,0,i,c)).context=Vl(null),n=e.current,(o=Do(a=tl(),r=nl(n))).callback=void 0!==t&&null!==t?t:null,Lo(n,o,r),e.current.lanes=r,yt(e,r,a),rl(e,a),e}function jl(e,t,n,a){var r=t.current,o=tl(),s=nl(r);return n=Vl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Do(o,s)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=Lo(r,t,s))&&(al(e,r,s,o),Mo(e,r,s)),s}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ql(e,t){Kl(e,t),(e=e.alternate)&&Kl(e,t)}Ic=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Rr.current)xi=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xi=!1,function(e,t,n){switch(t.tag){case 3:Ai(t),fo();break;case 5:ss(t);break;case 1:Or(t.type)&&Mr(t);break;case 4:rs(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,r=t.memoizedProps.value;Cr(bo,a._currentValue),a._currentValue=r;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(Cr(cs,1&cs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zi(e,t,n):(Cr(cs,1&cs.current),null!==(e=Hi(e,t,n))?e.sibling:null);Cr(cs,1&cs.current);break;case 19:if(a=0!==(n&t.childLanes),0!==(128&e.flags)){if(a)return Gi(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cr(cs,cs.current),a)break;return null;case 22:case 23:return t.lanes=0,Ti(e,t,n)}return Hi(e,t,n)}(e,t,n);xi=0!==(131072&e.flags)}else xi=!1,ro&&0!==(1048576&t.flags)&&$r(t,Kr,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;ji(e,t),e=t.pendingProps;var r=_r(t,Nr.current);To(t,n),r=Is(null,t,a,e,r,n);var s=Ts();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Or(a)?(s=!0,Mr(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Oo(t),r.updater=Vo,t.stateNode=r,r._reactInternals=t,Ko(t,a,e,n),t=Ri(null,t,a,!0,s,n)):(t.tag=0,ro&&s&&eo(t),wi(null,t,r,n),t=t.child),t;case 16:a=t.elementType;e:{switch(ji(e,t),e=t.pendingProps,a=(r=a._init)(a._payload),t.type=a,r=t.tag=function(e){if("function"===typeof e)return Fl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===_)return 14}return 2}(a),e=yo(a,e),r){case 0:t=Ei(null,t,a,e,n);break e;case 1:t=Ni(null,t,a,e,n);break e;case 11:t=ki(null,t,a,e,n);break e;case 14:t=Si(null,t,a,yo(a.type,e),n);break e}throw Error(o(306,a,""))}return t;case 0:return a=t.type,r=t.pendingProps,Ei(e,t,a,r=t.elementType===a?r:yo(a,r),n);case 1:return a=t.type,r=t.pendingProps,Ni(e,t,a,r=t.elementType===a?r:yo(a,r),n);case 3:e:{if(Ai(t),null===e)throw Error(o(387));a=t.pendingProps,r=(s=t.memoizedState).element,Fo(e,t),zo(t,a,null,n);var i=t.memoizedState;if(a=i.element,s.isDehydrated){if(s={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=_i(e,t,a,n,r=ui(Error(o(423)),t));break e}if(a!==r){t=_i(e,t,a,n,r=ui(Error(o(424)),t));break e}for(ao=lr(t.stateNode.containerInfo.firstChild),no=t,ro=!0,oo=null,n=Jo(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),a===r){t=Hi(e,t,n);break e}wi(e,t,a,n)}t=t.child}return t;case 5:return ss(t),null===e&&lo(t),a=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,i=r.children,nr(a,r)?i=null:null!==s&&nr(a,s)&&(t.flags|=32),Ci(e,t),wi(e,t,i,n),t.child;case 6:return null===e&&lo(t),null;case 13:return zi(e,t,n);case 4:return rs(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=Qo(t,null,a,n):wi(e,t,a,n),t.child;case 11:return a=t.type,r=t.pendingProps,ki(e,t,a,r=t.elementType===a?r:yo(a,r),n);case 7:return wi(e,t,t.pendingProps,n),t.child;case 8:case 12:return wi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,r=t.pendingProps,s=t.memoizedProps,i=r.value,Cr(bo,a._currentValue),a._currentValue=i,null!==s)if(ia(s.value,i)){if(s.children===r.children&&!Rr.current){t=Hi(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){i=s.child;for(var l=c.firstContext;null!==l;){if(l.context===a){if(1===s.tag){(l=Do(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Io(s.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===s.tag)i=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(i=s.return))throw Error(o(341));i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Io(i,n,t),i=s.sibling}else i=s.child;if(null!==i)i.return=s;else for(i=s;null!==i;){if(i===t){i=null;break}if(null!==(s=i.sibling)){s.return=i.return,i=s;break}i=i.return}s=i}wi(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,a=t.pendingProps.children,To(t,n),a=a(r=Co(r)),t.flags|=1,wi(e,t,a,n),t.child;case 14:return r=yo(a=t.type,t.pendingProps),Si(e,t,a,r=yo(a.type,r),n);case 15:return Ii(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,r=t.pendingProps,r=t.elementType===a?r:yo(a,r),ji(e,t),t.tag=1,Or(a)?(e=!0,Mr(t)):e=!1,To(t,n),jo(t,a,r),Ko(t,a,r,n),Ri(null,t,a,!0,e,n);case 19:return Gi(e,t,n);case 22:return Ti(e,t,n)}throw Error(o(156,t.tag))};var Yl="function"===typeof reportError?reportError:function(e){console.error(e)};function Xl(e){this._internalRoot=e}function Zl(e){this._internalRoot=e}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $l(){}function eu(e,t,n,a,r){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof r){var i=r;r=function(){var e=Hl(s);i.call(e)}}jl(t,s,e,r)}else s=function(e,t,n,a,r){if(r){if("function"===typeof a){var o=a;a=function(){var e=Hl(s);o.call(e)}}var s=Gl(t,a,e,0,null,!1,0,"",$l);return e._reactRootContainer=s,e[fr]=s.current,Va(8===e.nodeType?e.parentNode:e),hl(),s}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof a){var i=a;a=function(){var e=Hl(c);i.call(e)}}var c=Ul(e,0,!1,null,0,!1,0,"",$l);return e._reactRootContainer=c,e[fr]=c.current,Va(8===e.nodeType?e.parentNode:e),hl((function(){jl(t,c,n,a)})),c}(n,t,e,r,a);return Hl(s)}Zl.prototype.render=Xl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));jl(e,t,null,null)},Zl.prototype.unmount=Xl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hl((function(){jl(null,e,null,null)})),t[fr]=null}},Zl.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ft.length&&0!==t&&t<Ft[n].priority;n++);Ft.splice(n,0,e),0===n&&Pt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(bt(t,1|n),rl(t,Qe()),0===(6&Rc)&&(Gc=Qe()+500,Vr()))}break;case 13:hl((function(){var t=Ao(e,1);if(null!==t){var n=tl();al(t,e,1,n)}})),ql(e,1)}},kt=function(e){if(13===e.tag){var t=Ao(e,134217728);if(null!==t)al(t,e,134217728,tl());ql(e,134217728)}},St=function(e){if(13===e.tag){var t=nl(e),n=Ao(e,t);if(null!==n)al(n,e,t,tl());ql(e,t)}},It=function(){return vt},Tt=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var r=wr(a);if(!r)throw Error(o(90));q(a),J(a,r)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=ul,Re=hl;var tu={usingClientEntryPoint:!1,Events:[vr,xr,wr,Ce,Ee,ul]},nu={findFiberByHostInstance:br,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},au={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{rt=ru.inject(au),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ql(t))throw Error(o(200));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ql(e))throw Error(o(299));var n=!1,a="",r=Yl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Ul(e,1,!1,null,0,n,0,a,r),e[fr]=t.current,Va(8===e.nodeType?e.parentNode:e),new Xl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ql(e))throw Error(o(405));var a=null!=n&&n.hydratedSources||null,r=!1,s="",i=Yl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(i=n.onRecoverableError)),t=Gl(t,null,e,1,null!=n?n:null,r,0,s,i),e[fr]=t.current,Va(e),a)for(e=0;e<a.length;e++)r=(r=(n=a[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Zl(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(o(40));return!!e._reactRootContainer&&(hl((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=ul,t.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!Jl(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,a)},t.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,n)=>{"use strict";var a=n(7950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8456:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNavigator=t.isBrowser=t.off=t.on=t.noop=void 0;t.noop=function(){},t.on=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)},t.isBrowser="undefined"!==typeof window,t.isNavigator="undefined"!==typeof navigator},3932:(e,t,n)=>{"use strict";var a=n(6326),r=n(5043),o=a.__importDefault(n(9123));t.A=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={loading:!1});var s=r.useRef(0),i=o.default(),c=r.useState(n),l=c[0],u=c[1],h=r.useCallback((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=++s.current;return l.loading||u((function(e){return a.__assign(a.__assign({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return i()&&r===s.current&&u({value:e,loading:!1}),e}),(function(e){return i()&&r===s.current&&u({error:e,loading:!1}),e}))}),t);return[l,h]}},7589:(e,t,n)=>{"use strict";var a=n(6326),r=n(5043),o=a.__importDefault(n(9963));t.A=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=[]);var a=o.default(e,t),s=a[0],i=a[1],c=a[2];return r.useEffect(c,n),[s,i]}},1502:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(5043);t.default=function(e){a.useEffect(e,[])}},7680:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(5043),r=n(8456).isBrowser?a.useLayoutEffect:a.useEffect;t.default=r},1505:(e,t,n)=>{"use strict";var a=n(5043);t.A=function(e){var t=a.useRef(e);return t.current=e,t}},9123:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(5043);t.default=function(){var e=a.useRef(!1),t=a.useCallback((function(){return e.current}),[]);return a.useEffect((function(){return e.current=!0,function(){e.current=!1}}),[]),t}},937:(e,t,n)=>{"use strict";var a=n(6326),r=n(5043),o=a.__importDefault(n(7680));t.A=function(e,t){void 0===e&&(e=1e12),void 0===t&&(t=0);var n=r.useState(0),a=n[0],s=n[1];return o.default((function(){var n,a,r,o=function(){var t=Math.min(1,(Date.now()-r)/e);s(t),i()},i=function(){n=requestAnimationFrame(o)},c=setTimeout((function(){a=setTimeout((function(){cancelAnimationFrame(n),s(1)}),e),r=Date.now(),i()}),t);return function(){clearTimeout(a),clearTimeout(c),cancelAnimationFrame(n)}}),[e,t]),a}},174:(e,t,n)=>{"use strict";var a=n(6326),r=n(5043),o=a.__importDefault(n(4288));t.A=function(e,t){void 0===t&&(t=200);var n=r.useState(e),a=n[0],s=n[1],i=r.useRef(),c=r.useRef(null),l=r.useRef(0);return r.useEffect((function(){if(i.current)c.current=e,l.current=!0;else{s(e);var n=function(){l.current?(l.current=!1,s(c.current),i.current=setTimeout(n,t)):i.current=void 0};i.current=setTimeout(n,t)}}),[e]),o.default((function(){i.current&&clearTimeout(i.current)})),a}},9963:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(5043);t.default=function(e,t){void 0===t&&(t=0);var n=a.useRef(!1),r=a.useRef(),o=a.useRef(e),s=a.useCallback((function(){return n.current}),[]),i=a.useCallback((function(){n.current=!1,r.current&&clearTimeout(r.current),r.current=setTimeout((function(){n.current=!0,o.current()}),t)}),[t]),c=a.useCallback((function(){n.current=null,r.current&&clearTimeout(r.current)}),[]);return a.useEffect((function(){o.current=e}),[e]),a.useEffect((function(){return i(),c}),[t]),[s,c,i]}},4288:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(6326),r=n(5043),o=a.__importDefault(n(1502));t.default=function(e){var t=r.useRef(e);t.current=e,o.default((function(){return function(){return t.current()}}))}},7029:function(e,t,n){var a;a=function(e){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var a=n("react"),r=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=function(){return o=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)},s=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};function i(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,a){t.call(navigator,e,n,a)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var c=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return r(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;this.unmounted=!1,i()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(i()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),a=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),r=e.minScreenshotWidth!==t.minScreenshotWidth,o=e.minScreenshotHeight!==t.minScreenshotHeight;(a||r||o)&&(this.canvas=null,this.ctx=null),(n||a)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var a=this.getCanvas(e);return a&&a.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var a=this.video.videoWidth,r=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var o=a/r;r=(a=n.minScreenshotWidth||this.video.clientWidth)/o,n.minScreenshotHeight&&r<n.minScreenshotHeight&&(a=(r=n.minScreenshotHeight)*o)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||a,this.canvas.height=(null===e||void 0===e?void 0:e.height)||r,this.ctx=this.canvas.getContext("2d")}var s=this.ctx,i=this.canvas;return s&&i&&(i.width=(null===e||void 0===e?void 0:e.width)||i.width,i.height=(null===e||void 0===e?void 0:e.height)||i.height,n.mirrored&&(s.translate(i.width,0),s.scale(-1,1)),s.imageSmoothingEnabled=n.imageSmoothing,s.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||i.width,(null===e||void 0===e?void 0:e.height)||i.height),n.mirrored&&(s.scale(-1,1),s.translate(-i.width,0))),i},t.prototype.requestUserMedia=function(){var e=this,n=this.props,a=function(a,r){var o={video:"undefined"===typeof r||r};n.audio&&(o.audio="undefined"===typeof a||a),e.requestUserMediaId++;var s=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(o).then((function(n){e.unmounted||s!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)a(n.audioConstraints,n.videoConstraints);else{var r=function(e){return{optional:[{sourceId:e}]}},o=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,s=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(s=e.id)}));var i=o(n.audioConstraints);i&&(t=i);var c=o(n.videoConstraints);c&&(s=c),a(r(t),r(s))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(a){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,r=n.audio,i=(n.forceScreenshotSourceSize,n.disablePictureInPicture),c=(n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),l=n.style,u=void 0===l?{}:l,h=n.children,d=s(n,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),p=c?o(o({},u),{transform:(u.transform||"")+" scaleX(-1)"}):u,f={getScreenshot:this.getScreenshot.bind(this)};return a.createElement(a.Fragment,null,a.createElement("video",o({autoPlay:!0,disablePictureInPicture:i,src:t.src,muted:!r,playsInline:!0,ref:function(t){e.video=t},style:p},d)),h&&h(f))},t.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(a.Component);t.default=c},react:function(t,n){t.exports=e}}).default},e.exports=a(n(5043))},1153:(e,t,n)=>{"use strict";var a=n(5043),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var a,o={},l=null,u=null;for(a in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,a)&&!c.hasOwnProperty(a)&&(o[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===o[a]&&(o[a]=t[a]);return{$$typeof:r,type:e,key:l,ref:u,props:o,_owner:i.current}}t.jsx=l,t.jsxs=l},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var x=v.prototype=new b;x.constructor=v,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,a){var r,o={},s=null,i=null;if(null!=t)for(r in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(s=""+t.key),t)k.call(t,r)&&!I.hasOwnProperty(r)&&(o[r]=t[r]);var c=arguments.length-2;if(1===c)o.children=a;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===o[r]&&(o[r]=c[r]);return{$$typeof:n,type:e,key:s,ref:i,props:o,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,r,o,s){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var c=!1;if(null===e)c=!0;else switch(i){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case a:c=!0}}if(c)return s=s(c=e),e=""===o?"."+N(c,0):o,w(s)?(r="",null!=e&&(r=e.replace(E,"$&/")+"/"),R(s,t,r,"",(function(e){return e}))):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+e)),t.push(s)),1;if(c=0,o=""===o?".":o+":",w(e))for(var l=0;l<e.length;l++){var u=o+N(i=e[l],l);c+=R(i,t,r,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(i=e.next()).done;)c+=R(i=i.value,t,r,u=o+N(i,l++),s);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,n){if(null==e)return e;var a=[],r=0;return R(e,a,"","",(function(e){return t.call(n,e,r++)})),a}function _(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},F={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:F,ReactCurrentOwner:S};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=r,t.Profiler=s,t.PureComponent=v,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),o=e.key,s=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,i=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)k.call(t,l)&&!I.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=a;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}return{$$typeof:n,type:e.type,key:o,ref:s,props:r,_owner:i}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=F.transition;F.transition={};try{e()}finally{F.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,r=e[a];if(!(0<o(r,t)))break e;e[a]=t,e[n]=r,n=a}}function a(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,r=e.length,s=r>>>1;a<s;){var i=2*(a+1)-1,c=e[i],l=i+1,u=e[l];if(0>o(c,n))l<r&&0>o(u,c)?(e[a]=u,e[l]=n,a=l):(e[a]=c,e[i]=n,a=i);else{if(!(l<r&&0>o(u,n)))break e;e[a]=u,e[l]=n,a=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,c=i.now();t.unstable_now=function(){return i.now()-c}}var l=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=a(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(l,t)}t=a(u)}}function w(e){if(g=!1,x(e),!m)if(null!==a(l))m=!0,F(k);else{var t=a(u);null!==t&&D(w,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,b(C),C=-1),f=!0;var o=p;try{for(x(n),d=a(l);null!==d&&(!(d.expirationTime>n)||e&&!R());){var s=d.callback;if("function"===typeof s){d.callback=null,p=d.priorityLevel;var i=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof i?d.callback=i:d===a(l)&&r(l),x(n)}else r(l);d=a(l)}if(null!==d)var c=!0;else{var h=a(u);null!==h&&D(w,h.startTime-n),c=!1}return c}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,I=!1,T=null,C=-1,E=5,N=-1;function R(){return!(t.unstable_now()-N<E)}function A(){if(null!==T){var e=t.unstable_now();N=e;var n=!0;try{n=T(!0,e)}finally{n?S():(I=!1,T=null)}}else I=!1}if("function"===typeof v)S=function(){v(A)};else if("undefined"!==typeof MessageChannel){var _=new MessageChannel,O=_.port2;_.port1.onmessage=A,S=function(){O.postMessage(null)}}else S=function(){y(A,0)};function F(e){T=e,I||(I=!0,S())}function D(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,F(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return a(l)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:o,expirationTime:i=o+i,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===a(l)&&e===a(u)&&(g?(b(C),C=-1):g=!0,D(w,o-s))):(e.sortIndex=i,n(l,e),m||f||(m=!0,F(k))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},4334:(e,t,n)=>{var a=n(7359),r=n(7066),o=n(9016),s=n(9538),i=n(6288),c=n(5262),l=n(2430);l.alea=a,l.xor128=r,l.xorwow=o,l.xorshift7=s,l.xor4096=i,l.tychei=c,e.exports=l},7359:function(e,t,n){var a;!function(e,r,o){function s(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var a=.02519603282416938*(e+=t.charCodeAt(n));a-=e=a>>>0,e=(a*=e)>>>0,e+=4294967296*(a-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function c(e,t){var n=new s(e),a=t&&t.state,r=n.next;return r.int32=function(){return 4294967296*n.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=c:n.amdD&&n.amdO?void 0===(a=function(){return c}.call(t,n,t,r))||(r.exports=a):this.alea=c}(0,e=n.nmd(e),n.amdD)},5262:function(e,t,n){var a;!function(e,r,o){function s(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,a=t.d,r=t.a;return e=e<<25^e>>>7^n,n=n-a|0,a=a<<24^a>>>8^r,r=r-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-a|0,t.d=a<<16^n>>>16^r,t.a=r-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var a=0;a<n.length+20;a++)t.b^=0|n.charCodeAt(a),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function c(e,t){var n=new s(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=c:n.amdD&&n.amdO?void 0===(a=function(){return c}.call(t,n,t,r))||(r.exports=a):this.tychei=c}(0,e=n.nmd(e),n.amdD)},7066:function(e,t,n){var a;!function(e,r,o){function s(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var a=0;a<n.length+64;a++)t.x^=0|n.charCodeAt(a),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function c(e,t){var n=new s(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=c:n.amdD&&n.amdO?void 0===(a=function(){return c}.call(t,n,t,r))||(r.exports=a):this.xor128=c}(0,e=n.nmd(e),n.amdD)},6288:function(e,t,n){var a;!function(e,r,o){function s(e){var t=this;t.next=function(){var e,n,a=t.w,r=t.X,o=t.i;return t.w=a=a+1640531527|0,n=r[o+34&127],e=r[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=r[o]=n^e,t.i=o,n+(a^a>>>16)|0},function(e,t){var n,a,r,o,s,i=[],c=128;for(t===(0|t)?(a=t,t=null):(t+="\0",a=0,c=Math.max(c,t.length)),r=0,o=-32;o<c;++o)t&&(a^=t.charCodeAt((o+32)%t.length)),0===o&&(s=a),a^=a<<10,a^=a>>>15,a^=a<<4,a^=a>>>13,o>=0&&(s=s+1640531527|0,r=0==(n=i[127&o]^=a+s)?r+1:0);for(r>=128&&(i[127&(t&&t.length||0)]=-1),r=127,o=512;o>0;--o)a=i[r+34&127],n=i[r=r+1&127],a^=a<<13,n^=n<<17,a^=a>>>15,n^=n>>>12,i[r]=a^n;e.w=s,e.X=i,e.i=r}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function c(e,t){null==e&&(e=+new Date);var n=new s(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&(a.X&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=c:n.amdD&&n.amdO?void 0===(a=function(){return c}.call(t,n,t,r))||(r.exports=a):this.xor4096=c}(0,e=n.nmd(e),n.amdD)},9538:function(e,t,n){var a;!function(e,r,o){function s(e){var t=this;t.next=function(){var e,n,a=t.x,r=t.i;return e=a[r],n=(e^=e>>>7)^e<<24,n^=(e=a[r+1&7])^e>>>10,n^=(e=a[r+3&7])^e>>>3,n^=(e=a[r+4&7])^e<<7,e=a[r+7&7],n^=(e^=e<<13)^e<<9,a[r]=n,t.i=r+1&7,n},function(e,t){var n,a=[];if(t===(0|t))a[0]=t;else for(t=""+t,n=0;n<t.length;++n)a[7&n]=a[7&n]<<15^t.charCodeAt(n)+a[n+1&7]<<13;for(;a.length<8;)a.push(0);for(n=0;n<8&&0===a[n];++n);for(8==n?a[7]=-1:a[n],e.x=a,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function c(e,t){null==e&&(e=+new Date);var n=new s(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&(a.x&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=c:n.amdD&&n.amdO?void 0===(a=function(){return c}.call(t,n,t,r))||(r.exports=a):this.xorshift7=c}(0,e=n.nmd(e),n.amdD)},9016:function(e,t,n){var a;!function(e,r,o){function s(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var a=0;a<n.length+64;a++)t.x^=0|n.charCodeAt(a),a==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function c(e,t){var n=new s(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=c:n.amdD&&n.amdO?void 0===(a=function(){return c}.call(t,n,t,r))||(r.exports=a):this.xorwow=c}(0,e=n.nmd(e),n.amdD)},2430:function(e,t,n){var a;!function(r,o,s){var i,c=256,l=s.pow(c,6),u=s.pow(2,52),h=2*u,d=c-1;function p(e,t,n){var a=[],d=y(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(o)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(c):(e=new Uint8Array(c),(r.crypto||r.msCrypto).getRandomValues(e)),b(e)}catch(a){var t=r.navigator,n=t&&t.plugins;return[+new Date,r,n,r.screen,b(o)]}}():e,3),a),p=new f(a),v=function(){for(var e=p.g(6),t=l,n=0;e<u;)e=(e+n)*c,t*=c,n=p.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return v.int32=function(){return 0|p.g(4)},v.quick=function(){return p.g(4)/4294967296},v.double=v,y(b(p.S),o),(t.pass||n||function(e,t,n,a){return a&&(a.S&&m(a,p),e.state=function(){return m(p,{})}),n?(s.random=e,t):e})(v,d,"global"in t?t.global:this==s,t.state)}function f(e){var t,n=e.length,a=this,r=0,o=a.i=a.j=0,s=a.S=[];for(n||(e=[n++]);r<c;)s[r]=r++;for(r=0;r<c;r++)s[r]=s[o=d&o+e[r%n]+(t=s[r])],s[o]=t;(a.g=function(e){for(var t,n=0,r=a.i,o=a.j,s=a.S;e--;)t=s[r=d&r+1],n=n*c+s[d&(s[r]=s[o=d&o+t])+(s[o]=t)];return a.i=r,a.j=o,n})(c)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,a=[],r=typeof e;if(t&&"object"==r)for(n in e)try{a.push(g(e[n],t-1))}catch(o){}return a.length?a:"string"==r?e:e+"\0"}function y(e,t){for(var n,a=e+"",r=0;r<a.length;)t[d&r]=d&(n^=19*t[d&r])+a.charCodeAt(r++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(y(s.random(),o),e.exports){e.exports=p;try{i=n(1234)}catch(v){}}else void 0===(a=function(){return p}.call(t,n,t,e))||(e.exports=a)}("undefined"!==typeof self?self:this,[],Math)},7324:e=>{e.exports=function(e,t,n,a){var r=n?n.call(a,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),c=0;c<o.length;c++){var l=o[c];if(!i(l))return!1;var u=e[l],h=t[l];if(!1===(r=n?n.call(a,u,h,l):void 0)||void 0===r&&u!==h)return!1}return!0}},4050:()=>{},9555:()=>{},7448:()=>{},3563:()=>{},5817:()=>{},8590:()=>{},7078:()=>{},6905:()=>{},4637:()=>{},279:()=>{},4222:()=>{},1234:()=>{},2985:(e,t,n)=>{"use strict";n.d(t,{Oo:()=>D,uK:()=>F});var a,r,o=n(3016),s=Object.defineProperty,i=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))h.call(t,n)&&p(e,n,t[n]);if(u)for(var n of u(t))d.call(t,n)&&p(e,n,t[n]);return e},m=(e,t)=>i(e,c(t)),g=(e=>"undefined"!==typeof require?require:"undefined"!==typeof Proxy?new Proxy(e,{get:(e,t)=>("undefined"!==typeof require?require:e)[t]}):e)((function(e){if("undefined"!==typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')})),y=(e,t,n)=>new Promise(((a,r)=>{var o=e=>{try{i(n.next(e))}catch(t){r(t)}},s=e=>{try{i(n.throw(e))}catch(t){r(t)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,s);i((n=n.apply(e,t)).next())})),b=(a={"package.json"(e,t){t.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.4.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}},function(){return r||(0,a[l(a)[0]])((r={exports:{}}).exports,r),r.exports}),v=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],x=["suppress_chrome","is_public","is_verified"],w=e=>t=>e[t]=!!e[t],k=e=>"string"===typeof e?e:e.text,S=e=>{const t=f({},e);t.id=String(t.id),t.tags=(t.tags||[]).map(k),v.forEach(w(t)),Object.keys(t.images||{}).forEach((e=>{const n=t.images[e];n.width=parseInt(n.width),n.height=parseInt(n.height)}));const{user:n}=t;if(n){const e=f({},n);x.forEach(w(e)),t.user=e}return t},I=e=>(e.data=S(e.data),e),T=e=>(e.data=e.data.map((e=>S(e))),e),C=(("undefined"!==typeof window?window:global)||{}).GIPHY_API_URL||"https://api.giphy.com/v1/",E=class extends Error{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";super(e),this.url=t,this.status=n,this.statusText=a}},N=e=>e,R={};var A,_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{apiVersion:n=1,noCache:a=!1,normalizer:r=N}=t,o=C.replace(/\/v\d+\/$/,"/v".concat(n,"/"));if((()=>{const e=Date.now();Object.keys(R).forEach((t=>{const n=R[t].isError?6e3:6e4;e-R[t].ts>=n&&delete R[t]}))})(),!R[e]||a){const t="".concat(o).concat(e),n=()=>y(this,null,(function*(){var n;let a;try{const s=yield fetch(t,{method:"get"});if(s.ok){const e=yield s.json();if(null==(n=e.meta)?void 0:n.response_id)return r(e);throw{message:"synthetic response"}}{let n="Error fetching";try{const e=yield s.json();e.message&&(n=e.message)}catch(o){}R[e]&&(R[e].isError=!0),a=new E("".concat("@giphy/js-fetch-api: ").concat(n),t,s.status,s.statusText)}}catch(s){a=new E(s.message,t),R[e]&&(R[e].isError=!0)}throw a}));R[e]={request:n(),ts:Date.now()}}return R[e].request},O=e=>e&&e.type?e.type:"gifs",F=class{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.getQS=function(){return new URLSearchParams(f(m(f({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{api_key:t.apiKey,pingback_id:(0,o.t0)()}),t.qsParams)).toString()},this.apiKey=e,this.qsParams=n}categories(e){return _("gifs/categories?".concat(this.getQS(e)))}gif(e,t){const n=(null==t?void 0:t.internal)?"internal/":"";return _("".concat(n,"gifs/").concat(e,"?").concat(this.getQS()),{normalizer:I})}gifs(e,t){return Array.isArray(e)?_("gifs?".concat(this.getQS({ids:e.join(",")})),{normalizer:T}):_("gifs/categories/".concat(e,"/").concat(t,"?").concat(this.getQS()),{normalizer:T})}emoji(e){return _("emoji?".concat(this.getQS(e)),{normalizer:T})}emojiDefaultVariations(e){return _("emoji?".concat(this.getQS(e)),{apiVersion:2,normalizer:T})}emojiVariations(e){return _("emoji/".concat(e,"/variations?").concat(this.getQS()),{apiVersion:2,normalizer:T})}animate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getQS(m(f({},t),{m:e}));return _("text/animate?".concat(n),{normalizer:T})}search(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.channel?"@".concat(t.channel," ").concat(e):e;let a;"text"===t.type&&(a=!0);const r=this.getQS(m(f({rating:"pg-13"},t),{q:n,excludeDynamicResults:a}));return _("".concat(O(t),"/search?").concat(r),{normalizer:T})}subcategories(e,t){return _("gifs/categories/".concat(e,"?").concat(this.getQS(t)))}trending(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _("".concat(O(e),"/trending?").concat(this.getQS(f({rating:"pg-13"},e))),{normalizer:T})}random(e){return _("".concat(O(e),"/random?").concat(this.getQS(f({rating:"pg-13"},e))),{noCache:!0,normalizer:I})}related(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{type:n="gifs"}=t;return _("".concat(n,"/related?").concat(this.getQS(f({gif_id:e,rating:"pg-13"},t))),{normalizer:T})}channels(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _("channels/search?".concat(this.getQS(f({q:e,rating:"pg-13"},t))))}},D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=[...t],a=t.map((e=>e.id));let r=t.length,o=!1;return()=>y(void 0,null,(function*(){if(o)return n;const t=yield e(r),{pagination:s,data:i}=t;return r=s.count+s.offset,o=r===s.total_count,i.forEach((e=>{const{id:t}=e;a.includes(t)||(n.push(e),a.push(t))})),[...n]}))};if("undefined"!==typeof g){const{version:e}=b();(null==(A=(0,o.D6)())?void 0:A.get("X-GIPHY-SDK-NAME"))||((0,o.SU)("X-GIPHY-SDK-NAME","FetchAPI"),(0,o.SU)("X-GIPHY-SDK-VERSION",e))}},3016:(e,t,n)=>{"use strict";n.d(t,{Vy:()=>b,SU:()=>O,lm:()=>R,th:()=>C,sr:()=>T,Sj:()=>k,_2:()=>E,Vs:()=>N,D6:()=>_,t0:()=>I,Up:()=>w});const a={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let r;const o=new Uint8Array(16);function s(){if(!r&&(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}const i=[];for(let F=0;F<256;++F)i.push((F+256).toString(16).slice(1));function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}const l=function(e,t,n){if(a.randomUUID&&!t&&!e)return a.randomUUID();const r=(e=e||{}).random||(e.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return c(r)};var u=Object.defineProperty,h=Object.defineProperties,d=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y=(e,t)=>{for(var n in t||(t={}))f.call(t,n)&&g(e,n,t[n]);if(p)for(var n of p(t))m.call(t,n)&&g(e,n,t[n]);return e},b={ENABLED:"undefined"!==typeof window&&"undefined"!==typeof location&&-1!==location.search.indexOf("giphy-debug"),LEVEL:0,PREFIX:"GiphyJS",debug:function(){if(b.ENABLED&&b.LEVEL<=0){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.debug(b.PREFIX,...t)}},info:function(){if(b.ENABLED&&b.LEVEL<=1){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.info(b.PREFIX,...t)}},warn:function(){if(b.ENABLED&&b.LEVEL<=2){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn(b.PREFIX,...t)}},error:function(){if(b.ENABLED&&b.LEVEL<=3){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error(b.PREFIX,...t)}}},v=50;var x=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v,[r]=e;const o=e.filter((e=>(e.width*e.height>r.width*r.height&&(r=e),t-e.width<=a&&n-e.height<=a)));return 0===o.length?r:((e,t,n)=>{let a,r=1/0;return n.forEach((n=>{const o=n.width/e*(n.height/t),s=Math.abs(1-o);s<r&&(r=s,a=n)})),a})(t,n,o)};function w(e,t){const n={};return t.forEach((t=>{void 0!==e[t]&&(n[t]=e[t])})),n}var k=e=>{let t=0,n=0;const a=e.offsetWidth,r=e.offsetHeight;do{t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent}while(e);const o={left:t,top:n,width:a,height:r,right:t+a,bottom:n+r,x:t,y:n};return s=y({},o),h(s,d({toJSON:()=>JSON.stringify(o)}));var s},S="",I=()=>{if(!S){try{S=sessionStorage.getItem("giphyPingbackId")}catch(e){}if(!S){const n=(new Date).getTime().toString(16);try{S="".concat(n).concat(l().replace(/-/g,"")).substring(0,16)}catch(t){S=(()=>{let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<16;n++)e+=t.charAt(Math.floor(62*Math.random()));return e})()}try{sessionStorage.setItem("giphyPingbackId",S)}catch(e){}}}return S},T=(new Promise((e=>{"undefined"===typeof Image&&e(!1);const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"})),(e,t,n)=>{let a=null==e?void 0:e.assets;if(a){a=y({},a),delete a.source;const e=Object.values(a).sort(((e,t)=>e.width-t.width));return x(e,t,n)}}),C=(e,t,n,a)=>{const r=w(e,["original","fixed_width","fixed_height","fixed_width_small","fixed_height_small"]),o=Object.entries(r).map((e=>{let[t,n]=e;return y({renditionName:t},n)}));return x(o,t,n,a)},E=(e,t)=>{let{images:n}=e;const{fixed_width:a}=n;if(a){const{width:e,height:n}=a,r=e/n;return Math.round(t/r)}return 0},N=(e,t)=>{let{images:n}=e;const{fixed_width:a}=n;if(a){const{width:e,height:n}=a,r=e/n;return Math.round(t*r)}return 0},R=e=>{let{alt_text:t,user:n,tags:a=[],is_sticker:r=!1,title:o=""}=e;if(t)return t;if(o)return o;const s=n&&n.username||"",i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.slice(0,t)}((c=["transparent"],a.filter((e=>-1===c.indexOf(e)))),s?4:5);var c;return"".concat(s?"".concat(s," "):"").concat(i.join(" ")," ").concat(r?"Sticker":"GIF")},A=("undefined"!==typeof window?window:global)||{};A._GIPHY_SDK_HEADERS_=A._GIPHY_SDK_HEADERS_||(A.Headers?new A.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var _=()=>A._GIPHY_SDK_HEADERS_,O=(e,t)=>{var n;return null==(n=_())?void 0:n.set(e,t)}},6326:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__addDisposableResource:()=>D,__assign:()=>o,__asyncDelegator:()=>T,__asyncGenerator:()=>I,__asyncValues:()=>C,__await:()=>S,__awaiter:()=>f,__classPrivateFieldGet:()=>_,__classPrivateFieldIn:()=>F,__classPrivateFieldSet:()=>O,__createBinding:()=>g,__decorate:()=>i,__disposeResources:()=>M,__esDecorate:()=>l,__exportStar:()=>y,__extends:()=>r,__generator:()=>m,__importDefault:()=>A,__importStar:()=>R,__makeTemplateObject:()=>E,__metadata:()=>p,__param:()=>c,__propKey:()=>h,__read:()=>v,__rest:()=>s,__runInitializers:()=>u,__setFunctionName:()=>d,__spread:()=>x,__spreadArray:()=>k,__spreadArrays:()=>w,__values:()=>b,default:()=>P});var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},a(e,t)};function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function s(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}function i(e,t,n,a){var r,o=arguments.length,s=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,a){t(n,a,e)}}function l(e,t,n,a,r,o){function s(e){if(void 0!==e&&"function"!==typeof e)throw new TypeError("Function expected");return e}for(var i,c=a.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?a.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,a.name):{}),d=!1,p=n.length-1;p>=0;p--){var f={};for(var m in a)f[m]="access"===m?{}:a[m];for(var m in a.access)f.access[m]=a.access[m];f.addInitializer=function(e){if(d)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(e||null))};var g=(0,n[p])("accessor"===c?{get:h.get,set:h.set}:h[l],f);if("accessor"===c){if(void 0===g)continue;if(null===g||"object"!==typeof g)throw new TypeError("Object expected");(i=s(g.get))&&(h.get=i),(i=s(g.set))&&(h.set=i),(i=s(g.init))&&r.unshift(i)}else(i=s(g))&&("field"===c?r.unshift(i):h[l]=i)}u&&Object.defineProperty(u,a.name,h),d=!0}function u(e,t,n){for(var a=arguments.length>2,r=0;r<t.length;r++)n=a?t[r].call(e,n):t[r].call(e);return a?n:void 0}function h(e){return"symbol"===typeof e?e:"".concat(e)}function d(e,t,n){return"symbol"===typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function p(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,a){return new(n||(n=Promise))((function(r,o){function s(e){try{c(a.next(e))}catch(t){o(t)}}function i(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,i)}c((a=a.apply(e,t||[])).next())}))}function m(e,t){var n,a,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(s=0)),s;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(c){i=[6,c],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}var g=Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]};function y(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||g(t,e,n)}function b(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)s.push(a.value)}catch(i){r={error:i}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function x(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function w(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,i=o.length;s<i;s++,r++)a[r]=o[s];return a}function k(e,t,n){if(n||2===arguments.length)for(var a,r=0,o=t.length;r<o;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function I(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,r=n.apply(e,t||[]),o=[];return a={},s("next"),s("throw"),s("return"),a[Symbol.asyncIterator]=function(){return this},a;function s(e){r[e]&&(a[e]=function(t){return new Promise((function(n,a){o.push([e,t,n,a])>1||i(e,t)}))})}function i(e,t){try{(n=r[e](t)).value instanceof S?Promise.resolve(n.value.v).then(c,l):u(o[0][2],n)}catch(a){u(o[0][3],a)}var n}function c(e){i("next",e)}function l(e){i("throw",e)}function u(e,t){e(t),o.shift(),o.length&&i(o[0][0],o[0][1])}}function T(e){var t,n;return t={},a("next"),a("throw",(function(e){throw e})),a("return"),t[Symbol.iterator]=function(){return this},t;function a(a,r){t[a]=e[a]?function(t){return(n=!n)?{value:S(e[a](t)),done:!1}:r?r(t):t}:r}}function C(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=b(e),t={},a("next"),a("throw"),a("return"),t[Symbol.asyncIterator]=function(){return this},t);function a(n){t[n]=e[n]&&function(t){return new Promise((function(a,r){(function(e,t,n,a){Promise.resolve(a).then((function(t){e({value:t,done:n})}),t)})(a,r,(t=e[n](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var N=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function R(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&g(t,e,n);return N(t,e),t}function A(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n,a){if("a"===n&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?a:"a"===n?a.call(e):a?a.value:t.get(e)}function O(e,t,n,a,r){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?r.call(e,n):r?r.value=n:t.set(e,n),n}function F(e,t){if(null===t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof e?t===e:e.has(t)}function D(e,t,n){if(null!==t&&void 0!==t){if("object"!==typeof t&&"function"!==typeof t)throw new TypeError("Object expected.");var a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");a=t[Symbol.asyncDispose]}if(void 0===a){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");a=t[Symbol.dispose]}if("function"!==typeof a)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:a,async:n})}else n&&e.stack.push({async:!0});return t}var L="function"===typeof SuppressedError?SuppressedError:function(e,t,n){var a=new Error(n);return a.name="SuppressedError",a.error=e,a.suppressed=t,a};function M(e){function t(t){e.error=e.hasError?new L(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function n(){for(;e.stack.length;){var a=e.stack.pop();try{var r=a.dispose&&a.dispose.call(a.value);if(a.async)return Promise.resolve(r).then(n,(function(e){return t(e),n()}))}catch(o){t(o)}}if(e.hasError)throw e.error}()}const P={__extends:r,__assign:o,__rest:s,__decorate:i,__param:c,__metadata:p,__awaiter:f,__generator:m,__createBinding:g,__exportStar:y,__values:b,__read:v,__spread:x,__spreadArrays:w,__spreadArray:k,__await:S,__asyncGenerator:I,__asyncDelegator:T,__asyncValues:C,__makeTemplateObject:E,__importStar:R,__importDefault:A,__classPrivateFieldGet:_,__classPrivateFieldSet:O,__classPrivateFieldIn:F,__addDisposableResource:D,__disposeResources:M}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},(()=>{var e="function"===typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"===typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",a="function"===typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))};n.a=(n,o,s)=>{var i;s&&((i=[]).d=-1);var c,l,u,h=new Set,d=n.exports,p=new Promise(((e,t)=>{u=t,l=e}));p[t]=d,p[e]=e=>(i&&e(i),h.forEach(e),p.catch((e=>{}))),n.exports=p,o((n=>{var o;c=(n=>n.map((n=>{if(null!==n&&"object"===typeof n){if(n[e])return n;if(n.then){var o=[];o.d=0,n.then((e=>{s[t]=e,r(o)}),(e=>{s[a]=e,r(o)}));var s={};return s[e]=e=>e(o),s}}var i={};return i[e]=e=>{},i[t]=n,i})))(n);var s=()=>c.map((e=>{if(e[a])throw e[a];return e[t]})),l=new Promise((t=>{(o=()=>t(s)).r=0;var n=e=>e!==i&&!h.has(e)&&(h.add(e),e&&!e.d&&(o.r++,e.push(o)));c.map((t=>t[e](n)))}));return o.r?l:s()}),(e=>(e?u(p[a]=e):l(d),r(i)))),i&&i.d<0&&(i.d=0)}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,a)=>(n.f[a](e,t),t)),[])),n.u=e=>"static/js/"+e+".b3b09186.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="blink2:";n.l=(a,r,o,s)=>{if(e[a])e[a].push(r);else{var i,c;if(void 0!==o)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var h=l[u];if(h.getAttribute("src")==a||h.getAttribute("data-webpack")==t+o){i=h;break}}i||(c=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+o),i.src=a),e[a]=[r];var d=(t,n)=>{i.onerror=i.onload=null,clearTimeout(p);var r=e[a];if(delete e[a],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),c&&document.head.appendChild(i)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.f.j=(t,a)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var o=new Promise(((n,a)=>r=e[t]=[n,a]));a.push(r[2]=o);var s=n.p+n.u(t),i=new Error;n.l(s,(a=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",i.name="ChunkLoadError",i.type=o,i.request=s,r[1](i)}}),"chunk-"+t,t)}};var t=(t,a)=>{var r,o,s=a[0],i=a[1],c=a[2],l=0;if(s.some((t=>0!==e[t]))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(c)c(n)}for(t&&t(a);l<s.length;l++)o=s[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},a=self.webpackChunkblink2=self.webpackChunkblink2||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),n.nc=void 0;n(2812)})();
//# sourceMappingURL=main.fe2dc14c.js.map